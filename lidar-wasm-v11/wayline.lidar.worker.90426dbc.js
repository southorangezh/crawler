(()=>{"use strict";let e;var r,t,o={14734:function(e){e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},17282:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=r.deserialize=r.registerSerializer=void 0;let o=t(99017),s=o.DefaultSerializer;r.registerSerializer=function(e){s=o.extendSerializer(s,e)};r.deserialize=function(e){return s.deserialize(e)};r.serialize=function(e){return s.serialize(e)}},99017:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultSerializer=r.extendSerializer=void 0;r.extendSerializer=function(e,r){let t=e.deserialize.bind(e),o=e.serialize.bind(e);return{deserialize:e=>r.deserialize(e,t),serialize:e=>r.serialize(e,o)}};let t={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})},o=e=>e&&"object"==typeof e&&"__error_marker"in e&&"$$error"===e.__error_marker;r.DefaultSerializer={deserialize:e=>o(e)?t.deserialize(e):e,serialize:e=>e instanceof Error?t.serialize(e):e}},50036:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.$worker=r.$transferable=r.$terminate=r.$events=r.$errors=void 0,r.$errors=Symbol("thread.errors"),r.$events=Symbol("thread.events"),r.$terminate=Symbol("thread.terminate"),r.$transferable=Symbol("thread.transferable"),r.$worker=Symbol("thread.worker")},90720:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.Transfer=r.isTransferDescriptor=void 0;let o=t(50036);r.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[o.$transferable]};r.Transfer=function(e,r){if(!r){var t;if(!((t=e)&&"object"==typeof t))throw Error();r=[e]}return{[o.$transferable]:!0,send:e,transferables:r}}},75685:function(e,r){var t,o,s,i;Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,(s=r.MasterMessageType||(r.MasterMessageType={})).cancel="cancel",s.run="run",(i=r.WorkerMessageType||(r.WorkerMessageType={})).error="error",i.init="init",i.result="result",i.running="running",i.uncaughtError="uncaughtError"},93071:function(e,r){Object.defineProperty(r,"__esModule",{value:!0});r.default={isWorkerRuntime:function(){let e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return"undefined"!=typeof self&&!!self.postMessage&&!e},postMessageToMaster:function(e,r){self.postMessage(e,r)},subscribeToMasterMessages:function(e){let r=r=>{e(r.data)};return self.addEventListener("message",r),()=>{self.removeEventListener("message",r)}}}},665:function(e,r,t){var o=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))(function(s,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function n(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var r;e.done?s(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(a,n)}l((o=o.apply(e,r||[])).next())})},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.expose=r.isWorkerRuntime=r.Transfer=r.registerSerializer=void 0;let i=s(t(14734)),a=t(17282),n=t(90720),l=t(75685),u=s(t(93071));var f=t(17282);Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return f.registerSerializer}});var _=t(90720);Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return _.Transfer}}),r.isWorkerRuntime=u.default.isWorkerRuntime;let E=!1,c=new Map,d=e=>e&&e.type===l.MasterMessageType.cancel,p=e=>e&&e.type===l.MasterMessageType.run,O=e=>i.default(e)||function(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}(e);function T(e){return n.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function M(e,r){let{payload:t,transferables:o}=T(r),s={type:l.WorkerMessageType.error,uid:e,error:a.serialize(t)};u.default.postMessageToMaster(s,o)}function g(e,r,t){let{payload:o,transferables:s}=T(t),i={type:l.WorkerMessageType.result,uid:e,complete:!!r||void 0,payload:o};u.default.postMessageToMaster(i,s)}function y(e){try{let r={type:l.WorkerMessageType.uncaughtError,error:a.serialize(e)};u.default.postMessageToMaster(r)}catch(r){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",r,"\nOriginal error:",e)}}function P(e,r,t){return o(this,void 0,void 0,function*(){let o;try{o=r(...t)}catch(r){return M(e,r)}if(!function(e,r){let t={type:l.WorkerMessageType.running,uid:e,resultType:r};u.default.postMessageToMaster(t)}(e,O(o)?"observable":"promise"),O(o)){let r=o.subscribe(r=>g(e,!1,a.serialize(r)),r=>{M(e,a.serialize(r)),c.delete(e)},()=>{g(e,!0),c.delete(e)});c.set(e,r)}else try{let r=yield o;g(e,!0,a.serialize(r))}catch(r){M(e,a.serialize(r))}})}r.expose=function(e){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(E)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(E=!0,"function"==typeof e)u.default.subscribeToMasterMessages(r=>{p(r)&&!r.method&&P(r.uid,e,r.args.map(a.deserialize))}),!function(){let e={type:l.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(e)}();else if("object"==typeof e&&e)u.default.subscribeToMasterMessages(r=>{p(r)&&r.method&&P(r.uid,e[r.method],r.args.map(a.deserialize))}),!function(e){let r={type:l.WorkerMessageType.init,exposed:{type:"module",methods:e}};u.default.postMessageToMaster(r)}(Object.keys(e).filter(r=>"function"==typeof e[r]));else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);u.default.subscribeToMasterMessages(e=>{if(d(e)){let r=e.uid,t=c.get(r);t&&(t.unsubscribe(),c.delete(r))}})},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>y(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{let r=e.reason;r&&"string"==typeof r.message&&setTimeout(()=>y(r),250)})),"undefined"!=typeof process&&"function"==typeof process.on&&u.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>y(e),250)}),process.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>y(e),250)}))}},s={};function i(e){var r=s[e];if(void 0!==r)return r.exports;var t=s[e]={exports:{}};return o[e].call(t.exports,t,t.exports,i),t.exports}i.rv=function(){return"1.0.0"},i.ruid="bundler=rspack@1.0.0";var a=i("665");let n=a.expose;a.registerSerializer,a.Transfer;function l(e,r=window.WPMZInstance){let t=Uint32Array.from([e]),o=r._malloc(t.BYTES_PER_ELEMENT);return r.HEAP32.set(t,o>>2),o}function u(e,r=window.WPMZInstance){return r.HEAP32[e>>2]}async function f(e,r){let t=new Uint8Array(e),o=window.WPMZInstance.FS,s=`${DB_NAME}/${r}`;o.writeFile(s,t),o.syncfs(!1,e=>{e&&window.$reportError&&window.$reportError(e)})}function _(e,r){let t=Object.keys(r).length,o=e._allocateMemory(4*t),s=e._allocateMemory(1048576);e.setValue(o,r.reflect_percent,"float"),e.setValue(o+4,r.flight_high,"float"),e.setValue(o+8,r.flight_velocity,"float"),e.setValue(o+12,r.lidar_overlap_rate,"float"),e.setValue(o+16,r.lidar_freq_mode,"i32"),e.setValue(o+20,r.lidar_pattern_mode,"i32");let i=e._pointCloudPrediction(o,s);if(i)return i;let a=e.getValue(s,"i32"),n=(e.getValue(s+4,"i32")-a)/4,l=[];for(let r=0;r<n;r++)l.push(e.getValue(a+4*r,"float"));let u=e.getValue(s+12,"i32"),f=[];for(let r=0;r<n;r++)f.push(e.getValue(u+4*r,"float"));let _=s>>2,E=e.HEAPF32[_+6],c=e.HEAPF32[_+7],d=e.HEAPF32[_+8],p=e.HEAPF32[_+9],O=e.HEAPF32[_+10],T=e.HEAPF32[_+11],M=e.HEAPF32[_+12],g=e.HEAPF32[_+13],y=e.HEAPF32[_+14],P=e.getValue(s+60,"i32"),N=(e.getValue(s+64,"i32")-P)/4,b=[];for(let r=0;r<N;r++)b.push(e.getValue(P+4*r,"float"));let A=e.getValue(s+72,"i32"),m=[];for(let r=0;r<N;r++)m.push(e.getValue(A+4*r,"float"));let S=e.HEAPF32[_+21],L=e.HEAPF32[_+22],h=e.HEAPF32[_+23],I=e.HEAPF32[_+24],v=e.getValue(s+100,"i32"),R=(e.getValue(s+104,"i32")-v)/4,F=[];for(let r=0;r<R;r++)F.push(e.getValue(v+4*r,"float"));let z=e.getValue(s+112,"i32"),D=[];for(let r=0;r<R;r++)D.push(e.getValue(z+4*r,"float"));let G=e.HEAPF32[_+31],H=e.HEAPF32[_+32],w=e.HEAPF32[_+33],C=e.HEAPF32[_+34],k=e.getValue(s+140,"i32"),V=(e.getValue(s+144,"i32")-k)/4,W=[];for(let r=0;r<V;r++)W.push(e.getValue(k+4*r,"float"));let x=e.getValue(s+152,"i32"),j=[];for(let r=0;r<V;r++)j.push(e.getValue(x+4*r,"float"));let $=e.HEAPF32[_+41],U=e.HEAPF32[_+42],Y=e.HEAPF32[_+43],X=e.HEAPF32[_+44],Z=e.HEAPF32[_+45];return e._freeMemory(o),e._freeMemory(s),{fig_1_x:l,fig_1_y:f,fig_1_min_y_point_x:E,fig_1_min_y_point_y:c,fig_1_disp_y_lb:d,fig_1_disp_y_ub:p,fig_1_disp_x_lb:O,fig_1_disp_x_ub:T,fig_1_reference_yline_1:M,fig_1_reference_yline_2:g,fig_1_reference_yline_3:y,fig_2_x:b,fig_2_y:m,fig_2_disp_y_lb:S,fig_2_disp_y_ub:L,fig_2_disp_x_lb:h,fig_2_disp_x_ub:I,fig_3_x:F,fig_3_y:D,fig_3_disp_y_lb:G,fig_3_disp_y_ub:H,fig_3_disp_x_lb:w,fig_3_disp_x_ub:C,fig_4_x:W,fig_4_y:j,fig_4_disp_y_lb:$,fig_4_disp_y_ub:U,fig_4_disp_x_lb:Y,fig_4_disp_x_ub:X,avg_point_density:Z}}!function(e){e[e.TooFewPoints=1]="TooFewPoints"}(r||(r={}));!function(e){e[e.IDLE=0]="IDLE",e[e.SUCCESS=1]="SUCCESS",e[e.WARNING=2]="WARNING",e[e.POLYLINE_TOO_LONG=3]="POLYLINE_TOO_LONG",e[e.POLYGON_TOO_LARGE=4]="POLYGON_TOO_LARGE",e[e.POLYGON_COMPLEX=5]="POLYGON_COMPLEX",e[e.POLYGON_TOO_LESS_POINTS=6]="POLYGON_TOO_LESS_POINTS",e[e.POLYGON_TOO_MANY_POINTS=7]="POLYGON_TOO_MANY_POINTS",e[e.DSM_FILE_NOT_FOUND=8]="DSM_FILE_NOT_FOUND",e[e.ANGLE_EXCEED_RANGE=9]="ANGLE_EXCEED_RANGE",e[e.HEIGHT_EXCEEDED=10]="HEIGHT_EXCEEDED",e[e.RELATIVE_DISTANCE_EXCEED_RANGE=11]="RELATIVE_DISTANCE_EXCEED_RANGE",e[e.MARGIN_EXCEED_RANGE=12]="MARGIN_EXCEED_RANGE",e[e.OVERLAP_EXCEED_RANGE=13]="OVERLAP_EXCEED_RANGE",e[e.FLIGHT_POINTS_TOO_LESS=14]="FLIGHT_POINTS_TOO_LESS",e[e.FLIGHT_POINTS_TOO_MANY=15]="FLIGHT_POINTS_TOO_MANY",e[e.FLIGHT_SPEED_EXCEED_RANGE=16]="FLIGHT_SPEED_EXCEED_RANGE",e[e.MULTI_TIME_SHOT_TOO_QUICK=17]="MULTI_TIME_SHOT_TOO_QUICK",e[e.MULTI_TIME_SHOT_TOO_SLOW=18]="MULTI_TIME_SHOT_TOO_SLOW",e[e.NO_TEMPLATE=19]="NO_TEMPLATE",e[e.CAMERA_INFO_NOT_FOUND=20]="CAMERA_INFO_NOT_FOUND",e[e.CAMERA_INFO_ERROR=21]="CAMERA_INFO_ERROR",e[e.DAMPING_DISTANCE_ERROR=22]="DAMPING_DISTANCE_ERROR",e[e.OUT_OF_MEMORY=23]="OUT_OF_MEMORY",e[e.USER_STOP=24]="USER_STOP",e[e.NFZ_ZONE_TOO_COMPLEX=33]="NFZ_ZONE_TOO_COMPLEX",e[e.UNKNOWN=255]="UNKNOWN"}(t||(t={}));importScripts("/lidar-wasm-v11/liblidar.js");let E=globalThis.LidarModule().then(r=>{e=r});n({LidarPointCloudPrediction:async r=>(await E,_(e,r))})})();
//# sourceMappingURL=wayline.lidar.worker.90426dbc.js.map