(()=>{"use strict";let e;var r,t,n={14734:function(e){e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},17282:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=r.deserialize=r.registerSerializer=void 0;let n=t(99017),o=n.DefaultSerializer;r.registerSerializer=function(e){o=n.extendSerializer(o,e)};r.deserialize=function(e){return o.deserialize(e)};r.serialize=function(e){return o.serialize(e)}},99017:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultSerializer=r.extendSerializer=void 0;r.extendSerializer=function(e,r){let t=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize:e=>r.deserialize(e,t),serialize:e=>r.serialize(e,n)}};let t={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})},n=e=>e&&"object"==typeof e&&"__error_marker"in e&&"$$error"===e.__error_marker;r.DefaultSerializer={deserialize:e=>n(e)?t.deserialize(e):e,serialize:e=>e instanceof Error?t.serialize(e):e}},50036:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.$worker=r.$transferable=r.$terminate=r.$events=r.$errors=void 0,r.$errors=Symbol("thread.errors"),r.$events=Symbol("thread.events"),r.$terminate=Symbol("thread.terminate"),r.$transferable=Symbol("thread.transferable"),r.$worker=Symbol("thread.worker")},90720:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.Transfer=r.isTransferDescriptor=void 0;let n=t(50036);r.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[n.$transferable]};r.Transfer=function(e,r){if(!r){var t;if(!((t=e)&&"object"==typeof t))throw Error();r=[e]}return{[n.$transferable]:!0,send:e,transferables:r}}},75685:function(e,r){var t,n,o,s;Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,(o=r.MasterMessageType||(r.MasterMessageType={})).cancel="cancel",o.run="run",(s=r.WorkerMessageType||(r.WorkerMessageType={})).error="error",s.init="init",s.result="result",s.running="running",s.uncaughtError="uncaughtError"},93071:function(e,r){Object.defineProperty(r,"__esModule",{value:!0});r.default={isWorkerRuntime:function(){let e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return"undefined"!=typeof self&&!!self.postMessage&&!e},postMessageToMaster:function(e,r){self.postMessage(e,r)},subscribeToMasterMessages:function(e){let r=r=>{e(r.data)};return self.addEventListener("message",r),()=>{self.removeEventListener("message",r)}}}},665:function(e,r,t){var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))(function(o,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?o(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(i,a)}l((n=n.apply(e,r||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.expose=r.isWorkerRuntime=r.Transfer=r.registerSerializer=void 0;let s=o(t(14734)),i=t(17282),a=t(90720),l=t(75685),u=o(t(93071));var _=t(17282);Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return _.registerSerializer}});var f=t(90720);Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return f.Transfer}}),r.isWorkerRuntime=u.default.isWorkerRuntime;let c=!1,E=new Map,d=e=>e&&e.type===l.MasterMessageType.cancel,O=e=>e&&e.type===l.MasterMessageType.run,T=e=>s.default(e)||function(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}(e);function p(e){return a.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function M(e,r){let{payload:t,transferables:n}=p(r),o={type:l.WorkerMessageType.error,uid:e,error:i.serialize(t)};u.default.postMessageToMaster(o,n)}function y(e,r,t){let{payload:n,transferables:o}=p(t),s={type:l.WorkerMessageType.result,uid:e,complete:!!r||void 0,payload:n};u.default.postMessageToMaster(s,o)}function N(e){try{let r={type:l.WorkerMessageType.uncaughtError,error:i.serialize(e)};u.default.postMessageToMaster(r)}catch(r){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",r,"\nOriginal error:",e)}}function b(e,r,t){return n(this,void 0,void 0,function*(){let n;try{n=r(...t)}catch(r){return M(e,r)}if(!function(e,r){let t={type:l.WorkerMessageType.running,uid:e,resultType:r};u.default.postMessageToMaster(t)}(e,T(n)?"observable":"promise"),T(n)){let r=n.subscribe(r=>y(e,!1,i.serialize(r)),r=>{M(e,i.serialize(r)),E.delete(e)},()=>{y(e,!0),E.delete(e)});E.set(e,r)}else try{let r=yield n;y(e,!0,i.serialize(r))}catch(r){M(e,i.serialize(r))}})}r.expose=function(e){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(c)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(c=!0,"function"==typeof e)u.default.subscribeToMasterMessages(r=>{O(r)&&!r.method&&b(r.uid,e,r.args.map(i.deserialize))}),!function(){let e={type:l.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(e)}();else if("object"==typeof e&&e)u.default.subscribeToMasterMessages(r=>{O(r)&&r.method&&b(r.uid,e[r.method],r.args.map(i.deserialize))}),!function(e){let r={type:l.WorkerMessageType.init,exposed:{type:"module",methods:e}};u.default.postMessageToMaster(r)}(Object.keys(e).filter(r=>"function"==typeof e[r]));else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);u.default.subscribeToMasterMessages(e=>{if(d(e)){let r=e.uid,t=E.get(r);t&&(t.unsubscribe(),E.delete(r))}})},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>N(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{let r=e.reason;r&&"string"==typeof r.message&&setTimeout(()=>N(r),250)})),"undefined"!=typeof process&&"function"==typeof process.on&&u.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>N(e),250)}),process.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>N(e),250)}))}},o={};function s(e){var r=o[e];if(void 0!==r)return r.exports;var t=o[e]={exports:{}};return n[e].call(t.exports,t,t.exports,s),t.exports}s.rv=function(){return"1.0.0"},s.ruid="bundler=rspack@1.0.0";var i=s("665");let a=i.expose;i.registerSerializer,i.Transfer;function l(e,r=window.WPMZInstance){let t=Uint32Array.from([e]),n=r._malloc(t.BYTES_PER_ELEMENT);return r.HEAP32.set(t,n>>2),n}function u(e,r=window.WPMZInstance){return r.HEAP32[e>>2]}async function _(e,r){let t=new Uint8Array(e),n=window.WPMZInstance.FS,o=`${DB_NAME}/${r}`;n.writeFile(o,t),n.syncfs(!1,e=>{e&&window.$reportError&&window.$reportError(e)})}!function(e){e[e.TooFewPoints=1]="TooFewPoints"}(r||(r={}));!function(e){e[e.IDLE=0]="IDLE",e[e.SUCCESS=1]="SUCCESS",e[e.WARNING=2]="WARNING",e[e.POLYLINE_TOO_LONG=3]="POLYLINE_TOO_LONG",e[e.POLYGON_TOO_LARGE=4]="POLYGON_TOO_LARGE",e[e.POLYGON_COMPLEX=5]="POLYGON_COMPLEX",e[e.POLYGON_TOO_LESS_POINTS=6]="POLYGON_TOO_LESS_POINTS",e[e.POLYGON_TOO_MANY_POINTS=7]="POLYGON_TOO_MANY_POINTS",e[e.DSM_FILE_NOT_FOUND=8]="DSM_FILE_NOT_FOUND",e[e.ANGLE_EXCEED_RANGE=9]="ANGLE_EXCEED_RANGE",e[e.HEIGHT_EXCEEDED=10]="HEIGHT_EXCEEDED",e[e.RELATIVE_DISTANCE_EXCEED_RANGE=11]="RELATIVE_DISTANCE_EXCEED_RANGE",e[e.MARGIN_EXCEED_RANGE=12]="MARGIN_EXCEED_RANGE",e[e.OVERLAP_EXCEED_RANGE=13]="OVERLAP_EXCEED_RANGE",e[e.FLIGHT_POINTS_TOO_LESS=14]="FLIGHT_POINTS_TOO_LESS",e[e.FLIGHT_POINTS_TOO_MANY=15]="FLIGHT_POINTS_TOO_MANY",e[e.FLIGHT_SPEED_EXCEED_RANGE=16]="FLIGHT_SPEED_EXCEED_RANGE",e[e.MULTI_TIME_SHOT_TOO_QUICK=17]="MULTI_TIME_SHOT_TOO_QUICK",e[e.MULTI_TIME_SHOT_TOO_SLOW=18]="MULTI_TIME_SHOT_TOO_SLOW",e[e.NO_TEMPLATE=19]="NO_TEMPLATE",e[e.CAMERA_INFO_NOT_FOUND=20]="CAMERA_INFO_NOT_FOUND",e[e.CAMERA_INFO_ERROR=21]="CAMERA_INFO_ERROR",e[e.DAMPING_DISTANCE_ERROR=22]="DAMPING_DISTANCE_ERROR",e[e.OUT_OF_MEMORY=23]="OUT_OF_MEMORY",e[e.USER_STOP=24]="USER_STOP",e[e.NFZ_ZONE_TOO_COMPLEX=33]="NFZ_ZONE_TOO_COMPLEX",e[e.UNKNOWN=255]="UNKNOWN"}(t||(t={}));importScripts("./libppe.js");let f=globalThis.PPEModule().then(r=>{e=r});a({async PPEGenerateWayline(r){let n;await f;let o=e,s=o.allocateUTF8(r),i=o.lengthBytesUTF8(r),a=o._malloc(4),l=o._malloc(4),u="",_=t.UNKNOWN;try{n=o._generate_waylines_json(s,i,a,l),u=o.UTF8ToString(n),_=function(e,r=window.WPMZInstance){return r.HEAP32[e>>2]}(a,o)}catch(e){e&&window.$reportError&&window.$reportError(e)}return o._free(s),o._free(a),o._free(l),void 0!==n&&o._clear_json_data(n),[u,_]},async PPEGetWaylineInfoWithRoundTripTime(r,t){let n;let o=e,s=o.allocateUTF8(r),i=o.lengthBytesUTF8(r),a=o._malloc(16),l="";try{n=o._get_wayline_info_with_round_trip_time_json(s,i,a,null==t?0:t),l=o.UTF8ToString(n)}catch(e){e&&window.$reportError&&window.$reportError(e)}return o._free(s),o._free(a),void 0!==n&&o._clear_json_data(n),l}})})();
//# sourceMappingURL=ppe.wasm.worker.07fd34a0.js.map