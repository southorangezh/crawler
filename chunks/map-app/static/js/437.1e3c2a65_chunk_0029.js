{
  "metadata": {
    "source_file": "map-app\\static\\js\\437.1e3c2a65.js",
    "chunk_index": 29,
    "total_chunks": 52,
    "chunk_size": 48863,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.919Z"
  },
  "content": "e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re};var rn=function(){};rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.computeDistance=function(){if(arguments[2]instanceof re&&arguments[0]instanceof tY&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new e6,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof re&&arguments[0]instanceof t0&&arguments[1]instanceof S){var s=arguments[0],u=arguments[1],l=arguments[2];rn.computeDistance(s.getExteriorRing(),u,l);for(var c=0;c<s.getNumInteriorRing();c++)rn.computeDistance(s.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof re&&arguments[0]instanceof tf&&arguments[1]instanceof S){var f=arguments[0],h=arguments[1],p=arguments[2];if(f instanceof tY)rn.computeDistance(f,h,p);else if(f instanceof t0)rn.computeDistance(f,h,p);else if(f instanceof tH)for(var d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);rn.computeDistance(g,h,p)}else p.setMinimum(f.getCoordinate(),h)}else if(arguments[2]instanceof re&&arguments[0]instanceof e6&&arguments[1]instanceof S){var m=arguments[0],y=arguments[1],_=arguments[2],b=m.closestPoint(y);_.setMinimum(b,y)}};var rr=function(){this._g0=null,this._g1=null,this._ptDist=new re,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},ri={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};rr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},rr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new _(\"Fraction is not in range (0.0 - 1.0]\");this._densifyFrac=t},rr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},rr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},rr.prototype.computeOrientedDistance=function(t,e,n){var r=new ro(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new ra(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},rr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.distance=function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];return new rr(t,e).distance()}if(3==arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new rr(n,r);return o.setDensifyFraction(i),o.distance()}},ri.MaxPointDistanceFilter.get=function(){return ro},ri.MaxDensifiedByFractionDistanceFilter.get=function(){return ra},Object.defineProperties(rr,ri);var ro=function(){this._maxPtDist=new re,this._minPtDist=new re,this._euclideanDist=new rn,this._geom=null;var t=arguments[0];this._geom=t};ro.prototype.filter=function(t){this._minPtDist.initialize(),rn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ro.prototype.getMaxPointDistance=function(){return this._maxPtDist},ro.prototype.interfaces_=function(){return[td]},ro.prototype.getClass=function(){return ro};var ra=function(){this._maxPtDist=new re,this._minPtDist=new re,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};ra.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=new S(n.x+a*i,n.y+a*o);this._minPtDist.initialize(),rn.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},ra.prototype.isDone=function(){return!1},ra.prototype.isGeometryChanged=function(){return!1},ra.prototype.getMaxPointDistance=function(){return this._maxPtDist},ra.prototype.interfaces_=function(){return[tU]},ra.prototype.getClass=function(){return ra};var rs=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},ru={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};rs.prototype.checkMaximumDistance=function(t,e,n){var r=new rr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg=\"Distance between buffer curve and input is too large (\"+this._maxDistanceFound+\" at \"+Q.toLineString(i[0],i[1])+\")\"}},rs.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=rs.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),rs.VERBOSE&&V.out.println(\"Min Dist= \"+this._minDistanceFound+\" err= \"+(1-this._minDistanceFound/this._bufDistance)+\" Max Dist= \"+this._maxDistanceFound+\" err= \"+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},rs.prototype.checkNegativeValid=function(){if(!(this._input instanceof t0||this._input instanceof t3||this._input instanceof tH))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},rs.prototype.getErrorIndicator=function(){return this._errorIndicator},rs.prototype.checkMinimumDistance=function(t,e,n){var r=new rt(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg=\"Distance between buffer curve and input is too small (\"+this._minDistanceFound+\" at \"+Q.toLineString(i[0],i[1])+\" )\"}},rs.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},rs.prototype.getErrorLocation=function(){return this._errorLocation},rs.prototype.getPolygonLines=function(t){for(var e=new tC,n=new n4(e),r=n3.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},rs.prototype.getErrorMessage=function(){return this._errMsg},rs.prototype.interfaces_=function(){return[]},rs.prototype.getClass=function(){return rs},ru.VERBOSE.get=function(){return!1},ru.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(rs,ru);var rl=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},rc={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};rl.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},rl.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*rl.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new q(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new q(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg=\"Buffer envelope is incorrect\",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report(\"Envelope\")},rl.prototype.checkDistance=function(){var t=new rs(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report(\"Distance\")},rl.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg=\"Area of positive buffer is smaller than input\",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg=\"Area of negative buffer is larger than input\",this._errorIndicator=this._result),this.report(\"Area\")},rl.prototype.checkPolygonal=function(){this._result instanceof t0||this._result instanceof t3||(this._isValid=!1),this._errorMsg=\"Result is not polygonal\",this._errorIndicator=this._result,this.report(\"Polygonal\")},rl.prototype.getErrorIndicator=function(){return this._errorIndicator},rl.prototype.getErrorLocation=function(){return this._errorLocation},rl.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg=\"Result is non-empty\",this._errorIndicator=this._result),void this.report(\"ExpectedEmpty\"))},rl.prototype.report=function(t){if(!rl.VERBOSE)return null;V.out.println(\"Check \"+t+\": \"+(this._isValid?\"passed\":\"FAILED\"))},rl.prototype.getErrorMessage=function(){return this._errorMsg},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.isValidMsg=function(t,e,n){var r=new rl(t,e,n);return r.isValid()?null:r.getErrorMessage()},rl.isValid=function(t,e,n){return!!new rl(t,e,n).isValid()},rc.VERBOSE.get=function(){return!1},rc.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(rl,rc);var rf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};rf.prototype.getCoordinates=function(){return this._pts},rf.prototype.size=function(){return this._pts.length},rf.prototype.getCoordinate=function(t){return this._pts[t]},rf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},rf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:e1.octant(this.getCoordinate(t),this.getCoordinate(t+1))},rf.prototype.setData=function(t){this._data=t},rf.prototype.getData=function(){return this._data},rf.prototype.toString=function(){return Q.toLineString(new t9(this._pts))},rf.prototype.interfaces_=function(){return[e2]},rf.prototype.getClass=function(){return rf};var rh=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new tC,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};rh.prototype.getInteriorIntersection=function(){return this._interiorIntersection},rh.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},rh.prototype.getIntersectionSegments=function(){return this._intSegments},rh.prototype.count=function(){return this._intersectionCount},rh.prototype.getIntersections=function(){return this._intersections},rh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},rh.prototype.setKeepIntersections=function(t){this._keepIntersections=t},rh.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection()||t===n&&e===r||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,r)))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=[,,,,].fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},rh.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},rh.prototype.hasIntersection=function(){return null!==this._interiorIntersection},rh.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},rh.prototype.interfaces_=function(){return[nA]},rh.prototype.getClass=function(){return rh},rh.createAllIntersectionsFinder=function(t){var e=new rh(t);return e.setFindAllIntersections(!0),e},rh.createAnyIntersectionFinder=function(t){return new rh(t)},rh.createIntersectionCounter=function(t){var e=new rh(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var rp=function(){this._li=new to,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};rp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},rp.prototype.getIntersections=function(){return this._segInt.getIntersections()},rp.prototype.isValid=function(){return this.execute(),this._isValid},rp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},rp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new rh(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new nn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},rp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new e_(this.getErrorMessage(),this._segInt.getInteriorIntersection())},rp.prototype.getErrorMessage=function(){if(this._isValid)return\"no intersections found\";var t=this._segInt.getIntersectionSegments();return\"found non-noded intersection between \"+Q.toLineString(t[0],t[1])+\" and \"+Q.toLineString(t[2],t[3])},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.computeIntersections=function(t){var e=new rp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var rd=function t(){this._nv=null;var e=arguments[0];this._nv=new rp(t.toSegmentStrings(e))};rd.prototype.checkValid=function(){this._nv.checkValid()},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},rd.toSegmentStrings=function(t){for(var e=new tC,n=t.iterator();n.hasNext();){var r=n.next();e.add(new rf(r.getCoordinates(),r))}return e},rd.checkValid=function(t){new rd(t).checkValid()};var rg=function(t){this._mapOp=t};rg.prototype.map=function(t){for(var e=new tC,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(eu.toGeometryArray(e))},rg.prototype.interfaces_=function(){return[]},rg.prototype.getClass=function(){return rg},rg.map=function(t,e){return new rg(e).map(t)};var rm=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new tC,this._resultLineList=new tC;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};rm.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},rm.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},rm.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},rm.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!rY.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},rm.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},rm.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},rm.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},rm.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(tn.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(rY.isResultOfOp(r,e)&&e===rY.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},rm.prototype.interfaces_=function(){return[]},rm.prototype.getClass=function(){return rm};var ry=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new tC;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};ry.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},ry.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===rY.INTERSECTION)){var r=n.getLabel();rY.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},ry.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},ry.prototype.interfaces_=function(){return[]},ry.prototype.getClass=function(){return ry};var rv=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};rv.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},rv.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof t2&&!r.isEmpty()||(n=!1);for(var i=new tC,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof t2||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new tC;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},rv.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},rv.prototype.getInputGeometry=function(){return this._inputGeom},rv.prototype.transformMultiLineString=function(t,e){for(var n=new tC,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},rv.prototype.transformCoordinates=function(t,e){return this.copy(t)},rv.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},rv.prototype.transformMultiPoint=function(t,e){for(var n=new tC,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},rv.prototype.transformMultiPolygon=function(t,e){for(var n=new tC,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},rv.prototype.copy=function(t){return t.copy()},rv.prototype.transformGeometryCollection=function(t,e){for(var n=new tC,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(eu.toGeometryArray(n)):this._factory.buildGeometry(n)},rv.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof tJ)return this.transformPoint(t,null);if(t instanceof t1)return this.transformMultiPoint(t,null);if(t instanceof t2)return this.transformLinearRing(t,null);if(t instanceof tY)return this.transformLineString(t,null);if(t instanceof tW)return this.transformMultiLineString(t,null);if(t instanceof t0)return this.transformPolygon(t,null);if(t instanceof t3)return this.transformMultiPolygon(t,null);if(t instanceof tH)return this.transformGeometryCollection(t,null);throw new _(\"Unknown Geometry subtype: \"+t.getClass().getName())},rv.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},rv.prototype.interfaces_=function(){return[]},rv.prototype.getClass=function(){return rv};var r_=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new e6,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof tY&&\"number\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&\"number\"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};r_.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},r_.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length&&!t.equals2D(e[n]);n++){;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},r_.prototype.snapTo=function(t){var e=new tD(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},r_.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},r_.prototype.findSegmentIndexToSnap=function(t,e){for(var n=b.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return -1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},r_.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},r_.prototype.interfaces_=function(){return[]},r_.prototype.getClass=function(){return r_},r_.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var rb=function(t){this._srcGeom=t||null},rx={SNAP_PRECISION_FACTOR:{configurable:!0}};rb.prototype.snapTo=function(t,e){return new rE(e,this.extractTargetCoordinates(t)).transform(this._srcGeom)},rb.prototype.snapToSelf=function(t,e){var n=new rE(t,this.extractTargetCoordinates(this._srcGeom),!0).transform(this._srcGeom),r=n;return e&&T(r,tQ)&&(r=n.buffer(0)),r},rb.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},rb.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray([].fill(null))},rb.prototype.computeMinimumSegmentLength=function(t){for(var e=b.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},rb.prototype.interfaces_=function(){return[]},rb.prototype.getClass=function(){return rb},rb.snap=function(t,e,n){var r=[,,].fill(null),i=new rb(t);r[0]=i.snapTo(e,n);var o=new rb(e);return r[1]=o.snapTo(r[0],n),r},rb.computeOverlaySnapTolerance=function(){if(1==arguments.length){var t=arguments[0],e=rb.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ei.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2==arguments.length){var i=arguments[0],o=arguments[1];return Math.min(rb.computeOverlaySnapTolerance(i),rb.computeOverlaySnapTolerance(o))}},rb.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*rb.SNAP_PRECISION_FACTOR},rb.snapToSelf=function(t,e,n){return new rb(t).snapToSelf(e,n)},rx.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(rb,rx);var rE=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new r_(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rv),rw=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};rw.prototype.getCommon=function(){return b.longBitsToDouble(this._commonBits)},rw.prototype.add=function(t){var e=b.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=rw.signExpBits(this._commonBits),this._isFirst=!1,null):rw.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):void(this._commonMantissaBitsCount=rw.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=rw.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount)))},rw.prototype.toString=function(){if(1==arguments.length){var t=arguments[0],e=b.longBitsToDouble(t),n=\"0000000000000000000000000000000000000000000000000000000000000000\"+b.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+\" \"+r.substring(1,12)+\"(exp) \"+r.substring(12)+\" [ \"+e+\" ]\"}},rw.prototype.interfaces_=function(){return[]},rw.prototype.getClass=function(){return rw},rw.getBit=function(t,e){return 0!=(t&1<<e)?1:0},rw.signExpBits=function(t){return t>>52},rw.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},rw.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(rw.getBit(t,r)!==rw.getBit(e,r))return n;n++}return 52};var rC=function(){this._commonCoord=null,this._ccFilter=new rD},rS={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};rC.prototype.addCommonBits=function(t){var e=new rI(this._commonCoord);t.apply(e),t.geometryChanged()},rC.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new rI(e);return t.apply(n),t.geometryChanged(),t},rC.prototype.getCommonCoordinate=function(){return this._commonCoord},rC.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},rC.prototype.interfaces_=function(){return[]},rC.prototype.getClass=function(){return rC},rS.CommonCoordinateFilter.get=function(){return rD},rS.Translater.get=function(){return rI},Object.defineProperties(rC,rS);var rD=function(){this._commonBitsX=new rw,this._commonBitsY=new rw};rD.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},rD.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},rD.prototype.interfaces_=function(){return[td]},rD.prototype.getClass=function(){return rD};var rI=function(){this.trans=null;var t=arguments[0];this.trans=t};rI.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},rI.prototype.isDone=function(){return!1},rI.prototype.isGeometryChanged=function(){return!0},rI.prototype.interfaces_=function(){return[tU]},rI.prototype.getClass=function(){return rI};var rA=function(t,e){this._geom=[,,].fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rA.prototype.selfSnap=function(t){return new rb(t).snapTo(t,this._snapTolerance)},rA.prototype.removeCommonBits=function(t){this._cbr=new rC,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=[,,].fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rA.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rA.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=rY.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rA.prototype.checkValid=function(t){t.isValid()||V.out.println(\"Snapped geometry is invalid\")},rA.prototype.computeSnapTolerance=function(){this._snapTolerance=rb.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rA.prototype.snap=function(t){var e=this.removeCommonBits(t);return rb.snap(e[0],e[1],this._snapTolerance)},rA.prototype.interfaces_=function(){return[]},rA.prototype.getClass=function(){return rA},rA.overlayOp=function(t,e,n){return new rA(t,e).getResultGeometry(n)},rA.union=function(t,e){return rA.overlayOp(t,e,rY.UNION)},rA.intersection=function(t,e){return rA.overlayOp(t,e,rY.INTERSECTION)},rA.symDifference=function(t,e){return rA.overlayOp(t,e,rY.SYMDIFFERENCE)},rA.difference=function(t,e){return rA.overlayOp(t,e,rY.DIFFERENCE)};var rN=function(t,e){this._geom=[,,].fill(null),this._geom[0]=t,this._geom[1]=e};rN.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=rY.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof tt))throw t;r=t}if(!n)try{e=rA.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof tt?r:t}return e},rN.prototype.interfaces_=function(){return[]},rN.prototype.getClass=function(){return rN},rN.overlayOp=function(t,e,n){return new rN(t,e).getResultGeometry(n)},rN.union=function(t,e){return rN.overlayOp(t,e,rY.UNION)},rN.intersection=function(t,e){return rN.overlayOp(t,e,rY.INTERSECTION)},rN.symDifference=function(t,e){return rN.overlayOp(t,e,rY.SYMDIFFERENCE)},rN.difference=function(t,e){return rN.overlayOp(t,e,rY.DIFFERENCE)};var rO=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};rO.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},rO.prototype.interfaces_=function(){return[]},rO.prototype.getClass=function(){return rO};var rT=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2==arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3==arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},rM={INSERT:{configurable:!0},DELETE:{configurable:!0}};rT.prototype.isDelete=function(){return this._eventType===rT.DELETE},rT.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},rT.prototype.getObject=function(){return this._obj},rT.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},rT.prototype.getInsertEvent=function(){return this._insertEvent},rT.prototype.isInsert=function(){return this._eventType===rT.INSERT},rT.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},rT.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},rT.prototype.interfaces_=function(){return[E]},rT.prototype.getClass=function(){return rT},rM.INSERT.get=function(){return 1},rM.DELETE.get=function(){return 2},Object.defineProperties(rT,rM);var rP=function(){};rP.prototype.interfaces_=function(){return[]},rP.prototype.getClass=function(){return rP};var rL=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};rL.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(rL.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},rL.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},rL.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},rL.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},rL.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},rL.prototype.hasProperIntersection=function(){return this._hasProper},rL.prototype.hasIntersection=function(){return this._hasIntersection},rL.prototype.isDone=function(){return this._isDone},rL.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},rL.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=[,,].fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},rL.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},rL.prototype.interfaces_=function(){return[]},rL.prototype.getClass=function(){return rL},rL.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var rF=function(t){function e(){t.call(this),this.events=new tC,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){eW.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1==arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3==arguments.length){if(arguments[2]instanceof rL&&T(arguments[0],tw)&&T(arguments[1],tw)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if(\"boolean\"==typeof arguments[2]&&T(arguments[0],tw)&&arguments[1]instanceof rL){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new rO(n,i),a=new rT(e,n.getMinX(i),o);this.events.add(a),this.events.add(new rT(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1==arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2==arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();this.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rP),rR=function(){this._min=b.POSITIVE_INFINITY,this._max=b.NEGATIVE_INFINITY},rk={NodeComparator:{configurable:!0}};rR.prototype.getMin=function(){return this._min},rR.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},rR.prototype.getMax=function(){return this._max},rR.prototype.toString=function(){return Q.toLineString(new S(this._min,0),new S(this._max,0))},rR.prototype.interfaces_=function(){return[]},rR.prototype.getClass=function(){return rR},rk.NodeComparator.get=function(){return rB},Object.defineProperties(rR,rk);var rB=function(){};rB.prototype.compare=function(t,e){var n=(t._min+t._max)/2,r=(e._min+e._max)/2;return n<r?-1:n>r?1:0},rB.prototype.interfaces_=function(){return[C]},rB.prototype.getClass=function(){return rB};var rz=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rR),rj=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rR),r$=function(){this._leaves=new tC,this._root=null,this._level=0};r$.prototype.buildTree=function(){eW.sort(this._leaves,new rR.NodeComparator);for(var t=this._leaves,e=null,n=new tC;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},r$.prototype.insert=function(t,e,n){if(null!==this._root)throw Error(\"Index cannot be added to once it has been queried\");this._leaves.add(new rz(t,e,n))},r$.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},r$.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},r$.prototype.printNode=function(t){V.out.println(Q.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},r$.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},r$.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new rj(t.get(n),t.get(n+1));e.add(i)}}},r$.prototype.interfaces_=function(){return[]},r$.prototype.getClass=function(){return r$};var rU=function(){this._items=new tC};rU.prototype.visitItem=function(t){this._items.add(t)},rU.prototype.getItems=function(){return this._items},rU.prototype.interfaces_=function(){return[ej]},rU.prototype.getClass=function(){return rU};var rH=function(){this._index=null;var t=arguments[0];if(!T(t,tQ))throw new _(\"Argument must be Polygonal\");this._index=new rG(t)},rW={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};rH.prototype.locate=function(t){var e=new ts(t),n=new rV(e);return this._index.query(t.y,t.y,n),e.getLocation()},rH.prototype.interfaces_=function(){return[nb]},rH.prototype.getClass=function(){return rH},rW.SegmentVisitor.get=function(){return rV},rW.IntervalIndexedGeometry.get=function(){return rG},Object.defineProperties(rH,rW);var rV=function(){this._counter=null;var t=arguments[0];this._counter=t};rV.prototype.visitItem=function(t){this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},rV.prototype.interfaces_=function(){return[ej]},rV.prototype.getClass=function(){return rV};var rG=function(){this._index=new r$;var t=arguments[0];this.init(t)};rG.prototype.init=function(t){for(var e=n4.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},rG.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new e6(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},rG.prototype.query=function(){if(2==arguments.length){var t=arguments[0],e=arguments[1],n=new rU;return this._index.query(t,e,n),n.getItems()}if(3==arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},rG.prototype.interfaces_=function(){return[]},rG.prototype.getClass=function(){return rG};var rq=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new er,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new n6,2==arguments.length){var e=arguments[0],n=arguments[1],r=tg.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3==arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;N.NONE,r.getLocation(t,em.ON)===N.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3==arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new rL(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof t2||this._parentGeom instanceof t0||this._parentGeom instanceof t3;return a.computeIntersections(this._edges,o,r||!s),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new rL(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof tJ){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,N.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,N.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),N.EXTERIOR,N.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,N.INTERIOR,N.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],N.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],N.BOUNDARY)},e.prototype.addLineString=function(t){var e=tI.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nR(e,new ew(this._argIndex,N.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tn.isTrue(e.length>=2,\"found LineString with single point\"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===N.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=tI.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;tu.isCCW(r)&&(i=n,o=e);var a=new nR(r,new ew(this._argIndex,N.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],N.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new ew(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new rF},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!=arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof t3&&(this._useBoundaryDeterminationRule=!1),e instanceof t0)this.addPolygon(e);else if(e instanceof tY)this.addLineString(e);else if(e instanceof tJ)this.addPoint(e);else if(e instanceof t1)this.addCollection(e);else if(e instanceof tW)this.addCollection(e);else if(e instanceof t3)this.addCollection(e);else{if(!(e instanceof tH))throw Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return T(this._parentGeom,tQ)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new rH(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1==arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?N.BOUNDARY:N.INTERIOR},e}(eF),rZ=function(){if(this._li=new to,this._resultPrecisionModel=null,this._arg=null,1==arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=[,].fill(null),this._arg[0]=new rq(0,t)}else if(2==arguments.length){var e=arguments[0],n=arguments[1],r=tg.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=[,,].fill(null),this._arg[0]=new rq(0,e,r),this._arg[1]=new rq(1,n,r)}else if(3==arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=[,,].fill(null),this._arg[0]=new rq(0,i,a),this._arg[1]=new rq(1,o,a)}};rZ.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},rZ.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},rZ.prototype.interfaces_=function(){return[]},rZ.prototype.getClass=function(){return rZ};var rX=function(){};rX.prototype.interfaces_=function(){return[]},rX.prototype.getClass=function(){return rX},rX.map=function(){if(arguments[0]instanceof tf&&T(arguments[1],rX.MapOp)){for(var t=arguments[0],e=arguments[1],n=new tC,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(T(arguments[0],tx)&&T(arguments[1],rX.MapOp)){for(var o=arguments[0],a=arguments[1],s=new tC,u=o.iterator();u.hasNext();){var l=u.next(),c=a.map(l);null!==c&&s.add(c)}return s}},rX.MapOp=function(){};var rY=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new n6,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new nI,this._resultPolyList=new tC,this._resultLineList=new tC,this._resultPointList=new tC,this._graph=new eF(new nS),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var"
}