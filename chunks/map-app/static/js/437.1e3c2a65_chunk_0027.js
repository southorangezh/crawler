{
  "metadata": {
    "source_file": "map-app\\static\\js\\437.1e3c2a65.js",
    "chunk_index": 27,
    "total_chunks": 52,
    "chunk_size": 53654,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.917Z"
  },
  "content": "S(i.p1.x+s.x,i.p1.y+s.y);this._segList.addPt(u),this._segList.addPt(l)}},nh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},nh.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=G.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof W))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},nh.prototype.addFilletCorner=function(t,e,n,r,i){var o,a=e.x-t.x,s=Math.atan2(e.y-t.y,a),u=n.x-t.x,l=Math.atan2(n.y-t.y,u);r===tu.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},nh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*nh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ni.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ni.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},nh.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},nh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},nh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},nh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},nh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},nh.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=nc.angle(i,this._seg0.p0),a=nc.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=nc.normalize(o+a),u=nc.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),f=new S(i.x+l*Math.cos(u),i.y+l*Math.sin(u)),h=new e6(i,f),p=h.pointAlongOffset(1,c),d=h.pointAlongOffset(1,-c);this._side===em.LEFT?(this._segList.addPt(p),this._segList.addPt(d)):(this._segList.addPt(d),this._segList.addPt(p))},nh.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===em.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},nh.prototype.addFilletArc=function(t,e,n,r,i){var o=r===tu.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,c=new S;l<a;){var f=e+o*l;c.x=t.x+i*Math.cos(f),c.y=t.y+i*Math.sin(f),this._segList.addPt(c),l+=u}},nh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*nh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},nh.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},nh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},nh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new nu,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*nh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},nh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===ni.JOIN_BEVEL||this._bufParams.getJoinStyle()===ni.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,tu.CLOCKWISE,this._distance))},nh.prototype.closeRing=function(){this._segList.closeRing()},nh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},np.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},np.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},np.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},np.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(nh,np);var nd=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};nd.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&tI.reverse(o),o},nd.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=na.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],em.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=na.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],em.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()},nd.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===em.RIGHT&&(r=-r);var i=na.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},nd.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=na.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],em.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=na.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],em.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},nd.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case ni.CAP_ROUND:e.createCircle(t);break;case ni.CAP_SQUARE:e.createSquare(t)}},nd.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,r):this.computeLineBufferCurve(t,r),r.getCoordinates()},nd.prototype.getBufferParameters=function(){return this._bufParams},nd.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},nd.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return nd.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},nd.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=na.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],em.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=na.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],em.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()},nd.prototype.getSegGen=function(t){return new nh(this._precisionModel,this._bufParams,t)},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.copyCoordinates=function(t){for(var e=Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var ng=function(){this._subgraphs=null,this._seg=new e6,this._cga=new tu;var t=arguments[0];this._subgraphs=t},nm={DepthSegment:{configurable:!0}};ng.prototype.findStabbedSegments=function(){if(1==arguments.length){for(var t=arguments[0],e=new tC,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3==arguments.length){if(T(arguments[2],tw)&&arguments[0]instanceof S&&arguments[1]instanceof eP){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x)&&!(this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||tu.computeOrientation(this._seg.p0,this._seg.p1,o)===tu.RIGHT)){var c=a.getDepth(em.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(em.RIGHT));var f=new ny(this._seg,c);s.add(f)}}else if(T(arguments[2],tw)&&arguments[0]instanceof S&&T(arguments[1],tw))for(var h=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(h,m,d)}}},ng.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:eW.min(e)._leftDepth},ng.prototype.interfaces_=function(){return[]},ng.prototype.getClass=function(){return ng},nm.DepthSegment.get=function(){return ny},Object.defineProperties(ng,nm);var ny=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new e6(t),this._leftDepth=e};ny.prototype.compareTo=function(t){if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return -1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==e?e:0!=(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?e:this._upwardSeg.compareTo(t._upwardSeg)},ny.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},ny.prototype.toString=function(){return this._upwardSeg.toString()},ny.prototype.interfaces_=function(){return[E]},ny.prototype.getClass=function(){return ny};var nv=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};nv.prototype.area=function(){return nv.area(this.p0,this.p1,this.p2)},nv.prototype.signedArea=function(){return nv.signedArea(this.p0,this.p1,this.p2)},nv.prototype.interpolateZ=function(t){if(null===t)throw new _(\"Supplied point is null.\");return nv.interpolateZ(t,this.p0,this.p1,this.p2)},nv.prototype.longestSideLength=function(){return nv.longestSideLength(this.p0,this.p1,this.p2)},nv.prototype.isAcute=function(){return nv.isAcute(this.p0,this.p1,this.p2)},nv.prototype.circumcentre=function(){return nv.circumcentre(this.p0,this.p1,this.p2)},nv.prototype.area3D=function(){return nv.area3D(this.p0,this.p1,this.p2)},nv.prototype.centroid=function(){return nv.centroid(this.p0,this.p1,this.p2)},nv.prototype.inCentre=function(){return nv.inCentre(this.p0,this.p1,this.p2)},nv.prototype.interfaces_=function(){return[]},nv.prototype.getClass=function(){return nv},nv.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},nv.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},nv.det=function(t,e,n,r){return t*r-e*n},nv.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,f=t.x-i,h=t.y-o;return e.z+(l*f-s*h)/c*(n.z-e.z)+(-u*f+a*h)/c*(r.z-e.z)},nv.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},nv.isAcute=function(t,e,n){return!!nc.isAcute(t,e,n)&&!!nc.isAcute(e,n,t)&&!!nc.isAcute(n,t,e)},nv.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,l=2*nv.det(o,a,s,u);return new S(r-nv.det(a,o*o+a*a,u,s*s+u*u)/l,i+nv.det(o,o*o+a*a,s,s*s+u*u)/l)},nv.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new G(t.x+n/2,t.y+r/2,1),o=new G(t.x-r+n/2,t.y+n+r/2,1);return new G(i,o)},nv.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new S(t.x+i*o,t.y+i*a)},nv.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,l=i*u-o*s,c=o*a-r*u,f=r*s-i*a;return Math.sqrt(l*l+c*c+f*f)/2},nv.centroid=function(t,e,n){return new S((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},nv.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o;return new S((r*t.x+i*e.x+o*n.x)/a,(r*t.y+i*e.y+o*n.y)/a)};var n_=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new tC;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};n_.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,N.EXTERIOR,N.INTERIOR)},n_.prototype.addPolygon=function(t){var e=this._distance,n=em.LEFT;this._distance<0&&(e=-this._distance,n=em.RIGHT);var r=t.getExteriorRing(),i=tI.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance)||this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,N.EXTERIOR,N.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=tI.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,em.opposite(n),N.INTERIOR,N.EXTERIOR)}},n_.prototype.isTriangleErodedCompletely=function(t,e){var n=new nv(t[0],t[1],t[2]),r=n.inCentre();return tu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},n_.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=tI.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,N.EXTERIOR,N.INTERIOR)},n_.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new e4(t,new ew(0,N.BOUNDARY,e,n));this._curveList.add(r)},n_.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},n_.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<t2.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=t2.MINIMUM_VALID_SIZE&&tu.isCCW(t)&&(o=i,a=r,n=em.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},n_.prototype.add=function(t){if(t.isEmpty())return null;t instanceof t0?this.addPolygon(t):t instanceof tY?this.addLineString(t):t instanceof tJ?this.addPoint(t):t instanceof t1?this.addCollection(t):t instanceof tW?this.addCollection(t):t instanceof t3?this.addCollection(t):t instanceof tH&&this.addCollection(t)},n_.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},n_.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},n_.prototype.interfaces_=function(){return[]},n_.prototype.getClass=function(){return n_};var nb=function(){};nb.prototype.locate=function(t){},nb.prototype.interfaces_=function(){return[]},nb.prototype.getClass=function(){return nb};var nx=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};nx.prototype.next=function(){if(this._atStart)return this._atStart=!1,nx.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof tH?(this._subcollectionIterator=new nx(t),this._subcollectionIterator.next()):t},nx.prototype.remove=function(){throw Error(this.getClass().getName())},nx.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},nx.prototype.interfaces_=function(){return[tE]},nx.prototype.getClass=function(){return nx},nx.isAtomic=function(t){return!(t instanceof tH)};var nE=function(){this._geom=null;var t=arguments[0];this._geom=t};nE.prototype.locate=function(t){return nE.locate(t,this._geom)},nE.prototype.interfaces_=function(){return[nb]},nE.prototype.getClass=function(){return nE},nE.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&tu.isPointInRing(t,e.getCoordinates())},nE.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!nE.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(nE.isPointInRing(t,i))return!1}return!0},nE.containsPoint=function(t,e){if(e instanceof t0)return nE.containsPointInPolygon(t,e);if(e instanceof tH)for(var n=new nx(e);n.hasNext();){var r=n.next();if(r!==e&&nE.containsPoint(t,r))return!0}return!1},nE.locate=function(t,e){return e.isEmpty()?N.EXTERIOR:nE.containsPoint(t,e)?N.INTERIOR:N.EXTERIOR};var nw=function(){this._edgeMap=new f,this._edgeList=null,this._ptInAreaLocation=[N.NONE,N.NONE]};nw.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},nw.prototype.propagateSideLabels=function(t){for(var e=N.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,em.LEFT)!==N.NONE&&(e=r.getLocation(t,em.LEFT))}if(e===N.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,em.ON)===N.NONE&&s.setLocation(t,em.ON,i),s.isArea(t)){var u=s.getLocation(t,em.LEFT),l=s.getLocation(t,em.RIGHT);if(l!==N.NONE){if(l!==i)throw new e_(\"side location conflict\",a.getCoordinate());u===N.NONE&&tn.shouldNeverReachHere(\"found single null side (at \"+a.getCoordinate()+\")\"),i=u}else tn.isTrue(s.getLocation(t,em.LEFT)===N.NONE,\"found single null side\"),s.setLocation(t,em.RIGHT,i),s.setLocation(t,em.LEFT,i)}}},nw.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},nw.prototype.print=function(t){V.out.println(\"EdgeEndStar: \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},nw.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},nw.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(0>=e.size())return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,em.LEFT);tn.isTrue(r!==N.NONE,\"Found unlabelled area edge\");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();tn.isTrue(a.isArea(t),\"Found non-area edge\");var s=a.getLocation(t,em.LEFT),u=a.getLocation(t,em.RIGHT);if(s===u||u!==i)return!1;i=s}return!0},nw.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return -1},nw.prototype.iterator=function(){return this.getEdges().iterator()},nw.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new tC(this._edgeMap.values())),this._edgeList},nw.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===N.NONE&&(this._ptInAreaLocation[t]=nE.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},nw.prototype.toString=function(){var t=new L;t.append(\"EdgeEndStar: \"+this.getCoordinate()),t.append(\"\\n\");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(\"\\n\")}return t.toString()},nw.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},nw.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===N.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=N.NONE;if(e[u])l=N.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,t)}s.setAllLocationsIfNull(u,l)}},nw.prototype.getDegree=function(){return this._edgeMap.size()},nw.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},nw.prototype.interfaces_=function(){return[]},nw.prototype.getClass=function(){return nw};var nC=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new e_(\"no outgoing dirEdge found\",this.getCoordinate());tn.isTrue(t.isInResult(),\"unable to link last incoming dirEdge\"),e.setNext(t)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return eO.isNorthern(i)&&eO.isNorthern(o)?n:eO.isNorthern(i)||eO.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(tn.shouldNeverReachHere(\"found two horizontal edges incident on node\"),null):r},e.prototype.print=function(t){V.out.println(\"DirectedEdgeStar: \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print(\"out \"),n.print(t),t.println(),t.print(\"in \"),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new tC;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1==arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(em.LEFT),r=t.getDepth(em.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new e_(\"depth mismatch at \"+t.getCoordinate())}else if(3==arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=o;u<a;u++){var l=this._edgeList.get(u);l.setEdgeDepths(em.RIGHT,s),s=l.getDepth(em.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(tn.isTrue(null!==e,\"found null for first outgoing dirEdge\"),tn.isTrue(e.getEdgeRing()===t,\"unable to link last incoming dirEdge\"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0==arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1==arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=N.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=N.INTERIOR;break}if(r.isInResult()){t=N.EXTERIOR;break}}}if(t===N.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===N.INTERIOR):(a.isInResult()&&(i=N.EXTERIOR),s.isInResult()&&(i=N.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new ew(N.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==N.INTERIOR&&o!==N.BOUNDARY||this._label.setLocation(i,N.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nw),nS=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new eA(t,new nC)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(eL),nD=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};nD.prototype.compareTo=function(t){return nD.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},nD.prototype.interfaces_=function(){return[E]},nD.prototype.getClass=function(){return nD},nD.orientation=function(t){return 1===tI.increasingDirection(t)},nD.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var f=(u+=i)===a,h=(l+=o)===s;if(f&&!h)return -1;if(!f&&h)return 1;if(f&&h)return 0}};var nI=function(){this._edges=new tC,this._ocaMap=new f};nI.prototype.print=function(t){t.print(\"MULTILINESTRING ( \");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(\",\"),t.print(\"(\");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(\",\"),t.print(r[i].x+\" \"+r[i].y);t.println(\")\")}t.print(\") \")},nI.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},nI.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return -1},nI.prototype.iterator=function(){return this._edges.iterator()},nI.prototype.getEdges=function(){return this._edges},nI.prototype.get=function(t){return this._edges.get(t)},nI.prototype.findEqualEdge=function(t){var e=new nD(t.getCoordinates());return this._ocaMap.get(e)},nI.prototype.add=function(t){this._edges.add(t);var e=new nD(t.getCoordinates());this._ocaMap.put(e,t)},nI.prototype.interfaces_=function(){return[]},nI.prototype.getClass=function(){return nI};var nA=function(){};nA.prototype.processIntersections=function(t,e,n,r){},nA.prototype.isDone=function(){},nA.prototype.interfaces_=function(){return[]},nA.prototype.getClass=function(){return nA};var nN=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};nN.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(nN.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},nN.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},nN.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},nN.prototype.getLineIntersector=function(){return this._li},nN.prototype.hasProperIntersection=function(){return this._hasProper},nN.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},nN.prototype.hasIntersection=function(){return this._hasIntersection},nN.prototype.isDone=function(){return!1},nN.prototype.hasInteriorIntersection=function(){return this._hasInterior},nN.prototype.interfaces_=function(){return[nA]},nN.prototype.getClass=function(){return nN},nN.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var nO=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};nO.prototype.getSegmentIndex=function(){return this.segmentIndex},nO.prototype.getCoordinate=function(){return this.coord},nO.prototype.print=function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex),t.println(\" dist = \"+this.dist)},nO.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},nO.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},nO.prototype.toString=function(){return this.coord+\" seg # = \"+this.segmentIndex+\" dist = \"+this.dist},nO.prototype.getDistance=function(){return this.dist},nO.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},nO.prototype.interfaces_=function(){return[E]},nO.prototype.getClass=function(){return nO};var nT=function(){this._nodeMap=new f,this.edge=null;var t=arguments[0];this.edge=t};nT.prototype.print=function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();)e.next().print(t)},nT.prototype.iterator=function(){return this._nodeMap.values().iterator()},nT.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},nT.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},nT.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nR(o,new ew(this.edge._label))},nT.prototype.add=function(t,e,n){var r=new nO(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},nT.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},nT.prototype.interfaces_=function(){return[]},nT.prototype.getClass=function(){return nT};var nM=function(){};nM.prototype.getChainStartIndices=function(t){var e=0,n=new tC;n.add(new F(e));do{var r=this.findChainEnd(t,e);n.add(new F(r)),e=r}while(e<t.length-1);return nM.toIntArray(n)},nM.prototype.findChainEnd=function(t,e){for(var n=eO.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&eO.quadrant(t[r-1],t[r])===n;)r++;return r-1},nM.prototype.interfaces_=function(){return[]},nM.prototype.getClass=function(){return nM},nM.toIntArray=function(t){for(var e=Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var nP=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new q,this.env2=new q;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new nM;this.startIndex=e.getChainStartIndices(this.pts)};nP.prototype.getCoordinates=function(){return this.pts},nP.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},nP.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},nP.prototype.computeIntersectsForChain=function(){if(4==arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6==arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],f=this.pts[o],h=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,f),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,l),g<u&&this.computeIntersectsForChain(i,d,a,g,u,l)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,l),g<u&&this.computeIntersectsForChain(d,o,a,g,u,l))}},nP.prototype.getStartIndexes=function(){return this.startIndex},nP.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},nP.prototype.interfaces_=function(){return[]},nP.prototype.getClass=function(){return nP};var nL=function t(){this._depth=[,,].fill().map(function(){return[,,,]});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},nF={NULL_VALUE:{configurable:!0}};nL.prototype.getDepth=function(t,e){return this._depth[t][e]},nL.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},nL.prototype.isNull=function(){if(0==arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==nL.NULL_VALUE)return!1;return!0}if(1==arguments.length){var n=arguments[0];return this._depth[n][1]===nL.NULL_VALUE}if(2==arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===nL.NULL_VALUE}},nL.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},nL.prototype.getDelta=function(t){return this._depth[t][em.RIGHT]-this._depth[t][em.LEFT]},nL.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?N.EXTERIOR:N.INTERIOR},nL.prototype.toString=function(){return\"A: \"+this._depth[0][1]+\",\"+this._depth[0][2]+\" B: \"+this._depth[1][1]+\",\"+this._depth[1][2]},nL.prototype.add=function(){if(1==arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==N.EXTERIOR&&r!==N.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=nL.depthAtLocation(r):this._depth[e][n]+=nL.depthAtLocation(r))}else if(3==arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===N.INTERIOR&&this._depth[i][o]++}},nL.prototype.interfaces_=function(){return[]},nL.prototype.getClass=function(){return nL},nL.depthAtLocation=function(t){return t===N.EXTERIOR?0:t===N.INTERIOR?1:nL.NULL_VALUE},nF.NULL_VALUE.get=function(){return -1},Object.defineProperties(nL,nF);var nR=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new nT(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new nL,this._depthDelta=0,1==arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2==arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=[,,].fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,ew.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;if(this.pts.length!==t.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(t.pts[o])||(n=!1),this.pts[o].equals2D(t.pts[--i])||(r=!1),!n&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0==arguments.length)return this.pts.length>0?this.pts[0]:null;if(1==arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print(\"edge \"+this._name+\": \"),t.print(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.print(\",\"),t.print(this.pts[e].x+\" \"+this.pts[e].y);t.print(\") \"+this._label+\" \"+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print(\"edge \"+this._name+\": \");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+\" \");t.println(\"\")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new nP(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new q;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new L;t.append(\"edge \"+this._name+\": \"),t.append(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.append(\",\"),t.append(this.pts[e].x+\" \"+this.pts[e].y);return t.append(\") \"+this._label+\" \"+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!=arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,em.ON),e.getLocation(1,em.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,em.LEFT),e.getLocation(1,em.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,em.RIGHT),e.getLocation(1,em.RIGHT),2))},e}(eI),nk=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new nI,this._bufParams=t||null};nk.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},nk.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new ew(t.getLabel())).flip(),n.merge(r);var i=nk.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(nk.depthDelta(t.getLabel()))},nk.prototype.buildSubgraphs=function(t,e){for(var n=new tC,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new ng(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},nk.prototype.createSubgraphs=function(t){for(var e=new tC,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new ex;i.create(r),e.add(i)}}return eW.sort(e,eW.reverseOrder()),e},nk.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},nk.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new nn,n=new to;return n.setPrecisionModel(t),e.setSegmentIntersector(new nN(n)),e},nk.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new n_(t,e,new nd(n,this._bufParams)).getCurves();if(0>=r.size())return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new eF(new nS),this._graph.addEdges(this._edgeList.getEdges());var i=this.createSubgraphs(this._graph),o=new eR(this._geomFact);this.buildSubgraphs(i,o);var a=o.getPolygons();return 0>=a.size()?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},nk.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nR(i.getCoordinates(),new ew(a));this.insertUniqueEdge(s)}}},nk.prototype.setNoder=function(t){this._workingNoder=t},nk.prototype.interfaces_=function(){return[]},nk.prototype.getClass=function(){return nk},nk.depthDelta=function(t){var e=t.getLocation(0,em.LEFT),n=t.getLocation(0,em.RIGHT);return e===N.INTERIOR&&n===N.EXTERIOR?1:e===N.EXTERIOR&&n===N.INTERIOR?-1:0},nk.convertSegStrings=function(t){for(var e=new eu,n=new tC;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var nB=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2==arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4==arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};nB.prototype.rescale=function(){if(T(arguments[0],tx))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&V.out.println(n)}},nB.prototype.scale=function(){if(T(arguments[0],tx)){for(var t=arguments[0],e=new tC,n=t.iterator();n.hasNext();){var r=n.next();e.add(new e4(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return tI.removeRepeatedPoints(o)}},nB.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},nB.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},nB.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},nB.prototype.interfaces_=function(){return[nt]},nB.prototype.getClass=function(){return nB};var nz=function(){this._li=new to,this._segStrings=null;var t=arguments[0];this._segStrings=t},nj={fact:{configurable:!0}};nz.prototype.checkEndPtVertexIntersections=function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2==arguments.length){for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new tt(\"found endpt/interior pt intersection at index \"+o+\" :pt \"+n)}},nz.prototype.checkInteriorIntersections=function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2==arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4==arguments.length){var c=arguments[0],f=arguments[1],h=arguments[2],p=arguments[3];if(c===h&&f===p)return null;var d=c.getCoordinates()[f],g=c.getCoordinates()[f+1],m=h.getCoordinates()[p],y=h.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,m,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,y)))throw new tt(\"found non-noded intersection at \"+d+\"-\"+g+\" and \"+m+\"-\"+y)}},nz.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},nz.prototype.checkCollapses=function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1==arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},nz.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},nz.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new tt(\"found non-noded collapse at \"+nz.fact.createLineString([t,e,n]))},nz.prototype.interfaces_=function(){return[]},nz.prototype.getClass=function(){return nz},nj.fact.get=function(){return new eu},Object.defineProperties(nz,nj);var n$=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=[,,,,].fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new _(\"Scale factor must be non-zero\");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},nU={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};n$.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return tn.isTrue(!(a&&s),\"Found bad envelope test\"),s},n$.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},n$.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},n$.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},n$.prototype.getCoordinate=function(){return this._originalPt},n$.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},n$.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=n$.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new q(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},n$.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},n$.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},n$.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},n$.prototype.interfaces_=function(){return[]},n$.prototype.getClass=function(){return n$},nU.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(n$,nU);var nH=function(){this.tempEnv1=new q,this.selectedSegment=new e6};nH.prototype.select=function(){if(1==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},nH.prototype.interfaces_=function(){return[]},nH.prototype.getClass=function(){return nH};var nW=function(){this._index=null;var t=arguments[0];this._index=t},nV={HotPixelSnapAction:{configurable:!0}};nW.prototype.snap=function(){if(1==arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3==arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new nG(e,n,r);return this._index.query(i,{interfaces_:function(){return[ej]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},nW.prototype.interfaces_=function(){return[]},nW.prototype.getClass=function(){return nW},nV.HotPixelSnapAction.get=function(){return nG},Object.defineProperties(nW,nV);var nG=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!=arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nH),nq=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new tC};nq.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},nq.prototype.isDone=function(){return!1},nq.prototype.getInteriorIntersections=function(){return this._interiorIntersections},nq.prototype.interfaces_=function(){return[nA]},nq.prototype.getClass=function(){return nq};var nZ=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new to,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};nZ.prototype.checkCorrectness=function(t){var e=new nz(e4.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof H))throw t;t.printStackTrace()}},nZ.prototype.getNodedSubstrings=function(){return e4.getNodedSubstrings(this._nodedSegStrings)},nZ.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},nZ.prototype.findInteriorIntersections=function(t,e){var n=new nq(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},nZ.prototype.computeVertexSnaps=function(){if(T(arguments[0],tx))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof e4)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new"
}