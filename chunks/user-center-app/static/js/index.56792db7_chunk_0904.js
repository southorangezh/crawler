{
  "metadata": {
    "source_file": "user-center-app\\static\\js\\index.56792db7.js",
    "chunk_index": 904,
    "total_chunks": 905,
    "chunk_size": 171424,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:53.601Z"
  },
  "content": "RTMP \")]),_:1}),(0,p$.Wm)(d,{value:\"gb28181\"},{default:(0,p$.w5)(()=>[(0,p$.Uk)(\" GB28181 \")]),_:1})]),_:1},8,[\"value\"])]),_:1},8,[\"error-val\",\"label\"]),\"rtmp\"===e.form.schema?((0,p$.wg)(),(0,p$.j4)(l,{key:0,\"error-val\":e.get(e.errorFields,\"bypass_option.url\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cu,[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.server_address\"))+\" \",1),(0,p$.Wm)(u,{content:e.$t(\"web.priv_bypass_push.configure_opening_prompts\"),theme:\"light\",placement:\"top\"},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",class:\"info-icon\",size:16,style:{\"margin-left\":\"4px\"}})]),_:1},8,[\"content\"])])]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.url,\"onUpdate:value\":a[2]||(a[2]=a=>e.form.bypass_option.url=a)},null,8,[\"value\"])]),_:1},8,[\"error-val\"])):((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.server_ip\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cp,(0,p$.zw)(e.$t(\"web.sip_server_ip\"))+\"(server_ip) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.server_ip,\"onUpdate:value\":a[3]||(a[3]=a=>e.form.bypass_option.server_ip=a)},null,8,[\"value\"])]),_:1},8,[\"error-val\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.server_port\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cm,(0,p$.zw)(e.$t(\"web.sip_server_port\"))+\"(server_port) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.server_port,\"onUpdate:value\":a[4]||(a[4]=a=>e.form.bypass_option.server_port=a),style:{width:\"100%\"}},null,8,[\"value\"])]),_:1},8,[\"error-val\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.server_id\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Ch,(0,p$.zw)(e.$t(\"web.server_number\"))+\"(server_id) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.server_id,\"onUpdate:value\":a[5]||(a[5]=a=>e.form.bypass_option.server_id=a)},null,8,[\"value\"])]),_:1},8,[\"error-val\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.device_id\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cf,(0,p$.zw)(e.$t(\"web.device_number\"))+\"(device_id) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.device_id,\"onUpdate:value\":a[6]||(a[6]=a=>e.form.bypass_option.device_id=a)},null,8,[\"value\"])]),_:1},8,[\"error-val\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.device_password\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cg,(0,p$.zw)(e.$t(\"web.registration_password\"))+\"(device_password) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.device_password,\"onUpdate:value\":a[7]||(a[7]=a=>e.form.bypass_option.device_password=a)},null,8,[\"value\"])]),_:1},8,[\"error-val\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.local_port\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",C_,(0,p$.zw)(e.$t(\"web.sip_local_port\"))+\"(local_port) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.local_port,\"onUpdate:value\":a[8]||(a[8]=a=>e.form.bypass_option.local_port=a),style:{width:\"100%\"}},null,8,[\"value\"])]),_:1},8,[\"error-val\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"bypass_option.local_channel\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cb,(0,p$.zw)(e.$t(\"web.local_channel\"))+\"(local_channel) \",1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(p,{value:e.form.bypass_option.local_channel,\"onUpdate:value\":a[9]||(a[9]=a=>e.form.bypass_option.local_channel=a),style:{width:\"100%\"}},null,8,[\"value\"])]),_:1},8,[\"error-val\"])],64)),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"sn\"),label:e.$t(\"web.priv_bypass_push.device_name\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(h,{value:e.form.sn,\"onUpdate:value\":a[10]||(a[10]=a=>e.form.sn=a),width:\"300\",\"option-label-prop\":\"label\",\"show-search\":\"\",\"option-filter-prop\":\"label\",theme:\"light\"},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.deviceList,a=>((0,p$.wg)(),(0,p$.j4)(m,{key:a.device_sn,label:a.device_callsign||e.DEFAULT_PLACEHOLDER,disabled:e.checkStreamOptionsForbid(a),value:a.device_sn},{default:(0,p$.w5)(()=>[a?.device_model?.class===\"airport\"?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[(0,p$.Uk)((0,p$.zw)(a.device_callsign)+\" \",1),e.checkStreamOptionsForbid(a)?((0,p$.wg)(),(0,p$.iD)(\"span\",Ck,(0,p$.zw)(`[${e.$t(\"back.manage.device_type_unsupport\")}]`),1)):(0,p$.kq)(\"\",!0)],64)):((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[Cv,(0,p$.Uk)(\" \"+(0,p$.zw)(a.device_callsign||e.DEFAULT_PLACEHOLDER),1)],64))]),_:2},1032,[\"label\",\"disabled\",\"value\"]))),128))]),_:1},8,[\"value\"]),void 0!==e.form.sn?((0,p$.wg)(),(0,p$.iD)(\"div\",Cz,(0,p$.zw)(e.$t(\"web.device_sn\"))+(0,p$.zw)(e.form.sn),1)):(0,p$.kq)(\"\",!0)]),_:1},8,[\"error-val\",\"label\"]),(0,p$.Wm)(l,{\"error-val\":e.get(e.errorFields,\"_stream_type\")},{label:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cw,[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.stream_source\"))+\" \",1),(0,p$.Wm)(u,{theme:\"light\",\"overlay-class-name\":\"c2c-live-custom-long-tooltip\",placement:\"top\"},{title:(0,p$.w5)(()=>[(0,p$._)(\"div\",Cy,(0,p$.zw)(e.$t(\"web.selected_stream_source\")),1),(0,p$._)(\"div\",CS,(0,p$.zw)(e.$t(\"web.max_two_stream_sources_per_aircraft\")),1),(0,p$._)(\"div\",Cj,[(0,p$._)(\"div\",CD,(0,p$.zw)(e.$t(\"web.first_stream_camera\")),1),(0,p$._)(\"div\",CI,(0,p$.zw)(e.$t(\"web.second_stream_infrared_wide_angle_zoom\")),1)])]),default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",class:\"info-icon\",size:16,style:{\"margin-left\":\"4px\"}})]),_:1})])]),default:(0,p$.w5)(()=>[(0,p$.Wm)(h,{value:e.form._stream_type,\"onUpdate:value\":a[11]||(a[11]=a=>e.form._stream_type=a),width:\"300\",theme:\"light\"},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.streamOptions,a=>((0,p$.wg)(),(0,p$.j4)(m,{key:a,value:a},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.StreamEnumNameMap[a]),1)]),_:2},1032,[\"value\"]))),128))]),_:1},8,[\"value\"])]),_:1},8,[\"error-val\"])]),_:1}),CA])]),_:1},8,[\"visible\",\"title\"])}],[\"__scopeId\",\"data-v-075df59f\"]]),xE=fk.Z.Option;(iY=p_||(p_={})).Initialized=\"initialized\",iY.Running=\"running\",iY.Failed=\"failed\",iY.Unlnitial=\"uninitialized\";let xF={initialized:ml(\"web.priv_bypass_push.not_forwarded\",void 0),running:ml(\"web.priv_bypass_push.forwarding\",void 0),failed:ml(\"web.priv_bypass_push.forwarding_failed\",void 0),uninitialized:ml(\"web.priv_bypass_push.forwarding_Unlnitial\",void 0)},xT=(0,p$.aZ)({name:\"C2cLiveConfigList\",components:{Switch:gi,C2cLiveConfigNewModal:xR,UranusIcon:mL,UranusButton:m0,UranusTable:fZ,UranusTooltip:hw,UranusPopconfirm:gN,UranusSelect:fA,ASelectOption:xE,ASwitch:gr.Z},props:{orgId:{type:String,require:!0}},emits:[\"close\"],setup(e,{emit:a}){var r,t,n,i,o,s,l;let d=D0(),c=(0,p$.Fl)(()=>d.pageVisible),u=(0,p$.f3)(xM,{currentOrgId:\"\"});(0,p$.bv)(()=>{D1(u.currentOrgId).then(e=>{d.updateDeviceList(e.data.list)})});let p=(0,p$.Fl)(()=>g.value.length<20),m=(0,p$.Fl)(()=>{let e=[];return d.deviceList.forEach(a=>{e.push(a),!(0,ms.isNil)(a.associate_drone_device_info)&&e.push(a.associate_drone_device_info)}),e}),h=(0,p$.iH)([]),f=()=>{D8(u.currentOrgId).then(e=>{h.value=e?.data?.list||[]})};(0,p$.bv)(()=>{f()});let g=(0,p$.iH)([]);(0,p$.YP)(()=>h.value,()=>{g.value=h.value.map(e=>({...e,device_name:e?.device_callsign||\"--\",_stream_type:xD[xC(e.camera,e.video,e.video_type)],_auto_push_stream_loading:!1}))},{deep:!0});let _=[{title:ml(\"web.priv_bypass_push.forwarding_channel_name\",void 0),dataIndex:\"converter_name\",width:\"400px\",slots:{customRender:\"converter_name_render\"}},{title:ml(\"web.priv_bypass_push.forwarding_status\",void 0),dataIndex:\"state\",slots:{customRender:\"state_render\"}},{title:ml(\"web.priv_bypass_push.forwarding_type\",void 0),dataIndex:\"schema\",slots:{customRender:\"schema_render\"}},{title:ml(\"web.priv_bypass_push.device_name\",void 0),dataIndex:\"device_name\",width:\"200px\",slots:{customRender:\"device_name_render\"}},{title:ml(\"web.priv_bypass_push.code_stream_source\",void 0),dataIndex:\"_stream_type\"},{title:ml(\"web.priv_bypass_push.device_status\",void 0),dataIndex:\"device_online_status\",slots:{customRender:\"device_online_status_render\"}},{dataIndex:\"auto_push_stream\",slots:{customRender:\"auto_push_stream_render\",title:\"auto_push_stream_title_render\"}},{title:ml(\"web.priv_bypass_push.operate\",void 0),width:\"98px\",slots:{customRender:\"action\"}}];return{CloudConfigTypeEnum:uu,handleCloseDrawer:()=>{D8(u.currentOrgId).then(e=>{d.updateStreamConvertersList(e?.data?.list||[])}),d.updatePageVisible(!1)},handleOpenOpen:()=>{let{clickToUserManual:e}=jB();e(ud.cloud_to_cloud+k_)},handleNewConfig:()=>{d.updateConfigModalVisible(!0)},updateOrgCloudIntegrationItem:wf,visible:c,columns:_,convertorList:h,handleChangeAutoPushState:e=>{e._auto_push_stream_loading=!0,D3(u.currentOrgId,{...(0,ms.pick)(e,[\"converter_name\",\"schema\",\"bypass_option\",\"sn\",\"camera\",\"video\",\"video_type\",\"converter_id\"]),auto_push_stream:!e.auto_push_stream,region:\"cn\"}).then(()=>{var a;kr.Z.success(ml(\"web.priv_bypass_push.switch_status_successfully\",void 0)),e.auto_push_stream=!e.auto_push_stream,f()}).catch(e=>{var a;kr.Z.error(`${ml(\"web.priv_bypass_push.failed_to_switch_status\",void 0)}ï¼š${bw(e.code)}`)}).finally(()=>{e._auto_push_stream_loading=!1})},handleEdit:e=>{d.editConfig(e)},handleDelete:e=>{if(\"running\"===e.state){var a;kr.Z.error(ml(\"web.priv_bypass_push_running_state_delete_tip\",void 0));return}D6(u.currentOrgId,e.converter_id).then(()=>{var e;kr.Z.success(ml(\"common.action.delete_success\",void 0)),f()}).catch(()=>{var e;kr.Z.error(ml(\"common.action.delete_failed\",void 0))})},handleCopy:e=>{d.copyConfig(e)},liveStore:d,deviceList:m,finalConvertorList:g,handleUpdateList:()=>{f()},StateMap:xF,getErrorMessageWithCode:bw,canNewConfig:p,StateEnum:p_,checkEditDeleteDisable:function(e){return!!e.auto_push_stream||e._auto_push_stream_loading},getStateText:e=>xF[e]||\"\"}}}),xP=(0,mF.default)(xT,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusIcon\"),s=(0,p$.up)(\"UranusButton\"),l=(0,p$.up)(\"UranusTooltip\"),d=(0,p$.up)(\"ASwitch\"),c=(0,p$.up)(\"UranusPopconfirm\"),u=(0,p$.up)(\"UranusTable\"),p=(0,p$.up)(\"C2cLiveConfigNewModal\"),m=(0,p$.up)(\"a-drawer\");return(0,p$.wg)(),(0,p$.j4)(m,{class:\"partial-edit-org-setting-drawer\",closable:!1,visible:e.visible,\"mask-closable\":\"\",width:\"1356\",\"body-style\":{height:\"100%\",padding:\"0\"},onClose:e.handleCloseDrawer},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",A8,[(0,p$._)(\"div\",A9,[(0,p$._)(\"div\",A7,[(0,p$.Wm)(o,{name:\"arrow\",class:\"arrow-icon\",size:16,onClick:e.handleCloseDrawer},null,8,[\"onClick\"]),(0,p$._)(\"span\",null,(0,p$.zw)(e.$t(\"web.live_forwarding\")),1)])]),(0,p$._)(\"div\",Ce,[e.canNewConfig?((0,p$.wg)(),(0,p$.j4)(s,{key:1,type:\"primary\",onClick:e.handleNewConfig},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.create\")),1)]),_:1},8,[\"onClick\"])):((0,p$.wg)(),(0,p$.j4)(l,{key:0,theme:\"light\",title:e.$t(\"web.priv_bypass_push.unable_create_tips\"),style:{\"margin-bottom\":\"3px\"},placement:\"top\"},{default:(0,p$.w5)(()=>[(0,p$.Wm)(s,{type:\"primary\",class:\"open-log-btn\",disabled:!0},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.create\")),1)]),_:1})]),_:1},8,[\"title\"])),(0,p$._)(\"div\",{class:\"right\",onClick:a[0]||(a[0]=(...a)=>e.handleOpenOpen&&e.handleOpenOpen(...a))},(0,p$.zw)(e.$t(\"web.how_to_configure_forward_channel\")),1)]),(0,p$._)(\"div\",Ca,[(0,p$.Wm)(u,{class:\"live-list-table\",\"row-key\":\"converter_id\",columns:e.columns,\"min-height\":!1,\"data-source\":e.finalConvertorList},{device_online_status_render:(0,p$.w5)(({text:a})=>[(0,p$.Uk)((0,p$.zw)(a?e.$t(\"web.online\"):e.$t(\"web.offline\")),1)]),state_render:(0,p$.w5)(({text:a,record:r})=>[(0,p$._)(\"div\",Cr,[(0,p$._)(\"div\",{class:\"circle\",style:(0,p$.j5)(`background-color: ${a===e.StateEnum.Running?\"rgba(25, 190, 107, 1)\":\"rgba(231, 1, 2, 1)\"}`)},null,4),(0,p$.Uk)(\" \"+(0,p$.zw)(e.getStateText(a))+\" \",1),a===e.StateEnum.Failed&&void 0!==r.code?((0,p$.wg)(),(0,p$.j4)(l,{key:0,theme:\"light\",content:`${e.getErrorMessageWithCode(r.code)}`},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",style:{\"margin-left\":\"4px\"}})]),_:2},1032,[\"content\"])):(0,p$.kq)(\"\",!0)])]),converter_name_render:(0,p$.w5)(({text:e})=>[(0,p$._)(\"div\",Ct,[(0,p$.Wm)(l,{theme:\"light\",content:e},null,8,[\"content\"])])]),schema_render:(0,p$.w5)(({text:e})=>[(0,p$._)(\"div\",null,(0,p$.zw)(String(e).toUpperCase()),1)]),device_name_render:(0,p$.w5)(({text:e,record:a})=>[(0,p$._)(\"div\",Cn,[(0,p$.Uk)((0,p$.zw)(e)+\" \",1),(0,p$.Wm)(l,{theme:\"light\",content:`SN: ${a.sn}`},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",style:{\"margin-left\":\"4px\"}})]),_:2},1032,[\"content\"])])]),auto_push_stream_title_render:(0,p$.w5)(()=>[(0,p$._)(\"div\",Ci,[(0,p$._)(\"span\",Co,(0,p$.zw)(e.$t(\"web.auto_forwarding\")),1),(0,p$.Wm)(l,{theme:\"light\"},{title:(0,p$.w5)(()=>[(0,p$._)(\"div\",null,[(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.priv_bypass_push_rtmp_list_tip\")),1),(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.priv_bypass_push_28181_list_tip\")),1),(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.priv_bypass_push_rtmp_list_tip2\")),1),(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.priv_bypass_push_28181_list_tip2\")),1)])]),default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\"})]),_:1})])]),auto_push_stream_render:(0,p$.w5)(({record:a})=>[(0,p$.Wm)(d,{checked:a.auto_push_stream,theme:\"light\",loading:a._auto_push_stream_loading,onChange:r=>e.handleChangeAutoPushState(a)},null,8,[\"checked\",\"loading\",\"onChange\"])]),action:(0,p$.w5)(({record:a})=>[e.checkEditDeleteDisable(a)?((0,p$.wg)(),(0,p$.j4)(l,{key:0,theme:\"light\",content:e.$t(\"web.priv_bypass_push.edit_forbid_tip\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"edit\",color:\"#a7a7a7\",class:\"opt-btn-disable\"})]),_:1},8,[\"content\"])):((0,p$.wg)(),(0,p$.j4)(l,{key:1,theme:\"light\",content:e.$t(\"common.action.edit\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"edit\",color:\"#40a9ff\",class:\"opt-btn\",onClick:r=>e.handleEdit(a)},null,8,[\"onClick\"])]),_:2},1032,[\"content\"])),(0,p$.Wm)(l,{theme:\"light\",content:e.$t(\"common.aciton.copy\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"copy\",color:\"#40a9ff\",class:\"opt-btn\",onClick:r=>e.handleCopy(a)},null,8,[\"onClick\"])]),_:2},1032,[\"content\"]),e.checkEditDeleteDisable(a)?((0,p$.wg)(),(0,p$.j4)(l,{key:2,theme:\"light\",content:e.$t(\"web.priv_bypass_push.delete_forbid_tip\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"delete\",color:\"#a7a7a7\",class:\"opt-btn-disable\"})]),_:1},8,[\"content\"])):((0,p$.wg)(),(0,p$.j4)(c,{key:3,placement:\"right\",danger:!0,class:\"flex-shrink-0 success-delete\",\"ok-text\":e.$t(\"common.action.confirm\"),\"cancel-text\":e.$t(\"common.action.cancel\"),onConfirm:r=>e.handleDelete(a)},{title:(0,p$.w5)(()=>[(0,p$._)(\"p\",null,(0,p$.zw)(e.$t(\"web.confirm_delete_forward_channel\")),1)]),default:(0,p$.w5)(()=>[Cs,(0,p$.Wm)(l,{theme:\"light\",content:e.$t(\"common.action.delete\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"delete\",color:\"#40a9ff\",style:{cursor:\"pointer\"},class:\"opt-btn\"})]),_:1},8,[\"content\"])]),_:2},1032,[\"ok-text\",\"cancel-text\",\"onConfirm\"]))]),_:1},8,[\"columns\",\"data-source\"])])]),e.liveStore.configModalVisible?((0,p$.wg)(),(0,p$.j4)(p,{key:0,\"org-id\":e.orgId,onConfigUpdated:e.handleUpdateList},null,8,[\"org-id\",\"onConfigUpdated\"])):(0,p$.kq)(\"\",!0)]),_:1},8,[\"visible\",\"onClose\"])}],[\"__scopeId\",\"data-v-7fa23804\"]]),xM=Symbol(\"currentOrgDetailId\"),xL=(0,p$.aZ)({name:\"MyOrganization\",components:{C2cLiveConfigList:xP,OfflineMapPage:A5,CloudIntegrationContent:IM,Oauth2EnterContent:AH,Button:m0,Icon:mL,EditOrgSettingModal:yS,OrgPackageInfoDrawer:jF,UranusTooltip:hw,UranusSelect:fA,UranusCustomInput:fh,UranusTable:fZ,UranusSort:f3,ProjectFastJoinModal:vq,UranusModal:fX,CreateOrgModal:vI,OrgDataManageDrawer:AS,ShowServerAddress:jL},setup(){let e=t,{t:a}=(0,p7.QT)(),r=[{width:150,title:a(\"web.my_profile.org_name\"),dataIndex:\"name\",key:\"name\",ellipsis:!0,slots:{customRender:\"name\"}},{width:100,title:a(\"web.my_profile.org_id\"),dataIndex:\"organization_id\",key:\"organization_id\",ellipsis:!0,slots:{customRender:\"organization_id\"}},{width:100,title:a(\"web.my_profile.org_role\"),dataIndex:\"organization_user_role\",key:\"organization_user_role\",ellipsis:!0,slots:{customRender:\"organization_user_role\"}},{width:140,title:a(\"web.my_profile.member_org_name\"),dataIndex:\"organization_user_callsign\",key:\"organization_user_callsign\",ellipsis:!0,slots:{customRender:\"organization_user_callsign\"}},{width:150,dataIndex:\"join_organization_at\",key:\"join_organization_at\",ellipsis:!0,slots:{customRender:\"join_organization_at\",title:\"join_organization_at_title\"}},{width:120,title:a(\"common.action.operation\"),dataIndex:\"action\",slots:{customRender:\"action\"}}],n=!1,i=(0,p$.iH)(null),{tableScrollProps:o}=Sf(i,\"table-container\",p6),s=(0,p$.iH)(!1),l=(0,p$.iH)(!1),d=(0,p$.iH)(!1),c=(0,p$.iH)(\"\"),u=(0,p$.iH)(null),p=(0,p$.f3)(p1),m=(0,p$.iH)({showSizeChanger:!0,showQuickJumper:!0,current:1,pageSize:50,total:0,pageSizeOptions:fG}),h=(0,p$.iH)({order:\"DESC\",field:\"join_organization_at\"}),f=(0,p$.iH)([]);function g(e){if(\"boolean\"==typeof e){l.value=e;return}l.value=!l.value}async function _(a=!1){a&&(m.value.current=1),d.value=!0;try{let{data:a,code:r}=await kL(function(){let e={page:m.value.current,page_size:m.value.pageSize};return c.value&&(e.org_user_role=c.value),h.value.order&&(e.sort_type=h.value.order),h.value.field&&h.value.order&&(e.sort_column=h.value.field),e}());0===r&&(f.value=(a?.list||[]).map(e=>({...e,edit_organization_user_callsign:e.organization_user_callsign,active:!1})),m.value.total=a?.pagination?.total||0,1===m.value.current&&0===f.value.length?s.value=!1:s.value=!0,!n&&(e.$pager.main.next({from:\"user-center-app\",label:\"prefetch-micro-app\",data:[kb[d9.MAP_APP],kb[d9.PROJECT_LIST_APP]]}),n=!0))}catch(e){}d.value=!1}function b(){u.value=null}function k(){e.$pager.main.next({from:\"user-center-app\",label:\"org-list-change\"}),_()}function v(){if(!!u.value)kw?kJ(u.value.uuid).then(()=>bh()):kJ(u.value.uuid).then(e=>{0===e.code&&(kr.Z.success(a(\"web.members.quit_org_hint\")),b(),k())})}let z=t,w=(0,p$.iH)(a(\"web.my_profile.join_project_fail\"));(0,p$.bv)(async()=>{L(),_();let e=(0,p9.yj)();if(\"true\"!==e.query[\"is-fast-join\"])return;try{await kV({project_id:e.query.id,project_fast_join_code:e.query.code},{ignoreGlobalErrorHandler:!0})}catch(e){if(e){let{codeMessage:a}=e;w.value=a,S.value=!0}return}let a=await kB({project_fast_join:{project_id:e.query.id,project_fast_join_code:e.query.code,user_project_callsign:\"\"}});0===a.code&&(z.$pager.main.next({from:\"user-center-app\",label:\"only-update-org-id\",data:{orgId:a.data.organization_uuid}}),z.$pager.main.next({from:\"user-center-app\",label:\"jump-to-project-detail\",data:{orgId:a.data.organization_uuid,id:a.data.project_uuid}}))});let y=(0,p$.iH)(!1),S=(0,p$.iH)(!1),j=(0,p$.iH)(!1),D=(0,p$.iH)(!1),I=(0,p$.iH)(\"\"),A=(0,p$.iH)(\"\"),C=(0,p$.iH)(\"\"),x=(0,p$.qj)({currentOrgId:I});(0,p$.JJ)(xM,x);function R(e){if(\"boolean\"==typeof e){j.value=e;return}j.value=!j.value}let E=(0,p$.iH)(\"\");function F(e){I.value=e.uuid,A.value=e.name,C.value=e.organization_id,E.value=e.organization_user_role,P(!0)}async function T(){e.$pager.main.next({from:\"user-center-app\",label:\"org-list-change\"}),await _(),f.value.forEach(e=>{e.uuid===I.value&&(A.value=e.name)})}function P(e){if(\"boolean\"==typeof e){D.value=e;return}D.value=!D.value}let M=(0,p$.iH)([]);async function L(){let{data:e,code:a}=await yY();0===a&&(M.value=e?.organization_list||[])}let J=(0,p$.iH)(),N=()=>{J.value?.openDrawer()},q=z.$route.query;(0,p$.YP)([()=>f.value,()=>p?.value],async([a,r])=>{if(a?.length>0&&r&&q?.type===cu.OrgDetail){let t=a.find(e=>e.uuid===r);t&&(F(t),q?.action===cu.DataManage&&(0,p$.Y3)(N),q?.paymentType&&sessionStorage.setItem(kz,String(q.paymentType))),e.$router.replace({query:{...q,type:void 0,action:void 0,paymentType:void 0}})}},{immediate:!0});let O=(0,p$.iH)(!1),H=(0,p$.iH)(!1),G=AG(),U=(0,p$.Fl)(()=>G.pageVisible),V=(0,p$.iH)(null),B=(0,p$.iH)(),K=(0,p$.Fl)(()=>B.value?me[B.value.current_zone_id]?a(me[B.value.current_zone_id]):B.value.current_zone_id:\"\"),W=(0,p$.Fl)(()=>{if(kt())return!f.value.length&&B.value?.is_default_super_manager;return!0}),Z=(0,p$.Fl)(()=>{if(kt())return!!f.value.length&&!B.value?.is_cloud_account_system_visitor;return!0});(0,p$.bv)(()=>{kW({language:window.LANGUAGE}).then(e=>{0===e.code&&(B.value=e.data)})});let $=D0(),Y=(0,p$.Fl)(()=>[d2.organizationAdmin,d2.organizationSuperAdmin].includes(E.value));return{isShowEditOrgModel:j,onEditOrgSuccess:function(){R(!1),k()},toggleEditOrgModelFunc:R,editOrgId:I,onEditOrgItem:function(e){I.value=e.uuid,R(!0)},updateCloudIntegrationVisible:e=>{O.value=e},updateOauth2DrawerVisible:e=>{H.value=e},updateCloudIntegrationStatus:()=>{V.value?.updateCloudIntegrationStatus()},handleCloseOfflinePage:()=>{G.updatePageVisible(!1)},cloudIntegrationVisible:O,oauth2DrawerVisible:H,offlinePageVisible:U,orgPackageInfoRef:V,tableParentRef:i,tableScrollProps:o,hasOrganization:s,toggleCreateModelFunc:g,isShowCreateModel:l,onRoleChange:function(){_(!0)},role:c,organizationRoleArr:kn,pagination:m,organizationList:f,handleTableChange:function(e){e&&(e.current&&(m.value.current=e.current),e.pageSize&&(m.value.pageSize=e.pageSize)),_()},formatUnixTime:bP,getTextOfArr:kc,sorter:h,toggleSort:function(e){h.value.order=e.order,_(!0)},OrganizationRole:d2,handleExitOrganization:function(r){if(r.organization_user_role!==d2.organizationSuperAdmin)u.value=r,function(r){e.$confirm({title:a(\"web.members.quit_orgazation\"),class:\"no-icon warning\",centered:!0,content:a(\"web.members.quit_org_confirm\",{org_name:r}),onOk:()=>v(),onCancel:()=>b()})}(r.name)},exitItem:u,onExitCancel:b,onExitOk:v,onCreateSuccess:function(a){g(!1),a?e.$pager.main.next({from:\"user-center-app\",label:\"org-id-change\",data:{orgId:a}}):e.$pager.main.next({from:\"user-center-app\",label:\"org-list-change\"})},organizationId:p,confirmChange:function(e){e.edit_organization_user_callsign&&(e.organization_user_callsign=e.edit_organization_user_callsign,kq({orgId:e.uuid,nickname:e.edit_organization_user_callsign}).then(r=>{0===r.code&&(e.active=!1,kr.Z.success(a(\"common.action.edit_success\")))}))},getTipContent:function(e){return e.organization_user_role!==d2.organizationSuperAdmin?a(\"web.members.quit_orgazation\"):a(\"web.my_profile.super_admin_quit_hint_2\")},antPrefix:p6,changeNickname:function(e,a){a.error=!!a.edit_organization_user_callsign},enterOrganization:function(a){if(a!==(0,p$.SU)(p))e.$pager.main.next({from:\"user-center-app\",label:\"org-id-change\",data:{orgId:a}})},columns:r,tableLoading:d,cancelChange:function(e){e.edit_organization_user_callsign=e.organization_user_callsign,e.active=!1},joinProjectModalVisible:y,onJoinProjectModalCancel:()=>{y.value=!1},getDisabled:function(e){return e.organization_user_role===d2.organizationSuperAdmin},onFastJoinErrorMsgModalOk:()=>{S.value=!1},fastJoinErrorMsgVisible:S,fastJoinErrorMsg:w,callsignLengthLimit:20,onEditOrgItemDrawer:F,toggleEditOrgDrawerFunc:P,isShowEditOrgDrawer:D,checkIsNotInWhiteList:function(e){return!!(M.value.length>0)&&!M.value.includes(e.uuid)||!1},editOrgName:A,pageVisible:(0,p$.Vh)($,\"pageVisible\"),editOrgShortId:C,onNoticeOrganizationChangeFromDrawer:T,editOrgUserRole:E,projectDataManageDrawerRef:J,openDataManageDrawer:N,showCreateOrgBtn:W,showJoinProjectBtn:Z,isPrivateDeployment:kt,showOrgDataManageDrawer:Y,FeatureGateway:cm,useFeature:ky,onOpenSync:()=>{z.$router.push({name:\"fh-sync-dashboard\",params:{editOrgId:I.value}})},getServerAddress:K,getRowClassName:(e,a)=>a%2==0?\"table-striped\":\"\"}}}),xJ=(0,mF.default)(xL,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"ShowServerAddress\"),s=(0,p$.up)(\"Button\"),l=(0,p$.up)(\"ASelectOption\"),d=(0,p$.up)(\"UranusSelect\"),c=(0,p$.up)(\"UranusTooltip\"),u=(0,p$.up)(\"UranusCustomInput\"),p=(0,p$.up)(\"UranusSort\"),m=(0,p$.up)(\"Icon\"),h=(0,p$.up)(\"UranusTable\"),f=(0,p$.up)(\"ProjectFastJoinModal\"),g=(0,p$.up)(\"CreateOrgModal\"),_=(0,p$.up)(\"EditOrgSettingModal\"),b=(0,p$.up)(\"OrgPackageInfoDrawer\"),k=(0,p$.up)(\"CloudIntegrationContent\"),v=(0,p$.up)(\"Oauth2EnterContent\"),z=(0,p$.up)(\"OfflineMapPage\"),w=(0,p$.up)(\"C2cLiveConfigList\"),y=(0,p$.up)(\"UranusModal\"),S=(0,p$.up)(\"OrgDataManageDrawer\");return(0,p$.wg)(),(0,p$.iD)(p$.HY,null,[(0,p$._)(\"div\",b0,[(0,p$._)(\"div\",b1,[(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.my_profile.my_org\")),1),(0,p$.Wm)(o,{\"server-address\":e.getServerAddress},null,8,[\"server-address\"])]),(0,p$._)(\"div\",b2,[(0,p$._)(\"div\",b3,[(0,p$._)(\"div\",b4,[e.showCreateOrgBtn?((0,p$.wg)(),(0,p$.j4)(s,{key:0,type:\"primary\",size:\"lg\",onClick:a[0]||(a[0]=a=>e.toggleCreateModelFunc(!0))},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.create_org\")),1)]),_:1})):(0,p$.kq)(\"\",!0),e.showJoinProjectBtn?((0,p$.wg)(),(0,p$.j4)(s,{key:1,size:\"lg\",theme:\"light\",outlined:\"\",onClick:a[1]||(a[1]=a=>e.joinProjectModalVisible=!0)},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.join_project\")),1)]),_:1})):(0,p$.kq)(\"\",!0)]),e.isPrivateDeployment()?(0,p$.kq)(\"\",!0):((0,p$.wg)(),(0,p$.iD)(\"div\",b6,[(0,p$.Wm)(d,{value:e.role,\"onUpdate:value\":a[2]||(a[2]=a=>e.role=a),size:\"large\",style:{\"min-width\":\"250px\"},\"prefix-cls\":e.antPrefix,onChange:e.onRoleChange},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.organizationRoleArr,e=>((0,p$.wg)(),(0,p$.j4)(l,{key:e.value,value:e.value},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.label),1)]),_:2},1032,[\"value\"]))),128))]),_:1},8,[\"value\",\"prefix-cls\",\"onChange\"])]))]),(0,p$._)(\"div\",b5,[(0,p$.Wm)(h,{\"row-key\":\"uuid\",scroll:e.tableScrollProps,\"table-pagination\":e.pagination,\"data-source\":e.organizationList,loading:e.tableLoading,columns:e.columns,\"row-class-name\":e.getRowClassName,\"box-height\":e.tableScrollProps.y,onChange:e.handleTableChange},{name:(0,p$.w5)(({text:a,record:r})=>[(0,p$._)(\"span\",{class:(0,p$.C_)([\"text-box\",{\"un-select-org\":r.uuid!==e.organizationId}]),onClick:a=>e.enterOrganization(r.uuid)},[(0,p$.Wm)(c,{class:\"name-text\",theme:\"light\",content:a},null,8,[\"content\"]),r.uuid===e.organizationId?((0,p$.wg)(),(0,p$.iD)(\"span\",b9,(0,p$.zw)(e.$t(\"web.my_profile.current_org\")),1)):(0,p$.kq)(\"\",!0)],10,b8)]),organization_id:(0,p$.w5)(({text:e})=>[(0,p$._)(\"span\",b7,[(0,p$.Wm)(c,{class:\"normal-text-item\",theme:\"light\",content:e},null,8,[\"content\"])])]),organization_user_role:(0,p$.w5)(({text:a})=>[(0,p$._)(\"span\",ke,[(0,p$.Wm)(c,{class:\"normal-text-item\",theme:\"light\",content:e.getTextOfArr(a,e.organizationRoleArr)},null,8,[\"content\"])])]),organization_user_callsign:(0,p$.w5)(({record:a})=>[a.active?((0,p$.wg)(),(0,p$.j4)(u,{key:1,value:a.edit_organization_user_callsign,\"onUpdate:value\":e=>a.edit_organization_user_callsign=e,\"max-text-length\":e.callsignLengthLimit,placeholder:e.$t(\"web.my_profile.member_org_name\"),error:!a.edit_organization_user_callsign,\"error-info\":e.$t(\"web.members.org_name_cannot_empty\")},null,8,[\"value\",\"onUpdate:value\",\"max-text-length\",\"placeholder\",\"error\",\"error-info\"])):((0,p$.wg)(),(0,p$.iD)(\"span\",ka,[(0,p$.Wm)(c,{class:\"normal-text-item\",theme:\"light\",content:a.organization_user_callsign},null,8,[\"content\"])]))]),join_organization_at_title:(0,p$.w5)(()=>[(0,p$.Wm)(p,{field:\"join_organization_at\",onToggleSort:e.toggleSort},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.join_type\")),1)]),_:1},8,[\"onToggleSort\"])]),join_organization_at:(0,p$.w5)(({text:a})=>[(0,p$._)(\"span\",null,[(0,p$.Wm)(c,{class:\"normal-text-item monospace-font\",theme:\"light\",content:e.formatUnixTime(a)},null,8,[\"content\"])])]),action:(0,p$.w5)(({record:a})=>[a.active?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[(0,p$.Wm)(c,{theme:\"light\"},{title:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.confirm_edit\")),1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(m,{name:\"confirm\",class:\"opt-btn confirm\",onClick:r=>e.confirmChange(a)},null,8,[\"onClick\"])]),_:2},1024),(0,p$.Wm)(c,{placement:\"bottom\",theme:\"light\"},{title:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.cancel_edit\")),1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(m,{name:\"cancel\",class:\"opt-btn cancel\",onClick:r=>e.cancelChange(a)},null,8,[\"onClick\"])]),_:2},1024)],64)):((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[(0,p$.Wm)(c,{theme:\"light\",content:e.$t(\"web.my_profile.edit_member_org_name\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(m,{name:\"edit\",color:\"#40a9ff\",class:\"opt-btn\",onClick:e=>a.active=!0},null,8,[\"onClick\"])]),_:2},1032,[\"content\"]),e.checkIsNotInWhiteList(a)?e.getDisabled(a)?((0,p$.wg)(),(0,p$.j4)(c,{key:1,theme:\"light\",content:e.$t(\"web.my_profile.org_setting\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(m,{name:\"setting\",color:\"#40a9ff\",class:\"opt-btn\",onClick:r=>e.onEditOrgItem(a)},null,8,[\"onClick\"])]),_:2},1032,[\"content\"])):(0,p$.kq)(\"\",!0):((0,p$.wg)(),(0,p$.j4)(c,{key:0,theme:\"light\",content:e.$t(\"web.my_profile.org_setting\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(m,{name:\"setting\",color:\"#40a9ff\",class:\"opt-btn\",onClick:r=>e.onEditOrgItemDrawer(a)},null,8,[\"onClick\"])]),_:2},1032,[\"content\"])),(0,p$.Wm)(c,{theme:\"light\",content:e.getTipContent(a)},{default:(0,p$.w5)(()=>[(0,p$.Wm)(m,{name:\"sign-out\",class:(0,p$.C_)([\"opt-btn\",{\"disabled-sign-out\":e.getDisabled(a)}]),size:15,disabled:e.getDisabled(a),onClick:r=>e.handleExitOrganization(a)},null,8,[\"disabled\",\"class\",\"onClick\"])]),_:2},1032,[\"content\"])],64))]),_:1},8,[\"scroll\",\"table-pagination\",\"data-source\",\"loading\",\"columns\",\"row-class-name\",\"box-height\",\"onChange\"])])],512)]),e.joinProjectModalVisible?((0,p$.wg)(),(0,p$.j4)(f,{key:0,onClose:e.onJoinProjectModalCancel},null,8,[\"onClose\"])):(0,p$.kq)(\"\",!0),e.isShowCreateModel?((0,p$.wg)(),(0,p$.j4)(g,{key:1,\"server-address\":e.getServerAddress,onSuccess:e.onCreateSuccess,onClose:a[3]||(a[3]=a=>e.toggleCreateModelFunc(!1))},null,8,[\"server-address\",\"onSuccess\"])):(0,p$.kq)(\"\",!0),e.isShowEditOrgModel?((0,p$.wg)(),(0,p$.j4)(_,{key:2,id:e.editOrgId,onSuccess:e.onEditOrgSuccess,onClose:a[4]||(a[4]=a=>e.toggleEditOrgModelFunc(!1))},null,8,[\"id\",\"onSuccess\"])):(0,p$.kq)(\"\",!0),e.isShowEditOrgDrawer?((0,p$.wg)(),(0,p$.j4)(b,{key:3,id:e.editOrgId,ref:\"orgPackageInfoRef\",name:e.editOrgName,\"organization-short-id\":e.editOrgShortId,\"edit-org-user-role\":e.editOrgUserRole,onSuccess:e.onEditOrgSuccess,onClose:a[5]||(a[5]=a=>e.toggleEditOrgDrawerFunc(!1)),onUpdateCloudVisible:e.updateCloudIntegrationVisible,onOpenSync:e.onOpenSync,onNoticeOrganizationChangeFunc:e.onNoticeOrganizationChangeFromDrawer,onOpenOrgDataManageDrawer:e.openDataManageDrawer,onUpdateOauth2DrawerVisible:e.updateOauth2DrawerVisible},null,8,[\"id\",\"name\",\"organization-short-id\",\"edit-org-user-role\",\"onSuccess\",\"onUpdateCloudVisible\",\"onOpenSync\",\"onNoticeOrganizationChangeFunc\",\"onOpenOrgDataManageDrawer\",\"onUpdateOauth2DrawerVisible\"])):(0,p$.kq)(\"\",!0),e.cloudIntegrationVisible?((0,p$.wg)(),(0,p$.j4)(k,{key:4,visible:e.cloudIntegrationVisible,\"org-id\":e.editOrgId,onClose:e.updateCloudIntegrationStatus},null,8,[\"visible\",\"org-id\",\"onClose\"])):(0,p$.kq)(\"\",!0),e.oauth2DrawerVisible?((0,p$.wg)(),(0,p$.j4)(v,{key:5,visible:e.oauth2DrawerVisible,\"org-id\":e.editOrgId,onClose:e.updateOauth2DrawerVisible},null,8,[\"visible\",\"org-id\",\"onClose\"])):(0,p$.kq)(\"\",!0),e.offlinePageVisible?((0,p$.wg)(),(0,p$.j4)(z,{key:6,visible:e.offlinePageVisible,\"org-id\":e.editOrgId,onClose:e.handleCloseOfflinePage},null,8,[\"visible\",\"org-id\",\"onClose\"])):(0,p$.kq)(\"\",!0),e.useFeature(e.FeatureGateway.FORWARDING_STREAM_PRIVATIZATION)&&e.pageVisible?((0,p$.wg)(),(0,p$.j4)(w,{key:7,\"org-id\":e.organizationId||\"\"},null,8,[\"org-id\"])):(0,p$.kq)(\"\",!0),(0,p$.Wm)(y,{title:e.$t(\"web.my_profile.join_project_fail\"),size:\"tiny\",visible:e.fastJoinErrorMsgVisible,centered:!0,\"has-cancel\":!1,\"ok-text\":e.$t(\"common.action.close\"),onOk:e.onFastJoinErrorMsgModalOk},{default:(0,p$.w5)(()=>[(0,p$._)(\"p\",null,(0,p$.zw)(e.fastJoinErrorMsg),1)]),_:1},8,[\"title\",\"visible\",\"ok-text\",\"onOk\"]),e.showOrgDataManageDrawer?((0,p$.wg)(),(0,p$.j4)(S,{key:8,ref:\"projectDataManageDrawerRef\",\"org-id\":e.editOrgId},null,8,[\"org-id\"])):(0,p$.kq)(\"\",!0)],64)}],[\"__scopeId\",\"data-v-dc920074\"]]),xN={class:\"page-no-organization\"},xq={class:\"no-org-box\"},xO={class:\"no-org-title\"},xH={class:\"org-img-box\"},xG=[\"src\"],xU={class:\"org-img-desc\"},xV={key:0,class:\"bottom-wrap\"},xB=r.p+\"../assets/svg/prj-desc.be28d591.svg\",xK=r.p+\"../assets/svg/org-desc.46df06c0.svg\",xW=(0,p$.aZ)({name:\"NoOrganization\",components:{Button:m0},props:{noPermission:{type:Boolean,default:!1}},emits:{action:e=>!0},setup(e,{emit:a}){let{t:r}=(0,p7.QT)(),t=[{title:r(\"web.projects.create_an_organization_titile\"),img:xK,description:r(\"web.projects.create_an_organization_tips1\"),btn:r(\"web.my_profile.create_org\"),showBtn:!0,action:\"create-organization\"},{title:r(\"web.projects.add_to_existing_project\"),img:xB,description:r(\"web.projects.create_an_organization_tips2\"),btn:r(\"web.projects.join_the_project_btn\"),showBtn:!0,action:\"join-project\"}],n=[{title:r(\"web.projects.create_an_organization_titile\"),img:xK,description:r(\"web.projects.create_an_organization_tips1\"),btn:r(\"web.my_profile.create_org\"),showBtn:!0,action:\"create-organization\"}],i=[{title:r(\"web.projects.no_permission_title\"),img:xK,description:r(\"web.projects.visitor_no_permission_title\"),btn:r(\"web.my_profile.create_org\"),showBtn:!1,action:\"create-organization\"}];return{list:(0,p$.Fl)(()=>{if(kt())return e.noPermission?i:n;return t})}}}),xZ=(0,mF.default)(xW,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"Button\");return(0,p$.wg)(),(0,p$.iD)(\"div\",xq,[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.list,a=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:a.title,class:\"no-org-box-inner\"},[(0,p$._)(\"div\",xO,(0,p$.zw)(a.title),1),(0,p$._)(\"div\",xH,[(0,p$._)(\"img\",{src:a.img},null,8,xG),(0,p$._)(\"div\",xU,(0,p$.zw)(a.description),1)]),a.showBtn?((0,p$.wg)(),(0,p$.iD)(\"div\",xV,[(0,p$.Wm)(o,{type:\"primary\",size:\"lg\",text:a.btn,onClick:r=>e.$emit(\"action\",a.action)},null,8,[\"text\",\"onClick\"])])):(0,p$.kq)(\"\",!0)]))),128))])}],[\"__scopeId\",\"data-v-3352a294\"]]),x$=(0,p$.aZ)({name:\"NoOrganizationPage\",components:{ProjectFastJoinModal:vq,NoOrganization:xZ,CreateOrgModal:vI},setup(){let e=(0,p9.tv)(),a=(0,p$.iH)(!1),r=t,n=(0,p$.f3)(p0),i=(0,p$.iH)(!1);(0,p$.YP)(()=>(0,p$.SU)(n),a=>{if(a&&a.hasInit&&a.list?.length){if(!kt()||(i.value=a.list[0].organization_user_role===d2.organizationVisitor,!i.value))e.push({name:\"my-organization\"})}else kt()&&kW({language:window.LANGUAGE}).then(e=>{if(0===e.code){let{is_default_super_manager:a}=e.data;i.value=!a}})},{immediate:!0});let o=(0,p$.Fl)(()=>!!kt()&&!!i.value||!1);function s(e){if(\"boolean\"==typeof e){a.value=e;return}a.value=!a.value}let l=(0,p$.iH)(!1);return{handleNoOrgAction:function(e){\"create-organization\"===e?s(!0):\"join-project\"===e&&(l.value=!0)},isShowCreateModel:a,toggleCreateModelFunc:s,onCreateSuccess:function(e){s(!1),function(e){e?r.$pager.main.next({from:\"user-center-app\",label:\"org-id-change\",data:{orgId:e}}):r.$pager.main.next({from:\"user-center-app\",label:\"org-list-change\"})}(e)},joinProjectModalVisible:l,onJoinProjectModalCancel:()=>{l.value=!1},noPermission:o}}}),xY=(0,mF.default)(x$,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"NoOrganization\"),s=(0,p$.up)(\"CreateOrgModal\"),l=(0,p$.up)(\"ProjectFastJoinModal\");return(0,p$.wg)(),(0,p$.iD)(\"div\",xN,[(0,p$.Wm)(o,{\"no-permission\":e.noPermission,onAction:e.handleNoOrgAction},null,8,[\"no-permission\",\"onAction\"]),e.isShowCreateModel?((0,p$.wg)(),(0,p$.j4)(s,{key:0,onSuccess:e.onCreateSuccess,onClose:a[0]||(a[0]=a=>e.toggleCreateModelFunc(!1))},null,8,[\"onSuccess\"])):(0,p$.kq)(\"\",!0),e.joinProjectModalVisible?((0,p$.wg)(),(0,p$.j4)(l,{key:1,onClose:e.onJoinProjectModalCancel},null,8,[\"onClose\"])):(0,p$.kq)(\"\",!0)])}],[\"__scopeId\",\"data-v-09a2cda1\"]]),xQ={class:\"page-home-page uranus-scrollbar\"},xX={class:\"title-container\"},x0={class:\"conent-area\"},x1={class:\"base-info\"},x2={class:\"organization-info\"},x3={class:\"baseInfo-area\"},x4={class:\"title\"},x6={class:\"info-area\"},x5={class:\"info-item\"},x8={class:\"label\"},x9={class:\"label-value\"},x7={key:0,class:\"info-item\"},Re={class:\"label\"},Ra={class:\"label-value\"},Rr={class:\"btn-content\"},Rt={key:1},Rn={class:\"info-item\"},Ri={class:\"label\"},Ro={class:\"label-value\"},Rs={class:\"btn-content\"},Rl={key:1},Rd={key:1,class:\"info-item\"},Rc={class:\"label\"},Ru={class:\"label-value\"},Rp={class:\"tip\"},Rm={class:\"phone-verification-title\"},Rh={class:\"phone-area\"},Rf={key:0,class:\"phone-error\"},Rg={class:\"verification-area\"},R_={key:1,class:\"verification-code-error\"},Rb={key:2,class:\"verification-code-error\"};(i2=pb||(pb={})).Phone=\"phone\",i2.Email=\"email\",(i3=pk||(pk={})).UpdatePhone=\"update_phone\",i3.UpdateEmail=\"update_email\",(i4=pv||(pv={})).DeletePhone=\"delete_phone\",i4.DeleteEmail=\"delete_email\";let Rk=[{label:\"web.members.all_roles\",value:\"\"},{label:\"model.org_role_permission.super_admin\",value:\"organization-super-admin\"},{label:\"model.org_role_permission.manager\",value:\"organization-admin\"},{label:\"model.org_role_permission.maintenance\",value:\"organization-device-manager\"},{label:\"model.org_role_permission.member\",value:\"organization-member\"},{label:\"model.org_role_permission.temporary\",value:\"organization-temporary-member\"}],Rv=[...Rk,{label:\"web.my_profile.visitor\",value:\"organization-visitor\"}];(i6=pz||(pz={})).AirportBreakdown=\"airport_breakdown\",i6.TaskFailure=\"task_failure\",i6.AirportEmergency=\"airport_emergency\",i6.AirportEmergencyEvent=\"airport_emergency_event\",i6.DeviceReportFeedback=\"device_report_feedback\",i6.OrganizationInfo=\"organization_info\",i6.PrivateAlert=\"private_alert\";let Rz=(0,mF.default)({name:\"PhoneModal\",components:{UranusButton:m0,UranusSelect:fA,UranusModal:fX,UranusInput:hg,Ellipsis:yn},props:{phoneModalVisible:{type:Boolean,require:!0,default:!0},countryCode:{type:String,require:!1,default:\"+86\"},phoneNumber:{type:String,require:!1,default:\"\"}},emits:[\"change-modal-visible\",\"update-user-info\"],setup(e,{emit:a}){let r=(0,p$.iH)(!1),t=(0,p$.iH)(e.countryCode),n=(0,p$.iH)(e.phoneNumber),i=(0,p$.iH)(\"\"),o=(0,p$.iH)(0),s=(0,p$.iH)(!1),l=(0,p$.iH)(\"\"),d=(0,p$.iH)(!1),c=(0,p$.iH)(!1),u=(0,p$.iH)(!1),p=(0,p$.iH)(!0),m=null;async function h(){if(!f()||!p.value)return;p.value=!1;let e={type:\"phone\",phone:n.value,country_code:t.value},a=await k$(e);if(p.value=!0,0!==a.code){var r;kr.Z.error(ml(bz(a.code),void 0));return}o.value=60,m=setInterval(()=>{o.value--,!o.value&&clearInterval(m)},1e3)}function f(){var e;return u.value=(e=n.value,!/^(1)\\d{10}$/.test(e)),!u.value}(0,p$.YP)(()=>e.phoneModalVisible,a=>{r.value=a,!1===r.value&&(i.value=\"\",n.value=e.phoneNumber,u.value=!1,c.value=!1,s.value=!1,l.value=\"\",d.value=!1)}),(0,p$.YP)(()=>e.countryCode,e=>{t.value=e||\"+86\"}),(0,p$.YP)(()=>e.phoneNumber,e=>{n.value=e||\"\"});async function g(){let e=f(),r=\"\"===i.value?(c.value=!0,!1):(c.value=!1,!0);if(!e||!r)return;let u={operation:pk.UpdatePhone,contact_information:{country_code:t.value,phone:n.value},phone_verification_code:i.value};try{d.value=!0;let e=await kY(u);if(d.value=!1,0!==e.code){s.value=!0,l.value=bz(e.code);return}a(\"update-user-info\"),_(!1),clearInterval(m),o.value=0}catch(e){}}function _(e){a(\"change-modal-visible\",e)}return(0,p$.SK)(()=>{clearInterval(m)}),{phoneNumberState:n,verificationCode:i,getVerificationCode:h,countDown:o,verificationCodeError:s,verificationCodeErrorContent:l,confirmLoading:d,verificationCodeMiss:c,verificationCanClick:p,phoneError:u,checkPhoneFn:f,handleVerificationChange:function(e){i.value=e.target.value},onConfirm:g,handlePhoneChange:function(e){n.value=e.target.value},changeModalVisible:_,phoneModalVisibleState:r,onCancel:function(){_(!1)},countryCodeState:t}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"a-select-option\"),s=(0,p$.up)(\"UranusSelect\"),l=(0,p$.up)(\"UranusInput\"),d=(0,p$.up)(\"Ellipsis\"),c=(0,p$.up)(\"UranusButton\"),u=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.j4)(u,{visible:t.phoneModalVisibleState,style:{width:\"438px !important\"},class:\"phone-modal subscription-phone-modal\",\"is-height-auto-fit\":!0,size:\"tiny\",title:t.phoneNumberState?e.$t(\"web.personal_center.edit_phone_title\"):e.$t(\"web.personal_center.add_phone_title\"),\"cancel-text\":e.$t(\"common.action.cancel\"),\"ok-text\":e.$t(\"common.action.save\"),\"is-ok-auto-close\":!1,\"is-cancel-auto-close\":!1,\"is-confirm-loading\":t.confirmLoading,onOk:t.onConfirm,onCancel:t.onCancel},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Rp,(0,p$.zw)(e.$t(\"web.personal_center.phone_tip\")),1),(0,p$._)(\"div\",Rm,(0,p$.zw)(e.$t(\"web.personal_center.phone_verify\")),1),(0,p$._)(\"div\",Rh,[(0,p$.Wm)(s,{theme:\"light\",class:\"phone-country-code\",\"no-dark-border\":\"\",\"dropdown-class-name\":\"rainfall\",\"default-value\":t.countryCodeState},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{value:\"+86\"},{default:(0,p$.w5)(()=>[(0,p$.Uk)(\" +86 \")]),_:1})]),_:1},8,[\"default-value\"]),(0,p$.Wm)(l,{ref:\"planNameInputEle\",modelValue:t.phoneNumberState,\"onUpdate:modelValue\":a[0]||(a[0]=e=>t.phoneNumberState=e),class:\"phone-input\",maxlength:11,placeholder:e.$t(\"web.personal_center.input_phone_placeholder\"),onChange:t.handlePhoneChange,onBlur:t.checkPhoneFn},null,8,[\"modelValue\",\"placeholder\",\"onChange\",\"onBlur\"])]),t.phoneError?((0,p$.wg)(),(0,p$.iD)(\"div\",Rf,(0,p$.zw)(e.$t(\"web.personal_center.phone_error1\")),1)):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",Rg,[(0,p$.Wm)(l,{ref:\"verificationCodeInputEle\",modelValue:t.verificationCode,\"onUpdate:modelValue\":a[1]||(a[1]=e=>t.verificationCode=e),class:\"verification-input\",maxlength:6,placeholder:e.$t(\"web.personal_center.input_verification_placeholder\"),onChange:t.handleVerificationChange},null,8,[\"modelValue\",\"placeholder\",\"onChange\"]),t.countDown?((0,p$.wg)(),(0,p$.j4)(c,{key:1,type:\"normal\",disabled:!0,class:\"countDown-btn\",width:\"100\"},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.verification_retry\",{second:t.countDown})),1)]),_:1})):((0,p$.wg)(),(0,p$.j4)(c,{key:0,type:\"primary\",class:\"verification-btn\",width:\"100\",onClick:t.getVerificationCode},{default:(0,p$.w5)(()=>[(0,p$.Wm)(d,null,{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.get_verification_btn\")),1)]),_:1})]),_:1},8,[\"onClick\"]))]),t.verificationCodeMiss?((0,p$.wg)(),(0,p$.iD)(\"div\",R_,(0,p$.zw)(e.$t(\"web.personal_center.verification_error1_tip\")),1)):t.verificationCodeError?((0,p$.wg)(),(0,p$.iD)(\"div\",Rb,(0,p$.zw)(e.$t(t.verificationCodeErrorContent)),1)):(0,p$.kq)(\"\",!0)]),_:1},8,[\"visible\",\"title\",\"cancel-text\",\"ok-text\",\"is-confirm-loading\",\"onOk\",\"onCancel\"])}],[\"__scopeId\",\"data-v-30dbfcd9\"]]),Rw={class:\"tip\"},Ry={class:\"email-verification-title\"},RS={class:\"email-area\"},Rj={key:0,class:\"email-error\"},RD={class:\"verification-area\"},RI={key:1,class:\"verification-code-error\"},RA={key:2,class:\"verification-code-error\"},RC=(0,mF.default)({name:\"EmailModal\",components:{UranusButton:m0,UranusModal:fX,UranusInput:hg,Ellipsis:yn},props:{emailModalVisible:{type:Boolean,require:!0,default:!0},email:{type:String,require:!1,default:\"\"}},emits:[\"change-modal-visible\"],setup(e,{emit:a}){let r=(0,p$.iH)(!1),t=(0,p$.iH)(e.email),n=(0,p$.iH)(\"\"),i=(0,p$.iH)(0),o=(0,p$.iH)(!1),s=(0,p$.iH)(!1),l=(0,p$.iH)(\"\"),d=(0,p$.iH)(!1),c=(0,p$.iH)(!1),u=(0,p$.iH)(!0),p=null;async function m(){if(!h()||!u.value)return;u.value=!1;let e={type:\"email\",email:t.value},a=await k$(e);if(u.value=!0,0!==a.code){var r;kr.Z.error(ml(bz(a.code),void 0));return}i.value=60,p=setInterval(()=>{i.value--,!i.value&&clearInterval(p)},1e3)}function h(){var e;return c.value=(e=t.value,!/^([\\w.\\-+])+@(([a-z0-9-])+\\.)+([a-z0-9]{2,4})+$/i.test(e)),!c.value}(0,p$.YP)(()=>e.emailModalVisible,a=>{r.value=a,!1===r.value&&(n.value=\"\",t.value=e.email,c.value=!1,o.value=!1,s.value=!1,l.value=\"\",d.value=!1)});async function f(){let e=h(),r=\"\"===n.value?(o.value=!0,!1):(o.value=!1,!0);if(!e||!r)return;let c={operation:pk.UpdateEmail,contact_information:{email:t.value},email_verification_code:n.value};try{d.value=!0;let e=await kY(c);if(d.value=!1,0!==e.code){s.value=!0,l.value=bz(e.code);return}a(\"update-user-info\"),g(!1),clearInterval(p),i.value=0}catch(e){}}function g(e){a(\"change-modal-visible\",e)}return(0,p$.SK)(()=>{clearInterval(p)}),(0,p$.YP)(()=>e.email,e=>{t.value=e||\"\"}),{emailNumber:t,verificationCode:n,getVerificationCode:m,countDown:i,verificationCodeError:s,verificationCodeErrorContent:l,confirmLoading:d,verificationCodeMiss:o,emailError:c,verificationCanClick:u,checkEmailFn:h,handleVerificationChange:function(e){n.value=e.target.value},onConfirm:f,handleEmailChange:function(e){t.value=e.target.value},changeModalVisible:g,emailModalVisibleState:r,onCancel:function(){g(!1)}}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusInput\"),s=(0,p$.up)(\"Ellipsis\"),l=(0,p$.up)(\"UranusButton\"),d=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.j4)(d,{visible:t.emailModalVisibleState,style:{width:\"438px !important\"},class:\"email-modal subscription-email-modal\",\"is-height-auto-fit\":!0,size:\"tiny\",title:t.emailNumber?e.$t(\"web.personal_center.edit_email_title\"):e.$t(\"web.personal_center.add_email_title\"),\"cancel-text\":e.$t(\"common.action.cancel\"),\"ok-text\":e.$t(\"common.action.save\"),\"is-ok-auto-close\":!1,\"is-cancel-auto-close\":!1,\"confirm-loading\":t.confirmLoading,onOk:t.onConfirm,onCancel:t.onCancel},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Rw,(0,p$.zw)(e.$t(\"web.personal_center.email_tip\")),1),(0,p$._)(\"div\",Ry,(0,p$.zw)(e.$t(\"web.personal_center.email_verify\")),1),(0,p$._)(\"div\",RS,[(0,p$.Wm)(o,{ref:\"planNameInputEle\",modelValue:t.emailNumber,\"onUpdate:modelValue\":a[0]||(a[0]=e=>t.emailNumber=e),class:\"email-input\",placeholder:e.$t(\"web.personal_center.input_email_placeholder\"),onChange:t.handleEmailChange,onBlur:t.checkEmailFn},null,8,[\"modelValue\",\"placeholder\",\"onChange\",\"onBlur\"])]),t.emailError?((0,p$.wg)(),(0,p$.iD)(\"div\",Rj,(0,p$.zw)(e.$t(\"web.personal_center.email_error1\")),1)):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",RD,[(0,p$.Wm)(o,{ref:\"verificationCodeInputEle\",modelValue:t.verificationCode,\"onUpdate:modelValue\":a[1]||(a[1]=e=>t.verificationCode=e),class:\"verification-input\",maxlength:6,placeholder:e.$t(\"web.personal_center.input_verification_placeholder\"),onChange:t.handleVerificationChange},null,8,[\"modelValue\",\"placeholder\",\"onChange\"]),t.countDown?((0,p$.wg)(),(0,p$.j4)(l,{key:1,type:\"normal\",disabled:!0,class:\"countDown-btn\",width:\"100\"},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.verification_retry\",{second:t.countDown})),1)]),_:1})):((0,p$.wg)(),(0,p$.j4)(l,{key:0,type:\"primary\",class:\"verification-btn\",width:\"100\",onClick:t.getVerificationCode},{default:(0,p$.w5)(()=>[(0,p$.Wm)(s,null,{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.get_verification_btn\")),1)]),_:1})]),_:1},8,[\"onClick\"]))]),t.verificationCodeMiss?((0,p$.wg)(),(0,p$.iD)(\"div\",RI,(0,p$.zw)(e.$t(\"web.personal_center.verification_error1_tip\")),1)):t.verificationCodeError?((0,p$.wg)(),(0,p$.iD)(\"div\",RA,(0,p$.zw)(e.$t(t.verificationCodeErrorContent)),1)):(0,p$.kq)(\"\",!0)]),_:1},8,[\"visible\",\"title\",\"cancel-text\",\"ok-text\",\"confirm-loading\",\"onOk\",\"onCancel\"])}],[\"__scopeId\",\"data-v-af813764\"]]),Rx={class:\"container\"},RR={class:\"password-container\"},RE={class:\"password-title\"},RF={key:0,class:\"error-text\"},RT={class:\"password-container\"},RP={class:\"password-title\"},RM={key:0,class:\"error-text\"},RL={class:\"password-container\"},RJ={class:\"password-title\"},RN={key:0,class:\"error-text\"},Rq={class:\"password-container\"};function RO(e){if(!e)return!1;let a=`${e}`;if(a.length<8||a.length>20)return!1;let r=0;return kp.test(a)&&r++,km.test(a)&&r++,kh.test(a)&&r++,kf.test(a)&&r++,r>=3}let RH=(0,mF.default)({name:\"ChangePasswordModal\",components:{UranusModal:fX},directives:{\"forbidden-paste-cut\":{mounted(e){e.addEventListener(\"copy\",e=>e.preventDefault()),e.addEventListener(\"cut\",e=>e.preventDefault()),e.addEventListener(\"paste\",e=>e.preventDefault())}}},props:{visible:{typeof:Boolean,default:!1},account:{typeof:String,default:\"\"},orgId:{typeof:String,default:\"\"}},emits:[\"change-visible\"],setup(e,{emit:a}){let{t:r}=(0,p7.QT)(),t=(0,p$.iH)(!1),n=(0,p$.iH)(\"\"),i=(0,p$.iH)(\"\"),o=(0,p$.iH)(\"\"),s=(0,p$.iH)(\"\"),l=(0,p$.iH)(\"\"),d=(0,p$.iH)(\"\"),c=(0,p$.iH)(null),u=(0,p$.iH)(null),p=(0,p$.Fl)(()=>!0);async function m(){let t=!0;!f()&&(t=!1),!g()&&(t=!1),!n.value&&(i.value=r(\"web.org.the_old_password_empty_tips\"),t=!1),t&&!i.value&&zl({accountInfo:{account:e.account||\"\",origin_password:n.value,new_password:o.value},orgId:e.orgId||\"\"}).then(e=>{0===e.code&&(a(\"change-visible\"),kr.Z.success(r(\"web.priv.change_password_success_tips\")),h())})}function h(){n.value=\"\",i.value=\"\",o.value=\"\",s.value=\"\",l.value=\"\",d.value=\"\"}function f(){return(s.value=\"\",o.value)?RO(o.value)?o.value!==n.value||(s.value=r(\"web.org.password_not_same_tips\"),!1):(s.value=r(\"web.org.password_specifications_tips\"),!1):(s.value=r(\"web.org.the_new_password_empty_tips\"),!1)}function g(){return(d.value=\"\",l.value)?RO(l.value)?o.value===l.value||(d.value=r(\"web.org.password_same_tips\"),!1):(d.value=r(\"web.org.password_specifications_tips\"),!1):(d.value=r(\"web.org.new_password_empty_tips\"),!1)}return{confirmLoading:t,oldPassword:n,newPassword:o,checkNewPassword:l,canOk:p,oldPErrorText:i,newPErrorText:s,checkNewPErrorText:d,onConfirm:m,onCancel:function(){a(\"change-visible\"),h()},newPasswordEl:c,checkNewPasswordEl:u,newPasswordFun:f,checkNewPasswordFun:g,oldPasswordFun:function(){n.value?i.value=\"\":i.value=r(\"web.org.old_password_empty_tips\")}}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusInputPassword\"),s=(0,p$.up)(\"UranusModal\"),l=(0,p$.Q2)(\"forbidden-paste-cut\");return(0,p$.wg)(),(0,p$.j4)(s,{visible:r.visible,style:{width:\"438px !important\"},\"is-height-auto-fit\":!0,size:\"tiny\",title:e.$t(\"web.org.password_change\"),\"cancel-text\":e.$t(\"common.action.cancel\"),\"ok-text\":e.$t(\"common.action.save\"),\"is-ok-auto-close\":!1,\"is-confirm-loading\":t.confirmLoading,onOk:t.onConfirm,onCancel:t.onCancel},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Rx,[(0,p$._)(\"div\",RR,[(0,p$._)(\"span\",RE,(0,p$.zw)(e.$t(\"web.old_password\")),1),(0,p$.Wm)(o,{modelValue:t.oldPassword,\"onUpdate:modelValue\":a[0]||(a[0]=e=>t.oldPassword=e),error:!!t.oldPErrorText,onBlur:t.oldPasswordFun},null,8,[\"modelValue\",\"error\",\"onBlur\"]),t.oldPErrorText?((0,p$.wg)(),(0,p$.iD)(\"span\",RF,(0,p$.zw)(e.$t(t.oldPErrorText)),1)):(0,p$.kq)(\"\",!0)]),(0,p$._)(\"div\",RT,[(0,p$._)(\"span\",RP,(0,p$.zw)(e.$t(\"web.new_password\")),1),(0,p$.wy)((0,p$.Wm)(o,{ref:\"newPasswordEl\",modelValue:t.newPassword,\"onUpdate:modelValue\":a[1]||(a[1]=e=>t.newPassword=e),error:!!t.newPErrorText,onBlur:t.newPasswordFun},null,8,[\"modelValue\",\"error\",\"onBlur\"]),[[l]]),t.newPErrorText?((0,p$.wg)(),(0,p$.iD)(\"span\",RM,(0,p$.zw)(e.$t(t.newPErrorText)),1)):(0,p$.kq)(\"\",!0)]),(0,p$._)(\"div\",RL,[(0,p$._)(\"span\",RJ,(0,p$.zw)(e.$t(\"web.confirm_new_password\")),1),(0,p$.wy)((0,p$.Wm)(o,{ref:\"checkNewPasswordEl\",modelValue:t.checkNewPassword,\"onUpdate:modelValue\":a[2]||(a[2]=e=>t.checkNewPassword=e),error:!!t.checkNewPErrorText,onBlur:t.checkNewPasswordFun},null,8,[\"modelValue\",\"error\",\"onBlur\"]),[[l]]),t.checkNewPErrorText?((0,p$.wg)(),(0,p$.iD)(\"span\",RN,(0,p$.zw)(e.$t(t.checkNewPErrorText)),1)):(0,p$.kq)(\"\",!0)]),(0,p$._)(\"div\",Rq,[(0,p$._)(\"span\",null,(0,p$.zw)(e.$t(\"web.password_prompt\")),1)])])]),_:1},8,[\"visible\",\"title\",\"cancel-text\",\"ok-text\",\"is-confirm-loading\",\"onOk\",\"onCancel\"])}],[\"__scopeId\",\"data-v-520f0f80\"]]),RG=(0,mF.default)({name:\"BaseInfo\",components:{PhoneModal:Rz,EmailModal:RC,UranusModal:fX,UranusButton:m0,UranusIcon:mL,ChangePasswordModal:RH},setup(){let e=(0,p$.iH)(!1),a=(0,p$.iH)(!1),r=(0,p$.iH)(!1),t=(0,p$.iH)(\"delete_phone\"),n=(0,p$.iH)(p5()),i=(0,p$.iH)(p8()),o=(0,p$.iH)({userAccount:\"\",sso_account:\"\",userContactInformation:{countryCode:\"\",email:\"\",phone:\"\"}});async function s(){await d()}async function l(){var e,a;let n={operation:t.value};if(0===(await kY(n)).code){;kr.Z.success({content:ml(\"web.personal_center.delete_success_tip\",void 0)}),r.value=!1,await d()}else{;kr.Z.error(ml(\"web.personal_center.delete_fail_tip\",void 0))}}async function d(){let e=await kW({language:window.LANGUAGE});if(0===e.code)n.value.setUserInfo(e.data),o.value.userAccount=e.data.user_account,o.value.sso_account=e.data.sso_account,o.value.userContactInformation.countryCode=e.data.user_contact_information?.country_code||\"+86\",o.value.userContactInformation.email=e.data.user_contact_information?.email||\"\",o.value.userContactInformation.phone=e.data.user_contact_information?.phone||\"\",m.value=e.data.is_from_local_system}let c=(0,p$.Fl)(()=>n.value.user_account),u=(0,p$.Fl)(()=>i.value?.organizationRole?.org_uuid),p=(0,p$.iH)(!1),m=(0,p$.iH)(!1),h=(0,p$.Fl)(()=>ky(cm.USER_CENTER_CHANGE_PASSWORD)&&m.value),f=ky(cm.DEVICE_MANAGE_NOTIFICATION_SUBSCRIPTION);return(0,p$.bv)(()=>{d()}),{phoneModalVisible:e,emailModalVisible:a,changeEmailModalVisible:function(e){a.value=e},changePhoneModalVisible:function(a){e.value=a},showPhoneEdit:function(){e.value=!0},showEmailEdit:function(){a.value=!0},deleteModalVisible:r,showDeleteModal:function(e){r.value=!0,t.value=e},userInfoStore:n,updateUserInfo:s,userInfo:o,closeDeleteModalVisible:function(){r.value=!1},onDeleteModalOk:l,DeleteUserContactInfoType:pv,deleteTarget:t,isEmpty:ms.isEmpty,handleChangePasswordModalVisible:function(){p.value=!p.value},showChangePasswordBtn:h,changePasswordModalVisible:p,account:c,orgId:u,useSubscriptionFeature:f}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusButton\"),s=(0,p$.up)(\"UranusIcon\"),l=(0,p$.up)(\"PhoneModal\"),d=(0,p$.up)(\"EmailModal\"),c=(0,p$.up)(\"UranusModal\"),u=(0,p$.up)(\"ChangePasswordModal\");return(0,p$.wg)(),(0,p$.iD)(\"div\",x3,[(0,p$._)(\"div\",x4,(0,p$.zw)(e.$t(\"web.personal_center.base_info\")),1),(0,p$._)(\"div\",x6,[(0,p$._)(\"div\",x5,[(0,p$._)(\"div\",x8,(0,p$.zw)(e.$t(\"web.personal_center.account\")),1),(0,p$._)(\"div\",x9,[(0,p$.Uk)((0,p$.zw)(t.userInfo.userAccount)+\" \",1),t.showChangePasswordBtn?((0,p$.wg)(),(0,p$.j4)(o,{key:0,type:\"primary\",class:\"change-password-btn\",onClick:t.handleChangePasswordModalVisible},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.change_password\")),1)]),_:1},8,[\"onClick\"])):(0,p$.kq)(\"\",!0)])]),t.useSubscriptionFeature?((0,p$.wg)(),(0,p$.iD)(\"div\",x7,[(0,p$._)(\"div\",Re,(0,p$.zw)(e.$t(\"web.personal_center.subscription_phone\")),1),(0,p$._)(\"div\",Ra,[t.userInfo.userContactInformation.phone?((0,p$.wg)(),(0,p$.iD)(\"div\",Rt,[(0,p$.Uk)((0,p$.zw)(t.userInfo.userContactInformation.countryCode)+\" \"+(0,p$.zw)(t.userInfo.userContactInformation.phone)+\" \",1),(0,p$.Wm)(s,{name:\"edit\",class:\"edit-icon\",size:14,onClick:t.showPhoneEdit},null,8,[\"onClick\"]),(0,p$.Wm)(s,{name:\"delete\",class:\"delete-icon\",size:14,onClick:a[0]||(a[0]=e=>t.showDeleteModal(t.DeleteUserContactInfoType.DeletePhone))})])):((0,p$.wg)(),(0,p$.j4)(o,{key:0,type:\"primary\",onClick:t.showPhoneEdit},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Rr,[(0,p$.Wm)(s,{name:\"add\",class:\"add-icon\",size:14}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.personal_center.add_phone_title\")),1)])]),_:1},8,[\"onClick\"]))])])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",Rn,[(0,p$._)(\"div\",Ri,(0,p$.zw)(e.$t(\"web.personal_center.subscription_email\")),1),(0,p$._)(\"div\",Ro,[t.userInfo.userContactInformation.email?((0,p$.wg)(),(0,p$.iD)(\"div\",Rl,[(0,p$.Uk)((0,p$.zw)(t.userInfo.userContactInformation.email)+\" \",1),(0,p$.Wm)(s,{name:\"edit\",class:\"edit-icon\",size:14,onClick:t.showEmailEdit},null,8,[\"onClick\"]),(0,p$.Wm)(s,{name:\"delete\",class:\"delete-icon\",size:14,onClick:a[1]||(a[1]=e=>t.showDeleteModal(t.DeleteUserContactInfoType.DeleteEmail))})])):((0,p$.wg)(),(0,p$.j4)(o,{key:0,type:\"primary\",onClick:t.showEmailEdit},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Rs,[(0,p$.Wm)(s,{name:\"add\",class:\"add-icon\",size:14}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.personal_center.add_email_title\")),1)])]),_:1},8,[\"onClick\"]))])]),t.useSubscriptionFeature&&!t.isEmpty(t.userInfo.sso_account)?((0,p$.wg)(),(0,p$.iD)(\"div\",Rd,[(0,p$._)(\"div\",Rc,(0,p$.zw)(e.$t(\"web.oauth2.personal_center.label\")),1),(0,p$._)(\"div\",Ru,(0,p$.zw)(t.userInfo.sso_account),1)])):(0,p$.kq)(\"\",!0)]),(0,p$.Wm)(l,{\"phone-modal-visible\":t.phoneModalVisible,\"country-code\":t.userInfo.userContactInformation.countryCode,\"phone-number\":t.userInfo.userContactInformation.phone,onUpdateUserInfo:t.updateUserInfo,onChangeModalVisible:t.changePhoneModalVisible},null,8,[\"phone-modal-visible\",\"country-code\",\"phone-number\",\"onUpdateUserInfo\",\"onChangeModalVisible\"]),(0,p$.Wm)(d,{\"email-modal-visible\":t.emailModalVisible,email:t.userInfo.userContactInformation.email,onUpdateUserInfo:t.updateUserInfo,onChangeModalVisible:t.changeEmailModalVisible},null,8,[\"email-modal-visible\",\"email\",\"onUpdateUserInfo\",\"onChangeModalVisible\"]),(0,p$.Wm)(c,{title:e.$t(\"common.action.delete\"),visible:t.deleteModalVisible,danger:\"\",size:\"tiny\",onOk:t.onDeleteModalOk,onCancel:t.closeDeleteModalVisible},{default:(0,p$.w5)(()=>[(0,p$._)(\"span\",null,(0,p$.zw)(t.deleteTarget===t.DeleteUserContactInfoType.DeletePhone?e.$t(\"web.personal_center.phone_message\"):e.$t(\"web.personal_center.email\"))+\" \"+(0,p$.zw)(e.$t(\"web.personal_center.delete_contact_tip\"))+\" \"+(0,p$.zw)(e.$t(\"web.personal_center.delete_contact_tip2\")),1)]),_:1},8,[\"title\",\"visible\",\"onOk\",\"onCancel\"]),(0,p$.Wm)(u,{visible:t.changePasswordModalVisible,account:t.account,\"org-id\":t.orgId,onChangeVisible:t.handleChangePasswordModalVisible},null,8,[\"visible\",\"account\",\"org-id\",\"onChangeVisible\"])])}],[\"__scopeId\",\"data-v-8361f746\"]]),RU=e=>((0,p$.dD)(\"data-v-e9f8ce1c\"),e=e(),(0,p$.Cn)(),e),RV={class:\"organization-area\"},RB={class:\"title\"},RK={class:\"info-area\"},RW={class:\"info-item\"},RZ={class:\"label\"},R$={class:\"label-value\"},RY={class:\"info-item\"},RQ={class:\"label\"},RX={class:\"label-value\"},R0={class:\"info-item\"},R1={class:\"label\"},R2={class:\"label-value\"},R3=RU(()=>(0,p$._)(\"div\",{class:\"bg-white-division\"},null,-1)),R4={class:\"title\"},R6={class:\"title-tip\"},R5={class:\"subscription-area-box\"},R8={class:\"subscription-area\"},R9={class:\"label\"},R7={class:\"internal-message\"},Ee={class:\"checkbox-label\"},Ea=RU(()=>(0,p$._)(\"div\",{class:\"bg-white-division-vertical\"},null,-1)),Er={class:\"label-value\"},Et={class:\"btn-content\"},En={key:1},Ei={class:\"value-layout\"},Eo={class:\"project-list\"},Es={class:\"subscription-way\"},El={class:\"checkbox-label\"},Ed={class:\"checkbox-label\"},Ec={class:\"operation-area\"},Eu={class:\"subscription-area\"},Ep={class:\"label\"},Em=RU(()=>(0,p$._)(\"div\",{class:\"bg-white-division-vertical\"},null,-1)),Eh={class:\"label-value\"},Ef={class:\"btn-content\"},Eg={key:1},E_={class:\"value-layout\"},Eb={class:\"project-list\"},Ek={class:\"subscription-way\"},Ev={class:\"checkbox-label\"},Ez={class:\"checkbox-label\"},Ew={class:\"operation-area\"},Ey={key:0,class:\"subscription-area\",style:{\"margin-top\":\"24px\"}},ES={class:\"label\"},Ej=RU(()=>(0,p$._)(\"div\",{class:\"bg-white-division-vertical\"},null,-1)),ED={class:\"label-value\"},EI={class:\"btn-content\"},EA={key:1},EC={class:\"value-layout\"},Ex={class:\"subscription-way\",style:{\"margin-top\":\"0\"}},ER={class:\"checkbox-label\"},EE={class:\"checkbox-label\"},EF={class:\"operation-area\"},ET={class:\"subscription-area\"},EP={class:\"label\"},EM={class:\"internal-message\"},EL={class:\"checkbox-label\"},EJ={key:1,class:\"subscription-area\"},EN={class:\"label\"},Eq={class:\"internal-message\"},EO={class:\"checkbox-label\"},EH=RU(()=>(0,p$._)(\"div\",{class:\"bg-white-division-vertical\"},null,-1)),EG={class:\"label-value\"},EU={class:\"btn-content\"},EV={key:1},EB={class:\"value-layout\"},EK={class:\"subscription-way\",style:{\"margin-top\":\"0\"}},EW={class:\"checkbox-label\"},EZ={class:\"operation-area\"};(i5=pw||(pw={}))[i5.Website=1]=\"Website\",i5[i5.Email=2]=\"Email\",(i8=py||(py={})).CREATE_AT=\"created_at|desc\",i8.PRIORITY=\"priority|desc\",(i9=pS||(pS={}))[i9.INFO=1]=\"INFO\",i9[i9.REMIND=2]=\"REMIND\",i9[i9.WARN=3]=\"WARN\",(i7=pj||(pj={}))[i7.PROJECT=1]=\"PROJECT\",i7[i7.ORGANIZATION=2]=\"ORGANIZATION\",i7[i7.SYSTEM=3]=\"SYSTEM\",(oe=pD||(pD={})).NONE=\"\",oe.LEFT=\"left\",oe.RIGHT=\"right\",oe.COCKPIT=\"cockpit\";let E$={key:0,class:\"table-filter-area\"};let EY=(s=()=>(0,p$._)(\"div\",{class:\"table-filter-area-left\"},null,-1),(0,p$.dD)(\"data-v-53960b01\"),s=s(),(0,p$.Cn)(),s),EQ={class:\"table-filter-area-right\"},EX={class:\"group-name\"},E0={key:1,class:\"subscription-modal-table\"},E1={class:\"subscription-way-area\"},E2={class:\"subscription-way-title\"},E3={class:\"subscription-way-group\"},E4={class:\"checkbox-label\"},E6={class:\"checkbox-label\"};(oa=pI||(pI={})).Run=\"project-status-run\",oa.Close=\"project-status-close\";let E5={\"project-status-run\":\"model.p_status.in_process\",\"project-status-close\":\"model.p_status.archived\"};(pA||(pA={})).OPEN_ACTION_PANEL=\"OAP\",(or=pC||(pC={})).ASC=\"ASC\",or.DESC=\"DESC\";let E8={name:\"SubscriptionModal\",components:{UranusModal:fX,UranusSelect:fA,UranusCustomInput:fh,UranusTable:fZ,UranusCheckbox:gy,UranusSort:f3},props:{subscriptionModalVisible:{type:Boolean,require:!0,default:!0},projectRelated:{type:Boolean,require:!1,default:!0},subscription:{isSubscriptionNewProjects:!1,subscriptionProjects:[],subscriptionReceiveType:[],subscriptionStatus:!1},subscriptionType:{type:String,require:!0,default:pz.AirportEmergencyEvent},useMessageReceiveType:{type:Boolean,default:!0},useEmailReceiveType:{type:Boolean,default:!0},customConfirm:{type:[Function,null],default:null}},emits:[\"close-modal\",\"change-modal-visible\",\"update-organizations-info\"],setup(e,{emit:a}){var r,t;let n=(0,p$.iH)(!1),i=(0,p$.iH)(!1),o=(0,p$.Fl)(()=>{var a,r,t;switch(e.subscriptionType){case pz.AirportEmergencyEvent:;return ml(\"web.personal_center.airpost_event_subscription_second\",void 0);case pz.TaskFailure:;return ml(\"web.personal_center.airport_task_fail_second\",void 0);case pz.DeviceReportFeedback:;return ml(\"web.personal_center.device_information_notification\",void 0);default:return\"\"}}),s=(0,p$.iH)(!1),l=(0,p$.iH)(!1),d=(0,p$.iH)([]),c=(0,p$.f3)(p1),u=(0,ms.cloneDeep)(E5),p=(0,p$.qj)({y:280});let m=(0,p$.qj)([{title:ml(\"web.personal_center.peoject_name\",void 0),dataIndex:\"name\"},{key:\"created_at\",dataIndex:\"created_at\",slots:{title:\"created_at_title\",customRender:\"created_at\"}},{title:ml(\"web.personal_center.status\",void 0),dataIndex:\"status\",width:100,slots:{customRender:\"status\"}}]),h=(0,p$.qj)({filterStatus:\"all\",initialized:!1,loading:!1,canLoadMore:!0,listArr:[],keyword:\"\",change:!1,sortType:\"\",sortColumn:\"\",subscriptionType:e.subscriptionType}),f=(0,p$.Fl)(()=>({selectedRowKeys:(0,p$.SU)(d),onChange:g}));function g(e){d.value=e}async function _(){if(!c.value)return;h.loading=!0;let e={uuid:c.value,sort_type:h.sortType,sort_column:h.sortColumn,q:h.keyword,prj_status:\"all\"===h.filterStatus?void 0:h.filterStatus,prj_authorized_status:\"project-status-authorized\",usage:\"simple\"},a=(await kK(e)).data.list;h.listArr=a,h.loading=!1}async function b(){let r=[];s.value&&r.push(pb.Phone),l.value&&r.push(pb.Email);let t={subscription_type:h.subscriptionType===pz.AirportEmergency?pz.AirportEmergencyEvent:h.subscriptionType,subscription_config:{subscription_status:!0,subscription_projects:d.value,is_subscription_new_projects:n.value,subscription_receive_type:r}};if(e.customConfirm)await e.customConfirm(t);else{var i;if(0!==(await kQ(c.value,t)).code)return;a(\"update-organizations-info\"),kr.Z.success({content:ml(\"web.personal_center.subscription_success_tip\",void 0)})}(function(e){a(\"change-modal-visible\",e)})(!1)}let k=p5(),v=(0,p$.Fl)(()=>{let e=[];return!k?.user_contact_information?.phone&&e.push(pb.Phone),!k?.user_contact_information?.email&&e.push(pb.Email),e});return(0,p$.bv)(()=>{var e;u.all=ml(\"web.personal_center.all\",void 0)}),(0,p$.YP)(()=>e.subscriptionType,e=>{h.subscriptionType=e}),(0,p$.YP)(()=>e.subscriptionModalVisible,a=>{i.value=a,a?e.projectRelated&&_():(h.sortType=void 0,h.sortColumn=void 0,h.filterStatus=\"all\",h.keyword=\"\")}),(0,p$.YP)(()=>e.subscription.subscriptionReceiveType,e=>{e.includes(pb.Phone)?s.value=!0:s.value=!1,e.includes(pb.Email)?l.value=!0:l.value=!1},{immediate:!0}),(0,p$.YP)(()=>e.subscription.isSubscriptionNewProjects,e=>{n.value=!(0,ms.isNil)(e)&&e}),(0,p$.YP)(()=>e.subscription.subscriptionProjects,e=>{d.value=(0,ms.isNil)(e)?[]:e}),{subscriptionModalVisibleState:i,columns:m,rowSelection:f,ProjectStatusMap:E5,ProjectStatusMapCopy:u,subscriptionMessage:s,subscriptionEmail:l,tableScrollProps:p,handleGetTableListThrottled:function(e,a,r){let{field:t,order:n}=r;if(\"created_at\"===t)n?(h.sortType=pC[n],h.sortColumn=t):(h.sortType=void 0,h.sortColumn=void 0),_()},handleGetProjectList:_,...(0,p$.BK)(h),dayjs:mi(),statusFilterChange:function(e){h.filterStatus=e,_()},onSearch:function(e){h.keyword=e,_()},onCancel:function(){a(\"close-modal\")},onConfirm:b,subscriptionNewProjects:n,SubscriptionTypeEnum:pz,toggleSort:function(e){let{order:a,field:r}=e;if(\"created_at\"===r)a?(h.sortType=pC[a],h.sortColumn=r):(h.sortType=void 0,h.sortColumn=void 0),_()},showNormalSort:function(e){return!0},disabledSubscriptionReceiveTypes:v,UserContactInfoType:pb,subscriptionModalTitle:o}}},E9=(0,mF.default)(E8,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"a-select-option\"),s=(0,p$.up)(\"UranusSelect\"),l=(0,p$.up)(\"UranusCustomInput\"),d=(0,p$.up)(\"UranusSort\"),c=(0,p$.up)(\"UranusTable\"),u=(0,p$.up)(\"UranusCheckbox\"),p=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.j4)(p,{visible:t.subscriptionModalVisibleState,style:{width:\"438px !important\"},class:\"critical-situation-subscription-modal\",\"is-height-auto-fit\":!0,size:\"small\",title:t.subscriptionModalTitle,\"is-ok-auto-close\":!1,\"is-cancel-auto-close\":!1,\"destroy-on-close\":!0,onOk:t.onConfirm,onCancel:t.onCancel},{default:(0,p$.w5)(()=>[r.projectRelated?((0,p$.wg)(),(0,p$.iD)(\"div\",E$,[EY,(0,p$._)(\"div\",EQ,[(0,p$.Wm)(s,{style:{width:\"200px\"},\"no-dark-border\":\"\",\"dropdown-match-select-width\":148,theme:\"light\",value:e.filterStatus,size:\"large\",onSelect:t.statusFilterChange},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(t.ProjectStatusMapCopy,(a,r)=>((0,p$.wg)(),(0,p$.j4)(o,{key:r,class:\"plan-app-wayline-group-custom-select-option\",value:r},{default:(0,p$.w5)(()=>[(0,p$._)(\"span\",EX,(0,p$.zw)(e.$t(a)),1)]),_:2},1032,[\"value\"]))),128))]),_:1},8,[\"value\",\"onSelect\"]),(0,p$.Wm)(l,{search:\"\",class:\"filter-item\",style:{\"margin-left\":\"8px\",width:\"200px\"},placeholder:e.$t(\"web.members.search_by_project_name\"),size:\"large\",onInput:t.onSearch},null,8,[\"placeholder\",\"onInput\"])])])):(0,p$.kq)(\"\",!0),r.projectRelated?((0,p$.wg)(),(0,p$.iD)(\"div\",E0,[(0,p$.Wm)(c,{ref:\"subscriptionTable\",class:\"subscription-table\",\"row-key\":\"uuid\",\"row-class-name\":(e,a)=>a%2==1?null:\"table-striped\",loading:e.loading,columns:t.columns,scroll:t.tableScrollProps,\"box-height\":t.tableScrollProps.y,\"empty-magic-height\":95,striped:!1,\"show-table-pagination\":!1,\"data-source\":e.listArr,\"row-selection\":t.rowSelection,immediate:!0,\"can-load-before\":!0,onChange:t.handleGetTableListThrottled},{created_at_title:(0,p$.w5)(()=>[(0,p$.Wm)(d,{field:\"created_at\",normal:t.showNormalSort(\"created_at\"),onToggleSort:t.toggleSort},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.create_time\")),1)]),_:1},8,[\"normal\",\"onToggleSort\"])]),created_at:(0,p$.w5)(({record:e})=>[(0,p$._)(\"span\",null,(0,p$.zw)(t.dayjs(1e3*e.created_at).format(\"YYYY-MM-DD hh:mm:ss\")),1)]),status:(0,p$.w5)(({record:a})=>[(0,p$._)(\"span\",null,(0,p$.zw)(e.$t(t.ProjectStatusMap[a.status])),1)]),_:1},8,[\"row-class-name\",\"loading\",\"columns\",\"scroll\",\"box-height\",\"data-source\",\"row-selection\",\"onChange\"])])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",E1,[(0,p$._)(\"span\",E2,(0,p$.zw)(e.$t(\"web.personal_center.subscription_way\")),1),(0,p$._)(\"span\",E3,[r.useMessageReceiveType?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[(0,p$.Wm)(u,{checked:t.subscriptionMessage,\"onUpdate:checked\":a[0]||(a[0]=e=>t.subscriptionMessage=e),disabled:t.disabledSubscriptionReceiveTypes.includes(t.UserContactInfoType.Phone),class:\"subscription-message\"},null,8,[\"checked\",\"disabled\"]),(0,p$._)(\"span\",E4,(0,p$.zw)(e.$t(\"web.personal_center.message_info\")),1)],64)):(0,p$.kq)(\"\",!0),r.useEmailReceiveType?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[(0,p$.Wm)(u,{checked:t.subscriptionEmail,\"onUpdate:checked\":a[1]||(a[1]=e=>t.subscriptionEmail=e),disabled:t.disabledSubscriptionReceiveTypes.includes(t.UserContactInfoType.Email),class:\"subscription-email\"},null,8,[\"checked\",\"disabled\"]),(0,p$._)(\"span\",E6,(0,p$.zw)(e.$t(\"web.personal_center.email\")),1)],64)):(0,p$.kq)(\"\",!0)])])]),_:1},8,[\"visible\",\"title\",\"onOk\",\"onCancel\"])}],[\"__scopeId\",\"data-v-53960b01\"]]),E7=(0,mF.default)({name:\"OrganizationInfo\",components:{SubscriptionModal:E9,UranusButton:m0,UranusIcon:mL,UranusCheckbox:gy,UranusModal:fX,UranusTooltip:hw},setup(){let e=t,a=(0,p$.f3)(p1),r=(0,p$.iH)(!1),n=(0,p$.iH)(!1),i=(0,p$.iH)([]),o=(0,p$.iH)(pz.AirportEmergency),s=[pz.DeviceReportFeedback,pz.PrivateAlert],l=[pz.PrivateAlert],d=(0,p$.Fl)(()=>!s.includes(o.value)),c=(0,p$.Fl)(()=>!l.includes(o.value)),u=(0,p$.qj)({isSubscriptionNewProjects:!1,subscriptionProjects:[],subscriptionReceiveType:[],subscriptionStatus:!1}),p=(0,p$.qj)({isSubscriptionNewProjects:!1,subscriptionProjects:[],subscriptionReceiveType:[],subscriptionStatus:!1}),m=(0,p$.Fl)(()=>!p.subscriptionProjects?.length),h=(0,p$.qj)({isSubscriptionNewProjects:!1,subscriptionProjects:[],subscriptionReceiveType:[],subscriptionStatus:!1}),f=(0,p$.Fl)(()=>!h.subscriptionProjects?.length),g=(0,p$.qj)({subscriptionReceiveType:[],subscriptionStatus:!1}),_=(0,p$.Fl)(()=>!g.subscriptionReceiveType?.length),b=(0,p$.qj)({[pz.AirportEmergency]:(0,p$.qj)({subscriptionType:pz.AirportEmergency,subscriptionId:\"\",checkbox:!1,subscriptionReceiveType:[]}),[pz.OrganizationInfo]:(0,p$.qj)({subscriptionType:pz.OrganizationInfo,subscriptionId:\"\",checkbox:!1,subscriptionReceiveType:[]}),[pz.PrivateAlert]:(0,p$.qj)({subscriptionType:pz.PrivateAlert,subscriptionId:\"\",checkbox:!1,subscriptionReceiveType:[]})}),k=(0,p$.Fl)(()=>b[pz.PrivateAlert].subscriptionReceiveType.includes(pw.Email)),v=[pz.PrivateAlert],z={[pz.AirportEmergency]:pj.PROJECT,[pz.OrganizationInfo]:pj.ORGANIZATION,[pz.PrivateAlert]:pj.SYSTEM},w=(0,p$.Fl)(()=>!k.value),y=(0,p$.qj)({organizationName:\"\",nickname:\"\",role:\"\"}),S=p5(),j=(0,p$.Fl)(()=>{let e=[];return S?.user_contact_information?.phone&&e.push(pb.Phone),S?.user_contact_information?.email&&e.push(pb.Email),e}),D=(0,p$.Fl)(()=>[d2.organizationSuperAdmin,d2.organizationAdmin,d2.organizationDeviceManager].includes(y.role));async function I(){let e=await k6(a.value);if(0===e.code)i.value=e.data?.list||[],i.value.length&&Object.values(b).forEach(e=>{e.checkbox=!1,e.subscriptionReceiveType=[],e.subscriptionId=\"\",i.value.forEach(a=>{if(a.subscription_group===e.subscriptionType){let r=a.channels||[];e.checkbox=r.includes(pw.Website),e.subscriptionReceiveType=r,e.subscriptionId=a.id}})})}async function A(){let e=await kZ(a.value);if(0===e.code)p.isSubscriptionNewProjects=e.data.airport_emergency_event_subscription_config?.is_subscription_new_projects,p.subscriptionProjects=e.data.airport_emergency_event_subscription_config?.subscription_projects,p.subscriptionReceiveType=e.data.airport_emergency_event_subscription_config?.subscription_receive_type||[],p.subscriptionStatus=e.data.airport_emergency_event_subscription_status,h.isSubscriptionNewProjects=e.data.task_failure_subscription_config?.is_subscription_new_projects,h.subscriptionProjects=e.data.task_failure_subscription_config?.subscription_projects,h.subscriptionReceiveType=e.data.task_failure_subscription_config?.subscription_receive_type||[],h.subscriptionStatus=e.data.task_failure_subscription_status,g.subscriptionReceiveType=e.data.device_report_feedback_subscription_config?.subscription_receive_type||[],g.subscriptionStatus=e.data.device_report_feedback_subscription_status,y.organizationName=e.data.organization_name,y.nickname=e.data.nickname,y.role=e.data.role}let C=(0,p$.Fl)(()=>{var e,a;return v.includes(o.value)?ml(\"user_center.message_subscription.private.delete_subscription.tip\",void 0):ml(\"web.personal_center.delete_subscription_tip\",void 0)});async function x(){var e;let r={subscription_type:o.value===pz.AirportEmergency?pz.AirportEmergencyEvent:o.value,subscription_config:{subscription_status:!1}};if(0===(await kQ(a.value,r)).code)kr.Z.success({content:ml(\"web.personal_center.delete_subscription_success_tip\",void 0)}),A(),n.value=!1}async function R(){let e={[pw.Email]:!1};await P(o.value,e)}async function E(){v.includes(o.value)?R():x()}(0,p$.YP)(()=>a.value,e=>{if(\"\"!==e)A(),I()},{immediate:!0});let F=ky(cm.DEVICE_MANAGE_NOTIFICATION_SUBSCRIPTION),T=[pw.Email,pw.Website];async function P(e,r){var t,n;let i=b[e],o=i.subscriptionReceiveType,s=T.filter(e=>o.includes(e)?!1!==r[e]:!0===r[e]),l={subscription_group:e,space_type:z[e]||pj.PROJECT,channels:s,space_ids:function(e){switch(e){case pz.OrganizationInfo:return[a.value];case pz.PrivateAlert:return[];default:return[\"*\"]}}(e),priority:[0]};i.subscriptionId?await k4(a.value,i.subscriptionId,l):await k3(a.value,l);let d=s.includes(pw.Website);kr.Z.success({content:d?ml(\"web.personal_center.subscription_success_tip\",void 0):ml(\"user_center.message_subscription.cancel_subscription.toast\",void 0)}),I()}async function M(e){let a={[pw.Email]:e.subscription_config.subscription_receive_type.includes(pb.Email)};await P(e.subscription_type,a)}let L=(0,p$.Fl)(()=>o.value===pz.PrivateAlert?M:null);return{showDeviceReportFeedbackPart:D,showDeviceSubscriptionEdit:function(){if(!a.value){var e;kr.Z.error({content:ml(\"web.personal_center.join_org_tip\",void 0)});return}o.value=pz.AirportEmergency,u.isSubscriptionNewProjects=p.isSubscriptionNewProjects;let t=p.subscriptionProjects||[];u.subscriptionProjects=(0,ms.map)(t,\"project_uuid\"),m.value?u.subscriptionReceiveType=[...j.value]:u.subscriptionReceiveType=[...p.subscriptionReceiveType],u.subscriptionStatus=p.subscriptionStatus,r.value=!0},showTaskSubscriptionEdit:function(){if(!a.value){var e;kr.Z.error({content:ml(\"web.personal_center.join_org_tip\",void 0)});return}o.value=pz.TaskFailure,u.isSubscriptionNewProjects=h.isSubscriptionNewProjects;let t=h.subscriptionProjects||[];u.subscriptionProjects=(0,ms.map)(t,\"project_uuid\"),f.value?u.subscriptionReceiveType=[...j.value]:u.subscriptionReceiveType=[...h.subscriptionReceiveType],r.value=!0},showDeviceInformationSubscriptionEdit:function(){if(!a.value){var e;kr.Z.error({content:ml(\"web.personal_center.join_org_tip\",void 0)});return}o.value=pz.DeviceReportFeedback,u.isSubscriptionNewProjects=!1,u.subscriptionProjects=[],_.value?u.subscriptionReceiveType=[...j.value]:u.subscriptionReceiveType=[...g.subscriptionReceiveType],u.subscriptionStatus=g.subscriptionStatus,r.value=!0},showAddPrivateInfoSubscriptionEdit:function(){if(!a.value){var e;kr.Z.error({content:ml(\"web.personal_center.join_org_tip\",void 0)});return}o.value=pz.PrivateAlert,u.isSubscriptionNewProjects=!1,u.subscriptionProjects=[],w.value?u.subscriptionReceiveType=[...j.value]:u.subscriptionReceiveType=function(e){let a=[];return e.includes(pw.Email)&&a.push(pb.Email),a}(b[pz.PrivateAlert].subscriptionReceiveType),u.subscriptionStatus=!!b[pz.PrivateAlert].subscriptionId,r.value=!0},subscriptionModalVisible:r,subscription:u,emergencyEventSubscription:p,showAddEmergencyEventSubscriptionButton:m,taskFailureSubscription:h,showAddTaskFailureSubscriptionButton:f,deviceReportFeedback:g,showAddDeviceReportFeedbackButton:_,showAddPrivateInfoSubscriptionButton:w,subscriptionType:o,SubscriptionTypeEnum:pz,projectRelated:d,closeModal:function(){r.value=!1},organizationInfo:y,organizationRoleArr:Rk,getRole:function(e){let a=kt()?Rv:Rk;for(let t=0;t<a.length;t++)if(a[t].value===e){var r=void 0;return ml(a[t].label,void 0)}},deleteModalVisible:n,closeDeleteModalVisible:function(){n.value=!1},showDeleteModal:function(e){n.value=!0,o.value=e},onDeleteModalOk:E,changeSubscriptionModalVisible:function(e){r.value=e},updateOrganizationsInfo:function(){A()},UserContactInfoType:pb,getProjectNameList:function(e){return(0,ms.map)(e,\"project_name\").join(\"ï¼›\")},DEFAULT_PLACEHOLDER:\"--\",organizationId:a,useSubscriptionFeature:F,onWebsiteSubscriptChange:function(a,r){if(a.target.checked)P(r,{[pw.Website]:!0});else{var t,n,i;e.$confirm({class:\"no-icon warning org-message-subscription-modal\",centered:!0,content:ml(\"user_center.message_subscription.popup_open_warning.content\",void 0),okText:ml(\"common.action.confirm\",void 0),cancelText:ml(\"common.action.cancel\",void 0),onOk:()=>{P(r,{[pw.Website]:!1})}})}},useMessageReceiveType:c,customSubscriptionConfirm:L,messageCenterSubscriptionStatus:b,privateEmailCheckStatus:k,deleteSubscriptionTip:C,useFeature:ky,FeatureGateway:cm}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusIcon\"),s=(0,p$.up)(\"UranusTooltip\"),l=(0,p$.up)(\"UranusCheckbox\"),d=(0,p$.up)(\"UranusButton\"),c=(0,p$.up)(\"SubscriptionModal\"),u=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.iD)(\"div\",RV,[(0,p$._)(\"div\",RB,(0,p$.zw)(e.$t(\"web.personal_center.personal_org_info\")),1),(0,p$._)(\"div\",RK,[(0,p$._)(\"div\",RW,[(0,p$._)(\"div\",RZ,(0,p$.zw)(e.$t(\"web.personal_center.org_name\")),1),(0,p$._)(\"div\",R$,(0,p$.zw)(t.organizationId?t.organizationInfo.organizationName:t.DEFAULT_PLACEHOLDER),1)]),(0,p$._)(\"div\",RY,[(0,p$._)(\"div\",RQ,(0,p$.zw)(e.$t(\"web.personal_center.person_org_name\")),1),(0,p$._)(\"div\",RX,(0,p$.zw)(t.organizationId?t.organizationInfo.nickname:t.DEFAULT_PLACEHOLDER),1)]),(0,p$._)(\"div\",R0,[(0,p$._)(\"div\",R1,(0,p$.zw)(e.$t(\"web.personal_center.user_role\")),1),(0,p$._)(\"div\",R2,(0,p$.zw)(t.organizationId?t.getRole(t.organizationInfo.role):t.DEFAULT_PLACEHOLDER),1)])]),R3,(0,p$._)(\"div\",R4,(0,p$.zw)(e.$t(\"web.personal_center.message_subscription\")),1),(0,p$._)(\"div\",R6,(0,p$.zw)(e.$t(\"web.personal_center.message_subscription_tip_second\")),1),(0,p$._)(\"div\",R5,[(0,p$._)(\"div\",R8,[(0,p$._)(\"div\",R9,[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.airpost_event_subscription_second\"))+\" \",1),(0,p$.Wm)(s,{theme:\"light\",placement:\"bottomLeft\",\"arrow-point-at-center\":!0,content:e.$t(\"web.personal_center.airpost_event_subscription_tip_second\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",class:\"add-icon\",size:14})]),_:1},8,[\"content\"])]),(0,p$._)(\"div\",R7,[(0,p$.Wm)(l,{checked:t.messageCenterSubscriptionStatus[t.SubscriptionTypeEnum.AirportEmergency].checkbox,onChange:a[0]||(a[0]=e=>t.onWebsiteSubscriptChange(e,t.SubscriptionTypeEnum.AirportEmergency))},null,8,[\"checked\"]),(0,p$._)(\"span\",Ee,(0,p$.zw)(e.$t(\"user_center.message_subscription.internal_message.label\")),1)]),Ea,(0,p$._)(\"div\",Er,[t.showAddEmergencyEventSubscriptionButton?((0,p$.wg)(),(0,p$.j4)(d,{key:0,type:\"primary\",onClick:t.showDeviceSubscriptionEdit},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Et,[(0,p$.Wm)(o,{name:\"add\",class:\"add-icon\",size:14}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.personal_center.add_subscription_btn\")),1)])]),_:1},8,[\"onClick\"])):((0,p$.wg)(),(0,p$.iD)(\"div\",En,[(0,p$._)(\"div\",Ei,[(0,p$._)(\"div\",Eo,[(0,p$._)(\"span\",null,(0,p$.zw)(t.getProjectNameList(t.emergencyEventSubscription.subscriptionProjects)),1)]),(0,p$._)(\"div\",Es,[(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.emergencyEventSubscription.subscriptionReceiveType.indexOf(t.UserContactInfoType.Phone)>-1},null,8,[\"checked\"]),(0,p$._)(\"span\",El,(0,p$.zw)(e.$t(\"web.personal_center.message_info\")),1),(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.emergencyEventSubscription.subscriptionReceiveType.indexOf(t.UserContactInfoType.Email)>-1},null,8,[\"checked\"]),(0,p$._)(\"span\",Ed,(0,p$.zw)(e.$t(\"web.personal_center.email\")),1)])]),(0,p$._)(\"div\",Ec,[(0,p$.Wm)(o,{name:\"edit\",class:\"edit-icon\",size:14,onClick:t.showDeviceSubscriptionEdit},null,8,[\"onClick\"]),(0,p$.Wm)(o,{name:\"remove\",class:\"delete-icon\",size:14,onClick:a[1]||(a[1]=e=>t.showDeleteModal(t.SubscriptionTypeEnum.AirportEmergency))})])]))])]),(0,p$._)(\"div\",Eu,[(0,p$._)(\"div\",Ep,(0,p$.zw)(e.$t(\"web.personal_center.airport_task_fail_second\")),1),Em,(0,p$._)(\"div\",Eh,[t.showAddTaskFailureSubscriptionButton?((0,p$.wg)(),(0,p$.j4)(d,{key:0,type:\"primary\",onClick:t.showTaskSubscriptionEdit},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Ef,[(0,p$.Wm)(o,{name:\"add\",class:\"add-icon\",size:14}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.personal_center.add_subscription_btn\")),1)])]),_:1},8,[\"onClick\"])):((0,p$.wg)(),(0,p$.iD)(\"div\",Eg,[(0,p$._)(\"div\",E_,[(0,p$._)(\"div\",Eb,(0,p$.zw)(t.getProjectNameList(t.taskFailureSubscription.subscriptionProjects)),1),(0,p$._)(\"div\",Ek,[(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.taskFailureSubscription.subscriptionReceiveType.indexOf(t.UserContactInfoType.Phone)>-1},null,8,[\"checked\"]),(0,p$._)(\"span\",Ev,(0,p$.zw)(e.$t(\"web.personal_center.message_info\")),1),(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.taskFailureSubscription.subscriptionReceiveType.indexOf(t.UserContactInfoType.Email)>-1},null,8,[\"checked\"]),(0,p$._)(\"span\",Ez,(0,p$.zw)(e.$t(\"web.personal_center.email\")),1)])]),(0,p$._)(\"div\",Ew,[(0,p$.Wm)(o,{name:\"edit\",class:\"edit-icon\",size:14,onClick:t.showTaskSubscriptionEdit},null,8,[\"onClick\"]),(0,p$.Wm)(o,{name:\"remove\",class:\"delete-icon\",size:14,onClick:a[2]||(a[2]=e=>t.showDeleteModal(t.SubscriptionTypeEnum.TaskFailure))})])]))])]),t.useSubscriptionFeature&&t.showDeviceReportFeedbackPart?((0,p$.wg)(),(0,p$.iD)(\"div\",Ey,[(0,p$._)(\"div\",ES,[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.personal_center.device_information_notification\"))+\" \",1),(0,p$.Wm)(s,{theme:\"light\",placement:\"bottomLeft\",\"arrow-point-at-center\":!0,content:e.$t(\"web.personal_center.device_information_notification_tip\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",class:\"add-icon\",size:14})]),_:1},8,[\"content\"])]),Ej,(0,p$._)(\"div\",ED,[t.showAddDeviceReportFeedbackButton?((0,p$.wg)(),(0,p$.j4)(d,{key:0,type:\"primary\",onClick:t.showDeviceInformationSubscriptionEdit},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",EI,[(0,p$.Wm)(o,{name:\"add\",class:\"add-icon\",size:14}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.personal_center.add_subscription_btn\")),1)])]),_:1},8,[\"onClick\"])):((0,p$.wg)(),(0,p$.iD)(\"div\",EA,[(0,p$._)(\"div\",EC,[(0,p$._)(\"div\",Ex,[(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.deviceReportFeedback.subscriptionReceiveType.indexOf(t.UserContactInfoType.Phone)>-1},null,8,[\"checked\"]),(0,p$._)(\"span\",ER,(0,p$.zw)(e.$t(\"web.personal_center.message_info\")),1),(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.deviceReportFeedback.subscriptionReceiveType.indexOf(t.UserContactInfoType.Email)>-1},null,8,[\"checked\"]),(0,p$._)(\"span\",EE,(0,p$.zw)(e.$t(\"web.personal_center.email\")),1)])]),(0,p$._)(\"div\",EF,[(0,p$.Wm)(o,{name:\"edit\",class:\"edit-icon\",size:14,onClick:t.showDeviceInformationSubscriptionEdit},null,8,[\"onClick\"]),(0,p$.Wm)(o,{name:\"remove\",class:\"delete-icon\",size:14,onClick:a[3]||(a[3]=e=>t.showDeleteModal(t.SubscriptionTypeEnum.DeviceReportFeedback))})])]))])])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",ET,[(0,p$._)(\"div\",EP,[(0,p$.Uk)((0,p$.zw)(e.$t(\"user_center.message_subscription.organize_package.title\"))+\" \",1),(0,p$.Wm)(s,{theme:\"light\",placement:\"top\",\"arrow-point-at-center\":!0,content:e.$t(\"user_center.message_subscription.organize_package.toast\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",class:\"add-icon\",size:14})]),_:1},8,[\"content\"])]),(0,p$._)(\"div\",EM,[(0,p$.Wm)(l,{checked:t.messageCenterSubscriptionStatus[t.SubscriptionTypeEnum.OrganizationInfo].checkbox,onChange:a[4]||(a[4]=e=>t.onWebsiteSubscriptChange(e,t.SubscriptionTypeEnum.OrganizationInfo))},null,8,[\"checked\"]),(0,p$._)(\"span\",EL,(0,p$.zw)(e.$t(\"user_center.message_subscription.internal_message.label\")),1)])]),t.useFeature(t.FeatureGateway.PRIVATIZATION_LICENSE)?((0,p$.wg)(),(0,p$.iD)(\"div\",EJ,[(0,p$._)(\"div\",EN,[(0,p$.Uk)((0,p$.zw)(e.$t(\"user_center.message_subscription.private_operation.title\"))+\" \",1),(0,p$.Wm)(s,{theme:\"light\",placement:\"top\",\"arrow-point-at-center\":!0,content:e.$t(\"user_center.message_subscription.private_operation.toast\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",class:\"add-icon\",size:14})]),_:1},8,[\"content\"])]),(0,p$._)(\"div\",Eq,[(0,p$.Wm)(l,{checked:t.messageCenterSubscriptionStatus[t.SubscriptionTypeEnum.PrivateAlert].checkbox,onChange:a[5]||(a[5]=e=>t.onWebsiteSubscriptChange(e,t.SubscriptionTypeEnum.PrivateAlert))},null,8,[\"checked\"]),(0,p$._)(\"span\",EO,(0,p$.zw)(e.$t(\"user_center.message_subscription.internal_message.label\")),1)]),EH,(0,p$._)(\"div\",EG,[t.showAddPrivateInfoSubscriptionButton?((0,p$.wg)(),(0,p$.j4)(d,{key:0,type:\"primary\",onClick:t.showAddPrivateInfoSubscriptionEdit},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",EU,[(0,p$.Wm)(o,{name:\"add\",class:\"add-icon\",size:14}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.personal_center.add_subscription_btn\")),1)])]),_:1},8,[\"onClick\"])):((0,p$.wg)(),(0,p$.iD)(\"div\",EV,[(0,p$._)(\"div\",EB,[(0,p$._)(\"div\",EK,[(0,p$.Wm)(l,{indeterminate:!1,disabled:\"\",checked:t.privateEmailCheckStatus},null,8,[\"checked\"]),(0,p$._)(\"span\",EW,(0,p$.zw)(e.$t(\"web.personal_center.email\")),1)])]),(0,p$._)(\"div\",EZ,[(0,p$.Wm)(o,{name:\"edit\",class:\"edit-icon\",size:14,onClick:t.showAddPrivateInfoSubscriptionEdit},null,8,[\"onClick\"]),(0,p$.Wm)(o,{name:\"remove\",class:\"delete-icon\",size:14,onClick:a[6]||(a[6]=e=>t.showDeleteModal(t.SubscriptionTypeEnum.PrivateAlert))})])]))])])):(0,p$.kq)(\"\",!0)]),(0,p$.Wm)(c,{\"subscription-modal-visible\":t.subscriptionModalVisible,subscription:t.subscription,\"subscription-type\":t.subscriptionType,\"project-related\":t.projectRelated,\"use-message-receive-type\":t.useMessageReceiveType,\"custom-confirm\":t.customSubscriptionConfirm,onUpdateOrganizationsInfo:t.updateOrganizationsInfo,onCloseModal:t.closeModal,onChangeModalVisible:t.changeSubscriptionModalVisible},null,8,[\"subscription-modal-visible\",\"subscription\",\"subscription-type\",\"project-related\",\"use-message-receive-type\",\"custom-confirm\",\"onUpdateOrganizationsInfo\",\"onCloseModal\",\"onChangeModalVisible\"]),(0,p$.Wm)(u,{title:e.$t(\"web.personal_center.unsubscribe\"),visible:t.deleteModalVisible,danger:\"\",size:\"tiny\",onOk:t.onDeleteModalOk,onCancel:t.closeDeleteModalVisible},{default:(0,p$.w5)(()=>[(0,p$._)(\"span\",null,(0,p$.zw)(t.deleteSubscriptionTip),1)]),_:1},8,[\"title\",\"visible\",\"onOk\",\"onCancel\"])])}],[\"__scopeId\",\"data-v-e9f8ce1c\"]]),Fe={class:\"preference-area\"},Fa={class:\"preference-middle-wrapper\"},Fr=[\"CY\",\"FR\",\"LT\",\"PL\",\"PT\",\"RO\",\"FI\",\"EE\",\"LV\",\"IE\",\"DE\",\"IT\",\"AT\",\"HU\",\"CZ\",\"SK\",\"SI\",\"GR\",\"HR\",\"BG\",\"MT\",\"NL\",\"BE\",\"LU\",\"DK\",\"SE\",\"ES\",\"GB\",\"US\"],Ft=(0,mF.default)({name:\"Preference\",components:{UranusIcon:mL},setup(){let e=p5(),a=(0,p$.Fl)(()=>!!e.ip_country&&Fr.includes(e.ip_country));return{onClickPrivacyLink:function(){window.open(\"https://www.dji.com/policy?site=brandsite&from=footer\",\"_blank\")},onClickCookieLink:function(){window.open(\"https://www.dji.com/policy?site=brandsite&from=footer#12\",\"_blank\")},onClickTermsUseLink:function(){window.open(\"https://www.dji.com/terms?site=brandsite&from=footer\",\"_blank\")},onClickBusinessLink:function(){window.open(\"https://www.dji.com/terms?site=brandsite&from=footer\",\"_blank\")},onActivePreference:function(){window.$scio&&window.$scio.open(\"modal\")},jumpPrivatePage:async function e(){window.open(\"/agree/private\",\"_blank\")},ifShowPreference:a}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusIcon\");return(0,p$.wg)(),(0,p$.iD)(\"div\",Fe,[(0,p$._)(\"div\",Fa,[(0,p$.Wm)(o,{style:{\"margin-right\":\"26px\"},name:\"dji-icon\",size:24}),(0,p$._)(\"span\",{class:\"preference-item\",onClick:a[0]||(a[0]=(...e)=>t.jumpPrivatePage&&t.jumpPrivatePage(...e))},(0,p$.zw)(e.$t(\"web.lead.privacy_policy\")),1),t.ifShowPreference?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[(0,p$._)(\"span\",{class:\"preference-item\",onClick:a[1]||(a[1]=(...e)=>t.onClickCookieLink&&t.onClickCookieLink(...e))},\"Use of Cookies\"),(0,p$._)(\"span\",{class:\"preference-item\",onClick:a[2]||(a[2]=(...e)=>t.onClickTermsUseLink&&t.onClickTermsUseLink(...e))},\"Terms of Use\"),(0,p$._)(\"span\",{class:\"preference-item\",onClick:a[3]||(a[3]=(...e)=>t.onClickBusinessLink&&t.onClickBusinessLink(...e))},\"Business Information\"),(0,p$._)(\"span\",{class:\"preference-item\",onClick:a[4]||(a[4]=(...e)=>t.onActivePreference&&t.onActivePreference(...e))},\"Cookie Preferences\")],64)):(0,p$.kq)(\"\",!0)])])}],[\"__scopeId\",\"data-v-c2119386\"]]),Fn={class:\"user-preference\"},Fi={class:\"user-preference-text\"},Fo={class:\"form-item\"},Fs={class:\"form-item-label\"},Fl={class:\"form-item\",style:{\"margin-top\":\"16px\"}},Fd={class:\"form-item-label\",style:{display:\"flex\",\"align-items\":\"center\"}},Fc=(0,p$.aZ)({components:{ASwitch:gr.Z,UranusTooltip:hw,Ellipsis:yn},setup(){let{t:e}=(0,p7.QT)(),a=p5(),r=(0,p$.iH)(!1),n=t;async function i(){let r=(0,ms.cloneDeep)(a.user_preference_information);o.keyboard!==r.keyboard_layout_selection&&(r.keyboard_layout_selection=o.keyboard),o.soundSwitch!==r.is_voice_on&&(r.is_voice_on=o.soundSwitch,window.$reportStatData?.({type:cg.Fh2SystemUserCustomerAudioSetting,eventValue:{status:o.soundSwitch?1:0}})),await kX(r),kr.Z.success(e(\"common.action.edit_success\")),a.setUserPreference(r)}let o=(0,p$.qj)({keyboard:oT.QWERTY,soundSwitch:!0});return{openPerferenceModal:function(){(function(){o.keyboard=a.user_preference_information.keyboard_layout_selection,o.soundSwitch=a.user_preference_information.is_voice_on})(),r.value=!0},modalVisible:r,onConfirm:i,preferenceForm:o,openUserManual:function(){n.$pager.main.next({from:\"user-center-app\",label:\"click-to-user-manual\",data:{from:\"sounds_config\",action:\"usermenu\",source:1,canJump:!0}})},KeyboardType:oT}}}),Fu=(0,mF.default)(Fc,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-icon\"),s=(0,p$.up)(\"uranus-button\"),l=(0,p$.up)(\"a-select-option\"),d=(0,p$.up)(\"uranus-select\"),c=(0,p$.up)(\"Ellipsis\"),u=(0,p$.up)(\"uranusIcon\"),p=(0,p$.up)(\"i18n-t\"),m=(0,p$.up)(\"UranusTooltip\"),h=(0,p$.up)(\"ASwitch\"),f=(0,p$.up)(\"uranus-modal\"),g=(0,p$.Q2)(\"t\");return(0,p$.wg)(),(0,p$.iD)(p$.HY,null,[(0,p$._)(\"div\",Fn,[(0,p$.Wm)(s,{plain:\"\",theme:\"light\",onClick:a[0]||(a[0]=a=>e.openPerferenceModal())},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"setting\"}),(0,p$.wy)((0,p$._)(\"span\",Fi,null,512),[[g,\"web.my_profile.preference_settings\"]])]),_:1})]),(0,p$.Wm)(f,{visible:e.modalVisible,\"onUpdate:visible\":a[3]||(a[3]=a=>e.modalVisible=a),class:\"email-modal subscription-email-modal user-preference-modal\",\"is-height-auto-fit\":!0,size:\"tiny\",title:e.$t(\"web.my_profile.preference_settings\"),\"cancel-text\":e.$t(\"common.action.cancel\"),\"ok-text\":e.$t(\"common.action.save\"),onOk:e.onConfirm},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Fo,[(0,p$.wy)((0,p$._)(\"div\",Fs,null,512),[[g,\"web.my_profile.keyboard_select_settings\"]]),(0,p$.Wm)(d,{value:e.preferenceForm.keyboard,\"onUpdate:value\":a[1]||(a[1]=a=>e.preferenceForm.keyboard=a),width:\"300\",theme:\"light\"},{default:(0,p$.w5)(()=>[(0,p$.Wm)(l,{value:e.KeyboardType.QWERTY},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.keyboard_select_qwerty\")),1)]),_:1},8,[\"value\"]),(0,p$.Wm)(l,{value:e.KeyboardType.QWERTZ},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.keyboard_select_qwertz\")),1)]),_:1},8,[\"value\"]),(0,p$.Wm)(l,{value:e.KeyboardType.AZERTY},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.keyboard_select_azerty\")),1)]),_:1},8,[\"value\"])]),_:1},8,[\"value\"])]),(0,p$._)(\"div\",Fl,[(0,p$._)(\"div\",Fd,[(0,p$.Wm)(c,{style:{\"text-align\":\"left\"}},{default:(0,p$.w5)(()=>[(0,p$._)(\"span\",null,(0,p$.zw)(e.$t(\"web.my_profile.voice_config_title\")),1)]),_:1}),(0,p$.Wm)(m,{placement:\"right\",theme:\"light\"},{title:(0,p$.w5)(()=>[(0,p$._)(\"span\",null,[(0,p$.Wm)(p,{keypath:\"web.my_profile.voice_config_tips\",tag:\"span\"},{url:(0,p$.w5)(()=>[(0,p$.Wm)(s,{plain:\"\",type:\"primary\",class:\"button-content\",onClick:e.openUserManual},{default:(0,p$.w5)(()=>[(0,p$.Wm)(u,{name:\"manual\",inline:\"\",size:18}),(0,p$.Uk)(\" \"+(0,p$.zw)(e.$t(\"web.my_profile.voice_config_tips_slot\")),1)]),_:1},8,[\"onClick\"])]),_:1})])]),default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"info\",style:{\"margin-left\":\"4px\"},size:16})]),_:1})]),(0,p$._)(\"div\",null,[(0,p$.Wm)(h,{checked:e.preferenceForm.soundSwitch,\"onUpdate:checked\":a[2]||(a[2]=a=>e.preferenceForm.soundSwitch=a)},null,8,[\"checked\"])])])]),_:1},8,[\"visible\",\"title\",\"cancel-text\",\"ok-text\",\"onOk\"])],64)}],[\"__scopeId\",\"data-v-15c3c8fe\"]]),Fp=(0,mF.default)({name:\"HomePage\",components:{UserPreference:Fu,BaseInfo:RG,OrganizationInfo:E7,Preference:Ft}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UserPreference\"),s=(0,p$.up)(\"BaseInfo\"),l=(0,p$.up)(\"OrganizationInfo\"),d=(0,p$.up)(\"Preference\");return(0,p$.wg)(),(0,p$.iD)(\"div\",xQ,[(0,p$._)(\"div\",xX,[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.my_profile.personal_center\"))+\" \",1),(0,p$.Wm)(o)]),(0,p$._)(\"div\",x0,[(0,p$._)(\"div\",x1,[(0,p$.Wm)(s)]),(0,p$._)(\"div\",x2,[(0,p$.Wm)(l)])]),(0,p$.Wm)(d)])}],[\"__scopeId\",\"data-v-4493e643\"]]),Fm={class:\"redeem-wrapper uranus-scrollbar\"},Fh={class:\"back-text\"},Ff={class:\"redeem-content\"},Fg={class:\"title\"},F_={class:\"content\"},Fb={class:\"tips\"},Fk={key:0,class:\"tips error-tips\"},Fv={class:\"redeem-org\"},Fz={class:\"label\"},Fw={class:\"redeem-org\"},Fy={class:\"label\"},FS={class:\"redeem-code\"},Fj={class:\"label\"},FD={style:{display:\"flex\",\"align-items\":\"center\"}},FI={class:\"redeem-success\"},FA={class:\"success-org\"},FC={class:\"success-label\"},Fx={class:\"success-value\"},FR={class:\"success-prod success-org\"},FE={class:\"success-label\",style:{\"flex-shrink\":\"0\"}},FF={style:{display:\"flex\",\"align-items\":\"end\",\"flex-direction\":\"column\"}},FT={class:\"success-bottom-action\"},FP={class:\"redeem-confirm-tip\"},FM={class:\"redeem-confirm-unit-middle-wrapper\"},FL={class:\"redeem-confirm-unit\"},FJ={class:\"redeem-confirm-title\"},FN={class:\"redeem-confirm-content\"},Fq={class:\"redeem-confirm-unit\"},FO={class:\"redeem-confirm-title\",style:{\"flex-shrink\":\"0\",\"margin-right\":\"16px\"}},FH={class:\"redeem-confirm-content\",style:{display:\"flex\",\"align-items\":\"end\",\"flex-direction\":\"column\"}},FG={key:0,class:\"redeem-confirm-unit\",style:{\"flex-direction\":\"column\"}};let FU=(l=()=>(0,p$._)(\"div\",{style:{width:\"4px\",height:\"4px\",\"border-radius\":\"2px\",background:\"#FF9900\",\"margin-right\":\"16px\",\"margin-left\":\"4px\",\"flex-shrink\":\"0\",\"align-self\":\"flex-start\",\"margin-top\":\"8px\"}},null,-1),(0,p$.dD)(\"data-v-4677deec\"),l=l(),(0,p$.Cn)(),l),FV={style:{color:\"#FF9900\"}},FB={style:{color:\"#fff\"}},FK=(0,p$.aZ)({name:\"RedeemConfirmModal\",components:{UranusButton:m0,UranusIcon:mT,UranusModal:fX},props:{redeemOrgName:{type:String,required:!0},redeemRes:{type:Object,required:!0}},emits:[\"close\",\"success\"],setup(e,{emit:a}){let{t:r}=(0,p7.QT)(),t=(0,p$.iH)(30),n=null,i=()=>{n=setInterval(()=>{t.value-=1,t.value<=0&&clearInterval(n)},1e3)},o=(0,p$.Fl)(()=>{let a={};for(let r of e.redeemRes.list){let e=r.package_type;e in a?a[e]++:a[e]=1}return a}),s=(0,p$.Fl)(()=>{let{frozen_package_types:a}=e.redeemRes.check_result,t=!a?.length||a.every(e=>e===co.Trial||e===co.GiftFreeVersion),n=[co.Enterprise1Year3EquipMaster,co.Enterprise3Year3EquipMaster,co.Enterprise3Year1EquipMaster,co.Enterprise1Year1EquipMaster],i=[co.EnterpriseEquipExpansion],o=e.redeemRes.check_result.activate_package_types.find(e=>n.includes(e)),s=e.redeemRes.check_result.activate_package_types.find(e=>i.includes(e)),l=e.redeemRes.check_result.frozen_package_types.filter(e=>e!==co.GiftFreeVersion&&e!==co.Trial).map(e=>r(kk[e]||\"--\")).join(\",\"),d=e.redeemRes.check_result.activate_package_types.map(e=>r(kk[e]||\"--\")).join(\",\"),c=e.redeemRes.check_result.online_device_limit,u=c-e.redeemRes.check_result.expansion_inc_online_limit;if(!s&&!o)return[];if(!s&&o)return t?[]:[r(\"fh2_paid_changing_the_number_of_activation_packages_tips1\",{name1:l,name2:d}),r(\"fh2_paid_changing_the_number_of_activation_packages_tips2\")];if(s&&!o)return[r(\"fh2_paid_changing_the_number_of_activation_packages_tips\",{name:d,x:u,y:c}),r(\"fh2_paid_changing_enterprise_plan_device_expansion_notice\")];if(s&&o)return t?[r(\"fh2_paid_changing_the_number_of_activation_packages_tips\",{name:d,x:u,y:c})]:[r(\"fh2_paid_changing_the_number_of_activation_packages_tips1\",{name1:l,name2:d}),r(\"fh2_paid_changing_the_number_of_activation_packages_tips2\"),r(\"fh2_paid_changing_the_number_of_activation_packages_tips3\",{x:u,y:c})];return[]});return(0,p$.bv)(()=>{i()}),(0,p$.SK)(()=>{n&&clearInterval(n)}),{handleOk:function(){a(\"success\")},handleClose:function(){a(\"close\")},redeemList:o,getKey:function(e){let a=Number(e);return!isNaN(a)&&a in co&&kk[a]?r(kk[a]):\"--\"},activatedName:s,remainingTime:t}}}),FW=(0,mF.default)(FK,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusButton\"),s=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.j4)(s,{class:\"redeem-confirm-modal\",visible:!0,title:e.$t(\"web.projects.pro_redeem_ensure\"),size:\"tiny\",centered:!0,\"is-ok-auto-close\":!1,\"is-height-auto-fit\":!0},{footer:(0,p$.w5)(()=>[(0,p$.Wm)(o,{outlined:!0,theme:\"light\",onClick:e.handleClose},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.cancel\")),1)]),_:1},8,[\"onClick\"]),(0,p$.Wm)(o,{type:\"primary\",disabled:0!==e.remainingTime,loading:0!==e.remainingTime,onClick:e.handleOk},{default:(0,p$.w5)(()=>[(0,p$._)(\"span\",FB,(0,p$.zw)(0!==e.remainingTime&&e.remainingTime?e.remainingTime:e.$t(\"common.action.confirm\")),1)]),_:1},8,[\"disabled\",\"loading\",\"onClick\"])]),default:(0,p$.w5)(()=>[(0,p$._)(\"div\",FP,(0,p$.zw)(e.$t(\"web.paid.service.make_sure_which_org\")),1),(0,p$._)(\"div\",FM,[(0,p$._)(\"div\",FL,[(0,p$._)(\"div\",FJ,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_org_name\")),1),(0,p$._)(\"div\",FN,(0,p$.zw)(e.redeemOrgName),1)]),(0,p$._)(\"div\",Fq,[(0,p$._)(\"div\",FO,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_product\")),1),(0,p$._)(\"div\",FH,[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.redeemList,(a,r)=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:r},(0,p$.zw)(e.getKey(r))+\" * \"+(0,p$.zw)(a),1))),128))])]),e.activatedName?((0,p$.wg)(),(0,p$.iD)(\"div\",FG,[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.activatedName,e=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:e,style:{display:\"flex\",\"align-items\":\"center\"}},[FU,(0,p$._)(\"span\",FV,(0,p$.zw)(e),1)]))),128))])):(0,p$.kq)(\"\",!0)])]),_:1},8,[\"title\"])}],[\"__scopeId\",\"data-v-4677deec\"]]),FZ=(0,p$.aZ)({name:\"Redeem\",components:{UranusIcon:mL,UranusSelect:fA,UranusCustomInput:fh,UranusButton:m0,UranusTooltip:hw,RedeemConfirmModal:FW},setup(){let e=(0,p9.tv)(),a=(0,p9.yj)(),{t:r}=(0,p7.QT)(),t=(0,p$.iH)(a?.query?.orgId||\"\"),n=(0,p$.f3)(p0),i=(0,p$.iH)(\"\"),o=(0,p$.iH)(!1),s=(0,p$.iH)(\"\"),l=(0,p$.iH)([{code:\"\",loading:!1,name:\"\",error:\"\",uid:hI(),inputFun:(0,p$.Xl)(_())}]),d=(0,p$.iH)(\"\"),c=(0,p$.iH)({}),u=(0,p$.Fl)(()=>p$.SU(n)?.list||[]),p=(0,p$.Fl)(()=>u.value?.find(e=>e.uuid===p$.SU(t))?.organization_id===s.value),m=(0,p$.Fl)(()=>{let e=l.value.find(e=>e?.error!==\"\"),a=l.value.find(e=>e?.code!==\"\");return l.value.find(e=>e?.loading===!0)||!a||e||!(0,p$.SU)(t)||!s.value||!p.value}),h=(0,p$.Fl)(()=>u.value?.find(e=>e.uuid===p$.SU(t))?.name||\"\"),f=(0,p$.Fl)(()=>{let e={};if(!c.value)return[];for(let a of c.value?.list){let r=a.package_type;r in e?e[r]++:e[r]=1}return e});function g(e,a){let n=(0,p$.SU)(t),i=l.value.findIndex(e=>e.uid===a);if(!e||!n){l.value[i].error=\"\",l.value[i].name=\"\",l.value[i].loading=!1;return}l.value[i].loading=!0,y$(n,e,{ignoreGlobalErrorHandler:!0}).then(e=>{if(0===e.code){let a=r(kk[e.data.package_type]||\"--\");console.log(111,e.data.package_type,kk[e.data.package_type],r(kk[e.data.package_type]||\"--\")),a&&(l.value[i].name=a),l.value[i].error=\"\",l.value[i].loading=!1}}).catch(e=>{l.value[i].loading=!1,l.value[i].error=r(bz(e.code)),l.value[i].name=\"\"})}function _(){return(0,ms.debounce)(g,300)}let b=(0,ms.debounce)(e=>{let a=(0,p$.SU)(t);if(!!e&&!!a)s.value=e},300);async function k(){let e=(0,p$.SU)(t);if(!!e)0===(await yZ({activation_codes:Array.from(new Set(l.value?.map(e=>e?.code)?.filter(e=>null!=e&&\"\"!==e)))??[],orgId:e})).code&&(o.value=!0)}let v=(0,p$.iH)(!1);function z(e){if(\"boolean\"==typeof e){v.value=e;return}v.value=!v.value}async function w(){let e=(0,p$.SU)(t);if(e){if(c.value=(await yW({activation_codes:Array.from(new Set(l.value?.map(e=>e?.code)?.filter(e=>null!=e&&\"\"!==e)))??[],orgId:e})).data,c.value.check_result.allow_activate){z(!0);return}0!==c.value.check_result.error_code?d.value=r(`${bz(c.value.check_result.error_code)}`,{combo:c.value.check_result.allow_enterprise_expansion_min_num}):c.value.list.forEach(e=>{l.value.forEach(a=>{if(a.code===e.activation_code&&0!==e.error_info.error_code){let t=e.error_info.conflict_types?.map(e=>r(kk[e]||\"--\")).join(\",\");a.error=r(`${bz(e.error_info.error_code)}`,{combo:229041===e.error_info.error_code?bL(1e3*e.created_at):t,combo1:bL(1e3*e.activate_expire_at)})}})})}}let y=(0,ms.debounce)(w,500);async function S(){await k(),z(!1)}let j=(0,ms.debounce)(S,500);return{onBack:function(){e.push({name:\"my-organization\"})},onClickLink:function(){window.open(kv,\"_blank\")},onRedeemContinue:function(){o.value=!1,i.value=\"\",l.value=[{code:\"\",loading:!1,name:\"\",error:\"\",uid:hI(),inputFun:(0,p$.Xl)(_())}],s.value=\"\",d.value=\"\"},activeCode:i,antPrefix:p6,disabled:m,organizationId:t,orgList:u,isShowRedeemConfirm:v,redeemOrgName:h,toggleRedeemConfirmFunc:z,onRedeemConfirmSuccess:S,activeOrgIDInfo:s,isMatch:p,onCheckOrgID:b,activeCodeMap:l,addActiveCode:function(){if(l.value.forEach(e=>{!e.loading&&\"\"!==e.error&&(e.error=\"\")}),l.value.length>=25){kr.Z.warning(r(\"fh2_paid_add_activation_code_100_limit\",{number:25}));return}l.value.push({code:\"\",loading:!1,name:\"\",error:\"\",uid:hI(),inputFun:(0,p$.Xl)(_())})},inputHandle:function(e,a){let r=l.value.findIndex(e=>e.uid===a);l.value[r].loading=!0,l.value[r].inputFun(e,a)},isRedeemSuccess:o,checkoutRedeemCodeList:w,checkActiveRedeemRes:d,deleteActiveCode:function(e){l.value=l.value.filter(a=>a.uid!==e)},checkResultRedeem:c,redeemList:f,getKey:function(e){let a=Number(e);return!isNaN(a)&&a in co&&kk[a]?r(kk[a]):\"--\"},checkoutRedeemCodeListDebounce:y,onRedeemConfirmSuccessDebounce:j}}}),F$=(0,mF.default)(FZ,[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"UranusIcon\"),s=(0,p$.up)(\"UranusTooltip\"),l=(0,p$.up)(\"ASelectOption\"),d=(0,p$.up)(\"UranusSelect\"),c=(0,p$.up)(\"UranusCustomInput\"),u=(0,p$.up)(\"UranusButton\"),p=(0,p$.up)(\"RedeemConfirmModal\");return(0,p$.wg)(),(0,p$.iD)(p$.HY,null,[(0,p$._)(\"div\",Fm,[(0,p$._)(\"div\",{class:\"redeem-header\",onClick:a[0]||(a[0]=(...a)=>e.onBack&&e.onBack(...a))},[(0,p$.Wm)(o,{class:\"back-icon\",name:\"back\",color:\"#232526\",size:24}),(0,p$._)(\"span\",Fh,(0,p$.zw)(e.$t(\"web.paid.service.back_org_list\")),1)]),(0,p$._)(\"div\",Ff,[e.isRedeemSuccess?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[(0,p$.Wm)(o,{name:\"success\",size:64,color:\"#28D445\"}),(0,p$._)(\"div\",FI,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_success\")),1),(0,p$._)(\"div\",FA,[(0,p$._)(\"span\",FC,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_org_name\")),1),(0,p$._)(\"span\",Fx,(0,p$.zw)(e.redeemOrgName),1)]),(0,p$._)(\"div\",FR,[(0,p$._)(\"span\",FE,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_product\")),1),(0,p$._)(\"div\",FF,[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.redeemList,(a,r)=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:r},(0,p$.zw)(e.getKey(r))+\" * \"+(0,p$.zw)(a),1))),128))])]),(0,p$._)(\"div\",FT,[(0,p$._)(\"a\",{class:\"redeem-purchase-link\",onClick:a[5]||(a[5]=(...a)=>e.onClickLink&&e.onClickLink(...a))},(0,p$.zw)(e.$t(\"web.projects.pro_redeem_purchase\")),1),(0,p$._)(\"a\",{onClick:a[6]||(a[6]=(...a)=>e.onRedeemContinue&&e.onRedeemContinue(...a))},(0,p$.zw)(e.$t(\"web.projects.pro_redeem_more\")),1)])],64)):((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[(0,p$._)(\"div\",Fg,(0,p$.zw)(e.$t(\"web.projects.pro_redeem\")),1),(0,p$._)(\"div\",F_,[(0,p$._)(\"div\",Fb,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_info\")),1),e.checkActiveRedeemRes?((0,p$.wg)(),(0,p$.iD)(\"div\",Fk,[(0,p$.Wm)(o,{name:\"close-circle-fill\",color:\"#E70102\",style:{\"margin-right\":\"16px\",\"margin-top\":\"2px\"}}),(0,p$._)(\"div\",null,(0,p$.zw)(e.checkActiveRedeemRes),1)])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",Fv,[(0,p$._)(\"div\",Fz,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_org_name\")),1),(0,p$.Wm)(d,{value:e.organizationId,\"onUpdate:value\":a[1]||(a[1]=a=>e.organizationId=a),size:\"large\",style:{width:\"336px\",height:\"32px\"},\"prefix-cls\":e.antPrefix},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.orgList,e=>((0,p$.wg)(),(0,p$.j4)(l,{key:e.uuid,value:e.uuid,label:e.name},{default:(0,p$.w5)(()=>[(0,p$.Wm)(s,{style:{\"vertical-align\":\"middle\"},placement:\"rightBottom\",content:e.name},null,8,[\"content\"])]),_:2},1032,[\"value\",\"label\"]))),128))]),_:1},8,[\"value\",\"prefix-cls\"])]),(0,p$._)(\"div\",Fw,[(0,p$._)(\"div\",Fy,(0,p$.zw)(e.$t(\"web.decices.org_id\")),1),(0,p$.Wm)(c,{value:e.activeOrgIDInfo,\"onUpdate:value\":a[2]||(a[2]=a=>e.activeOrgIDInfo=a),style:{\"min-width\":\"336px\",height:\"32px\",\"padding-right\":\"8px\"},error:!!e.activeOrgIDInfo&&!e.isMatch,\"error-info\":e.$t(\"fh2_paid_organization_id_and_project_name_do_not_match\"),onInput:e.onCheckOrgID},null,8,[\"value\",\"error\",\"error-info\",\"onInput\"])]),(0,p$._)(\"div\",FS,[(0,p$._)(\"div\",Fj,[(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.projects.pro_redeem_code\")),1),(0,p$._)(\"div\",{style:{color:\"#2D8CF0\",cursor:\"pointer\",\"user-select\":\"none\"},onClick:a[3]||(a[3]=(...a)=>e.addActiveCode&&e.addActiveCode(...a))},(0,p$.zw)(e.$t(\"fh2_paid_add_activation_code\")),1)]),((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(e.activeCodeMap,a=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:a.uid,class:\"active-code-item\"},[(0,p$._)(\"div\",FD,[(0,p$.Wm)(c,{value:a.code,\"onUpdate:value\":e=>a.code=e,style:{\"min-width\":\"336px\",height:\"32px\"},maxlength:16,onInput:r=>e.inputHandle(r,a.uid)},null,8,[\"value\",\"onUpdate:value\",\"onInput\"]),e.activeCodeMap.length>1?((0,p$.wg)(),(0,p$.j4)(o,{key:0,name:\"remove\",color:\"#FF453A\",style:{\"margin-left\":\"8px\"},onClick:r=>e.deleteActiveCode(a.uid)},null,8,[\"onClick\"])):(0,p$.kq)(\"\",!0)]),(0,p$._)(\"div\",null,[a.loading?((0,p$.wg)(),(0,p$.j4)(o,{key:0,name:\"loading\",color:\"#2d8cf0\"})):((0,p$.wg)(),(0,p$.iD)(\"div\",{key:1,class:(0,p$.C_)([\"redeem-name\",[a.error?\"error-redeem-name\":\"\"]])},(0,p$.zw)(a.error?a.error:a.name),3))])]))),128))]),(0,p$.Wm)(u,{class:\"redeem-btn\",type:\"primary\",disabled:!!e.disabled,onClick:e.checkoutRedeemCodeListDebounce},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.projects.pro_redeem_ensure\")),1)]),_:1},8,[\"disabled\",\"onClick\"])]),(0,p$._)(\"a\",{onClick:a[4]||(a[4]=(...a)=>e.onClickLink&&e.onClickLink(...a))},(0,p$.zw)(e.$t(\"web.projects.pro_redeem_purchase\")),1)],64))])]),e.isShowRedeemConfirm?((0,p$.wg)(),(0,p$.j4)(p,{key:0,\"redeem-org-name\":e.redeemOrgName,\"redeem-res\":e.checkResultRedeem,onSuccess:e.onRedeemConfirmSuccessDebounce,onClose:a[7]||(a[7]=a=>e.toggleRedeemConfirmFunc(!1))},null,8,[\"redeem-org-name\",\"redeem-res\",\"onSuccess\"])):(0,p$.kq)(\"\",!0)],64)}],[\"__scopeId\",\"data-v-2e307ba6\"]]),FY={class:\"page-home-page uranus-scrollbar\"},FQ={class:\"fh-sync-content-wrapper\"},FX={class:\"fh-sync-content-group fh-sync-auth-wrapper\"},F0={key:0,class:\"fh-sync-content-group\"},F1={class:\"fh-sync-content-group-title\"},F2={key:0,class:\"fh-sync-content-group-middle-wrapper\"},F3={class:\"fh-sync-content-group\"},F4={class:\"fh-sync-content-group-title\"},F6={key:0,class:\"fh-sync-content-group-middle-wrapper\"};(ot=px||(px={})).File=\"file\",ot.Oauth=\"oauth\",ot.Mqtt=\"mqtt\",ot.Stream=\"stream\",(on=pR||(pR={}))[on.File=1]=\"File\",on[on.Oauth=2]=\"Oauth\",on[on.Mqtt=3]=\"Mqtt\",(oi=pE||(pE={}))[oi.Aws=1]=\"Aws\",oi[oi.Ali=2]=\"Ali\",oi[oi.Minio=3]=\"Minio\",(oo=pF||(pF={})).Name=\"bucketName\",oo.Ak=\"bucketAk\",oo.Sk=\"bucketSk\",oo.Endpoint=\"bucketEndpoint\",oo.Region=\"bucketRegion\",(os=pT||(pT={}))[os.Media=1]=\"Media\",os[os.Wayline=2]=\"Wayline\",os[os.Model=3]=\"Model\",os[os.FlightRecord=4]=\"FlightRecord\",(ol=pP||(pP={}))[ol.FileSyncRuleStatusEnable=1]=\"FileSyncRuleStatusEnable\",ol[ol.FileSyncRuleStatusClose=2]=\"FileSyncRuleStatusClose\",ol[ol.FileSyncRuleStatusDisable=3]=\"FileSyncRuleStatusDisable\",(od=pM||(pM={}))[od.DirectionFhToThreeParty=1]=\"DirectionFhToThreeParty\",od[od.DirectionThreePartyToFh=2]=\"DirectionThreePartyToFh\",(oc=pL||(pL={}))[oc.SingleUpdate=0]=\"SingleUpdate\",oc[oc.BatchUpdate=1]=\"BatchUpdate\",(ou=pJ||(pJ={}))[ou.UnkownErr=0]=\"UnkownErr\",ou[ou.NetworkErr=1]=\"NetworkErr\",ou[ou.PermissionErr=2]=\"PermissionErr\",ou[ou.AccessInvalid=3]=\"AccessInvalid\",ou[ou.DownloadInvalid=4]=\"DownloadInvalid\",ou[ou.TagsInvalid=5]=\"TagsInvalid\",(op=pN||(pN={}))[op.Idle=0]=\"Idle\",op[op.Fail=1]=\"Fail\",op[op.Running=2]=\"Running\";let F5={[px.File]:\"fh-sync-file\",[px.Mqtt]:\"fh-sync-mqtt\",[px.Oauth]:\"fh-sync-oauth\",[px.Stream]:\"fh-sync-live\"},F8={[px.File]:\"web.fh_sync.data_synchronization.title\",[px.Mqtt]:\"web.fh_sync.mqtt_bridge.title\",[px.Oauth]:\"web.fh_sync.oauth.title\",[px.Stream]:\"web.fh_sync.forwarding_stream.title\"},F9={[pE.Aws]:\"web.fh_sync.file.bucket.aws\",[pE.Ali]:\"web.fh_sync.file.bucket.ali\",[pE.Minio]:\"web.fh_sync.file.bucket.minio\"},F7={[pT.Media]:\"web.fh_sync.file.resource.media\",[pT.Wayline]:\"web.fh_sync.file.resource.wayline\",[pT.Model]:\"web.fh_sync.file.resource.model\",[pT.FlightRecord]:\"web.fh_sync.file.resource.flight_record\"},Te={[pN.Fail]:\"web.fh_sync.file.progress.sync_interrupted\",[pN.Idle]:\"web.fh_sync.file.progress.idle\",[pN.Running]:\"web.fh_sync.file.progress.syncing\"},Ta={class:\"fh-sync-content-item\"},Tr={class:\"title\"},Tt={key:0,class:\"status\"},Tn={class:\"status-title\"},Ti={key:1,class:\"display-wrapper\"},To={class:\"display-item-title\"},Ts={class:\"display-item-content\"},Tl={key:2,class:\"empty-wrapper\"},Td=(0,mF.default)({name:\"EntryCard\",components:{},props:{cardType:{type:String},introData:{type:Object}},setup(e,{emit:a}){let r=[px.Oauth],t=(0,p$.Fl)(()=>e.cardType&&Object.values(px).includes(e.cardType)?F5[e.cardType]:\"\"),n=(0,p$.Fl)(()=>{if(e.cardType&&Object.values(px).includes(e.cardType)){var a;return ml(F8[e.cardType],void 0)}return\"\"}),i=(0,p$.Fl)(()=>{if(e.introData){var a,r;if(e.introData?.textEnable){;return ml(\"web.fh_sync.common.status_open\",void 0)}return ml(\"web.fh_sync.common.status_close\",void 0)}return\"\"}),o=(0,p$.Fl)(()=>e.introData?.displayData),s=(0,p$.Fl)(()=>!!e.introData&&!(0,ms.isNil)(e.introData.textEnable)),l=(0,p$.Fl)(()=>!(0,ms.isNil)(e.introData)),d=(0,p$.Fl)(()=>!!e.introData?.iconEnable);return{iconName:t,content:o,titleText:n,showContent:l,statusText:i,iconActive:d,showTextEnable:s,isPrivateSetOnlyType:(0,p$.Fl)(()=>!(0,ms.isNil)(e.cardType)&&r.includes(e.cardType))}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-icon\");return(0,p$.wg)(),(0,p$.iD)(\"div\",Ta,[(0,p$._)(\"div\",{class:(0,p$.C_)([\"icon-wrapper flex-container-center\",{active:t.iconActive}])},[(0,p$.Wm)(o,{name:t.iconName,size:24,color:\"#fff\",style:{transform:\"translateY(-1px)\"}},null,8,[\"name\"])],2),(0,p$._)(\"div\",Tr,(0,p$.zw)(t.titleText),1),t.showTextEnable?((0,p$.wg)(),(0,p$.iD)(\"div\",Tt,[(0,p$._)(\"div\",Tn,(0,p$.zw)(e.$t(\"web.fh_sync.common.status\"))+\": \",1),(0,p$._)(\"div\",null,(0,p$.zw)(t.statusText),1)])):(0,p$.kq)(\"\",!0),t.showContent?((0,p$.wg)(),(0,p$.iD)(\"div\",Ti,[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(t.content,(e,a)=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:a,class:\"display-item\"},[(0,p$._)(\"div\",To,(0,p$.zw)(e.title)+\": \",1),(0,p$._)(\"div\",Ts,(0,p$.zw)(e.content),1)]))),128))])):((0,p$.wg)(),(0,p$.iD)(\"div\",Tl,[(0,p$._)(\"div\",{class:(0,p$.C_)([\"empty-content\",{\"private-only\":t.isPrivateSetOnlyType}])},[t.isPrivateSetOnlyType?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.fh_sync.common.not_config\")),1),(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.fh_sync.common.private_set_only\")),1)],64)):((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[(0,p$.Uk)((0,p$.zw)(`+ ${e.$t(\"web.fh_sync.common.add_config\")}`),1)],64))],2)]))])}],[\"__scopeId\",\"data-v-0df1eb1e\"]]),Tc={class:\"sync-nav\"},Tu=(0,mF.default)({name:\"FhSyncNav\",components:{},props:{title:{type:String},tipText:{type:String}},emits:[\"back\",\"tip-action\"],setup(e,{emit:a}){(0,p9.tv)();let r=(0,p$.Fl)(()=>!!e.tipText);return{closeSync:()=>{a(\"back\")},hasTip:r,onTipAction:()=>{a(\"tip-action\")}}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-icon\"),s=(0,p$.up)(\"uranus-tooltip\"),l=(0,p$.Q2)(\"t\");return(0,p$.wg)(),(0,p$.iD)(\"div\",Tc,[(0,p$._)(\"div\",{class:\"back-wrapper\",onClick:a[0]||(a[0]=(...e)=>t.closeSync&&t.closeSync(...e))},[(0,p$.Wm)(s,{placement:\"topRight\",theme:\"dark\"},{title:(0,p$.w5)(()=>[(0,p$.wy)((0,p$._)(\"span\",null,null,512),[[l,\"common.action.return\"]])]),default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"back\",color:\"\",size:24,class:\"icon\"})]),_:1})]),(0,p$.Uk)(\" \"+(0,p$.zw)(r.title||e.$t(\"web.fh_sync.title\"))+\" \",1),t.hasTip?((0,p$.wg)(),(0,p$.iD)(\"div\",{key:0,class:\"tip-wrapper\",onClick:a[1]||(a[1]=(...e)=>t.onTipAction&&t.onTipAction(...e))},[(0,p$._)(\"a\",null,(0,p$.zw)(r.tipText),1)])):(0,p$.kq)(\"\",!0)])}],[\"__scopeId\",\"data-v-83582bb0\"]]),Tp=e=>((0,p$.dD)(\"data-v-98631cf6\"),e=e(),(0,p$.Cn)(),e),Tm={class:\"auth-content\"},Th={class:\"left\"},Tf={class:\"right\"},Tg={key:0,class:\"right-text\"},T_={key:1},Tb={class:\"account-operate-icon\"},Tk={class:\"account-operate-icon\"},Tv={class:\"account-operate-icon\"},Tz=Tp(()=>(0,p$._)(\"div\",{class:\"vertical-divider\"},null,-1)),Tw={class:\"account-operate-icon\"},Ty={class:\"fh-sync-auth-refresh-wrapper\"},TS={class:\"fh-sync-auth-refresh-main\"},Tj={class:\"fh-sync-auth-refresh-footer\"},TD={class:\"account-operate-icon\"},TI=Tp(()=>(0,p$._)(\"div\",{class:\"vertical-divider\"},null,-1)),TA={class:\"account-operate-icon\"},TC=(0,mF.default)({name:\"AuthKey\",components:{UranusModal:fX,UranusTooltip:hw},props:{selectedOrgId:{type:String,require:!0}},setup(e,{emit:a}){let r=(0,p$.iH)(\"\"),t=(0,p$.iH)(!1),n=(0,p$.iH)(\"\"),i=(0,p$.iH)(!1),o=(0,p$.iH)(!1),s=(0,p$.Fl)(()=>{var e;return`${ml(\"web.fh_sync.auth.key_creator\",void 0)}: ${n.value}`}),l=(0,p$.iH)(!1);async function d(){if(!!e.selectedOrgId)try{let{data:a}=await zZ(e.selectedOrgId);a&&(r.value=a.token||\"\",n.value=a.user_callsign||\"\")}catch(e){if(r.value=\"\",241008===e.code||233309===e.code)i.value=!0,o.value=!0;else{var a;kr.Z.error(ml(`${bz(e.code)}`,void 0))}}}async function c(){try{await z$(e.selectedOrgId),await d()}finally{l.value=!1}}async function u(){!r.value&&await d(),t.value=!0}async function p(){!r.value&&await d(),wE(r.value,()=>{var e;kr.Z.success(ml(\"common.action.copy_success\",void 0))})}async function m(){try{await z$(e.selectedOrgId),await d()}finally{i.value=!1,o.value=!1}}return(0,p$.bv)(()=>{d()}),{keyAuth:r,secretVisible:t,onCopyClick:p,showSecret:u,accountText:s,updateKeyAuth:c,updateModalVisible:l,authTooltipVisible:i,showWarningAuthRefreshIcon:o,onAuthRefresh:m}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-icon\"),s=(0,p$.up)(\"UranusTooltip\"),l=(0,p$.up)(\"uranus-button\"),d=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.iD)(\"div\",Tm,[(0,p$._)(\"div\",Th,(0,p$.zw)(e.$t(\"web.p_plan.cloud_to_cloud_tip27\"))+\": \",1),(0,p$._)(\"div\",Tf,[t.secretVisible?((0,p$.wg)(),(0,p$.iD)(\"div\",Tg,(0,p$.zw)(t.keyAuth),1)):((0,p$.wg)(),(0,p$.iD)(\"div\",T_,\" ******************* \")),t.secretVisible?((0,p$.wg)(),(0,p$.j4)(s,{key:2,theme:\"light\",placement:\"top\",content:e.$t(\"web.fh_sync.auth.click_hide_auth\")},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Tb,[t.secretVisible?((0,p$.wg)(),(0,p$.j4)(o,{key:0,name:\"eye\",onClick:a[0]||(a[0]=e=>t.secretVisible=!1)})):(0,p$.kq)(\"\",!0)])]),_:1},8,[\"content\"])):((0,p$.wg)(),(0,p$.j4)(s,{key:3,theme:\"light\",placement:\"top\",content:e.$t(\"web.fh_sync.auth.click_show_auth\")},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Tk,[(0,p$.Wm)(o,{name:\"eye-close\",onClick:t.showSecret},null,8,[\"onClick\"])])]),_:1},8,[\"content\"])),(0,p$.Wm)(s,{theme:\"light\",placement:\"top\",content:e.$t(\"web.fh_sync.auth.copy_auth\")},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Tv,[(0,p$.Wm)(o,{name:\"copy\",color:\"#2d8cf0\",onClick:t.onCopyClick},null,8,[\"onClick\"])])]),_:1},8,[\"content\"]),Tz,t.showWarningAuthRefreshIcon?((0,p$.wg)(),(0,p$.j4)(s,{key:5,theme:\"light\",placement:\"bottom\",visible:t.authTooltipVisible,\"arrow-point-at-center\":!0,\"overlay-size\":\"md\"},{title:(0,p$.w5)(()=>[(0,p$._)(\"div\",Ty,[(0,p$._)(\"div\",TS,(0,p$.zw)(e.$t(\"web.fh_sync.auth_refresh.tip\")),1),(0,p$._)(\"div\",Tj,[(0,p$.Wm)(l,{size:\"md\",outlined:!0,theme:\"light\",onClick:a[2]||(a[2]=e=>t.authTooltipVisible=!1)},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.cancel\")),1)]),_:1}),(0,p$.Wm)(l,{size:\"md\",type:\"primary\",onClick:t.onAuthRefresh},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.auth_refresh\")),1)]),_:1},8,[\"onClick\"])])])]),default:(0,p$.w5)(()=>[(0,p$._)(\"div\",TD,[(0,p$.Wm)(o,{color:\"#2d8cf0\",name:\"refresh\",size:14,onClick:a[3]||(a[3]=e=>t.updateModalVisible=!0)})])]),_:1},8,[\"visible\"])):((0,p$.wg)(),(0,p$.j4)(s,{key:4,theme:\"light\",placement:\"top\",content:e.$t(\"web.fh_sync.auth.regenerate_auth\")},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Tw,[(0,p$.Wm)(o,{color:\"#2d8cf0\",name:\"refresh\",size:14,onClick:a[1]||(a[1]=e=>t.updateModalVisible=!0)})])]),_:1},8,[\"content\"])),TI,(0,p$.Wm)(s,{theme:\"light\",placement:\"top\",content:t.accountText},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",TA,[(0,p$.Wm)(o,{name:\"fh-sync-account\"})])]),_:1},8,[\"content\"])]),(0,p$.Wm)(d,{class:\"partial-edit-org-setting-modal\",visible:t.updateModalVisible,title:e.$t(\"web.fh_sync.auth.update\"),size:\"tiny\",centered:!0,\"is-ok-auto-close\":!1,\"is-cancel-auto-close\":!1,\"destroy-on-close\":!0,\"can-ok\":!0,\"is-height-auto-fit\":!0,onOk:t.updateKeyAuth,onCancel:a[4]||(a[4]=e=>t.updateModalVisible=!1)},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.auth.update_tip\")),1)]),_:1},8,[\"visible\",\"title\",\"onOk\"])])}],[\"__scopeId\",\"data-v-98631cf6\"]]),Tx=\"/manage/api/v1\";async function TR(e,a){let r=`${Tx}/organizations/${e}/c2c/live-sync/list`;return(await bI.get(r,{params:a})).data}async function TE(e,a){let r=`${Tx}/organizations/${e}/c2c/live-sync`;return(await bI.post(r,a,{ignoreGlobalErrorHandler:!0})).data}async function TF(e,a){let r=`${Tx}/organizations/${e}/c2c/live-sync/${a}`;return(await bI.delete(r)).data}async function TT(e,a,r){let t=`${Tx}/organizations/${e}/c2c/live-sync/${a}`;return(await bI.put(t,r,{ignoreGlobalErrorHandler:!0})).data}async function TP(e){let a=`${Tx}/organizations/${e}/c2c/live-sync/devices`;return(await bI.get(a)).data}async function TM(e){let a=`${Tx}/organizations/${e}/c2c/live-sync/summary`;return(await bI.get(a)).data}let TL=(0,mF.default)({name:\"FhSyncDashboard\",components:{EntryCard:Td,FhSyncNav:Tu,AuthKey:TC,UranusSpin:fj},setup(e,{emit:a}){let r=(0,p9.tv)(),n=t,i=(0,p$.iH)(!1),o=(0,p$.iH)(null),s=(0,p$.iH)(!1),l=(0,p$.qj)({file:void 0,oauth:void 0,mqtt:void 0,stream:void 0}),d=(0,p$.Fl)(()=>ky(cm.FH_SYNC_MQTT)&&ky(cm.FH_SYNC_OAUTH)),c=(0,p$.Fl)(()=>{if(\"string\"==typeof n.$route.params.editOrgId)return n.$route.params.editOrgId}),u=async()=>{if(!!c.value)try{let{data:o}=await zK(c.value,pR.File);if(o&&o.type===pR.File&&o.storage){var e,a,r,t,n,i;let s={type:px.File,iconEnable:o.storage.enable,textEnable:o.storage.enable,displayData:[{title:(e=\"web.fh_sync.file.bucket.type\",ml(e,void 0)),content:(r=F9[o.storage.type],ml(r,void 0))},{title:(n=\"web.fh_sync.file.bucket.name\",ml(n,void 0)),content:o.storage.bucket}]};l.file=s}}catch(e){}},p=async()=>{if(!!ky(cm.FH_SYNC_OAUTH)&&!!c.value)try{let{data:e}=await zK(c.value,pR.Oauth);if(e&&e.type===pR.Oauth&&e.oauth){let a={type:px.Oauth,iconEnable:e.oauth.enable,textEnable:e.oauth.enable,displayData:[{title:\"Client ID\",content:e.oauth.client_id},{title:\"Client Secret\",content:e.oauth.client_secret},{title:\"Auth URL\",content:e.oauth.auth_url},{title:\"Token URL\",content:e.oauth.token_url},{title:\"User URL\",content:e.oauth.user_url},{title:\"User ID Key\",content:e.oauth.user_id_key},{title:\"User Account Key\",content:e.oauth.user_account_key},{title:\"User Redirect URL\",content:e.oauth.use_redirect_url}]};l.oauth=a}}catch(e){}},m=async()=>{if(!!ky(cm.FH_SYNC_MQTT)&&!!c.value)try{let{data:e}=await zK(c.value,pR.Mqtt);if(e&&e.type===pR.Mqtt&&e.mqtt_bridge&&e.mqtt_bridge.mqtt){let a={type:px.Mqtt,iconEnable:e.mqtt_bridge.enable,textEnable:e.mqtt_bridge.enable,displayData:[{title:\"Username\",content:e.mqtt_bridge.mqtt.username},{title:\"Address\",content:e.mqtt_bridge.mqtt.address}]};l.mqtt=a}}catch(e){}},h=async()=>{if(!!c.value)try{let{data:n}=await TM(c.value);if(n&&n.total>0){var e,a,r,t;let i={type:px.Stream,iconEnable:n.enable_cnt>0,displayData:[{title:(e=\"web.fh_sync.forward_stream.chanel_count\",ml(e,void 0)),content:n.total},{title:(r=\"web.fh_sync.forward_stream.enable_chanel_count\",ml(r,void 0)),content:n.enable_cnt}]};l.stream=i}}catch(e){}};return(0,p$.bv)(async()=>{s.value=!1,await Promise.allSettled([u(),p(),m(),h()]),s.value=!0}),{closeSync:()=>{r.push({name:\"my-organization\"})},FhSyncFunctionTypeEnum:px,enterEditMode:e=>{switch(e){case px.File:r.push({name:\"file-sync\",params:{editOrgId:c.value}});break;case px.Oauth:r.push({name:\"oauth\",params:{editOrgId:c.value}});break;case px.Stream:r.push({name:\"forward-stream\",params:{editOrgId:c.value}});break;case px.Mqtt:r.push({name:\"mqtt\",params:{editOrgId:c.value}})}i.value=!0,o.value=e},introData:l,isEditing:i,selectedOrgId:c,useFeature:ky,FeatureGateway:cm,systemInfoBoardEnable:d,hasFetchedData:s}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"FhSyncNav\"),s=(0,p$.up)(\"AuthKey\"),l=(0,p$.up)(\"EntryCard\"),d=(0,p$.up)(\"UranusSpin\");return(0,p$.wg)(),(0,p$.iD)(\"div\",FY,[(0,p$.Wm)(o,{onBack:t.closeSync},null,8,[\"onBack\"]),(0,p$.Wm)(d,{spinning:!t.hasFetchedData,tip:e.$t(\"common.data.loading\"),theme:\"light\"},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",FQ,[(0,p$._)(\"div\",FX,[(0,p$.Wm)(s,{\"selected-org-id\":t.selectedOrgId},null,8,[\"selected-org-id\"])]),t.systemInfoBoardEnable?((0,p$.wg)(),(0,p$.iD)(\"div\",F0,[(0,p$._)(\"div\",F1,(0,p$.zw)(e.$t(\"web.fh_sync.system_info.title\")),1),t.hasFetchedData?((0,p$.wg)(),(0,p$.iD)(\"div\",F2,[t.useFeature(t.FeatureGateway.FH_SYNC_MQTT)?((0,p$.wg)(),(0,p$.j4)(l,{key:0,\"card-type\":t.FhSyncFunctionTypeEnum.Mqtt,\"intro-data\":t.introData.mqtt,onClick:a[0]||(a[0]=e=>t.enterEditMode(t.FhSyncFunctionTypeEnum.Mqtt))},null,8,[\"card-type\",\"intro-data\"])):(0,p$.kq)(\"\",!0),t.useFeature(t.FeatureGateway.FH_SYNC_OAUTH)?((0,p$.wg)(),(0,p$.j4)(l,{key:1,\"card-type\":t.FhSyncFunctionTypeEnum.Oauth,\"intro-data\":t.introData.oauth,onClick:a[1]||(a[1]=e=>t.enterEditMode(t.FhSyncFunctionTypeEnum.Oauth))},null,8,[\"card-type\",\"intro-data\"])):(0,p$.kq)(\"\",!0)])):(0,p$.kq)(\"\",!0)])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",F3,[(0,p$._)(\"div\",F4,(0,p$.zw)(e.$t(\"web.fh_sync.live_data.title\")),1),t.hasFetchedData?((0,p$.wg)(),(0,p$.iD)(\"div\",F6,[(0,p$.Wm)(l,{\"card-type\":t.FhSyncFunctionTypeEnum.Stream,\"intro-data\":t.introData.stream,onClick:a[2]||(a[2]=e=>t.enterEditMode(t.FhSyncFunctionTypeEnum.Stream))},null,8,[\"card-type\",\"intro-data\"]),(0,p$.Wm)(l,{\"card-type\":t.FhSyncFunctionTypeEnum.File,\"intro-data\":t.introData.file,onClick:a[3]||(a[3]=e=>t.enterEditMode(t.FhSyncFunctionTypeEnum.File))},null,8,[\"card-type\",\"intro-data\"])])):(0,p$.kq)(\"\",!0)])])]),_:1},8,[\"spinning\",\"tip\"])])}],[\"__scopeId\",\"data-v-0c38db37\"]]),TJ={class:\"sync-file-wrapper uranus-scrollbar\"},TN={class:\"sync-content-wrapper\"},Tq={key:0,class:\"sync-file-content-item\"},TO={class:\"sync-file-content-item\"},TH={class:\"sync-file-content-item\"},TG={class:\"sync-file-content-item\"},TU=e=>((0,p$.dD)(\"data-v-fd15696c\"),e=e(),(0,p$.Cn)(),e),TV={class:\"file-sync-config-edit\"},TB={class:\"title\"},TK={class:\"form-wrapper\"},TW={class:\"form-item\"},TZ={class:\"form-item-title\"},T$={class:\"form-content\"},TY={class:\"form-item\"},TQ={class:\"form-item-title\"},TX={class:\"form-content\"},T0={class:\"form-item\"},T1={class:\"form-item-title\"},T2={class:\"form-content\"},T3={class:\"form-item\"},T4={class:\"form-item-title\"},T6={class:\"form-content\"},T5={key:0,class:\"form-item\"},T8=TU(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"EndPoint:\",-1)),T9={class:\"form-content\"},T7={class:\"form-item\"},Pe=TU(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"Region:\",-1)),Pa={class:\"form-content\"},Pr={class:\"save-wrapper\"},Pt={key:1,class:\"info-wrapper\"},Pn={class:\"icon-wrapper\",style:{\"margin-right\":\"4px\"}},Pi=[{label:\"web.fh_sync.file.progress.all_module\",value:\"\"},{label:\"web.fh_sync.file.resource.flight_record\",value:pT.FlightRecord},{label:\"web.fh_sync.file.resource.media\",value:pT.Media},{label:\"web.fh_sync.file.resource.model\",value:pT.Model},{label:\"web.fh_sync.file.resource.wayline\",value:pT.Wayline}],Po=[{label:\"web.fh_sync.file.progress.all_transmission_direction\",value:\"\"},{label:\"web.fh_sync.file.resource.flight_hub_to_third_party\",value:pM.DirectionFhToThreeParty},{label:\"web.fh_sync.file.resource.third_party_to_flight_hub\",value:pM.DirectionThreePartyToFh}],Ps={[pE.Aws]:{Version:\"2012-10-17\",Statement:[{Sid:\"Statement1\",Effect:\"Allow\",Action:\"s3:ListBucket\",Resource:\"arn:aws:s3:::your-bucket-name\"},{Sid:\"Statement2\",Effect:\"Allow\",Action:[\"s3:GetObject\",\"s3:GetObjectTagging\",\"s3:PutObjectTagging\",\"s3:PutObject\",\"s3:AbortMultipartUpload\",\"s3:ListMultipartUploadParts\"],Resource:\"arn:aws:s3:::your-bucket-name/*\"}]},[pE.Ali]:{Version:\"1\",Statement:[{Effect:\"Allow\",Action:[\"oss:ListParts\",\"oss:ListObjects\",\"oss:GetObject\",\"oss:GetObjectTagging\",\"oss:PutObjectTagging\",\"oss:PutObject\",\"oss:AbortMultipartUpload\"],Resource:[\"acs:oss:*:*:your-bucket-name/*\"]}]},[pE.Minio]:{Version:\"2012-10-17\",Statement:[{Effect:\"Allow\",Action:[\"s3:ListBucket\"],Resource:\"arn:aws:s3:::your-bucket-name\"},{Effect:\"Allow\",Action:[\"s3:GetObject\",\"s3:GetObjectTagging\",\"s3:PutObject\",\"s3:PutObjectTagging\",\"s3:AbortMultipartUpload\",\"s3:ListMultipartUploadParts\"],Resource:\"arn:aws:s3:::your-bucket-name/*\"}]}},Pl={[pE.Aws]:{[pF.Name]:\" eg: ***-name\",[pF.Ak]:\"eg: AKIAQCU5PAC4***\",[pF.Sk]:\"eg: ad7ojxmbn***\",[pF.Region]:\"us-east-1\",[pF.Endpoint]:void 0},[pE.Ali]:{[pF.Name]:\"eg: ***-name\",[pF.Ak]:\"eg: LTAI5tAib9U***\",[pF.Sk]:\"eg: UxslQdLsV9Rv***\",[pF.Region]:\"eg: oss-cn-hangzhou\",[pF.Endpoint]:void 0},[pE.Minio]:{[pF.Name]:\"eg: ****-name\",[pF.Ak]:\"eg: AKIA***\",[pF.Sk]:\"eg: UxslQdLsV9Rv***\",[pF.Endpoint]:\"eg: http://47.*.*.122:9002\",[pF.Region]:\"us-east-1\"}},Pd=\"/sync/v1.0\";async function Pc(e,a){let r=`${Pd}/organization/${e}/file-sync-rule/list`;return(await bI.get(r,{params:{org_id:e,pro_id:a}})).data}async function Pu(e){let a=`${Pd}/organization/${e.org_id}/task/list_fail`;return(await bI.get(a,{params:e})).data}async function Pp(e){let a=`${Pd}/organization/${e.org_id}/file-sync-rule/update`;return(await bI.post(a,e)).data}async function Pm(e){let a=`${Pd}/organization/${e.org_id}/file-sync-rule/batchupdate`;return(await bI.post(a,e)).data}async function Ph(e){let a=`${Pd}/organization/${e}/file-sync-rule/projects`;return(await bI.get(a,{params:{org_id:e}})).data}async function Pf(e,a){let r=`${Pd}/organization/${e}/user-config/storage-health`;return(await bI.put(r,a,{ignoreGlobalErrorHandler:!0})).data}async function Pg(e){let a=`${Pd}/organization/${e}/task/latest_info`;return(await bI.get(a,{params:{org_id:e}})).data}async function P_(e,a){let r=`${Pd}/organization/${e}/task/retry`;return(await bI.put(r,{id:a})).data}(om=pq||(pq={}))[om.Success=0]=\"Success\",om[om.Fail=1]=\"Fail\",om[om.Checking=2]=\"Checking\",om[om.NotChecked=3]=\"NotChecked\";let Pb=(0,mF.default)({name:\"BucketConfigEdit\",components:{UranusTooltip:hw},props:{bucketInfoDisplay:{type:Object,default:void 0},selectedOrgId:{type:String,require:!0}},emits:[\"save-config\",\"cancel-edit-config\"],setup(e,{emit:a}){let r=(0,p$.iH)(3),t=(0,p$.qj)({bucketMode:pE.Ali,bucketName:\"\",bucketAk:\"\",bucketSk:\"\",bucketEndpoint:\"\",bucketRegion:\"\"}),n=(0,p$.Fl)(()=>JSON.stringify(Ps[t.bucketMode],null,2)),i=(0,p$.Fl)(()=>{let{bucketMode:e,...a}=t;return Object.entries(a).every(([a,r])=>(e===pE.Ali||e===pE.Aws)&&\"bucketEndpoint\"===a||null!=r&&\"\"!==r)}),o=(0,p$.Fl)(()=>{var e,a,t;if(0===r.value){;return ml(\"web.fh_sync.common.connectivity_success\",void 0)}if(1===r.value){;return ml(\"web.fh_sync.common.connectivity_fail\",void 0)}if(2===r.value){;return ml(\"web.fh_sync.common.connectivity_checking\",void 0)}return\"\"});async function s(){if(!e.selectedOrgId||2===r.value)return;r.value=2;let a={type:t.bucketMode,bucket:t.bucketName,access_key:t.bucketAk,access_secret:t.bucketSk,endpoint:t.bucketMode===pE.Minio?t.bucketEndpoint:\"\",region:t.bucketRegion};try{let{code:t,data:n}=await Pf(e.selectedOrgId,a);0===t&&n&&n?.err_info===null?r.value=0:r.value=1}catch(e){r.value=1}}let l=async()=>{if(!!e.selectedOrgId)try{let r={type:pR.File,org_id:e.selectedOrgId,content:{type:t.bucketMode,bucket:t.bucketName,access_key:t.bucketAk,access_secret:t.bucketSk,endpoint:t.bucketMode===pE.Minio?t.bucketEndpoint:\"\",region:t.bucketRegion}};a(\"save-config\",r)}catch(e){}},d=(0,p$.Fl)(()=>(0,ms.isNil)(e.bucketInfoDisplay));return(0,p$.bv)(()=>{t.bucketMode=e.bucketInfoDisplay?.type||pE.Ali,t.bucketName=e.bucketInfoDisplay?.bucket||\"\",t.bucketAk=e.bucketInfoDisplay?.access_key||\"\",t.bucketSk=e.bucketInfoDisplay?.access_secret||\"\",t.bucketEndpoint=e.bucketInfoDisplay?.endpoint||\"\",t.bucketRegion=e.bucketInfoDisplay?.region||\"\"}),{isBtnHighlight:function(e){return t.bucketMode===e},SyncBucketTypeEnum:pE,judgeStyle:function(e){return t.bucketMode===e?\"primary\":\"normal\"},changeBucketMode:function(e){t.bucketMode=e},bucketState:t,FH_SYNC_FILE_BUCKET_TYPE_MAP:F9,setSyncFileConfig:l,changeBucketHealth:s,isEveryValueNonEmpty:i,healthInfo:o,healthStatus:r,BucketHealthStatus:pq,exampleText:n,onCancel:function(){a(\"cancel-edit-config\")},notShowCancel:d,BUCKET_PLACE_HOLDER:Pl,getPlaceholderText:function(e){return Pl[t.bucketMode][e]??\"\"},SyncBucketConfigTypeEnum:pF}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-button\"),s=(0,p$.up)(\"uranus-button-group\"),l=(0,p$.up)(\"AInput\"),d=(0,p$.up)(\"a-popover\"),c=(0,p$.up)(\"uranus-icon\");return(0,p$.wg)(),(0,p$.iD)(\"div\",TV,[(0,p$._)(\"div\",TB,(0,p$.zw)(e.$t(\"web.fh_sync.file.bucket.config\")),1),(0,p$._)(\"div\",TK,[(0,p$._)(\"div\",TW,[(0,p$._)(\"span\",TZ,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.type\")}:`),1),(0,p$._)(\"div\",T$,[(0,p$.Wm)(s,{type:\"linear\"},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{type:t.judgeStyle(t.SyncBucketTypeEnum.Aws),outlined:!t.isBtnHighlight(t.SyncBucketTypeEnum.Aws),theme:\"light\",onClick:a[0]||(a[0]=e=>t.changeBucketMode(t.SyncBucketTypeEnum.Aws))},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(t.FH_SYNC_FILE_BUCKET_TYPE_MAP[t.SyncBucketTypeEnum.Aws])),1)]),_:1},8,[\"type\",\"outlined\"]),(0,p$.Wm)(o,{type:t.judgeStyle(t.SyncBucketTypeEnum.Ali),outlined:!t.isBtnHighlight(t.SyncBucketTypeEnum.Ali),theme:\"light\",onClick:a[1]||(a[1]=e=>t.changeBucketMode(t.SyncBucketTypeEnum.Ali))},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(t.FH_SYNC_FILE_BUCKET_TYPE_MAP[t.SyncBucketTypeEnum.Ali])),1)]),_:1},8,[\"type\",\"outlined\"]),(0,p$.Wm)(o,{type:t.judgeStyle(t.SyncBucketTypeEnum.Minio),outlined:!t.isBtnHighlight(t.SyncBucketTypeEnum.Minio),theme:\"light\",onClick:a[2]||(a[2]=e=>t.changeBucketMode(t.SyncBucketTypeEnum.Minio))},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(t.FH_SYNC_FILE_BUCKET_TYPE_MAP[t.SyncBucketTypeEnum.Minio])),1)]),_:1},8,[\"type\",\"outlined\"])]),_:1})])]),(0,p$._)(\"div\",TY,[(0,p$._)(\"span\",TQ,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.name\")}:`),1),(0,p$._)(\"div\",TX,[(0,p$.Wm)(l,{value:t.bucketState.bucketName,\"onUpdate:value\":a[3]||(a[3]=e=>t.bucketState.bucketName=e),placeholder:t.getPlaceholderText(t.SyncBucketConfigTypeEnum.Name),maxlength:2e3},null,8,[\"value\",\"placeholder\"])])]),(0,p$._)(\"div\",T0,[(0,p$._)(\"span\",T1,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.ak\")}:`),1),(0,p$._)(\"div\",T2,[(0,p$.Wm)(l,{value:t.bucketState.bucketAk,\"onUpdate:value\":a[4]||(a[4]=e=>t.bucketState.bucketAk=e),placeholder:t.getPlaceholderText(t.SyncBucketConfigTypeEnum.Ak),maxlength:2e3},null,8,[\"value\",\"placeholder\"])])]),(0,p$._)(\"div\",T3,[(0,p$._)(\"span\",T4,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.sk\")}:`),1),(0,p$._)(\"div\",T6,[(0,p$.Wm)(l,{value:t.bucketState.bucketSk,\"onUpdate:value\":a[5]||(a[5]=e=>t.bucketState.bucketSk=e),placeholder:t.getPlaceholderText(t.SyncBucketConfigTypeEnum.Sk),maxlength:2e3},null,8,[\"value\",\"placeholder\"])])]),t.bucketState.bucketMode===t.SyncBucketTypeEnum.Minio?((0,p$.wg)(),(0,p$.iD)(\"div\",T5,[T8,(0,p$._)(\"div\",T9,[(0,p$.Wm)(l,{value:t.bucketState.bucketEndpoint,\"onUpdate:value\":a[6]||(a[6]=e=>t.bucketState.bucketEndpoint=e),placeholder:t.getPlaceholderText(t.SyncBucketConfigTypeEnum.Endpoint),maxlength:2e3},null,8,[\"value\",\"placeholder\"])])])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",T7,[Pe,(0,p$._)(\"div\",Pa,[(0,p$.Wm)(l,{value:t.bucketState.bucketRegion,\"onUpdate:value\":a[7]||(a[7]=e=>t.bucketState.bucketRegion=e),placeholder:t.getPlaceholderText(t.SyncBucketConfigTypeEnum.Region),maxlength:2e3},null,8,[\"value\",\"placeholder\"])])])]),(0,p$._)(\"div\",null,[(0,p$.Wm)(d,{\"overlay-class-name\":\"overlay-fh-sync-file-bucket-tips-popover\",placement:\"right\",\"arrow-point-at-center\":!0,trigger:\"hover\"},{content:(0,p$.w5)(()=>[(0,p$._)(\"pre\",null,(0,p$.zw)(t.exampleText),1)]),default:(0,p$.w5)(()=>[(0,p$._)(\"a\",null,(0,p$.zw)(e.$t(\"web.fh_sync.file.bucket.permission_code_example\")),1)]),_:1})]),(0,p$._)(\"div\",Pr,[t.notShowCancel?(0,p$.kq)(\"\",!0):((0,p$.wg)(),(0,p$.j4)(o,{key:0,theme:\"light\",outlined:\"\",class:\"operate-btn\",onClick:a[8]||(a[8]=e=>t.onCancel())},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.cancel\")),1)]),_:1})),(0,p$.Wm)(o,{type:\"primary\",class:\"operate-btn\",disabled:t.healthStatus!==t.BucketHealthStatus.Success,onClick:a[9]||(a[9]=e=>t.setSyncFileConfig())},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.common.save\")),1)]),_:1},8,[\"disabled\"]),(0,p$.Wm)(o,{type:\"primary\",class:\"operate-btn\",disabled:!t.isEveryValueNonEmpty,loading:t.healthStatus===t.BucketHealthStatus.Checking,onClick:a[10]||(a[10]=e=>t.changeBucketHealth())},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.common.connectivity_check\")),1)]),_:1},8,[\"disabled\",\"loading\"]),t.healthStatus!==t.BucketHealthStatus.NotChecked?((0,p$.wg)(),(0,p$.iD)(\"div\",Pt,[(0,p$._)(\"div\",Pn,[t.healthStatus===t.BucketHealthStatus.Success?((0,p$.wg)(),(0,p$.j4)(c,{key:0,name:\"fh-sync-progress-success\",size:16})):(0,p$.kq)(\"\",!0),t.healthStatus===t.BucketHealthStatus.Fail?((0,p$.wg)(),(0,p$.j4)(c,{key:1,name:\"fh-sync-progress-fail\",size:16})):(0,p$.kq)(\"\",!0),t.healthStatus===t.BucketHealthStatus.Checking?((0,p$.wg)(),(0,p$.j4)(c,{key:2,name:\"loading\",size:14})):(0,p$.kq)(\"\",!0)]),(0,p$._)(\"div\",null,(0,p$.zw)(t.healthInfo),1)])):(0,p$.kq)(\"\",!0)])])}],[\"__scopeId\",\"data-v-fd15696c\"]]),Pk=e=>((0,p$.dD)(\"data-v-4485ce59\"),e=e(),(0,p$.Cn)(),e),Pv={class:\"file-sync-config-display\"},Pz={class:\"title\"},Pw={class:\"form-wrapper\"},Py={class:\"form-item\"},PS={class:\"form-item-title\"},Pj={class:\"form-content\"},PD={class:\"form-item\"},PI={class:\"form-item-title\"},PA={class:\"form-content\"},PC={class:\"form-item\"},Px={class:\"form-item-title\"},PR={class:\"form-content\"},PE={class:\"form-item\"},PF={class:\"form-item-title\"},PT={class:\"form-content\"},PP={key:0,class:\"form-item\"},PM=Pk(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"EndPoint:\",-1)),PL={class:\"form-content\"},PJ={key:1,class:\"form-item\"},PN=Pk(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"Region:\",-1)),Pq={class:\"form-content\"},PO={class:\"edit-wrapper\"},PH=(0,mF.default)({name:\"BucketConfigDisplay\",components:{},props:{bucketInfoDisplay:{type:Object,default:void 0}},emits:[\"edit-bucket-confit\"],setup(e,{emit:a}){let r=(0,p$.Fl)(()=>{if(!(0,ms.isNil)(e.bucketInfoDisplay?.type)){var a;return ml(F9[e.bucketInfoDisplay?.type],void 0)}return\"\"}),t=(0,p$.Fl)(()=>e.bucketInfoDisplay?.bucket?e.bucketInfoDisplay.bucket:\"\"),n=(0,p$.Fl)(()=>e.bucketInfoDisplay?.access_key?e.bucketInfoDisplay.access_key:\"\"),i=(0,p$.Fl)(()=>e.bucketInfoDisplay?.access_secret?e.bucketInfoDisplay.access_secret:\"\"),o=(0,p$.Fl)(()=>e.bucketInfoDisplay?.endpoint?e.bucketInfoDisplay.endpoint:\"\"),s=(0,p$.Fl)(()=>e.bucketInfoDisplay?.region?e.bucketInfoDisplay.region:\"\");return{nameText:t,typeText:r,akText:n,skText:i,SyncBucketTypeEnum:pE,endpointText:o,FH_SYNC_FILE_BUCKET_TYPE_MAP:F9,regionText:s,goEditBucketConfit:function(){a(\"edit-bucket-confit\")}}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-button\");return(0,p$.wg)(),(0,p$.iD)(\"div\",Pv,[(0,p$._)(\"div\",Pz,(0,p$.zw)(e.$t(\"web.fh_sync.file.bucket.config\")),1),(0,p$._)(\"div\",Pw,[(0,p$._)(\"div\",Py,[(0,p$._)(\"span\",PS,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.type\")}:`),1),(0,p$._)(\"span\",Pj,(0,p$.zw)(t.typeText),1)]),(0,p$._)(\"div\",PD,[(0,p$._)(\"span\",PI,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.name\")}:`),1),(0,p$._)(\"span\",PA,(0,p$.zw)(t.nameText),1)]),(0,p$._)(\"div\",PC,[(0,p$._)(\"span\",Px,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.ak\")}:`),1),(0,p$._)(\"span\",PR,(0,p$.zw)(t.akText),1)]),(0,p$._)(\"div\",PE,[(0,p$._)(\"span\",PF,(0,p$.zw)(`${e.$t(\"web.fh_sync.file.bucket.sk\")}:`),1),(0,p$._)(\"span\",PT,(0,p$.zw)(t.skText),1)]),r.bucketInfoDisplay?.type===t.SyncBucketTypeEnum.Minio?((0,p$.wg)(),(0,p$.iD)(\"div\",PP,[PM,(0,p$._)(\"span\",PL,(0,p$.zw)(t.endpointText),1)])):((0,p$.wg)(),(0,p$.iD)(\"div\",PJ,[PN,(0,p$._)(\"span\",Pq,(0,p$.zw)(t.regionText),1)]))]),(0,p$._)(\"div\",PO,[(0,p$.Wm)(o,{type:\"primary\",onClick:a[0]||(a[0]=e=>t.goEditBucketConfit())},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.common.edit\")),1)]),_:1})])])}],[\"__scopeId\",\"data-v-4485ce59\"]]),PG={class:\"sync-file-resource-config\"},PU={class:\"title\"},PV={class:\"intro\"},PB={class:\"intro\"},PK={class:\"intro\"},PW={class:\"intro\"},PZ={class:\"file-sync-select-wrapper\"},P$={class:\"project-select-wrapper uranus-scrollbar\"},PY={class:\"project-select-item\"},PQ={class:\"operate-wrapper\"},PX={key:1,class:\"batch-btn-wrapper\"},P0={class:\"count\"},P1={class:\"text\"},P2={class:\"rule-switch-wrapper\"},P3={class:\"rule-switch-middle-wrapper\"},P4={class:\"rule-header\"},P6={class:\"sub-title\"},P5={class:\"sub-title\"},P8={class:\"rule-item-name rule-item-child\"},P9={class:\"rule-item-switch rule-item-child\"},P7={key:0},Me={class:\"rule-item-switch rule-item-child\"},Ma={key:0},Mr=(0,mF.default)({name:\"FileToggleTable\",components:{UranusTooltip:hw,UranusSwitch:gi},props:{ruleDisplayData:{type:Array,default:()=>[]}},emits:[\"update-single-sync-rule\",\"update-all-sync-rule\"],setup:(e,{emit:a})=>({getSyncFileTypeText:function(e){var a;return ml(F7[e],void 0)},getSyncFileStatus:function(e){return e===pP.FileSyncRuleStatusEnable||!1},changeSyncFileRuleStatus:function(e,r,t){a(\"update-single-sync-rule\",{type:r,direction:t,status:e?pP.FileSyncRuleStatusEnable:pP.FileSyncRuleStatusClose})},FileSyncDirectionType:pM,switchAllRule:function(e){a(\"update-all-sync-rule\",e)},FileSyncRuleStatus:pP})},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-button\"),s=(0,p$.up)(\"UranusSwitch\");return(0,p$.wg)(),(0,p$.iD)(\"div\",P2,[(0,p$._)(\"div\",null,[(0,p$.Wm)(o,{type:\"primary\",onClick:a[0]||(a[0]=e=>t.switchAllRule(!0))},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.file.resource.open_all\")),1)]),_:1}),(0,p$.Wm)(o,{type:\"primary\",onClick:a[1]||(a[1]=e=>t.switchAllRule(!1))},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.file.resource.close_all\")),1)]),_:1})]),(0,p$._)(\"div\",P3,[(0,p$._)(\"div\",P4,[(0,p$._)(\"div\",P6,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.flight_hub_to_third_party\")),1),(0,p$._)(\"div\",P5,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.third_party_to_flight_hub\")),1)]),((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(r.ruleDisplayData,(e,a)=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:a,class:(0,p$.C_)([\"rule-item\",{dark:a%2!=0}])},[(0,p$._)(\"div\",P8,(0,p$.zw)(t.getSyncFileTypeText(e.type)),1),(0,p$._)(\"div\",P9,[e.toThreeParty.status===t.FileSyncRuleStatus.FileSyncRuleStatusDisable?((0,p$.wg)(),(0,p$.iD)(\"div\",P7,\" -- \")):((0,p$.wg)(),(0,p$.j4)(s,{key:1,checked:t.getSyncFileStatus(e.toThreeParty.status),theme:\"light\",onClick:a=>t.changeSyncFileRuleStatus(a,e.type,t.FileSyncDirectionType.DirectionFhToThreeParty)},null,8,[\"checked\",\"onClick\"]))]),(0,p$._)(\"div\",Me,[e.toFh.status===t.FileSyncRuleStatus.FileSyncRuleStatusDisable?((0,p$.wg)(),(0,p$.iD)(\"div\",Ma,\" -- \")):((0,p$.wg)(),(0,p$.j4)(s,{key:1,checked:t.getSyncFileStatus(e.toFh.status),theme:\"light\",onClick:a=>t.changeSyncFileRuleStatus(a,e.type,t.FileSyncDirectionType.DirectionThreePartyToFh)},null,8,[\"checked\",\"onClick\"]))])],2))),128))])])}],[\"__scopeId\",\"data-v-9a871c3c\"]]),Mt={class:\"sync-file-resource-modal-wrapper\"},Mn=(0,mF.default)({name:\"FileFlightRecordTipModal\",components:{FileToggleTable:Mr},props:{resourceModalShow:{type:Boolean,default:!1},ruleDisplayDataForModal:{type:Array,default:()=>[]}},emits:[\"confirm-update-modal\",\"close-update-modal\",\"update-single-sync-rule-multi-project\",\"update-all-sync-rule-multi-project\"],setup:(e,{emit:a})=>({onConfirm:function(){a(\"confirm-update-modal\")},onCancel:function(){a(\"close-update-modal\")},onUpdateSingleSyncRule:async function e(e){a(\"update-single-sync-rule-multi-project\",e)},onUpdateAllSyncRule:async function e(e){a(\"update-all-sync-rule-multi-project\",e)}})},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"FileToggleTable\"),s=(0,p$.up)(\"uranus-button\"),l=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.j4)(l,{visible:r.resourceModalShow,centered:!0,width:480,size:\"small\"},{footer:(0,p$.w5)(()=>[(0,p$.Wm)(s,{theme:\"light\",outlined:\"\",onClick:t.onCancel},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.cancel\")),1)]),_:1},8,[\"onClick\"]),(0,p$.Wm)(s,{type:\"primary\",onClick:t.onConfirm},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.confirm\")),1)]),_:1},8,[\"onClick\"])]),default:(0,p$.w5)(()=>[(0,p$._)(\"div\",Mt,[(0,p$.Wm)(o,{\"rule-display-data\":r.ruleDisplayDataForModal,onUpdateSingleSyncRule:t.onUpdateSingleSyncRule,onUpdateAllSyncRule:t.onUpdateAllSyncRule},null,8,[\"rule-display-data\",\"onUpdateSingleSyncRule\",\"onUpdateAllSyncRule\"])])]),_:1},8,[\"visible\"])}]]),Mi=(0,mF.default)({name:\"SyncFileFlightRecordTipModal\",components:{},props:{flightRecordTipModalShow:{type:Boolean,default:!1}},emits:[\"confirm-tip-modal\",\"close-tip-modal\"],setup:(e,{emit:a})=>({onConfirm:function(){a(\"confirm-tip-modal\")},onCancel:function(){a(\"close-tip-modal\")}})},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-button\"),s=(0,p$.up)(\"UranusModal\");return(0,p$.wg)(),(0,p$.j4)(s,{visible:r.flightRecordTipModalShow,centered:!0,width:480,title:e.$t(\"web.fh_sync.file.resource.flight_record_authorization\"),size:\"tiny\",\"is-height-auto-fit\":!0},{footer:(0,p$.w5)(()=>[(0,p$.Wm)(o,{theme:\"light\",outlined:\"\",onClick:t.onCancel},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.cancel\")),1)]),_:1},8,[\"onClick\"]),(0,p$.Wm)(o,{type:\"primary\",onClick:t.onConfirm},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"common.action.confirm\")),1)]),_:1},8,[\"onClick\"])]),default:(0,p$.w5)(()=>[(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.flight_record_tip1\")),1),(0,p$._)(\"div\",null,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.flight_record_tip2\")),1)]),_:1},8,[\"visible\",\"title\"])}]]),Mo=(0,mF.default)({name:\"FileResourceSyncConfig\",components:{UranusTooltip:hw,UranusSwitch:gi,FileToggleTable:Mr,FileResourceUpdateModal:Mn,FileFlightRecordTipModal:Mi},props:{selectedOrgId:{type:String,require:!0}},setup(e,{emit:a}){let r=(0,p$.iH)([]),t=(0,p$.iH)([]),n=(0,p$.iH)([]),i=(0,p$.iH)([]),o=(0,p$.iH)(!1),s=(0,p$.iH)(!1),l=(0,p$.qj)({isAgree:!1,authorizeType:uz.NotUpload}),d=(0,p$.qj)({functionType:void 0,singleUpdataParams:void 0,batchUpdataParams:void 0}),c=(0,p$.Fl)(()=>r.value.filter(e=>!0===e.selected)),u=(0,p$.Fl)(()=>1===c.value.length),p=(0,p$.Fl)(()=>c.value.length>1),m=(0,p$.Fl)(()=>c.value.length>0),h=(0,p$.Fl)(()=>{if(u.value)return c.value[0].uuid});async function f(){if(!!e.selectedOrgId)try{let a=await k1({orgId:e.selectedOrgId,type:uw.FlightRecord}),r=a?.data?.auth_type;r===uz.UploadToFH2&&(l.authorizeType=r,l.isAgree=!0)}catch(e){}}async function g(){if(!!e.selectedOrgId)try{await k2({orgId:e.selectedOrgId,type:uw.FlightRecord,option:uz.UploadToFH2})}catch(e){}}function _(e,a){return e===pT.FlightRecord&&a===pP.FileSyncRuleStatusEnable&&(!l.isAgree||l.authorizeType!==uz.UploadToFH2)&&!0}async function b(){if(!e.selectedOrgId||!m.value)return;let a=[];for(let e of i.value){let r={type:e.type,direction:pM.DirectionThreePartyToFh,status:e.toFh.status===pP.FileSyncRuleStatusDisable?pP.FileSyncRuleStatusDisable:e.toFh.status},t={type:e.type,direction:pM.DirectionFhToThreeParty,status:e.toThreeParty.status===pP.FileSyncRuleStatusDisable?pP.FileSyncRuleStatusDisable:e.toThreeParty.status};a.push(r),a.push(t)}let r=c.value.map(e=>e.uuid),t={org_id:e.selectedOrgId,pro_ids:r,rules:a};if(d.functionType=pL.BatchUpdate,d.batchUpdataParams=t,t.rules.find(e=>!!e&&!!e.type&&_(e.type,e.status))){s.value=!0;return}try{await Pm(t),o.value=!1}catch(e){o.value=!1}}let k=async()=>{if(!!e.selectedOrgId)try{let{data:a}=await Ph(e.selectedOrgId);if(a&&a.list)r.value=a.list.map(e=>({...e,selected:!1}))}catch(e){}};function v(e,a=!1){let r=[];for(let t of e){let{type:e,direction:n,status:i}=t,o=r.find(e=>e.type===t.type);!o&&(o={type:e,toFh:{status:pP.FileSyncRuleStatusDisable},toThreeParty:{status:pP.FileSyncRuleStatusDisable}},r.push(o));let s=i;a&&i!==pP.FileSyncRuleStatusDisable&&(s=pP.FileSyncRuleStatusClose),n===pM.DirectionThreePartyToFh?o.toFh.status=s:n===pM.DirectionFhToThreeParty&&(o.toThreeParty.status=s)}return r}let z=async a=>{if(!!e.selectedOrgId&&!!a)try{let{data:r}=await Pc(e.selectedOrgId,a);r&&r.rules&&(t.value=v(r.rules),i.value=v(r.rules),n.value=function(e){let a=[];for(let r of e){let{type:e,direction:t,status:n}=r,i={type:e,direction:t,status:n===pP.FileSyncRuleStatusDisable?pP.FileSyncRuleStatusDisable:pP.FileSyncRuleStatusClose};a.push(i)}return a}(r.rules))}catch(e){}};async function w(a){if(!e.selectedOrgId||(0,ms.isNil)(h.value))return;let r={org_id:e.selectedOrgId,pro_id:h.value,type:a.type,direction:a.direction,status:a.status};if(d.functionType=pL.SingleUpdate,d.singleUpdataParams=r,_(a.type,a.status)){s.value=!0;return}try{await Pp(r),z(h.value)}catch(e){}}async function y(a){if(!e.selectedOrgId||!m.value)return;let r=a?pP.FileSyncRuleStatusEnable:pP.FileSyncRuleStatusClose,t=[];for(let e of n.value){let a={type:e.type,direction:e.direction,status:e.status===pP.FileSyncRuleStatusDisable?pP.FileSyncRuleStatusDisable:r};t.push(a)}let i=c.value.map(e=>e.uuid),o={org_id:e.selectedOrgId,pro_ids:i,rules:t};if(d.functionType=pL.BatchUpdate,d.batchUpdataParams=o,o.rules.find(e=>!!e&&!!e.type&&_(e.type,e.status))){s.value=!0;return}try{await Pm(o),u.value&&h.value&&z(h.value)}catch(e){}}async function S(e){let a=i.value.find(a=>a.type===e.type);if(!(0,ms.isNil)(a))e.direction===pM.DirectionFhToThreeParty&&(a.toThreeParty.status=e.status),e.direction===pM.DirectionThreePartyToFh&&(a.toFh.status=e.status)}async function j(e){let a=e?pP.FileSyncRuleStatusEnable:pP.FileSyncRuleStatusClose;i.value.forEach(e=>{e.toFh.status=e.toFh.status===pP.FileSyncRuleStatusDisable?pP.FileSyncRuleStatusDisable:a,e.toThreeParty.status=e.toThreeParty.status===pP.FileSyncRuleStatusDisable?pP.FileSyncRuleStatusDisable:a})}async function D(){try{await g(),d.functionType===pL.SingleUpdate&&d.singleUpdataParams&&await Pp(d.singleUpdataParams),d.functionType===pL.BatchUpdate&&d.batchUpdataParams&&await Pm(d.batchUpdataParams),f(),z(h.value),s.value=!1,o.value=!1}catch(e){s.value=!1,o.value=!1}}return(0,p$.YP)(()=>h.value,e=>{!(0,ms.isNil)(e)&&z(e)}),(0,p$.YP)(()=>m.value,e=>{!e&&(t.value=[],n.value=[],i.value=[])}),(0,p$.bv)(()=>{k(),f()}),{ruleDisplayData:t,onSingleChangeProject:function(e,a){if((0,ms.isNil)(a))return;let t=r.value.find(e=>e.uuid===a);t&&(t.selected=e)},projectList:r,onUpdateSingleSyncRule:w,onUpdateAllSyncRule:y,isSingleSelectedProject:u,selectedProjects:c,resourceUpdateModalShow:o,onOpenModal:function(){o.value=!0},onCloseUpdateModal:function(){o.value=!1},onConfirmUpdateModal:b,ruleDisplayDataForModal:i,onUpdateSingleSyncRuleMultiProject:S,isSelectedProjectCountGreaterThanOne:p,onUpdateAllSyncRuleMultiProject:j,flightRecordTipModalShow:s,onCloseTipModal:function(){s.value=!1},onConfirmTipModal:D}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"a-checkbox\"),s=(0,p$.up)(\"UranusTooltip\"),l=(0,p$.up)(\"FileToggleTable\"),d=(0,p$.up)(\"uranus-button\"),c=(0,p$.up)(\"FileResourceUpdateModal\"),u=(0,p$.up)(\"FileFlightRecordTipModal\");return(0,p$.wg)(),(0,p$.iD)(\"div\",PG,[(0,p$._)(\"div\",PU,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.title\")),1),(0,p$._)(\"div\",PV,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.intro1\")),1),(0,p$._)(\"div\",PB,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.intro2\")),1),(0,p$._)(\"div\",PK,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.intro3\")),1),(0,p$._)(\"div\",PW,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.intro4\")),1),(0,p$._)(\"div\",PZ,[(0,p$._)(\"div\",P$,[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(t.projectList,(e,a)=>((0,p$.wg)(),(0,p$.iD)(\"div\",{key:e.uuid,class:(0,p$.C_)([\"project-select-item\",{selected:!!e.selected}])},[(0,p$.Wm)(o,{checked:!!e.selected,indeterminate:!1,onChange:a=>t.onSingleChangeProject(a.target.checked,e.uuid)},null,8,[\"checked\",\"onChange\"]),(0,p$._)(\"div\",PY,[(0,p$.Wm)(s,{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":!0,content:e.name},null,8,[\"content\"])])],2))),128))]),(0,p$._)(\"div\",PQ,[t.isSingleSelectedProject?((0,p$.wg)(),(0,p$.j4)(l,{key:0,\"rule-display-data\":t.ruleDisplayData,onUpdateSingleSyncRule:t.onUpdateSingleSyncRule,onUpdateAllSyncRule:t.onUpdateAllSyncRule},null,8,[\"rule-display-data\",\"onUpdateSingleSyncRule\",\"onUpdateAllSyncRule\"])):(0,p$.kq)(\"\",!0),t.isSelectedProjectCountGreaterThanOne?((0,p$.wg)(),(0,p$.iD)(\"div\",PX,[(0,p$._)(\"div\",P0,(0,p$.zw)(t.selectedProjects.length),1),(0,p$._)(\"div\",P1,(0,p$.zw)(e.$t(\"web.fh_sync.file.resource.select_project\")),1),(0,p$._)(\"div\",null,[(0,p$.Wm)(d,{type:\"primary\",size:\"lg\",onClick:t.onOpenModal},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(\"web.fh_sync.file.resource.batch_set\")),1)]),_:1},8,[\"onClick\"])])])):(0,p$.kq)(\"\",!0)])]),(0,p$.Wm)(c,{\"resource-modal-show\":t.resourceUpdateModalShow,\"rule-display-data-for-modal\":t.ruleDisplayDataForModal,onUpdateSingleSyncRuleMultiProject:t.onUpdateSingleSyncRuleMultiProject,onUpdateAllSyncRuleMultiProject:t.onUpdateAllSyncRuleMultiProject,onCloseUpdateModal:t.onCloseUpdateModal,onConfirmUpdateModal:t.onConfirmUpdateModal},null,8,[\"resource-modal-show\",\"rule-display-data-for-modal\",\"onUpdateSingleSyncRuleMultiProject\",\"onUpdateAllSyncRuleMultiProject\",\"onCloseUpdateModal\",\"onConfirmUpdateModal\"]),(0,p$.Wm)(u,{\"flight-record-tip-modal-show\":t.flightRecordTipModalShow,onCloseTipModal:t.onCloseTipModal,onConfirmTipModal:t.onConfirmTipModal},null,8,[\"flight-record-tip-modal-show\",\"onCloseTipModal\",\"onConfirmTipModal\"])])}],[\"__scopeId\",\"data-v-3908446e\"]]),Ms={class:\"file-task-progress-display\"},Ml={class:\"title\"},Md={class:\"status-wrapper\"},Mc={class:\"status-item\",style:{\"margin-bottom\":\"8px\"}},Mu={class:\"intro intro-title\"},Mp={class:\"intro\"},Mm={class:\"status-item\"},Mh={class:\"intro intro-title\"},Mf={key:0,class:\"intro\"},Mg={key:1,class:\"intro\"},M_={class:\"intro\"},Mb={class:\"table-wrapper\"},Mk={class:\"table-header\"},Mv={class:\"table-title\"},Mz={class:\"filter-wrapper\"},Mw={class:\"text-box\"},My={class:\"text-box\"},MS={class:\"text-box\"},Mj={class:\"text-box\"},MD={class:\"text-box\"},MI={class:\"text-box\"},MA={style:{\"max-width\":\"350px\"}},MC={key:0},Mx=[\"src\"],MR=[\"onClick\"],ME=(0,mF.default)({name:\"FileTaskProgress\",components:{UranusTable:fZ,UranusTooltip:hw},props:{selectedOrgId:{type:String,require:!0}},setup(e,{emit:a}){let{t:r}=(0,p7.QT)(),t=(0,p$.iH)(),n=(0,p$.iH)([]),i=(0,p$.iH)([]),o=(0,p$.qj)({projectId:\"\",direction:\"\",module:\"\"}),s=(0,p$.iH)(),l=(0,p$.iH)({showSizeChanger:!0,showQuickJumper:!0,current:1,pageSize:10,total:0,pageSizeOptions:[\"10\",\"20\",\"50\"]}),d=(0,p$.Fl)(()=>t.value&&!(0,ms.isNil)(t.value?.timestamp)?mi().unix(t.value?.timestamp).format(\"YYYY-MM-DD HH:mm:ss\"):\"\"),c=(0,p$.Fl)(()=>{if(t.value&&!(0,ms.isNil)(t.value?.status)){var e;return ml(Te[t.value?.status],void 0)}return\"\"});async function u(){if(!!e.selectedOrgId)try{let{data:a}=await Pg(e.selectedOrgId);t.value=a}catch(e){}}async function p(){if(!e.selectedOrgId)return;let a={org_id:e.selectedOrgId,page:l.value.current,size:l.value.pageSize};\"\"!==o.projectId&&(a.pro_id=o.projectId),\"\"!==o.direction&&(a.direction=o.direction),\"\"!==o.module&&(a.type=o.module);try{let{data:e}=await Pu(a);n.value=e?.tasks||[],l.value.total=e?.total||0}catch(e){}}let m=[{width:130,title:r(\"web.fh_sync.file.progress.sync_time\"),dataIndex:\"time\",key:\"time\",ellipsis:!0,slots:{customRender:\"time\"}},{width:120,title:r(\"web.fh_sync.file.progress.project_name\"),dataIndex:\"name\",key:\"name\",ellipsis:!0,slots:{customRender:\"name\"}},{width:80,title:r(\"web.fh_sync.file.progress.module\"),dataIndex:\"module\",key:\"module\",ellipsis:!0,slots:{customRender:\"module\"}},{width:130,title:r(\"web.fh_sync.file.progress.transmission_direction\"),dataIndex:\"direction\",key:\"direction\",ellipsis:!0,slots:{customRender:\"direction\"}},{width:130,title:r(\"web.fh_sync.file.progress.fail_reason\"),dataIndex:\"st_error\",key:\"st_error\",ellipsis:!0,slots:{customRender:\"st_error\"}},{width:100,title:r(\"web.fh_sync.file.progress.operate\"),dataIndex:\"\",key:\"operate\",ellipsis:!0,slots:{customRender:\"operate\"}}],h=async()=>{if(!!e.selectedOrgId)try{let{data:a}=await Ph(e.selectedOrgId);a&&a.list&&(i.value=function(e){let a=e.map(({name:e,uuid:a})=>({name:e,uuid:a}));return a.unshift({name:r(\"web.fh_sync.file.progress.all_project\"),uuid:\"\"}),a}(a.list))}catch(e){i.value=[{name:r(\"web.fh_sync.file.progress.all_project\"),uuid:\"\"}]}};async function f(a){if(!!e.selectedOrgId)try{s.value=a,await P_(e.selectedOrgId,a),kr.Z.success(r(\"web.fh_sync.common.sync-success\")),s.value=void 0,p()}catch(e){kr.Z.error(r(\"web.fh_sync.common.sync-fail\")),s.value=void 0}}async function g(){if(!!e.selectedOrgId)try{await S2(`${zB}/organization/${e.selectedOrgId}/task/history?org_id=${e.selectedOrgId}`)}catch(e){}}return(0,p$.bv)(()=>{u(),p(),h()}),{time:d,statusData:t,SyncFileProgressStatusEnum:pN,status:c,columns:m,getSyncFileTypeText:function(e){if(e&&e.type){var a;return ml(F7[e.type],void 0)}return\"\"},failTaskData:n,getSyncFileDirectionText:function(e){if(e&&!(0,ms.isNil)(e.direction)){var a,r;if(e.direction===pM.DirectionThreePartyToFh){;return ml(\"web.fh_sync.file.resource.third_party_to_flight_hub\",void 0)}if(e.direction===pM.DirectionFhToThreeParty){;return ml(\"web.fh_sync.file.resource.flight_hub_to_third_party\",void 0)}}return\"\"},pagination:l,handleTableChange:function(e){e&&(e.current&&(l.value.current=e.current),e.pageSize&&(l.value.pageSize=e.pageSize)),p()},SYNC_FILE_PROGRESS_MODULE_ARR:Pi,selectState:o,antPrefix:p6,FileSyncDirectionType:pM,SYNC_FILE_PROGRESS_DIRECTION_ARR:Po,projectList:i,onSelectChange:function(){p()},getSyncFileProjectNameText:function(e){return e&&e.pro_name?e.pro_name:\"\"},getSyncFileLastSyncTimeText:function(e){return e&&e.created_at?mi().unix(e.created_at).format(\"YYYY-MM-DD HH:mm:ss\"):\"\"},showRetryLoading:function(e){return!(0,ms.isNil)(s.value)&&s.value===e},goRetrySyncFileTask:f,loadingImg:fw,downloadFileHistory:g,fileNameText:function(e){var a;if(!e)return\"\";return`${ml(\"web.fh_sync.file.progress.file_name\",void 0)}: ${e}`},getErrorText:function(e){return e&&!(0,ms.isNil)(e.st_errcode)&&0!==e.st_errcode?bw(e.st_errcode):\"\"}}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"uranus-icon\"),s=(0,p$.up)(\"ASelectOption\"),l=(0,p$.up)(\"UranusSelect\"),d=(0,p$.up)(\"UranusTooltip\"),c=(0,p$.up)(\"UranusTable\");return(0,p$.wg)(),(0,p$.iD)(\"div\",Ms,[(0,p$._)(\"div\",Ml,(0,p$.zw)(e.$t(\"web.fh_sync.file.progress.title\")),1),(0,p$._)(\"div\",Md,[(0,p$._)(\"div\",Mc,[(0,p$._)(\"div\",Mu,(0,p$.zw)(e.$t(\"web.fh_sync.file.progress.last_sync_time\")),1),(0,p$._)(\"div\",Mp,(0,p$.zw)(t.time),1)]),(0,p$._)(\"div\",Mm,[(0,p$._)(\"div\",Mh,(0,p$.zw)(e.$t(\"web.fh_sync.file.progress.sync_status\")),1),t.statusData?.status===t.SyncFileProgressStatusEnum.Running?((0,p$.wg)(),(0,p$.iD)(\"div\",Mf,[(0,p$.Wm)(o,{style:{\"margin-right\":\"4px\"},name:\"loading\",color:\"#2d8cf0\",size:16})])):(0,p$.kq)(\"\",!0),t.statusData?.status===t.SyncFileProgressStatusEnum.Fail?((0,p$.wg)(),(0,p$.iD)(\"div\",Mg,[(0,p$.Wm)(o,{style:{\"margin-right\":\"4px\"},name:\"fh-sync-progress-fail\",size:16})])):(0,p$.kq)(\"\",!0),(0,p$._)(\"div\",M_,(0,p$.zw)(t.status),1)]),(0,p$._)(\"div\",{class:\"download-history\",onClick:a[0]||(a[0]=(...e)=>t.downloadFileHistory&&t.downloadFileHistory(...e))},(0,p$.zw)(e.$t(\"web.fh_sync.file.progress.download\")),1)]),(0,p$._)(\"div\",Mb,[(0,p$._)(\"div\",Mk,[(0,p$._)(\"div\",Mv,(0,p$.zw)(e.$t(\"web.fh_sync.file.progress.latest_fail_data\")),1),(0,p$._)(\"div\",Mz,[(0,p$.Wm)(l,{value:t.selectState.projectId,\"onUpdate:value\":a[1]||(a[1]=e=>t.selectState.projectId=e),size:\"large\",class:\"filter-item\",\"prefix-cls\":t.antPrefix,onChange:t.onSelectChange},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(t.projectList,e=>((0,p$.wg)(),(0,p$.j4)(s,{key:e.uuid,value:e.uuid},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.name),1)]),_:2},1032,[\"value\"]))),128))]),_:1},8,[\"value\",\"prefix-cls\",\"onChange\"]),(0,p$.Wm)(l,{value:t.selectState.module,\"onUpdate:value\":a[2]||(a[2]=e=>t.selectState.module=e),size:\"large\",class:\"filter-item\",\"prefix-cls\":t.antPrefix,onChange:t.onSelectChange},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(t.SYNC_FILE_PROGRESS_MODULE_ARR,a=>((0,p$.wg)(),(0,p$.j4)(s,{key:a.value,value:a.value},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(a.label)),1)]),_:2},1032,[\"value\"]))),128))]),_:1},8,[\"value\",\"prefix-cls\",\"onChange\"]),(0,p$.Wm)(l,{value:t.selectState.direction,\"onUpdate:value\":a[3]||(a[3]=e=>t.selectState.direction=e),size:\"large\",class:\"filter-item\",\"prefix-cls\":t.antPrefix,onChange:t.onSelectChange},{default:(0,p$.w5)(()=>[((0,p$.wg)(!0),(0,p$.iD)(p$.HY,null,(0,p$.Ko)(t.SYNC_FILE_PROGRESS_DIRECTION_ARR,a=>((0,p$.wg)(),(0,p$.j4)(s,{key:a.value,value:a.value},{default:(0,p$.w5)(()=>[(0,p$.Uk)((0,p$.zw)(e.$t(a.label)),1)]),_:2},1032,[\"value\"]))),128))]),_:1},8,[\"value\",\"prefix-cls\",\"onChange\"])])]),(0,p$.Wm)(c,{\"data-source\":t.failTaskData,columns:t.columns,\"row-key\":\"id\",\"table-pagination\":t.pagination,\"show-table-pagination\":!0,onChange:t.handleTableChange},{time:(0,p$.w5)(({record:e})=>[(0,p$._)(\"span\",Mw,[(0,p$.Wm)(d,{theme:\"light\",content:t.getSyncFileLastSyncTimeText(e)},null,8,[\"content\"])])]),name:(0,p$.w5)(({record:e})=>[(0,p$._)(\"span\",My,[(0,p$.Wm)(d,{theme:\"light\",content:t.getSyncFileProjectNameText(e)},null,8,[\"content\"])])]),module:(0,p$.w5)(({record:e})=>[(0,p$._)(\"span\",MS,[(0,p$.Wm)(d,{theme:\"light\",content:t.getSyncFileTypeText(e)},null,8,[\"content\"])])]),direction:(0,p$.w5)(({record:e})=>[(0,p$._)(\"span\",Mj,[(0,p$.Wm)(d,{theme:\"light\",content:t.getSyncFileDirectionText(e)},null,8,[\"content\"])])]),st_error:(0,p$.w5)(({record:e})=>[(0,p$._)(\"span\",MD,[(0,p$.Wm)(d,{theme:\"light\",content:t.getErrorText(e)},null,8,[\"content\"])])]),operate:(0,p$.w5)(({record:a})=>[(0,p$._)(\"span\",MI,[(0,p$.Wm)(d,{theme:\"light\",\"overlay-size\":\"md\"},{title:(0,p$.w5)(()=>[(0,p$._)(\"div\",MA,(0,p$.zw)(t.fileNameText(a?.file_name)),1)]),default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"fh-sync-fail-detail\",size:16,color:\"#268AFF\"})]),_:2},1024),t.showRetryLoading(a.id)?((0,p$.wg)(),(0,p$.iD)(\"div\",MC,[(0,p$._)(\"img\",{style:{width:\"20px\",height:\"20px\"},src:t.loadingImg},null,8,Mx)])):((0,p$.wg)(),(0,p$.iD)(\"div\",{key:1,class:\"retry-btn\",onClick:e=>t.goRetrySyncFileTask(a.id)},[(0,p$.Wm)(d,{theme:\"light\",\"auto-width\":!0,content:e.$t(\"web.fh_sync.file.progress.operate_retry\")},{default:(0,p$.w5)(()=>[(0,p$.Wm)(o,{name:\"refresh\",color:\"#268AFF\",size:14})]),_:1},8,[\"content\"])],8,MR))])]),_:1},8,[\"data-source\",\"columns\",\"table-pagination\",\"onChange\"])])])}],[\"__scopeId\",\"data-v-7b4448b8\"]]),MF=(0,mF.default)({name:\"FhSyncFile\",components:{FhSyncNav:Tu,BucketConfigEdit:Pb,BucketConfigDisplay:PH,FileResourceSyncConfig:Mo,FileTaskProgress:ME,UranusSpin:fj},props:{},setup(e,{emit:a}){let r=(0,p9.tv)(),n=t,{t:i}=(0,p7.QT)(),o=(0,p$.iH)(!1),s=(0,p$.iH)(),l=(0,p$.iH)(!1),d=(0,p$.Fl)(()=>{if(\"string\"==typeof n.$route.params.editOrgId)return n.$route.params.editOrgId}),c=async()=>{if(!!d.value)try{let{data:e}=await zK(d.value,pR.File);e&&e.type===pR.File&&e.storage&&(s.value=e.storage)}catch(e){}},u=async e=>{try{let{data:a}=await zW(e);c(),o.value=!1}catch(e){}},p=(0,p$.Fl)(()=>o.value||(0,ms.isNil)(s.value));return(0,p$.bv)(async()=>{l.value=!1,await c(),l.value=!0}),{onBack:()=>{r.push({name:\"fh-sync-dashboard\",params:{editOrgId:d.value}})},SyncBucketTypeEnum:pE,setSyncFileConfig:u,bucketInfoDisplay:s,openEditConfig:()=>{o.value=!0},isEditingBucket:o,showEditBucket:p,selectedOrgId:d,hasFetchedData:l,onCancelEditConfig:function(){o.value=!1}}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"FhSyncNav\"),s=(0,p$.up)(\"BucketConfigEdit\"),l=(0,p$.up)(\"BucketConfigDisplay\"),d=(0,p$.up)(\"FileResourceSyncConfig\"),c=(0,p$.up)(\"FileTaskProgress\"),u=(0,p$.up)(\"UranusSpin\");return(0,p$.wg)(),(0,p$.iD)(\"div\",TJ,[(0,p$.Wm)(o,{title:e.$t(\"web.fh_sync.data_synchronization.title\"),onBack:t.onBack},null,8,[\"title\",\"onBack\"]),(0,p$.Wm)(u,{spinning:!t.hasFetchedData,tip:e.$t(\"common.data.loading\"),theme:\"light\"},{default:(0,p$.w5)(()=>[(0,p$._)(\"div\",TN,[t.hasFetchedData?((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:0},[t.showEditBucket?((0,p$.wg)(),(0,p$.iD)(\"div\",Tq,[(0,p$.Wm)(s,{\"selected-org-id\":t.selectedOrgId,\"bucket-info-display\":t.bucketInfoDisplay,onSaveConfig:t.setSyncFileConfig,onCancelEditConfig:t.onCancelEditConfig},null,8,[\"selected-org-id\",\"bucket-info-display\",\"onSaveConfig\",\"onCancelEditConfig\"])])):((0,p$.wg)(),(0,p$.iD)(p$.HY,{key:1},[(0,p$._)(\"div\",TO,[(0,p$.Wm)(l,{\"bucket-info-display\":t.bucketInfoDisplay,onEditBucketConfit:t.openEditConfig},null,8,[\"bucket-info-display\",\"onEditBucketConfit\"])]),(0,p$._)(\"div\",TH,[(0,p$.Wm)(d,{\"selected-org-id\":t.selectedOrgId},null,8,[\"selected-org-id\"])]),(0,p$._)(\"div\",TG,[(0,p$.Wm)(c,{\"selected-org-id\":t.selectedOrgId},null,8,[\"selected-org-id\"])])],64))],64)):(0,p$.kq)(\"\",!0)])]),_:1},8,[\"spinning\",\"tip\"])])}],[\"__scopeId\",\"data-v-e8b59758\"]]),MT=e=>((0,p$.dD)(\"data-v-8e5942d6\"),e=e(),(0,p$.Cn)(),e),MP={class:\"fh-sync-oauth-wrapper uranus-scrollbar\"},MM={class:\"content-wrapper\"},ML={class:\"fh-sync-oauth-content-item\"},MJ={class:\"fh-sync-oauth-config-display\"},MN={class:\"title\"},Mq={class:\"form-wrapper\"},MO={class:\"form-item\"},MH={class:\"form-item-title\"},MG={class:\"form-content\"},MU={class:\"form-item\"},MV=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"Client ID:\",-1)),MB={class:\"form-content\"},MK={class:\"form-item\"},MW=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"Client Secret:\",-1)),MZ={class:\"form-content\"},M$={class:\"form-item\"},MY=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"Auth URL:\",-1)),MQ={class:\"form-content\"},MX={class:\"form-item\"},M0=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"Token URL:\",-1)),M1={class:\"form-content\"},M2={class:\"form-item\"},M3=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"User URL:\",-1)),M4={class:\"form-content\"},M6={class:\"form-item\"},M5=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"User ID Key:\",-1)),M8={class:\"form-content\"},M9={class:\"form-item\"},M7=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"User Account Key:\",-1)),Le={class:\"form-content\"},La={class:\"form-item\"},Lr=MT(()=>(0,p$._)(\"span\",{class:\"form-item-title\"},\"User Redirect URL:\",-1)),Lt={class:\"form-content\"},Ln=(0,mF.default)({name:\"OauthConfig\",components:{FhSyncNav:Tu},props:{},emits:[\"edit-bucket-confit\"],setup(e,{emit:a}){let r=t,n=(0,p9.tv)(),i=(0,p$.iH)(),o=(0,p$.Fl)(()=>{if(\"string\"==typeof r.$route.params.editOrgId)return r.$route.params.editOrgId}),s=async()=>{if(!!o.value)try{let{data:e}=await zK(o.value,pR.Oauth);e&&e.type===pR.Oauth&&e.oauth&&(i.value=e.oauth)}catch(e){}},l=(0,p$.Fl)(()=>{if(!(0,ms.isNil)(i.value?.enable)){var e,a;if(i.value?.enable){;return ml(\"web.fh_sync.common.status_open\",void 0)}return ml(\"web.fh_sync.common.status_close\",void 0)}return\"\"});return(0,p$.bv)(()=>{s()}),{onBack:()=>{n.push({name:\"fh-sync-dashboard\",params:{editOrgId:o.value}})},oauthData:i,SyncBucketTypeEnum:pE,statusText:l,isNil:ms.isNil}}},[[\"render\",function(e,a,r,t,n,i){let o=(0,p$.up)(\"FhSyncNav\");return(0,p$.wg)(),(0,p$.iD)(\"div\",MP,[(0,p$.Wm)(o,{title:e.$t(\"web.fh_sync.oauth.three_party_title\"),onBack:t.onBack},null,8,[\"title\",\"onBack\"]),(0,p$._)(\"div\",MM,[(0,p$._)(\"div\",ML,[(0,p$._)(\"div\",MJ,[(0,p$._)(\"div\",MN,(0,p$.zw)(e.$t(\"web.fh_sync.oauth.config\")),1),(0,p$._)(\"div\",Mq,[(0,p$._)(\"div\",MO,[(0,p$._)(\"span\",MH,(0,p$.zw)(`${e.$t(\"web.fh_sync.oauth.status\")}:`),1),(0,p$._)(\"span\",MG,(0,p$.zw)(t.statusText),1)]),(0,p$._)(\"div\",MU,[MV,(0,p$._)(\"span\",MB,(0,p$.zw)(t.oauthData?.client_id||\"\"),1)]),(0,p$._)(\"div\",MK,[MW,(0,p$._)(\"span\",MZ,(0,p$.zw)(t.oauthData?.client_secret||\"\"),1)]),(0,p$._)(\"div\",M$,[MY,(0,p$._)(\"span\",MQ,(0,p$.zw)(t.oauthData?.auth_url||\"\"),1)]),(0,p$._)(\"div\",MX,[M0,(0,p$._)(\"span\",M1,(0,p$.zw)(t.oauthData?.token_url||\"\"),1)]),(0,p$._)(\"div\",M2,[M3,(0,p$._)(\"span\",M4,(0,p$.zw)(t.oauthData?.user_url||\"\"),1)]),(0,p$._)(\"div\",M6,[M5,(0,p$._)(\"span\",M8,(0,p$.zw)(t.oauthData?.user_id_key||\"\"),1)]),(0,p$._)(\"div\",M9,[M7,(0,p$._)(\"span\",Le,(0,p$.zw)(t.oauthData?.user_account_key||\"\"),1)]),(0,p$._)(\"div\",La,[Lr,(0,p$._)(\"span\",Lt,(0,p$.zw)(t.isNil(t.oauthData?.use_redirect_url)?\"\":t.oauthData?.use_redirect_url),1)])])])])])])}],[\"__scopeId\",\"data-v-8e5942d6\"]]),Li={class:\"forward-stream-wrapper uranus-scrollbar\"},Lo={class:\"content-wrapper\"},Ls={class:\"table-header\"},Ll={class:\"btn-wrapper\"},Ld={class:\"filter-wrapper\"},Lc={key:0},Lu={key:0,class:\"drone-line\"},Lp={class:\"stream-table-wrapper\"},Lm={class:\"state-render-wrapper\"},Lh={style:{\"max-width\":\"230px\"}},Lf={class:\"flex-align-center\",style:{\"max-width\":\"190px\"}},Lg={class:\"stream-enable-title-render-wrapper\"},L_={style:{\"margin-right\":\"4px\"}},Lb={key:0};(oh=pO||(pO={})).Rtmp=\"rtmp\",oh.Gb28281=\"gb28181\",(of=pH||(pH={}))[of.Idle=1]=\"Idle\",of[of.Running=2]=\"Running\",of[of.Fail=3]=\"Fail\",(og=pG||(pG={})).Open=\"open\",og.Close=\"close\",(o_=pU||(pU={}))[o_.New=0]=\"New\",o_[o_.Edit=1]=\"Edit\",o_[o_.Copy=2]=\"Copy\",(ob=pV||(pV={})).Ir=\"ir\",ob.Wide=\"wide\",ob.Zoom=\"zoom\",ob.Thermal=\"thermal\",ob.Empty=\"\",(ok=pB||(pB={})).DockCamera=\"dockCamera\",ok.Wide=\"wide\",ok.Zoom=\"zoom\",ok.Ir=\"ir\",ok.DroneFpv=\"droneFpv\";let Lk={[pH.Idle]:\"web.fh_sync.forward_stream.status_idle\",[pH.Running]:\"web.fh_sync.forward_stream.status_open\",[pH.Fail]:\"web.fh_sync.forward_stream.status_fail\"};let Lv={[pB.DockCamera]:ml(\"web.fh_sync.forward_stream.dock_camera\",void 0),[pB.Wide]:ml(\"web.fh_sync.forward_stream.load_wide_angle\",void 0),[pB.Zoom]:ml(\"web.fh_sync.forward_stream.load_zoom\",void 0),[pB.Ir]:ml(\"web.fh_sync.forward_stream.load_infrared\",void 0),[pB.DroneFpv]:ml(\"web.fh_sync.forward_stream.fpv_camera\",void 0)},Lz={[gI.EA210]:{[pB.DockCamera]:{cameraKey:gI.EA210TopCamera,video_type:pV.Empty}},[gI.M30]:{[pB.DroneFpv]:{cameraKey:gI.FPV,video_type:pV.Empty},[pB.Wide]:{cameraKey:gI.M30Camera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M30Camera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M30Camera,video_type:pV.Ir}},[gI.M30T]:{[pB.DroneFpv]:{cameraKey:gI.FPV,video_type:pV.Empty},[pB.Wide]:{cameraKey:gI.M30TCamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M30TCamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M30TCamera,video_type:pV.Ir}},[gI.EA220]:{[pB.DockCamera]:{cameraKey:gI.EA220ExteriorCamera,video_type:pV.Empty}},[gI.M10E]:{[pB.Wide]:{cameraKey:gI.M10ECamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M10ECamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M10ECamera,video_type:pV.Ir}},[gI.M10T]:{[pB.Wide]:{cameraKey:gI.M10TCamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M10TCamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M10TCamera,video_type:pV.Ir}},[gI.EA230]:{[pB.DockCamera]:{cameraKey:gI.EA230TopCamera,video_type:pV.Empty}},[gI.M4D]:{[pB.Wide]:{cameraKey:gI.M4DCamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M4DCamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M4DCamera,video_type:pV.Ir}},[gI.M4TD]:{[pB.Wide]:{cameraKey:gI.M4TDCamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M4TDCamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M4TDCamera,video_type:pV.Ir}},[gI.M3E]:{[pB.Wide]:{cameraKey:gI.M3ECamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M3ECamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M3ECamera,video_type:pV.Thermal}},[gI.M3T]:{[pB.Wide]:{cameraKey:gI.M3TCamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M3TCamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M3TCamera,video_type:pV.Thermal}},[gI.M3TA]:{[pB.Wide]:{cameraKey:gI.M3TACamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M3TACamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M3TACamera,video_type:pV.Thermal}},[gI.M4E]:{[pB.Wide]:{cameraKey:gI.M4ECamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M4ECamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M4ECamera,video_type:pV.Thermal}},[gI.M4T]:{[pB.Wide]:{cameraKey:gI.M4TCamera,video_type:pV.Wide},[pB.Zoom]:{cameraKey:gI.M4TCamera,video_type:pV.Zoom},[pB.Ir]:{cameraKey:gI.M4TCamera,video_type:pV.Thermal}}},Lw={[gI.EA210]:[pB.DockCamera],[gI.M30]:[pB.DroneFpv,pB.Wide,pB.Zoom],[gI.M30T]:[pB.DroneFpv,pB.Wide,pB.Zoom,pB.Ir],[gI.EA220]:[pB.DockCamera],[gI.M10E]:[pB.Wide,pB.Zoom],[gI.M10T]:[pB.Wide,pB.Zoom,pB.Ir],[gI.EA230]:[pB.DockCamera],[gI.M4D]:[pB.Wide,pB.Zoom],[gI.M4TD]:[pB.Wide,pB.Zoom,pB.Ir],[gI.M3E]:[pB.Wide,pB.Zoom],[gI.M3T]:[pB.Wide,pB.Zoom,pB.Ir],[gI.M3TA]:[pB.Wide,pB.Zoom,pB.Ir],[gI.M4E]:[pB.Wide,pB.Zoom],[gI.M4T]:[pB.Wide,pB.Zoom,pB.Ir]},Ly=[gI.M300,gI.PM431,gI.PM440];let LS=[{label:ml(\"web.fh_sync.forward_stream.all_forwarding_type\",void 0),value:\"\"},{label:\"RTMP\",value:pO.Rtmp},{label:\"GB28181\",value:pO.Gb28281}];let Lj=[{label:ml(\"web.fh_sync.forward_stream.switch\",void 0),value:\"\"},{label:ml(\"web.fh_sync.forward_stream.switch_open\",void 0),value:pG.Open},{label:ml(\"web.fh_sync.forward_stream.switch_close\",void 0),value:pG.Close}],LD={key:0,class:\"submit-info-tip loading-tips\"},LI=[\"src\"],LA={class:\"custom-label\"},LC={class:\"custom-label\"},Lx={class:\"custom-label\"},LR={class:\"custom-label\"},LE={class:\"custom-label\"},LF={class:\"custom-label\"},LT={class:\"custom-label\"},LP={class:\"custom-label\"},LM={key:0},LL={key:0,class:\"drone-line\"},LJ={key:0,style:{\"margin-top\":\"12px\"}},LN={class:\"custom-label\"},Lq={class:\"dot-before\"},LO={class:\"dot-before\"},LH={style:{\"margin-left\":\"20px\"}},LG={class:\"dot-before\"},LU={class:\"dot-before\"},LV=(0,pY.Q_)(\"forwardStreamStore\",{state:()=>({configModalVisible:!1,modalDefaultConfig:null,deviceSnMap:{},deviceDisplayList:[],streamConvertersList:[],modalType:pU.New,modalInitId:null,selectedOrgId:void 0}),actions:{updateSelectedOrgId(e){this.selectedOrgId=e},updateModalType(e){this.modalType=e},updateModalInitId(e){this.modalInitId=e},updateConfigModalVisible(e){this.configModalVisible=e,!e&&this.cleanModalDefaultConfig()},editConfig(e){this.modalDefaultConfig=e,this.modalInitId=e.uuid,this.modalType=pU.Edit,this.updateConfigModalVisible(!0)},copyConfig(e){this.modalDefaultConfig=e,this.modalInitId=e.uuid,this.modalType=pU.Copy,this.updateConfigModalVisible(!0)},cleanModalDefaultConfig(){this.modalDefaultConfig=null,this.modalInitId=null,this.modalType=pU.New},updateDeviceSnMap(e){this.deviceSnMap=e},updateDeviceDisplayList(e){this.deviceDisplayList=e},updateStreamConvertersList(e){this.streamConvertersList=e},getOriginalSn(e){return this.deviceSnMap[e]},getSelectedIndexBySn(e){return Object.keys(this.deviceSnMap).find(a=>this.deviceSnMap[a]===e)}}});function LB(e,a,r){if(e)return pB.DockCamera;switch(a){case pV.Ir:case pV.Thermal:return pB.Ir;case pV.Wide:return pB.Wide;case pV.Zoom:return pB.Zoom;default:return(()=>{if(!(0,ms.isNil)(r)){if(sx.FPV===Number(r.split(\"-\")[0]))return pB.DroneFpv}})()}}function LK(e){return!(0,ms.isNil)(e)&&\"\"!==e&&Ly.includes(e)}function LW(e){let a=e?.split(\"-\"),r=\"I\";if(a&&3===a.length){let e=a?.[2];\"2\"===e&&(r=\"II\"),\"3\"===e&&(r=\"III\")}return r}let LZ=gu.Group,L$=fk.Z.Option,LY=go.ZP.Group,LQ=(0,p$.aZ)({name:\"StreamNewConfigModal\",components:{UranusModal:fX,ARadioGroup:LY,ACheckbox:gv.Z,RadioGroup:LZ,AInput:fu.Z,FormItem:xn,UranusIcon:mL,UranusTooltip:hw,UranusCustomInput:fh,UranusButton:m0,UranusRadio:gu,UranusSelect:fA,ASelectOption:L$,Form:xo},emits:[\"close\",\"config-updated\"],setup(e,{emit:a}){var r,t,n,i,o,s,l,d,c,u,p,m,h,f,g,_,b,k,v;let z;let w=LV(),y=ky(cm.FH_SYNC_FORWARDING_STREAM_GB_PROTOCOL),S=(0,p$.iH)([]),j=(0,p$.Fl)(()=>w.configModalVisible),D=(0,p$.Fl)(()=>{var e,a,r;switch(w.modalType){case pU.Copy:;return ml(\"web.fh_sync.forward_stream.copy_forward_channel\",void 0);case pU.Edit:;return ml(\"web.fh_sync.forward_stream.edit_forward_channel\",void 0);case pU.New:default:;return ml(\"web.fh_sync.forward_stream.create_forward_channel\",void 0)}}),I=(0,p$.iH)(!1),A=(0,p$.iH)({}),C=(0,p$.iH)(!1),x=(0,p$.iH)(\"\");let R=(0,p$.qj)({converterName:ml(\"web.fh_sync.forward_stream.chanel\",void 0)+mi()().format(\"YYYY-MM-DD-HH-mm-ss\"),schema:pO.Rtmp,gb28281SchemaOption:{server_ip:void 0,server_port:void"
}