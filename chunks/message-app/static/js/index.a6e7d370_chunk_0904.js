{
  "metadata": {
    "source_file": "message-app\\static\\js\\index.a6e7d370.js",
    "chunk_index": 904,
    "total_chunks": 904,
    "chunk_size": 73636,
    "word_count": 509,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:51.619Z"
  },
  "content": "o=(0,hC.up)(\"OberonIcon\"),s=(0,hC.up)(\"DeviceCard\"),l=(0,hC.up)(\"SimpleEmpty\"),d=(0,hC.up)(\"OberonSpin\");return(0,hC.wg)(),(0,hC.iD)(\"div\",IB,[(0,hC._)(\"div\",IV,[(0,hC._)(\"span\",null,(0,hC.zw)(e.$t(\"web.auto_workflow_alarm.choose_drone_title_text\")),1),(0,hC.Wm)(o,{name:\"aec-reselect\",size:16,class:(0,hC.C_)({refresh:e.loading}),color:\"var(--color-blue-5)\",onClick:e.clickRefresh},null,8,[\"class\",\"onClick\"])]),(0,hC.Wm)(d,{show:e.showLoading,class:\"spin-loading\",description:\"\"},{default:(0,hC.w5)(()=>[e.renderDeviceList.length?((0,hC.wg)(),(0,hC.iD)(\"div\",IU,[((0,hC.wg)(!0),(0,hC.iD)(hC.HY,null,(0,hC.Ko)(e.renderDeviceList,a=>((0,hC.wg)(),(0,hC.j4)(s,{key:a.index,device:a,\"current-host-hms-detail\":e.hmsDataMap?.[a.host?.device_sn],position:e.position,\"is-selected\":e.airportSn===a.airport?.device_sn,onSelected:e.handleSelect},null,8,[\"device\",\"current-host-hms-detail\",\"position\",\"is-selected\",\"onSelected\"]))),128))])):((0,hC.wg)(),(0,hC.j4)(l,{key:1,\"icon-color\":\"rgba(255,255,255,0.25)\",title:e.$t(\"web.auto_workflow_alarm.choose_drone_no_data_text\")},null,8,[\"title\"]))]),_:1},8,[\"show\"]),e.isMore!==e.MoreDeviceEnum.NONE?((0,hC.wg)(),(0,hC.iD)(\"div\",{key:0,class:\"get-more\",onClick:a[0]||(a[0]=(...a)=>e.handleToggle&&e.handleToggle(...a))},[(0,hC.Uk)((0,hC.zw)(e.renderMoreText)+\" \",1),(0,hC.Wm)(o,{name:\"aec-arrow-down\",size:16,style:(0,hC.j5)({transform:e.isMore===e.MoreDeviceEnum.OPEN?\"rotate(180deg)\":\"\"})},null,8,[\"style\"])])):(0,hC.kq)(\"\",!0)])}],[\"__scopeId\",\"data-v-454835ca\"]]);var CP=r(\"38467\");let CM=(0,yi.Q_)(\"auto-alarm\",()=>{let e=new Map;return{setCache:function(a,r){e.set(a,r)},getCache:function(a){return e.get(a)},hasCache:function(a){return e.has(a)},cleanCache:function(a){return e.delete(a)}}}),CL=(0,hC.aZ)({name:\"AutomaticAlarm\",components:{BaseNotification:b3,AutoAlarmNotificationContent:Iq,AutoAlarmNotificationChooseDevice:CT,AutoAlarmNotificationFooter:IG,OberonSpin:jY},props:{businessData:{type:Object,default:()=>({})},businessPriority:{type:Number,default:()=>s9.NORMAL},isInList:{type:Boolean,default:!1}},emits:[\"close\"],setup(e,{emit:a}){let r=function(){return n}(),t=Se(),{handleRecenter:i}=function(e){let{recenterMap:a}=_l(),r=window.location.hash.replace(\"#/\",\"\");return{handleRecenter:function(a){let{longitude:t,latitude:n,projectId:i,orgId:o,jumpPage:s=!0}=a;if(r!==Ib&&s){localStorage.setItem(I_,JSON.stringify({longitude:t,latitude:n})),i&&o&&!function(e){let{orgId:a,projectId:r}=e;_G(`/organization/${a}/project/${r}#/team`)}({projectId:i,orgId:o});return}e.main.next({from:\"message-app\",label:\"message-box-recenter\",data:{longitude:t,latitude:n}})},recenterToTeamMap:function(){let t=localStorage.getItem(I_);if(r===Ib){if(t){a(JSON.parse(t)),localStorage.removeItem(I_);return}e.main.subscribe(e=>{\"message-app\"===e.from&&\"message-box-recenter\"===e.label&&a(e.data)})}}}}(r.$pager),o=CM(),s=(0,hC.iH)(!1),l=(0,hC.iH)(!1),d=(0,hC.iH)(null),c=(0,hC.iH)(!1),u=(0,hC.iH)(!1),p=(0,hC.iH)(\"\"),m=(0,hC.iH)(\"\"),h=(0,hC.iH)(\"\"),f=(0,hC.iH)(!1),g=(0,hC.iH)(\"\"),_=(0,hC.iH)(\"\"),b=(0,hC.iH)(\"\"),k=(0,hC.iH)(null),v=(0,hC.iH)({}),z=(0,hC.iH)(!1),w=(0,hC.iH)({longitudeText:\"\",latitudeText:\"\",text:\"\"}),y=(0,hC.Fl)(()=>e.businessData?.aggregated_info?.[0]?.metadata?.template_params??{}),S=(0,hC.iH)(!1),j=(0,hC.Fl)(()=>k.value===c4.WorkflowExecutionWaiting),D=(0,hC.Fl)(()=>(0,hC.h)(IT,{onClose(e){if(A(),e){var r;r={execution_uuid:b.value},window?.$reportStatData?.({type:mY.LatterAction,eventValue:r})}a(\"close\",e)},priority:e.businessPriority,name:v.value.name,level:v.value.level,isDealWithLater:!e.isInList&&j.value,showClose:!f.value,uuid:v.value.workflow_execution_uuid})),{btnGroups:I,clearTimer:A}=function(e){var a,r,t;let{dispatchSn:n,dockSn:i,droneSn:o,status:s,projectId:l,workflowExecutionUuid:d,originMessageParams:c,isSelected:u,orgId:p,isUnBind:m,useAutoDispatch:h,data:f,refresh:g,afterDispatch:_,afterCancelDispatch:b,emits:k}=e,v=(0,CP.U)(),z=CM(),w=(0,hC.iH)([]),y=(0,hC.iH)(20),S=null;function j(){return w.value.find(e=>e.key===E.key)}function D(){if(S){clearInterval(S),S=null;let e=j();if(e)e.text=_b(\"web.auto_workflow_alarm.button_dispatch_text1\",{seconds:\"\"})}}function I(){z.cleanCache(d.value)}async function A(e){D();try{e=Object.assign({ignoreCodeJudgment:!1,autoJumpToCockpit:!0},e),w.value[1].loading=!0;let a=await Iw(l.value,{execution_uuid:d.value,params:JSON.stringify({...c.value,sn:i.value,drone_sn:o.value}),launch_type:c9.MANUAL},{ignoreCodeJudgment:e.ignoreCodeJudgment});if(0===a.code){I();let r=a.data.status;e.autoJumpToCockpit&&y9.includes(r)&&(x(),k(\"close\")),!y9.includes(r)&&v.warning(_b(\"auto_workflow_dispatch_task_status_change_tip\")),s.value=r,_?.()}}catch(e){console.error(e),s.value=c4.WorkflowExecutionFailed}finally{w.value[1].loading=!1}}async function C(){D();try{w.value[0].loading=!0,await Iy({prj_uuid:l.value,execution_uuid:d.value}),I(),g?.(!0),b?.(),k(\"close\")}catch(e){console.error(e)}finally{w.value[0].loading=!1}}function x(){!function(e){let{orgId:a,projectId:r,droneSn:t,gatewaySn:n,alertId:i}=e;_G(`/organization/${a}/project/${r}?droneSn=${t}&gatewaySn=${n}&alertId=${i}#/cockpit`)}({orgId:p.value,projectId:l.value,droneSn:o.value||f.value?.drone_sn,gatewaySn:i.value||f.value?.sn,alertId:d.value})}let R={key:\"cancelDispatch\",text:_b(\"web.auto_workflow_alarm.button_cancel_text\",void 0),disabled:!1,color:\"#E70102\",ghost:!0,func:C},E={key:\"dispatch\",text:_b(\"web.auto_workflow_alarm.button_dispatch_text1\",{seconds:\"\"}),disabled:!1,type:\"primary\",func:A};let F={key:\"viewDetail\",text:_b(\"web.auto_workflow_alarm.button_dispatch_text2\",void 0),func:function(){k(\"close\"),s.value&&y9.includes(s.value)?x():!function(e){let{orgId:a,projectId:r}=e;_G(`/organization/${a}/project/${r}#/auto-workflow/alert-logs`)}({orgId:p.value,projectId:l.value})},disabled:!1,type:\"tertiary\"};let T={key:\"responseFail\",text:_b(\"web.auto_workflow_alarm.button_response_fail_text\",void 0),disabled:!0};return(0,hC.YP)(()=>[s.value,u.value],()=>{!function(){switch(D(),E.disabled=!u.value,s.value){case c4.WorkflowExecutionWaiting:w.value=[R,E],h.value&&f.value?.level>=f.value?.trigger_level&&n.value&&n.value===i.value&&u.value&&!m.value&&!function(){let e=j();e&&(S=setInterval(()=>{if(e.text=_b(\"web.auto_workflow_alarm.button_dispatch_text1\",{seconds:`（${y.value}s）`}),y.value>0){y.value--;return}A({ignoreCodeJudgment:!0,autoJumpToCockpit:!1}),D()},1e3))}();break;case c4.WorkflowExecutionExecuting:case c4.WorkflowExecutionSuspended:case c4.WorkflowExecutionSuccess:case c4.WorkflowExecutionFailed:w.value=[F],i.value=\"\",o.value=\"\";break;case c4.WorkflowExecutionExpire:w.value=[T]}}()}),(0,hC.SK)(()=>{D()}),{btnGroups:w,clearTimer:D}}({dispatchSn:h,droneSn:m,dockSn:p,status:k,projectId:g,orgId:_,workflowExecutionUuid:b,data:v,originMessageParams:y,isSelected:(0,hC.Fl)(()=>!!p.value),isUnBind:c,useAutoDispatch:(0,hC.Fl)(()=>!e.isInList||z.value),refresh:R,afterDispatch:function(){var e;e={execution_uuid:b.value,device_switch:h.value!==p.value?1:0,recenter_click:S.value?1:0},window?.$reportStatData?.({type:mY.NoticeAction,eventValue:e})},emits:a});async function C(e,a){var r;if(v.value.position=[a,e],r=mQ.WORKFLOW_REVERSE_GEOCODING,(window.$featureGateway||[]).includes(r)){Object.assign(w.value,ID({latitude:e,longitude:a}));return}try{let r=await D3({lat:e,lng:a});w.value.text=r,v.value.positionData=w.value,o.setCache(b.value,v.value)}catch(r){Object.assign(w.value,ID({latitude:e,longitude:a}))}}async function x(a=!1){try{u.value=!0,f.value=e.businessData.is_read;let r=e.businessData?.aggregated_info?.[0]??{};if(Object.keys(r).length){let{metadata:e}=r;g.value=e?.project_uuid??\"\",_.value=e?.organization_uuid??\"\";let t=e?.template_params;if(t){if(h.value=t?.sn??\"\",p.value=t?.sn||t?.selected_sn||\"\",b.value=t?.workflow_execution_uuid??\"\",v.value={...v.value,...t},o.hasCache(b.value)){v.value=o.getCache(b.value),v.value.positionData&&(w.value=v.value.positionData),k.value=v.value.status;return}if(!a){t.latitude&&t.longitude&&await C(t.latitude,t.longitude);return}let e=await Iz(g.value,[b.value]);if(e.length){k.value=e[0].status;let a=e[0]?.params??{};if(v.value.popupTime=wT()(e[0].created_at).valueOf(),v.value.name=e[0].name,v.value={...a,...v.value,status:k.value},a.latitude&&a.longitude){await C(a.latitude,a.longitude);return}o.setCache(b.value,v.value),l.value=!0}}}}catch(e){console.error(e),o.setCache(b.value,v.value)}finally{u.value=!1}}function R(e=!1){if(!!s.value)x(e)}(0,hC.YP)(s,()=>{if(!l.value)x(!0)});async function E(){!z.value&&(z.value=!0,A(),await IC(g.value,{...(0,Ix.Z)(v.value,[\"workflow_execution_uuid\"]),params:{...(0,Ix.Z)(v.value,[\"creator\",\"desc\",\"height\",\"incident_id\",\"latitude\",\"level\",\"longitude\"]),cancel_auto_launch:!0}}))}return{titleVNode:D,alarmContentData:v,projectId:g,dispatchStatus:k,loading:u,workflowExecutionUuid:b,btnGroups:I,showDeviceList:j,chooseDroneRef:d,selectedAirportSn:p,onDeviceSelected:function(e){let{airportSn:a,droneSn:r,latitude:t,longitude:n}=e;p.value=a,m.value=r,t&&n&&i({latitude:t,longitude:n})},resetSelectedSn:function(){p.value=\"\",m.value=\"\"},onBind:function(){c.value&&(c.value=!1),setTimeout(()=>{!c.value&&R()},300)},onUnBind:function(){c.value=!0},recenter:function(){S.value=!0;let e={id:v.value.workflow_execution_uuid,longitude:v.value.longitude,latitude:v.value.latitude,title:v.value.name||\"\",name:v.value.name||\"\",description:v.value?.desc||\"\",created_at:v.value.popupTime||\"\",data:{...v.value,project_uuid:g.value,organization_uuid:_.value,uuid:v.value.workflow_execution_uuid}},a=t.org_uuid,n=t.project_uuid,o=_.value===a,s=g.value===n;if(o&&s&&r.$route.path.includes(\"/team\")){var l,d;l=r,d=e,l.$pager?.mapAlertPinSetterConfig?.next?.({activeType:w4.addPin,data:d}),i({latitude:v.value.latitude,longitude:v.value.longitude,orgId:_.value,projectId:g.value,jumpPage:!1})}else _p(\"uranus-map-alert-pin\",{pins:[]}).pins=[e],_G(`${window.location.origin}/organization/${_.value}/project/${g.value}#/team`)},onDomVisible:function(e){s.value=e},positionData:w,manualCancelAutoDispatch:E}}}),CJ=(0,_V.default)(CL,[[\"render\",function(e,a,r,t,n,i){let o=(0,hC.up)(\"AutoAlarmNotificationContent\"),s=(0,hC.up)(\"AutoAlarmNotificationChooseDevice\"),l=(0,hC.up)(\"AutoAlarmNotificationFooter\"),d=(0,hC.up)(\"OberonSpin\"),c=(0,hC.up)(\"BaseNotification\");return(0,hC.wg)(),(0,hC.j4)(c,{title:e.titleVNode,\"show-close\":!1,\"business-priority\":e.businessPriority,onVisible:e.onDomVisible},{default:(0,hC.w5)(()=>[(0,hC.Wm)(d,{show:e.loading,description:\"\"},{default:(0,hC.w5)(()=>[(0,hC.Wm)(o,{position:e.positionData,description:e.alarmContentData.desc,\"popup-time\":e.alarmContentData.popupTime,onRecenter:e.recenter},null,8,[\"position\",\"description\",\"popup-time\",\"onRecenter\"]),e.showDeviceList?((0,hC.wg)(),(0,hC.j4)(s,{key:0,ref:\"chooseDroneRef\",\"airport-sn\":e.selectedAirportSn,\"project-id\":e.projectId,position:e.alarmContentData.position,\"parent-loading\":e.loading,onSelected:e.onDeviceSelected,onResetSelectedSn:e.resetSelectedSn,onManualSelect:e.manualCancelAutoDispatch},null,8,[\"airport-sn\",\"project-id\",\"position\",\"parent-loading\",\"onSelected\",\"onResetSelectedSn\",\"onManualSelect\"])):(0,hC.kq)(\"\",!0),(0,hC.Wm)(l,{\"btn-groups\":e.btnGroups},null,8,[\"btn-groups\"])]),_:1},8,[\"show\"])]),_:1},8,[\"title\",\"business-priority\",\"onVisible\"])}],[\"__scopeId\",\"data-v-5b5af6cf\"]]),CN=(0,hC.aZ)({name:\"StorageComputingOptimization\",__name:\"StorageComputingOptimization\",props:{businessData:{},autoFold:{type:Boolean,default:!0},businessPriority:{default:s9.HIGH}},emits:[\"action\",\"close\",\"click\"],setup(e,{emit:a}){let r=(0,hC.Fl)(()=>e.businessData?.aggregated_info[0]?.metadata),t=(0,hC.Fl)(()=>e.businessData?.aggregated_info[0]?.created_at),{getBusinessText:n,getBusinessTitle:i,getBusinessLink:o}=SX(),s=i(pL.STORAGE_COMPUTING_OPTIMIZATION),l=(0,hC.Fl)(()=>n(pL.STORAGE_COMPUTING_OPTIMIZATION,r.value));function d(){o(pL.STORAGE_COMPUTING_OPTIMIZATION,r.value),a(\"click\")}function c(){a(\"click\")}function u(){a(\"close\")}return(e,a)=>((0,hC.wg)(),(0,hC.j4)(b3,{\"business-priority\":e.businessPriority,\"auto-fold\":e.businessData.autoFold,title:(0,hC.SU)(s),message:l.value,\"show-close\":!e.businessData.is_read,\"class-name\":e.businessData.className,onClick:c,onClose:u},{default:(0,hC.w5)(()=>[(0,hC.Wm)(S5,{\"popup-time\":t.value,\"business-data\":e.businessData,onDetail:d},null,8,[\"popup-time\",\"business-data\"])]),_:1},8,[\"business-priority\",\"auto-fold\",\"title\",\"message\",\"show-close\",\"class-name\"]))}}),Cq=(0,hC.aZ)({name:\"StorageComputingOptimization\",__name:\"LivePaymentNotIntercepted\",props:{businessData:{},autoFold:{type:Boolean,default:!0},businessPriority:{default:s9.HIGH}},emits:[\"action\",\"close\",\"click\"],setup(e,{emit:a}){let r=(0,hC.Fl)(()=>e.businessData?.aggregated_info[0]?.metadata),t=(0,hC.Fl)(()=>e.businessData?.aggregated_info[0]?.created_at),{getBusinessText:n,getBusinessTitle:i,getBusinessLink:o}=SX(),s=i(pL.LIVE_PAYMENT_NOT_INTERCEPTED),l=(0,hC.Fl)(()=>n(pL.LIVE_PAYMENT_NOT_INTERCEPTED,r.value));function d(){o(pL.LIVE_PAYMENT_NOT_INTERCEPTED,r.value),a(\"click\")}function c(){a(\"click\")}function u(){a(\"close\")}return(e,a)=>((0,hC.wg)(),(0,hC.j4)(b3,{\"business-priority\":e.businessPriority,\"auto-fold\":e.businessData.autoFold,title:(0,hC.SU)(s),message:l.value,\"show-close\":!e.businessData.is_read,\"class-name\":e.businessData.className,onClick:c,onClose:u},{default:(0,hC.w5)(()=>[(0,hC.Wm)(S5,{\"popup-time\":t.value,\"business-data\":e.businessData,onDetail:d},null,8,[\"popup-time\",\"business-data\"])]),_:1},8,[\"business-priority\",\"auto-fold\",\"title\",\"message\",\"show-close\",\"class-name\"]))}}),CO=(0,hC.aZ)({name:\"AircraftLandOutsideNotify\",__name:\"AircraftLandOutsideNotify\",props:{businessData:{},autoFold:{type:Boolean,default:!0},businessPriority:{default:s9.HIGH}},emits:[\"close\",\"click\"],setup(e,{emit:a}){let r=CY(),t=(0,hC.iH)({}),n=(0,hC.Fl)(()=>e.businessData?.aggregated_info[0]?.created_at),{getBusinessText:i,getBusinessTitle:o,getBusinessLink:s,getDeviceData:l}=SX(),d=o(pL.AIRCRAFT_LAND_OUTSIDE_NOTIFY),c=(0,hC.Fl)(()=>i(pL.AIRCRAFT_LAND_OUTSIDE_NOTIFY,t.value));function u(){s(pL.AIRCRAFT_LAND_OUTSIDE_NOTIFY,t.value)}function p(){a(\"click\")}function m(){a(\"close\")}return(0,hC.YP)(()=>e.businessData?.aggregated_info,e=>{if(e[0]?.metadata){let a=l(pL.AIRCRAFT_LAND_OUTSIDE_NOTIFY,e[0]?.metadata,r);t.value={...a,...e[0]?.metadata}}},{immediate:!0}),(e,a)=>((0,hC.wg)(),(0,hC.j4)(b3,{\"business-priority\":e.businessPriority,\"auto-fold\":e.businessData.autoFold,title:(0,hC.SU)(d),message:c.value,\"show-close\":!e.businessData.is_read,\"class-name\":e.businessData.className,onClick:p,onClose:m},{default:(0,hC.w5)(()=>[(0,hC.Wm)(S5,{\"popup-time\":n.value,\"business-data\":e.businessData,onDetail:u},null,8,[\"popup-time\",\"business-data\"])]),_:1},8,[\"business-priority\",\"auto-fold\",\"title\",\"message\",\"show-close\",\"class-name\"]))}}),CH=(0,hC.aZ)({name:\"PackageUpgrade\",__name:\"PackageUpgrade\",props:{businessData:{},autoFold:{type:Boolean,default:!0},businessPriority:{default:s9.NORMAL}},emits:[\"action\",\"close\",\"click\"],setup(e,{emit:a}){let r=(0,hC.Fl)(()=>e.businessData?.aggregated_info[0]?.created_at),{getBusinessTitle:t}=SX(),n=t(pL.PACKAGE_UPGRADE),i=(0,hC.Fl)(()=>(0,hC.h)(\"div\",CK.map((e,a)=>(0,hC.h)(\"div\",{key:a},_b(e)))));function o(){a(\"click\")}function s(){a(\"close\")}return(e,a)=>((0,hC.wg)(),(0,hC.j4)(b3,{\"business-priority\":e.businessPriority,\"auto-fold\":e.businessData.autoFold,title:(0,hC.SU)(n),message:i.value,\"show-close\":!e.businessData.is_read,\"class-name\":e.businessData.className,onClick:o,onClose:s},{default:(0,hC.w5)(()=>[(0,hC.Wm)(S5,{\"popup-time\":r.value,\"is-to-detail\":!1},null,8,[\"popup-time\"])]),_:1},8,[\"business-priority\",\"auto-fold\",\"title\",\"message\",\"show-close\",\"class-name\"]))}}),CG={[pL.AIR_SENSE_WARNING]:S9,[pL.C6_ESCAPE_AREA]:S8,[pL.APPROACHING_CV_BOUNDARY]:S7,[pL.RTH_OBSTACLE_AVOIDANCE]:je,[pL.TRAFFIC_REMINDER]:js,[pL.HANGAR_OPEN_WARNING]:jc,[pL.BIRDCAGE_OPEN_TIP]:ju,[pL.STANDARD_VERSION_TIP]:jp,[pL.PASSWORD_CHANGE_TIP]:jm,[pL.LICENSE_LIMIT_TIP]:jh,[pL.LICENSE_EXPIRE_TIP]:jf,[pL.PACKAGE_EXPIRATION]:jg,[pL.PACKAGE_HAS_EXPIRED]:j_,[pL.TRIAL_VERSION]:jw,[pL.FIRMWARE_UPGRADE]:jv,[pL.NPS_QUESTIONNAIRE]:jz,[pL.PRIVATE_PROMETHEUS]:jy,[pL.MAP_ALERT]:CJ,[pL.STORAGE_COMPUTING_OPTIMIZATION]:CN,[pL.LIVE_PAYMENT_NOT_INTERCEPTED]:Cq,[pL.AIRCRAFT_LAND_OUTSIDE_NOTIFY]:CO,[pL.PACKAGE_UPGRADE]:CH};function CB(e){return CG[e]}let CV={1:s9.LOW,2:s9.NORMAL,3:s9.HIGH};function CU(e){return CV[e]||s9.HIGH}let CK=[\"web.message.package_upgrade_desc_intro\",\"web.message.package_upgrade_desc_section1_title\",\"web.message.package_upgrade_desc_section1_content\",\"web.message.package_upgrade_desc_section2_title\",\"web.message.package_upgrade_desc_section2_content\",\"web.message.package_upgrade_desc_section3_title\",\"web.message.package_upgrade_desc_section3_content\",\"web.message.package_upgrade_desc_section4_title\",\"web.message.package_upgrade_desc_section4_1_title\",\"web.message.package_upgrade_desc_section4_1_content\",\"web.message.package_upgrade_desc_section4_2_title\",\"web.message.package_upgrade_desc_section4_2_content\",\"web.message.package_upgrade_desc_section4_3_title\",\"web.message.package_upgrade_desc_section4_3_content\",\"web.message.package_upgrade_desc_footer\"];function CW(){return wT()().subtract(14,\"day\").startOf(\"day\").unix()}function CZ(e,a){let r=new Date(e?.aggregated_info?.[0]?.created_at||\"\").getTime();return new Date(a?.aggregated_info?.[0]?.created_at||\"\").getTime()-r}function C$(e){return e?.aggregated_info?.[0]?.metadata?.template_params?.workflow_execution_uuid||\"\"}let CY=(0,yi.Q_)(\"messageCenter\",()=>{let e=Se(),a=(0,hC.iH)(c2.NONE),r=(0,hC.iH)(!1),t=(0,hC.XI)([]),n=(0,hC.XI)([]),i=(0,hC.XI)([]),o=(0,hC.XI)([]),s=(0,hC.iH)(!1),l={sort_by:[cX.PRIORITY]},d=(0,hC.XI)({...l}),c=(0,hC.XI)(new Set),u=(0,hC.XI)(new Set),p=(0,hC.XI)(new Map);function m(e){return e?.name===pL.MAP_ALERT&&C$(e)&&p.value.get(C$(e))||e.gid}let h=null,f=(0,hC.XI)({org_device_info_map:{},project_info_map:{},organization_info_map:{}});function g(e){if(!Array.isArray(e)||0===e.length)return[];let{sort_by:a=[],timeRange:r=null,space_type:t=[],priority:n=[],[SP]:i=[]}=d.value||{};if(e=e.filter(e=>{if(n?.length>0&&!n.includes(e.priority))return!1;if(r?.length===2){let[a,t]=r,n=e?.aggregated_info?.[0]?.created_at;if(!n)return!1;let i=new Date(n).getTime();if(i<a||i>t)return!1}return(!(t?.length>0)||!!t.includes(e.space_type))&&(!(i?.length>0)||(e.aggregated_info?.map(e=>e.metadata?.device_model_key).filter(Boolean)).some(e=>i.includes(e)))}),a?.length>0){let r=a[0];r===cX.CREATE_AT?e=e.sort((e,a)=>CZ(e,a)):r===cX.PRIORITY&&(e=e.sort((e,a)=>{let r=(a.priority||0)-(e.priority||0);return 0===r?CZ(e,a):r}))}return e}function _(e){e&&(d.value=e),t.value=g(n.value),i.value=g(o.value)}async function b(e){try{await Si(e),kS.clear(e),!function(e){let a=n.value.findIndex(a=>m(a)===e);if(-1!==a){let r=n.value[a];r.is_read=!0,n.value=n.value.filter(a=>m(a)!==e),o.value=[r,...o.value]}}(e),_()}catch(e){}}async function k(e){setTimeout(()=>{u.value.add(e),kS.clear(e)})}async function v(){try{if(!e.org_uuid)return;await Si(),kS.clearAll(),n.value.forEach(e=>{e.is_read=!0}),o.value=[...n.value,...o.value],n.value=[],_()}catch(e){}}function z(e){let a={...e,autoFold:!0},r=m(a);kS({gid:r,component:CG[a.name],businessData:a,businessPriority:CU(a.priority),duration:0,onClose(e){if(w(r),e){k(r);return}b(r)}})}function w(e){e&&c.value.delete(e)}function y(e){return e.forEach(e=>{e.autoFold=!1}),e}function S(e){if(!(e.priority!==c0.WARN&&SG.includes(window.location.hash))){var a;a=e,a?.name===pL.MAP_ALERT&&C$(a)&&p.value.set(C$(a),a.gid),c.value.add(m(e)),z(e)}}function j(e){return SB.includes(e?.name)}async function D(e){if(!m(e)||!j(e)||function(e){let a=Se(),r=a.org_uuid,t=e?.organization_uuid;if(r&&t&&r!==t)return!0;let n=SJ[e.name],i=a.organizationRoleInfo?.role;return!!(n&&Array.isArray(n))&&!!(n.length>0)&&!!i&&!n.includes(i)||!1}(e))return;let a=m(e);if(![...n.value,...o.value].find(e=>m(e)===a))await M([e]),e.is_read?o.value=[e,...o.value]:(n.value=[e,...n.value],S(e)),_()}function I(e){e.filter(e=>{let a=m(e);return!c.value.has(a)&&!u.value.has(a)}).forEach(e=>{S(e)})}async function A(){try{let a=e.org_uuid;if(!a)return;let r=await St(a,{is_read:!1,start_time:CW()});return r.data?.list||[]}catch(e){}return[]}async function C(){try{let a=e.org_uuid;if(!a)return;let r=await St(a,{is_read:!0,start_time:CW()});return r.data?.list||[]}catch(e){}return[]}async function x(){try{Promise.allSettled([A(),C()]).then(async([e,a])=>{let r=(\"fulfilled\"===e.status&&e.value||[]).filter(e=>j(e)),i=(\"fulfilled\"===a.status&&a.value||[]).filter(e=>j(e)),s=[...r,...i];await M(s),n.value=y(r),o.value=y(i),_(),I([...t.value].reverse())})}catch(e){}}async function R(){try{s.value=!0,await x()}finally{s.value=!1}}function E(){h&&clearInterval(h),h=setInterval(()=>{x()},18e4)}function F(){h&&(clearInterval(h),h=null)}function T(){F(),kS.clearAll(),n.value=[],t.value=[],o.value=[],i.value=[],s.value=!1,d.value={...l},c.value=new Set,u.value=new Set,p.value=new Map,a.value=c2.NONE,r.value=!1}async function P(){T(),await R(),E()}async function M(e){let a=[],r=[],t=[];if(Array.isArray(e)){e.forEach(e=>{e?.aggregated_info?.length>0&&e.aggregated_info.forEach(e=>{let n=e?.metadata?.device_sn,i=e?.metadata?.gateway_sn;n&&a.push(n),i&&a.push(i);let o=e?.metadata?.project_uuid||e?.metadata?.project_id;o&&r.push(o),e?.metadata?.organization_uuid&&t.push(e?.metadata?.organization_uuid)})});let n=Array.from(new Set(a)),i=Array.from(new Set(r)),o=function(e,a,r){let t=f.value;if(!t||0===Object.keys(t).length)return{shouldFetch:!0,organization_uuids:e,device_sn_list:a,project_uuids:r};let n=a.filter(e=>!t.org_device_info_map?.[e]),i=r.filter(e=>!t.project_info_map?.[e]),o=e.filter(e=>!t.organization_info_map?.[e]);return{shouldFetch:n.length>0||i.length>0||o.length>0,organization_uuids:o,device_sn_list:n,project_uuids:i}}(Array.from(new Set(t)),n,i);if(o.shouldFetch){let e=await Ss({organization_uuids:o.organization_uuids,device_sn_list:o.device_sn_list,project_uuids:o.project_uuids});0===e.code&&!function(e){let a=f.value;f.value={org_device_info_map:{...a.org_device_info_map,...e.org_device_info_map},project_info_map:{...a.project_info_map,...e.project_info_map},organization_info_map:{...a.organization_info_map,...e.organization_info_map}}}(e.data||{})}}}let L=(0,hC.XI)([]),J=(0,hC.iH)(0);return{timeUpdateMark:J,updateTimeUpdateMark:function(){J.value+=1},moreMessageListShowPosition:a,allMessageModalVisible:r,toggleMoreMessageListVisible:e=>{if(e===a.value){a.value=c2.NONE;return}a.value=e},toggleAllMessageModalVisible:()=>{r.value=!r.value},unreadShowList:t,unreadList:n,readShowList:i,readList:o,loading:s,devicesData:f,addNewMessage:D,setMessageRead:b,setAllMessageRead:v,initMessageList:R,filterMessageList:_,startPolling:E,stopPolling:F,setDevicesData:M,resetAllData:T,resetAndReload:P,allDeviceModalKeys:L,setAllDeviceModalKeys:function(e){L.value=e},detectNewMessages:I,triggerMapAlertMessagePopup:function(e){try{let a={gid:e.id||\"\",name:pL.MAP_ALERT,aggregated_info:[{metadata:{template_params:{workflow_execution_uuid:e.data?.uuid}}}]},r=m(a);if(c.value.has(r))return;c.value.add(r);let t={gid:r,name:pL.MAP_ALERT,priority:c0.WARN,space_type:c1.PROJECT,is_read:!1,created_at:new Date().toISOString(),organization_uuid:e.data?.organization_uuid,aggregated_info:[{created_at:new Date().toISOString(),id:_y(),metadata:{template_params:{workflow_execution_uuid:e.data?.uuid},project_uuid:e.data?.project_uuid,organization_uuid:e.data?.organization_uuid}}],autoFold:!0};z(t)}catch(e){console.error(\"Failed to trigger map alert message popup:\",e)}},clearTriggeredPopupId:w,triggeredPopupIds:c}}),CQ={BILLBOARD:{SCALE:1,WIDTH:32,HEIGHT:32,VERTICAL_ORIGIN:\"BOTTOM\",HORIZONTAL_ORIGIN:\"RIGHT\"},LABEL:{FONT:\"14px\",STYLE:\"FILL\",OUTLINE_COLOR:\"#fff\",VERTICAL_ORIGIN:\"BOTTOM\",HORIZONTAL_ORIGIN:\"LEFT\",PIXEL_OFFSET:[0,-12],SCALE:1},HIGHLIGHT:{BILLBOARD_SCALE:1.5,LABEL_SCALE:1.2},DEFAULT:{LABEL_TEXT:_b(\"workflow_cockpit_alert_point\"),HEIGHT:0}},CX=[{},{}],C0=[{fillColor:\"#ff0000\"},{fillColor:\"#9F9F9F\"}],C1=(0,yi.Q_)(\"mapAlertPinSetter\",()=>{let e=(0,hC.iH)(new Map),a=(0,hC.iH)(new Map),r=(0,hC.iH)(null),t=(0,hC.iH)(!1),i=(0,hC.iH)(\"\"),o=(0,hC.iH)(\"\"),s=(0,hC.iH)(\"\"),l=(0,hC.iH)({x:0,y:0}),d=(0,hC.iH)(null),c=(0,hC.iH)(null),{addBillboard:u,addLabel:p,removeElement:m,updateElement:h,recenterElement:f,onHoverEntities:g,onClickEntities:_}=_l(),b=[c4.WorkflowExecutionExpire,c4.WorkflowExecutionSuspended];function k(e){return b.includes(e.data?.status)}function v(e){return k(e)?\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBmaWxsPSJub25lIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgdmlld0JveD0iMCAwIDU2IDU2Ij48Zz48Zz48cGF0aCBkPSJNOC43MDcxMDcsMjcuMjkyOUM4LjMxNjU4MywyNy42ODM0LDguMzE2NTgzLDI4LjMxNjYsOC43MDcxMDcsMjguNzA3MUwyNy4yOTI5LDQ3LjI5MjlDMjcuNjgzNCw0Ny42ODM0LDI4LjMxNjYsNDcuNjgzNCwyOC43MDcxLDQ3LjI5MjlMNDcuMjkyOSwyOC43MDcxQzQ3LjY4MzQsMjguMzE2Niw0Ny42ODM0LDI3LjY4MzQsNDcuMjkyOSwyNy4yOTI5TDI4LjcwNzEsOC43MDcxMDdDMjguMzE2Niw4LjMxNjU4MywyNy42ODM0LDguMzE2NTgzLDI3LjI5MjksOC43MDcxMDdMOC43MDcxMDcsMjcuMjkyOVoiIGZpbGw9IiM1RjVGNUYiIGZpbGwtb3BhY2l0eT0iMSIvPjwvZz48Zz48Zz48cGF0aCBkPSJNMjYuMjcxMjY3LDE4QzI1Ljk4Njk1OCwxOCwyNS43NTk4NjQ2OSwxOC4yMzY3NTMsMjUuNzcxNzAwNiwxOC41MjA4MTVMMjYuMjMwMDM0LDI5LjUyMDhDMjYuMjQxMTkzLDI5Ljc4ODYwMDAwMDAwMDAwMiwyNi40NjE1NTUsMzAsMjYuNzI5NiwzMEwyOS4yNzA0LDMwQzI5LjUzODQ1LDMwLDI5Ljc1ODgxLDI5Ljc4ODYwMDAwMDAwMDAwMiwyOS43Njk5NywyOS41MjA4TDMwLjIyODMsMTguNTIwODE1QzMwLjI0MDE0LDE4LjIzNjc1MywzMC4wMTMwNCwxOCwyOS43Mjg3MywxOEwyNi4yNzEyNjcsMThaIiBmaWxsPSIjRkZGRkZGIiBmaWxsLW9wYWNpdHk9IjEiLz48L2c+PGc+PHJlY3QgeD0iMjYuMjUiIHk9IjMxLjUiIHdpZHRoPSIzLjUiIGhlaWdodD0iMy41IiByeD0iMC41IiBmaWxsPSIjRkZGRkZGIiBmaWxsLW9wYWNpdHk9IjEiLz48L2c+PC9nPjwvZz48L3N2Zz4=\":\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBmaWxsPSJub25lIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgdmlld0JveD0iMCAwIDU2IDU2Ij48Zz48Zz48Zz48cGF0aCBkPSJNOC43MDcxMDcsMjcuMjkyOUM4LjMxNjU4MywyNy42ODM0LDguMzE2NTgzLDI4LjMxNjYsOC43MDcxMDcsMjguNzA3MUwyNy4yOTI5LDQ3LjI5MjlDMjcuNjgzNCw0Ny42ODM0LDI4LjMxNjYsNDcuNjgzNCwyOC43MDcxLDQ3LjI5MjlMNDcuMjkyOSwyOC43MDcxQzQ3LjY4MzQsMjguMzE2Niw0Ny42ODM0LDI3LjY4MzQsNDcuMjkyOSwyNy4yOTI5TDI4LjcwNzEsOC43MDcxMDdDMjguMzE2Niw4LjMxNjU4MywyNy42ODM0LDguMzE2NTgzLDI3LjI5MjksOC43MDcxMDdMOC43MDcxMDcsMjcuMjkyOVoiIGZpbGw9IiNFNzAxMDIiIGZpbGwtb3BhY2l0eT0iMSIvPjwvZz48Zz48Zz48cGF0aCBkPSJNMjYuMjcxMjY3LDE4QzI1Ljk4Njk1OCwxOCwyNS43NTk4NjQ2OSwxOC4yMzY3NTMsMjUuNzcxNzAwNiwxOC41MjA4MTVMMjYuMjMwMDM0LDI5LjUyMDhDMjYuMjQxMTkzLDI5Ljc4ODYwMDAwMDAwMDAwMiwyNi40NjE1NTUsMzAsMjYuNzI5NiwzMEwyOS4yNzA0LDMwQzI5LjUzODQ1LDMwLDI5Ljc1ODgxLDI5Ljc4ODYwMDAwMDAwMDAwMiwyOS43Njk5NywyOS41MjA4TDMwLjIyODMsMTguNTIwODE1QzMwLjI0MDE0LDE4LjIzNjc1MywzMC4wMTMwNCwxOCwyOS43Mjg3MywxOEwyNi4yNzEyNjcsMThaIiBmaWxsPSIjRkZGRkZGIiBmaWxsLW9wYWNpdHk9IjEiLz48L2c+PGc+PHJlY3QgeD0iMjYuMjUiIHk9IjMxLjUiIHdpZHRoPSIzLjUiIGhlaWdodD0iMy41IiByeD0iMC41IiBmaWxsPSIjRkZGRkZGIiBmaWxsLW9wYWNpdHk9IjEiLz48L2c+PC9nPjwvZz48L2c+PC9zdmc+\"}function z(e){return e.title||CQ.DEFAULT.LABEL_TEXT}function w(e){return{longitude:e.longitude,latitude:e.latitude,height:e.height??CQ.DEFAULT.HEIGHT}}function y(e){return void 0===e.height||0===e.height}async function S(e){await m(e.billboard),e.label&&await m(e.label)}async function j(r){!r.id&&(r.id=`pin-${Date.now()}-${Math.random().toString(36).substring(2,11)}`);let t=a.value.get(r.id);if(t){f(t.billboard);return}e.value.set(r.id,r);try{let e=k(r),t=v(r),n=z(r),i=w(r),o=y(r),s=e?CX[1]:CX[0],l=e?C0[1]:C0[0],d=await u({id:r.id,position:i,name:n,image:t,scale:CQ.BILLBOARD.SCALE,width:CQ.BILLBOARD.WIDTH,height:CQ.BILLBOARD.HEIGHT,clampToGround:o,verticalOrigin:CQ.BILLBOARD.VERTICAL_ORIGIN,horizontalOrigin:CQ.BILLBOARD.HORIZONTAL_ORIGIN,disableDepthTestDistance:Number.POSITIVE_INFINITY,...s,...r.data&&{userData:r.data}}),c=await p({position:i,text:n,clampToGround:o,font:CQ.LABEL.FONT,style:CQ.LABEL.STYLE,outlineColor:CQ.LABEL.OUTLINE_COLOR,verticalOrigin:CQ.LABEL.VERTICAL_ORIGIN,horizontalOrigin:CQ.LABEL.HORIZONTAL_ORIGIN,pixelOffset:CQ.LABEL.PIXEL_OFFSET,disableDepthTestDistance:Number.POSITIVE_INFINITY,showBackground:!1,scale:CQ.LABEL.SCALE,...l});if(d){let e={billboard:d};c&&(e.label=c),a.value.set(r.id,e)}return d}catch(a){throw e.value.delete(r.id),a}}async function D(t){if(!t)return;let n=a.value.get(t);if(n)try{await S(n),a.value.delete(t)}catch{}e.value.delete(t),r.value===t&&(r.value=null)}async function I(r){if(!r.id||!e.value.has(r.id))return;let t={...e.value.get(r.id),...r};e.value.set(r.id,t);let n=a.value.get(r.id);if(!!n)try{let e=v(t),a=z(t),r=w(t),i=y(t);await h(n.billboard,{position:r,name:a,image:e,clampToGround:i}),n.label&&await h(n.label,{position:r,text:a,clampToGround:i})}catch{}}async function A(){let t=[];a.value.forEach(e=>{t.push(S(e).catch(()=>{}))}),await Promise.all(t),e.value.clear(),a.value.clear(),r.value=null}async function C(t){if(!t||!e.value.has(t))return;r.value=t;let n=a.value.get(t);if(!!n)try{await h(n.billboard,{scale:CQ.HIGHLIGHT.BILLBOARD_SCALE}),n.label&&await h(n.label,{scale:CQ.HIGHLIGHT.LABEL_SCALE})}catch{}}async function x(e,r=0){if(!e)return;let t=a.value.get(e);if(!!t){r>0&&await new Promise(e=>setTimeout(e,r));try{await f(t.billboard)}catch{}}}function R(e,a){i.value=e.title||\"\",o.value=e.description||\"\",l.value=a,s.value=e?.created_at||\"\",t.value=!0}function E(){t.value=!1,d.value=null}async function F(){return await g((a,r,t)=>{let n=r[0];if(!n){E();return}let i=null,o=n?.properties?.id;o&&e.value.has(o)&&(i=e.value.get(o)||null,d.value=o),i?R(i,t.mousePosition.position):E()})}async function T(){return await _((a,r,t)=>{let i=r[0];if(!i){c.value=null;return}(function(){let{hash:e}=location;return\"#/cockpit\"===e||!1})()?!function(a){let r=a?.properties?.id;r&&e.value.has(r)&&(function(){return n})().$pager.cockpitAlertFlowPopVisible.next(!0)}(i):!function(a){let r=a?.properties?.id;if(r&&e.value.has(r)){c.value=r;let a=e.value.get(r);a&&(x(r),CY().triggerMapAlertMessagePopup(a))}else c.value=null}(i)})}return{pins:e,pinInstances:a,highlightedPinId:r,hoveredPinId:d,clickedPinId:c,tooltipVisible:t,tooltipTitle:i,tooltipContent:o,tooltipPosition:l,tooltipPopupTime:s,addPin:j,removePin:D,updatePin:I,clearAllPins:A,highlightPin:C,recenterToPin:x,getPin:function(a){return e.value.get(a)},getAllPins:function(){return Array.from(e.value.values())},setupHoverListener:F,setupClickListener:T,showTooltip:R,hideTooltip:E}}),C2=_p(\"uranus-map-alert-pin\",{pins:[]}),C3={class:\"map-alert-tooltip-content\"},C4={class:\"map-alert-tooltip-title\"},C6={class:\"map-alert-tooltip-description\"},C5={class:\"map-alert-tooltip-time\"},C9=(0,hC.aZ)({__name:\"MapAlertTooltip\",props:{visible:{type:Boolean},title:{},content:{},popupTime:{},position:{}},setup(e){let a=(0,hC.Fl)(()=>S0(e.popupTime));return(e,r)=>((0,hC.wg)(),(0,hC.j4)((0,hC.SU)(Dt.ZP),{show:e.visible&&!!e.title,x:e.position.x,y:e.position.y,placement:\"top-start\",trigger:\"manual\",\"max-width\":300,class:\"map-alert-tooltip\"},{default:(0,hC.w5)(()=>[(0,hC._)(\"div\",C3,[(0,hC._)(\"div\",C4,(0,hC.zw)(e.title),1),(0,hC._)(\"div\",C6,(0,hC.zw)(e.content),1),(0,hC._)(\"div\",C5,(0,hC.zw)(a.value),1)])]),_:1},8,[\"show\",\"x\",\"y\"]))}}),C8=(0,_V.default)(C9,[[\"__scopeId\",\"data-v-517ceb2e\"]]),C7={class:\"dropdown-content\"},xe={class:\"dropdown-label\"},xa={class:\"priority-btn\"},xr={class:\"dropdown-label\"},xt={class:\"dropdown-label\"},xn={class:\"dropdown-label\"},xi={key:0},xo={class:\"dropdown-label\"},xs={class:\"reset-btn\"},xl=(0,hC.aZ)({__name:\"FilterModule\",props:{showDeviceSearch:{type:Boolean,default:!1},orderBy:{}},emits:[\"toggle\",\"filter-change\"],setup(e,{expose:a,emit:r}){let t=CY(),n=(0,hC.Fl)(()=>e.orderBy||cX.CREATE_AT),i=(0,hC.iH)(!1),o=(0,hC.iH)([]),s=(0,hC.iH)([]),l=(0,hC.iH)([]),d=(0,hC.iH)(null),c=(0,hC.iH)([n.value]),u=Object.values(SN),p=Object.values(Sq);function m(e=6){let a=new Date;a.setHours(23,59,59,999);let r=new Date;return r.setMonth(a.getMonth()-e),r.setHours(0,0,0,0),r}let h=(0,hC.Fl)(()=>{let e=wT()(),a=e.valueOf();return{[_b(\"common.date.today\")]:[e.startOf(\"day\").valueOf(),a],[_b(\"web.p_analysis.analysis_recent_week\")]:[e.subtract(1,\"week\").startOf(\"day\").valueOf(),a],[_b(\"web.p_analysis.analysis_recent_1_month\")]:[m(1),a],[_b(\"web.p_analysis.analysis_recent_3_months\")]:[m(3),a],[_b(\"time_diff.half_a_year.notice\")]:[m(),a]}});function f(e){i.value=e}let g=(0,hC.Fl)(()=>t.allDeviceModalKeys),_=(0,hC.Fl)(()=>g.value.map(e=>{let a=vY.filter(a=>a.key===e);return 0===a.length?null:{label:a[0].name,value:e}}).filter(Boolean));function b(){r(\"filter-change\",{sort_by:c.value,timeRange:d.value,space_type:o.value,priority:s.value,[SP]:l.value})}function k(e){o.value=e,b()}function v(e){s.value=e,b()}function z(e){l.value=e,b()}function w(e){d.value=e,b()}function y(e){let a=new Date;return a.setHours(23,59,59,999),e>a||e<m()}let S=(0,hC.Fl)(()=>o.value?.length||s.value?.length||l.value?.length||d.value||c.value?.[0]!==n.value);function j(){if(!!S.value)o.value=[],s.value=[],l.value=[],d.value=null,c.value=[n.value],b()}return a({emitFilterChange:b,resetFilters:j}),(e,a)=>((0,hC.wg)(),(0,hC.j4)((0,hC.SU)(Di),{placement:\"bottom\",class:(0,hC.C_)([\"filter-dropdown\",(0,hC.SU)(w3)]),trigger:\"click\",\"onUpdate:show\":f},{trigger:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(jE),{class:\"filter-btn\",style:(0,hC.j5)({background:S.value?\"#363636\":\"\"})},{default:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(jD),{name:\"aec-filter\",size:16,color:S.value?\"#0075FF\":\"#fff\"},null,8,[\"color\"])]),_:1},8,[\"style\"])]),default:(0,hC.w5)(()=>[(0,hC._)(\"div\",C7,[(0,hC._)(\"div\",null,[(0,hC._)(\"div\",xe,(0,hC.zw)(e.$t(\"message_center.filter_module.display_sorting.label\")),1),(0,hC._)(\"div\",xa,[((0,hC.wg)(!0),(0,hC.iD)(hC.HY,null,(0,hC.Ko)((0,hC.SU)(SH),e=>((0,hC.wg)(),(0,hC.j4)((0,hC.SU)(jE),{key:e.value,style:(0,hC.j5)({background:e.value===c.value?.[0]?\"#555555\":\"\"}),onClick:a=>(function(e){if(c.value?.[0]!==e)c.value=[e],b()})(e.value)},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.label),1)]),_:2},1032,[\"style\",\"onClick\"]))),128))])]),(0,hC._)(\"div\",null,[(0,hC._)(\"div\",xr,(0,hC.zw)(e.$t(\"message_center.filter_module.date.label\")),1),(0,hC.Wm)((0,hC.SU)(Dk),{value:d.value,\"onUpdate:value\":[a[0]||(a[0]=e=>d.value=e),w],size:\"large\",class:\"range-picker\",\"is-date-disabled\":y,shortcuts:h.value},null,8,[\"value\",\"shortcuts\"])]),(0,hC._)(\"div\",null,[(0,hC._)(\"div\",xt,(0,hC.zw)(e.$t(\"message_center.filter_module.message_type.label\")),1),(0,hC.Wm)((0,hC.SU)(Dc),{value:o.value,\"onUpdate:value\":[a[1]||(a[1]=e=>o.value=e),k],multiple:\"\",clearable:\"\",style:{width:\"100%\"},size:\"small\",options:(0,hC.SU)(p)},null,8,[\"value\",\"options\"])]),(0,hC._)(\"div\",null,[(0,hC._)(\"div\",xn,(0,hC.zw)(e.$t(\"message_center.filter_module.message_level.label\")),1),(0,hC.Wm)((0,hC.SU)(Dc),{value:s.value,\"onUpdate:value\":[a[2]||(a[2]=e=>s.value=e),v],multiple:\"\",clearable:\"\",style:{width:\"100%\"},size:\"small\",options:(0,hC.SU)(u)},null,8,[\"value\",\"options\"])]),e.showDeviceSearch?((0,hC.wg)(),(0,hC.iD)(\"div\",xi,[(0,hC._)(\"div\",xo,(0,hC.zw)(e.$t(\"message_center.filter_module.device_type.label\")),1),(0,hC.Wm)((0,hC.SU)(Dc),{value:l.value,\"onUpdate:value\":[a[3]||(a[3]=e=>l.value=e),z],multiple:\"\",clearable:\"\",style:{width:\"100%\"},size:\"small\",options:_.value},null,8,[\"value\",\"options\"])])):(0,hC.kq)(\"\",!0),(0,hC._)(\"div\",xs,[(0,hC.Wm)((0,hC.SU)(jE),{type:\"primary\",onClick:j},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.$t(\"message_center.filter_module.reset.btn\")),1)]),_:1})])])]),_:1},8,[\"class\"]))}}),xd=(0,_V.default)(xl,[[\"__scopeId\",\"data-v-7875e1d1\"]]),xc={class:\"info\"},xu={class:\"info-title\"},xp={class:\"info-content\"},xm=(0,hC.aZ)({__name:\"InfoContent\",props:{title:{},content:{}},setup:e=>(e,a)=>((0,hC.wg)(),(0,hC.iD)(\"div\",xc,[(0,hC._)(\"div\",xu,(0,hC.zw)(e.title),1),(0,hC._)(\"div\",xp,[(0,hC.Wm)((0,hC.SU)(jW),null,{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.content),1)]),_:1})])]))}),xh=(0,_V.default)(xm,[[\"__scopeId\",\"data-v-3091687f\"]]),xf={class:\"action-btns\"},xg=(0,hC.aZ)({__name:\"TableActions\",props:{readStatusType:{},record:{}},emits:[\"read\",\"close\"],setup(e,{emit:a}){let{getBusinessLink:r}=SX(),t=[pL.PASSWORD_CHANGE_TIP,pL.LICENSE_LIMIT_TIP,pL.LICENSE_EXPIRE_TIP],n=(0,hC.Fl)(()=>t.includes(e.record?.name));async function i(){a(\"read\")}function o(){e.record?.gid&&!e.record?.is_read&&i(),r(e.record?.name,e.record?.metadata,e.record)}return(e,a)=>((0,hC.wg)(),(0,hC.iD)(\"div\",xf,[n.value?(0,hC.kq)(\"\",!0):((0,hC.wg)(),(0,hC.j4)((0,hC.SU)(jE),{key:0,text:\"\",type:\"primary\",onClick:o},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)((0,hC.SU)(_b)(\"web.decices.view_details\")),1)]),_:1})),e.readStatusType===(0,hC.SU)(pY).UNREAD?((0,hC.wg)(),(0,hC.j4)((0,hC.SU)(jE),{key:1,text:\"\",type:\"primary\",onClick:i},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)((0,hC.SU)(_b)(\"message_center.all_message.read.btn\")),1)]),_:1})):(0,hC.kq)(\"\",!0)]))}}),x_=(0,_V.default)(xg,[[\"__scopeId\",\"data-v-5ed3cdec\"]]),xb=(0,hC.aZ)({__name:\"PriorityTag\",props:{text:{},textColor:{},color:{}},setup:e=>(e,a)=>((0,hC.wg)(),(0,hC.j4)((0,hC.SU)(DD),{color:{textColor:e.textColor,color:e.color}},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.text),1)]),_:1},8,[\"color\"]))}),xk={class:\"message-content\"},xv={class:\"message-header\"},xz={class:\"header-left\"},xw={class:\"header-left__title\"},xy={class:\"header-right\"},xS={key:0,class:\"message-loading\"},xj={key:0,class:\"search-empty-layout\"},xD={class:\"search-empty-layout__title\"},xI={class:\"search-empty-layout__desc\"},xA={key:1,class:\"message-table\"},xC=(0,hC.aZ)({__name:\"Index\",setup(e){let a=Se(),r=CY(),t=(0,hC.iH)(!1),n=(0,hC.iH)([]),i=(0,hC.iH)(pY.UNREAD),o=(0,hC.iH)(),s=(0,hC.Fl)(()=>0===n.value.length),l=(0,hC.qj)({page:1,pageSize:10,itemCount:0,showQuickJumper:!0,size:\"small\",goto:()=>(0,hC.h)(\"div\",{},_b(\"web.common.go\")),suffix:()=>(0,hC.h)(\"div\",{},_b(\"web.common.page\")),onChange:e=>{l.page=e,p()}}),{getBusinessTitle:d,getBusinessText:c,getDeviceData:u}=SX();async function p(e){if(!a.org_uuid)return;let s={page:l.page,page_size:l.pageSize,metadata:{},...o.value,...e,is_read:i.value===pY.READ};t.value=!0;try{let e=await Sn(s);if(0===e.code){let a=e.data||{};l.itemCount=a?.pagination?.total||0,await r.setDevicesData([{aggregated_info:a.list||[]}]),n.value=(a.list||[]).map(e=>{let a=SN[e.priority],t=Sq[e.space_type],n=u(e.name,e.metadata,r);return e.metadata={...n},{...e,infoTitle:d(e.name,e.metadata,e)||\"--\",infoContent:c(e.name,e.metadata,e)||\"--\",spaceTypeName:t?.label||\"--\",priorityName:a?.label||\"--\",priorityColor:a?.color||\"\",priorityBgColor:a?.bgColor||\"\",createdAt:e.created_at?wT()(e.created_at).format(k1):\"--\"}})}}finally{t.value=!1}}let m={ellipsis:{tooltip:{contentStyle:{maxWidth:600}}}},h=[{title:_b(\"message_center.message_list.info_level.title\"),key:\"priority\",width:\"12%\",render:e=>(0,hC.h)(xb,{text:e.priorityName,textColor:e.priorityColor,color:e.priorityBgColor,key:e.gid}),...m},{title:_b(\"message_center.message_list.type.title\"),key:\"spaceTypeName\",width:\"10%\",...m},{title:_b(\"message_center.message_list.info_content.title\"),key:\"info\",render:e=>(0,hC.h)(xh,{title:e.infoTitle,content:e.infoContent}),...m},{title:_b(\"common.date.time\"),key:\"createdAt\",width:\"19%\",...m},{title:_b(\"common.action.operation\"),key:\"actions\",width:\"18%\",render:e=>(0,hC.h)(x_,{readStatusType:i.value,record:e,onClose:()=>g(),onRead:()=>{k(e)}})}];function f(){l.page=1,p()}function g(){r.allMessageModalVisible=!1}function _(){p()}async function b(){await r.setAllMessageRead(),p()}async function k(e){await r.setMessageRead(e.gid),p()}function v(e){let a={...e};delete a.timeRange,e?.timeRange?.length&&(a.start_time=wT()(e.timeRange[0]).unix(),a.end_time=wT()(e.timeRange[1]).unix()),o.value={...a},l.page=1,p(a)}let z=(0,hC.iH)();return(0,hC.bv)(()=>{z.value?.emitFilterChange()}),(e,a)=>{let r=(0,hC.up)(\"uranus-spin\"),o=(0,hC.up)(\"UranusIcon\");return(0,hC.wg)(),(0,hC.j4)((0,hC.SU)(jM),{show:!0,preset:\"card\",closable:!1,class:(0,hC.C_)([\"message-center-all-message-modal\",(0,hC.SU)(w3)]),\"transform-origin\":\"center\",footer:!1},{default:(0,hC.w5)(()=>[(0,hC._)(\"div\",xk,[(0,hC._)(\"div\",xv,[(0,hC._)(\"div\",xz,[(0,hC._)(\"div\",xw,(0,hC.zw)(e.$t(\"message_center.all_message.message_modal.title\")),1),(0,hC.Wm)((0,hC.SU)(Dc),{value:i.value,\"onUpdate:value\":[a[0]||(a[0]=e=>i.value=e),f],style:{width:\"130px\"},size:\"small\",options:(0,hC.SU)(SO),class:\"read-type-select\"},null,8,[\"value\",\"options\"])]),(0,hC._)(\"div\",xy,[i.value===(0,hC.SU)(pY).UNREAD?((0,hC.wg)(),(0,hC.iD)(hC.HY,{key:0},[(0,hC.Wm)((0,hC.SU)(jE),{text:\"\",type:\"primary\",onClick:b},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.$t(\"message_center.message_list.all_read.btn\")),1)]),_:1}),(0,hC.Wm)((0,hC.SU)(DP),{vertical:!0,class:\"custom-divider\"})],64)):(0,hC.kq)(\"\",!0),(0,hC.Wm)(xd,{ref_key:\"filterModuleRef\",ref:z,\"order-by\":(0,hC.SU)(cX).CREATE_AT,\"show-device-search\":\"\",onFilterChange:v},null,8,[\"order-by\"]),(0,hC.Wm)((0,hC.SU)(jE),{class:\"only-icon-btn\",onClick:_},{default:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(jD),{name:\"aec-retry\",size:16})]),_:1}),(0,hC.Wm)((0,hC.SU)(DP),{vertical:!0,class:\"custom-divider\"}),(0,hC.Wm)((0,hC.SU)(jD),{name:\"aec-close\",size:16,onClick:g})])]),t.value?((0,hC.wg)(),(0,hC.iD)(\"div\",xS,[(0,hC.Wm)(r,{spinning:t.value,size:\"large\",tip:e.$t(\"common.data.loading\")},null,8,[\"spinning\",\"tip\"])])):((0,hC.wg)(),(0,hC.iD)(hC.HY,{key:1},[s.value?((0,hC.wg)(),(0,hC.iD)(\"div\",xj,[(0,hC._)(\"div\",null,[(0,hC.Wm)(o,{name:\"message-center-no-data\",size:64}),(0,hC._)(\"div\",xD,(0,hC.zw)(e.$t(\"message_center.message_list.no_message_notifications.title\")),1),(0,hC._)(\"div\",xI,(0,hC.zw)(e.$t(\"message_center.all_message.empty.desc\")),1)])])):((0,hC.wg)(),(0,hC.iD)(\"div\",xA,[(0,hC.Wm)((0,hC.SU)(DR),{remote:\"\",data:n.value,columns:h,loading:t.value,pagination:l,theme:\"dark\",bordered:!1,\"single-column\":\"\",\"bottom-bordered\":!1,style:{height:\"100%\"},\"flex-height\":\"\"},null,8,[\"data\",\"loading\",\"pagination\"])]))],64))])]),_:1},8,[\"class\"])}}}),xx=(0,_V.default)(xC,[[\"__scopeId\",\"data-v-2de89ab0\"]]),xR={class:\"message-section unread-section\"},xE={class:\"section-header\"},xF={class:\"section-title\"},xT={class:\"section-actions\"},xP={key:1,class:\"message-content\"},xM={key:0,class:\"message-list\"},xL={key:2,class:\"message-section read-section\"},xJ={class:\"section-header read-section-header\"},xN={class:\"section-title\"},xq={class:\"message-list\"},xO={class:\"action-buttons\"},xH=(0,hC.aZ)({name:\"MoreMessageList\",__name:\"MoreMessageList\",props:{position:{}},setup(e){let a;let r=function(){return n}(),t=(0,hC.iH)(),i=(0,hC.iH)(!0);(0,bX.i9H)(t,m,{ignore:[`.${w3}`]});let o=(0,hC.iH)(),s=CY(),l=(0,hC.Fl)(()=>s.unreadShowList),d=(0,hC.Fl)(()=>s.readShowList),c=(0,hC.Fl)(()=>l.value?.length===0&&d.value?.length===0);function u(e){return CG[e]}function p(){s.setAllMessageRead()}function m(){var e,a;s.moreMessageListShowPosition=c2.NONE,e=r,a=c2.NONE,e.$pager?.messageCenterConfig?.next({activeType:w1.moreMessageListShowPosition,data:a})}function h(){s.allMessageModalVisible=!0}function f(e){s.filterMessageList(e)}return(0,hC.bv)(()=>{a=setTimeout(()=>{o.value.emitFilterChange(),i.value=!1},50)}),(0,hC.SK)(()=>{clearTimeout(a)}),(e,a)=>{let r=(0,hC.up)(\"uranus-spin\");return(0,hC.wg)(),(0,hC.iD)(\"div\",{ref_key:\"layoutRef\",ref:t,class:(0,hC.C_)([\"more-message-list\",e.position])},[(0,hC._)(\"div\",xR,[(0,hC._)(\"div\",xE,[(0,hC._)(\"h3\",xF,(0,hC.zw)(e.$t(\"message_center.message_list.message_notification.title\")),1),(0,hC._)(\"div\",xT,[c.value?(0,hC.kq)(\"\",!0):((0,hC.wg)(),(0,hC.iD)(\"div\",{key:0,class:\"all-read\",onClick:p},(0,hC.zw)(e.$t(\"message_center.message_list.all_read.btn\")),1)),(0,hC.Wm)(xd,{ref_key:\"filterModuleRef\",ref:o,\"order-by\":(0,hC.SU)(cX).PRIORITY,onFilterChange:f},null,8,[\"order-by\"])])])]),i.value?((0,hC.wg)(),(0,hC.j4)(r,{key:0,spinning:i.value,size:\"large\",tip:e.$t(\"common.data.loading\"),class:\"message-loading\"},null,8,[\"spinning\",\"tip\"])):((0,hC.wg)(),(0,hC.iD)(hC.HY,{key:1},[c.value?((0,hC.wg)(),(0,hC.j4)(CE,{key:0,class:\"message-content\",title:e.$t(\"message_center.message_list.no_message_notifications.title\"),description:e.$t(\"message_center.message_list.no_message_notifications.desc\")},null,8,[\"title\",\"description\"])):((0,hC.wg)(),(0,hC.iD)(\"div\",xP,[(0,hC._)(\"div\",null,[l.value.length>0&&!i.value?((0,hC.wg)(),(0,hC.iD)(\"div\",xM,[((0,hC.wg)(!0),(0,hC.iD)(hC.HY,null,(0,hC.Ko)(l.value,e=>((0,hC.wg)(),(0,hC.iD)(\"div\",{key:e.gid,class:\"message-card unread-card\"},[((0,hC.wg)(),(0,hC.j4)((0,hC.LL)(u(e.name)),{\"business-data\":e,\"business-priority\":(0,hC.SU)(CU)(e.priority),\"is-read\":!1,\"is-in-list\":!0,onClose:a=>{var r;return r=e,void s.setMessageRead(r.gid)}},null,40,[\"business-data\",\"business-priority\",\"onClose\"]))]))),128))])):((0,hC.wg)(),(0,hC.j4)(CE,{key:1,style:{\"font-size\":\"14px\"},title:e.$t(\"message_center.message_list.no_message_notifications.title\")},null,8,[\"title\"])),d.value.length>0&&!i.value?((0,hC.wg)(),(0,hC.iD)(\"div\",xL,[(0,hC._)(\"div\",xJ,[(0,hC._)(\"h3\",xN,(0,hC.zw)(e.$t(\"message_center.message_list.read_messages.title\")),1)]),(0,hC._)(\"div\",xq,[((0,hC.wg)(!0),(0,hC.iD)(hC.HY,null,(0,hC.Ko)(d.value,e=>((0,hC.wg)(),(0,hC.iD)(\"div\",{key:e.gid,class:\"message-card read-card\"},[((0,hC.wg)(),(0,hC.j4)((0,hC.LL)(u(e.name)),{\"business-data\":e,\"business-priority\":(0,hC.SU)(CU)(e.priority),\"is-read\":!0,\"is-in-list\":!0},null,8,[\"business-data\",\"business-priority\"]))]))),128))])])):(0,hC.kq)(\"\",!0)])])),(0,hC._)(\"div\",xO,[(0,hC._)(\"button\",{class:\"btn btn-primary\",onClick:h},(0,hC.zw)(e.$t(\"message_center.message_list.show_all.btn\")),1),(0,hC._)(\"button\",{class:\"btn btn-default\",onClick:m},(0,hC.zw)(e.$t(\"common.action.close\")),1)])],64))],2)}}}),xG=(0,_V.default)(xH,[[\"__scopeId\",\"data-v-7de4a33e\"]]),xB={class:\"form-main\"},xV={class:\"form-item\"},xU={class:\"form-label\"},xK={class:\"form-item\"},xW={class:\"form-label\"},xZ={class:\"form-item\"},x$={class:\"form-label\"},xY={class:\"form-item\"},xQ={class:\"form-label\"},xX={class:\"form-item\"},x0={class:\"form-label\"},x1={class:\"level-control-wrapper\"},x2={class:\"level-control\"},x3={class:\"level-value-wrapper\"},x4={key:0,class:\"text-control\"},x6={class:\"control-text control-text-left\"},x5={class:\"control-text control-text-right\"},x9=(0,hC.aZ)({__name:\"LevelControl\",props:{modelValue:{},min:{default:1},max:{default:5},step:{default:1},leftText:{},rightText:{},precision:{default:0}},emits:[\"update:modelValue\"],setup(e,{emit:a}){let r=(0,hC.iH)(e.modelValue);function t(){e.modelValue>e.min&&(r.value=e.modelValue-e.step,a(\"update:modelValue\",r.value))}function n(){e.modelValue<e.max&&(r.value=e.modelValue+e.step,a(\"update:modelValue\",r.value))}function i(e){a(\"update:modelValue\",e)}return(0,hC.YP)(()=>e.modelValue,e=>{r.value=e}),(e,a)=>((0,hC.wg)(),(0,hC.iD)(\"div\",x1,[(0,hC._)(\"div\",x2,[(0,hC.Wm)((0,hC.SU)(jE),{class:\"square-btn\",disabled:e.modelValue<=e.min,onClick:t},{default:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(jD),{name:\"ai_identify_score_reduce\",size:16})]),_:1},8,[\"disabled\"]),(0,hC._)(\"div\",x3,[(0,hC.Wm)((0,hC.SU)(jB),{value:r.value,\"onUpdate:value\":[a[0]||(a[0]=e=>r.value=e),i],min:e.min,max:e.max,precision:e.precision,bordered:!1,\"show-button\":!1,step:e.step},null,8,[\"value\",\"min\",\"max\",\"precision\",\"step\"])]),(0,hC.Wm)((0,hC.SU)(jE),{class:\"square-btn\",disabled:e.modelValue>=e.max,onClick:n},{default:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(jD),{name:\"ai_identify_score_add\",size:16})]),_:1},8,[\"disabled\"])]),e.leftText&&e.rightText?((0,hC.wg)(),(0,hC.iD)(\"div\",x4,[(0,hC._)(\"div\",x6,[(0,hC.Wm)((0,hC.SU)(jW),{theme:\"dark\"},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.leftText),1)]),_:1})]),(0,hC._)(\"div\",x5,[(0,hC.Wm)((0,hC.SU)(jW),{theme:\"dark\"},{default:(0,hC.w5)(()=>[(0,hC.Uk)((0,hC.zw)(e.rightText),1)]),_:1})])])):(0,hC.kq)(\"\",!0)]))}}),x8=(0,_V.default)(x9,[[\"__scopeId\",\"data-v-fa983762\"]]),x7=(0,hC.aZ)({name:\"ManualAutoDispatchTask\",components:{OberonModal:jM,OberonInput:jH,LevelControl:x8},props:{projectUuid:{type:String,default:()=>\"\"},data:{type:Object,default:()=>void 0},config:{type:Object,default:()=>({title:_b(\"manual_auto_dispatch_modal_title\"),isEdit:!1,isShowLevelText:!1,okText:_b(\"manual_auto_dispatch_create_task_btn\")})}},emits:[\"cancel\",\"confirm\"],setup(e,{emit:a}){let r=Se(),t=(0,hC.iH)(!1),n=(0,hC.qj)({longitude:0,latitude:0,height:0,name:\"\",level:3,desc:\"\",uuid:\"\",workflow_uuid:\"\"}),i=(0,hC.Fl)(()=>e.config?.isEdit);function o(){a(\"cancel\")}async function s(n){t.value=!0;try{let t;let s={params:{...e.data?.params,longitude:n.longitude,latitude:n.latitude,height:n.height||0,level:n.level,desc:n.desc,creator:r.userId},time_zone:(t=\"\",Intl&&Intl.DateTimeFormat&&(t=Intl.DateTimeFormat().resolvedOptions().timeZone),t),trigger_type:c5.MANUAL,name:n.name,workflow_execution_uuid:i.value?n.uuid:void 0,workflow_uuid:n.workflow_uuid},l=i.value?IC:IA,d=await l(e.projectUuid,s);0===d.code?(hA.Z.success(i.value?_b(\"auto_workflow_execution_edit_task_modifies_title\"):_b(\"web.cockpit.device-relay.create-task-success\")),o(),a(\"confirm\")):hA.Z.error(d.message)}catch(e){hA.Z.error(e?.codeMessage)}finally{t.value=!1}}let l=e=>{e&&(n.name=e.name??\"\",n.longitude=e.params?.longitude??0,n.latitude=e.params?.latitude??0,n.height=e.params?.height??0,n.level=e.params?.level??3,n.desc=e.params?.desc??\"\",n.uuid=e.uuid??\"\",n.workflow_uuid=e.workflow_uuid??\"\")};return(0,hC.YP)(()=>e.data,e=>{l(e)},{immediate:!0}),{confirmLoading:t,onConfirm:s,onCancel:o,formData:n,ALERT_WORKFLOW_TRIGGER_LEVEL_CONFIG:Is}}}),Re=(0,_V.default)(x7,[[\"render\",function(e,a,r,t,n,i){let o=(0,hC.up)(\"OberonInput\"),s=(0,hC.up)(\"LevelControl\"),l=(0,hC.up)(\"OberonModal\");return(0,hC.wg)(),(0,hC.iD)(\"div\",null,[(0,hC.Wm)(l,{show:!0,class:\"manual-auto-dispatch-dialog\",preset:\"card\",closable:!1,title:e.config.title,\"transform-origin\":\"center\",\"ok-btn-loading\":e.confirmLoading,\"ok-text\":e.config.okText,\"cancel-text\":e.$t(\"manual_auto_dispatch_cancel_btn\"),onOk:a[5]||(a[5]=()=>e.onConfirm(e.formData)),onCancel:e.onCancel},{default:(0,hC.w5)(()=>[(0,hC._)(\"div\",xB,[(0,hC._)(\"div\",xV,[(0,hC._)(\"label\",xU,(0,hC.zw)(e.$t(\"manual_auto_dispatch_longitude_label\")),1),(0,hC.Wm)(o,{value:e.formData.longitude,\"onUpdate:value\":a[0]||(a[0]=a=>e.formData.longitude=a),disabled:!0,placeholder:e.$t(\"manual_auto_dispatch_longitude_placeholder\")},null,8,[\"value\",\"placeholder\"])]),(0,hC._)(\"div\",xK,[(0,hC._)(\"label\",xW,(0,hC.zw)(e.$t(\"manual_auto_dispatch_latitude_label\")),1),(0,hC.Wm)(o,{value:e.formData.latitude,\"onUpdate:value\":a[1]||(a[1]=a=>e.formData.latitude=a),disabled:!0,placeholder:e.$t(\"manual_auto_dispatch_latitude_placeholder\")},null,8,[\"value\",\"placeholder\"])]),(0,hC._)(\"div\",xZ,[(0,hC._)(\"label\",x$,(0,hC.zw)(e.$t(\"auto_workflow_editor_alert_logs_column_title\")),1),(0,hC.Wm)(o,{value:e.formData.name,\"onUpdate:value\":a[2]||(a[2]=a=>e.formData.name=a),placeholder:e.$t(\"manual_auto_dispatch_alarm_name_placeholder\"),maxlength:56,\"show-count\":\"\"},null,8,[\"value\",\"placeholder\"])]),(0,hC._)(\"div\",xY,[(0,hC._)(\"label\",xQ,(0,hC.zw)(e.$t(\"auto_workflow_editor_alert_logs_column_alert_level\")),1),(0,hC.Wm)(s,{modelValue:e.formData.level,\"onUpdate:modelValue\":a[3]||(a[3]=a=>e.formData.level=a),style:{\"grid-column\":\"3\"},min:e.ALERT_WORKFLOW_TRIGGER_LEVEL_CONFIG.min,max:e.ALERT_WORKFLOW_TRIGGER_LEVEL_CONFIG.max,step:e.ALERT_WORKFLOW_TRIGGER_LEVEL_CONFIG.step,\"left-text\":e.config.isShowLevelText?e.ALERT_WORKFLOW_TRIGGER_LEVEL_CONFIG.min_tip:\"\",\"right-text\":e.config.isShowLevelText?e.ALERT_WORKFLOW_TRIGGER_LEVEL_CONFIG.max_tip:\"\"},null,8,[\"modelValue\",\"min\",\"max\",\"step\",\"left-text\",\"right-text\"])]),(0,hC._)(\"div\",xX,[(0,hC._)(\"label\",x0,(0,hC.zw)(e.$t(\"auto_workflow_editor_alert_logs_column_description\")),1),(0,hC.Wm)(o,{value:e.formData.desc,\"onUpdate:value\":a[4]||(a[4]=a=>e.formData.desc=a),type:\"textarea\",placeholder:e.$t(\"manual_auto_dispatch_alarm_desc_placeholder\"),maxlength:100,rows:2,\"show-count\":\"\"},null,8,[\"value\",\"placeholder\"])])])]),_:1},8,[\"title\",\"ok-btn-loading\",\"ok-text\",\"cancel-text\",\"onCancel\"])])}]]),Ra=(0,yi.Q_)(\"manualAutoDispatch\",()=>{let e=(0,hC.iH)(!1),a=(0,hC.iH)();return{modalVisible:e,workFlowData:a,showModal:function(r){e.value=!0,r&&(a.value=r)},hideModal:function(){e.value=!1,a.value=void 0},setWorkFlowData:function(e){a.value=e}}});(ss=m7||(m7={})).ManageMemberStatus=\"manage_member_status\",ss.DeviceOnline=\"device_online\",ss.DeviceOffline=\"device_offline\",ss.DeviceUpgrade=\"device_upgrade\",ss.DeviceOsd=\"device_osd\",ss.DeviceHealthNotify=\"device_health_notify\",ss.DeviceState=\"device_state\",ss.DeviceEvents=\"device_events\",ss.DeviceUpdateTopo=\"device_update_topo\",ss.DeviceOnlineFailed=\"device_online_failed\",ss.DeviceLogs=\"device_job_notify\",ss.DeviceUpgradeProgress=\"ota_progress\",ss.DeviceCreate=\"ota_create\",ss.DeviceHms=\"device_hms\",ss.DeviceLogsUploadProcess=\"fileupload_start\",ss.DeviceCsdkDebug=\"sdr_debug_info\",ss.HmsReadTime=\"hms_read_time\",ss.TwoDReconstruction=\"2d_reconstruction\",ss.GeoModel=\"geo_model\",ss.Live=\"live\",ss.ReturnHomeInfo=\"return_home_info\",ss.ManageProject=\"manage_project\",ss.ManagePrjDevice=\"manage_prj_device\",ss.ManagePrjMember=\"manage_prj_member\",ss.ManageOrganization=\"manage_organization\",ss.ManageOrgDevice=\"manage_org_device\",ss.ManageOrgMember=\"manage_org_member\",ss.CmdAirportOpenCover=\"airport_open_cover\",ss.CmdAirportCloseCover=\"airport_close_cover\",ss.CmdAirportSelfCheck=\"airport_check_self\",ss.CmdAirportReboot=\"airport_reboot\",ss.CmdDroneReboot=\"drone_reboot\",ss.UserOperation=\"user_operation\",ss.DeviceCommands=\"device_cmds\",ss.DeviceControlStatus=\"device_control_status\",ss.FlightTasks=\"flight_tasks_status_changed_v2\",ss.FlightTasksDeviceRecentTask=\"flight_tasks_device_recent_task_v2\",ss.FlightTasksExceptions=\"flight_tasks_exceptions\",ss.MediaUploadInfo=\"file_upload_info\",ss.FlightTasksMediaStatusChanged=\"flight_tasks_media_status_changed\",ss.MediaZipProgress=\"zip_progress\",ss.ModelUnzipProgress=\"unzip_progress\",ss.ModelStatusChanged=\"model_status_changed\",ss.ModelTransformProgress=\"model_converter_progress\",ss.ModelResampleStatus=\"model_resample_status\",ss.MapGroupDistribute=\"map_group_distribute\",ss.MapGroupUndistribute=\"map_group_undistribute\",ss.MapElementCreate=\"map_element_create\",ss.MapElementUpdate=\"map_element_update\",ss.MapElementDelete=\"map_element_delete\",ss.MapGroupRefresh=\"map_group_refresh\",ss.MapGroupDelete=\"map_group_delete\",ss.MapGroupLock=\"map_group_lock\",ss.MapGroupUnlock=\"map_group_unlock\",ss.AiDiffStatusChanged=\"media_ml_compare_status_changed\",ss.AiDiffResultUpdate=\"media_ml_compare_result_update\",ss.ManageMemberStatusPending=\"manage_member_status_pending\",ss.DeviceUpdateTopoPending=\"device_update_topo_pending\",ss.PhotoShowOnMap=\"file_show_on_map\",ss.PhotoHideOnMap=\"file_hide_on_map\",ss.ReconstructionCreate=\"2d_reconstruction_create\",ss.ReconstructionUpdatedTilesNotify=\"2d_reconstruction_updated_tiles_notify\",ss.ReconstructionStatusChanged=\"2d_reconstruction_status_changed\",ss.ReconstructionProgress=\"2d_reconstruction_progress\",ss.ReconstructionElevationReady=\"2d_reconstruction_elevation_ready\",ss.DeviceExitHomingNotify=\"device_exit_homing_notify\",ss.WaylineEditorStatus=\"wayline_editor_status\",ss.GenerateAreaWaylineProgress=\"generate_area_wayline_progress\",ss.CloudControlStatus=\"cloud_control_status\",ss.CloudControlStatusV2=\"cloud_control_status_v2\",ss.CloudControlAuthNotify=\"cloud_control_auth_notify\",ss.FlyToPointProgress=\"fly_to_point_progress\",ss.PoiProgress=\"poi_status_progress\",ss.TakeoffToPointProgress=\"takeoff_to_point_progress\",ss.TakeoffExceptionNotify=\"takeoff_exception_notify\",ss.DRC_STATUS_NOTIFY=\"drc_status_notify\",ss.JOYSTICK_INVALID_NOTIFY=\"joystick_invalid_notify\",ss.DRONE_SELF_PLAN_PATH=\"drone_self_plan_path\",ss.OrganizationPackageUpdate=\"organization_package_update\",ss.OrganizationResourceWarning=\"organization_resource_warning\",ss.DeviceOnlineLimit=\"device_online_limit\",ss.MediaDirFileUpdate=\"dir_file_num_update\",ss.PostReconstructionStatusChanged=\"post_reconstruction_status_changed\",ss.PostReconstructionProgress=\"post_reconstruction_progress\",ss.FASTRECONSTRUCTIONCHANGED=\"fast_reconstruction_changed\",ss.TerrainObstacleModelUpdateProgress=\"offline_map_model_update_progress\",ss.TerrainObstacleDeviceSynchronism=\"offline_map_pkg_update_progress\",ss.CustomFlightAreasSynchronism=\"flight_areas_update_progress\",ss.CustomFlightAreasDistanceNotification=\"flight_areas_drone_location\",ss.CustomFlightAreasUpdatedBySomeone=\"flight_areas_update\",ss.AirSenseWarning=\"airsense_warning\",ss.PsdkFloatingWindowText=\"psdk_floating_window_text\",ss.DeviceSelfDiagnostic=\"self_diagnostic\",ss.DeviceCmdJobEvent=\"device_cmd_job_event\",ss.DeviceCmdRtkEvent=\"rtk_calibration\",ss.AISpotlightZoomExitReason=\"ai_spotlight_zoom_exit_reason\",ss.Ml_Compare_Status_Changed=\"ml_compare_status_changed\",ss.MODEL_ML_REPORT_STATUS_CHANGED=\"model_ml_report_status_changed\",ss.MEDIA_ML_REPORT_STATUS_CHANGED=\"media_ml_report_status_changed\",ss.DOCK_TCA_STATUS_CHANGED=\"dock_tca_status_changed\",ss.TcaStatusChanged=\"tca_status_changed\",ss.CoverOpenNotify=\"cover_open_notify\",ss.InFlightWaylineTask=\"in_flight_wayline_task\",ss.AlertNotification=\"alert_notification\",ss.AlertRecords=\"alert_records\",ss.GenerateMappingWaylineProgress=\"generate_mapping_wayline_progress\",ss.ImportWayline=\"import_wayline\",ss.FileProcessProgress=\"file_process_progress\",ss.MeasureResult=\"measure_result\",ss.CalcVolumeResult=\"calc_volume_result\",ss.MultipleDroneReturnHome=\"request_multiple_drone_return_home\",ss.ReportSnapshotUpdate=\"report_snapshot_result\",ss.ReportMeasureUpdate=\"report_measure_result\",ss.ReportListUpdate=\"report_pdf\",ss.FlightTasksDeviceRecentTaskV2=\"flight_tasks_device_recent_task_v2\",ss.CloudEnvironmentSwitch=\"cloud_environment_switch\",ss.RunSfmStatusChanged=\"run_sfm_status_changed\",ss.RunSfmProgress=\"run_sfm_progress\",ss.Html2fileGenerated=\"html2file_generated\",ss.AiMediaSearchTask=\"ai_media_search_task\",ss.MessageBoxSend=\"msgbox_send\",(he||(he={})).cloudEnvironmentSwitchCallback=\"cloud_environment_switch_callback\",(sl=ha||(ha={})).FlySafeDatabaseUpgrade=\"flysafe_database_upgrade\",sl.CameraPhotoTake=\"camera_photo_take\",sl.RelayScanResult=\"relay_scan_result\",sl.RelayNonPairAttachResult=\"relay_non_pair_attach_result\",sl.LoadAIModel=\"load_ai_model\",sl.UnloadAIModel=\"unload_ai_model\",(sd=hr||(hr={})).LiveStream=\"live_stream\",sd.LiveNotify=\"live_notify\",sd.LiveStateNotify=\"live_state_notify\",sd.LiveRecordNotify=\"live_record_notify\",(ht||(ht={})).AiObjectDetectionAlert=\"ai_object_detection_alert_without_picture\",(sc=hn||(hn={})).AlertRecordsNotify=\"alert_records_notify\",sc.AlertWaylineActionNotify=\"alert_wayline_action_notify\",(hi||(hi={})).PdfToPngFinish=\"pdf_to_png_finish\",(su=ho||(ho={})).FlightTaskAlert=\"flight_task_alert\",su.AiMediaSearchReport=\"ai_media_search_report\",(hs||(hs={})).AiMediaSearchUpdate=\"ai_media_search_update\",(sp=hl||(hl={}))[sp.RC=1]=\"RC\",sp[sp.DOCK=2]=\"DOCK\",sp[sp.UAV=3]=\"UAV\",(sm=hd||(hd={}))[sm.BeforGenerate=0]=\"BeforGenerate\",sm[sm.Generating=1]=\"Generating\",sm[sm.Generated=2]=\"Generated\",sm[sm.GeneratFailed=3]=\"GeneratFailed\",(sh=hc||(hc={}))[sh.RC_LOST=0]=\"RC_LOST\",sh[sh.BATTERY_LOW_GO_HOME=1]=\"BATTERY_LOW_GO_HOME\",sh[sh.BATTERY_SUPER_LOW_LANDING=2]=\"BATTERY_SUPER_LOW_LANDING\",sh[sh.NEAR_BOUNDARY=3]=\"NEAR_BOUNDARY\",sh[sh.RC_PAUSE_STOP=4]=\"RC_PAUSE_STOP\",(sf=hu||(hu={}))[sf.DOCK_GATEWAY_NOTIFY=514300]=\"DOCK_GATEWAY_NOTIFY\",sf[sf.DOCK_HEART_BEAT_NOTIFY=514301]=\"DOCK_HEART_BEAT_NOTIFY\",sf[sf.DOCK_CERTIFICATE_NOTIFY=514302]=\"DOCK_CERTIFICATE_NOTIFY\",sf[sf.DOCK_NETWORK_NOTIFY=514303]=\"DOCK_NETWORK_NOTIFY\",sf[sf.DOCK_REQUEST_DENIED_NOTIFY=514304]=\"DOCK_REQUEST_DENIED_NOTIFY\",(sg=hp||(hp={}))[sg.UNCONNECTED=0]=\"UNCONNECTED\",sg[sg.CONNECTING=1]=\"CONNECTING\",sg[sg.CONNECTED=2]=\"CONNECTED\",(s_=hm||(hm={})).Acquire=\"Acquire\",s_.Release=\"Release\",s_.PassiveAcquire=\"PassiveAcquire\",s_.Change=\"Change\",s_.Reclaim=\"Reclaim\",s_.RcAllowAuth=\"RcAllowAuth\",s_.RcDenyAuth=\"RcDenyAuth\",s_.RcAddAuth=\"RcAddAuth\",s_.RcDeleteAuth=\"RcDeleteAuth\",s_.AuthTimeout=\"AuthTimeout\",(sb=hh||(hh={})).FLIGHT_CONTROL=\"flight_control\",sb.PAYLOAD_CONTROL=\"payload_control\",(sk=hf||(hf={})).FLIGHT=\"flight\",sk.PAYLOAD=\"payload\",(sv=hg||(hg={})).RC=\"rc\",sv.CLOUD=\"cloud\",sv.EMPTY=\"\",(sz=h_||(h_={})).ROLE_A=\"A\",sz.ROLE_B=\"B\",sz.ROLE_CLOUD=\"Cloud\",(sw=hb||(hb={})).Sent=\"sent\",sw.InProgress=\"in_progress\",sw.OK=\"ok\",sw.Failed=\"failed\",sw.Canceled=\"canceled\",sw.Timeout=\"timeout\",(sy=hk||(hk={}))[sy.fusionDsmFailed=1]=\"fusionDsmFailed\",sy[sy.generateWaylineFailed=2]=\"generateWaylineFailed\",sy[sy.generateWaylineSuccess=3]=\"generateWaylineSuccess\",(sS=hv||(hv={})).Dfence=\"dfence\",sS.Nfz=\"nfz\",sS.Nlz=\"noland\",(sj=hz||(hz={}))[sj.none=0]=\"none\",sj[sj.generating=1]=\"generating\",sj[sj.success=2]=\"success\",(sD=hw||(hw={}))[sD.WaylineUploading=1]=\"WaylineUploading\",sD[sD.WaylineUploaded=2]=\"WaylineUploaded\",sD[sD.WaylineProgress=3]=\"WaylineProgress\",sD[sD.WaylinePaused=4]=\"WaylinePaused\",sD[sD.WaylineCancel=5]=\"WaylineCancel\",sD[sD.WaylineOk=6]=\"WaylineOk\",sD[sD.WaylineFailed=7]=\"WaylineFailed\";let Rr=(0,hC.aZ)({__name:\"MessageCenter\",setup(e){let a=function(){return n}(),r=CY(),t=Ra(),i=Se(),o=(0,hC.Fl)(()=>r.allMessageModalVisible),s=(0,hC.Fl)(()=>r.moreMessageListShowPosition),l=(0,hC.Fl)(()=>t.modalVisible),d=(0,hC.Fl)(()=>t.workFlowData),c=(0,hC.Fl)(()=>t.workFlowData?.config);function u(){t.hideModal()}function p(){a.$pager.main.next({from:\"message-app\",label:\"alert-logs-refresh\"})}async function m(e){let a=await So({orgId:e});r.setAllDeviceModalKeys(a.data||[])}(0,hC.YP)(()=>i.org_uuid,(e,a)=>{e&&e!==a&&(r.resetAndReload(),m(e))},{immediate:!0});let h=null;return(0,hC.bv)(()=>{!function(e){let a=null;function r(){a&&(clearInterval(a),a=null)}a=setInterval(()=>{let a=e?.$webSocketState;a?.uranusWebsocket&&(!function(e){var a;let r,t=CY(),n=Se();let{sendWebSocket:i,subscribeWebsocket:o}=(a=e,r=[],(0,hC.bv)(()=>{a?.uranusWebsocket.initSocket()}),(0,hC.SK)(()=>{r.forEach(e=>{a?.uranusWebsocket.off(e.topic,e.callback)}),r=[]}),{sendWebSocket:function(e){a?.sendSocket(e)},subscribeWebsocket:function(e,t){function n(e){t(e.data,e.sourceData)}a?.uranusWebsocket.on(e,n),r.push({topic:e,callback:n})}});(0,hC.YP)(()=>n.org_uuid,e=>{e&&i({cache:\"websocket-ms-cache-subscribe\",data:{data:{codes:[m7.MessageBoxSend],organization:e}}})},{immediate:!0}),o(\"onmessageWS\",e=>{if(!!e){if(e.biz_code===m7.MessageBoxSend)t.addNewMessage(e.data)}})}(a),r())},1e3),(0,hC.SK)(()=>{r()})}(a),r.initMessageList(),r.startPolling(),h=setInterval(()=>{r.updateTimeUpdateMark()},3e4)}),(0,hC.SK)(()=>{r.stopPolling(),clearInterval(h),h=null}),setTimeout(()=>{var e,t;e=a,t=()=>{w2(a,r.unreadList.length)},e.$pager?.messageCenterConfig?.subscribe(e=>{e.activeType===w1.unreadMsgCountTrigger&&t()})}),(0,hC.YP)(()=>r.unreadList.length,e=>{w2(a,e)},{immediate:!0}),(e,a)=>((0,hC.wg)(),(0,hC.iD)(hC.HY,null,[s.value?((0,hC.wg)(),(0,hC.j4)(xG,{key:0,position:s.value},null,8,[\"position\"])):(0,hC.kq)(\"\",!0),o.value?((0,hC.wg)(),(0,hC.j4)(xx,{key:1})):(0,hC.kq)(\"\",!0),l.value?((0,hC.wg)(),(0,hC.j4)(Re,{key:2,\"project-uuid\":(0,hC.SU)(i).project_uuid,data:d.value,config:c.value,onCancel:u,onConfirm:p},null,8,[\"project-uuid\",\"data\",\"config\"])):(0,hC.kq)(\"\",!0)],64))}}),Rt=(0,hC.aZ)({__name:\"App\",setup(e){let a=C1();!function(){let e=C1();async function a(r=0){let t=C2.pins||[];if(0!==t.length)try{for(let a of t)await e.addPin(a);t.length>0&&t[0].id&&await e.recenterToPin(t[0].id,1e3),C2.pins=[]}catch(e){console.error(`Failed to restore pins (attempt ${r+1}/3):`,e),r<3&&setTimeout(()=>{a(r+1)},1e3)}}(function(){let e=window.location.hash.includes(\"#/team\");if(!e)return!1;let a=window.location.href,r=a.match(/\\/organization\\/([a-f0-9-]+)/i),t=a.match(/\\/project\\/([a-f0-9-]+)/i),n=r?r[1]:null,i=t?t[1]:null,o=C2.pins||[];return n&&i&&o.length>0?o.some(e=>{let a=e.data,r=a?.organization_uuid,t=a?.project_uuid;return r===n&&t===i}):e})()&&setTimeout(()=>{a()},1e3)}();let{locale:r,dateLocale:t}=function(){let e=_w();return{locale:y6[e]||y6[y4],dateLocale:y5[e]||y5[y4]}}();return(e,n)=>{let i=(0,hC.up)(\"a-config-provider\");return(0,hC.wg)(),(0,hC.j4)(i,{\"prefix-cls\":\"message-app-ant\"},{default:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(bV.Z),{\"theme-overrides\":(0,hC.SU)(bZ),locale:(0,hC.SU)(r),\"date-locale\":(0,hC.SU)(t),class:\"message-app-provider\"},{default:(0,hC.w5)(()=>[(0,hC.Wm)((0,hC.SU)(bU.Z),null,{default:(0,hC.w5)(()=>[(0,hC.Wm)(Rr),(0,hC.Wm)(C8,{visible:(0,hC.SU)(a).tooltipVisible,title:(0,hC.SU)(a).tooltipTitle,content:(0,hC.SU)(a).tooltipContent,position:(0,hC.SU)(a).tooltipPosition,\"popup-time\":(0,hC.SU)(a).tooltipPopupTime},null,8,[\"visible\",\"title\",\"content\",\"position\",\"popup-time\"])]),_:1})]),_:1},8,[\"theme-overrides\",\"locale\",\"date-locale\"])]),_:1})}}}),Rn=(0,_V.default)(Rt,[[\"__scopeId\",\"data-v-379ca282\"]]),Ri=(0,ko.o)({legacy:!0,locale:k_(),messages:kk(),missingWarn:!1,silentTranslationWarn:!0,silentFallbackWarn:!0}),Ro=r.p+\"../assets/svg/aec-loading.84cab6b2.svg\";function Rs(e){let a=document.createElement(\"div\");a.classList.add(\"directive-loading-overlay\");let r=document.createElement(\"div\");r.classList.add(\"directive-loading-spinner\"),r.innerHTML=`<img class=\"directive-rotating-image\" src=\"${Ro}\" />`,a.appendChild(r),e.style.position=\"relative\",e.style.minHeight=\"100px\",e.clientHeight&&e.clientHeight/2>100&&r.classList.add(\"position-top\"),e.appendChild(a)}let Rl={mounted(e,a){a.value&&Rs(e)},updated(e,a){a.value!==a.oldValue&&(a.value?Rs(e):!function(e){let a=e.querySelector(\".directive-loading-overlay\");a&&e.removeChild(a),e.style.position=\"\",e.style.minHeight=\"\"}(e))}};function Rd(){t=(0,hC.ri)(Rn);let e=(0,yi.WB)(),a=(0,yn.p7)({history:(0,yn.r5)(),routes:[]});return n=t.config.globalProperties,t.config.globalProperties.$antPrefix=\"message-app\",!function(e){e.provide(yK,new yU)}(t),t.component(\"DynamicFormItem\",yN),t.use(yr.Z),t.use(wK.ZP),t.use(kX.Z),t.use(k0.ZP),t.use(ye.ZP),t.use(kA.Z),t.use(vL.Z),t.use(bN.ZP),t.use(vr.Z),t.use(bL.Z),t.use(kM.Z),t.use(yt.Z),t.use(kJ.Z),t.use(w9.Z),t.use(zG.Z),t.use(w7.Z),t.use(w5.ZP),t.use(ya.Z),t.use(w8.Z),t.use(bM.Z),t.use(vc.Z),t.use(w0),t.use(a),t.use(e),t.use(Ri),t.directive(\"loading\",Rl),t.mount(\"#message-app\"),t}function Rc(){return n}let Ru=Symbol(\"pager\"),Rp=Symbol(\"mapAppState\"),Rm=Symbol(\"getIds\");!window.__POWERED_BY_QIANKUN__&&(r.e(\"2\").then(r.t.bind(r,42833,23)),Rd());let{bootstrap:Rh,mount:Rf,unmount:Rg,update:R_}=(h=null,f=null,{async bootstrap(){},async mount(e){let a=Rd(),r=n,t=Se(),i=CY(),g=Ra(),_=C1();if(hT=e.mapAppState,e.pager){var b,k,v,z;r.$pager=e.pager,d=hR(a,e.pager),l=e.pager.projectRole.subscribe(e=>{t.setUserProjectInfo(e)}),o=e.pager.organizationId.subscribe(e=>{t.setOrgUuid(e)}),s=e.pager.projectId.subscribe(e=>{t.setProjectUuid(e)}),m=e.pager.organizationRole.subscribe(e=>{t.setOrganizationRoleInfo(e)}),c=e.pager.messageCenterConfig.subscribe(e=>{e?.activeType===w1.allMessageModalVisible&&i.toggleAllMessageModalVisible(),e?.activeType===w1.moreMessageListShowPosition&&i.toggleMoreMessageListVisible(e.data)}),u=e.pager.manualAutoDispatchConfig.subscribe(e=>{e?.activeType===w6.showModal?g.showModal(e?.data):e?.activeType===w6.hideModal&&g.hideModal()}),p=e.pager.mapAlertPinSetterConfig.subscribe(e=>{if(e?.activeType&&e.data)switch(e.activeType){case w4.addPin:_.addPin(e.data);break;case w4.removePin:_.removePin(e.data?.id);break;case w4.updatePin:_.updatePin(e.data);break;case w4.clearAllPins:_.clearAllPins();break;case w4.highlightPin:_.highlightPin(e.data?.id);break;case w4.recenterToPin:_.recenterToPin(e.data?.id)}}),_.setupHoverListener().then(e=>{h=e}),_.setupClickListener().then(e=>{f=e}),a.provide(Ru,e.pager),a.config.globalProperties.$pager=e.pager,b=0,k=hA.Z,v=_b,z=e.pager,_R=k,_E=v,_F=z}e.mapAppState&&a.provide(Rp,e.mapAppState),e.getIds&&(a.provide(Rm,e.getIds),a.config.globalProperties.$getIds=e.getIds),e.webSocketState&&(a.config.globalProperties.$webSocketState=e.webSocketState)},async unmount(){function e(e){e?.unsubscribe()}t?.unmount(),e(l),e(o),e(s),e(d),e(c),e(u),e(p),e(m),h&&(h(),h=null),f&&(f(),f=null),C1().clearAllPins()},async update(e){}})},7855:function(){},61922:function(e,a,r){r(87544),r(23932),r(65834),r(85564),r(27330),r(82842),r(99869),r(98801),r(78481),r(99458),r(52082),r(1011),r(37689),r(58825),r(32747),r(89267),r(51609),r(41801),r(87549),r(41457),r(60380),r(60828),r(78791),r(71361),r(7482),r(12564),r(90109),r(49042),r(98998),r(96082),r(31649),r(22647),r(44483),r(5595),r(43451),r(51651),r(45221),r(53858),r(64478),r(31113),r(10719),r(35969),r(75045),r(49054),r(42441),r(24075),r(4430),r(38427),r(55416),r(29379),r(64906),r(77442),r(99065),r(48177),r(64371),r(1943),r(93113),r(12450),r(2491),r(64609),r(16414),r(96840),r(13306),r(74933),r(31592),r(52210),r(80353),r(1309),r(69347),r(91316),r(98702),r(28683),r(13337),r(88179),r(28829),r(27569),r(95326),r(90373),r(60292),r(78573),r(3923),r(78128),r(86387),r(19011),r(68080),r(27085),r(79761),r(32739),r(90712),r(66757),r(90971),r(12741),r(34791),r(97089),r(52904),r(75338),r(90079),r(18358),r(29826),r(19459),r(36114),r(1399),r(35514),r(58986),r(43743),r(42296),r(24490),r(83921),r(80419),r(18357),r(31430),r(98718),r(63806),r(96702),r(12521),r(6122),r(11716),r(76103),r(93144),r(42800),r(56281),r(8445),r(21595),r(90936),r(59572),r(21373),r(92355),r(26970),r(47917),r(35430),r(69734),r(89314),r(607),r(7209),r(86383),r(21271),r(59553),r(74284),r(17791),r(13457),r(22518),r(82479),r(263),r(32090),r(45064),r(67396),r(85580),r(71259),r(75187),r(20220),r(83579),r(35320),r(84813),r(50359),r(62172),r(19605),r(44813),r(56328),r(42315),r(92422),r(26013),r(41346),r(50748),r(61350),r(55528),r(55148),r(38215),r(14943),r(85253),r(37170),r(3901),r(74964),r(53326),r(25429),r(66567),r(7695),r(52034),r(32501),r(98697),r(57515),r(26498),r(17750),r(10014),r(1075),r(31796),r(22758),r(20481),r(94479),r(11931),r(435),r(72856),r(81087),r(8818),r(4373),r(8770),r(59424),r(84415),r(14264),r(24700),r(32377),r(56813),r(61755),r(40497),r(20171),r(79231),r(498),r(28263)}},a={};function r(t){var n=a[t];if(void 0!==n)return n.exports;var i=a[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,{a:a}),a},(()=>{var e,a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(t,n){if(1&n&&(t=this(t)),8&n||\"object\"==typeof t&&t&&(4&n&&t.__esModule||16&n&&\"function\"==typeof t.then))return t;var i=Object.create(null);r.r(i);var o={};e=e||[null,a({}),a([]),a(a)];for(var s=2&n&&t;\"object\"==typeof s&&!~e.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach(function(e){o[e]=function(){return t[e]}});return o.default=function(){return t},r.d(i,o),i}})(),r.d=function(e,a){for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce(function(a,t){return r.f[t](e,a),a},[]))},r.u=function(e){return\"2\"===e?\"static/js/async/2.7072ab31.js\":\"\"+e+\".javascript\"},r.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||Function(\"return this\")()}catch(e){if(\"object\"==typeof window)return window}}(),r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},(()=>{var e={},a=\"message-app-:\";r.l=function(t,n,i,o){if(e[t]){e[t].push(n);return}if(void 0!==i){for(var s,l,d=document.getElementsByTagName(\"script\"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute(\"src\")==t||u.getAttribute(\"data-webpack\")==a+i){s=u;break}}}!s&&(l=!0,(s=document.createElement(\"script\")).charset=\"utf-8\",s.timeout=120,r.nc&&s.setAttribute(\"nonce\",r.nc),s.setAttribute(\"data-webpack\",a+i),s.src=t),e[t]=[n];var p=function(a,r){s.onerror=s.onload=null,clearTimeout(m);var n=e[t];if(delete e[t],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach(function(e){return e(r)}),a)return a(r)},m=setTimeout(p.bind(null,void 0,{type:\"timeout\",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}})(),r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.nmd=function(e){return e.paths=[],!e.children&&(e.children=[]),e},(()=>{var e=[];r.O=function(a,t,n,i){if(t){i=i||0;for(var o=e.length;o>0&&e[o-1][2]>i;o--)e[o]=e[o-1];e[o]=[t,n,i];return}for(var s=1/0,o=0;o<e.length;o++){for(var t=e[o][0],n=e[o][1],i=e[o][2],l=!0,d=0;d<t.length;d++)(!1&i||s>=i)&&Object.keys(r.O).every(function(e){return r.O[e](t[d])})?t.splice(d--,1):(l=!1,i<s&&(s=i));if(l){e.splice(o--,1);var c=n();void 0!==c&&(a=c)}}return a}})(),r.p=\"/message-app/\",(()=>{var e={980:0};r.f.j=function(a,t){var n=r.o(e,a)?e[a]:void 0;if(0!==n){if(n)t.push(n[2]);else{var i=new Promise(function(r,t){n=e[a]=[r,t]});t.push(n[2]=i);var o=r.p+r.u(a),s=Error();r.l(o,function(t){if(r.o(e,a)&&(0!==(n=e[a])&&(e[a]=void 0),n)){var i=t&&(\"load\"===t.type?\"missing\":t.type),o=t&&t.target&&t.target.src;s.message=\"Loading chunk \"+a+\" failed.\\n(\"+i+\": \"+o+\")\",s.name=\"ChunkLoadError\",s.type=i,s.request=o,n[1](s)}},\"chunk-\"+a,a)}}},r.O.j=function(a){return 0===e[a]};var a=function(a,t){var n=t[0],i=t[1],o=t[2],s,l,d=0;if(n.some(function(a){return 0!==e[a]})){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(o)var c=o(r)}for(a&&a(t);d<n.length;d++)l=n[d],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(c)},t=self[\"webpackJsonp_message-app\"]=self[\"webpackJsonp_message-app\"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})(),r.O(void 0,[\"835\",\"126\",\"72\",\"139\",\"118\",\"409\"],function(){return r(\"36404\")}),r.O(void 0,[\"835\",\"126\",\"72\",\"139\",\"118\",\"409\"],function(){return r(\"61922\")});var t=r.O(void 0,[\"835\",\"126\",\"72\",\"139\",\"118\",\"409\"],function(){return r(\"35767\")});t=r.O(t),this[\"message-app-index\"]=t})(); //# sourceMappingURL=index.a6e7d370.js.map"
}