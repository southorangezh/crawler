{
  "metadata": {
    "source_file": "static\\js\\1715.5bae926b.js",
    "chunk_index": 34,
    "total_chunks": 47,
    "chunk_size": 31520,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:52.798Z"
  },
  "content": "e}var d=function(){function e(e){return Error.call(this),this.message=e?e.length+\" errors occurred during unsubscription:\\n\"+e.map(function(e,t){return t+1+\") \"+e.toString()}).join(\"\\n \"):\"\",this.name=\"UnsubscriptionError\",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),f=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t,n=this,r=n._parentOrParents,o=n._ctorUnsubscribe,a=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var u=0;u<r.length;++u)r[u].remove(this);if(i(a)){o&&(this._unsubscribe=void 0);try{a.call(this)}catch(e){t=e instanceof d?h(e.errors):[e]}}if(c(s)){for(var u=-1,f=s.length;++u<f;){var p=s[u];if(l(p))try{p.unsubscribe()}catch(e){t=t||[],e instanceof d?t=t.concat(h(e.errors)):t.push(e)}}}if(t)throw new d(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case\"function\":n=new e(t);case\"object\":if(n===this||n.closed||\"function\"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;else if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw Error(\"unrecognized teardown \"+t+\" added to Subscription.\")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function h(e){return e.reduce(function(e,t){return e.concat(t instanceof d?t.errors:t)},[])}var p=function(){return\"function\"==typeof Symbol?Symbol(\"rxSubscriber\"):\"@@rxSubscriber_\"+Math.random()}(),m=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=u;break;case 1:if(!n){o.destination=u;break}if(\"object\"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new _(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new _(o,n,r,i)}return o}return r.ZT(t,e),t.prototype[p]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){!this.isStopped&&this._next(e)},t.prototype.error=function(e){!this.isStopped&&(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){!this.isStopped&&(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){if(!this.closed)this.isStopped=!0,e.prototype.unsubscribe.call(this)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(f),_=function(e){function t(t,n,r,o){var a,s=e.call(this)||this;s._parentSubscriber=t;var c=s;return i(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==u&&(i((c=Object.create(n)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=a,s._error=r,s._complete=o,s}return r.ZT(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw e;s(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!a.useDeprecatedSynchronousErrorHandling)throw Error(\"bad call\");try{t.call(this._context,n)}catch(t){if(a.useDeprecatedSynchronousErrorHandling)return e.syncErrorValue=t,e.syncErrorThrown=!0,!0;return s(t),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(m);function v(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof m?r:null}return!0}function g(e,t,n){if(e){if(e instanceof m)return e;if(e[p])return e[p]()}return e||t||n?new m(e,t,n):new m(u)}var y=function(){return\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\"}();function b(e){return e}function D(e){return 0===e.length?b:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}var w=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=g(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),v(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=M(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[y]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:D(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=M(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function M(e){if(!e&&(e=a.Promise||Promise),!e)throw Error(\"no Promise impl found\");return e}var L=n(\"90906\"),k=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.ZT(t,e),t.prototype.unsubscribe=function(){if(this.closed)return;this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,!!t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}},t}(f),T=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.ZT(t,e),t}(m),x=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.ZT(t,e),t.prototype[p]=function(){return new T(this)},t.prototype.lift=function(e){var t=new Y(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new L.N;if(!this.isStopped){for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},t.prototype.error=function(e){if(this.closed)throw new L.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new L.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(!this.closed)return e.prototype._trySubscribe.call(this,t);throw new L.N},t.prototype._subscribe=function(e){if(this.closed)throw new L.N;if(this.hasError)return e.error(this.thrownError),f.EMPTY;if(this.isStopped)return e.complete(),f.EMPTY;else return this.observers.push(e),new k(this,e)},t.prototype.asObservable=function(){var e=new w;return e.source=this,e},t.create=function(e,t){return new Y(e,t)},t}(w),Y=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.ZT(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):f.EMPTY},t}(x)},90906:function(e,t,n){\"use strict\";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message=\"object unsubscribed\",this.name=\"ObjectUnsubscribedError\",this}return e.prototype=Object.create(Error.prototype),e}()},88665:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if(\"object\"!=typeof e||!e||\"object\"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=e[c],d=t[c];if(!1===(i=n?n.call(r,l,d,c):void 0)||void 0===i&&l!==d)return!1}return!0}},17282:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.serialize=t.deserialize=t.registerSerializer=void 0;let r=n(99017),i=r.DefaultSerializer;function o(e){i=r.extendSerializer(i,e)}function a(e){return i.deserialize(e)}function s(e){return i.serialize(e)}t.registerSerializer=o,t.deserialize=a,t.serialize=s},52848:function(e,t,n){\"use strict\";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)\"default\"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(t,\"__esModule\",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var o=n(17282);Object.defineProperty(t,\"registerSerializer\",{enumerable:!0,get:function(){return o.registerSerializer}}),i(n(94244),t);var a=n(665);Object.defineProperty(t,\"expose\",{enumerable:!0,get:function(){return a.expose}});var s=n(99017);Object.defineProperty(t,\"DefaultSerializer\",{enumerable:!0,get:function(){return s.DefaultSerializer}});var u=n(90720);Object.defineProperty(t,\"Transfer\",{enumerable:!0,get:function(){return u.Transfer}})},32591:function(e,t){\"use strict\";let n;function r(){return!n&&(n=i()),n}function i(){try{throw Error()}catch(t){let e=(\"\"+t.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);if(e)return o(e[0])}return\"/\"}function o(e){return(\"\"+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/,\"$1\")+\"/\"}Object.defineProperty(t,\"__esModule\",{value:!0}),t.getBundleURL=t.getBaseURL=void 0,t.getBundleURL=r,t.getBaseURL=o},15221:function(e,t,n){\"use strict\";let r;Object.defineProperty(t,\"__esModule\",{value:!0}),t.isWorkerRuntime=t.getWorkerImplementation=t.defaultPoolSize=void 0;let i=n(32591);t.defaultPoolSize=\"undefined\"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;let o=e=>/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(e);function a(e){let t=new Blob([e],{type:\"application/javascript\"});return URL.createObjectURL(t)}function s(){if(\"undefined\"==typeof Worker)return class{constructor(){throw Error(\"No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.\")}};class e extends Worker{constructor(e,t){var n,r;\"string\"==typeof e&&t&&t._baseURL?e=new URL(e,t._baseURL):\"string\"==typeof e&&!o(e)&&i.getBundleURL().match(/^file:\\/\\//i)&&(e=new URL(e,i.getBundleURL().replace(/\\/[^\\/]+$/,\"/\")),(null===(n=null==t?void 0:t.CORSWorkaround)||void 0===n||n)&&(e=a(`importScripts(${JSON.stringify(e)});`))),\"string\"==typeof e&&o(e)&&(null===(r=null==t?void 0:t.CORSWorkaround)||void 0===r||r)&&(e=a(`importScripts(${JSON.stringify(e)});`)),super(e,t)}}class t extends e{constructor(e,t){super(window.URL.createObjectURL(e),t)}static fromText(e,n){return new t(new window.Blob([e],{type:\"text/javascript\"}),n)}}return{blob:t,default:e}}function u(){return!r&&(r=s()),r}function c(){let e=\"undefined\"!=typeof self&&\"undefined\"!=typeof Window&&self instanceof Window;return\"undefined\"!=typeof self&&!!self.postMessage&&!e}t.getWorkerImplementation=u,t.isWorkerRuntime=c},94244:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;let r=n(15221);Object.defineProperty(t,\"isWorkerRuntime\",{enumerable:!0,get:function(){return r.isWorkerRuntime}});var i=n(26359);Object.defineProperty(t,\"Pool\",{enumerable:!0,get:function(){return i.Pool}});var o=n(37947);Object.defineProperty(t,\"spawn\",{enumerable:!0,get:function(){return o.spawn}});var a=n(22390);Object.defineProperty(t,\"Thread\",{enumerable:!0,get:function(){return a.Thread}}),t.BlobWorker=r.getWorkerImplementation().blob,t.Worker=r.getWorkerImplementation().default},46335:function(e,t,n){\"use strict\";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.createProxyModule=t.createProxyFunction=void 0;let i=r(n(25130)),o=n(59799),a=n(17282),s=n(73379),u=n(90720),c=n(75685),l=i.default(\"threads:master:messages\"),d=1,f=e=>Array.from(new Set(e)),h=e=>e&&e.type===c.WorkerMessageType.error,p=e=>e&&e.type===c.WorkerMessageType.result,m=e=>e&&e.type===c.WorkerMessageType.running;function _(e,t){return new o.Observable(n=>{let r;let i=o=>{if(l(\"Message from worker:\",o.data),o.data&&o.data.uid===t){if(m(o.data))r=o.data.resultType;else if(p(o.data))\"promise\"===r?(void 0!==o.data.payload&&n.next(a.deserialize(o.data.payload)),n.complete(),e.removeEventListener(\"message\",i)):(o.data.payload&&n.next(a.deserialize(o.data.payload)),o.data.complete&&(n.complete(),e.removeEventListener(\"message\",i)));else if(h(o.data)){let t=a.deserialize(o.data.error);n.error(t),e.removeEventListener(\"message\",i)}}};return e.addEventListener(\"message\",i),()=>{if(\"observable\"===r||!r){let n={type:c.MasterMessageType.cancel,uid:t};e.postMessage(n)}e.removeEventListener(\"message\",i)}})}function v(e){if(0===e.length)return{args:[],transferables:[]};let t=[],n=[];for(let r of e)u.isTransferDescriptor(r)?(t.push(a.serialize(r.send)),n.push(...r.transferables)):t.push(a.serialize(r));return{args:t,transferables:0===n.length?n:f(n)}}function g(e,t){return(...n)=>{let r=d++,{args:i,transferables:a}=v(n),u={type:c.MasterMessageType.run,uid:r,method:t,args:i};l(\"Sending command to run function to worker:\",u);try{e.postMessage(u,a)}catch(e){return s.ObservablePromise.from(Promise.reject(e))}return s.ObservablePromise.from(o.multicast(_(e,r)))}}function y(e,t){let n={};for(let r of t)n[r]=g(e,r);return n}t.createProxyFunction=g,t.createProxyModule=y},92372:function(e,t){\"use strict\";var n;Object.defineProperty(t,\"__esModule\",{value:!0}),t.PoolEventType=void 0,!function(e){e.initialized=\"initialized\",e.taskCanceled=\"taskCanceled\",e.taskCompleted=\"taskCompleted\",e.taskFailed=\"taskFailed\",e.taskQueued=\"taskQueued\",e.taskQueueDrained=\"taskQueueDrained\",e.taskStart=\"taskStart\",e.terminated=\"terminated\"}(n=t.PoolEventType||(t.PoolEventType={}))},26359:function(e,t,n){\"use strict\";var r=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;let o=i(n(25130)),a=n(59799),s=n(64903),u=n(15221),c=n(92372);Object.defineProperty(t,\"PoolEventType\",{enumerable:!0,get:function(){return c.PoolEventType}});let l=n(22390);Object.defineProperty(t,\"Thread\",{enumerable:!0,get:function(){return l.Thread}});let d=1;function f(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}function h(e){return new Promise(t=>setTimeout(t,e))}function p(e,t){return e.reduce((e,n)=>[...e,...t(n)],[])}function m(e){return e.replace(/\\W/g,\" \").trim().replace(/\\s+/g,\"-\")}function _(e,t){return f(t).map(()=>({init:e(),runningTasks:[]}))}class v{constructor(e,t){this.eventSubject=new a.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];let n=\"number\"==typeof t?{size:t}:t||{},{size:r=u.defaultPoolSize}=n;this.debug=o.default(`threads:pool:${m(n.name||String(d++))}`),this.options=n,this.workers=_(e,r),this.eventObservable=a.multicast(a.Observable.from(this.eventSubject)),Promise.all(this.workers.map(e=>e.init)).then(()=>this.eventSubject.next({type:c.PoolEventType.initialized,size:this.workers.length}),e=>{this.debug(\"Error while initializing pool worker:\",e),this.eventSubject.error(e),this.initErrors.push(e)})}findIdlingWorker(){let{concurrency:e=1}=this.options;return this.workers.find(t=>t.runningTasks.length<e)}runPoolTask(e,t){return r(this,void 0,void 0,function*(){let n=this.workers.indexOf(e)+1;this.debug(`Running task #${t.id} on worker #${n}...`),this.eventSubject.next({type:c.PoolEventType.taskStart,taskID:t.id,workerID:n});try{let r=yield t.run((yield e.init));this.debug(`Task #${t.id} completed successfully`),this.eventSubject.next({type:c.PoolEventType.taskCompleted,returnValue:r,taskID:t.id,workerID:n})}catch(e){this.debug(`Task #${t.id} failed`),this.eventSubject.next({type:c.PoolEventType.taskFailed,taskID:t.id,error:e,workerID:n})}})}run(e,t){return r(this,void 0,void 0,function*(){let n=r(this,void 0,void 0,function*(){let r=()=>{e.runningTasks=e.runningTasks.filter(e=>e!==n)};yield h(0);try{yield this.runPoolTask(e,t)}finally{r(),this.isClosing||this.scheduleWork()}});e.runningTasks.push(n)})}scheduleWork(){this.debug(\"Attempt de-queueing a task in order to run it...\");let e=this.findIdlingWorker();if(!e)return;let t=this.taskQueue.shift();if(!t){this.debug(\"Task queue is empty\"),this.eventSubject.next({type:c.PoolEventType.taskQueueDrained});return}this.run(e,t)}taskCompletion(e){return new Promise((t,n)=>{let r=this.events().subscribe(i=>{i.type===c.PoolEventType.taskCompleted&&i.taskID===e?(r.unsubscribe(),t(i.returnValue)):i.type===c.PoolEventType.taskFailed&&i.taskID===e?(r.unsubscribe(),n(i.error)):i.type===c.PoolEventType.terminated&&(r.unsubscribe(),n(Error(\"Pool has been terminated before task was run.\")))})})}settled(e=!1){return r(this,void 0,void 0,function*(){let t=()=>p(this.workers,e=>e.runningTasks),n=[],r=this.eventObservable.subscribe(e=>{e.type===c.PoolEventType.taskFailed&&n.push(e.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):e&&0===this.taskQueue.length?(yield s.allSettled(t()),n):(yield new Promise((e,t)=>{let n=this.eventObservable.subscribe({next(t){t.type===c.PoolEventType.taskQueueDrained&&(n.unsubscribe(),e(void 0))},error:t})}),yield s.allSettled(t()),r.unsubscribe(),n)})}completed(e=!1){return r(this,void 0,void 0,function*(){let t=this.settled(e),n=new Promise((e,n)=>{let r=this.eventObservable.subscribe({next(i){i.type===c.PoolEventType.taskQueueDrained?(r.unsubscribe(),e(t)):i.type===c.PoolEventType.taskFailed&&(r.unsubscribe(),n(i.error))},error:n})}),r=yield Promise.race([t,n]);if(r.length>0)throw r[0]})}events(){return this.eventObservable}queue(e){let{maxQueuedJobs:t=1/0}=this.options;if(this.isClosing)throw Error(\"Cannot schedule pool tasks after terminate() has been called.\");if(this.initErrors.length>0)throw this.initErrors[0];let n=this.nextTaskID++,r=this.taskCompletion(n);r.catch(e=>{this.debug(`Task #${n} errored:`,e)});let i={id:n,run:e,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(e=>e!==i),this.eventSubject.next({type:c.PoolEventType.taskCanceled,taskID:i.id}))},then:r.then.bind(r)};if(this.taskQueue.length>=t)throw Error(\"Maximum number of pool tasks queued. Refusing to queue another one.\\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.\");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:c.PoolEventType.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(e){return r(this,void 0,void 0,function*(){this.isClosing=!0,!e&&(yield this.completed(!0)),this.eventSubject.next({type:c.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(e=>r(this,void 0,void 0,function*(){return l.Thread.terminate((yield e.init))})))})}}function g(e,t){return new v(e,t)}v.EventType=c.PoolEventType,g.EventType=c.PoolEventType,t.Pool=g},37947:function(e,t,n){\"use strict\";var r=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.spawn=void 0;let o=i(n(25130)),a=n(59799),s=n(17282),u=n(23436),c=n(50036),l=n(75273),d=n(46335),f=o.default(\"threads:master:messages\"),h=o.default(\"threads:master:spawn\"),p=o.default(\"threads:master:thread-utils\"),m=e=>e&&\"init\"===e.type,_=e=>e&&\"uncaughtError\"===e.type,v=1e4;function g(e,t,n){return r(this,void 0,void 0,function*(){let r;let i=new Promise((e,i)=>{r=setTimeout(()=>i(Error(n)),t)}),o=yield Promise.race([e,i]);return clearTimeout(r),o})}function y(e){return new Promise((t,n)=>{let r=i=>{f(\"Message from worker before finishing initialization:\",i.data),m(i.data)?(e.removeEventListener(\"message\",r),t(i.data)):_(i.data)&&(e.removeEventListener(\"message\",r),n(s.deserialize(i.data.error)))};e.addEventListener(\"message\",r)})}function b(e,t){return new a.Observable(n=>{let r=e=>{let t={type:l.WorkerEventType.message,data:e.data};n.next(t)},i=e=>{p(\"Unhandled promise rejection event in thread:\",e);let t={type:l.WorkerEventType.internalError,error:Error(e.reason)};n.next(t)};e.addEventListener(\"message\",r),e.addEventListener(\"unhandledrejection\",i),t.then(()=>{let t={type:l.WorkerEventType.termination};e.removeEventListener(\"message\",r),e.removeEventListener(\"unhandledrejection\",i),n.next(t),n.complete()})})}function D(e){let[t,n]=u.createPromiseWithResolver();return{terminate:()=>r(this,void 0,void 0,function*(){p(\"Terminating worker\"),yield e.terminate(),n()}),termination:t}}function w(e,t,n,r){let i=n.filter(e=>e.type===l.WorkerEventType.internalError).map(e=>e.error);return Object.assign(e,{[c.$errors]:i,[c.$events]:n,[c.$terminate]:r,[c.$worker]:t})}function M(e,t){return r(this,void 0,void 0,function*(){h(\"Initializing new thread\");let n=t&&t.timeout?t.timeout:v,r=(yield g(y(e),n,`Timeout: Did not receive an init message from worker after ${n}ms. Make sure the worker calls expose().`)).exposed,{termination:i,terminate:o}=D(e),a=b(e,i);if(\"function\"===r.type)return w(d.createProxyFunction(e),e,a,o);if(\"module\"===r.type)return w(d.createProxyModule(e,r.methods),e,a,o);{let e=r.type;throw Error(`Worker init message states unexpected type of expose(): ${e}`)}})}t.spawn=M},22390:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Thread=void 0;let r=n(50036);function i(e){throw Error(e)}t.Thread={errors:e=>e[r.$errors]||i(\"Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\"),events:e=>e[r.$events]||i(\"Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\"),terminate:e=>e[r.$terminate]()}},73379:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.ObservablePromise=void 0;let r=n(59799),i=()=>void 0,o=e=>e,a=e=>Promise.resolve().then(e);function s(e){throw e}function u(e){return e&&\"function\"==typeof e.then}class c extends r.Observable{constructor(e){super(t=>{let n=this,r=Object.assign(Object.assign({},t),{complete(){t.complete(),n.onCompletion()},error(e){t.error(e),n.onError(e)},next(e){t.next(e),n.onNext(e)}});try{return this.initHasRun=!0,e(r)}catch(e){r.error(e)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state=\"pending\"}onNext(e){!this.firstValueSet&&(this.firstValue=e,this.firstValueSet=!0)}onError(e){for(let t of(this.state=\"rejected\",this.rejection=e,this.rejectionCallbacks))a(()=>t(e))}onCompletion(){for(let e of(this.state=\"fulfilled\",this.fulfillmentCallbacks))a(()=>e(this.firstValue))}then(e,t){let n=e||o,r=t||s,i=!1;return new Promise((e,t)=>{let o=n=>{if(!i){i=!0;try{e(r(n))}catch(e){t(e)}}},a=t=>{try{e(n(t))}catch(e){o(e)}};return(!this.initHasRun&&this.subscribe({error:o}),\"fulfilled\"===this.state)?e(n(this.firstValue)):\"rejected\"===this.state?(i=!0,e(r(this.rejection))):void(this.fulfillmentCallbacks.push(a),this.rejectionCallbacks.push(o))})}catch(e){return this.then(void 0,e)}finally(e){let t=e||i;return this.then(e=>(t(),e),()=>t())}static from(e){return u(e)?new c(t=>{let n=e=>{t.next(e),t.complete()},r=e=>{t.error(e)};e.then(n,r)}):super.from(e)}}t.ObservablePromise=c},64903:function(e,t){\"use strict\";function n(e){return Promise.all(e.map(e=>{let t=e=>({status:\"fulfilled\",value:e}),n=e=>({status:\"rejected\",reason:e}),r=Promise.resolve(e);try{return r.then(t,n)}catch(e){return Promise.reject(e)}}))}Object.defineProperty(t,\"__esModule\",{value:!0}),t.allSettled=void 0,t.allSettled=n},23436:function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.createPromiseWithResolver=void 0;let n=()=>void 0;function r(){let e,t=!1,r=n,i=new Promise(n=>{t?n(e):r=n});return[i,n=>{t=!0,r(e=n)}]}t.createPromiseWithResolver=r},99017:function(e,t){\"use strict\";function n(e,t){let n=e.deserialize.bind(e),r=e.serialize.bind(e);return{deserialize:e=>t.deserialize(e,n),serialize:e=>t.serialize(e,r)}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.DefaultSerializer=t.extendSerializer=void 0,t.extendSerializer=n;let r={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:\"$$error\",message:e.message,name:e.name,stack:e.stack})},i=e=>e&&\"object\"==typeof e&&\"__error_marker\"in e&&\"$$error\"===e.__error_marker;t.DefaultSerializer={deserialize:e=>i(e)?r.deserialize(e):e,serialize:e=>e instanceof Error?r.serialize(e):e}},50036:function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.$worker=t.$transferable=t.$terminate=t.$events=t.$errors=void 0,t.$errors=Symbol(\"thread.errors\"),t.$events=Symbol(\"thread.events\"),t.$terminate=Symbol(\"thread.terminate\"),t.$transferable=Symbol(\"thread.transferable\"),t.$worker=Symbol(\"thread.worker\")},90720:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.Transfer=t.isTransferDescriptor=void 0;let r=n(50036);function i(e){return!!e&&\"object\"==typeof e||!1}function o(e){return e&&\"object\"==typeof e&&e[r.$transferable]}function a(e,t){if(!t){if(!i(e))throw Error();t=[e]}return{[r.$transferable]:!0,send:e,transferables:t}}t.isTransferDescriptor=o,t.Transfer=a},75273:function(e,t,n){\"use strict\";var r;Object.defineProperty(t,\"__esModule\",{value:!0}),t.WorkerEventType=void 0,n(50036),!function(e){e.internalError=\"internalError\",e.message=\"message\",e.termination=\"termination\"}(r=t.WorkerEventType||(t.WorkerEventType={}))},75685:function(e,t){\"use strict\";var n,r;Object.defineProperty(t,\"__esModule\",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,!function(e){e.cancel=\"cancel\",e.run=\"run\"}(n=t.MasterMessageType||(t.MasterMessageType={})),!function(e){e.error=\"error\",e.init=\"init\",e.result=\"result\",e.running=\"running\",e.uncaughtError=\"uncaughtError\"}(r=t.WorkerMessageType||(t.WorkerMessageType={}))},93071:function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});let n=function(){let e=\"undefined\"!=typeof self&&\"undefined\"!=typeof Window&&self instanceof Window;return\"undefined\"!=typeof self&&!!self.postMessage&&!e},r=function(e,t){self.postMessage(e,t)},i=function(e){let t=t=>{e(t.data)},n=()=>{self.removeEventListener(\"message\",t)};return self.addEventListener(\"message\",t),n};t.default={isWorkerRuntime:n,postMessageToMaster:r,subscribeToMasterMessages:i}},665:function(e,t,n){\"use strict\";var r=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;let o=i(n(14734)),a=n(17282),s=n(90720),u=n(75685),c=i(n(93071));var l=n(17282);Object.defineProperty(t,\"registerSerializer\",{enumerable:!0,get:function(){return l.registerSerializer}});var d=n(90720);Object.defineProperty(t,\"Transfer\",{enumerable:!0,get:function(){return d.Transfer}}),t.isWorkerRuntime=c.default.isWorkerRuntime;let f=!1,h=new Map,p=e=>e&&e.type===u.MasterMessageType.cancel,m=e=>e&&e.type===u.MasterMessageType.run,_=e=>o.default(e)||v(e);function v(e){return e&&\"object\"==typeof e&&\"function\"==typeof e.subscribe}function g(e){return s.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function y(){let e={type:u.WorkerMessageType.init,exposed:{type:\"function\"}};c.default.postMessageToMaster(e)}function b(e){let t={type:u.WorkerMessageType.init,exposed:{type:\"module\",methods:e}};c.default.postMessageToMaster(t)}function D(e,t){let{payload:n,transferables:r}=g(t),i={type:u.WorkerMessageType.error,uid:e,error:a.serialize(n)};c.default.postMessageToMaster(i,r)}function w(e,t,n){let{payload:r,transferables:i}=g(n),o={type:u.WorkerMessageType.result,uid:e,complete:!!t||void 0,payload:r};c.default.postMessageToMaster(o,i)}function M(e,t){let n={type:u.WorkerMessageType.running,uid:e,resultType:t};c.default.postMessageToMaster(n)}function L(e){try{let t={type:u.WorkerMessageType.uncaughtError,error:a.serialize(e)};c.default.postMessageToMaster(t)}catch(t){console.error(\"Not reporting uncaught error back"
}