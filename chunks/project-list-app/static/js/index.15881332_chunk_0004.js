{
  "metadata": {
    "source_file": "project-list-app\\static\\js\\index.15881332.js",
    "chunk_index": 4,
    "total_chunks": 5,
    "chunk_size": 121583,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:52.730Z"
  },
  "content": "0!==a.used&&!0!==a.used)},defaultDisplayName:p,getDisplayName:function(t,o){let a=e.configs[t][o];return a&&a.displayName?a.displayName:p[t][o]},getMinMax:function(t,o){let a=e.configs[t][o];return a&&a.minmax?a.minmax:[-1e9,1e9]},togglePointFromMap:function(e,t){let a=(0,uj.SU)(r);a>-1&&a!==t&&o.value.splice(a,1,{...o.value[a],pointFromMapActive:!1}),e.pointFromMapActive=!e.pointFromMapActive,e.pointFromMapActive?(r.value=t,-1===a&&c(d,!0)):c(d,!1)},focusPoint:function(e){i=e.target},handlePointChange:function(e,o,a,r){if(!!e[a]||!!r)e[a]=r??\"0\",_.value.forEach(t=>{\"\"===e[t]&&(e[t]=\"0\")}),t(\"row-change\",o,e)},hasValue:function(e){return[\"srcX\",\"srcY\",\"srcH\",\"targetLat\",\"targetLng\",\"targetH\"].some(t=>bv(e[t]))},canAddRow:g,addRow:function(){if(!!g.value)o.value.push({srcX:\"\",srcY:\"\",srcH:\"\",targetLat:\"\",targetLng:\"\",targetH:\"\",errorRange:\"\",pointFromMapActive:!1})},removeRow:function(e){o.value.splice(e,1),r.value>-1&&c(d,!1),t(\"clear-row\",e)},confirm:function(){t(\"confirm\",(0,uL.cloneDeep)((0,uj.SU)(o)))},DoubleDelete:bA}}}),bM=(0,gU.Z)(bT,function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t(\"div\",{staticClass:\"point-pairs-table\"},[t(\"header\",[t(\"div\",{staticClass:\"column column__point\"},[e._v(\" \"+e._s(e.$t(\"web.coordinate.point\"))+\" \")]),t(\"div\",{staticClass:\"column column__source\"},[e._v(\" \"+e._s(e.colNames[0])+\" \")]),t(\"div\",{staticClass:\"column column__dest\"},[e._v(\" \"+e._s(e.colNames[1])+\" \")]),t(\"div\",{staticClass:\"column column__error-range\"},[e._v(\" \"+e._s(e.$t(\"web.coordinate.transform_error_range\"))+\" \")]),t(\"div\",{staticClass:\"column column__operations\"},[e._v(\" \"+e._s(e.$t(\"common.action.operation\"))+\" \")])]),t(\"main\",e._l(o.list,function(a,r){return t(\"div\",{key:r,staticClass:\"table-row\"},[t(\"div\",{staticClass:\"column column__point\"},[e._v(\" \"+e._s(r+1)+\" \")]),t(\"div\",{staticClass:\"column column__source\"},[o.isRowUsed(\"src\",0)?t(\"div\",{staticClass:\"point-input-wrap\"},[t(\"span\",[e._v(e._s(o.getDisplayName(\"src\",0)))]),t(\"UranusInputNumber\",{staticClass:\"point-input\",attrs:{value:a.srcX,min:o.getMinMax(\"src\",0)[0],max:o.getMinMax(\"src\",0)[1]},on:{focus:o.focusPoint,change:function(e){return o.handlePointChange(a,r,\"srcX\",e)}}})],1):e._e(),o.isRowUsed(\"src\",1)?t(\"div\",{staticClass:\"point-input-wrap\"},[t(\"span\",[e._v(e._s(o.getDisplayName(\"src\",1)))]),t(\"UranusInputNumber\",{staticClass:\"point-input\",attrs:{value:a.srcY,min:o.getMinMax(\"src\",1)[0],max:o.getMinMax(\"src\",1)[1]},on:{focus:o.focusPoint,change:function(e){return o.handlePointChange(a,r,\"srcY\",e)}}})],1):e._e(),o.isRowUsed(\"src\",2)?t(\"div\",{staticClass:\"point-input-wrap\"},[t(\"span\",[e._v(e._s(o.getDisplayName(\"src\",2)))]),t(\"UranusInputNumber\",{staticClass:\"point-input\",attrs:{value:a.srcH,min:o.getMinMax(\"src\",2)[0],max:o.getMinMax(\"src\",2)[1]},on:{focus:o.focusPoint,change:function(e){return o.handlePointChange(a,r,\"srcH\",e)}}})],1):e._e()]),t(\"div\",{staticClass:\"column column__dest\"},[t(\"div\",{staticClass:\"point-input-group\"},[o.isRowUsed(\"dest\",0)?t(\"div\",{staticClass:\"point-input-wrap\"},[t(\"span\",[e._v(e._s(o.getDisplayName(\"dest\",0)))]),t(\"UranusInputNumber\",{staticClass:\"point-input\",attrs:{value:a.targetLat,min:o.getMinMax(\"dest\",0)[0],max:o.getMinMax(\"dest\",0)[1],precision:7},on:{focus:o.focusPoint,change:function(e){return o.handlePointChange(a,r,\"targetLat\",e)}}})],1):e._e(),o.isRowUsed(\"dest\",1)?t(\"div\",{staticClass:\"point-input-wrap\"},[t(\"span\",[e._v(e._s(o.getDisplayName(\"dest\",1)))]),t(\"UranusInputNumber\",{staticClass:\"point-input\",attrs:{value:a.targetLng,min:o.getMinMax(\"dest\",1)[0],max:o.getMinMax(\"dest\",1)[1],precision:7},on:{focus:o.focusPoint,change:function(e){return o.handlePointChange(a,r,\"targetLng\",e)}}})],1):e._e(),o.isRowUsed(\"dest\",2)?t(\"div\",{staticClass:\"point-input-wrap\"},[t(\"span\",[e._v(e._s(o.getDisplayName(\"dest\",2)))]),t(\"UranusInputNumber\",{staticClass:\"point-input\",attrs:{value:a.targetH,min:o.getMinMax(\"dest\",2)[0],max:o.getMinMax(\"dest\",2)[1],precision:4},on:{focus:o.focusPoint,change:function(e){return o.handlePointChange(a,r,\"targetH\",e)}}})],1):e._e()]),e.enablePickMapPoint?t(\"div\",[t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.coordinate.get_coordinate_from_map\")}},[t(\"UranusButton\",{staticClass:\"map-get-point\",class:{active:a.pointFromMapActive},attrs:{size:\"sm\"},on:{click:function(e){return o.togglePointFromMap(a,r)}}},[t(\"UranusIcon\",{attrs:{name:\"coordinate-get\"}})],1)],1)],1):e._e()]),t(\"div\",{staticClass:\"column column__error-range\"},[e._v(\" \"+e._s(a.errorRange)+\" \")]),t(\"div\",{staticClass:\"column column__operations\"},[t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:o.removeTips}},[t(o.DoubleDelete,{attrs:{\"reset-when-leave\":\"\",\"icon-size\":16,icon:\"less\",disabled:!e.canRemoveRow,radius:4,direct:!o.hasValue(a)},on:{delete:function(e){return o.removeRow(r)}}})],1),o.hasValue(a)?t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.coordinate.clear_line_data\")}},[t(o.DoubleDelete,{attrs:{\"reset-when-leave\":\"\",\"icon-size\":16,radius:4,icon:\"close-circle-fill\"},on:{delete:function(e){return o.clearRowData(r)}}})],1):e._e()],1)])}),0),t(\"footer\",[t(\"UranusButton\",{staticClass:\"flex-align-center-btn\",attrs:{disabled:!o.canAddRow},on:{click:o.addRow}},[t(\"UranusIcon\",{staticClass:\"icon-in-btn\",attrs:{name:\"add\"}}),e._v(\" \"+e._s(e.$t(\"web.common.add_row\"))+\" \")],1),e.noConfirm?e._e():t(\"UranusButton\",{attrs:{type:\"primary\",disabled:!o.canConfirm,loading:e.confirmLoading},on:{click:o.confirm}},[t(\"span\",[e._v(e._s(e.confirmText))])])],1)])},[],!1,null,\"e40e2678\",null).exports,bw={srcX:\"\",srcY:\"\",srcH:\"\",targetLat:\"\",targetLng:\"\",targetH:\"\",errorRange:\"\",pointFromMapActive:!1},bN=(0,uj.aZ)({name:\"ParamCalculatorPanel\",components:{PointPairsTable:bM},props:{orgId:{type:String,default:\"\"},config:{type:Array,default:()=>[\"\",\"\",\"\",\"\"]},horizontalCrs:{type:String,default:\"\"}},setup(e,{root:t,emit:o}){let a=(0,uj.iH)(_L.Helmert_4P);e.config&&(a.value=4===e.config.length?_L.Helmert_4P:_L.BursaWolf_7P);let r=[{label:gp(\"web.coordinate.four_params_calculate\"),value:_L.Helmert_4P},{label:gp(\"web.coordinate.seven_params_calculate\"),value:_L.BursaWolf_7P}],i=(0,uj.Fl)(()=>a.value===_L.Helmert_4P?gp(\"web.coordinate.params_calculator_desc_4p\"):gp(\"web.coordinate.params_calculator_desc_7p\")),n=(0,uj.Fl)(()=>a.value===_L.Helmert_4P?2:3),s=(0,uj.Fl)(()=>{let e=a.value===_L.Helmert_4P;return{src:[{displayName:\"CAD-X\",required:!0,used:!0},{displayName:\"CAD-Y\",required:!0,used:!0},{displayName:\"Z\",required:!e,used:!e,minmax:[-9999,9999]}],dest:[{displayName:\"B\",required:!0,used:!0,minmax:[-90,90]},{displayName:\"L\",required:!0,used:!0,minmax:[-180,180]},{displayName:\"H\",required:!e,used:!e,minmax:[-9999,9999]}]}}),c=(0,uj.iH)([]);function l(e){a.value=e,c.value=Array.from({length:e===_L.Helmert_4P?2:3},()=>(0,uL.cloneDeep)(bw))}l(a.value);let d=(0,uj.Fl)(()=>c.value.some(e=>[\"srcX\",\"srcY\",\"srcH\",\"targetLat\",\"targetLng\",\"targetH\"].some(t=>bv(e[t])))),_=(0,uj.Fl)(()=>4===a.value?c.value.length>2:c.value.length>3),u=(0,uj.iH)(null),m=(0,uj.iH)(uC.NO);async function p(e){if(!function(e){let t=e.target,o=t.value;return o&&!/\\.csv$/i.test(o)?(t.value=\"\",!1):!!t.files&&0!==t.files.length||!1}(e)){yA.Z.error(gp(\"web.common.file_type_unsupported\"));return}try{var t,o,r;let{head:i,rows:n}=await bf(e),s=!0,l=\"\",d=a.value===_L.Helmert_4P;if(t=i,a.value===_L.Helmert_4P?4!==t.length:6!==t.length){yA.Z.error(gp(\"web.coordinate.csv_parse_params_fail_format\")),e.target.value=\"\";return}let _=[];for(let e=0;e<Math.min(n.length,8);e++){;let t=n[e],a=(0,uL.cloneDeep)(bw);if(!t.every(e=>bk(e))){l=gp(\"web.coordinate.csv_parse_params_fail_param_format\"),s=!1;break}let i=d?t[2]:t[3],c=d?t[3]:t[4];if(o=+i,r=+c,Number.isNaN(o)||Number.isNaN(r)||!(o<=90)||!(o>=-90)||!(r>=-180)||!(r<=180)){l=gp(\"web.coordinate.target_point_is_not_lnglat\"),s=!1;break}t.forEach((e,t)=>{0===t?a.srcX=e:1===t?a.srcY=e:2===t?d?a.targetLat=e:a.srcH=e:3===t?d?a.targetLng=e:a.targetLat=e:4!==t||d?5===t&&!d&&(a.targetH=e):a.targetLng=e}),_.push(a)}if(s){m.value=uC.YES;let e=4===a.value?2:3;_=function(e,t,o){let a=[...e];for(;a.length<t;)\"object\"==typeof o&&null!==o?a.push(Array.isArray(o)?[...o]:{...o}):a.push(o);return a}(_,e,bw);let t=n.length>8?gp(\"web.coordinate.point_pairs_max_tip\"):gp(\"common.action.import_success\");yA.Z.success(t),c.value=_}else yA.Z.error(l)}catch{yA.Z.error(gp(\"web.coordinate.csv_parse_params_fail\"))}e.target.value=\"\"}let g=(0,uj.Fl)(()=>{let{src:e,dest:t}=s.value,o=[];return e.forEach((e,t)=>{if(!!e.required)0===t?o.push(\"srcX\"):1===t?o.push(\"srcY\"):o.push(\"srcH\")}),t.forEach((e,t)=>{if(!!e.required)0===t?o.push(\"targetLat\"):1===t?o.push(\"targetLng\"):o.push(\"targetH\")}),o}),y=(0,uj.iH)([]),f=(0,uj.iH)(\"\"),h=(0,uj.iH)(!1),k=(0,uj.Fl)(()=>{let e=uI.DesignMarkPoint;return t&&\"/settings\"===t.$router.currentRoute.path&&(e=uI.CoordinateSetting),{type:a.value,number:c.value.length,import:m.value,source:e}}),v=(0,uj.iH)(0);async function b(){h.value=!0,v.value=Date.now();try{var t;let o=function(){let[t,o,r,i]=function(t){let o=c.value.filter(e=>g.value.some(t=>\"\"!==e[t])),a=t===_L.Helmert_4P,r=a?\"\":\",\",i=o.map(e=>`${e.srcX},${e.srcY}${r}${a?\"\":e.srcH||0}`).join(\";\"),n=o.map(e=>`${e.targetLng},${e.targetLat}${r}${a?\"\":e.targetH||0}`).join(\";\"),s=function(e){if(vq.test(e))return e;if(v0.test(e))return(0,bb.cv)(e);throw Error(\"Invalid horizontal crs format\")}(e.horizontalCrs);return[i,n,s,\"EPSG:4326\"]}(a.value),n={source_point:t,target_point:o,source_crs:r,target_crs:i};return a.value===_L.Helmert_4P?{algorithm_type:_U.computeGeoTransform4Params,convert_input_list:[{algorithm_input:{four_param_input:n}}]}:{algorithm_type:_U.computeGeoTransform7Params,convert_input_list:[{algorithm_input:{seven_param_input:n}}]}}(),r=await yu(e.orgId,o);if(t={import:k.value.import,type:k.value.type,number:k.value.number,calculate_time:Date.now()-v.value,source:k.value.source},window.$reportStatData&&window.$reportStatData({type:\"fh2_system_parameter_configuration_calculate\",eventValue:t}),0!==r.code||1===r.data.solution_result.length){yA.Z.error(gp(\"web.coordinate.param_calculate_error\")),h.value=!1;return}let[i,n]=r.data.solution_result;y.value=i.split(\",\"),f.value=function(){let e=y.value;return a.value===_L.Helmert_4P&&4===e.length?gp(\"web.coordinate.param_four_calculate_result\",{dx:e[0],dy:e[1],r:e[2],s:e[3]}):a.value===_L.BursaWolf_7P&&7===e.length?gp(\"web.coordinate.param_seven_calculate_result\",{dx:e[0],dy:e[1],dz:e[2],rx:e[3],ry:e[4],rz:e[5],s:e[6]}):\"\"}(),n.split(\",\").forEach((e,t)=>{c.value[t].errorRange=(+e).toFixed(3)})}catch{}finally{h.value=!1}}return{goBack:function(){o(\"close-panel\")},paramsType:a,paramsOptions:r,changeParamType:l,desc:i,minNumOfPoints:n,tableConfigs:s,list:c,canExport:d,canRemoveRow:_,importInput:u,downloadTemplate:function(){let e=document.createElement(\"a\"),t=a.value===_L.Helmert_4P?\"template-gcp2d.csv\":\"template-gcp3d.csv\";e.href=`/aec/${t}`,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)},importPointFile:function(){u.value&&u.value.click()},onFileChange:p,calcResultText:f,confirmLoading:h,calculate:b,exportPointPairFile:function(){var e;e={type:k.value.type,source:k.value.source},window.$reportStatData&&window.$reportStatData({type:\"fh2_system_parameter_configuration_output\",eventValue:e});let t=c.value.map(({srcX:e,srcY:t,srcH:o,targetLat:a,targetLng:r,targetH:i})=>({\"CAD-X\":e,\"CAD-Y\":t,Z:o,B:a,L:r,H:i}));a.value===_L.Helmert_4P&&t.forEach(e=>{delete e.Z,delete e.H}),bh(t,gp(\"web.common.point_pairs_file\"))},useData:function(){var e;e={type:k.value.type,source:k.value.source},window.$reportStatData&&window.$reportStatData({type:\"fh2_system_parameter_configuration_apply\",eventValue:e}),o(\"confirm\",y.value)}}}}),bS=(0,gU.Z)(bN,function(){var e=this._self._c;return this._self._setupProxy,e(\"div\",{staticClass:\"param-calculator-panel uranus-scrollbar dark\"},[e(\"div\",{staticClass:\"panel-header\"},[e(\"UranusButton\",{staticClass:\"panel-header__back\",attrs:{plain:\"\"},on:{click:this.goBack}},[e(\"UranusIcon\",{attrs:{name:\"back\"}})],1),e(\"UranusRadioGroup\",{attrs:{value:this.paramsType,\"data-source\":this.paramsOptions},on:{change:this.changeParamType}})],1),e(\"div\",{staticClass:\"box-item box-item--desc\"},[this._v(\" \"+this._s(this.desc)+\" \")]),e(\"div\",{staticClass:\"box-item text-right\"},[e(\"UranusButton\",{staticClass:\"flex-align-center-btn\",attrs:{size:\"sm\"},on:{click:this.downloadTemplate}},[e(\"UranusIcon\",{staticClass:\"icon-in-btn\",attrs:{name:\"download\"}}),this._v(\" \"+this._s(this.$t(\"web.common.download_import_template\"))+\" \")],1),e(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:this.$t(\"web.coordinate.csv_import_statement\")}},[e(\"UranusButton\",{staticClass:\"flex-align-center-btn\",attrs:{size:\"sm\"},on:{click:this.importPointFile}},[e(\"UranusIcon\",{staticClass:\"icon-in-btn\",attrs:{name:\"import\"}}),this._v(\" \"+this._s(this.$t(\"web.coordinate.import_point_pairs_file\"))+\" \"),e(\"input\",{ref:\"importInput\",staticStyle:{display:\"none\"},attrs:{type:\"file\",accept:\".csv\"},on:{change:this.onFileChange}})],1)],1),e(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:this.$t(\"web.coordinate.export_result_tooltip\")}},[e(\"UranusButton\",{staticClass:\"flex-align-center-btn\",attrs:{size:\"sm\",disabled:!this.canExport},on:{click:this.exportPointPairFile}},[e(\"UranusIcon\",{staticClass:\"icon-in-btn\",attrs:{name:\"export2\"}}),this._v(\" \"+this._s(this.$t(\"web.coordinate.export_point_pairs_file\"))+\" \")],1)],1)],1),e(\"div\",{staticClass:\"box-item point-pairs-table\"},[e(\"PointPairsTable\",{attrs:{data:this.list,min:this.minNumOfPoints,\"can-remove-row\":this.canRemoveRow,\"confirm-loading\":this.confirmLoading,configs:this.tableConfigs},on:{confirm:this.calculate}})],1),e(\"div\",{staticClass:\"box-item\"},[e(\"div\",{staticClass:\"box-item__title\"},[this._v(\" \"+this._s(this.$t(\"web.common.calculate_result\"))+\" \")]),e(\"div\",{staticClass:\"calculate-result-wrap\"},[this._v(\" \"+this._s(this.calcResultText)+\" \")])]),e(\"div\",{staticClass:\"box-item text-right\"},[e(\"UranusButton\",{attrs:{size:\"md\",type:\"primary\",disabled:!this.calcResultText},on:{click:this.useData}},[this._v(\" \"+this._s(this.$t(\"common.action.use\"))+\" \")])],1),e(\"div\",{staticClass:\"box-item usage-wrap\"},[e(\"section\",[e(\"div\",{staticClass:\"usage-wrap__title\"},[this._v(\" \"+this._s(this.$t(\"web.coordinate.how_get_control_point\"))+\" \")]),e(\"div\",{staticClass:\"usage-wrap__desc\"},[e(\"p\",[this._v(this._s(this.$t(\"web.coordinate.how_get_control_point_desc1\")))]),e(\"p\",[this._v(this._s(this.$t(\"web.coordinate.how_get_control_point_desc2\")))])])]),e(\"section\",{staticStyle:{\"margin-top\":\"16px\"}},[e(\"div\",{staticClass:\"usage-wrap__title\"},[this._v(\" \"+this._s(this.$t(\"web.common.notice\"))+\" \")]),e(\"div\",{staticClass:\"usage-wrap__desc\"},[e(\"p\",[this._v(this._s(this.$t(\"web.coordinate.notice_desc1\")))]),e(\"p\",[this._v(this._s(this.$t(\"web.coordinate.notice_desc2\")))])])])])])},[],!1,null,\"7facb05e\",null).exports;String(lv.Assistant);let bP=[kT.FPV];let bD={\"0-100-0\":[{cameraIndex:\"98-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"web.cockpit.record.camera.name.m4D\",void 0)},{cameraIndex:\"176-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.assistant\",void 0)}],\"0-100-1\":[{cameraIndex:\"99-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"web.cockpit.record.camera.name.m4TD\",void 0)},{cameraIndex:\"176-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.assistant\",void 0)}],\"3-3-0\":[{cameraIndex:\"165-0-7\",defaultVideoIndex:\"normal-0\",name:gp(\"common.device.dock\",void 0)},{cameraIndex:\"176-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.assistant\",void 0)}],\"0-91-0\":[{cameraIndex:\"80-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.m3D_camera\",void 0)},{cameraIndex:\"176-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.assistant\",void 0)}],\"0-91-1\":[{cameraIndex:\"81-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.m3TD_camera\",void 0)},{cameraIndex:\"176-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.assistant\",void 0)}],\"3-2-0\":[{cameraIndex:\"165-0-7\",defaultVideoIndex:\"normal-0\",name:gp(\"common.device.dock\",void 0)}],\"0-77-0\":[{cameraIndex:\"\",defaultVideoIndex:\"normal-0\",name:gp(\"web.cockpit.record.camera.name.m3E\",void 0)}],\"0-77-1\":[{cameraIndex:\"\",defaultVideoIndex:\"normal-0\",name:gp(\"web.cockpit.record.camera.name.m3T\",void 0)}],\"0-77-3\":[{cameraIndex:\"129-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"web.cockpit.record.camera.name.m3TA\",void 0)}],\"3-1-0\":[{cameraIndex:\"165-0-7\",defaultVideoIndex:\"normal-0\",name:gp(\"common.device.dock\",void 0)}],\"0-67-0\":[{cameraIndex:\"52-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.m30_camera\",void 0)},{cameraIndex:\"39-0-7\",defaultVideoIndex:\"normal-0\",name:\"FPV\"}],\"0-67-1\":[{cameraIndex:\"53-0-0\",defaultVideoIndex:\"normal-0\",name:gp(\"device.payload_name.m30t_camera\",void 0)},{cameraIndex:\"39-0-7\",defaultVideoIndex:\"normal-0\",name:\"FPV\"}]};function bO(e){let t=e.device_model?.key||\"\",o=bD[t]||[];return{sn:e.device_sn,name:e.device_project_callsign,deviceModelKey:t,type:e.device_model?.class===s8.drone?uP.DRONE:uP.DOCK,longitude:e.device_state?.longitude,latitude:e.device_state?.latitude,cameraList:o.map(t=>({...t,id:`${e.device_sn}_${t.cameraIndex}`,autoRecord:!1}))}}(nd=uP||(uP={})).DRONE=\"drone\",nd.DOCK=\"dock\",(n_=uD||(uD={}))[n_.DockCamera=0]=\"DockCamera\",n_[n_.DroneFpv=1]=\"DroneFpv\",n_[n_.DronePayloadCamera=2]=\"DronePayloadCamera\";let bR=function(e,t){let o=Math.round(10*e)/10;Object.is(o,-0)&&(o=0);let a=o.toLocaleString();return t&&!a.includes(\".\")&&(a+=\".0\"),a},bj=function(e,t){if(t===cf.MemorySpace)return bR(e/1073741824,!0);if(t===cf.LiveTime)return bR(e/60,!0);return bR(e,!1)},bL=(0,uj.aZ)({name:\"RecordingSettings\",components:{UranusPopconfirm:f2},props:{projectShareConfig:Object,projectId:{type:String,default:\"\"},orgId:{type:String,default:void 0},recordingSettings:{type:Object,default:null}},setup(e,{root:t,emit:o}){var a,r,i;let n=(0,uj.iH)([]),s=(0,uj.iH)(!1),c=(0,uj.iH)(!1),l=(0,uj.Fl)(()=>n.value&&n.value.length>0),d=(0,uj.qj)({check:!1,indeterminate:!1,disable:!1}),_=(0,uj.qj)({check:!1,indeterminate:!1,disable:!1}),u=(0,uj.qj)({check:!1,indeterminate:!1,disable:!1}),m=(0,uj.qj)({check:!1,indeterminate:!1,disable:!1}),p=(0,uj.iH)(90),g=(0,uj.qj)({memoryTotal:0,liveTotal:0,memoryUsed:0,liveUsed:0});let y=[{state:_,text:gp(\"web.projects.recording_setup_dock_monitor\",void 0),type:uD.DockCamera},{state:u,text:gp(\"web.projects.recording_setup_fpv_monitor\",void 0),type:uD.DroneFpv},{state:m,text:gp(\"web.projects.recording_setup_camera_monitor\",void 0),type:uD.DronePayloadCamera}],{projectId:f,recordingSettings:h}=(0,uj.BK)(e),{liveDockCombinationList:k}=function(e,t){let o=(0,uj.iH)([]),a=(0,uj.iH)([]),r=new Set;async function i(){let t=[];if(!!e&&!!e.value&&\"\"!==e.value)try{let i=await yc({projectId:e.value});for(let e of i?.data?.list||[]){let o={};if(e.host&&(o.drone=bO(e.host)),!!e.parents?.length)o.docks=[],e.parents.forEach(e=>{if(!!(bD[e.device_model?.key||\"\"]||[]).length)o?.docks?.push(bO(e))}),o.docks.forEach(e=>{e.cameraList.forEach(t=>{let o=`${e.sn}-${t.cameraIndex}`,a=r.has(o);t.autoRecord=a})}),o.drone?.cameraList&&o.drone?.cameraList.forEach(e=>{let t=`${o.drone?.sn}-${e.cameraIndex}`,a=r.has(t);e.autoRecord=a}),t.push(o)}o.value=t,a.value=t.filter(e=>{if(e.docks&&e.docks.length>0)return!0})}catch(e){window.console.error(e)}}return(0,uj.YP)(()=>t.value,async o=>{o&&e.value&&\"\"!==e.value&&(!function(){if(r.clear(),!!t.value&&!t.value.disable_dock_recording)t.value.recording_items&&t.value.recording_items.length>0&&t.value.recording_items.forEach(e=>{e.sn&&e.camera_index&&r.add(`${e.sn}-${e.camera_index}`)})}(),await i())},{immediate:!0}),(0,uj.bv)(()=>{i()}),(0,uj.Ah)(()=>{}),{liveDeviceList:o,liveDockCombinationList:a}}(f,h);function v(){o(\"closePanel\")}function b(){let e=0,t=0,o=0,a=0,r=0,i=0,s=0,c=0;for(let l of n.value){e+=1,o+=1;let n=l?.docks?.[0];n?.cameraList?.[0].autoRecord===!0&&(t+=1,a+=1);let d=l?.drone;if(!!d&&!!d.cameraList)for(let o of d.cameraList)bP.includes(o.cameraIndex)?(e+=1,r+=1,!0===o.autoRecord&&(t+=1,i+=1)):(e+=1,s+=1,!0===o.autoRecord&&(t+=1,c+=1))}e>0?(d.indeterminate=t>0&&t!==e,d.check=t===e,d.disable=!1):d.disable=!0,o>0?(_.indeterminate=a>0&&a!==o,_.check=a===o,_.disable=!1):_.disable=!0,r>0?(u.indeterminate=i>0&&i!==r,u.check=i===r,u.disable=!1):u.disable=!0,s>0?(m.indeterminate=c>0&&c!==s,m.check=c===s,m.disable=!1):m.disable=!0}async function C(){if(!g4(sd.AUTO_RECORD)||!e.orgId)return;let{code:t,data:o}=await yl(e.orgId);if(0===t){let e=o?.resources_summary;e?e.forEach(e=>{e?.type===cy.MemorySpace&&(g.memoryTotal=e.total,g.memoryUsed=e.used),e?.type===cy.LiveTime&&(g.liveTotal=e.total,g.liveUsed=e.used)}):(g.memoryTotal=0,g.memoryUsed=0,g.liveTotal=0,g.liveUsed=0)}}return(0,uj.YP)(()=>k.value,async e=>{n.value=(0,uL.cloneDeep)(k.value),b()},{immediate:!0}),(0,uj.bv)(async()=>{!function(){if(!!e.recordingSettings)s.value=!e.recordingSettings.disable_dock_recording,c.value=!e.recordingSettings.disable_drone_recording,p.value=e.recordingSettings.auto_cleaning_time}(),await C()}),{handleClosePanel:v,checkAllState:d,checkAllDockCameraState:_,checkAllDroneFpvState:u,checkAllPayloadCameraState:m,onCheckAllChange:function(e){!function(e){let t=0;for(let o of n.value){let a=o?.docks?.[0];a?.cameraList?.[0]&&(t+=1,a.cameraList[0].autoRecord=e);let r=o?.drone;if(!!r?.cameraList?.length)for(let o of r.cameraList)t+=1,o.autoRecord=e}0===t&&(d.indeterminate=!1,d.check=e)}(e),b()},getPayloadNameByIndex:vH,expiresTime:p,changeExpiresTime:function(e){if((0,uL.isNil)(e)){p.value=90;return}p.value=e},paymentResourceState:g,handleNumberDisplay:bj,PaymentCardType:cf,STORAGE_UNIT:\"GB\",LIVE_UNIT:\"min\",onCancel:function(){v()},onOk:function(){let t=[];if(s.value)for(let e of n.value){let o=e?.docks?.[0];if(o?.cameraList?.[0]?.autoRecord===!0){let e={sn:o?.sn,camera_index:o?.cameraList?.[0]?.cameraIndex};t.push(e)}let a=e?.drone;if(!!a?.cameraList?.length){for(let e of a.cameraList)if(!0===e.autoRecord){let o={sn:a?.sn,camera_index:e.cameraIndex};t.push(o)}}}o(\"update:record-settings\",{projectId:e.projectId,autoCleaningTime:p.value,disableDockRecord:!s.value,disableDroneRecord:!c.value,recordItemList:t})},liveDockCombinationEditProxy:n,dockCombinationRecordEnable:s,remoteControlDroneRecordEnable:c,onSingleChange:function(e,t,o){if(!!t&&!!o)!function(e,t,o){for(let a of n.value){let r=a?.docks?.[0];if(r?.sn===t&&r?.cameraList?.[0]&&r?.cameraList?.[0]?.cameraIndex===o){r.cameraList[0].autoRecord=e;return}let i=a?.drone;if(!!i&&i?.sn===t&&!!i?.cameraList){for(let t of i.cameraList)if(t.cameraIndex===o){t.autoRecord=e;return}}}}(e,t,o),b()},onChangeDockCombinationRecordEnable:function(e){s.value=e},onRemoteControlDroneRecordEnable:function(e){c.value=e},onClickLinkStorage:function(){window.open(\"https://store.dji.com/cn/product/dji-flighthub-2?vid=141771\",\"_blank\"),window.$reportStatData&&window.$reportStatData({type:_F.Fh2LivePreRecordSettingClickEnlargeStorage})},onClickLinkLive:function(){window.open(\"https://store.dji.com/cn/product/dji-flighthub-2?vid=141775\",\"_blank\"),window.$reportStatData&&window.$reportStatData({type:_F.Fh2LivePreRecordSettingClickGetMoreDuration})},showNameString:function(e,o=!1){return(0,uL.isNil)(e)?\"--\":o?t.$t(e):e},handleDeviceTypeAndCustomNameDisplay:function(e,t){return(0,uL.isNil)(e)||(0,uL.isNil)(t)?\"--\":`${vW(e)}-${t}`},partialSelectStateList:y,handelSetPartialChange:function(e,t){e===uD.DockCamera&&!function(e){if(0===n.value.length){_.indeterminate=!1,_.check=e;return}for(let t of n.value){let o=t?.docks?.[0];o?.cameraList?.[0]&&(o.cameraList[0].autoRecord=e)}b()}(t),e===uD.DroneFpv&&!function(e){let t=0;for(let o of n.value){let a=o?.drone;if(!!a&&!!a.cameraList)for(let o of a.cameraList)bP.includes(o.cameraIndex)&&(t+=1,o.autoRecord=e)}if(0===t){u.indeterminate=!1,u.check=e;return}b()}(t),e===uD.DronePayloadCamera&&!function(e){let t=0;for(let o of n.value){let a=o?.drone;if(!!a?.cameraList?.length)for(let o of a.cameraList)!bP.includes(o.cameraIndex)&&(t+=1,o.autoRecord=e)}if(0===t){m.indeterminate=!1,m.check=e;return}b()}(t)},isNotEmptyList:l,isZH:gg,useFeature:g4,FeatureGateway:sd}}}),bx=(0,gU.Z)(bL,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"recording-set-panel uranus-scrollbar dark\",class:{not_zh:!e.isZH}},[t(\"div\",{staticClass:\"side-header\"},[t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.projects.recording_setup_settings\",expression:\"'web.projects.recording_setup_settings'\"}],staticClass:\"title-text\"}),t(\"span\",{staticClass:\"title-opt\"},[t(\"uranus-icon\",{attrs:{name:\"close\"},on:{click:e.handleClosePanel}})],1)]),t(\"div\",{staticClass:\"row-center\"},[t(\"div\",{staticClass:\"flex-container-center\"},[t(\"div\",{staticStyle:{\"margin-right\":\"2px\"}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_dock_auto\"))+\" \")]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.projects.recording_setup_dock_auto_tip\")}},[t(\"uranus-icon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)],1),t(\"UranusSwitch\",{attrs:{checked:e.dockCombinationRecordEnable,theme:\"dark\"},on:{change:e.onChangeDockCombinationRecordEnable}})],1),t(\"div\",{staticClass:\"live-intro\",class:{\"wide-margin\":!e.dockCombinationRecordEnable||!e.isNotEmptyList}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_dock_auto_content\"))+\" \")]),e.dockCombinationRecordEnable?[e.isNotEmptyList?t(\"div\",{staticClass:\"row-left record-flex-start\"},e._l(e.partialSelectStateList,function(o,a){return t(\"div\",{key:a,staticClass:\"len-type-select-box record-flex-start\"},[o.state.disable?e._e():[t(\"a-checkbox\",{attrs:{checked:o.state.check,indeterminate:o.state.indeterminate},on:{change:function(t){return e.handelSetPartialChange(o.type,t.target.checked)}}}),t(\"div\",{staticClass:\"check-title\"},[e._v(\" \"+e._s(o.text)+\" \")])]],2)}),0):e._e(),t(\"div\",{staticClass:\"monitor-check-table\",class:{\"empty-table\":!e.isNotEmptyList}},[t(\"div\",{staticClass:\"monitor-check-table-header record-flex-start\"},[t(\"div\",{staticClass:\"column-header first-column-item\"},[e.checkAllState.disable?t(\"uranus-tooltip\",{attrs:{title:e.$t(\"web.projects.recording_setup_no_equipment\")}},[t(\"a-checkbox\",{attrs:{checked:e.checkAllState.check,indeterminate:e.checkAllState.indeterminate,disabled:e.checkAllState.disable}})],1):t(\"a-checkbox\",{attrs:{checked:e.checkAllState.check,indeterminate:e.checkAllState.indeterminate},on:{change:function(t){return e.onCheckAllChange(t.target.checked)}}})],1),t(\"div\",{staticClass:\"column-header second-column-item\"},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_device\"))+\" \")]),t(\"div\",{staticClass:\"third-column-item record-flex-start\"},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_device_type_name\"))+\" \")])]),t(\"div\",{staticClass:\"monitor-check-table-body uranus-scrollbar dark\"},[e.isNotEmptyList?e._l(e.liveDockCombinationEditProxy,function(o,a){return t(\"div\",{key:a,staticClass:\"monitor-check-table-item\",class:{\"with-border\":0!==a}},[o?.docks?.[0]?.cameraList?.[0]?t(\"div\",{staticClass:\"monitor-check-table-sub-item record-flex-start\"},[t(\"div\",{staticClass:\"first-column-item\"},[t(\"a-checkbox\",{attrs:{checked:!!o?.docks?.[0]?.cameraList?.[0].autoRecord,indeterminate:!1},on:{change:function(t){return e.onSingleChange(t.target.checked,o?.docks?.[0].sn,o?.docks?.[0]?.cameraList?.[0]?.cameraIndex)}}})],1),t(\"div\",{staticClass:\"second-column-item record-flex-start\"},[t(\"uranus-icon\",{staticStyle:{\"margin-right\":\"4px\"},attrs:{name:\"drone_in_dock\",color:\"#fff\",size:16}}),t(\"div\",{staticClass:\"content flex-container-center\"},[t(\"uranus-tooltip\",{attrs:{content:e.showNameString(o?.docks?.[0]?.cameraList?.[0]?.name,!0)}})],1)],1),t(\"div\",{staticClass:\"third-column-item record-flex-start\"},[t(\"uranus-tooltip\",{attrs:{content:e.handleDeviceTypeAndCustomNameDisplay(o?.docks?.[0]?.deviceModelKey,o?.docks?.[0]?.name)}})],1)]):e._e(),o?.drone?.cameraList&&o?.drone?.cameraList?.length?t(\"div\",{staticClass:\"monitor-check-table-sub-item record-flex-start\"},[t(\"div\",{staticClass:\"monitor-check-table-drone-camera-wrapper\"},e._l(o?.drone?.cameraList,function(a,r){return t(\"div\",{key:r,staticClass:\"monitor-check-table-drone-camera record-flex-start\"},[t(\"div\",{staticClass:\"first-column-item\"},[t(\"a-checkbox\",{attrs:{checked:!!a.autoRecord,indeterminate:!1},on:{change:function(t){return e.onSingleChange(t.target.checked,o?.drone?.sn,a?.cameraIndex)}}})],1),t(\"div\",{staticClass:\"second-column-item record-flex-start\"},[t(\"uranus-icon\",{staticStyle:{\"margin-right\":\"4px\"},attrs:{name:\"drone\",color:\"#fff\",size:14}}),t(\"div\",{staticClass:\"content flex-container-center\"},[t(\"uranus-tooltip\",{attrs:{content:e.showNameString(a?.name)}})],1)],1)])}),0),t(\"div\",{staticClass:\"third-column-item record-flex-start\"},[t(\"uranus-tooltip\",{attrs:{content:e.showNameString(e.handleDeviceTypeAndCustomNameDisplay(o?.drone?.deviceModelKey,o?.drone?.name))}})],1)]):e._e()])}):t(\"UranusEmpty\",{attrs:{theme:\"dark\"}})],2)])]:e._e(),t(\"div\",{staticClass:\"row-center drone-record-title\"},[t(\"div\",{staticClass:\"flex-container-center\"},[t(\"div\",{staticStyle:{\"margin-right\":\"2px\"}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_drone_auto\"))+\" \")]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.projects.recording_setup_drone_auto_tip\")}},[t(\"uranus-icon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)],1),t(\"UranusSwitch\",{attrs:{checked:e.remoteControlDroneRecordEnable,theme:\"dark\"},on:{change:e.onRemoteControlDroneRecordEnable}})],1),t(\"div\",{staticClass:\"live-intro\"},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_drone_auto_content\"))+\" \")]),t(\"div\",{staticClass:\"divide-line\"}),e.dockCombinationRecordEnable||e.remoteControlDroneRecordEnable?[t(\"div\",{staticClass:\"row-center\"},[t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.projects.recording_setup_file_auto_clean\",expression:\"'web.projects.recording_setup_file_auto_clean'\"}]})]),t(\"div\",{staticClass:\"live-intro\"},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_file_auto_clean_content\"))+\" \")]),t(\"div\",{staticClass:\"clean-up-wrapper\"},[t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.projects.recording_setup_file_auto_clean\",expression:\"'web.projects.recording_setup_file_auto_clean'\"}]}),t(\"div\",{staticClass:\"flex-container-center\"},[t(\"div\",{staticClass:\"clean-time-tip\",staticStyle:{\"margin-right\":\"4px\"}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_file_auto_clean_time_tip\"))+\" \")]),t(\"UranusInputNumber\",{staticStyle:{\"margin-right\":\"2px\"},attrs:{value:e.expiresTime,min:7,max:90,precision:0,\"output-digit\":0,theme:\"dark\",\"max-length\":2},on:{change:e.changeExpiresTime}}),t(\"div\",[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_file_auto_clean_time_unit\")))])],1)])]:e._e(),e.useFeature(e.FeatureGateway.AUTO_RECORD)?[t(\"div\",{staticClass:\"resource-card\"},[t(\"div\",{staticClass:\"resource-item\"},[t(\"div\",{staticClass:\"resource-available\"},[t(\"div\",{staticStyle:{\"margin-right\":\"8px\"}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_remaining_storage\"))+\" \")]),t(\"div\",[e._v(\" \"+e._s(e.handleNumberDisplay(e.paymentResourceState.memoryTotal-e.paymentResourceState.memoryUsed,e.PaymentCardType.MemorySpace))+\" \")]),t(\"div\",{staticClass:\"tiny-unit-box\"},[e._v(\" \"+e._s(e.STORAGE_UNIT)+\" \")])]),t(\"div\",{staticClass:\"resource-item-right payment-link\",on:{click:e.onClickLinkStorage}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_resource_enlarge_storage\"))+\" \")])]),t(\"div\",{staticClass:\"resource-item\"},[t(\"div\",{staticClass:\"resource-total-consumed\"},[e._v(\" \"+e._s(e.$t(\"web.paid.service.storage_list_name_all_title\"))+e._s(e.handleNumberDisplay(e.paymentResourceState.memoryTotal,e.PaymentCardType.MemorySpace))+\" \"),t(\"div\",{staticClass:\"tiny-unit-box\"},[e._v(\" \"+e._s(e.STORAGE_UNIT)+\" \")])]),t(\"div\",{staticClass:\"resource-total-consumed\"},[e._v(\" \"+e._s(e.$t(\"web.paid.service.storage_list_name_used_title\"))+e._s(e.handleNumberDisplay(e.paymentResourceState.memoryUsed,e.PaymentCardType.MemorySpace))),t(\"div\",{staticClass:\"tiny-unit-box\"},[e._v(\" \"+e._s(e.STORAGE_UNIT)+\" \")])])])]),t(\"div\",{staticClass:\"resource-card\"},[t(\"div\",{staticClass:\"resource-item\"},[t(\"div\",{staticClass:\"resource-available\"},[t(\"div\",{staticStyle:{\"margin-right\":\"8px\"}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_remaining_live_time\"))+\" \")]),t(\"div\",[e._v(\" \"+e._s(e.handleNumberDisplay(e.paymentResourceState.liveTotal-e.paymentResourceState.liveUsed,e.PaymentCardType.LiveTime))+\" \")]),t(\"div\",{staticClass:\"tiny-unit-box\"},[e._v(\" \"+e._s(e.LIVE_UNIT)+\" \")])]),t(\"div\",{staticClass:\"resource-item-right payment-link\",on:{click:e.onClickLinkLive}},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_resource_more_live_time\"))+\" \")])]),t(\"div\",{staticClass:\"resource-item\"},[t(\"div\",{staticClass:\"resource-total-consumed\"},[e._v(\" \"+e._s(e.$t(\"web.paid.service.storage_list_name_all_title\"))+e._s(e.handleNumberDisplay(e.paymentResourceState.liveTotal,e.PaymentCardType.LiveTime))),t(\"div\",{staticClass:\"tiny-unit-box\"},[e._v(\" \"+e._s(e.LIVE_UNIT)+\" \")])]),t(\"div\",{staticClass:\"resource-total-consumed\"},[e._v(\" \"+e._s(e.$t(\"web.paid.service.storage_list_name_used_title\"))+e._s(e.handleNumberDisplay(e.paymentResourceState.liveUsed,e.PaymentCardType.LiveTime))),t(\"div\",{staticClass:\"tiny-unit-box\"},[e._v(\" \"+e._s(e.LIVE_UNIT)+\" \")])])])])]:e._e(),t(\"div\",{staticClass:\"btn-wrapper\"},[t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.cancel\"),theme:\"dark\"},on:{click:e.onCancel}}),t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.confirm\"),type:\"primary\"},on:{click:e.onOk}})],1)],2)},[],!1,null,\"f4dbd9b8\",null).exports,bU={name:\"Ellipsis\",components:{ATooltip:f9.Z},props:{content:{type:String,default:\"\"},width:{type:Number,default:100},rows:{type:Number,default:1},showTooltip:{type:Boolean,default:!0},contentStyle:{type:Object,default:()=>({})}},data:()=>({isEllipsis:!1,slotText:\"\"}),mounted(){this.checkEllipsis(),this.updateSlotText(),window.addEventListener(\"resize\",this.checkEllipsis)},beforeUnmount(){window.removeEventListener(\"resize\",this.checkEllipsis)},updated(){this.checkEllipsis(),this.updateSlotText()},methods:{checkEllipsis(){let e=this.$refs.textEl;e&&(this.isEllipsis=e.scrollWidth>e.clientWidth||this.rows>1&&e.scrollHeight>e.clientHeight)},updateSlotText(){let e=this.$refs.textEl;e&&!this.content&&(this.slotText=e.textContent||\"\")},getTooltipContent(){return this.content||this.slotText||\"\"}}},bF=(0,gU.Z)(bU,function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"ellipsis-wrapper\"},[t(\"ATooltip\",{attrs:{title:e.showTooltip&&e.isEllipsis?e.getTooltipContent():\"\"}},[t(\"div\",{ref:\"textEl\",staticClass:\"ellipsis-content\",style:{width:e.width?`${e.width}px`:\"100%\",WebkitLineClamp:e.rows,...e.contentStyle}},[e._t(\"default\",function(){return[e._v(e._s(e.content))]})],2)])],1)},[],!1,null,\"a24bd064\",null).exports,bG=(0,uj.aZ)({name:\"AddMemberOrDevicePanel\",components:{UserManualBtn:kA,UranusSort:hv,Ellipsis:bF},props:{orgId:String,proId:String,type:{type:String},existMembers:{type:Array},existDevices:{type:Array},isMemberEditable:{type:Function,default:()=>!0}},setup(e,{root:t,emit:o}){let a=(0,uj.qj)({keyword:\"\",memberData:[],deviceData:[]});(0,uj.YP)(()=>e.type,()=>{(function(){a.keyword=\"\"})(),c()});let r=(0,uj.Fl)(()=>({rowKey:\"user_id\",rowSelection:{selectedRowKeys:e.existMembers,onSelect:n,getCheckboxProps:u},pagination:!1,columns:[{width:160,dataIndex:\"nickname\",key:\"nickname\",ellipsis:!0,slots:{title:\"customMemberName\"},scopedSlots:{customRender:\"member_name\"}},{width:140,title:t.$t(\"web.p_setting.member_account\"),key:\"account\",ellipsis:!0,dataIndex:\"account\",scopedSlots:{customRender:\"ellipsis\"}}],dataSource:a.memberData})),i=(0,uj.Fl)(()=>({rowKey:\"sn\",rowSelection:{selectedRowKeys:e.existDevices,onSelect:s},pagination:!1,columns:[{width:166,dataIndex:\"nickname\",key:\"device\",ellipsis:!0,scopedSlots:{customRender:\"ellipsis\",title:\"customDeviceName\"}},{width:139,title:t.$t(\"web.p_setting.device_type\"),key:\"device_model\",ellipsis:!0,scopedSlots:{customRender:\"device-model\"}}],dataSource:a.deviceData}));function n(e,t){t?o(\"addMember\",e):o(\"removeMember\",e)}function s(e,t){t?o(\"addDevice\",e):o(\"removeDevice\",e)}(0,uj.bv)(()=>{setTimeout(()=>{c()},300)});let c=(0,uL.throttle)(()=>{\"member\"===e.type?d():\"device\"===e.type&&_()},300),l=(0,uj.Fl)(()=>gL.userInfo);function d(t){yi({uuid:e.orgId,page:1,page_size:1e3,q:a.keyword,...m(t),project_uuid:e.proId}).then(e=>{a.memberData=function(e){let t=e.findIndex(e=>e.user_id===l.value?.user_id);if(t>0){let o=e[t];e.splice(t,1),e.unshift(o)}return e}(e.data.list)})}function _(t){yn({uuid:e.orgId,page:1,page_size:1e3,q:a.keyword,project_uuid:e.proId,usage:\"web_organization_devices\",...m(t)}).then(e=>{a.deviceData=e.data.list})}function u(t){return{props:{disabled:!e.isMemberEditable(t.user_id)}}}(0,uj.YP)(()=>e.existMembers,()=>{a.memberData=a.memberData.slice()});let m=e=>(0,uL.isNil)(e)||\"\"===e.order?{}:{sort_type:e.order,sort_column:e.field};return{onSelectMember:n,onSelectDevice:s,handleClosePanel:function(){o(\"closePanel\")},handleGetList:c,handleGetMemberList:d,memberTable:r,deviceTable:i,...(0,uj.BK)(a),toggleDeviceSort:e=>{_(e)},toggleMemberSort:e=>{d(e)},getDeviceNameByKey:vW,curUserInfo:l}}}),bz=(0,gU.Z)(bG,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"add-member-or-device-panel\"},[t(\"div\",{staticClass:\"side-header\"},[t(\"span\",{staticClass:\"title-text\"},[e._v(e._s(\"member\"===e.type?e.$t(\"web.p_setting.add_member\"):e.$t(\"web.project.setting_add_drone\")))]),t(\"span\",{staticClass:\"title-opt\"},[t(\"uranus-icon\",{attrs:{name:\"close\"},on:{click:e.handleClosePanel}})],1)]),\"member\"===e.type?t(\"div\",{staticClass:\"desc-box\"},[e._v(\" \"+e._s(e.$t(\"web.projects.tips1_for_adding_new_members\"))+\" \"+e._s(e.$t(\"web.projects.learn_more\"))+\" \"),t(\"UserManualBtn\",{attrs:{type:\"addMember\"}})],1):\"device\"===e.type?t(\"div\",{staticClass:\"desc-box\"},[e._v(\" \"+e._s(e.$t(\"web.projects.tips_for_added_aircraft_prompts\"))+\" \"+e._s(e.$t(\"web.projects.learn_more\"))+\" \"),t(\"UserManualBtn\",{attrs:{type:\"addDevice\"}})],1):e._e(),t(\"div\",{staticClass:\"desc-box\"},[t(\"uranus-custom-input\",{attrs:{placeholder:e.$t(\"web.p_layer.search_hover\"),search:\"\",theme:\"dark\"},on:{input:e.handleGetList},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:\"keyword\"}})],1),t(\"div\",{staticClass:\"table-box uranus-scrollbar\"},[t(\"uranus-table\",e._b({staticClass:\"member-table dark\",attrs:{theme:\"dark\"},scopedSlots:e._u([{key:\"ellipsis\",fn:function({text:e}){return[t(\"div\",{staticClass:\"ellipsis-wrapper\"},[t(\"uranus-tooltip\",{attrs:{content:e}})],1)]}},{key:\"customMemberName\",fn:function(){return[t(\"span\",{staticClass:\"custom-title\"},[t(\"UranusSort\",{attrs:{field:\"nickname\",\"column-type\":\"text\",theme:\"dark\"},on:{\"toggle-sort\":e.toggleMemberSort}},[e._v(\" \"+e._s(e.$t(\"web.p_setting.member_name_in_org\"))+\" \")])],1)]},proxy:!0},{key:\"customDeviceName\",fn:function(){return[t(\"span\",{staticClass:\"custom-title\"},[t(\"UranusSort\",{attrs:{field:\"nickname\",\"column-type\":\"text\",theme:\"dark\"},on:{\"toggle-sort\":e.toggleDeviceSort}},[e._v(\" \"+e._s(e.$t(\"web.p_setting.device_name_in_org\"))+\" \")])],1)]},proxy:!0},{key:\"device-model\",fn:function({text:o,record:a}){return[t(\"div\",{staticClass:\"ellipsis-wrapper\"},[t(\"uranus-tooltip\",{attrs:{content:e.getDeviceNameByKey(a.device_model.key)}})],1)]}},{key:\"member_name\",fn:function({text:o,record:a}){return[t(\"div\",{staticClass:\"ellipsis-wrapper\"},[t(\"uranus-tooltip\",{attrs:{content:o}}),e.curUserInfo&&a.user_id===e.curUserInfo.user_id?t(\"uranus-tooltip\",{attrs:{slot:\"postfix-icon\",theme:\"dark\",title:e.$t(\"web.p_setting.my_account\"),placement:\"right\"},slot:\"postfix-icon\"},[t(\"uranus-icon\",{attrs:{name:\"players\",color:\"#F7B500\"}})],1):e._e()],1)]}}])},\"uranus-table\",\"member\"===e.type?e.memberTable:e.deviceTable,!1))],1)])},[],!1,null,\"445f72b3\",null).exports;o(\"8049\");var bB=o(\"76793\");let bW=(0,uj.aZ)({name:\"FastAddUserPanel\",components:{UranusIcon:fa,UranusSwitch:hL,AInput:yO.Z,UranusButton:fy,ADatePicker:bB.Z,UranusPopconfirm:f2,UserManualBtn:kA},props:{projectFastJoin:{type:Object,default:{}},projectId:{type:String},projectName:{type:String},projectUUid:{type:String}},setup(e,{emit:t,root:o}){let a=(0,uj.qj)({status:e.projectFastJoin.status,code:e.projectFastJoin.code,deadline_at:kh()(e.projectFastJoin.deadline_at),is_expired:e.projectFastJoin.is_expired});(0,uj.YP)(()=>e.projectFastJoin,()=>{a.status=e.projectFastJoin.status,a.code=e.projectFastJoin.code,a.deadline_at=kh()(e.projectFastJoin.deadline_at),a.is_expired=e.projectFastJoin.is_expired},{immediate:!0});let r=0,i=()=>{t(\"saveData\")},n=(0,uj.iH)(!1),s=e=>{n.value=e},c=a,l=(0,uj.iH)(!1),d=()=>{let e=!0;return 6===a.code.length&&/^[a-z0-9]{6}$/i.test(a.code)?l.value=!1:(l.value=!0,e=!1),e},_=(0,uj.iH)(!1),u=(e,t)=>{let o=[];for(let a=e;a<t;a++)o.push(a);return o},m=()=>{t(\"updateProjectFastJoin\",{status:a.status,code:a.code,deadline_at:a.deadline_at.unix(),is_expired:!1}),i()};(0,uj.YP)(()=>a.status,()=>{!0===a.status&&setTimeout(()=>{p.value=!0},200)});let p=(0,uj.iH)(!1),{zoomClass:g}=vv();return{handleClosePanel:()=>{t(\"closePanel\")},copyText:()=>{let t=`?is-fast-join=true&id=${e.projectId}&code=${a.code}`,i=`${window.location.protocol}//${window.location.host}/user-center#/my-organization`;!function(e,t){let o=()=>{let o=document.createElement(\"textarea\");document.body.appendChild(o),o.style.position=\"fixed\",o.style.clip=\"rect(0 0 0 0)\",o.style.top=\"10px\",o.value=e,o.select(),document.execCommand(\"copy\",!0)&&t?.(),document.body.removeChild(o)};navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{t?.()}).catch(e=>{console.error(e),o()}):o()}(o.$t(\"web.p_setting.project_join_apply_info\",{project_name:e.projectName,project_id:e.projectId,code:a.code,deadline:kh()(a.deadline_at).format(\"YYYY/MM/DD H:mm:ss\"),url1:i+t,url2:i}),()=>{(function(){r&&window.clearTimeout(r),_.value=!0,r=window.setTimeout(()=>{_.value=!1},3e3)})()})},onCodeInput:e=>{a.code=e.target.value,d()},onDatePickerChange:e=>{e&&e>kh()()&&(a.is_expired=!1)},isEditing:n,updateEditStatus:s,onOk:()=>{if(!!d())s(!1),m()},onCancel:()=>{a.status=c.status,a.code=c.code,a.deadline_at=c.deadline_at,a.is_expired=c.is_expired,l.value=!1,s(!1)},infoData:a,copyMessageVisible:_,onEdit:()=>{s(!0),c={...a}},disabledDate:e=>e&&e<kh()().subtract(1,\"day\").endOf(\"day\"),disabledRangeTime:()=>{if(kh()(a.deadline_at).startOf(\"day\").isSame(kh()().startOf(\"day\"))){let e=kh()().hour(),t=kh()().minute();return{disabledHours:()=>u(0,24).slice(0,e),disabledMinutes:()=>u(0,60).slice(0,t-1),disabledSeconds:()=>[]}}return{disabledHours:()=>[],disabledMinutes:()=>[],disabledSeconds:()=>[]}},codeErrorMsgVisible:l,openStatus:e=>{if(!!e)a.status=!0,a.deadline_at=kh()().add(1,\"day\"),a.code=function(e){let t=\"23456789abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ\";return Array.from({length:6},()=>{let e=t[Math.floor(Math.random()*t.length)];return Math.random()>.5?e.toUpperCase():e.toLowerCase()}).join(\"\")}(6),a.is_expired=!1,m()},closeStatus:()=>{a.status=!1,p.value=!1,m()},closePopoverVisible:p,onCodeBlur:()=>{d()},classList:(0,uj.Fl)(()=>`${g.value}`)}}}),bH=(0,gU.Z)(bW,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"add-member-or-device-panel\"},[t(\"div\",{staticClass:\"side-header\"},[t(\"span\",{staticClass:\"title-text\"},[e._v(e._s(e.$t(\"web.p_setting.apply_code_join_project\")))]),t(\"span\",{staticClass:\"title-opt\"},[t(\"UranusIcon\",{attrs:{name:\"close\"},on:{click:e.handleClosePanel}})],1)]),t(\"div\",{staticClass:\"desc-box\"},[e._v(\" \"+e._s(e.$t(\"web.projects.tips2_for_adding_new_members\"))+\" \"),t(\"br\"),e._v(\" \"+e._s(e.$t(\"web.projects.learn_more\"))),t(\"UserManualBtn\",{attrs:{type:\"applyCode\"}})],1),t(\"div\",{staticClass:\"status-box\"},[t(\"span\",[e._v(e._s(e.$t(\"web.p_setting.apply_code_join\")))]),t(\"span\",[t(\"UranusPopconfirm\",{attrs:{title:e.$t(\"web.p_setting.close_apply_code\"),placement:\"right\",theme:\"dark\",danger:\"\",disabled:!e.closePopoverVisible},on:{confirm:e.closeStatus}},[t(\"UranusSwitch\",{class:{disabled:!e.infoData.status},attrs:{checked:e.infoData.status},on:{change:e.openStatus}})],1)],1)]),e.infoData.status?[t(\"div\",{staticClass:\"form-item\"},[t(\"div\",{staticClass:\"item-label\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.apply_code\"))+\" \")]),t(\"AInput\",{staticClass:\"info-input\",class:{\"error-input\":e.codeErrorMsgVisible},attrs:{value:e.infoData.code,theme:\"dark\",\"max-length\":6,disabled:!e.isEditing},on:{blur:e.onCodeBlur,input:e.onCodeInput}}),e.codeErrorMsgVisible?t(\"div\",{staticClass:\"error-msg\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.input_six_number_or_letters\"))+\" \")]):e._e()],1),t(\"div\",{staticClass:\"form-item\"},[t(\"div\",{staticClass:\"item-label\"},[e._v(\" \"+e._s(e.$t(\"common.date.deadline\"))+\" \"),e.infoData.is_expired?t(\"span\",{staticClass:\"expired-msg\"},[e._v(\"(\"+e._s(e.$t(\"web.p_setting.expired_hint\"))+\")\")]):e._e()]),t(\"ADatePicker\",{staticClass:\"uranus-form-row\",class:e.classList,attrs:{\"dropdown-class-name\":e.classList,disabled:!e.isEditing,\"show-time\":\"\",\"allow-clear\":!1,\"show-today\":!1,\"disabled-date\":e.disabledDate,\"disabled-time\":e.disabledRangeTime},on:{change:e.onDatePickerChange},scopedSlots:e._u([{key:\"suffixIcon\",fn:function(){return[t(\"span\",{staticStyle:{display:\"inline-flex\"}},[t(\"UranusIcon\",{attrs:{name:\"date\",size:14,color:e.isEditing?\"#fff\":\"rgba(255,255,255,0.45)\"}})],1)]},proxy:!0}],null,!1,465969391),model:{value:e.infoData.deadline_at,callback:function(t){e.$set(e.infoData,\"deadline_at\",t)},expression:\"infoData.deadline_at\"}})],1),t(\"div\",{staticClass:\"form-item footer-btn\"},[e.isEditing?[t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.cancel\"),theme:\"dark\"},on:{click:e.onCancel}}),t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.confirm\"),type:\"primary\"},on:{click:e.onOk}})]:[t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.edit\"),theme:\"dark\",type:\"primary\"},on:{click:e.onEdit}}),t(\"UranusButton\",{attrs:{text:e.$t(\"web.p_setting.copy_apply_code\"),type:\"primary\"},on:{click:e.copyText}})]],2),e.copyMessageVisible?t(\"div\",{staticClass:\"copy-message\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.copy_apply_code_success\"))+\" \")]):e._e()]:e._e()],2)},[],!1,null,\"6efbc968\",null).exports,bZ=(0,uj.aZ)({name:\"WeatherStopFlight\",components:{UranusIcon:fa,UranusSwitch:hL,AInput:yO.Z,ADropdown:yR.ZP,ACheckbox:yL.Z,UranusButton:fy,ADatePicker:bB.Z,UranusPopconfirm:f2},props:{projectWeatherBlocking:{type:Object,default:{}},projectId:{type:String},projectName:{type:String},projectUUid:{type:String}},setup(e,{root:t,emit:o}){let a=gm(),r=(0,uj.Fl)(()=>a.measure_units_system||nz.Metric),i=(0,uj.Fl)(()=>a.measure_units_system===nz.Imperial),n=(0,uj.qj)({infoData:yX(e.projectWeatherBlocking.blocking_config_by_dock,e.projectWeatherBlocking.cloud_weather_blocking_status,e.projectWeatherBlocking.airport_weather_station_blocking_status)});(0,uj.YP)(()=>e.projectWeatherBlocking,()=>{n.infoData=yX(e.projectWeatherBlocking.blocking_config_by_dock,e.projectWeatherBlocking.cloud_weather_blocking_status,e.projectWeatherBlocking.airport_weather_station_blocking_status)},{immediate:!0});let s=(0,uj.iH)({[sK.firstGeneration]:n.infoData.blocking_config_by_dock[sK.firstGeneration].airport_weather_station_blocking_config.wind_speed_limit,[sK.secondGeneration]:n.infoData.blocking_config_by_dock[sK.secondGeneration].airport_weather_station_blocking_config.wind_speed_limit,[sK.threeGeneration]:n.infoData.blocking_config_by_dock[sK.threeGeneration].airport_weather_station_blocking_config.wind_speed_limit});(0,uj.YP)(()=>n.infoData.blocking_config_by_dock[sK.firstGeneration].airport_weather_station_blocking_config.wind_speed_limit,e=>{s.value[sK.firstGeneration]=e}),(0,uj.YP)(()=>n.infoData.blocking_config_by_dock[sK.secondGeneration].airport_weather_station_blocking_config.wind_speed_limit,e=>{s.value[sK.secondGeneration]=e}),(0,uj.YP)(()=>n.infoData.blocking_config_by_dock[sK.threeGeneration].airport_weather_station_blocking_config.wind_speed_limit,e=>{s.value[sK.threeGeneration]=e});let c=(0,uj.iH)({[sK.firstGeneration]:n.infoData.blocking_config_by_dock[sK.firstGeneration].cloud_weather_blocking_config.wind_speed_limit,[sK.secondGeneration]:n.infoData.blocking_config_by_dock[sK.secondGeneration].cloud_weather_blocking_config.wind_speed_limit,[sK.threeGeneration]:n.infoData.blocking_config_by_dock[sK.threeGeneration].cloud_weather_blocking_config.wind_speed_limit});(0,uj.YP)(()=>n.infoData.blocking_config_by_dock[sK.firstGeneration].cloud_weather_blocking_config.wind_speed_limit,e=>{c.value[sK.firstGeneration]=e}),(0,uj.YP)(()=>n.infoData.blocking_config_by_dock[sK.secondGeneration].cloud_weather_blocking_config.wind_speed_limit,e=>{c.value[sK.secondGeneration]=e}),(0,uj.YP)(()=>n.infoData.blocking_config_by_dock[sK.threeGeneration].cloud_weather_blocking_config.wind_speed_limit,e=>{c.value[sK.threeGeneration]=e});let l=()=>{o(\"saveData\")},d=(0,uj.iH)(!1),_=e=>{d.value=e},u=n.infoData,m=(0,uj.iH)({[sK.firstGeneration]:!1,[sK.secondGeneration]:!1,[sK.threeGeneration]:!1}),p=(0,uj.iH)({[sK.firstGeneration]:!1,[sK.secondGeneration]:!1,[sK.threeGeneration]:!1}),g=(e,t)=>{let o=y$?.find(t=>t.key===e)?.windSpeedLocalMax;t>=y$?.find(t=>t.key===e)?.windSpeedLocalMin&&t<=o?(s.value[e]=t,m.value[e]=!1):(s.value[e]=t,m.value[e]=!0)},y=(e,t)=>{let o=!0,a=y$?.find(t=>t.key===e)?.windSpeedOnlineMax;return t>=y$?.find(t=>t.key===e)?.windSpeedOnlineMin&&t<=a?(c.value[e]=t,p.value[e]=!1):(c.value[e]=t,p.value[e]=!0,o=!1),o},f=e=>{e?o(\"updateProjectWeatherBlocking\",{type:\"status\",cloud_weather_blocking_status:n.infoData.cloud_weather_blocking_status,airport_weather_station_blocking_status:n.infoData.airport_weather_station_blocking_status}):o(\"updateProjectWeatherBlocking\",{type:\"config\",...yX(n.infoData.blocking_config_by_dock,n.infoData.cloud_weather_blocking_status,n.infoData.airport_weather_station_blocking_status)})},{zoomClass:h}=vv(),k=(0,uj.Fl)(()=>`${h.value}`),v=g4(sd.TASK_SAFETY_ONLINE_WEATHER);return{handleClosePanel:()=>{o(\"closePanel\")},isEditing:d,updateEditStatus:_,onOk:()=>{if(!m.value[sK.firstGeneration]&&!m.value[sK.secondGeneration]&&!m.value[sK.threeGeneration]&&!p.value[sK.firstGeneration]&&!p.value[sK.secondGeneration]&&!p.value[sK.threeGeneration])_(!1),n.infoData.blocking_config_by_dock[sK.firstGeneration].airport_weather_station_blocking_config.wind_speed_limit=s.value[sK.firstGeneration],n.infoData.blocking_config_by_dock[sK.firstGeneration].cloud_weather_blocking_config.precipitation_limit=n.infoData.blocking_config_by_dock[sK.firstGeneration].airport_weather_station_blocking_config.precipitation_limit,n.infoData.blocking_config_by_dock[sK.secondGeneration].airport_weather_station_blocking_config.wind_speed_limit=s.value[sK.secondGeneration],n.infoData.blocking_config_by_dock[sK.secondGeneration].cloud_weather_blocking_config.precipitation_limit=n.infoData.blocking_config_by_dock[sK.secondGeneration].airport_weather_station_blocking_config.precipitation_limit,n.infoData.blocking_config_by_dock[sK.threeGeneration].airport_weather_station_blocking_config.wind_speed_limit=s.value[sK.threeGeneration],n.infoData.blocking_config_by_dock[sK.threeGeneration].cloud_weather_blocking_config.precipitation_limit=n.infoData.blocking_config_by_dock[sK.threeGeneration].airport_weather_station_blocking_config.precipitation_limit,n.infoData.cloud_weather_blocking_status&&(n.infoData.blocking_config_by_dock[sK.firstGeneration].cloud_weather_blocking_config.wind_speed_limit=c.value[sK.firstGeneration],n.infoData.blocking_config_by_dock[sK.secondGeneration].cloud_weather_blocking_config.wind_speed_limit=c.value[sK.secondGeneration],n.infoData.blocking_config_by_dock[sK.threeGeneration].cloud_weather_blocking_config.wind_speed_limit=c.value[sK.threeGeneration]),f(),e.projectId&&l()},onCancel:()=>{n.infoData=yX(u.blocking_config_by_dock,u.cloud_weather_blocking_status,u.airport_weather_station_blocking_status),s.value={[sK.firstGeneration]:n.infoData.blocking_config_by_dock[sK.firstGeneration].airport_weather_station_blocking_config.wind_speed_limit,[sK.secondGeneration]:n.infoData.blocking_config_by_dock[sK.secondGeneration].airport_weather_station_blocking_config.wind_speed_limit,[sK.threeGeneration]:n.infoData.blocking_config_by_dock[sK.threeGeneration].airport_weather_station_blocking_config.wind_speed_limit},c.value={[sK.firstGeneration]:n.infoData.blocking_config_by_dock[sK.firstGeneration].cloud_weather_blocking_config.wind_speed_limit,[sK.secondGeneration]:n.infoData.blocking_config_by_dock[sK.secondGeneration].cloud_weather_blocking_config.wind_speed_limit,[sK.threeGeneration]:n.infoData.blocking_config_by_dock[sK.threeGeneration].cloud_weather_blocking_config.wind_speed_limit},m.value={[sK.firstGeneration]:!1,[sK.secondGeneration]:!1,[sK.threeGeneration]:!1},p.value={[sK.firstGeneration]:!1,[sK.secondGeneration]:!1,[sK.threeGeneration]:!1},_(!1)},...(0,uj.BK)(n),onEdit:()=>{_(!0),u=(0,uL.cloneDeep)(n.infoData)},codeErrorMsgVisible:m,onlineCodeErrorMsgVisible:p,deviceModelKeyEnum:sK,msTransMph:2.237,onWindSpeedChange:(e,t)=>{g(e,t)},onOnlineWindSpeedChange:(e,t)=>{y(e,t)},classList:k,changeWeather:t=>{n.infoData.airport_weather_station_blocking_status=t,!t&&(n.infoData.cloud_weather_blocking_status=!1),f(\"airportWeatherStationBlockingStatus\"),e.projectId&&(l(),u.airport_weather_station_blocking_status=n.infoData.airport_weather_station_blocking_status)},changeWeatherOnline:t=>{n.infoData.cloud_weather_blocking_status=t,f(\"cloudWeatherBlockingStatus\"),e.projectId&&(l(),u.cloud_weather_blocking_status=n.infoData.cloud_weather_blocking_status)},changeRainfall:(e,t)=>{n.infoData.blocking_config_by_dock[e].airport_weather_station_blocking_config.precipitation_limit=Number(t)},airportWeatherSetList:y$,getPrecipitationLimitInMap:e=>t.$t(yV[e]),visibilityData:y1,visibilityColumns:y0,RainfallLevel:yV,VisibilityLevelEnum:sL,windSpeedLimitInputMap:s,onlineWindSpeedLimitInput:c,UnitUsageType:cu,measureUnitText:hK,unitsMeasureSettingType:r,measureBasicUnitTransfer:hZ,isImperial:i,useSafetyOnlineWeatherFeature:v,FixedNumberRule:c_}}}),bV=(0,gU.Z)(bZ,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"online-weather-set-panel\"},[t(\"div\",{staticClass:\"side-header\"},[t(\"span\",{staticClass:\"title-text\"},[e._v(e._s(e.$t(\"web.project-weather-title\")))]),t(\"span\",{staticClass:\"title-opt\"},[t(\"UranusIcon\",{attrs:{name:\"close\"},on:{click:e.handleClosePanel}})],1)]),t(\"div\",{staticClass:\"status-box\"},[t(\"div\",{staticClass:\"status-box-title-area\"},[t(\"span\",{staticClass:\"status-box-title\"},[e._v(e._s(e.$t(\"web.project-weather-label\")))]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",\"overlay-size\":\"md\",\"overlay-class-name\":\"weather-forecast-tip\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-label_on_tips\")))]),t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-label_off_tips_title\")))]),t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-label_off_tips_210\")))]),t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-label_off_tips_220\")))]),t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-label_off_tips_230\")))])]},proxy:!0}])},[t(\"UranusIcon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)],1),t(\"span\",[t(\"UranusSwitch\",{staticClass:\"status-box-switch\",class:{disabled:!e.infoData.airport_weather_station_blocking_status},attrs:{checked:e.infoData.airport_weather_station_blocking_status},on:{change:e.changeWeather}})],1)]),e.infoData.airport_weather_station_blocking_status&&e.useSafetyOnlineWeatherFeature?t(\"div\",{staticClass:\"box-hr\"}):e._e(),e.infoData.airport_weather_station_blocking_status&&e.useSafetyOnlineWeatherFeature?t(\"div\",{staticClass:\"status-box\"},[t(\"div\",{staticClass:\"status-box-title-area\"},[t(\"span\",{staticClass:\"status-box-title\"},[e._v(e._s(e.$t(\"web.project-weather-forecast\")))]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",\"overlay-size\":\"md\",\"overlay-class-name\":\"weather-forecast-tip\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-forecast_on_tips\")))]),t(\"div\",[e._v(e._s(e.$t(\"web.project-weather-forecast_off_tips\")))])]},proxy:!0}],null,!1,3494452151)},[t(\"UranusIcon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)],1),t(\"span\",[t(\"UranusSwitch\",{attrs:{checked:e.infoData.cloud_weather_blocking_status},on:{change:e.changeWeatherOnline}})],1)]):e._e(),e.infoData.airport_weather_station_blocking_status?t(\"div\",{staticClass:\"box-hr\"}):e._e(),e.infoData.airport_weather_station_blocking_status?[e._l(e.airportWeatherSetList,function(o){return t(\"div\",{key:o.key,staticStyle:{\"margin-bottom\":\"16px\"}},[t(\"div\",{staticClass:\"airport-title\"},[e._v(\" \"+e._s(e.$t(o.label))+\" \")]),t(\"div\",{staticClass:\"form-area\"},[t(\"div\",{staticClass:\"form-item\"},[t(\"div\",{staticClass:\"item-label\"},[t(\"div\",[e._v(e._s(e.$t(\"model_device.dock_info.wind_speed\")))]),t(\"div\",{staticClass:\"item-label-tip\"},[e._v(\" \"+e._s(e.$t(\"web.project-weather-sub-speed-gauge-module-title\"))+\" (\"+e._s(e.isImperial?Math.floor(o.windSpeedLocalMin*e.msTransMph):o.windSpeedLocalMin)+\"-\"+e._s(e.isImperial?Math.ceil(o.windSpeedLocalMax*e.msTransMph):o.windSpeedLocalMax)+\" \"+e._s(e.isImperial?\"mph\":\"m/s\")+\") \")])]),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.isEditing,expression:\"!isEditing\"}]},[e._v(\" \"+e._s(e.measureBasicUnitTransfer(Number(e.infoData.blocking_config_by_dock[o.key].airport_weather_station_blocking_config.wind_speed_limit),e.UnitUsageType.Speed,e.unitsMeasureSettingType,!1,e.FixedNumberRule.round,0).text)+\" \")]),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isEditing,expression:\"isEditing\"}],staticClass:\"input-and-error\"},[t(\"div\",[t(\"UranusInputNumberUnit\",{staticClass:\"info-input\",class:{\"error-input\":e.codeErrorMsgVisible[o.key]},attrs:{value:e.windSpeedLimitInputMap[o.key],min:o.windSpeedLocalMin,max:o.windSpeedLocalMax,precision:0,\"output-digit\":0,theme:\"dark\",\"max-length\":2,disabled:!e.isEditing,\"usage-type\":e.UnitUsageType.Speed},on:{change:function(t){return e.onWindSpeedChange(o.key,t)}}}),t(\"span\",[e._v(\" \"+e._s(e.measureUnitText(e.UnitUsageType.Speed,e.unitsMeasureSettingType)))])],1),e.codeErrorMsgVisible[o.key]?t(\"div\",{staticClass:\"error-msg\"},[e._v(\" \"+e._s(e.$t(\"web.project-weather-online-wind-speed-range2\"))+\" \"+e._s(e.isImperial?Math.floor(o.windSpeedLocalMin*e.msTransMph):o.windSpeedLocalMin)+\"-\"+e._s(e.isImperial?Math.ceil(o.windSpeedLocalMax*e.msTransMph):o.windSpeedLocalMax)+\" \"+e._s(e.isImperial?\" mph\":\" m/s\")+\" \")]):e._e()])]),e.infoData.cloud_weather_blocking_status&&e.useSafetyOnlineWeatherFeature?t(\"div\",{staticClass:\"form-item\"},[t(\"div\",{staticClass:\"item-label\"},[e._v(\" \"+e._s(e.$t(\"model_device.dock_info.wind_speed\"))+\" \"),t(\"span\",{staticClass:\"item-label-tip\"},[e._v(\" (\"+e._s(e.$t(\"web.project-weather-label2\"))+\") (\"+e._s(e.isImperial?Math.floor(o.windSpeedOnlineMin*e.msTransMph):o.windSpeedOnlineMin)+\"-\"+e._s(e.isImperial?Math.ceil(o.windSpeedOnlineMax*e.msTransMph):o.windSpeedOnlineMax)+\" \"+e._s(e.isImperial?\"mph\":\"m/s\")+\") \")])]),t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.isEditing,expression:\"!isEditing\"}]},[e._v(\" \"+e._s(e.measureBasicUnitTransfer(Number(e.infoData.blocking_config_by_dock[o.key].cloud_weather_blocking_config.wind_speed_limit),e.UnitUsageType.Speed,e.unitsMeasureSettingType,!1,e.FixedNumberRule.round,0).text))]),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isEditing,expression:\"isEditing\"}],staticClass:\"input-and-error\"},[t(\"div\",[t(\"UranusInputNumberUnit\",{staticClass:\"info-input\",class:{\"error-input\":e.onlineCodeErrorMsgVisible[o.key]},attrs:{value:e.onlineWindSpeedLimitInput[o.key],min:o.windSpeedOnlineMin,max:o.windSpeedOnlineMax,precision:0,\"output-digit\":0,theme:\"dark\",\"max-length\":2,disabled:!e.isEditing,\"usage-type\":e.UnitUsageType.Speed},on:{change:function(t){return e.onOnlineWindSpeedChange(o.key,t)}}}),t(\"span\",[e._v(\" \"+e._s(e.measureUnitText(e.UnitUsageType.Speed,e.unitsMeasureSettingType)))])],1),e.onlineCodeErrorMsgVisible[o.key]?t(\"div\",{staticClass:\"error-msg\"},[e._v(\" \"+e._s(e.$t(\"web.project-weather-online-wind-speed-range2\"))+\" \"+e._s(e.isImperial?Math.floor(o.windSpeedOnlineMin*e.msTransMph):o.windSpeedOnlineMin)+\"-\"+e._s(e.isImperial?Math.ceil(o.windSpeedOnlineMax*e.msTransMph):o.windSpeedOnlineMax)+\" \"+e._s(e.isImperial?\" mph\":\" m/s\")+\" \")]):e._e()])]):e._e(),t(\"div\",{staticClass:\"form-item\"},[t(\"div\",{staticClass:\"item-label\"},[e._v(\" \"+e._s(e.$t(\"web.project-weather-rainfall-title\"))+\" \"),e.infoData.cloud_weather_blocking_status&&e.useSafetyOnlineWeatherFeature?t(\"span\",{staticClass:\"item-label-tip\"},[e._v(\" \"+e._s(e.$t(\"web.project-weather-online-tip\"))+\" \")]):t(\"span\",{staticClass:\"item-label-tip\"},[e._v(\" \"+e._s(e.$t(\"web.project-weather-online-rainfall-tip1\"))+\" \")])]),e.isEditing?t(\"div\",[t(\"uranus-select\",{staticStyle:{\"margin-left\":\"-8px\"},attrs:{theme:\"dark\",\"no-dark-border\":\"\",\"dropdown-class-name\":\"rainfall\",\"default-value\":String(e.infoData.blocking_config_by_dock[o.key].airport_weather_station_blocking_config.precipitation_limit)},on:{change:function(t){return e.changeRainfall(o.key,t)}}},e._l(Object.keys(e.RainfallLevel).filter(e=>\"0\"!==e),function(o){return t(\"a-select-option\",{key:o,attrs:{value:`${o}`}},[e._v(\" \"+e._s(e.$t(e.RainfallLevel[o]))+\" \")])}),1)],1):e._e(),t(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.isEditing,expression:\"!isEditing\"}]},[e._v(e._s(e.getPrecipitationLimitInMap(e.infoData.blocking_config_by_dock[o.key].airport_weather_station_blocking_config.precipitation_limit)))])])])])}),t(\"div\",{staticClass:\"form-item-submit footer-btn\"},[e.isEditing?[t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.cancel\"),theme:\"dark\"},on:{click:e.onCancel}}),t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.confirm\"),type:\"primary\",disabled:e.codeErrorMsgVisible[e.deviceModelKeyEnum.firstGeneration]||e.codeErrorMsgVisible[e.deviceModelKeyEnum.secondGeneration]||e.codeErrorMsgVisible[e.deviceModelKeyEnum.threeGeneration]||e.onlineCodeErrorMsgVisible[e.deviceModelKeyEnum.firstGeneration]||e.onlineCodeErrorMsgVisible[e.deviceModelKeyEnum.secondGeneration]||e.onlineCodeErrorMsgVisible[e.deviceModelKeyEnum.threeGeneration]},on:{click:e.onOk}})]:[t(\"UranusButton\",{attrs:{text:e.$t(\"common.action.edit\"),theme:\"dark\",type:\"primary\"},on:{click:e.onEdit}})]],2)]:e._e()],2)},[],!1,null,\"34761500\",null).exports,bY=(0,uj.aZ)({name:\"ShareResourcesSetting\",components:{UranusPopconfirm:f2},props:{projectShareConfig:Object,projectId:String},setup(e,{root:t,emit:o}){let a=(0,uj.Fl)(()=>!e.projectShareConfig?.live_disable),r=(0,uj.iH)(!1),i=(0,uj.Fl)(()=>!e.projectShareConfig?.media_disable),n=(0,uj.iH)(!1);return{liveShareOpenStatus:a,livePopConfirmVisible:r,mediaShareOpenStatus:i,mediaPopConfirmVisible:n,handleClosePanel:function(){o(\"closePanel\")},toggleLiveShareOpenStatusChange:function(){a.value?r.value=!0:(o(\"project-share-config-change\",{live_disable:!1,media_disable:!i.value}),e.projectId&&o(\"update-project\"))},toggleMediaShareOpenStatusChange:function(){i.value?n.value=!0:(o(\"project-share-config-change\",{live_disable:!a.value,media_disable:!1}),e.projectId&&o(\"update-project\"))},liveConfirmSwitchOperator:function(){o(\"project-share-config-change\",{live_disable:!0,media_disable:!i.value}),e.projectId&&o(\"update-project\"),r.value=!1},mediaConfirmSwitchOperator:function(){o(\"project-share-config-change\",{live_disable:!a.value,media_disable:!0}),e.projectId&&o(\"update-project\"),n.value=!1}}}}),b$=(0,gU.Z)(bY,function(){var e=this._self._c;return this._self._setupProxy,e(\"div\",{staticClass:\"share-resources-set-panel\"},[e(\"div\",{staticClass:\"side-header\"},[e(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.share_project_setting_title\",expression:\"'web.share_project_setting_title'\"}],staticClass:\"title-text\"}),e(\"span\",{staticClass:\"title-opt\"},[e(\"uranus-icon\",{attrs:{name:\"close\"},on:{click:this.handleClosePanel}})],1)]),e(\"div\",{staticClass:\"share-set row-center\"},[e(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.share_project_setting_live_share_title\",expression:\"'web.share_project_setting_live_share_title'\"}],staticStyle:{\"margin-right\":\"8px\"}}),e(\"UranusPopconfirm\",{attrs:{title:this.$t(\"web.share_project_setting_cancel_tip2\"),disabled:!this.livePopConfirmVisible,theme:\"dark\",danger:\"\",placement:\"right\"},on:{confirm:this.liveConfirmSwitchOperator}},[e(\"UranusSwitch\",{attrs:{checked:this.liveShareOpenStatus,theme:\"dark\"},on:{change:this.toggleLiveShareOpenStatusChange}})],1)],1),e(\"div\",{staticClass:\"live-desp\"},[this._v(\" \"+this._s(this.$t(\"web.share_live_setting_enable_desc\"))+\" \"),e(\"br\"),this._v(\" \"+this._s(this.$t(\"web.share_live_setting_disable_desc\"))+\" \")]),e(\"div\",{staticClass:\"divide-line\"}),e(\"div\",{staticClass:\"share-set row-center\"},[e(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.share_project_setting_media_share_title\",expression:\"'web.share_project_setting_media_share_title'\"}],staticStyle:{\"margin-right\":\"8px\"}}),e(\"UranusPopconfirm\",{attrs:{title:this.$t(\"web.share_project_setting_cancel_tip1\"),disabled:!this.mediaPopConfirmVisible,theme:\"dark\",danger:\"\",placement:\"right\"},on:{confirm:this.mediaConfirmSwitchOperator}},[e(\"UranusSwitch\",{attrs:{checked:this.mediaShareOpenStatus,theme:\"dark\"},on:{change:this.toggleMediaShareOpenStatusChange}})],1)],1),e(\"div\",{staticClass:\"live-desp\"},[this._v(\" \"+this._s(this.$t(\"web.share_media_setting_enable_desc\"))+\" \"),e(\"br\"),this._v(\" \"+this._s(this.$t(\"web.share_medi_setting_disable_desc\"))+\" \")])])},[],!1,null,\"1beeb2ae\",null).exports,bK=(0,uj.aZ)({name:\"CoordinateModel\",props:{value:{type:String,required:!0},dataList:{type:Object,required:!0}},emits:[\"ok\",\"cancel\"],setup(e,{emit:t}){let o=(0,uj.iH)(null),a=(0,uj.iH)(\"\"),r=(0,uj.iH)(null),i=(0,uj.iH)({[uN.GeoCoord]:[],[uN.PrjCoord]:[]}),n=(0,uj.iH)([]),s=(0,uj.Fl)(()=>{let e=(0,uj.SU)(i),t=[];return 0!==e.geodetic_system.length&&t.push({name:\"Geographic Systems\",id:uN.GeoCoord,root:!0,$folded:!n.value.includes(uN.GeoCoord),children:e.geodetic_system}),0!==e.projected_system.length&&t.push({name:\"Projected Systems\",id:uN.PrjCoord,root:!0,$folded:!n.value.includes(uN.PrjCoord),children:e.projected_system}),t});function c(e,t){return t?function(e,t,o=!0){let a=t.toLowerCase(),r=e=>e.searchKey?.indexOf(a)!==-1;if(o)return e.filter(r);{let t=e.find(r);return t?[t]:[]}}(e,t):e}function l(){let t=a.value.trim(),o=(0,uj.SU)(e.dataList);o&&(i.value={[uN.GeoCoord]:c(o[uN.GeoCoord],t),[uN.PrjCoord]:c(o[uN.PrjCoord],t)})}let d=(0,uL.debounce)(()=>{l(),!function(){let e=a.value.trim(),t=s.value.filter(e=>e.root).map(e=>e.id);e?n.value=t:n.value=[]}()},500,{leading:!1});return(0,uj.YP)(()=>e.dataList,t=>{if(l(),t){let a=!1;t.geodetic_system.forEach(t=>{t.value===e.value&&(o.value={...t},a=!0)}),!a&&t.projected_system.forEach(t=>{t.value===e.value&&(o.value={...t})})}},{immediate:!0,deep:!0}),{onOk:function(){t(\"ok\",o.value)},onCancel:function(){t(\"cancel\")},onSelectCoord:function(e){o.value=e},coordInfo:r,coordInputVal:a,handleInputChange:d,searchCoordResult:i,CoordType:uN,toggleExpand:function(e){let t=n.value.indexOf(e);-1!==t?n.value.splice(t,1):n.value.push(e)},treeData:s,selectedItem:o,expandedKeys:n}}}),bX=(0,gU.Z)(bK,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"uranus-modal\",{staticClass:\"project-setting-coordinate-select-model\",attrs:{visible:!0,theme:\"dark\",title:e.$t(\"web.p_model.set_coordinates\"),\"cancel-text\":e.$t(\"common.action.cancel\"),\"ok-text\":e.$t(\"common.action.confirm\"),size:\"small\",\"is-height-auto-fit\":\"\"},on:{ok:e.onOk,cancel:e.onCancel}},[t(\"div\",{staticClass:\"coordinate-select-model__body\"},[t(\"div\",[t(\"span\",[e._v(\" \"+e._s(e.$t(\"web.model.select_correct_coordinate_tips\"))+\" \")])]),t(\"uranus-input\",{ref:\"planNameInputEle\",staticClass:\"coord-input\",attrs:{theme:\"dark\",maxlength:50,placeholder:e.$t(\"web.p_model.search_coordinates_tips\")},on:{input:e.handleInputChange},model:{value:e.coordInputVal,callback:function(t){e.coordInputVal=t},expression:\"coordInputVal\"}}),t(\"div\",{staticClass:\"coord-list-container\"},[t(\"div\",{staticClass:\"coord-list-header\"},[t(\"div\",{staticClass:\"left\"},[e._v(\" \"+e._s(e.$t(\"web.p_model.dialog_coordinates\"))+\" \")]),t(\"div\",{staticClass:\"right\"},[e._v(\" \"+e._s(e.$t(\"web.p_model.dialog_epsg\"))+\" \")])]),t(\"HeTreeBase\",{staticClass:\"coord-list-content uranus-scrollbar\",attrs:{\"tree-data\":e.treeData,virtualization:!1,\"expanded-keys\":e.expandedKeys},scopedSlots:e._u([{key:\"default\",fn:function({node:o}){return[o.root?t(\"div\",{staticClass:\"coord-header\",on:{click:function(t){return e.toggleExpand(o.id)}}},[t(\"uranus-icon\",{staticClass:\"icon\",class:e.expandedKeys.includes(o.id)?\"down-arrow\":\"right-arrow\",attrs:{name:\"tree-arrow\",size:16}}),t(\"div\",{staticClass:\"coord-header__content\"},[t(\"span\",{staticClass:\"coord-type\"},[e._v(\" \"+e._s(o.name)+\" \")]),e.expandedKeys.includes(o.id)&&0===o.children.length?t(\"section\",{staticClass:\"coord-loading\"},[t(\"uranus-icon\",{attrs:{name:\"waiting\",size:24,color:\"#fff\"}})],1):e._e()])],1):t(\"div\",{staticClass:\"coord-option\",class:{highlight:e.selectedItem&&o.value===e.selectedItem.value},on:{click:function(t){return e.onSelectCoord(o)}}},[t(\"span\",{staticClass:\"coord-name\"},[e._v(e._s(o.label))]),t(\"span\",{staticClass:\"epsg\"},[e._v(e._s(o.value))])])]}}])})],1)],1)])},[],!1,null,null,null).exports,bJ=(0,uj.aZ)({name:\"CoordinateSelect\",components:{CoordinateModel:bX},props:{value:{type:String,default:\"\"},orgId:{type:String,default:\"\"}},emits:{change:e=>!0},setup(e,{emit:t}){let o=(0,uj.iH)({}),a=(0,uj.iH)({}),r=(0,uj.Fl)(()=>o.value[e.value]||\"\"),i=(0,uj.iH)(!1),n=(0,uj.iH)({geodetic_system:[],projected_system:[]});async function s(){let t=`/storage/api/v1/organization/${e.orgId}/wkts`,o=await g2.get(t);return o.data?.data}return(0,uj.wF)(async()=>{!function(e){function t(e){return e.map(e=>{let t=e.name,r=`${e.auth_name}:${e.id}`;return o.value[r]=t,a.value[e.id]=r,{label:t,value:r,searchKey:`${t} ${r}`.toLowerCase()}})}n.value.geodetic_system=t(e.geodetic_system),n.value.projected_system=t(e.projected_system)}(await s())}),{isShowModel:i,coordList:n,onSelectCoordinate:function(e){t(\"change\",e?e.value:\"\"),i.value=!1},coordinateName:r}}}),bQ=(0,gU.Z)(bJ,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",[t(\"div\",{staticClass:\"coordinate-tips flex-container-justify-between-center\",on:{click:function(t){e.isShowModel=!0}}},[t(\"div\",[t(\"span\",e.value?[e.coordinateName?t(\"div\",[e._v(e._s(e.coordinateName))]):e._e(),t(\"div\",[e._v(\" \"+e._s(e.value)+\" \")])]:[e._v(\" \"+e._s(e.$t(\"web.model.select_coordinate_tips\"))+\" \")])]),t(\"uranus-icon\",{staticStyle:{transform:\"rotate(-90deg)\"},attrs:{name:\"tree-arrow\",color:\"#fff\"}})],1),e.isShowModel?t(\"CoordinateModel\",{attrs:{value:e.value,\"data-list\":e.coordList},on:{ok:e.onSelectCoordinate,cancel:function(t){e.isShowModel=!1}}}):e._e()],1)},[],!1,null,\"4838f40a\",null).exports,bq=(0,uj.aZ)({name:\"CoordinateForm\",components:{DoubleDelete:bA,CoordinateSelect:bQ},props:{source:{type:Object,default:null},projectCenter:{type:Object,default:null},orgId:{type:String,default:\"\"},disabled:{type:Boolean,default:!1},paramCalculator:{type:Array,default:()=>[]}},emits:[\"change\",\"open-param-calculator\",\"file-change\"],setup(e,{emit:t}){let o=\"t\"===window.CURRENT_BE_ENV_CONFIG.map_engine,a=(0,uj.qj)({crs_type:1,crs_source:1,horizontal_crs:\"\",vertical_crs:\"hae\",param_config:[\"\",\"\",\"\",\"\"],prj_file_name:\"\"}),r=o?_R.CGCS2000:_R.WGS1984,i=(0,uj.qj)({ellipsoidalParam:r,projectionType:v9(r),centralMeridian:\"0\",fakeEast:\"0\",fakeNorth:\"0\"}),n=(0,uj.iH)(4),s=(0,uj.qj)({dx:\"\",dy:\"\",r:\"\",s:\"\"}),c=(0,uj.qj)({dx:\"\",dy:\"\",dz:\"\",rx:\"\",ry:\"\",rz:\"\",s:\"\"}),l=(0,uj.iH)(null),d=[[{label:gp(\"web.coordinate.prj_content_name\"),param:\"name\"},{label:gp(\"web.coordinate.prj_content_authority_code\"),param:\"authorityCode\"},{label:gp(\"web.coordinate.prj_content_projection_name\"),param:\"projectionName\"},{label:gp(\"web.coordinate.prj_content_geocs_name\"),param:\"geocsName\"},{label:gp(\"web.coordinate.prj_content_geocs_authority_code\"),param:\"geocsAuthorityCode\"},{label:gp(\"web.coordinate.prj_content_geocs_datum_name\"),param:\"geocsDatumName\"},{label:gp(\"web.coordinate.prj_content_geocs_datum_spheroid_name\"),param:\"geocsDatumSpheroidName\"},{label:gp(\"web.coordinate.prj_content_geocs_datu_spheroid_semi_major\"),param:\"geocsDatumSpheroidSemiMajor\"},{label:gp(\"web.coordinate.prj_content_geocs_datum_spheroid_inverse_flattening\"),param:\"geocsDatumSpheroidInverseFlattening\"},{label:gp(\"web.coordinate.prj_content_geocs_primem_name\"),param:\"geocsPrimemName\"},{label:gp(\"web.coordinate.prj_content_geocs_primem_value\"),param:\"geocsPrimemValue\"},{label:gp(\"web.coordinate.prj_content_parameters_central_meridian\"),param:\"parametersCentralMeridian\"},{label:gp(\"web.coordinate.prj_content_parameters_false_easting\"),param:\"parametersFalseEasting\"},{label:gp(\"web.coordinate.prj_content_parameters_false_northing\"),param:\"parametersFalseNorthing\"},{label:gp(\"web.coordinate.prj_content_parameters_scale_factor\"),param:\"parametersScaleFactor\"},{label:gp(\"web.coordinate.prj_content_linear_unit_name\"),param:\"linearUnitName\"},{label:gp(\"web.coordinate.prj_content_linear_unit_conversion_factor\"),param:\"linearUnitConversionFactor\"}]];function _(){let e;t(\"change\",(e=null,1===a.crs_type?e={crs_type:a.crs_type,crs_source:a.crs_source,horizontal_crs:a.horizontal_crs,vertical_crs:a.vertical_crs}:(function(){a.param_config=4===n.value?[s.dx,s.dy,s.r,s.s]:[c.dx,c.dy,c.dz,c.rx,c.ry,c.rz,c.s]}(),1===a.crs_source&&(a.horizontal_crs=function(e){let{datum:t,project:o,centerLng:a,falseEast:r=0,falseNorth:i=0,name:n=\"\"}=e,s=v1[o],c=v2[t];return`PROJCS[\"CUSTOM_PCS ${n}\", ${c}, PROJECTION[\"${s}\"], PARAMETER[\"central_meridian\",${a}], PARAMETER[\"false_easting\",${r}], PARAMETER[\"false_northing\",${i}], PARAMETER[\"scale_factor\",1], UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]], AXIS[\"Easting\",EAST], AXIS[\"Northing\",NORTH]]`}({datum:i.ellipsoidalParam,project:i.projectionType,centerLng:+i.centralMeridian,falseEast:+i.fakeEast,falseNorth:+i.fakeNorth,name:\"\"})),e={crs_type:a.crs_type,crs_source:a.crs_source,horizontal_crs:a.horizontal_crs,param_config:a.param_config}),2===a.crs_source&&(e.prj_file_name=a.prj_file_name),e))}!function(){if(e.source?.set_crs){for(let t in e.source)Object.prototype.hasOwnProperty.call(e.source,t)&&t in a&&(a[t]=e.source[t]);if(2===a.crs_source)y(a.horizontal_crs);else if(2===a.crs_type){let e=ba(a.horizontal_crs);e?.type===\"PROJCS\"&&(i.ellipsoidalParam=br(e),i.projectionType=function(e){if(\"GEOGCS\"===e.type)return null;let t=br(e);return\"Mercator_1SP\"===e.projection.name?\"WebMercator\":\"WGS1984\"===t?\"UTM\":\"GaussKruger\"}(e),e.parameters?.forEach(e=>{\"central_meridian\"===e.name&&(i.centralMeridian=`${e.value}`),\"false_easting\"===e.name&&(i.fakeEast=`${e.value}`),\"false_northing\"===e.name&&(i.fakeNorth=`${e.value}`)}))}v()}else if(e.projectCenter){var t,o;let{datum:r,project:n,centerLng:s}=(t=e.projectCenter.longitude||0,o=e.projectCenter.latitude||0,(0,vJ.Z)([t,o],vQ[\"0\"])?{datum:\"CGCS2000\",project:\"GaussKruger\",centerLng:v5(t)}:{datum:\"WGS1984\",project:\"UTM\",centerLng:v5(t,6)});a.crs_type=2,i.ellipsoidalParam=r,i.projectionType=n,i.centralMeridian=`${s}`}_()}();let u=[{label:gp(\"web.p_setting.file_coordinate_common\"),value:1},{label:gp(\"web.p_setting.file_coordinate_custom\"),value:2}],m=[{title:gp(\"web.p_setting.file_coordinate_common_\"),descs:[gp(\"web.p_setting.file_coordinate_common_desc1\"),gp(\"web.p_setting.file_coordinate_common_desc2\")]},{title:gp(\"web.p_setting.file_coordinate_custom_\"),descs:[gp(\"web.p_setting.file_coordinate_custom_desc1\"),gp(\"web.p_setting.file_coordinate_custom_desc2\")]}],p=[{label:gp(\"web.coordinate.ellipsoidal_height\"),value:\"hae\"}],g=(0,uj.iH)(null);function y(e){let t=ba(e);if(null===t||\"PROJCS\"!==t.type)return yA.Z.error(gp(\"web.coordinate.parse_prj_error\")),!1;let{name:o,authority:r,projection:i,geocs:{datum:{name:n,spheroid:s},authority:c,name:d,primem:_},parameters:u,linearUnit:m}=t;r?a.crs_type=1:a.crs_type=2;let p={name:o,authorityCode:r?r.code:\"\",projectionName:i&&i.name,geocsName:d,geocsAuthorityCode:c?c.code:\"\",geocsDatumName:n,geocsDatumSpheroidName:s.name,geocsDatumSpheroidSemiMajor:s.semiMajorAxis.toString(),geocsDatumSpheroidInverseFlattening:s.inverseFlattening.toString(),geocsPrimemName:_.name,geocsPrimemValue:`${_.longitude}`,parametersCentralMeridian:\"0\",parametersFalseEasting:\"0\",parametersFalseNorthing:\"0\",parametersScaleFactor:\"1\",linearUnit:m.conversionFactor+m.name};return u?.forEach(e=>{\"central_meridian\"===e.name?p.parametersCentralMeridian=e.value.toString():\"false_easting\"===e.name?p.parametersFalseEasting=e.value.toString():\"false_northing\"===e.name?p.parametersFalseNorthing=e.value.toString():\"scale_factor\"===e.name&&(p.parametersScaleFactor=e.value.toString())}),l.value=p,!0}let f=[{label:gp(\"web.coordinate.four_params\"),value:4},{label:gp(\"web.coordinate.seven_params\"),value:7}],h=[{title:gp(\"web.coordinate.params_option\"),descs:[gp(\"web.coordinate.four_params_statement\"),gp(\"web.coordinate.seven_params_statement\")]},{title:gp(\"web.coordinate.params_get_method\"),descs:[gp(\"web.coordinate.params_get_method_1\"),gp(\"web.coordinate.params_get_method_2\")]}],k=(0,uj.Fl)(()=>4===n.value);function v(){a.param_config&&(4===a.param_config.length?n.value=4:n.value=7,4===n.value?(s.dx=a.param_config[0],s.dy=a.param_config[1],s.r=a.param_config[2],s.s=a.param_config[3]):(c.dx=a.param_config[0],c.dy=a.param_config[1],c.dz=a.param_config[2],c.rx=a.param_config[3],c.ry=a.param_config[4],c.rz=a.param_config[5],c.s=a.param_config[6]))}(0,uj.YP)(()=>e.paramCalculator,e=>{e.length&&(a.param_config=e,v(),_())});let b=(0,uj.iH)(null),C=(0,uj.Fl)(()=>{let e=!1,t=4===n.value?s:c;for(let o in t)if(\"\"!==t[o]){e=!0;break}return e}),I=(0,uj.Fl)(()=>{let e=uI.DesignMarkPoint;return{type:n.value,source:e}});async function A(e){if(!!function(e){let t=e.target,o=t.value;return o&&!/\\.csv$/i.test(o)?(yA.Z.error(gp(\"web.common.file_type_unsupported\")),t.value=\"\",!1):!!t.files&&0!==t.files.length||!1}(e))try{var t;let{head:o,rows:a}=await bf(e),r=a[0];if(4!==o.length&&7!==o.length){yA.Z.error(gp(\"web.coordinate.csv_parse_params_fail_format\"));return}if(!function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&!bk(e[t]))return!1;return!0}(r)){yA.Z.error(gp(\"web.coordinate.csv_parse_params_fail_param_format\"));return}let i=4===n.value?s:c;for(let e in i)i[e]=\"\";4===r.length?(s.dx=r[0],s.dy=r[1],s.r=r[2],s.s=r[3]):(c.dx=r[0],c.dy=r[1],c.dz=r[2],c.rx=r[3],c.ry=r[4],c.rz=r[5],c.s=r[6]),n.value=4===r.length?4:7,t=I.value,window.$reportStatData&&window.$reportStatData({type:\"fh2_system_parameter_configuration_result_import\",eventValue:t}),_(),yA.Z.success(gp(\"common.action.import_success\"))}catch{yA.Z.error(gp(\"web.coordinate.csv_parse_params_fail\"))}}function E(e,t,o){e[t]=bv(o)?`${o}`:\"\",_()}return{settingData:a,changeCrsType:function(e){a.crs_type=e,1===e&&(a.horizontal_crs=\"\"),_()},coordinateSource:u,emitData:_,changeVerticalCrs:function(e){a.vertical_crs=e,_()},fileInput:g,selectPrj:function(){g.value&&g.value.click()},onFileChange:function(e){let o=e.target;if(!o)return;let r=o.value;if(r&&!/\\.prj$/i.test(r)){yA.Z.error(gp(\"web.common.file_type_unsupported\")),o.value=\"\";return}if(!o.files||0===o.files.length)return;let i=new FileReader;i.onload=function(){t(\"file-change\");let e=this.result;try{if(!y(e)){o.value=\"\";return}}catch(e){o.value=\"\",yA.Z.error(gp(\"web.coordinate.parse_prj_error\"));return}a.prj_file_name=o.files[0].name,a.crs_source=2,a.horizontal_crs=e,_()},i.onerror=function(e){console.error(\"Error reading file\",e)},i.readAsText(o.files[0])},deletePrj:function(){l.value=null,a.crs_source=1,a.prj_file_name=\"\",a.horizontal_crs=\"\",_()},prjParam:l,prjParamList:d,customCoordinate:i,coordinateTypeTooltip:m,changeHorizontalCoordinate:function(e){a.horizontal_crs=e,_()},verticalCoordinateOptions:p,ellipsoidalParamOptions:v3,changeEllipsoidalParam:function(e){i.ellipsoidalParam=e,i.projectionType=v9(e),_()},projectionTypeOptions:v4,changeProjectionType:function(e){i.projectionType=e,_()},changeCenterMeridian:function(e){i.centralMeridian=e,!e&&(i.centralMeridian=\"0\"),_()},changeFakeEast:function(e){i.fakeEast=e,_()},changeFakeNorth:function(e){i.fakeNorth=e,_()},importCsv:function(){b.value&&b.value.click()},exportCsv:function(){var e;if(!C.value)return;let t={};if(4===n.value)t={dx:s.dx,dy:s.dy,r:s.r,s:s.s};else{for(let e in c)t[e]=c[e];delete t.r}e=I.value,window.$reportStatData&&window.$reportStatData({type:\"fh2_system_parameter_configuration_result_export\",eventValue:e}),bh([t],gp(\"web.coordinate.param_setting\"))},onParamsCsvFileChange:A,paramsCsvInput:b,paramsOptions:f,paramsTooltip:h,paramsType:n,fourParamsValue:s,sevenParamsValue:c,is4params:k,canExport:C,changeParamType:function(e){n.value=e,_()},changeFourParam:function(e,t){E(s,e,t)},changeSevenParam:function(e,t){E(c,e,t)},openParamCalculator:function(){t(\"open-param-calculator\",(0,uL.cloneDeep)(a.param_config),a.horizontal_crs)},downloadTemplate:function(){let e=document.createElement(\"a\"),t=4===n.value?\"template-4params.csv\":\"template-7params.csv\";e.href=`/aec/${t}`,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}}}}),b0=(0,gU.Z)(bq,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"coordinate-form dark\"},[e.settingData.prj_file_name?[t(\"div\",{staticClass:\"box-item\"},[t(\"div\",{staticClass:\"box-item__content prj-file-wrap flex-between-center\"},[t(\"span\",[e._v(e._s(e.settingData.prj_file_name))]),e.disabled?e._e():t(\"DoubleDelete\",{attrs:{\"reset-when-leave\":\"\",\"icon-size\":16},on:{delete:e.deletePrj}})],1)]),e.prjParam?t(\"div\",{staticClass:\"box-item prj-param-box\"},[t(\"header\",{staticClass:\"prj-param__header\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.prj_params_statement\"))+\" \")]),t(\"div\",e._l(e.prjParamList,function(o,a){return t(\"section\",{key:a,staticClass:\"prj-param__section\"},e._l(e.prjParamList[a],function(o){return t(\"div\",{key:o.param,staticClass:\"prj-param__item flex-between-center\"},[e._v(\" \"+e._s(o.label)+\" \"),t(\"span\",{staticClass:\"item-value\"},[e._v(\" \"+e._s(e.prjParam[o.param]||\"--\")+\" \")])])}),0)}),0)]):e._e()]:e._e(),e.settingData.prj_file_name?e._e():[t(\"div\",{staticClass:\"box-item\"},[t(\"div\",{staticClass:\"box-item__title flex-between-center\"},[t(\"span\",[e._v(e._s(e.$t(\"web.p_setting.file_coordinate_type\")))]),t(\"UranusButton\",{attrs:{plain:\"\",type:\"primary\"},on:{click:e.selectPrj}},[t(\"span\",{staticClass:\"file-import__text\"},[e._v(e._s(e.$t(\"web.p_setting.import_prj\")))]),t(\"input\",{ref:\"fileInput\",staticStyle:{display:\"none\"},attrs:{type:\"file\",accept:\".prj\"},on:{change:e.onFileChange}})])],1),t(\"div\",{staticClass:\"box-item__content\"},[t(\"uranus-tooltip\",{attrs:{placement:\"right\",\"arrow-point-at-center\":\"\",\"overlay-class-name\":\"coordinate-type-tooltip\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[t(\"div\",{staticClass:\"coordinate-type-tip-wrap\"},e._l(e.coordinateTypeTooltip,function(o){return t(\"section\",{key:o.title,staticClass:\"type-tip__section\"},[t(\"div\",{staticClass:\"type-tip__title\"},[e._v(\" \"+e._s(o.title)+\" \")]),e._l(o.descs,function(o){return t(\"div\",{key:o,staticClass:\"type-tip__desc\"},[e._v(\" \"+e._s(o)+\" \")])})],2)}),0)]},proxy:!0}],null,!1,2985750387)},[t(\"UranusSelect\",{attrs:{value:e.settingData.crs_type,options:e.coordinateSource,theme:\"dark\"},on:{change:e.changeCrsType}})],1)],1)]),1===e.settingData.crs_type?[t(\"div\",{staticClass:\"box-item\"},[t(\"div\",{staticClass:\"box-item__title\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.file_coordinate_horizontal\"))+\" \")]),t(\"div\",[t(\"CoordinateSelect\",{attrs:{value:e.settingData.horizontal_crs,\"org-id\":e.orgId},on:{change:e.changeHorizontalCoordinate}})],1)]),t(\"div\",{staticClass:\"box-item\"},[t(\"div\",{staticClass:\"box-item__title\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.file_coordinate_vertical\"))+\" \")]),t(\"div\",[t(\"UranusSelect\",{attrs:{value:e.settingData.vertical_crs,options:e.verticalCoordinateOptions,theme:\"dark\",placeholder:e.$t(\"web.my_profile.please_select\")},on:{change:e.changeVerticalCrs}})],1)])]:[t(\"div\",{staticClass:\"box-item box-item--border\"},[t(\"div\",{staticClass:\"box-item\",staticStyle:{\"margin-top\":\"0\"}},[t(\"div\",{staticClass:\"box-item__title\"},[e._v(\" \"+e._s(e.$t(\"web.coordinate.ellipsoidal_param\"))+\" \")]),t(\"div\",{staticClass:\"box-item__content\"},[t(\"UranusSelect\",{attrs:{value:e.customCoordinate.ellipsoidalParam,options:e.ellipsoidalParamOptions,theme:\"dark\",placeholder:e.$t(\"web.my_profile.please_select\")},on:{change:e.changeEllipsoidalParam}})],1)]),t(\"div\",{staticClass:\"box-item\"},[t(\"div\",{staticClass:\"box-item__title\"},[e._v(\" \"+e._s(e.$t(\"web.coordinate.projection_type\"))+\" \")]),t(\"div\",{staticClass:\"box-item__content\"},[t(\"UranusSelect\",{attrs:{value:e.customCoordinate.projectionType,options:e.projectionTypeOptions,theme:\"dark\",placeholder:e.$t(\"web.my_profile.please_select\")},on:{change:e.changeProjectionType}})],1)]),t(\"div\",{staticClass:\"box-item flex-between-center\"},[t(\"section\",{staticClass:\"item-param\"},[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.central_meridian\"))+\"\\xa0(\\xb0)\")]),t(\"UranusInputNumber\",{staticClass:\"center-meridian-input\",staticStyle:{width:\"96px\"},attrs:{value:e.customCoordinate.centralMeridian,max:180,min:-180},on:{change:e.changeCenterMeridian}})],1),t(\"section\",{staticClass:\"item-param\"},[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.fake_east\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"item-param__input\",attrs:{value:e.customCoordinate.fakeEast,max:1e8,min:-1e8},on:{change:e.changeFakeEast}})],1),t(\"section\",{staticClass:\"item-param\"},[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.fakse_north\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"item-param__input\",attrs:{value:e.customCoordinate.fakeNorth,max:1e8,min:-1e8},on:{change:e.changeFakeNorth}})],1)])])]],2===e.settingData.crs_type?[t(\"uranus-tooltip\",{attrs:{placement:\"right\",\"arrow-point-at-center\":\"\",\"overlay-class-name\":\"coordinate-type-tooltip\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[t(\"div\",{staticClass:\"coordinate-type-tip-wrap\"},e._l(e.paramsTooltip,function(o){return t(\"section\",{key:o.title,staticClass:\"type-tip__section\"},[t(\"div\",{staticClass:\"type-tip__title\"},[e._v(\" \"+e._s(o.title)+\" \")]),e._l(o.descs,function(o){return t(\"div\",{key:o,staticClass:\"type-tip__desc\"},[e._v(\" \"+e._s(o)+\" \")])})],2)}),0)]},proxy:!0}],null,!1,1603644789)},[t(\"div\",{staticClass:\"box-item box-item--border\"},[t(\"div\",{staticClass:\"box-item__title\"},[t(\"header\",{staticClass:\"flex-between-center\"},[t(\"span\",[e._v(e._s(e.$t(\"web.coordinate.param_setting\")))]),t(\"section\",[t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.common.download_template\")}},[t(\"UranusButton\",{attrs:{plain:\"\"},on:{click:e.downloadTemplate}},[t(\"uranus-icon\",{attrs:{name:\"download\",size:16}})],1)],1),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.coordinate.import_only_csv\")}},[t(\"UranusButton\",{attrs:{plain:\"\"},on:{click:e.importCsv}},[t(\"uranus-icon\",{attrs:{name:\"import\",size:16}}),t(\"input\",{ref:\"paramsCsvInput\",staticStyle:{display:\"none\"},attrs:{type:\"file\",accept:\".csv\"},on:{change:e.onParamsCsvFileChange}})],1)],1),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"top\",\"arrow-point-at-center\":\"\",content:e.$t(\"common.action.export\")}},[t(\"UranusButton\",{attrs:{plain:\"\",disable:!e.canExport},on:{click:e.exportCsv}},[t(\"uranus-icon\",{attrs:{name:\"export2\",size:16,color:`rgba(255, 255, 255,${e.canExport?1:.25})`}})],1)],1)],1)]),t(\"UranusRadioGroup\",{staticStyle:{\"margin-top\":\"16px\"},attrs:{value:e.paramsType,\"data-source\":e.paramsOptions},on:{change:e.changeParamType}})],1),t(\"div\",{staticClass:\"box-item__content\",class:[`param-content--${e.is4params?\"4\":\"7\"}`]},[t(\"section\",[t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.is4params,expression:\"is4params\"}]},[t(\"div\",{staticClass:\"box-item flex-between-center\"},[t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.x_translation\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.fourParamsValue.dx,theme:\"dark\",max:1e10,min:-1e10},on:{change:function(t){return e.changeFourParam(\"dx\",t)}}})],1),t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.y_translation\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.fourParamsValue.dy,theme:\"dark\",max:1e10,min:-1e10},on:{change:function(t){return e.changeFourParam(\"dy\",t)}}})],1)]),t(\"div\",{staticClass:\"box-item flex-between-center\"},[t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.rotation\"))+\"\\xa0(rad)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.fourParamsValue.r,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeFourParam(\"r\",t)}}})],1),t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.scale\")))]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.fourParamsValue.s,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeFourParam(\"s\",t)}}})],1)])]),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.is4params,expression:\"!is4params\"}]},[t(\"div\",{staticClass:\"box-item flex-between-center\"},[t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.x_translation\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.dx,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"dx\",t)}}})],1),t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.y_translation\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.dy,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"dy\",t)}}})],1),t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.z_translation\"))+\"\\xa0(m)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.dz,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"dz\",t)}}})],1)]),t(\"div\",{staticClass:\"box-item flex-between-center\"},[t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.x_rotation\"))+\"\\xa0(sec)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.rx,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"rx\",t)}}})],1),t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.y_rotation\"))+\"\\xa0(sec)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.ry,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"ry\",t)}}})],1),t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.z_rotation\"))+\"\\xa0(sec)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.rz,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"rz\",t)}}})],1)]),t(\"div\",{staticClass:\"box-item flex-between-center\"},[t(\"section\",[t(\"div\",[e._v(e._s(e.$t(\"web.coordinate.scale\"))+\"\\xa0(ppm)\")]),t(\"UranusInputNumber\",{staticClass:\"param-item__input\",attrs:{value:e.sevenParamsValue.s,theme:\"dark\",max:1e6,min:-1e6},on:{change:function(t){return e.changeSevenParam(\"s\",t)}}})],1)])])]),t(\"section\",{staticClass:\"box-item text-right\"},[t(\"UranusButton\",{attrs:{plain:\"\",type:\"primary\"},on:{click:e.openParamCalculator}},[e._v(\" \"+e._s(e.$t(\"web.coordinate.param_calculator\"))+\" \")])],1)])])])]:e._e()],2)},[],!1,null,\"7be2ed0c\",null).exports,b1=(0,uj.aZ)({name:\"CoordinateSetting\",components:{CoordinateForm:b0},props:{setting:{type:Object,default:null},projectCenter:{type:Object,default:null},orgId:{type:String,default:\"\"},paramCalculator:{type:Array,default:()=>[]}},setup(e,{emit:t}){let o=(0,uj.iH)(e.setting?.set_crs||!1),a={},r=(0,uj.iH)(uE.Custom),i=(0,uj.iH)(!1);function n(){t(\"close-panel\")}let s=(0,uj.iH)(uC.NO),c=(0,uj.Fl)(()=>{let e=ub.CLOSE;return o.value&&(e=ub.OPEN),{source:uI.CoordinateSetting,coordinate_status:e,import_prj:s.value,type:r.value}});async function l(){var e;e=c.value,window.$reportStatData&&window.$reportStatData({type:uv.FhSystemCoordinateSystemStart,eventValue:e});let r={};o.value?(r={set_crs:!0,...a},await yf(s_.save_pro_point)):r={set_crs:!1},t(\"change\",r),i.value=!1,n()}return{fileCoordinateSwitch:o,changeCoordinateForm:function(e){a=e,r.value=1===e.crs_type?uE.Common:uE.Custom},saveConfirmVisible:i,prjFileChange:function(){s.value=uC.YES},save:l,close:n,openParamCalculator:function(e,o){t(\"open-param-calculator\",e,o)}}}}),b2=(0,gU.Z)(b1,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"coordinate-set-panel uranus-scrollbar dark\"},[t(\"div\",{staticClass:\"side-header\"},[t(\"span\",{staticClass:\"title-text\"},[e._v(e._s(e.$t(\"web.p_setting.file_coordinate_setting\")))])]),t(\"div\",{staticClass:\"side-body\"},[t(\"div\",{staticClass:\"box-item box-item--desc\"},[t(\"div\",[e._v(e._s(e.$t(\"web.p_setting.file_coordinate_desc1\")))]),t(\"div\",[e._v(e._s(e.$t(\"web.p_setting.file_coordinate_desc2\")))])]),t(\"div\",{staticClass:\"box-item flex-between-center\",staticStyle:{\"margin-bottom\":\"16px\"}},[t(\"span\",[e._v(e._s(e.$t(\"web.p_setting.file_coordinate\")))]),t(\"UranusSwitch\",{model:{value:e.fileCoordinateSwitch,callback:function(t){e.fileCoordinateSwitch=t},expression:\"fileCoordinateSwitch\"}})],1),t(\"section\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.fileCoordinateSwitch,expression:\"fileCoordinateSwitch\"}]},[t(\"CoordinateForm\",{attrs:{source:e.setting,\"project-center\":e.projectCenter,\"org-id\":e.orgId,\"param-calculator\":e.paramCalculator},on:{change:e.changeCoordinateForm,\"file-change\":e.prjFileChange,\"open-param-calculator\":e.openParamCalculator}})],1)]),t(\"div\",{staticClass:\"box-item footer-btn\"},[t(\"UranusButton\",{attrs:{size:\"md\"},on:{click:e.close}},[e._v(\" \"+e._s(e.$t(\"common.action.cancel\"))+\" \")]),t(\"UranusButton\",{attrs:{size:\"md\",type:\"primary\"},on:{click:function(t){e.saveConfirmVisible=!0}}},[e._v(\" \"+e._s(e.$t(\"common.action.confirm\"))+\" \")]),t(\"UranusModal\",{attrs:{visible:e.saveConfirmVisible,title:e.$t(\"common.status.hint\"),size:\"small\",theme:\"dark\"},on:{cancel:function(t){e.saveConfirmVisible=!1},ok:e.save}},[e._v(\" \"+e._s(e.$t(\"web.coordinate.comfirm_update_tip\"))+\" \")])],1)])},[],!1,null,\"2eeb329c\",null).exports,b3=(0,uj.aZ)({name:\"ProjectEditorForm\",components:{UranusInput:fS,WeatherStopFlight:bV,FastAddUserPanel:bH,TableMember:vU,UranusSwitch:hL,TableDevice:vV,AddMemberOrDevicePanel:bz,ShareResourcesSetting:b$,RecordingSettings:bx,CoordinateSetting:b2,ParamCalculatorPanel:bS,Survey:by},props:{orgId:String,uuid:{type:String,default:\"\"},currentUser:{type:Object},noPermission:Boolean},emits:[\"update:unedited\",\"exit\",\"lost-permission\"],setup(e,{emit:t,root:o}){let{recenterMap:a,setCenterWidget:r}=gd(),i=(0,uj.Fl)(()=>!!e.uuid),n=(0,uj.iH)(),s=(0,uj.iH)(!1),c={name:\"\",introduction:\"\",members:[],devices:[],project_fast_join:{status:!1},c2c_enable:!1,c2c_task_enable:!1,dock_rotation_disabled:!1,projectWeatherBlocking:yX(void 0,!vY,void 0),project_share_config:{live_disable:!1,media_disable:!1},project_crs_config:null},l=(0,uj.qj)({id:\"\",status:_y.Run,center:null,recording_settings:null,...(0,uL.cloneDeep)(c)}),d=(0,uj.qj)({applicationCodePanel:!1,shareResources:!1,projectRecording:!1,weatherStopFlight:!1,memberOrDevice:!1,coordinate:!1}),_=(0,uj.iH)(\"member\"),u=(0,uj.iH)(!1);function m(e){for(let t in d)Object.prototype.hasOwnProperty.call(d,t)&&(t===e?d[e]=!d[e]:d[t]=!1)}async function p(){if(!i.value){(function(){if(e.currentUser){let t=e.currentUser;[nH.organizationSuperAdmin,nH.organizationAdmin].includes(t.role)?l.members=[{user_id:t.user_id,nickname:t.nickname,organization_user_callsign:t.nickname,account:t.account,org_role:t.role,isMe:!0,role:nK.projectCommander,roles_permissions:[{role_id:nK.projectCommander}]}]:(yA.Z.warning(o.$t(\"web.p_setting.authority_limit_hint\")),Z())}})();return}y(),f(),h()}(0,uj.YP)(()=>e.uuid,()=>p(),{immediate:!0});function g(e){l.id=e.project_id,l.name=e.name,l.introduction=e.introduction,l.status=e.status,l.project_fast_join=e.project_fast_join,l.c2c_enable=e.c2c_enable,l.c2c_task_enable=e.c2c_task_enable,l.dock_rotation_disabled=e.dock_rotation_disabled,l.projectWeatherBlocking=yX(e.project_weather_blocking.blocking_config_by_dock,e.project_weather_blocking.cloud_weather_blocking_status,e.project_weather_blocking.airport_weather_station_blocking_status),l.project_share_config=e.project_share_config,l.project_crs_config=e.project_crs_config}async function y(){if(!e.uuid)return;l.id=\"\",l.name=\"\",l.introduction=\"\";let t=await yo(e.uuid);if(0===t.code){let e=t.data;e.is_project_updatable?(g(e),l.center=e.project_work_center_point,o.$pager.shareResourcesConfig.next(l.project_share_config),l.center&&a(l.center)):yA.Z.error(o.$t(\"web.projects.eixt_project_authority_limit\"))}}async function f(){l.members=[];let t=await ya(e.uuid);if(0===t.code){let e=t.data;l.members=e.list||[]}}async function h(){let t=await yr(e.uuid);if(0===t.code){let e=t.data;l.devices=e.list||[]}}let k=(0,uj.qj)((0,uL.cloneDeep)(c));(0,uj.YP)(()=>l.name,e=>{k.name=e},{immediate:!0}),(0,uj.YP)(()=>l.introduction,e=>{k.introduction=e},{immediate:!0}),(0,uj.YP)(()=>l.members,e=>{k.members=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.devices,e=>{k.devices=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.project_fast_join,e=>{k.project_fast_join=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.c2c_enable,e=>{k.c2c_enable=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.c2c_task_enable,e=>{k.c2c_task_enable=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.dock_rotation_disabled,e=>{k.dock_rotation_disabled=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.projectWeatherBlocking,e=>{k.projectWeatherBlocking=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.project_share_config,e=>{k.project_share_config=(0,uL.cloneDeep)(e)},{immediate:!0}),(0,uj.YP)(()=>l.project_crs_config,e=>{k.project_crs_config=(0,uL.cloneDeep)(e)},{immediate:!0});let{position:v,drawing:b,startDraw:C,resetPosition:I}=function(e){let t;let{onClickEntities:o,pickPosition:a,setMapCursor:r}=gd(),i=(0,uj.qj)({name:\"\",status:\"run\",position:null,type:\"allow\",selected:!1});async function n(e,t,o){if(\"\"===e){let e=await a(o.position);e&&(i.position={longitude:e.longitude,latitude:e.latitude})}}(0,uj.YP)(e,e=>{switch(i.name=e.name,e.status){case _y.Run:i.status=\"run\";break;case _y.Close:i.status=\"close\"}},{immediate:!0}),k0(i);let s=(0,uj.iH)(!1);async function c(){!s.value&&(s.value=!0,r(\"center\"),t=await o(n))}function l(){s.value=!1,r(\"\"),t?.()}return(0,uj.Ah)(()=>{l()}),{position:(0,uj.Fl)(()=>i.position),drawing:s,startDraw:c,finishDraw:l,resetPosition(e){i.position=e}}}((0,uj.Fl)(()=>({name:k.name,status:l.status})));(0,uj.YP)(()=>l.center,e=>{e&&I(e)},{immediate:!0});let A=(0,uj.iH)(!1);(0,uj.YP)(v,()=>{r({center:v.value}),b.value&&(yA.Z.success(o.$t(\"web.p_setting.set_project_center_success\")),N.center=\"\",W(!1),window.setTimeout(()=>{A.value=!1},300))});let E=!1;!i.value&&\"geolocation\"in navigator&&navigator.geolocation.getCurrentPosition(e=>{if(!E){if(e.coords.latitude&&e.coords.longitude){var t;t={latitude:e.coords.latitude,longitude:e.coords.longitude},l.center=t,a(t)}}}),(0,uj.bv)(()=>{l.projectWeatherBlocking=yX(void 0,!vY,void 0),r({visible:!0,center:null})}),(0,uj.Jd)(()=>{E=!0,r({visible:!1,center:null})});let T=(0,uj.Fl)(()=>{let e=k.members.filter(e=>e.role===nK.projectCommander);return 1===e.length?e[0].user_id:\"\"}),M=(0,uj.Fl)(()=>k.members.map(e=>e.user_id)),w=(0,uj.Fl)(()=>k.devices.map(e=>e.sn)),N=(0,uj.qj)({name:\"\",center:\"\"}),S=(0,uj.Fl)(()=>!!N.name||!!N.center);function P(e=\"\"){switch(e){case\"\":N.name=\"\";break;case\"empty\":N.name=o.$t(\"web.p_setting.project_name_cannot_empty\");break;case\"overflow\":N.name=o.$t(\"web.p_setting.project_name_too_long\");break;default:N.name=e}}let D=()=>\"\"===k.name?\"empty\":fM(k.name,40)?\"overflow\":\"\",O=(0,uL.debounce)(t=>g7({uuid:e.orgId,name:t},{ignoreGlobalErrorHandler:!0}).catch(e=>{let{code:t,codeMessage:o}=e;(210102===t||210101===t)&&P(o)}),300);async function R(){let e=D();P(e),\"\"===e&&k.name!==l.name&&O(k.name)}let j=(e,t)=>{let o=[...e],a=[...t];return o.sort((e,t)=>e.nickname.localeCompare(t.nickname)),a.sort((e,t)=>e.nickname.localeCompare(t.nickname)),!(0,uL.isEqual)(o,a)},L=(0,uj.Fl)(()=>k.name===l.name&&k.introduction===l.introduction&&JSON.stringify(l.center)===JSON.stringify(v.value)&&JSON.stringify(k.project_fast_join)===JSON.stringify(l.project_fast_join)&&JSON.stringify(k.c2c_enable)===JSON.stringify(l.c2c_enable)&&JSON.stringify(k.c2c_task_enable)===JSON.stringify(l.c2c_task_enable)&&JSON.stringify(k.dock_rotation_disabled)===JSON.stringify(l.dock_rotation_disabled)&&JSON.stringify(k.projectWeatherBlocking.blocking_config_by_dock)===JSON.stringify(l.projectWeatherBlocking?.blocking_config_by_dock)&&JSON.stringify(k.projectWeatherBlocking.blocking_config_by_dock)===JSON.stringify(l.projectWeatherBlocking?.blocking_config_by_dock)&&!j(k.members,l.members)&&!j(k.devices,l.devices)&&JSON.stringify(k.project_share_config)===JSON.stringify(l.project_share_config)&&JSON.stringify(k.project_crs_config)===JSON.stringify(l.project_crs_config));(0,uj.YP)(()=>L.value,()=>{t(\"update:unedited\",L.value)},{immediate:!0});let x=(0,uj.iH)(!1),U=(0,uj.iH)(\"\");async function F(){if(await R(),O.cancel(),!v.value&&(N.center=o.$t(\"web.p_setting.set_project_center_point\"),(0,uj.Y3)(()=>{n.value?.$el.scrollIntoView(!0)})),!S.value&&!x.value)if(i.value)Z();else{if(L.value)return;H()}}function G(e,t){return e===t?\"\":e}function z(e,t=!1){return e.map(e=>{let o={user_id:e.user_id};return!t&&(o.nickname=G(e.nickname,e.organization_user_callsign),o.role=e.role),o})}function B(e,t=!1){return e.map(e=>{let o={sn:e.sn};return!t&&(o.nickname=G(e.nickname,e.device_organization_callsign)),o})}async function W(a=!0,r){if(e.noPermission){t(\"lost-permission\");return}if(!S.value&&!!i.value){x.value=!0;try{let t=r||function(){let e={};if(k.name&&k.name!==l.name&&(e.name=k.name),k.introduction!==l.introduction&&(e.introduction=k.introduction),JSON.stringify(l.members)!==JSON.stringify(k.members)){let{add:t,remove:o,update:a}=bs(l.members,k.members,\"user_id\");e.add_users=z(t),e.delete_users=z(o,!0),e.update_users=z(a)}if(JSON.stringify(l.project_fast_join)!==JSON.stringify(k.project_fast_join)&&(e.project_fast_join=k.project_fast_join),l.c2c_enable!==k.c2c_enable&&(e.c2c_enable=k.c2c_enable),l.c2c_task_enable!==k.c2c_task_enable&&(e.c2c_task_enable=k.c2c_task_enable),l.dock_rotation_disabled!==k.dock_rotation_disabled&&(e.dock_rotation_disabled=k.dock_rotation_disabled),l.project_share_config!==k.project_share_config&&(e.project_share_config=k.project_share_config),\"config\"===U.value&&(e.project_weather_blocking=yX(k.projectWeatherBlocking.blocking_config_by_dock,k.projectWeatherBlocking.cloud_weather_blocking_status,k.projectWeatherBlocking.airport_weather_station_blocking_status)),\"status\"===U.value&&(e.project_weather_blocking=yX(l.projectWeatherBlocking.blocking_config_by_dock,k.projectWeatherBlocking.cloud_weather_blocking_status,k.projectWeatherBlocking.airport_weather_station_blocking_status)),JSON.stringify(l.devices)!==JSON.stringify(k.devices)){let{add:t,remove:o,update:a}=bs(l.devices,k.devices,\"sn\");e.add_devices=B(t),e.delete_devices=B(o,!0),e.update_devices=B(a)}return JSON.stringify(l.center)!==JSON.stringify(v.value)&&v.value&&(e.project_work_center_point=v.value),e}(),i=await ye(e.uuid,t);if(t.project_share_config&&o.$pager.shareResourcesConfig.next(t.project_share_config),0===i.code&&(l.projectWeatherBlocking.cloud_weather_blocking_status=k.projectWeatherBlocking.cloud_weather_blocking_status,l.projectWeatherBlocking.airport_weather_station_blocking_status=k.projectWeatherBlocking.airport_weather_station_blocking_status,l.members=(0,uL.cloneDeep)(k.members),g(i.data),yA.Z.success(o.$t(\"web.p_setting.edit_project_name_success\")),a)){Z();return}}catch(e){}x.value=!1}}async function H(){if(!S.value&&!!e.orgId){x.value=!0;try{let t=await g8(e.orgId,{name:k.name,introduction:k.introduction,users:z(k.members),devices:B(k.devices),project_work_center_point:v.value||void 0,project_fast_join:k.project_fast_join,c2c_enable:k.c2c_enable,c2c_task_enable:k.c2c_task_enable,dock_rotation_disabled:k.dock_rotation_disabled,project_weather_blocking:yX(k.projectWeatherBlocking.blocking_config_by_dock,k.projectWeatherBlocking.cloud_weather_blocking_status,k.projectWeatherBlocking.airport_weather_station_blocking_status),project_share_config:{live_disable:k.project_share_config.live_disable,media_disable:k.project_share_config.media_disable},project_crs_config:k.project_crs_config||void 0});if(o.$pager.shareResourcesConfig.next({live_disable:k.project_share_config.live_disable,media_disable:k.project_share_config.media_disable}),0===t.code){yA.Z.success(o.$t(\"web.projects.create_project_success\")),Z();let e=t.data?.uuid;e&&o.$pager.main.next({from:\"project-list-app\",label:\"jump-to-project-in-org\",data:{id:e}})}}catch(e){}x.value=!1}}function Z(){t(\"exit\")}let V=async()=>{try{if(d.projectRecording){m(\"projectRecording\");return}if(!e.uuid||\"\"===e.uuid)return;let{code:t,data:o}=await yd(e.uuid);0===t&&(l.recording_settings=o,m(\"projectRecording\"))}catch{}},Y=(0,uj.iH)(),$=(0,uj.Fl)(()=>{let e=Y.value?.name;return(0,uL.isNil)(e)?\"--\":e});async function K(){if(!!e.uuid&&\"\"!==e.uuid)try{let{code:t,data:o}=await yd(e.uuid);0===t&&(l.recording_settings=o)}catch(e){}}async function X(e){try{let t=await y_(e);0===t.code&&(yA.Z.success(o.$t(\"web.p_setting.edit_project_name_success\")),K())}catch(e){}finally{d.projectRecording=!1}}let J=(0,uj.Fl)(()=>!(0,uL.isNil)(l.recording_settings)&&(!l.recording_settings?.disable_dock_recording||!l.recording_settings?.disable_drone_recording));(0,uj.bv)(async()=>{if(K(),(0,uL.isNil)(e.orgId))return;!v$.hideRecordSettingsGuide&&(s.value=!0);let t=await ys(e.orgId);!(0,uL.isEmpty)(t?.data?.media_data_direct_trans)&&(Y.value=t.data.media_data_direct_trans),!v$.hideRecordSettingsGuide&&(s.value=!0)});let Q=(0,uj.Fl)(()=>!(0,uL.isNil)(Y.value)),q=(0,uj.Fl)(()=>{let{set_crs:e,crs_type:t,horizontal_crs:a,crs_source:r}=k.project_crs_config||{};if(e){if(1!==t)return o.$t(\"web.p_setting.file_coordinate_custom\");if(2===r&&a){let e=ba(a);if(e&&\"PROJCS\"===e.type)return e.authority?`EPSG:${e.authority.code}`:o.$t(\"web.p_setting.file_coordinate_custom\");return\"\"}return a}return\"\"}),ee=(0,uj.iH)([]),et=(0,uj.iH)(\"\"),eo=(0,uj.iH)(!1),ea=(0,uj.iH)(!1),er=[gp(\"web.aec.survey.dissatisfied.tips1\"),gp(\"web.aec.survey.dissatisfied.tips2\"),gp(\"web.aec.survey.dissatisfied.tips4\"),gp(\"web.aec.survey.dissatisfied.tips3\")];async function ei(){ea.value=!1;let e=await yh(s_.save_pro_point);0===e.code&&(ea.value=e.data.show)}async function en(){await yk(s_.save_pro_point)}async function es(e){await yv({feature_type:s_.save_pro_point,...e}),ea.value=!1}return(0,uj.bv)(()=>{g4(sd.AEC)&&(eo.value=!0)}),{projectShareConfigChange:function(e){k.project_share_config=e},isEdit:i,project:l,form:k,cloudConfigVisible:Q,orgCloudConfig:Y,orgCloudConfigName:$,isMemberChangeable:function(t){return i.value?T.value!==t:!e.currentUser||e.currentUser.user_id!==t},memberOrDeviceType:_,openPanel:function(e){_.value=e,d.memberOrDevice=!1,m(\"memberOrDevice\")},existMembers:M,handleCloudIntegrationUpdate:()=>{k.c2c_enable=!k.c2c_enable,i.value&&W(!1)},handleCloudIntegrationTaskEnableUpdate:()=>{k.c2c_task_enable=!k.c2c_task_enable,W(!1)},handleDockRotationEnable:()=>{k.dock_rotation_disabled=!k.dock_rotation_disabled,W(!1)},existDevices:w,addMember:function(e){!M.value.includes(e.user_id)&&(k.members.unshift({account:e.account,nickname:e.nickname,org_role:e.role,user_id:e.user_id,organization_user_callsign:e.nickname,role:nK.projectMember,roles_permissions:[{role_id:nK.projectMember}]}),W(!1))},removeMember:function(e){let t=M.value.indexOf(e.user_id);if(t<0)return;let o=k.members[t];(i.value||!o.isMe)&&(k.members.splice(t,1),W(!1))},addDevice:function(e){!w.value.includes(e.sn)&&(k.devices.unshift({sn:e.sn,nickname:e.nickname,device_organization_callsign:e.nickname,type:e.type,device_model:e.device_model,is_org_device:!0}),W(!1))},removeDevice:function(e){let t=w.value.indexOf(e.sn);!(t<0)&&(k.devices.splice(t,1),W(!1))},enterDrawCenter:function(){!b.value&&(C(),A.value=!0)},updateProjectName:e=>{k.name=e,R()},errors:N,save:F,saveLoading:x,position:v,scrollPositionEle:n,unedited:L,useLatLong:hX,showCenterTips:A,switchApplicationCodePanelVisible:()=>{if(\"\"!==l.id)m(\"applicationCodePanel\")},handleUpdateProjectFastJoin:e=>{k.project_fast_join=e},handleUpdateProjectWeatherBlocking:e=>{l.id?\"config\"===e.type?(U.value=e.type,k.projectWeatherBlocking=yX(e.blocking_config_by_dock,e.cloud_weather_blocking_status,e.airport_weather_station_blocking_status)):\"status\"===e.type&&(U.value=e.type,k.projectWeatherBlocking={cloud_weather_blocking_status:e.cloud_weather_blocking_status,airport_weather_station_blocking_status:e.airport_weather_station_blocking_status}):(Object.assign(k.projectWeatherBlocking,e),Object.assign(l.projectWeatherBlocking,e))},handleMembersReorder:e=>{k.members.sort(bn(\"nickname\",e.order))},handleDevicesReorder:e=>{k.devices.sort(bn(\"nickname\",e.order))},updateProject:W,updateType:U,onSwitchProjectRecordingPanelVisible:V,isRecordEnableStatus:J,onUpdateRecordSettings:X,onClickBeginnerTip:function(){s.value=!1,v$.hideRecordSettingsGuide=1},isRecordingSetupBeginnerTipVisible:s,getPopupContainer:function(e){return e.parentNode},toggleSlider:m,sliderVisible:d,coordinateValue:q,changeCoordinateSetting:function(e){k.project_crs_config=e,i.value&&(W(!1,{project_crs_config:e}),ei())},isShowParamCalculator:u,openUserManual:function(){o.$pager.main.next({from:\"project-app\",label:\"click-to-user-manual\",data:{from:\"safe_take_off_and_landing\",action:\"usermenu\",source:1,canJump:!0}})},changeCoordinateParams:function(e){ee.value=e,u.value=!1},openParamCalculator:function(e,t){ee.value=e,et.value=t,u.value=!0},projectCrsConfigCalculateResult:ee,fileCoordinateSettingVisible:eo,horizontalCrs:et,surveyShow:ea,surveyOptions:er,surveyClose:en,submitSurvey:es}}}),b4=(0,gU.Z)(b3,function(){var e=this,t=e._self._c;return e._self._setupProxy,t(\"div\",{staticClass:\"project-editor-form\"},[t(\"uranus-form\",{staticClass:\"uranus-scrollbar dark\"},[t(\"uranus-form-item\",{attrs:{error:e.errors.name,required:\"\"},scopedSlots:e._u([{key:\"label\",fn:function(){return[e._v(\" \"+e._s(e.$t(\"web.p_setting.project_name\"))+\" \"),e.project.id?t(\"span\",[e._v(\" (\"+e._s(e.$t(\"web.p_setting.project_id\"))+\": \"+e._s(e.project.id)+\") \")]):e._e()]},proxy:!0}])},[t(\"UranusInput\",{staticClass:\"uranus-form-row\",attrs:{\"model-value\":e.form.name,theme:\"dark\",placeholder:e.$t(\"web.p_setting.project_name\"),error:!!e.errors.name},on:{blur:function(t){return e.updateProject(!1)},\"update:modelValue\":e.updateProjectName}})],1),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.p_setting.project_desc\")}},[t(\"a-textarea\",{staticClass:\"uranus-scrollbar dark\",staticStyle:{resize:\"none\"},attrs:{placeholder:e.$t(\"web.p_setting.project_desc\"),\"max-length\":200,rows:4,\"auto-size\":!1},on:{blur:function(t){return e.updateProject(!1)}},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,\"introduction\",t)},expression:\"form.introduction\"}})],1),t(\"uranus-form-item\",{ref:\"scrollPositionEle\",attrs:{error:e.errors.center,required:\"\"},scopedSlots:e._u([{key:\"label\",fn:function(){return[t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.p_setting.project_location\",expression:\"'web.p_setting.project_location'\"}],staticStyle:{\"vertical-align\":\"middle\"}}),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.p_setting.project_location_note\")}},[t(\"uranus-icon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)]},proxy:!0},{key:\"right\",fn:function(){return[t(\"uranus-button\",{staticClass:\"form-action\",attrs:{plain:\"\",type:\"primary\"},on:{click:e.enterDrawCenter}},[t(\"uranus-icon\",{attrs:{name:\"back_in\"}}),t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.p_setting.set_project_center_authority\",expression:\"'web.p_setting.set_project_center_authority'\"}],staticClass:\"text\"})],1)]},proxy:!0}])},[e.position?[t(\"span\",{staticClass:\"center-description\"},[e._v(\" \"+e._s(e.$t(\"web.p_setting.set_done\"))+\" \"+e._s(e.useLatLong(e.position.latitude||0,\"lat\"))+\" \"+e._s(e.useLatLong(e.position.longitude||0,\"long\"))+\" \")])]:e._e()],2),e.fileCoordinateSettingVisible?t(\"uranus-form-item\",{scopedSlots:e._u([{key:\"label\",fn:function(){return[t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.p_setting.file_coordinate_setting\",expression:\"'web.p_setting.file_coordinate_setting'\"}],staticStyle:{\"vertical-align\":\"middle\"}})]},proxy:!0},{key:\"right\",fn:function(){return[t(\"uranus-button\",{staticClass:\"form-action\",staticStyle:{\"max-width\":\"200px\"},attrs:{plain:\"\"},on:{click:function(t){return e.toggleSlider(\"coordinate\")}}},[t(\"span\",{staticClass:\"fast-join-status\"},[e._v(e._s(e.coordinateValue))]),t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)]},proxy:!0}],null,!1,1015109240)}):e._e(),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.p_setting.apply_code_join_project\")},scopedSlots:e._u([{key:\"right\",fn:function(){return[\"\"===e.project.id?[t(\"uranus-tooltip\",{attrs:{theme:\"dark\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[e._v(\" \"+e._s(e.$t(\"web.p_setting.edit_limit_hint\"))+\" \")]},proxy:!0}],null,!1,3484639578)},[t(\"uranus-button\",{staticClass:\"form-action\",class:{disabled:\"\"===e.project.id},attrs:{plain:\"\",type:\"primary\"},on:{click:e.switchApplicationCodePanelVisible}},[t(\"span\",{staticClass:\"fast-join-status\"},[e._v(e._s(e.form.project_fast_join.status?e.$t(\"common.status.already_open\"):e.$t(\"common.status.not_open\")))]),t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)],1)]:[t(\"uranus-button\",{staticClass:\"form-action\",class:{disabled:\"\"===e.project.id},attrs:{plain:\"\",type:\"primary\"},on:{click:e.switchApplicationCodePanelVisible}},[t(\"span\",{staticClass:\"fast-join-status\",class:{errormsg:e.form.project_fast_join.is_expired}},[e._v(e._s(e.form.project_fast_join.status?e.form.project_fast_join.is_expired?e.$t(\"web.p_setting.expired\"):e.$t(\"common.status.already_open\"):e.$t(\"common.status.not_open\")))]),t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)]]},proxy:!0}])}),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.project-weather-title2\")},scopedSlots:e._u([{key:\"right\",fn:function(){return[[t(\"uranus-button\",{staticClass:\"form-action weather-btn\",attrs:{plain:\"\",type:\"primary\"},on:{click:function(t){return e.toggleSlider(\"weatherStopFlight\")}}},[t(\"span\",{staticClass:\"fast-join-status\"},[e._v(e._s(e.form.projectWeatherBlocking.airport_weather_station_blocking_status?e.$t(\"common.status.already_open\"):e.$t(\"common.status.not_open\")))]),t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)]]},proxy:!0}])}),t(\"uranus-form-item\",{scopedSlots:e._u([{key:\"label\",fn:function(){return[t(\"span\",{staticStyle:{\"vertical-align\":\"middle\"}},[e._v(e._s(e.$t(\"web.project_setting.dock_rotate_title\")))]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[t(\"i18n\",{staticClass:\"manual-content\",attrs:{path:\"web.project_setting.dock_rotate_tips\",tag:\"span\"},scopedSlots:e._u([{key:\"userManual\",fn:function(){return[t(\"uranus-button\",{staticClass:\"manual-button-content\",attrs:{plain:\"\",type:\"primary\"},on:{click:e.openUserManual}},[t(\"uranusIcon\",{attrs:{name:\"manual\",inline:\"\",size:18}}),e._v(\" \"+e._s(e.$t(\"web.p_wayline.user_manual\"))+\" \")],1)]},proxy:!0}])})]},proxy:!0}])},[t(\"uranus-icon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)]},proxy:!0},{key:\"right\",fn:function(){return[t(\"UranusSwitch\",{attrs:{checked:!e.form.dock_rotation_disabled},on:{change:e.handleDockRotationEnable}})]},proxy:!0}])}),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.projects.recording_setup_short_settings\")},scopedSlots:e._u([{key:\"right\",fn:function(){return[t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"\"===e.project.id,expression:\"project.id === ''\"}]},[t(\"uranus-tooltip\",{attrs:{theme:\"dark\"},scopedSlots:e._u([{key:\"title\",fn:function(){return[e._v(\" \"+e._s(e.$t(\"web.p_setting.edit_limit_hint\"))+\" \")]},proxy:!0}])},[t(\"uranus-button\",{staticClass:\"form-action\",class:{disabled:\"\"===e.project.id},attrs:{plain:\"\",type:\"primary\"}},[t(\"span\",{staticClass:\"fast-join-status\"},[e._v(e._s(e.$t(\"common.status.not_open\")))]),t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)],1)],1),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"\"!==e.project.id,expression:\"project.id !== ''\"}]},[t(\"a-popover\",{attrs:{placement:\"right\",\"overlay-class-name\":\"recording-setup-beginner-tip\",\"arrow-point-at-center\":!0,\"get-popup-container\":e.getPopupContainer,visible:e.isRecordingSetupBeginnerTipVisible},scopedSlots:e._u([{key:\"content\",fn:function(){return[t(\"div\",{staticClass:\"recording-setup-beginner-tip-content\"},[t(\"div\",{staticClass:\"recording-setup-beginner-tip-title\"},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_short_settings\"))+\" \")]),t(\"div\",{staticClass:\"recording-setup-beginner-tip-description\"},[e._v(\" \"+e._s(e.$t(\"web.projects.recording_setup_beginner_tip\"))+\" \")]),t(\"div\",{staticClass:\"recording-setup-beginner-tip-btn-box\"},[t(\"uranus-button\",{attrs:{type:\"primary\",size:\"md\"},on:{click:e.onClickBeginnerTip}},[e._v(\" \"+e._s(e.$t(\"web.projects.drc_intro_setting_got_it\"))+\" \")])],1)])]},proxy:!0}])},[t(\"uranus-button\",{staticClass:\"form-action weather-btn\",attrs:{plain:\"\",type:\"primary\"},on:{click:e.onSwitchProjectRecordingPanelVisible}},[t(\"span\",{staticClass:\"fast-join-status\"},[e._v(e._s(e.isRecordEnableStatus?e.$t(\"common.status.already_open\"):e.$t(\"common.status.not_open\")))]),t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)],1)],1)]},proxy:!0}])}),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.share_project_setting\")},scopedSlots:e._u([{key:\"right\",fn:function(){return[[t(\"uranus-button\",{staticClass:\"form-action\",attrs:{plain:\"\",type:\"primary\"},on:{click:function(t){return e.toggleSlider(\"shareResources\")}}},[t(\"uranus-icon\",{staticClass:\"fast-join-arrow\",attrs:{name:\"arrow\",color:\"#fff\"}})],1)]]},proxy:!0}])}),e.cloudConfigVisible?t(\"uranus-form-item\",{scopedSlots:e._u([{key:\"label\",fn:function(){return[t(\"span\",{staticStyle:{\"vertical-align\":\"middle\"}},[e._v(e._s(e.$t(\"web.p_plan.cloud_to_cloud_tip14\")))]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.p_plan.cloud_to_cloud_tip1\",{platform:e.orgCloudConfigName})}},[t(\"uranus-icon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)]},proxy:!0},{key:\"right\",fn:function(){return[t(\"UranusSwitch\",{attrs:{checked:e.form.c2c_enable},on:{change:e.handleCloudIntegrationUpdate}})]},proxy:!0}],null,!1,682017722)}):e._e(),e.cloudConfigVisible?t(\"uranus-form-item\",{scopedSlots:e._u([{key:\"label\",fn:function(){return[t(\"span\",{staticStyle:{\"vertical-align\":\"middle\"}},[e._v(e._s(e.$t(\"web.p_plan.cloud_to_cloud_task_enable\")))]),t(\"uranus-tooltip\",{attrs:{theme:\"dark\",placement:\"bottomLeft\",\"arrow-point-at-center\":\"\",content:e.$t(\"web.p_plan.cloud_to_cloud_task_enable_desc\")}},[t(\"uranus-icon\",{staticClass:\"center-info\",attrs:{name:\"info\"}})],1)]},proxy:!0},{key:\"right\",fn:function(){return[t(\"UranusSwitch\",{attrs:{checked:e.form.c2c_task_enable},on:{change:e.handleCloudIntegrationTaskEnableUpdate}})]},proxy:!0}],null,!1,3154691959)}):e._e(),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.p_setting.project_members\")},scopedSlots:e._u([{key:\"right\",fn:function(){return[t(\"uranus-button\",{staticClass:\"form-action\",attrs:{plain:\"\",type:\"primary\"},on:{click:function(t){return e.openPanel(\"member\")}}},[t(\"uranus-icon\",{attrs:{name:\"add\"}}),t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.p_setting.add_member\",expression:\"'web.p_setting.add_member'\"}],staticClass:\"text\"})],1)]},proxy:!0}])},[t(\"TableMember\",{attrs:{\"member-list\":e.form.members,\"enter-edit\":\"\",\"org-id\":e.orgId,\"is-editable\":e.isMemberChangeable},on:{\"update:memberList\":function(t){return e.$set(e.form,\"members\",t)},\"update:member-list\":function(t){return e.$set(e.form,\"members\",t)},\"update-project\":function(t){return e.updateProject(!1)},\"reorder-list\":e.handleMembersReorder}})],1),t(\"uranus-form-item\",{attrs:{label:e.$t(\"web.p_setting.project_devices\")},scopedSlots:e._u([{key:\"right\",fn:function(){return[t(\"uranus-button\",{staticClass:\"form-action\",attrs:{plain:\"\",type:\"primary\"},on:{click:function(t){return e.openPanel(\"device\")}}},[t(\"uranus-icon\",{attrs:{name:\"add\"}}),t(\"span\",{directives:[{name:\"t\",rawName:\"v-t\",value:\"web.project.setting_add_drone\",expression:\"'web.project.setting_add_drone'\"}],staticClass:\"text\"})],1)]},proxy:!0}])},[t(\"TableDevice\",{attrs:{\"device-list\":e.form.devices,\"enter-edit\":\"\"},on:{\"update:deviceList\":function(t){return e.$set(e.form,\"devices\",t)},\"update:device-list\":function(t){return e.$set(e.form,\"devices\",t)},\"update-project\":function(t){return e.updateProject(!1)},\"reorder-list\":e.handleDevicesReorder}})],1)],1),t(\"div\",{staticClass:\"actions\"},[t(\"uranus-button\",{attrs:{size:\"lg\",type:\"primary\",disabled:!e.isEdit&&(e.unedited||e.saveLoading)},on:{click:e.save}},[e._v(\" \"+e._s(e.isEdit?e.$t(\"common.action.done\"):e.$t(\"web.projects.new_project\"))+\""
}