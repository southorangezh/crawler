{
  "metadata": {
    "source_file": "paas-core.42b16654be65982806e5.js",
    "chunk_index": 2,
    "total_chunks": 1100,
    "chunk_size": 53264,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:51.984Z"
  },
  "content": "a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\")),o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.completeBucketWorm=void 0;var i=e(\"../utils/checkBucketName\");function s(){return(s=(0,o.default)(n.default.mark(function e(r,t,a){var o,s;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.checkBucketName(r),o=this._bucketRequestParams(\"POST\",r,{wormId:t},a),e.next=4,this.request(o);case 4:return s=e.sent,e.abrupt(\"return\",{res:s.res,status:s.status});case 6:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.completeBucketWorm=function(e,r,t){return s.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],9:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.deleteBucketInventory=void 0;var i=e(\"../utils/checkBucketName\");function s(){return(s=(0,o.default)(n.default.mark(function e(r,t){var a,o,s,l,d=arguments;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object.assign({inventory:\"\",inventoryId:t},(a=d.length>2&&void 0!==d[2]?d[2]:{}).subres),i.checkBucketName(r),(s=this._bucketRequestParams(\"DELETE\",r,o,a)).successStatuses=[204],e.next=7,this.request(s);case 7:return l=e.sent,e.abrupt(\"return\",{status:l.status,res:l.res});case 9:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.deleteBucketInventory=function(e,r){return s.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],10:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\")),i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName;t.deleteBucketLifecycle=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(r),(a=this._bucketRequestParams(\"DELETE\",r,\"lifecycle\",t)).successStatuses=[204],e.next=5,this.request(a);case 5:return n=e.sent,e.abrupt(\"return\",{res:n.res});case 7:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],11:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\")),i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName;t.deleteBucketWebsite=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(r),(a=this._bucketRequestParams(\"DELETE\",r,\"website\",t)).successStatuses=[204],e.next=5,this.request(a);case 5:return n=e.sent,e.abrupt(\"return\",{res:n.res});case 7:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],12:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\")),o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.extendBucketWorm=void 0;var i=e(\"../utils/checkBucketName\"),s=e(\"../utils/obj2xml\");function l(){return(l=(0,o.default)(n.default.mark(function e(r,t,a,o){var l,d,c;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.checkBucketName(r),l=this._bucketRequestParams(\"POST\",r,{wormExtend:\"\",wormId:t},o),d={ExtendWormConfiguration:{RetentionPeriodInDays:a}},l.mime=\"xml\",l.content=s.obj2xml(d,{headers:!0}),l.successStatuses=[200],e.next=8,this.request(l);case 8:return c=e.sent,e.abrupt(\"return\",{res:c.res,status:c.status});case 10:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.extendBucketWorm=function(e,r,t,a){return l.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],13:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.getBucketInventory=void 0;var i=e(\"../utils/checkBucketName\"),s=e(\"../utils/formatInventoryConfig\");function l(){return(l=(0,o.default)(n.default.mark(function e(r,t){var a,o,l,d,c=arguments;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object.assign({inventory:\"\",inventoryId:t},(a=c.length>2&&void 0!==c[2]?c[2]:{}).subres),i.checkBucketName(r),(l=this._bucketRequestParams(\"GET\",r,o,a)).successStatuses=[200],l.xmlResponse=!0,e.next=8,this.request(l);case 8:return d=e.sent,e.abrupt(\"return\",{status:d.status,res:d.res,inventory:s.formatInventoryConfig(d.data)});case 10:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.getBucketInventory=function(e,r){return l.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"../utils/formatInventoryConfig\":62,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],14:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.array.map.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName,l=e(\"../utils/isArray\").isArray,d=e(\"../utils/formatObjKey\").formatObjKey;t.getBucketLifecycle=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(r),(a=this._bucketRequestParams(\"GET\",r,\"lifecycle\",t)).successStatuses=[200],a.xmlResponse=!0,e.next=6,this.request(a);case 6:return(i=(n=e.sent).data.Rule||null)&&(!l(i)&&(i=[i]),i=i.map(function(e){return e.ID&&(e.id=e.ID,delete e.ID),e.Tag&&!l(e.Tag)&&(e.Tag=[e.Tag]),d(e,\"firstLowerCase\")})),e.abrupt(\"return\",{rules:i,res:n.res});case 10:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"../utils/formatObjKey\":63,\"../utils/isArray\":66,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.map.js\":318}],15:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\")),i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName;t.getBucketVersioning=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(r),(a=this._bucketRequestParams(\"GET\",r,\"versioning\",t)).xmlResponse=!0,a.successStatuses=[200],e.next=6,this.request(a);case 6:return i=(n=e.sent).data.Status,e.abrupt(\"return\",{status:n.status,versionStatus:i,res:n.res});case 9:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],16:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\")),i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName,l=e(\"../utils/isObject\").isObject;t.getBucketWebsite=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(r),(a=this._bucketRequestParams(\"GET\",r,\"website\",t)).successStatuses=[200],a.xmlResponse=!0,e.next=6,this.request(a);case 6:return n=e.sent,i=[],n.data.RoutingRules&&n.data.RoutingRules.RoutingRule&&(i=l(n.data.RoutingRules.RoutingRule)?[n.data.RoutingRules.RoutingRule]:n.data.RoutingRules.RoutingRule),e.abrupt(\"return\",{index:n.data.IndexDocument&&n.data.IndexDocument.Suffix||\"\",supportSubDir:n.data.IndexDocument&&n.data.IndexDocument.SupportSubDir||\"false\",type:n.data.IndexDocument&&n.data.IndexDocument.Type,routingRules:i,error:n.data.ErrorDocument&&n.data.ErrorDocument.Key||null,res:n.res});case 10:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"../utils/isObject\":73,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],17:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.getBucketWorm=void 0;var i=e(\"../utils/checkBucketName\"),s=e(\"../utils/dataFix\");function l(){return(l=(0,o.default)(n.default.mark(function e(r,t){var a,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.checkBucketName(r),(a=this._bucketRequestParams(\"GET\",r,\"worm\",t)).successStatuses=[200],a.xmlResponse=!0,e.next=6,this.request(a);case 6:return o=e.sent,s.dataFix(o.data,{lowerFirst:!0,rename:{RetentionPeriodInDays:\"days\"}}),e.abrupt(\"return\",Object.assign(Object.assign({},o.data),{res:o.res,status:o.status}));case 9:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.getBucketWorm=function(e,r){return l.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"../utils/dataFix\":58,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],18:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\")),o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.initiateBucketWorm=void 0;var i=e(\"../utils/obj2xml\"),s=e(\"../utils/checkBucketName\");function l(){return(l=(0,o.default)(n.default.mark(function e(r,t,a){var o,l,d;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.checkBucketName(r),o=this._bucketRequestParams(\"POST\",r,\"worm\",a),l={InitiateWormConfiguration:{RetentionPeriodInDays:t}},o.mime=\"xml\",o.content=i.obj2xml(l,{headers:!0}),o.successStatuses=[200],e.next=8,this.request(o);case 8:return d=e.sent,e.abrupt(\"return\",{res:d.res,wormId:d.res.headers[\"x-oss-worm-id\"],status:d.status});case 10:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.initiateBucketWorm=function(e,r,t){return l.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],19:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.listBucketInventory=void 0;var i=e(\"../utils/checkBucketName\"),s=e(\"../utils/formatInventoryConfig\");function l(){return(l=(0,o.default)(n.default.mark(function e(r){var t,a,o,l,d,c,u,f,g=arguments;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object.assign({inventory:\"\"},(a=(t=g.length>1&&void 0!==g[1]?g[1]:{}).continuationToken)&&{\"continuation-token\":a},t.subres),i.checkBucketName(r),(l=this._bucketRequestParams(\"GET\",r,o,t)).successStatuses=[200],l.xmlResponse=!0,e.next=9,this.request(l);case 9:return c=(d=e.sent).data,u=d.res,f=d.status,e.abrupt(\"return\",{isTruncated:\"true\"===c.IsTruncated,nextContinuationToken:c.NextContinuationToken,inventoryList:s.formatInventoryConfig(c.InventoryConfiguration,!0),status:f,res:u});case 12:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.listBucketInventory=function(e){return l.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"../utils/formatInventoryConfig\":62,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],20:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\"),e(\"core-js/modules/es.array.concat.js\");var o=a(e(\"@babel/runtime/helpers/asyncToGenerator\"));Object.defineProperty(t,\"__esModule\",{value:!0}),t.putBucketInventory=void 0;var i=e(\"../utils/checkBucketName\"),s=e(\"../utils/obj2xml\");function l(){return(l=(0,o.default)(n.default.mark(function e(r,t){var a,o,l,d,c,u,f,g,A,p,h,v=arguments;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>2&&void 0!==v[2]?v[2]:{},o=Object.assign({inventory:\"\",inventoryId:t.id},a.subres),i.checkBucketName(r),l=t.OSSBucketDestination,d=t.optionalFields,c=t.includedObjectVersions,u=\"acs:oss:::\",f=\"acs:ram::\".concat(l.accountId,\":role/\"),g={InventoryConfiguration:{Id:t.id,IsEnabled:t.isEnabled,Filter:{Prefix:t.prefix||\"\"},Destination:{OSSBucketDestination:{Format:l.format,AccountId:l.accountId,RoleArn:\"\".concat(f).concat(l.rolename),Bucket:\"\".concat(u).concat(l.bucket),Prefix:l.prefix||\"\",Encryption:l.encryption||\"\"}},Schedule:{Frequency:t.frequency},IncludedObjectVersions:c,OptionalFields:{Field:(null==d?void 0:d.field)||[]}}},A=s.obj2xml(g,{headers:!0,firstUpperCase:!0}),(p=this._bucketRequestParams(\"PUT\",r,o,a)).successStatuses=[200],p.mime=\"xml\",p.content=A,e.next=14,this.request(p);case 14:return h=e.sent,e.abrupt(\"return\",{status:h.status,res:h.res});case 16:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.putBucketInventory=function(e,r){return l.apply(this,arguments)}},{\"../utils/checkBucketName\":52,\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.concat.js\":310,\"core-js/modules/es.object.assign.js\":325}],21:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/web.dom-collections.for-each.js\"),e(\"core-js/modules/es.regexp.exec.js\"),e(\"core-js/modules/es.array.includes.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName,l=e(\"../utils/isArray\").isArray,d=e(\"../utils/deepCopy\").deepCopy,c=e(\"../utils/isObject\").isObject,u=e(\"../utils/obj2xml\").obj2xml,f=e(\"../utils/checkObjectTag\").checkObjectTag,g=e(\"../utils/getStrBytesCount\").getStrBytesCount;t.putBucketLifecycle=(a=(0,i.default)(o.default.mark(function e(r,t,a){var n,i,p,h,v;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s(r),l(t)){e.next=3;break}throw Error(\"rules must be Array\");case 3:return n=this._bucketRequestParams(\"PUT\",r,\"lifecycle\",a),p={LifecycleConfiguration:{Rule:i=[]}},t.forEach(function(e){(function(e){e.days&&(e.expiration={days:e.days}),e.date&&(e.expiration={createdBeforeDate:e.date})})(e),function(e){if(e.id&&g(e.id)>255)throw Error(\"ID is composed of 255 bytes at most\");if(void 0===e.prefix)throw Error(\"Rule must includes prefix\");if(![\"Enabled\",\"Disabled\"].includes(e.status))throw Error(\"Status must be Enabled or Disabled\");if(e.transition){if(![\"IA\",\"Archive\"].includes(e.transition.storageClass))throw Error(\"StorageClass must be IA or Archive\");A(e.transition,\"Transition\")}if(e.expiration){if(e.expiration.expiredObjectDeleteMarker){if(e.expiration.days||e.expiration.createdBeforeDate)throw Error(\"expiredObjectDeleteMarker cannot be used with days or createdBeforeDate\")}else A(e.expiration,\"Expiration\")}if(e.abortMultipartUpload&&A(e.abortMultipartUpload,\"AbortMultipartUpload\"),!e.expiration&&!e.abortMultipartUpload&&!e.transition&&!e.noncurrentVersionTransition)throw Error(\"Rule must includes expiration or abortMultipartUpload or transition or noncurrentVersionTransition\");if(e.tag){if(e.abortMultipartUpload)throw Error(\"Tag cannot be used with abortMultipartUpload\");!function(e){if(!l(e)&&!c(e))throw Error(\"tag must be Object or Array\");e=c(e)?[e]:e;var r={};d(e).forEach(function(e){r[e.key]=e.value}),f(r)}(e.tag)}}(e),e.id&&(e.ID=e.id,delete e.id),i.push(e)}),h=u(p,{headers:!0,firstUpperCase:!0}),n.content=h,n.mime=\"xml\",n.successStatuses=[200],e.next=13,this.request(n);case 13:return v=e.sent,e.abrupt(\"return\",{res:v.res});case 15:case\"end\":return e.stop()}},e,this)})),function(e,r,t){return a.apply(this,arguments)});function A(e,r){var t=e.days,a=e.createdBeforeDate;if(t||a){if(t&&!/^[1-9][0-9]*$/.test(t))throw Error(\"days must be a positive integer\");else if(a&&!/\\d{4}-\\d{2}-\\d{2}T00:00:00.000Z/.test(a))throw Error(\"createdBeforeDate must be date and conform to iso8601 format\")}else throw Error(\"\".concat(r,\" must includes days or createdBeforeDate\"))}},{\"../utils/checkBucketName\":52,\"../utils/checkObjectTag\":55,\"../utils/deepCopy\":59,\"../utils/getStrBytesCount\":65,\"../utils/isArray\":66,\"../utils/isObject\":73,\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.includes.js\":315,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.regexp.exec.js\":340,\"core-js/modules/web.dom-collections.for-each.js\":382}],22:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.array.includes.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName,l=e(\"../utils/obj2xml\").obj2xml;t.putBucketVersioning=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n,i,d,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>2&&void 0!==c[2]?c[2]:{},s(r),[\"Enabled\",\"Suspended\"].includes(t)){e.next=4;break}throw Error(\"status must be Enabled or Suspended\");case 4:return n=this._bucketRequestParams(\"PUT\",r,\"versioning\",a),i={VersioningConfiguration:{Status:t}},n.mime=\"xml\",n.content=l(i,{headers:!0}),e.next=10,this.request(n);case 10:return d=e.sent,e.abrupt(\"return\",{res:d.res,status:d.status});case 12:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.includes.js\":315}],23:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\")),i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName,l=e(\"../utils/obj2xml\").obj2xml,d=e(\"../utils/isArray\").isArray;t.putBucketWebsite=(a=(0,i.default)(o.default.mark(function e(r){var t,a,n,i,c,u,f,g=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>1&&void 0!==g[1]?g[1]:{},a=g.length>2?g[2]:void 0,s(r),n=this._bucketRequestParams(\"PUT\",r,\"website\",a),u={WebsiteConfiguration:c={IndexDocument:i={Suffix:t.index||\"index.html\"}}},t.supportSubDir&&(i.SupportSubDir=t.supportSubDir),t.type&&(i.Type=t.type),t.error&&(c.ErrorDocument={Key:t.error}),!(void 0!==t.routingRules)){e.next=14;break}if(d(t.routingRules)){e.next=13;break}throw Error(\"RoutingRules must be Array\");case 13:c.RoutingRules={RoutingRule:t.routingRules};case 14:return u=l(u),n.content=u,n.mime=\"xml\",n.successStatuses=[200],e.next=20,this.request(n);case 20:return f=e.sent,e.abrupt(\"return\",{res:f.res});case 22:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"../utils/isArray\":66,\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93}],24:[function(e,r,t){(function(r){(function(){\"use strict\";e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/es.regexp.to-string.js\"),e(\"core-js/modules/web.dom-collections.for-each.js\"),e(\"core-js/modules/es.object.keys.js\"),t.encodeCallback=function(e,t){if(e.headers=e.headers||{},!Object.prototype.hasOwnProperty.call(e.headers,\"x-oss-callback\")&&t.callback){var a={callbackUrl:encodeURI(t.callback.url),callbackBody:t.callback.body};t.callback.host&&(a.callbackHost=t.callback.host),t.callback.contentType&&(a.callbackBodyType=t.callback.contentType);var n=r.from(JSON.stringify(a)).toString(\"base64\");if(e.headers[\"x-oss-callback\"]=n,t.callback.customValue){var o={};Object.keys(t.callback.customValue).forEach(function(e){o[\"x:\".concat(e)]=t.callback.customValue[e].toString()}),e.headers[\"x-oss-callback-var\"]=r.from(JSON.stringify(o)).toString(\"base64\")}}}}).call(this)}).call(this,e(\"buffer\").Buffer)},{buffer:103,\"core-js/modules/es.object.keys.js\":330,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.regexp.to-string.js\":341,\"core-js/modules/web.dom-collections.for-each.js\":382}],25:[function(e,r,t){\"use strict\";e(\"core-js/modules/es.array.concat.js\"),e(\"core-js/modules/es.regexp.exec.js\"),e(\"core-js/modules/es.string.replace.js\"),e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/web.dom-collections.for-each.js\");var a=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,\"__esModule\",{value:!0}),t.getReqUrl=void 0;var n=a(e(\"copy-to\")),o=a(e(\"url\")),i=a(e(\"merge-descriptors\")),s=a(e(\"is-type-of\")),l=e(\"../utils/isIP\"),d=e(\"../utils/checkConfigValid\");t.getReqUrl=function(e){var r={},t=this.options.cname;d.checkConfigValid(this.options.endpoint,\"endpoint\"),n.default(this.options.endpoint,!1).to(r),e.bucket&&!t&&!l.isIP(r.hostname)&&!this.options.sldEnable&&(r.host=\"\".concat(e.bucket,\".\").concat(r.host));var a=\"/\";e.bucket&&this.options.sldEnable&&(a+=\"\".concat(e.bucket,\"/\")),e.object&&(a+=this._escape(e.object).replace(/\\+/g,\"%2B\")),r.pathname=a;var c={};if(e.query&&i.default(c,e.query),e.subres){var u={};s.default.string(e.subres)?u[e.subres]=\"\":s.default.array(e.subres)?e.subres.forEach(function(e){u[e]=\"\"}):u=e.subres,i.default(c,u)}return r.query=c,o.default.format(r)}},{\"../utils/checkConfigValid\":53,\"../utils/isIP\":72,\"copy-to\":107,\"core-js/modules/es.array.concat.js\":310,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.regexp.exec.js\":340,\"core-js/modules/es.string.replace.js\":347,\"core-js/modules/web.dom-collections.for-each.js\":382,\"is-type-of\":539,\"merge-descriptors\":430,url:545}],26:[function(e,r,t){\"use strict\";e(\"core-js/modules/es.array.concat.js\"),e(\"core-js/modules/es.object.assign.js\"),e(\"core-js/modules/es.string.trim.js\");var a=e(\"humanize-ms\"),n=e(\"url\"),o=e(\"../utils/checkBucketName\").checkBucketName,i=e(\"../utils/setRegion\").setRegion,s=e(\"../utils/checkConfigValid\").checkConfigValid;r.exports=function(e){if(!e||!e.accessKeyId||!e.accessKeySecret)throw Error(\"require accessKeyId, accessKeySecret\");e.stsToken&&!e.refreshSTSToken&&!e.refreshSTSTokenInterval&&console.warn(\"It's recommended to set 'refreshSTSToken' and 'refreshSTSTokenInterval' to refresh stsToken、accessKeyId、accessKeySecret automatically when sts token has expired\"),e.bucket&&o(e.bucket);var r=Object.assign({region:\"oss-cn-hangzhou\",internal:!1,secure:!1,timeout:6e4,bucket:null,endpoint:null,cname:!1,isRequestPay:!1,sldEnable:!1,headerEncoding:\"utf-8\",refreshSTSToken:null,refreshSTSTokenInterval:3e5,retryMax:0,authorizationV4:!1},e);if(r.accessKeyId=r.accessKeyId.trim(),r.accessKeySecret=r.accessKeySecret.trim(),r.timeout&&(r.timeout=a(r.timeout)),r.endpoint)r.endpoint=function(e,r){s(e,\"endpoint\");var t=n.parse(e);if(!t.protocol&&(t=n.parse(\"http\".concat(r?\"s\":\"\",\"://\").concat(e))),\"http:\"!==t.protocol&&\"https:\"!==t.protocol)throw Error(\"Endpoint protocol must be http or https.\");return t}(r.endpoint,r.secure);else if(r.region)r.endpoint=i(r.region,r.internal,r.secure);else throw Error(\"require options.endpoint or options.region\");return r.inited=!0,r}},{\"../utils/checkBucketName\":52,\"../utils/checkConfigValid\":53,\"../utils/setRegion\":78,\"core-js/modules/es.array.concat.js\":310,\"core-js/modules/es.object.assign.js\":325,\"core-js/modules/es.string.trim.js\":351,\"humanize-ms\":401,url:545}],27:[function(e,r,t){\"use strict\";var a=e(\"merge-descriptors\");a(t,e(\"./processObjectSave\"))},{\"./processObjectSave\":28,\"merge-descriptors\":430}],28:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.array.concat.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"../utils/checkBucketName\").checkBucketName,l=e(\"querystring\"),d=e(\"js-base64\").Base64.encode;function c(e,r){if(!e)throw Error(\"\".concat(r,\" is required\"));if(\"string\"!=typeof e)throw Error(\"\".concat(r,\" must be String\"))}t.processObjectSave=(a=(0,i.default)(o.default.mark(function e(r,t,a,n){var i,u,f,g;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(r,\"sourceObject\"),c(t,\"targetObject\"),c(a,\"process\"),t=this._objectName(t),n&&s(n),i=this._objectRequestParams(\"POST\",r,{subres:\"x-oss-process\"}),u=n?\",b_\".concat(d(n)):\"\",t=d(t),f={\"x-oss-process\":\"\".concat(a,\"|sys/saveas,o_\").concat(t).concat(u)},i.content=l.stringify(f),e.next=12,this.request(i);case 12:return g=e.sent,e.abrupt(\"return\",{res:g.res,status:g.res.status});case 14:case\"end\":return e.stop()}},e,this)})),function(e,r,t,n){return a.apply(this,arguments)})},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.concat.js\":310,\"js-base64\":415,querystring:453}],29:[function(e,r,t){\"use strict\";var a,n,o,i,s=e(\"@babel/runtime/helpers/interopRequireDefault\"),l=s(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.array.concat.js\"),e(\"core-js/modules/es.function.name.js\"),e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/es.promise.js\"),e(\"core-js/modules/es.array.from.js\"),e(\"core-js/modules/es.string.iterator.js\"),e(\"core-js/modules/es.array.map.js\"),e(\"core-js/modules/es.array.filter.js\"),e(\"core-js/modules/es.array.find.js\"),e(\"core-js/modules/es.regexp.to-string.js\");var d=s(e(\"@babel/runtime/helpers/asyncToGenerator\")),c=e(\"debug\")(\"ali-oss:multipart-copy\"),u=e(\"copy-to\");t.uploadPartCopy=(a=(0,d.default)(l.default.mark(function e(r,t,a,n,o){var i,s,d,c,u,f=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=f.length>5&&void 0!==f[5]?f[5]:{}).headers=i.headers||{},d=(s=i.versionId||i.subres&&i.subres.versionId||null)?\"/\".concat(o.sourceBucketName,\"/\").concat(encodeURIComponent(o.sourceKey),\"?versionId=\").concat(s):\"/\".concat(o.sourceBucketName,\"/\").concat(encodeURIComponent(o.sourceKey)),i.headers[\"x-oss-copy-source\"]=d,n&&(i.headers[\"x-oss-copy-source-range\"]=\"bytes=\".concat(n)),i.subres={partNumber:a,uploadId:t},(c=this._objectRequestParams(\"PUT\",r,i)).mime=i.mime,c.successStatuses=[200],e.next=12,this.request(c);case 12:return u=e.sent,e.abrupt(\"return\",{name:r,etag:u.res.headers.etag,res:u.res});case 14:case\"end\":return e.stop()}},e,this)})),function(e,r,t,n,o){return a.apply(this,arguments)}),t.multipartUploadCopy=(n=(0,d.default)(l.default.mark(function e(r,t){var a,n,o,i,s,d,c,u,f,g,A=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.length>2&&void 0!==A[2]?A[2]:{},this.resetCancelFlag(),o={versionId:void 0===(n=a.versionId)?null:n},e.next=6,this._getObjectMeta(t.sourceBucketName,t.sourceKey,o);case 6:if(i=e.sent.res.headers[\"content-length\"],t.startOffset=t.startOffset||0,t.endOffset=t.endOffset||i,!(a.checkpoint&&a.checkpoint.uploadId)){e.next=14;break}return e.next=13,this._resumeMultipartCopy(a.checkpoint,t,a);case 13:case 31:return e.abrupt(\"return\",e.sent);case 14:if(s=102400,!((d=t.endOffset-t.startOffset)<s)){e.next=18;break}throw Error(\"copySize must not be smaller than \".concat(s));case 18:if(!(a.partSize&&a.partSize<s)){e.next=20;break}throw Error(\"partSize must not be smaller than \".concat(s));case 20:return e.next=22,this.initMultipartUpload(r,a);case 22:if(u=(c=e.sent).uploadId,f=this._getPartSize(d,a.partSize),g={name:r,copySize:d,partSize:f,uploadId:u,doneParts:[]},!(a&&a.progress)){e.next=29;break}return e.next=29,a.progress(0,g,c.res);case 29:return e.next=31,this._resumeMultipartCopy(g,t,a);case 32:case\"end\":return e.stop()}},e,this)})),function(e,r){return n.apply(this,arguments)}),t._resumeMultipartCopy=(o=(0,d.default)(l.default.mark(function e(r,t,a){var n,o,i,s,f,g,A,p,h,v,m,w,b,B,P,z,k,D,C,E;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCancel()){e.next=2;break}throw this._makeCancelEvent();case 2:i={versionId:o=void 0===(n=a.versionId)?null:n},s=r.copySize,f=r.partSize,g=r.uploadId,A=r.doneParts,p=r.name,v=(h=this._divideMultipartCopyParts(s,f,t.startOffset)).length,m={headers:{}},a.copyheaders&&u(a.copyheaders).to(m.headers),o&&u(i).to(m),w=function(e,t,n){return new Promise(function(){var o=(0,d.default)(l.default.mark(function o(i,s){var d,u,f;return l.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,e.isCancel()){o.next=22;break}return d=h[t-1],u=\"\".concat(d.start,\"-\").concat(d.end-1),o.prev=4,o.next=7,e.uploadPartCopy(p,g,t,u,n,m);case 7:f=o.sent,o.next=15;break;case 10:if(o.prev=10,o.t0=o.catch(4),404!==o.t0.status){o.next=14;break}throw e._makeAbortEvent();case 14:throw o.t0;case 15:if(e.isCancel()){o.next=22;break}if(c(\"content-range \".concat(f.res.headers[\"content-range\"])),A.push({number:t,etag:f.res.headers.etag}),r.doneParts=A,!(a&&a.progress)){o.next=22;break}return o.next=22,a.progress(A.length/v,r,f.res);case 22:i(),o.next=29;break;case 25:o.prev=25,o.t1=o.catch(0),o.t1.partNum=t,s(o.t1);case 29:case\"end\":return o.stop()}},o,null,[[0,25],[4,10]])}));return function(e,r){return o.apply(this,arguments)}}())},b=Array.from(Array(v),function(e,r){return r+1}),B=A.map(function(e){return e.number}),P=b.filter(function(e){return 0>B.indexOf(e)});if(z=a.parallel||5,!(this.checkBrowserAndVersion(\"Internet Explorer\",\"10\")||1===z)){e.next=28;break}k=0;case 18:if(!(k<P.length)){e.next=26;break}if(!this.isCancel()){e.next=21;break}throw this._makeCancelEvent();case 21:return e.next=23,w(this,P[k],t);case 23:k++,e.next=18;break;case 26:e.next=40;break;case 28:return e.next=30,this._parallelNode(P,z,w,t);case 30:if(!(C=(D=e.sent).find(function(e){return\"abort\"===e.name}))){e.next=34;break}throw C;case 34:if(!this.isCancel()){e.next=36;break}throw this._makeCancelEvent();case 36:if(!(D&&D.length>0)){e.next=40;break}throw(E=D[0]).message=\"Failed to copy some parts with error: \".concat(E.toString(),\" part_num: \").concat(E.partNum),E;case 40:return e.next=42,this.completeMultipartUpload(p,g,A,a);case 42:return e.abrupt(\"return\",e.sent);case 43:case\"end\":return e.stop()}},e,this)})),function(e,r,t){return o.apply(this,arguments)}),t._divideMultipartCopyParts=function(e,r,t){for(var a=Math.ceil(e/r),n=[],o=0;o<a;o++){var i=r*o+t,s=Math.min(i+r,e+t);n.push({start:i,end:s})}return n},t._getObjectMeta=(i=(0,d.default)(l.default.mark(function e(r,t,a){var n,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getBucket(),this.setBucket(r),e.next=4,this.head(t,a);case 4:return o=e.sent,this.setBucket(n),e.abrupt(\"return\",o);case 7:case\"end\":return e.stop()}},e,this)})),function(e,r,t){return i.apply(this,arguments)})},{\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"copy-to\":107,\"core-js/modules/es.array.concat.js\":310,\"core-js/modules/es.array.filter.js\":312,\"core-js/modules/es.array.find.js\":313,\"core-js/modules/es.array.from.js\":314,\"core-js/modules/es.array.map.js\":318,\"core-js/modules/es.function.name.js\":322,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.promise.js\":335,\"core-js/modules/es.regexp.to-string.js\":341,\"core-js/modules/es.string.iterator.js\":345,debug:538}],30:[function(e,r,t){(function(r){(function(){\"use strict\";var a,n,o,i,s,l,d,c=e(\"@babel/runtime/helpers/interopRequireDefault\"),u=c(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.array.map.js\"),e(\"core-js/modules/es.array.filter.js\"),e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/es.array.sort.js\"),e(\"core-js/modules/es.array.concat.js\"),e(\"core-js/modules/es.object.keys.js\"),e(\"core-js/modules/es.regexp.to-string.js\");var f=c(e(\"@babel/runtime/helpers/asyncToGenerator\")),g=e(\"copy-to\"),A=e(\"./callback\"),p=e(\"./utils/deepCopy\").deepCopyWith,h=e(\"./utils/isBuffer\").isBuffer,v=e(\"./utils/omit\").omit;t.listUploads=(a=(0,f.default)(u.default.mark(function e(r,t){var a,n,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},g(t=t||{}).to(a),a.subres=\"uploads\",(n=this._objectRequestParams(\"GET\",\"\",a)).query=r,n.xmlResponse=!0,n.successStatuses=[200],e.next=10,this.request(n);case 10:return!Array.isArray(i=(o=e.sent).data.Upload||[])&&(i=[i]),i=i.map(function(e){return{name:e.Key,uploadId:e.UploadId,initiated:e.Initiated}}),e.abrupt(\"return\",{res:o.res,uploads:i,bucket:o.data.Bucket,nextKeyMarker:o.data.NextKeyMarker,nextUploadIdMarker:o.data.NextUploadIdMarker,isTruncated:\"true\"===o.data.IsTruncated});case 15:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)}),t.listParts=(n=(0,f.default)(u.default.mark(function e(r,t,a,n){var o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},g(n=n||{}).to(o),o.subres={uploadId:t},(i=this._objectRequestParams(\"GET\",r,o)).query=a,i.xmlResponse=!0,i.successStatuses=[200],e.next=10,this.request(i);case 10:return s=e.sent,e.abrupt(\"return\",{res:s.res,uploadId:s.data.UploadId,bucket:s.data.Bucket,name:s.data.Key,partNumberMarker:s.data.PartNumberMarker,nextPartNumberMarker:s.data.NextPartNumberMarker,maxParts:s.data.MaxParts,isTruncated:s.data.IsTruncated,parts:s.data.Part||[]});case 12:case\"end\":return e.stop()}},e,this)})),function(e,r,t,a){return n.apply(this,arguments)}),t.abortMultipartUpload=(o=(0,f.default)(u.default.mark(function e(r,t,a){var n,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._stop(),n={},g(a=a||{}).to(n),n.subres={uploadId:t},(o=this._objectRequestParams(\"DELETE\",r,n)).successStatuses=[204],e.next=9,this.request(o);case 9:return i=e.sent,e.abrupt(\"return\",{res:i.res});case 11:case\"end\":return e.stop()}},e,this)})),function(e,r,t){return o.apply(this,arguments)}),t.initMultipartUpload=(i=(0,f.default)(u.default.mark(function e(r,t){var a,n,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},g(t=t||{}).to(a),a.headers=a.headers||{},this._convertMetaToHeaders(t.meta,a.headers),a.subres=\"uploads\",(n=this._objectRequestParams(\"POST\",r,a)).mime=t.mime,n.xmlResponse=!0,n.successStatuses=[200],e.next=12,this.request(n);case 12:return o=e.sent,e.abrupt(\"return\",{res:o.res,bucket:o.data.Bucket,name:o.data.Key,uploadId:o.data.UploadId});case 14:case\"end\":return e.stop()}},e,this)})),function(e,r){return i.apply(this,arguments)}),t.uploadPart=(s=(0,f.default)(u.default.mark(function e(t,a,n,o,i,s,l){var d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d={size:s-i},!(r&&r.browser)){e.next=8;break}return e.next=5,this._createBuffer(o,i,s);case 5:d.content=e.sent,e.next=11;break;case 8:return e.next=10,this._createStream(o,i,s);case 10:d.stream=e.sent;case 11:return e.next=13,this._uploadPart(t,a,n,d,l);case 13:return e.abrupt(\"return\",e.sent);case 14:case\"end\":return e.stop()}},e,this)})),function(e,r,t,a,n,o,i){return s.apply(this,arguments)}),t.completeMultipartUpload=(l=(0,f.default)(u.default.mark(function e(r,t,a,n){var o,i,s,l,d,c,f,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(s=0,o=a.concat().sort(function(e,r){return e.number-r.number}).filter(function(e,r,t){return!r||e.number!==t[r-1].number}),i='<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<CompleteMultipartUpload>\\n';s<o.length;s++)l=o[s],i+=\"<Part>\\n\"+\"<PartNumber>\".concat(l.number,\"</PartNumber>\\n\")+\"<ETag>\".concat(l.etag,\"</ETag>\\n\")+\"</Part>\\n\";return i+=\"</CompleteMultipartUpload>\",d={},(d=p(n=n||{},function(e){if(h(e))return null})).subres={uploadId:t},d.headers=v(d.headers,[\"x-oss-server-side-encryption\",\"x-oss-storage-class\"]),c=this._objectRequestParams(\"POST\",r,d),A.encodeCallback(c,d),c.mime=\"xml\",c.content=i,!(c.headers&&c.headers[\"x-oss-callback\"])&&(c.xmlResponse=!0),c.successStatuses=[200],e.next=17,this.request(c);case 17:if(f=e.sent,!n.progress){e.next=21;break}return e.next=21,n.progress(1,null,f.res);case 21:return g={res:f.res,bucket:c.bucket,name:r,etag:f.res.headers.etag},c.headers&&c.headers[\"x-oss-callback\"]&&(g.data=JSON.parse(f.data.toString())),e.abrupt(\"return\",g);case 24:case\"end\":return e.stop()}},e,this)})),function(e,r,t,a){return l.apply(this,arguments)}),t._uploadPart=(d=(0,f.default)(u.default.mark(function e(t,a,n,o,i){var s,l,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={},g(i=i||{}).to(s),s.headers=s.headers||{},s.headers[\"Content-Length\"]=o.size,s.headers=v(s.headers,[\"x-oss-server-side-encryption\"]),s.subres={partNumber:n,uploadId:a},(l=this._objectRequestParams(\"PUT\",t,s)).mime=s.mime,r&&r.browser?l.content=o.content:l.stream=o.stream,l.successStatuses=[200],l.disabledMD5=i.disabledMD5,e.next=15,this.request(l);case 15:if((d=e.sent).res.headers.etag){e.next=18;break}throw Error(\"Please set the etag of expose-headers in OSS \\n https://help.aliyun.com/document_detail/32069.html\");case 18:return o.stream&&(o.stream=null,l.stream=null),e.abrupt(\"return\",{name:t,etag:d.res.headers.etag,res:d.res});case 20:case\"end\":return e.stop()}},e,this)})),function(e,r,t,a,n){return d.apply(this,arguments)})}).call(this)}).call(this,e(\"_process\"))},{\"./callback\":24,\"./utils/deepCopy\":59,\"./utils/isBuffer\":68,\"./utils/omit\":76,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,_process:540,\"copy-to\":107,\"core-js/modules/es.array.concat.js\":310,\"core-js/modules/es.array.filter.js\":312,\"core-js/modules/es.array.map.js\":318,\"core-js/modules/es.array.sort.js\":320,\"core-js/modules/es.object.keys.js\":330,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.regexp.to-string.js\":341}],31:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.regexp.exec.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"url\"),l=e(\"utility\"),d=e(\"copy-to\"),c=e(\"../../common/signUtils\"),u=e(\"../utils/isIP\").isIP,f=e(\"../utils/setSTSToken\").setSTSToken,g=e(\"../utils/isFunction\").isFunction;t.asyncSignatureUrl=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n,i,A,p,h,v=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(v.length>2)||void 0===v[2]||v[2],!u(this.options.endpoint.hostname)){e.next=3;break}throw Error(\"can not get the object URL when endpoint is IP\");case 3:if(!(a&&/^\\?/.test(r))){e.next=5;break}throw Error(\"Invalid object name \".concat(r));case 5:if(t=t||{},r=this._objectName(r),t.method=t.method||\"GET\",n=l.timestamp()+(t.expires||1800),i={bucket:this.options.bucket,object:r},A=this._getResource(i),!(this.options.stsToken&&g(this.options.refreshSTSToken))){e.next=14;break}return e.next=14,f.call(this);case 14:return this.options.stsToken&&(t[\"security-token\"]=this.options.stsToken),p=c._signatureForURL(this.options.accessKeySecret,t,A,n),(h=s.parse(this._getReqUrl(i))).query={OSSAccessKeyId:this.options.accessKeyId,Expires:n,Signature:p.Signature},d(p.subResource).to(h.query),e.abrupt(\"return\",h.format());case 20:case\"end\":return e.stop()}},e,this)})),function(e,r){return a.apply(this,arguments)})},{\"../../common/signUtils\":51,\"../utils/isFunction\":71,\"../utils/isIP\":72,\"../utils/setSTSToken\":79,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"copy-to\":107,\"core-js/modules/es.regexp.exec.js\":340,url:545,utility:547}],32:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/web.dom-collections.for-each.js\"),e(\"core-js/modules/es.object.keys.js\"),e(\"core-js/modules/es.array.find.js\"),e(\"core-js/modules/es.array.includes.js\"),e(\"core-js/modules/es.array.concat.js\"),e(\"core-js/modules/es.regexp.exec.js\"),e(\"core-js/modules/es.string.replace.js\");var i=n(e(\"@babel/runtime/helpers/typeof\")),s=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),l=e(\"../utils/checkBucketName\").checkBucketName,d=[\"content-type\",\"content-encoding\",\"content-language\",\"content-disposition\",\"cache-control\",\"expires\"];t.copy=(a=(0,s.default)(o.default.mark(function e(r,t,a,n){var s,l,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return\"object\"===(0,i.default)(a)&&(n=a),(n=n||{}).headers=n.headers||{},Object.keys(n.headers).forEach(function(e){n.headers[\"x-oss-copy-source-\".concat(e.toLowerCase())]=n.headers[e]}),(n.meta||Object.keys(n.headers).find(function(e){return d.includes(e.toLowerCase())}))&&(n.headers[\"x-oss-metadata-directive\"]=\"REPLACE\"),this._convertMetaToHeaders(n.meta,n.headers),t=this._getSourceName(t,a),n.versionId&&(t=\"\".concat(t,\"?versionId=\").concat(n.versionId)),n.headers[\"x-oss-copy-source\"]=t,(s=this._objectRequestParams(\"PUT\",r,n)).xmlResponse=!0,s.successStatuses=[200,304],e.next=14,this.request(s);case 14:return(c=(l=e.sent).data)&&(c={etag:c.ETag,lastModified:c.LastModified}),e.abrupt(\"return\",{data:c,res:l.res});case 18:case\"end\":return e.stop()}},e,this)})),function(e,r,t,n){return a.apply(this,arguments)}),t._getSourceName=function(e,r){return\"string\"==typeof r?e=this._objectName(e):\"/\"!==e[0]?r=this.options.bucket:(r=e.replace(/\\/(.+?)(\\/.*)/,\"$1\"),e=e.replace(/(\\/.+?\\/)(.*)/,\"$2\")),l(r),e=encodeURIComponent(e),e=\"/\".concat(r,\"/\").concat(e)}},{\"../utils/checkBucketName\":52,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/helpers/typeof\":91,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.concat.js\":310,\"core-js/modules/es.array.find.js\":313,\"core-js/modules/es.array.includes.js\":315,\"core-js/modules/es.object.keys.js\":330,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.regexp.exec.js\":340,\"core-js/modules/es.string.replace.js\":347,\"core-js/modules/web.dom-collections.for-each.js\":382}],33:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\"));t.delete=(a=(0,i.default)(o.default.mark(function e(r){var t,a,n,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i.length>1&&void 0!==i[1]?i[1]:{}).subres=Object.assign({},t.subres),t.versionId&&(t.subres.versionId=t.versionId),(a=this._objectRequestParams(\"DELETE\",r,t)).successStatuses=[204],e.next=7,this.request(a);case 7:return n=e.sent,e.abrupt(\"return\",{res:n.res});case 9:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],34:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"utility\"),l=e(\"../utils/obj2xml\").obj2xml;t.deleteMulti=(a=(0,i.default)(o.default.mark(function e(r){var t,a,n,i,d,c,u,f,g,A,p,h,v=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>1&&void 0!==v[1]?v[1]:{},a=[],!(!r||!r.length)){e.next=4;break}throw Error(\"names is required\");case 4:for(n=0;n<r.length;n++)i={},\"string\"==typeof r[n]?i.Key=s.escape(this._objectName(r[n])):(c=(d=r[n]).key,u=d.versionId,i.Key=s.escape(this._objectName(c)),i.VersionId=u),a.push(i);return f=l({Delete:{Quiet:!!t.quiet,Object:a}},{headers:!0}),t.subres=Object.assign({delete:\"\"},t.subres),t.versionId&&(t.subres.versionId=t.versionId),(g=this._objectRequestParams(\"POST\",\"\",t)).mime=\"xml\",g.content=f,g.xmlResponse=!0,g.successStatuses=[200],e.next=16,this.request(g);case 16:return(h=(p=(A=e.sent).data)&&p.Deleted||null)&&!Array.isArray(h)&&(h=[h]),e.abrupt(\"return\",{res:A.res,deleted:h||[]});case 21:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{\"../utils/obj2xml\":75,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325,utility:547}],35:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\"));t.deleteObjectTagging=(a=(0,i.default)(o.default.mark(function e(r){var t,a,n,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i.length>1&&void 0!==i[1]?i[1]:{}).subres=Object.assign({tagging:\"\"},t.subres),t.versionId&&(t.subres.versionId=t.versionId),r=this._objectName(r),(a=this._objectRequestParams(\"DELETE\",r,t)).successStatuses=[204],e.next=8,this.request(a);case 8:return n=e.sent,e.abrupt(\"return\",{status:n.status,res:n.res});case 10:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],36:[function(e,r,t){\"use strict\";e(\"core-js/modules/es.array.concat.js\");var a=e(\"url\"),n=e(\"../utils/isIP\").isIP;t.generateObjectUrl=function(e,r){if(n(this.options.endpoint.hostname))throw Error(\"can not get the object URL when endpoint is IP\");if(r)\"/\"!==r[r.length-1]&&(r+=\"/\");else{r=this.options.endpoint.format();var t=a.parse(r),o=this.options.bucket;t.hostname=\"\".concat(o,\".\").concat(t.hostname),t.host=\"\".concat(o,\".\").concat(t.host),r=t.format()}return r+this._escape(this._objectName(e))}},{\"../utils/isIP\":72,\"core-js/modules/es.array.concat.js\":310,url:545}],37:[function(e,r,t){(function(r){(function(){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\")),s=e(\"fs\"),l=e(\"is-type-of\");t.get=(a=(0,i.default)(o.default.mark(function e(t,a){var n,i,d,c,u,f,g,A,p=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>2&&void 0!==p[2]?p[2]:{},i=null,d=!1,l.writableStream(a)?i=a:l.string(a)?(i=s.createWriteStream(a),d=!0):n=a,n=n||{},c=r&&r.browser,u=null===n.responseCacheControl?\"\":\"no-cache\",f=c&&u?{\"response-cache-control\":u}:{},n.subres=Object.assign(f,n.subres),n.versionId&&(n.subres.versionId=n.versionId),n.process&&(n.subres[\"x-oss-process\"]=n.process),e.prev=11,(A=this._objectRequestParams(\"GET\",t,n)).writeStream=i,A.successStatuses=[200,206,304],e.next=17,this.request(A);case 17:g=e.sent,d&&i.destroy(),e.next=28;break;case 21:if(e.prev=21,e.t0=e.catch(11),!d){e.next=27;break}return i.destroy(),e.next=27,this._deleteFileSafe(a);case 27:throw e.t0;case 28:return e.abrupt(\"return\",{res:g.res,content:g.data});case 29:case\"end\":return e.stop()}},e,this,[[11,21]])})),function(e,r){return a.apply(this,arguments)})}).call(this)}).call(this,e(\"_process\"))},{\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,_process:540,\"core-js/modules/es.object.assign.js\":325,fs:102,\"is-type-of\":539}],38:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\"));t.getACL=(a=(0,i.default)(o.default.mark(function e(r){var t,a,n,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i.length>1&&void 0!==i[1]?i[1]:{}).subres=Object.assign({acl:\"\"},t.subres),t.versionId&&(t.subres.versionId=t.versionId),r=this._objectName(r),(a=this._objectRequestParams(\"GET\",r,t)).successStatuses=[200],a.xmlResponse=!0,e.next=9,this.request(a);case 9:return n=e.sent,e.abrupt(\"return\",{acl:n.data.AccessControlList.Grant,owner:{id:n.data.Owner.ID,displayName:n.data.Owner.DisplayName},res:n.res});case 11:case\"end\":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.object.assign.js\":325}],39:[function(e,r,t){\"use strict\";var a=e(\"@babel/runtime/helpers/interopRequireDefault\"),n=a(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.regexp.exec.js\"),e(\"core-js/modules/es.string.replace.js\"),e(\"core-js/modules/es.object.to-string.js\"),e(\"core-js/modules/web.dom-collections.for-each.js\"),e(\"core-js/modules/es.object.keys.js\"),e(\"core-js/modules/es.object.assign.js\"),e(\"core-js/modules/es.array.map.js\"),e(\"core-js/modules/es.number.constructor.js\");var o=a(e(\"@babel/runtime/helpers/asyncToGenerator\")),i=e(\"../utils/isObject\").isObject,s=e(\"../utils/isArray\").isArray;function l(){return d.apply(this,arguments)}function d(){return(d=(0,o.default)(n.default.mark(function e(){var r,t,a,o,l,d,c,u,f=arguments;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>0&&void 0!==f[0]?f[0]:{},t=f.length>1&&void 0!==f[1]?f[1]:{},!(r.versionIdMarker&&void 0===r.keyMarker)){e.next=4;break}throw Error(\"A version-id marker cannot be specified without a key marker\");case 4:return t.subres=Object.assign({versions:\"\"},t.subres),t.versionId&&(t.subres.versionId=t.versionId),(a=this._objectRequestParams(\"GET\",\"\",t)).xmlResponse=!0,a.successStatuses=[200],a.query=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return i(e)&&Object.keys(e).forEach(function(t){r[t.replace(/([A-Z])/g,\"-$1\").toLowerCase()]=e[t]}),r}(r),e.next=12,this.request(a);case 12:return l=(o=e.sent).data.Version||[],d=o.data.DeleteMarker||[],c=this,l&&(!Array.isArray(l)&&(l=[l]),l=l.map(function(e){return{name:e.Key,url:c._objectUrl(e.Key),lastModified:e.LastModified,isLatest:\"true\"===e.IsLatest,versionId:e.VersionId,etag:e.ETag,type:e.Type,size:Number(e.Size),storageClass:e.StorageClass,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}})),d&&(!s(d)&&(d=[d]),d=d.map(function(e){return{name:e.Key,lastModified:e.LastModified,versionId:e.VersionId,owner:{id:e.Owner.ID,displayName:e.Owner.DisplayName}}})),(u=o.data.CommonPrefixes||null)&&(!s(u)&&(u=[u]),u=u.map(function(e){return e.Prefix})),e.abrupt(\"return\",{res:o.res,objects:l,deleteMarker:d,prefixes:u,nextMarker:o.data.NextKeyMarker||null,NextVersionIdMarker:o.data.NextVersionIdMarker||null,nextKeyMarker:o.data.NextKeyMarker||null,nextVersionIdMarker:o.data.NextVersionIdMarker||null,isTruncated:\"true\"===o.data.IsTruncated});case 21:case\"end\":return e.stop()}},e,this)}))).apply(this,arguments)}t.getBucketVersions=l,t.listObjectVersions=l},{\"../utils/isArray\":66,\"../utils/isObject\":73,\"@babel/runtime/helpers/asyncToGenerator\":82,\"@babel/runtime/helpers/interopRequireDefault\":84,\"@babel/runtime/regenerator\":93,\"core-js/modules/es.array.map.js\":318,\"core-js/modules/es.number.constructor.js\":324,\"core-js/modules/es.object.assign.js\":325,\"core-js/modules/es.object.keys.js\":330,\"core-js/modules/es.object.to-string.js\":331,\"core-js/modules/es.regexp.exec.js\":340,\"core-js/modules/es.string.replace.js\":347,\"core-js/modules/web.dom-collections.for-each.js\":382}],40:[function(e,r,t){\"use strict\";var a,n=e(\"@babel/runtime/helpers/interopRequireDefault\"),o=n(e(\"@babel/runtime/regenerator\"));e(\"core-js/modules/es.object.assign.js\");var i=n(e(\"@babel/runtime/helpers/asyncToGenerator\"));t.getObjectMeta=(a=(0,i.default)(o.default.mark(function e(r,t){var a,n;return"
}