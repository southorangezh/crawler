{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 67,
    "total_chunks": 194,
    "chunk_size": 28116,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.686Z"
  },
  "content": "tile_diffuse = vec4(1.0); ${a}${r} ${e} void tile_color(vec4 tile_featureColor) { ${d}`,n&&(e+=c),e+=`} `,e}uo.prototype.getFragmentShaderCallback=function(e,t,n){if(this.featuresLength!==0)return function(i){return i=Uie(i,t,!0),Yt.maximumVertexTextureImageUnits>0?(i+=`uniform sampler2D tile_pickTexture; in vec2 tile_featureSt; in vec4 tile_featureColor; void main() { tile_color(tile_featureColor); `,n&&(i+=` out_FragColor.rgb *= out_FragColor.a; `),i+=\"}\"):(e&&(i+=`uniform bool tile_translucentCommand; `),i+=`uniform sampler2D tile_pickTexture; uniform sampler2D tile_batchTexture; in vec2 tile_featureSt; void main() { vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); if (featureProperties.a == 0.0) { discard; } `,e&&(i+=` bool isStyleTranslucent = (featureProperties.a != 1.0); if (czm_pass == czm_passTranslucent) { if (!isStyleTranslucent && !tile_translucentCommand) { discard; } } else { if (isStyleTranslucent) { discard; } } `),i+=` tile_color(featureProperties); `,n&&(i+=` out_FragColor.rgb *= out_FragColor.a; `),i+=`} `),i}};uo.prototype.getClassificationFragmentShaderCallback=function(){if(this.featuresLength!==0)return function(e){return e=Ue.replaceMain(e,\"tile_main\"),Yt.maximumVertexTextureImageUnits>0?e+=`uniform sampler2D tile_pickTexture; in vec2 tile_featureSt; in vec4 tile_featureColor; void main() { tile_main(); out_FragColor = tile_featureColor; out_FragColor.rgb *= out_FragColor.a; }`:e+=`uniform sampler2D tile_batchTexture; uniform sampler2D tile_pickTexture; in vec2 tile_featureSt; void main() { tile_main(); vec4 featureProperties = texture(tile_batchTexture, tile_featureSt); if (featureProperties.a == 0.0) { discard; } out_FragColor = featureProperties; out_FragColor.rgb *= out_FragColor.a; } `,e}};function Rve(e){let t=e._content.tileset,n=t.colorBlendMode,i=t.colorBlendAmount;if(n===Rl.HIGHLIGHT)return 0;if(n===Rl.REPLACE)return 1;if(n===Rl.MIX)return P.clamp(i,P.EPSILON4,1)}uo.prototype.getUniformMapCallback=function(){if(this.featuresLength===0)return;let e=this;return function(t){return Ct(t,{tile_batchTexture:function(){return g(e._batchTexture.batchTexture,e._batchTexture.defaultTexture)},tile_textureDimensions:function(){return e._batchTexture.textureDimensions},tile_textureStep:function(){return e._batchTexture.textureStep},tile_colorBlend:function(){return Rve(e)},tile_pickTexture:function(){return e._batchTexture.pickTexture}})}};uo.prototype.getPickId=function(){return\"texture(tile_pickTexture, tile_featureSt)\"};var Db={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};uo.prototype.addDerivedCommands=function(e,t){let n=e.commandList,i=n.length,o=this._content._tile,r=o._finalResolution,s=o.tileset,a=s.isSkippingLevelOfDetail&&s.hasMixedContent&&e.context.stencilBuffer,c=Gve(this);for(let d=t;d<i;++d){let u=n[d];if(u.pass===Ze.COMPUTE)continue;let m=u.derivedCommands.tileset;(!l(m)||u.dirty)&&(m={},u.derivedCommands.tileset=m,m.originalCommand=Eve(u),u.dirty=!1);let p=m.originalCommand;c!==Db.ALL_OPAQUE&&u.pass!==Ze.TRANSLUCENT&&(l(m.translucent)||(m.translucent=Xve(p))),c!==Db.ALL_TRANSLUCENT&&u.pass!==Ze.TRANSLUCENT&&(l(m.opaque)||(m.opaque=Ive(p)),a&&(r||(l(m.zback)||(m.zback=Pve(e.context,p)),s._backfaceCommands.push(m.zback)),(!l(m.stencil)||o._selectionDepth!==wve(m.stencil))&&(u.renderState.depthMask?m.stencil=vve(p,o._selectionDepth):m.stencil=m.opaque)));let b=a?m.stencil:m.opaque,f=m.translucent;u.pass!==Ze.TRANSLUCENT?(c===Db.ALL_OPAQUE&&(n[d]=b),c===Db.ALL_TRANSLUCENT&&(n[d]=f),c===Db.OPAQUE_AND_TRANSLUCENT&&(n[d]=b,n.push(f))):n[d]=p}};function Gve(e){let t=e._batchTexture.translucentFeaturesLength;return t===0?Db.ALL_OPAQUE:t===e.featuresLength?Db.ALL_TRANSLUCENT:Db.OPAQUE_AND_TRANSLUCENT}function Eve(e){let t=je.shallowClone(e),n=t.pass===Ze.TRANSLUCENT;return t.uniformMap=l(t.uniformMap)?t.uniformMap:{},t.uniformMap.tile_translucentCommand=function(){return n},t}function Xve(e){let t=je.shallowClone(e);return t.pass=Ze.TRANSLUCENT,t.renderState=Fve(e.renderState),t}function Ive(e){let t=je.shallowClone(e);return t.renderState=Ave(e.renderState),t}function Wve(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,\"zBackfaceLogDepth\");if(!l(n)){let i=t.fragmentShaderSource.clone();i.defines=l(i.defines)?i.defines.slice(0):[],i.defines.push(\"POLYGON_OFFSET\"),n=e.shaderCache.createDerivedShaderProgram(t,\"zBackfaceLogDepth\",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:i,attributeLocations:t._attributeLocations})}return n}function Pve(e,t){let n=je.shallowClone(t),i=Oe(n.renderState,!0);i.cull.enabled=!0,i.cull.face=mi.FRONT,i.colorMask={red:!1,green:!1,blue:!1,alpha:!1},i.polygonOffset={enabled:!0,factor:5,units:5},i.stencilTest=Mt.setCesium3DTileBit(),i.stencilMask=Mt.CESIUM_3D_TILE_MASK,n.renderState=Ne.fromCache(i),n.castShadows=!1,n.receiveShadows=!1,n.uniformMap=Oe(t.uniformMap);let o=new D(5,5);return n.uniformMap.u_polygonOffset=function(){return o},n.shaderProgram=Wve(e,t.shaderProgram),n}function vve(e,t){let n=je.shallowClone(e),i=Oe(n.renderState,!0);return i.stencilTest.enabled=!0,i.stencilTest.mask=Mt.SKIP_LOD_MASK,i.stencilTest.reference=Mt.CESIUM_3D_TILE_MASK|t<<Mt.SKIP_LOD_BIT_SHIFT,i.stencilTest.frontFunction=vn.GREATER_OR_EQUAL,i.stencilTest.frontOperation.zPass=dt.REPLACE,i.stencilTest.backFunction=vn.GREATER_OR_EQUAL,i.stencilTest.backOperation.zPass=dt.REPLACE,i.stencilMask=Mt.CESIUM_3D_TILE_MASK|Mt.SKIP_LOD_MASK,n.renderState=Ne.fromCache(i),n}function wve(e){return(e.renderState.stencilTest.reference&Mt.SKIP_LOD_MASK)>>>Mt.SKIP_LOD_BIT_SHIFT}function Fve(e){let t=Oe(e,!0);return t.cull.enabled=!1,t.depthTest.enabled=!0,t.depthMask=!1,t.blending=un.ALPHA_BLEND,t.stencilTest=Mt.setCesium3DTileBit(),t.stencilMask=Mt.CESIUM_3D_TILE_MASK,Ne.fromCache(t)}function Ave(e){let t=Oe(e,!0);return t.stencilTest=Mt.setCesium3DTileBit(),t.stencilMask=Mt.CESIUM_3D_TILE_MASK,Ne.fromCache(t)}uo.prototype.update=function(e,t){this._batchTexture.update(e,t)};uo.prototype.isDestroyed=function(){return!1};uo.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),me(this)};var wp=uo;var Din=T(S(),1);var Wnn=T(S(),1);function Mve(e){this.offset=e.offset,this.count=e.count,this.color=e.color,this.batchIds=e.batchIds}var nf=Mve;var Ein=T(S(),1);var vnn=T(S(),1),aC=`in vec3 position; in float a_batchId; uniform mat4 u_modifiedModelViewProjection; void main() { gl_Position = czm_depthClamp(u_modifiedModelViewProjection * vec4(position, 1.0)); } `;var Mnn=T(S(),1);function fu(e,t){this._content=e,this._batchId=t,this._color=void 0}Object.defineProperties(fu.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(e){this._content.batchTable.setShow(this._batchId,e)}},color:{get:function(){return l(this._color)||(this._color=new O),this._content.batchTable.getColor(this._batchId,this._color)},set:function(e){this._content.batchTable.setColor(this._batchId,e)}},polylinePositions:{get:function(){if(l(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}});fu.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)};fu.prototype.getPropertyIds=function(e){return this._content.batchTable.getPropertyIds(this._batchId,e)};fu.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)};fu.getPropertyInherited=function(e,t,n){let i=e.batchTable;if(l(i)){if(i.hasPropertyBySemantic(t,n))return i.getPropertyBySemantic(t,n);if(i.hasProperty(t,n))return i.getProperty(t,n)}let o=e.metadata;if(l(o)){if(o.hasPropertyBySemantic(n))return o.getPropertyBySemantic(n);if(o.hasProperty(n))return o.getProperty(n)}let r=e.tile,s=r.metadata;if(l(s)){if(s.hasPropertyBySemantic(n))return s.getPropertyBySemantic(n);if(s.hasProperty(n))return s.getProperty(n)}let a;if(l(r.implicitSubtree)&&(a=r.implicitSubtree.metadata),l(a)){if(a.hasPropertyBySemantic(n))return a.getPropertyBySemantic(n);if(a.hasProperty(n))return a.getProperty(n)}let c=l(e.group)?e.group.metadata:void 0;if(l(c)){if(c.hasPropertyBySemantic(n))return c.getPropertyBySemantic(n);if(c.hasProperty(n))return c.getProperty(n)}let d=e.tileset.metadata;if(l(d)){if(d.hasPropertyBySemantic(n))return d.getPropertyBySemantic(n);if(d.hasProperty(n))return d.getProperty(n)}};fu.prototype.getPropertyInherited=function(e){return fu.getPropertyInherited(this._content,this._batchId,e)};fu.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0};fu.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)};fu.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)};fu.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};var Fs=fu;var $nn=T(S(),1);var knn=T(S(),1),JO=class{add(t,n,i){if(typeof arguments[0]!=\"string\")for(let o in arguments[0])this.add(o,arguments[0][o],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(o){this[o]=this[o]||[],n&&this[o][i?\"unshift\":\"push\"](n)},this)}run(t,n){this[t]=this[t]||[],this[t].forEach(function(i){i.call(n&&n.context?n.context:n,n)})}},QO=class{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach(n=>{if(typeof n!=\"object\"||!n.name||!n.init)throw new Error(\"Invalid JSEP plugin format\");this.registered[n.name]||(n.init(this.jsep),this.registered[n.name]=n)})}},Gl=class e{static get version(){return\"1.3.8\"}static toString(){return\"JavaScript Expression Parser (JSEP) v\"+e.version}static addUnaryOp(t){return e.max_unop_len=Math.max(t.length,e.max_unop_len),e.unary_ops[t]=1,e}static addBinaryOp(t,n,i){return e.max_binop_len=Math.max(t.length,e.max_binop_len),e.binary_ops[t]=n,i?e.right_associative.add(t):e.right_associative.delete(t),e}static addIdentifierChar(t){return e.additional_identifier_chars.add(t),e}static addLiteral(t,n){return e.literals[t]=n,e}static removeUnaryOp(t){return delete e.unary_ops[t],t.length===e.max_unop_len&&(e.max_unop_len=e.getMaxKeyLen(e.unary_ops)),e}static removeAllUnaryOps(){return e.unary_ops={},e.max_unop_len=0,e}static removeIdentifierChar(t){return e.additional_identifier_chars.delete(t),e}static removeBinaryOp(t){return delete e.binary_ops[t],t.length===e.max_binop_len&&(e.max_binop_len=e.getMaxKeyLen(e.binary_ops)),e.right_associative.delete(t),e}static removeAllBinaryOps(){return e.binary_ops={},e.max_binop_len=0,e}static removeLiteral(t){return delete e.literals[t],e}static removeAllLiterals(){return e.literals={},e}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new e(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(n=>n.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return e.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!e.binary_ops[String.fromCharCode(t)]||e.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return e.isIdentifierStart(t)||e.isDecimalDigit(t)}throwError(t){let n=new Error(t+\" at character \"+this.index);throw n.index=this.index,n.description=t,n}runHook(t,n){if(e.hooks[t]){let i={context:this,node:n};return e.hooks.run(t,i),i.node}return n}searchHook(t){if(e.hooks[t]){let n={context:this};return e.hooks[t].find(function(i){return i.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===e.SPACE_CODE||t===e.TAB_CODE||t===e.LF_CODE||t===e.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook(\"gobble-spaces\")}parse(){this.runHook(\"before-all\");let t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:e.COMPOUND,body:t};return this.runHook(\"after-all\",n)}gobbleExpressions(t){let n=[],i,o;for(;this.index<this.expr.length;)if(i=this.code,i===e.SEMCOL_CODE||i===e.COMMA_CODE)this.index++;else if(o=this.gobbleExpression())n.push(o);else if(this.index<this.expr.length){if(i===t)break;this.throwError('Unexpected \"'+this.char+'\"')}return n}gobbleExpression(){let t=this.searchHook(\"gobble-expression\")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook(\"after-expression\",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,e.max_binop_len),n=t.length;for(;n>0;){if(e.binary_ops.hasOwnProperty(t)&&(!e.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,i,o,r,s,a,c,d;if(s=this.gobbleToken(),!s||(n=this.gobbleBinaryOp(),!n))return s;for(r={value:n,prec:e.binaryPrecedence(n),right_a:e.right_associative.has(n)},a=this.gobbleToken(),a||this.throwError(\"Expected expression after \"+n),o=[s,r,a];n=this.gobbleBinaryOp();){if(i=e.binaryPrecedence(n),i===0){this.index-=n.length;break}r={value:n,prec:i,right_a:e.right_associative.has(n)},d=n;let u=m=>r.right_a&&m.right_a?i>m.prec:i<=m.prec;for(;o.length>2&&u(o[o.length-2]);)a=o.pop(),n=o.pop().value,s=o.pop(),t={type:e.BINARY_EXP,operator:n,left:s,right:a},o.push(t);t=this.gobbleToken(),t||this.throwError(\"Expected expression after \"+d),o.push(r,t)}for(c=o.length-1,t=o[c];c>1;)t={type:e.BINARY_EXP,operator:o[c-1].value,left:o[c-2],right:t},c-=2;return t}gobbleToken(){let t,n,i,o;if(this.gobbleSpaces(),o=this.searchHook(\"gobble-token\"),o)return this.runHook(\"after-token\",o);if(t=this.code,e.isDecimalDigit(t)||t===e.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===e.SQUOTE_CODE||t===e.DQUOTE_CODE)o=this.gobbleStringLiteral();else if(t===e.OBRACK_CODE)o=this.gobbleArray();else{for(n=this.expr.substr(this.index,e.max_unop_len),i=n.length;i>0;){if(e.unary_ops.hasOwnProperty(n)&&(!e.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!e.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=i;let r=this.gobbleToken();return r||this.throwError(\"missing unaryOp argument\"),this.runHook(\"after-token\",{type:e.UNARY_EXP,operator:n,argument:r,prefix:!0})}n=n.substr(0,--i)}e.isIdentifierStart(t)?(o=this.gobbleIdentifier(),e.literals.hasOwnProperty(o.name)?o={type:e.LITERAL,value:e.literals[o.name],raw:o.name}:o.name===e.this_str&&(o={type:e.THIS_EXP})):t===e.OPAREN_CODE&&(o=this.gobbleGroup())}return o?(o=this.gobbleTokenProperty(o),this.runHook(\"after-token\",o)):this.runHook(\"after-token\",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===e.PERIOD_CODE||n===e.OBRACK_CODE||n===e.OPAREN_CODE||n===e.QUMARK_CODE;){let i;if(n===e.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==e.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===e.OBRACK_CODE?(t={type:e.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},this.gobbleSpaces(),n=this.code,n!==e.CBRACK_CODE&&this.throwError(\"Unclosed [\"),this.index++):n===e.OPAREN_CODE?t={type:e.CALL_EXP,arguments:this.gobbleArguments(e.CPAREN_CODE),callee:t}:(n===e.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),t={type:e.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),i&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t=\"\",n,i;for(;e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===e.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n===\"e\"||n===\"E\"){for(t+=this.expr.charAt(this.index++),n=this.char,(n===\"+\"||n===\"-\")&&(t+=this.expr.charAt(this.index++));e.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);e.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError(\"Expected exponent (\"+t+this.char+\")\")}return i=this.code,e.isIdentifierStart(i)?this.throwError(\"Variable names cannot start with a number (\"+t+this.char+\")\"):(i===e.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===e.PERIOD_CODE)&&this.throwError(\"Unexpected period\"),{type:e.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t=\"\",n=this.index,i=this.expr.charAt(this.index++),o=!1;for(;this.index<this.expr.length;){let r=this.expr.charAt(this.index++);if(r===i){o=!0;break}else if(r===\"\\\\\")switch(r=this.expr.charAt(this.index++),r){case\"n\":t+=` `;break;case\"r\":t+=\"\\r\";break;case\"t\":t+=\" \";break;case\"b\":t+=\"\\b\";break;case\"f\":t+=\"\\f\";break;case\"v\":t+=\"\\v\";break;default:t+=r}else t+=r}return o||this.throwError('Unclosed quote after \"'+t+'\"'),{type:e.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(e.isIdentifierStart(t)?this.index++:this.throwError(\"Unexpected \"+this.char);this.index<this.expr.length&&(t=this.code,e.isIdentifierPart(t));)this.index++;return{type:e.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){let n=[],i=!1,o=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let r=this.code;if(r===t){i=!0,this.index++,t===e.CPAREN_CODE&&o&&o>=n.length&&this.throwError(\"Unexpected token \"+String.fromCharCode(t));break}else if(r===e.COMMA_CODE){if(this.index++,o++,o!==n.length){if(t===e.CPAREN_CODE)this.throwError(\"Unexpected token ,\");else if(t===e.CBRACK_CODE)for(let s=n.length;s<o;s++)n.push(null)}}else if(n.length!==o&&o!==0)this.throwError(\"Expected comma\");else{let s=this.gobbleExpression();(!s||s.type===e.COMPOUND)&&this.throwError(\"Expected comma\"),n.push(s)}}return i||this.throwError(\"Expected \"+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(e.CPAREN_CODE);if(this.code===e.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:e.SEQUENCE_EXP,expressions:t}:!1;this.throwError(\"Unclosed (\")}gobbleArray(){return this.index++,{type:e.ARRAY_EXP,elements:this.gobbleArguments(e.CBRACK_CODE)}}},Nve=new JO;Object.assign(Gl,{hooks:Nve,plugins:new QO(Gl),COMPOUND:\"Compound\",SEQUENCE_EXP:\"SequenceExpression\",IDENTIFIER:\"Identifier\",MEMBER_EXP:\"MemberExpression\",LITERAL:\"Literal\",THIS_EXP:\"ThisExpression\",CALL_EXP:\"CallExpression\",UNARY_EXP:\"UnaryExpression\",BINARY_EXP:\"BinaryExpression\",ARRAY_EXP:\"ArrayExpression\",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{\"-\":1,\"!\":1,\"~\":1,\"+\":1},binary_ops:{\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":10,\"/\":10,\"%\":10},right_associative:new Set,additional_identifier_chars:new Set([\"$\",\"_\"]),literals:{true:!0,false:!1,null:null},this_str:\"this\"});Gl.max_unop_len=Gl.getMaxKeyLen(Gl.unary_ops);Gl.max_binop_len=Gl.getMaxKeyLen(Gl.binary_ops);var Bb=e=>new Gl(e).parse(),kve=Object.getOwnPropertyNames(Gl);kve.forEach(e=>{Bb[e]===void 0&&e!==\"prototype\"&&(Bb[e]=Gl[e])});Bb.Jsep=Gl;var Uve=\"ConditionalExpression\",Dve={name:\"ternary\",init(e){e.hooks.add(\"after-expression\",function(n){if(n.node&&this.code===e.QUMARK_CODE){this.index++;let i=n.node,o=this.gobbleExpression();if(o||this.throwError(\"Expected expression\"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let r=this.gobbleExpression();if(r||this.throwError(\"Expected expression\"),n.node={type:Uve,test:i,consequent:o,alternate:r},i.operator&&e.binary_ops[i.operator]<=.9){let s=i;for(;s.right.operator&&e.binary_ops[s.right.operator]<=.9;)s=s.right;n.node.test=s.right,s.right=n.node,n.node=i}}else this.throwError(\"Expected :\")}})}};Bb.plugins.register(Dve);var Dnn=T(S(),1),Bve={VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18},xt=Object.freeze(Bve);function Pm(e,t){this._expression=e,e=nwe(e,t),e=owe(iwe(e)),Bb.addBinaryOp(\"=~\",0),Bb.addBinaryOp(\"!~\",0);let n;try{n=Bb(e)}catch(i){throw new ue(i)}this._runtimeAst=gi(this,n)}Object.defineProperties(Pm.prototype,{expression:{get:function(){return this._expression}}});var Pn={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new D],cartesian3Array:[new h],cartesian4Array:[new se],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);let e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new D),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new h),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new se),this.cartesian4Array[this.cartesian4Index++]}};Pm.prototype.evaluate=function(e,t){Pn.reset();let n=this._runtimeAst.evaluate(e);return t instanceof O&&n instanceof se?O.fromCartesian4(n,t):n instanceof D||n instanceof h||n instanceof se?n.clone(t):n};Pm.prototype.evaluateColor=function(e,t){Pn.reset();let n=this._runtimeAst.evaluate(e);return O.fromCartesian4(n,t)};Pm.prototype.getShaderFunction=function(e,t,n,i){let o=this.getShaderExpression(t,n);return o=`${i} ${e} { return ${o}; } `,o};Pm.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)};Pm.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter(function(t,n,i){return i.indexOf(t)===n}),e};var Yve=[\"!\",\"-\",\"+\"],Die=[\"+\",\"-\",\"*\",\"/\",\"%\",\"===\",\"!==\",\">\",\">=\",\"<\",\"<=\",\"&&\",\"||\",\"!~\",\"=~\"],A5=/\\${(.*?)}/g,Ove=/\\\\/g,zve=\"@#%\",Hve=/@#%/g,M5=new O,N5={abs:As(Math.abs),sqrt:As(Math.sqrt),cos:As(Math.cos),sin:As(Math.sin),tan:As(Math.tan),acos:As(Math.acos),asin:As(Math.asin),atan:As(Math.atan),radians:As(P.toRadians),degrees:As(P.toDegrees),sign:As(P.sign),floor:As(Math.floor),ceil:As(Math.ceil),round:As(Math.round),exp:As(Math.exp),exp2:As(Jve),log:As(Math.log),log2:As(Qve),fract:As(Kve),length:jve,normalize:qve},k5={atan2:w5(Math.atan2,!1),pow:w5(Math.pow,!1),min:w5(Math.min,!0),max:w5(Math.max,!0),distance:$ve,dot:ewe,cross:twe},$O={clamp:Bie(P.clamp,!0),mix:Bie(P.lerp,!0)};function Kve(e){return e-Math.floor(e)}function Jve(e){return Math.pow(2,e)}function Qve(e){return P.log2(e)}function As(e){return function(t,n){if(typeof n==\"number\")return e(n);if(n instanceof D)return D.fromElements(e(n.x),e(n.y),Pn.getCartesian2());if(n instanceof h)return h.fromElements(e(n.x),e(n.y),e(n.z),Pn.getCartesian3());if(n instanceof se)return se.fromElements(e(n.x),e(n.y),e(n.z),e(n.w),Pn.getCartesian4());throw new ue(`Function \"${t}\" requires a vector or number argument. Argument is ${n}.`)}}function w5(e,t){return function(n,i,o){if(t&&typeof o==\"number\"){if(typeof i==\"number\")return e(i,o);if(i instanceof D)return D.fromElements(e(i.x,o),e(i.y,o),Pn.getCartesian2());if(i instanceof h)return h.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),Pn.getCartesian3());if(i instanceof se)return se.fromElements(e(i.x,o),e(i.y,o),e(i.z,o),e(i.w,o),Pn.getCartesian4())}if(typeof i==\"number\"&&typeof o==\"number\")return e(i,o);if(i instanceof D&&o instanceof D)return D.fromElements(e(i.x,o.x),e(i.y,o.y),Pn.getCartesian2());if(i instanceof h&&o instanceof h)return h.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),Pn.getCartesian3());if(i instanceof se&&o instanceof se)return se.fromElements(e(i.x,o.x),e(i.y,o.y),e(i.z,o.z),e(i.w,o.w),Pn.getCartesian4());throw new ue(`Function \"${n}\" requires vector or number arguments of matching types. Arguments are ${i} and ${o}.`)}}function Bie(e,t){return function(n,i,o,r){if(t&&typeof r==\"number\"){if(typeof i==\"number\"&&typeof o==\"number\")return e(i,o,r);if(i instanceof D&&o instanceof D)return D.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),Pn.getCartesian2());if(i instanceof h&&o instanceof h)return h.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),Pn.getCartesian3());if(i instanceof se&&o instanceof se)return se.fromElements(e(i.x,o.x,r),e(i.y,o.y,r),e(i.z,o.z,r),e(i.w,o.w,r),Pn.getCartesian4())}if(typeof i==\"number\"&&typeof o==\"number\"&&typeof r==\"number\")return e(i,o,r);if(i instanceof D&&o instanceof D&&r instanceof D)return D.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),Pn.getCartesian2());if(i instanceof h&&o instanceof h&&r instanceof h)return h.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),Pn.getCartesian3());if(i instanceof se&&o instanceof se&&r instanceof se)return se.fromElements(e(i.x,o.x,r.x),e(i.y,o.y,r.y),e(i.z,o.z,r.z),e(i.w,o.w,r.w),Pn.getCartesian4());throw new ue(`Function \"${n}\" requires vector or number arguments of matching types. Arguments are ${i}, ${o}, and ${r}.`)}}function jve(e,t){if(typeof t==\"number\")return Math.abs(t);if(t instanceof D)return D.magnitude(t);if(t instanceof h)return h.magnitude(t);if(t instanceof se)return se.magnitude(t);throw new ue(`Function \"${e}\" requires a vector or number argument. Argument is ${t}.`)}function qve(e,t){if(typeof t==\"number\")return 1;if(t instanceof D)return D.normalize(t,Pn.getCartesian2());if(t instanceof h)return h.normalize(t,Pn.getCartesian3());if(t instanceof se)return se.normalize(t,Pn.getCartesian4());throw new ue(`Function \"${e}\" requires a vector or number argument. Argument is ${t}.`)}function $ve(e,t,n){if(typeof t==\"number\"&&typeof n==\"number\")return Math.abs(t-n);if(t instanceof D&&n instanceof D)return D.distance(t,n);if(t instanceof h&&n instanceof h)return h.distance(t,n);if(t instanceof se&&n instanceof se)return se.distance(t,n);throw new ue(`Function \"${e}\" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function ewe(e,t,n){if(typeof t==\"number\"&&typeof n==\"number\")return t*n;if(t instanceof D&&n instanceof D)return D.dot(t,n);if(t instanceof h&&n instanceof h)return h.dot(t,n);if(t instanceof se&&n instanceof se)return se.dot(t,n);throw new ue(`Function \"${e}\" requires vector or number arguments of matching types. Arguments are ${t} and ${n}.`)}function twe(e,t,n){if(t instanceof h&&n instanceof h)return h.cross(t,n,Pn.getCartesian3());throw new ue(`Function \"${e}\" requires vec3 arguments. Arguments are ${t} and ${n}.`)}function Tt(e,t,n,i,o){this._type=e,this._value=t,this._left=n,this._right=i,this._test=o,this.evaluate=void 0,fwe(this)}function nwe(e,t){if(!l(t))return e;for(let n in t)if(t.hasOwnProperty(n)){let i=new RegExp(`\\\\$\\\\{${n}\\\\}`,\"g\"),o=`(${t[n]})`;l(o)&&(e=e.replace(i,o))}return e}function iwe(e){return e.replace(Ove,zve)}function qO(e){return e.replace(Hve,\"\\\\\")}function owe(e){let t=e,n=\"\",i=t.indexOf(\"${\");for(;i>=0;){let o=t.indexOf(\"'\"),r=t.indexOf('\"'),s;if(o>=0&&o<i)s=t.indexOf(\"'\",o+1),n+=t.substr(0,s+1),t=t.substr(s+1),i=t.indexOf(\"${\");else if(r>=0&&r<i)s=t.indexOf('\"',r+1),n+=t.substr(0,s+1),t=t.substr(s+1),i=t.indexOf(\"${\");else{n+=t.substr(0,i);let a=t.indexOf(\"}\");if(a<0)throw new ue(\"Unmatched {.\");n+=`czm_${t.substr(i+2,a-(i+2))}`,t=t.substr(a+1),i=t.indexOf(\"${\")}}return n+=t,n}function rwe(e){let t=typeof e.value;if(e.value===null)return new Tt(xt.LITERAL_NULL,null);if(t===\"boolean\")return new Tt(xt.LITERAL_BOOLEAN,e.value);if(t===\"number\")return new Tt(xt.LITERAL_NUMBER,e.value);if(t===\"string\")return e.value.indexOf(\"${\")>=0?new Tt(xt.VARIABLE_IN_STRING,e.value):new Tt(xt.LITERAL_STRING,qO(e.value))}function swe(e,t){let n=t.arguments,i=n.length,o,r,s,a;if(t.callee.type===\"MemberExpression\"){o=t.callee.property.name;let c=t.callee.object;if(o===\"test\"||o===\"exec\"){if(!l(c.callee)||c.callee.name!==\"regExp\")throw new ue(`${o} is not a function.`);return i===0?o===\"test\"?new"
}