{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 50,
    "total_chunks": 194,
    "chunk_size": 40070,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.675Z"
  },
  "content": "o in e)e.hasOwnProperty(o)&&(i+=1);i>=2&&i<=4?t=`vec${i}`:i===6&&(t=\"samplerCube\")}}return t}function kEe(e){let t=e._strict,n=e._template.materials;for(let i in n)if(n.hasOwnProperty(i)){let o=new He({strict:t,fabric:n[i],count:e._count});e._count=o._count,e._uniforms=Ct(e._uniforms,o._uniforms,!0),e.materials[i]=o,e._translucentFunctions=e._translucentFunctions.concat(o._translucentFunctions);let r=\"czm_getMaterial\",s=`${r}_${e._count++}`;xE(o,r,s),e.shaderSource=o.shaderSource+e.shaderSource;let a=`${s}(materialInput)`,c=xE(e,i,a)}}function xE(e,t,n,i){i=g(i,!0);let o=0,r=\"([\\\\w])?\",s=`([\\\\w${i?\".\":\"\"}])?`,a=new RegExp(s+t+r,\"g\");return e.shaderSource=e.shaderSource.replace(a,function(c,d,u){return d||u?c:(o+=1,n)}),o}function UEe(e,t,n){return xE(e,t,t,n)}He._materialCache={_materials:{},addMaterial:function(e,t){this._materials[e]=t},getMaterial:function(e){return this._materials[e]}};He.DefaultImageId=\"czm_defaultImage\";He.DefaultCubeMapId=\"czm_defaultCubeMap\";He.ColorType=\"Color\";He._materialCache.addMaterial(He.ColorType,{fabric:{type:He.ColorType,uniforms:{color:new O(1,0,0,.5)},components:{diffuse:\"color.rgb\",alpha:\"color.a\"}},translucent:function(e){return e.uniforms.color.alpha<1}});He.ImageType=\"Image\";He._materialCache.addMaterial(He.ImageType,{fabric:{type:He.ImageType,uniforms:{image:He.DefaultImageId,repeat:new D(1,1),color:new O(1,1,1,1)},components:{diffuse:\"texture(image, fract(repeat * materialInput.st)).rgb * color.rgb\",alpha:\"texture(image, fract(repeat * materialInput.st)).a * color.a\"}},translucent:function(e){return e.uniforms.color.alpha<1}});He.DiffuseMapType=\"DiffuseMap\";He._materialCache.addMaterial(He.DiffuseMapType,{fabric:{type:He.DiffuseMapType,uniforms:{image:He.DefaultImageId,channels:\"rgb\",repeat:new D(1,1)},components:{diffuse:\"texture(image, fract(repeat * materialInput.st)).channels\"}},translucent:!1});He.AlphaMapType=\"AlphaMap\";He._materialCache.addMaterial(He.AlphaMapType,{fabric:{type:He.AlphaMapType,uniforms:{image:He.DefaultImageId,channel:\"a\",repeat:new D(1,1)},components:{alpha:\"texture(image, fract(repeat * materialInput.st)).channel\"}},translucent:!0});He.SpecularMapType=\"SpecularMap\";He._materialCache.addMaterial(He.SpecularMapType,{fabric:{type:He.SpecularMapType,uniforms:{image:He.DefaultImageId,channel:\"r\",repeat:new D(1,1)},components:{specular:\"texture(image, fract(repeat * materialInput.st)).channel\"}},translucent:!1});He.EmissionMapType=\"EmissionMap\";He._materialCache.addMaterial(He.EmissionMapType,{fabric:{type:He.EmissionMapType,uniforms:{image:He.DefaultImageId,channels:\"rgb\",repeat:new D(1,1)},components:{emission:\"texture(image, fract(repeat * materialInput.st)).channels\"}},translucent:!1});He.BumpMapType=\"BumpMap\";He._materialCache.addMaterial(He.BumpMapType,{fabric:{type:He.BumpMapType,uniforms:{image:He.DefaultImageId,channel:\"r\",strength:.8,repeat:new D(1,1)},source:nE},translucent:!1});He.NormalMapType=\"NormalMap\";He._materialCache.addMaterial(He.NormalMapType,{fabric:{type:He.NormalMapType,uniforms:{image:He.DefaultImageId,channels:\"rgb\",strength:.8,repeat:new D(1,1)},source:dE},translucent:!1});He.GridType=\"Grid\";He._materialCache.addMaterial(He.GridType,{fabric:{type:He.GridType,uniforms:{color:new O(0,1,0,1),cellAlpha:.1,lineCount:new D(8,8),lineThickness:new D(1,1),lineOffset:new D(0,0)},source:lE},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.cellAlpha<1}});He.StripeType=\"Stripe\";He._materialCache.addMaterial(He.StripeType,{fabric:{type:He.StripeType,uniforms:{horizontal:!0,evenColor:new O(1,1,1,.5),oddColor:new O(0,0,1,.5),offset:0,repeat:5},source:yE},translucent:function(e){let t=e.uniforms;return t.evenColor.alpha<1||t.oddColor.alpha<1}});He.CheckerboardType=\"Checkerboard\";He._materialCache.addMaterial(He.CheckerboardType,{fabric:{type:He.CheckerboardType,uniforms:{lightColor:new O(1,1,1,.5),darkColor:new O(0,0,0,.5),repeat:new D(5,5)},source:iE},translucent:function(e){let t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}});He.DotType=\"Dot\";He._materialCache.addMaterial(He.DotType,{fabric:{type:He.DotType,uniforms:{lightColor:new O(1,1,0,.75),darkColor:new O(0,1,1,.75),repeat:new D(5,5)},source:oE},translucent:function(e){let t=e.uniforms;return t.lightColor.alpha<1||t.darkColor.alpha<1}});He.WaterType=\"Water\";He._materialCache.addMaterial(He.WaterType,{fabric:{type:He.WaterType,uniforms:{baseWaterColor:new O(.2,.3,.6,1),blendColor:new O(0,1,.699,1),specularMap:He.DefaultImageId,normalMap:He.DefaultImageId,frequency:10,animationSpeed:.01,amplitude:1,specularIntensity:.5,fadeFactor:1},source:gE},translucent:function(e){let t=e.uniforms;return t.baseWaterColor.alpha<1||t.blendColor.alpha<1}});He.RimLightingType=\"RimLighting\";He._materialCache.addMaterial(He.RimLightingType,{fabric:{type:He.RimLightingType,uniforms:{color:new O(1,0,0,.7),rimColor:new O(1,1,1,.4),width:.3},source:pE},translucent:function(e){let t=e.uniforms;return t.color.alpha<1||t.rimColor.alpha<1}});He.FadeType=\"Fade\";He._materialCache.addMaterial(He.FadeType,{fabric:{type:He.FadeType,uniforms:{fadeInColor:new O(1,0,0,1),fadeOutColor:new O(0,0,0,0),maximumDistance:.5,repeat:!0,fadeDirection:{x:!0,y:!0},time:new D(.5,.5)},source:cE},translucent:function(e){let t=e.uniforms;return t.fadeInColor.alpha<1||t.fadeOutColor.alpha<1}});He.PolylineArrowType=\"PolylineArrow\";He._materialCache.addMaterial(He.PolylineArrowType,{fabric:{type:He.PolylineArrowType,uniforms:{color:new O(1,1,1,1)},source:uE},translucent:!0});He.PolylineDashType=\"PolylineDash\";He._materialCache.addMaterial(He.PolylineDashType,{fabric:{type:He.PolylineDashType,uniforms:{color:new O(1,0,1,1),gapColor:new O(0,0,0,0),dashLength:16,dashPattern:255},source:mE},translucent:!0});He.PolylineGlowType=\"PolylineGlow\";He._materialCache.addMaterial(He.PolylineGlowType,{fabric:{type:He.PolylineGlowType,uniforms:{color:new O(0,.5,1,1),glowPower:.25,taperPower:1},source:hE},translucent:!0});He.PolylineOutlineType=\"PolylineOutline\";He._materialCache.addMaterial(He.PolylineOutlineType,{fabric:{type:He.PolylineOutlineType,uniforms:{color:new O(1,1,1,1),outlineColor:new O(1,0,0,1),outlineWidth:1},source:fE},translucent:!0});He.ElevationContourType=\"ElevationContour\";He._materialCache.addMaterial(He.ElevationContourType,{fabric:{type:He.ElevationContourType,uniforms:{spacing:100,color:new O(1,0,0,1),width:1},source:sE},translucent:!1});He.ElevationRampType=\"ElevationRamp\";He._materialCache.addMaterial(He.ElevationRampType,{fabric:{type:He.ElevationRampType,uniforms:{image:He.DefaultImageId,minimumHeight:0,maximumHeight:1e4},source:aE},translucent:!1});He.SlopeRampMaterialType=\"SlopeRamp\";He._materialCache.addMaterial(He.SlopeRampMaterialType,{fabric:{type:He.SlopeRampMaterialType,uniforms:{image:He.DefaultImageId},source:bE},translucent:!1});He.AspectRampMaterialType=\"AspectRamp\";He._materialCache.addMaterial(He.AspectRampMaterialType,{fabric:{type:He.AspectRampMaterialType,uniforms:{image:He.DefaultImageId},source:tE},translucent:!1});He.ElevationBandType=\"ElevationBand\";He._materialCache.addMaterial(He.ElevationBandType,{fabric:{type:He.ElevationBandType,uniforms:{heights:He.DefaultImageId,colors:He.DefaultImageId},source:rE},translucent:!0});var ki=He;function lx(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.translucent,!0),n=g(e.closed,!1),i=g(e.materialSupport,lx.MaterialSupport.TEXTURED);this.material=l(e.material)?e.material:ki.fromType(ki.ColorType),this.translucent=t,this._vertexShaderSource=g(e.vertexShaderSource,i.vertexShaderSource),this._fragmentShaderSource=g(e.fragmentShaderSource,i.fragmentShaderSource),this._renderState=eo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._materialSupport=i,this._vertexFormat=i.vertexFormat,this._flat=g(e.flat,!1),this._faceForward=g(e.faceForward,!n)}Object.defineProperties(lx.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});lx.prototype.getFragmentShaderSource=eo.prototype.getFragmentShaderSource;lx.prototype.isTranslucent=eo.prototype.isTranslucent;lx.prototype.getRenderState=eo.prototype.getRenderState;lx.MaterialSupport={BASIC:Object.freeze({vertexFormat:Pe.POSITION_AND_NORMAL,vertexShaderSource:qG,fragmentShaderSource:jG}),TEXTURED:Object.freeze({vertexFormat:Pe.POSITION_NORMAL_AND_ST,vertexShaderSource:eE,fragmentShaderSource:$G}),ALL:Object.freeze({vertexFormat:Pe.ALL,vertexShaderSource:QG,fragmentShaderSource:JG})};var so=lx;var VYt=T(S(),1);var lYt=T(S(),1),_E=`in vec3 v_positionEC; in vec3 v_normalEC; in vec4 v_color; void main() { vec3 positionToEyeEC = -v_positionEC; vec3 normalEC = normalize(v_normalEC); #ifdef FACE_FORWARD normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC); #endif vec4 color = czm_gammaCorrect(v_color); czm_materialInput materialInput; materialInput.normalEC = normalEC; materialInput.positionToEyeEC = positionToEyeEC; czm_material material = czm_getDefaultMaterial(materialInput); material.diffuse = color.rgb; material.alpha = color.a; out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC); } `;var uYt=T(S(),1),TE=`in vec3 position3DHigh; in vec3 position3DLow; in vec3 normal; in vec4 color; in float batchId; out vec3 v_positionEC; out vec3 v_normalEC; out vec4 v_color; void main() { vec4 p = czm_computePosition(); v_positionEC = (czm_modelViewRelativeToEye * p).xyz; // position in eye coordinates v_normalEC = czm_normal * normal; // normal in eye coordinates v_color = color; gl_Position = czm_modelViewProjectionRelativeToEye * p; } `;var hYt=T(S(),1),SE=`in vec4 v_color; void main() { out_FragColor = czm_gammaCorrect(v_color); } `;var pYt=T(S(),1),CE=`in vec3 position3DHigh; in vec3 position3DLow; in vec4 color; in float batchId; out vec4 v_color; void main() { vec4 p = czm_computePosition(); v_color = color; gl_Position = czm_modelViewProjectionRelativeToEye * p; } `;function _p(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.translucent,!0),n=g(e.closed,!1),i=g(e.flat,!1),o=i?CE:TE,r=i?SE:_E,s=i?_p.FLAT_VERTEX_FORMAT:_p.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=g(e.vertexShaderSource,o),this._fragmentShaderSource=g(e.fragmentShaderSource,r),this._renderState=eo.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=s,this._flat=i,this._faceForward=g(e.faceForward,!n)}Object.defineProperties(_p.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}});_p.VERTEX_FORMAT=Pe.POSITION_AND_NORMAL;_p.FLAT_VERTEX_FORMAT=Pe.POSITION_ONLY;_p.prototype.getFragmentShaderSource=eo.prototype.getFragmentShaderSource;_p.prototype.isTranslucent=eo.prototype.isTranslucent;_p.prototype.getRenderState=eo.prototype.getRenderState;var ln=_p;var IYt=T(S(),1);function zS(e){this._definitionChanged=new ge,this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(zS.prototype,{isConstant:{get:function(){return K.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:de(\"color\")});zS.prototype.getType=function(e){return\"Color\"};zS.prototype.getValue=function(e,t){return l(t)||(t={}),t.color=K.getValueOrClonedDefault(this._color,e,O.WHITE,t.color),t};zS.prototype.equals=function(e){return this===e||e instanceof zS&&K.equals(this._color,e._color)};var kt=zS;var UQt=T(S(),1);var TQt=T(S(),1);var $Yt=T(S(),1);var kYt=T(S(),1);function Pb(e){e=g(e,g.EMPTY_OBJECT),this._ellipsoid=g(e.ellipsoid,oe.WGS84),this._rectangle=g(e.rectangle,le.MAX_VALUE),this._projection=new Ci(this._ellipsoid),this._numberOfLevelZeroTilesX=g(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=g(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(Pb.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}});Pb.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e};Pb.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e};Pb.prototype.rectangleToNativeRectangle=function(e,t){let n=P.toDegrees(e.west),i=P.toDegrees(e.south),o=P.toDegrees(e.east),r=P.toDegrees(e.north);return l(t)?(t.west=n,t.south=i,t.east=o,t.north=r,t):new le(n,i,o,r)};Pb.prototype.tileXYToNativeRectangle=function(e,t,n,i){let o=this.tileXYToRectangle(e,t,n,i);return o.west=P.toDegrees(o.west),o.south=P.toDegrees(o.south),o.east=P.toDegrees(o.east),o.north=P.toDegrees(o.north),o};Pb.prototype.tileXYToRectangle=function(e,t,n,i){let o=this._rectangle,r=this.getNumberOfXTilesAtLevel(n),s=this.getNumberOfYTilesAtLevel(n),a=o.width/r,c=e*a+o.west,d=(e+1)*a+o.west,u=o.height/s,m=o.north-t*u,p=o.north-(t+1)*u;return l(i)||(i=new le(c,p,d,m)),i.west=c,i.south=p,i.east=d,i.north=m,i};Pb.prototype.positionToTileXY=function(e,t,n){let i=this._rectangle;if(!le.contains(i,e))return;let o=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),s=i.width/o,a=i.height/r,c=e.longitude;i.east<i.west&&(c+=P.TWO_PI);let d=(c-i.west)/s|0;d>=o&&(d=o-1);let u=(i.north-e.latitude)/a|0;return u>=r&&(u=r-1),l(n)?(n.x=d,n.y=u,n):new D(d,u)};var Ui=Pb;var lte=new h,dte=new h,ute=new he,JY=new h,DEe=new h,mte=new ce,BEe=new Ui,VE=[new he,new he,new he,new he],LE=new D,Ur={};Ur.initialize=function(){let e=Ur._initPromise;return l(e)||(e=Xe.fetchJson(on(\"Assets/approximateTerrainHeights.json\")).then(function(t){Ur._terrainHeights=t}),Ur._initPromise=e),e};Ur.getMinimumMaximumHeights=function(e,t){t=g(t,oe.WGS84);let n=hte(e),i=Ur._defaultMinTerrainHeight,o=Ur._defaultMaxTerrainHeight;if(l(n)){let r=`${n.level}-${n.x}-${n.y}`,s=Ur._terrainHeights[r];l(s)&&(i=s[0],o=s[1]),t.cartographicToCartesian(le.northeast(e,ute),lte),t.cartographicToCartesian(le.southwest(e,ute),dte),h.midpoint(dte,lte,JY);let a=t.scaleToGeodeticSurface(JY,DEe);if(l(a)){let c=h.distance(JY,a);i=Math.min(i,-c)}else i=Ur._defaultMinTerrainHeight}return i=Math.max(Ur._defaultMinTerrainHeight,i),{minimumTerrainHeight:i,maximumTerrainHeight:o}};Ur.getBoundingSphere=function(e,t){t=g(t,oe.WGS84);let n=hte(e),i=Ur._defaultMaxTerrainHeight;if(l(n)){let r=`${n.level}-${n.x}-${n.y}`,s=Ur._terrainHeights[r];l(s)&&(i=s[1])}let o=ce.fromRectangle3D(e,t,0);return ce.fromRectangle3D(e,t,i,mte),ce.union(o,mte,o)};function hte(e){he.fromRadians(e.east,e.north,0,VE[0]),he.fromRadians(e.west,e.north,0,VE[1]),he.fromRadians(e.east,e.south,0,VE[2]),he.fromRadians(e.west,e.south,0,VE[3]);let t=0,n=0,i=0,o=0,r=Ur._terrainHeightsMaxLevel,s;for(s=0;s<=r;++s){let a=!1;for(let c=0;c<4;++c){let d=VE[c];if(BEe.positionToTileXY(d,s,LE),c===0)i=LE.x,o=LE.y;else if(i!==LE.x||o!==LE.y){a=!0;break}}if(a)break;t=i,n=o}if(s!==0)return{x:t,y:n,level:s>r?r:s-1}}Ur._terrainHeightsMaxLevel=6;Ur._defaultMaxTerrainHeight=9e3;Ur._defaultMinTerrainHeight=-1e5;Ur._terrainHeights=void 0;Ur._initPromise=void 0;Object.defineProperties(Ur,{initialized:{get:function(){return l(Ur._terrainHeights)}}});var ai=Ur;var dzt=T(S(),1);var HOt=T(S(),1);var rOt=T(S(),1);function wc(e,t,n){this.minimum=h.clone(g(e,h.ZERO)),this.maximum=h.clone(g(t,h.ZERO)),l(n)?n=h.clone(n):n=h.midpoint(this.minimum,this.maximum,new h),this.center=n}wc.fromCorners=function(e,t,n){return l(n)||(n=new wc),n.minimum=h.clone(e,n.minimum),n.maximum=h.clone(t,n.maximum),n.center=h.midpoint(e,t,n.center),n};wc.fromPoints=function(e,t){if(l(t)||(t=new wc),!l(e)||e.length===0)return t.minimum=h.clone(h.ZERO,t.minimum),t.maximum=h.clone(h.ZERO,t.maximum),t.center=h.clone(h.ZERO,t.center),t;let n=e[0].x,i=e[0].y,o=e[0].z,r=e[0].x,s=e[0].y,a=e[0].z,c=e.length;for(let m=1;m<c;m++){let p=e[m],b=p.x,f=p.y,x=p.z;n=Math.min(b,n),r=Math.max(b,r),i=Math.min(f,i),s=Math.max(f,s),o=Math.min(x,o),a=Math.max(x,a)}let d=t.minimum;d.x=n,d.y=i,d.z=o;let u=t.maximum;return u.x=r,u.y=s,u.z=a,t.center=h.midpoint(d,u,t.center),t};wc.clone=function(e,t){if(l(e))return l(t)?(t.minimum=h.clone(e.minimum,t.minimum),t.maximum=h.clone(e.maximum,t.maximum),t.center=h.clone(e.center,t.center),t):new wc(e.minimum,e.maximum,e.center)};wc.equals=function(e,t){return e===t||l(e)&&l(t)&&h.equals(e.center,t.center)&&h.equals(e.minimum,t.minimum)&&h.equals(e.maximum,t.maximum)};var m5=new h;wc.intersectPlane=function(e,t){m5=h.subtract(e.maximum,e.minimum,m5);let n=h.multiplyByScalar(m5,.5,m5),i=t.normal,o=n.x*Math.abs(i.x)+n.y*Math.abs(i.y)+n.z*Math.abs(i.z),r=h.dot(e.center,i)+t.distance;return r-o>0?nn.INSIDE:r+o<0?nn.OUTSIDE:nn.INTERSECTING};wc.prototype.clone=function(e){return wc.clone(this,e)};wc.prototype.intersectPlane=function(e){return wc.intersectPlane(this,e)};wc.prototype.equals=function(e){return wc.equals(this,e)};var vb=wc;var POt=T(S(),1);var cOt=T(S(),1);var QY={};QY.computeDiscriminant=function(e,t,n){return t*t-4*e*n};function fte(e,t,n){let i=e+t;return P.sign(e)!==P.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}QY.computeRealRoots=function(e,t,n){let i;if(e===0)return t===0?[]:[-n/t];if(t===0){if(n===0)return[0,0];let c=Math.abs(n),d=Math.abs(e);if(c<d&&c/d<P.EPSILON14)return[0,0];if(c>d&&d/c<P.EPSILON14)return[];if(i=-n/e,i<0)return[];let u=Math.sqrt(i);return[-u,u]}else if(n===0)return i=-t/e,i<0?[i,0]:[0,i];let o=t*t,r=4*e*n,s=fte(o,-r,P.EPSILON14);if(s<0)return[];let a=-.5*fte(t,P.sign(t)*Math.sqrt(s),P.EPSILON14);return t>0?[a/e,n/a]:[n/a,a/e]};var Fc=QY;var bOt=T(S(),1);var uOt=T(S(),1);var qY={};qY.computeDiscriminant=function(e,t,n,i){let o=e*e,r=t*t,s=n*n,a=i*i;return 18*e*t*n*i+r*s-27*o*a-4*(e*s*n+r*t*i)};function jY(e,t,n,i){let o=e,r=t/3,s=n/3,a=i,c=o*s,d=r*a,u=r*r,m=s*s,p=o*s-u,b=o*a-r*s,f=r*a-m,x=4*p*f-b*b,_,C;if(x<0){let J,z,ee;u*d>=c*m?(J=o,z=p,ee=-2*r*p+o*b):(J=a,z=f,ee=-a*b+2*s*f);let j=-(ee<0?-1:1)*Math.abs(J)*Math.sqrt(-x);C=-ee+j;let q=C/2,pe=q<0?-Math.pow(-q,1/3):Math.pow(q,1/3),_e=C===j?-pe:-z/pe;return _=z<=0?pe+_e:-ee/(pe*pe+_e*_e+z),u*d>=c*m?[(_-r)/o]:[-a/(_+s)]}let V=p,L=-2*r*p+o*b,R=f,G=-a*b+2*s*f,X=Math.sqrt(x),v=Math.sqrt(3)/2,W=Math.abs(Math.atan2(o*X,-L)/3);_=2*Math.sqrt(-V);let F=Math.cos(W);C=_*F;let A=_*(-F/2-v*Math.sin(W)),y=C+A>2*r?C-r:A-r,Z=o,E=y/Z;W=Math.abs(Math.atan2(a*X,-G)/3),_=2*Math.sqrt(-R),F=Math.cos(W),C=_*F,A=_*(-F/2-v*Math.sin(W));let I=-a,w=C+A<2*s?C+s:A+s,k=I/w,B=Z*w,U=-y*w-Z*I,Y=y*I,N=(s*U-r*Y)/(-r*U+s*B);return E<=N?E<=k?N<=k?[E,N,k]:[E,k,N]:[k,E,N]:E<=k?[N,E,k]:N<=k?[N,k,E]:[k,N,E]}qY.computeRealRoots=function(e,t,n,i){let o,r;if(e===0)return Fc.computeRealRoots(t,n,i);if(t===0){if(n===0){if(i===0)return[0,0,0];r=-i/e;let s=r<0?-Math.pow(-r,1/3):Math.pow(r,1/3);return[s,s,s]}else if(i===0)return o=Fc.computeRealRoots(e,0,n),o.Length===0?[0]:[o[0],0,o[1]];return jY(e,0,n,i)}else{if(n===0)return i===0?(r=-t/e,r<0?[r,0,0]:[0,0,r]):jY(e,t,0,i);if(i===0)return o=Fc.computeRealRoots(e,t,n),o.length===0?[0]:o[1]<=0?[o[0],o[1],0]:o[0]>=0?[0,o[0],o[1]]:[o[0],0,o[1]]}return jY(e,t,n,i)};var dx=qY;var $Y={};$Y.computeDiscriminant=function(e,t,n,i,o){let r=e*e,s=r*e,a=t*t,c=a*t,d=n*n,u=d*n,m=i*i,p=m*i,b=o*o,f=b*o;return a*d*m-4*c*p-4*e*u*m+18*e*t*n*p-27*r*m*m+256*s*f+o*(18*c*n*i-4*a*u+16*e*d*d-80*e*t*d*i-6*e*a*m+144*r*n*m)+b*(144*e*a*n-27*a*a-128*r*d-192*r*t*i)};function Sm(e,t,n,i){let o=e*e,r=t-3*o/8,s=n-t*e/2+o*e/8,a=i-n*e/4+t*o/16-3*o*o/256,c=dx.computeRealRoots(1,2*r,r*r-4*a,-s*s);if(c.length>0){let d=-e/4,u=c[c.length-1];if(Math.abs(u)<P.EPSILON14){let m=Fc.computeRealRoots(1,r,a);if(m.length===2){let p=m[0],b=m[1],f;if(p>=0&&b>=0){let x=Math.sqrt(p),_=Math.sqrt(b);return[d-_,d-x,d+x,d+_]}else{if(p>=0&&b<0)return f=Math.sqrt(p),[d-f,d+f];if(p<0&&b>=0)return f=Math.sqrt(b),[d-f,d+f]}}return[]}else if(u>0){let m=Math.sqrt(u),p=(r+u-s/m)/2,b=(r+u+s/m)/2,f=Fc.computeRealRoots(1,m,p),x=Fc.computeRealRoots(1,-m,b);return f.length!==0?(f[0]+=d,f[1]+=d,x.length!==0?(x[0]+=d,x[1]+=d,f[1]<=x[0]?[f[0],f[1],x[0],x[1]]:x[1]<=f[0]?[x[0],x[1],f[0],f[1]]:f[0]>=x[0]&&f[1]<=x[1]?[x[0],f[0],f[1],x[1]]:x[0]>=f[0]&&x[1]<=f[1]?[f[0],x[0],x[1],f[1]]:f[0]>x[0]&&f[0]<x[1]?[x[0],f[0],x[1],f[1]]:[f[0],x[0],f[1],x[1]]):f):x.length!==0?(x[0]+=d,x[1]+=d,x):[]}}return[]}function ZE(e,t,n,i){let o=n*n,r=t*t,s=e*e,a=-2*t,c=n*e+r-4*i,d=s*i-n*t*e+o,u=dx.computeRealRoots(1,a,c,d);if(u.length>0){let m=u[0],p=t-m,b=p*p,f=e/2,x=p/2,_=b-4*i,C=b+4*Math.abs(i),V=s-4*m,L=s+4*Math.abs(m),R,G;if(m<0||_*L<V*C){let Z=Math.sqrt(V);R=Z/2,G=Z===0?0:(e*x-n)/Z}else{let Z=Math.sqrt(_);R=Z===0?0:(e*x-n)/Z,G=Z/2}let X,v;f===0&&R===0?(X=0,v=0):P.sign(f)===P.sign(R)?(X=f+R,v=m/X):(v=f-R,X=m/v);let W,F;x===0&&G===0?(W=0,F=0):P.sign(x)===P.sign(G)?(W=x+G,F=i/W):(F=x-G,W=i/F);let A=Fc.computeRealRoots(1,X,W),y=Fc.computeRealRoots(1,v,F);if(A.length!==0)return y.length!==0?A[1]<=y[0]?[A[0],A[1],y[0],y[1]]:y[1]<=A[0]?[y[0],y[1],A[0],A[1]]:A[0]>=y[0]&&A[1]<=y[1]?[y[0],A[0],A[1],y[1]]:y[0]>=A[0]&&y[1]<=A[1]?[A[0],y[0],y[1],A[1]]:A[0]>y[0]&&A[0]<y[1]?[y[0],A[0],y[1],A[1]]:[A[0],y[0],A[1],y[1]]:A;if(y.length!==0)return y}return[]}$Y.computeRealRoots=function(e,t,n,i,o){if(Math.abs(e)<P.EPSILON15)return dx.computeRealRoots(t,n,i,o);let r=t/e,s=n/e,a=i/e,c=o/e,d=r<0?1:0;switch(d+=s<0?d+1:d,d+=a<0?d+1:d,d+=c<0?d+1:d,d){case 0:return Sm(r,s,a,c);case 1:return ZE(r,s,a,c);case 2:return ZE(r,s,a,c);case 3:return Sm(r,s,a,c);case 4:return Sm(r,s,a,c);case 5:return ZE(r,s,a,c);case 6:return Sm(r,s,a,c);case 7:return Sm(r,s,a,c);case 8:return ZE(r,s,a,c);case 9:return Sm(r,s,a,c);case 10:return Sm(r,s,a,c);case 11:return ZE(r,s,a,c);case 12:return Sm(r,s,a,c);case 13:return Sm(r,s,a,c);case 14:return Sm(r,s,a,c);case 15:return Sm(r,s,a,c);default:return}};var RE=$Y;var TOt=T(S(),1);function h5(e,t){t=h.clone(g(t,h.ZERO)),h.equals(t,h.ZERO)||h.normalize(t,t),this.origin=h.clone(g(e,h.ZERO)),this.direction=t}h5.clone=function(e,t){if(l(e))return l(t)?(t.origin=h.clone(e.origin),t.direction=h.clone(e.direction),t):new h5(e.origin,e.direction)};h5.getPoint=function(e,t,n){return l(n)||(n=new h),n=h.multiplyByScalar(e.direction,t,n),h.add(e.origin,n,n)};var bn=h5;var Wo={};Wo.rayPlane=function(e,t,n){l(n)||(n=new h);let i=e.origin,o=e.direction,r=t.normal,s=h.dot(r,o);if(Math.abs(s)<P.EPSILON15)return;let a=(-t.distance-h.dot(r,i))/s;if(!(a<0))return n=h.multiplyByScalar(o,a,n),h.add(i,n,n)};var YEe=new h,OEe=new h,Ste=new h,pte=new h,bte=new h;Wo.rayTriangleParametric=function(e,t,n,i,o){o=g(o,!1);let r=e.origin,s=e.direction,a=h.subtract(n,t,YEe),c=h.subtract(i,t,OEe),d=h.cross(s,c,Ste),u=h.dot(a,d),m,p,b,f,x;if(o){if(u<P.EPSILON6||(m=h.subtract(r,t,pte),b=h.dot(m,d),b<0||b>u)||(p=h.cross(m,a,bte),f=h.dot(s,p),f<0||b+f>u))return;x=h.dot(c,p)/u}else{if(Math.abs(u)<P.EPSILON6)return;let _=1/u;if(m=h.subtract(r,t,pte),b=h.dot(m,d)*_,b<0||b>1||(p=h.cross(m,a,bte),f=h.dot(s,p)*_,f<0||b+f>1))return;x=h.dot(c,p)*_}return x};Wo.rayTriangle=function(e,t,n,i,o,r){let s=Wo.rayTriangleParametric(e,t,n,i,o);if(!(!l(s)||s<0))return l(r)||(r=new h),h.multiplyByScalar(e.direction,s,r),h.add(e.origin,r,r)};var zEe=new bn;Wo.lineSegmentTriangle=function(e,t,n,i,o,r,s){let a=zEe;h.clone(e,a.origin),h.subtract(t,e,a.direction),h.normalize(a.direction,a.direction);let c=Wo.rayTriangleParametric(a,n,i,o,r);if(!(!l(c)||c<0||c>h.distance(e,t)))return l(s)||(s=new h),h.multiplyByScalar(a.direction,c,s),h.add(a.origin,s,s)};function HEe(e,t,n,i){let o=t*t-4*e*n;if(o<0)return;if(o>0){let s=1/(2*e),a=Math.sqrt(o),c=(-t+a)*s,d=(-t-a)*s;return c<d?(i.root0=c,i.root1=d):(i.root0=d,i.root1=c),i}let r=-t/(2*e);if(r!==0)return i.root0=i.root1=r,i}var KEe={root0:0,root1:0};function Cte(e,t,n){l(n)||(n=new Va);let i=e.origin,o=e.direction,r=t.center,s=t.radius*t.radius,a=h.subtract(i,r,Ste),c=h.dot(o,o),d=2*h.dot(o,a),u=h.magnitudeSquared(a)-s,m=HEe(c,d,u,KEe);if(l(m))return n.start=m.root0,n.stop=m.root1,n}Wo.raySphere=function(e,t,n){if(n=Cte(e,t,n),!(!l(n)||n.stop<0))return n.start=Math.max(n.start,0),n};var JEe=new bn;Wo.lineSegmentSphere=function(e,t,n,i){let o=JEe;h.clone(e,o.origin);let r=h.subtract(t,e,o.direction),s=h.magnitude(r);if(h.normalize(r,r),i=Cte(o,n,i),!(!l(i)||i.stop<0||i.start>s))return i.start=Math.max(i.start,0),i.stop=Math.min(i.stop,s),i};var QEe=new h,jEe=new h;Wo.rayEllipsoid=function(e,t){let n=t.oneOverRadii,i=h.multiplyComponents(n,e.origin,QEe),o=h.multiplyComponents(n,e.direction,jEe),r=h.magnitudeSquared(i),s=h.dot(i,o),a,c,d,u,m;if(r>1){if(s>=0)return;let p=s*s;if(a=r-1,c=h.magnitudeSquared(o),d=c*a,p<d)return;if(p>d){u=s*s-d,m=-s+Math.sqrt(u);let f=m/c,x=a/m;return f<x?new Va(f,x):{start:x,stop:f}}let b=Math.sqrt(a/c);return new Va(b,b)}else if(r<1)return a=r-1,c=h.magnitudeSquared(o),d=c*a,u=s*s-d,m=-s+Math.sqrt(u),new Va(0,m/c);if(s<0)return c=h.magnitudeSquared(o),new Va(0,-s/c)};function ux(e,t,n){let i=e+t;return P.sign(e)!==P.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<n?0:i}Wo.quadraticVectorExpression=function(e,t,n,i,o){let r=i*i,s=o*o,a=(e[$.COLUMN1ROW1]-e[$.COLUMN2ROW2])*s,c=o*(i*ux(e[$.COLUMN1ROW0],e[$.COLUMN0ROW1],P.EPSILON15)+t.y),d=e[$.COLUMN0ROW0]*r+e[$.COLUMN2ROW2]*s+i*t.x+n,u=s*ux(e[$.COLUMN2ROW1],e[$.COLUMN1ROW2],P.EPSILON15),m=o*(i*ux(e[$.COLUMN2ROW0],e[$.COLUMN0ROW2])+t.z),p,b=[];if(m===0&&u===0){if(p=Fc.computeRealRoots(a,c,d),p.length===0)return b;let W=p[0],F=Math.sqrt(Math.max(1-W*W,0));if(b.push(new h(i,o*W,o*-F)),b.push(new h(i,o*W,o*F)),p.length===2){let A=p[1],y=Math.sqrt(Math.max(1-A*A,0));b.push(new h(i,o*A,o*-y)),b.push(new h(i,o*A,o*y))}return b}let f=m*m,x=u*u,_=a*a,C=m*u,V=_+x,L=2*(c*a+C),R=2*d*a+c*c-x+f,G=2*(d*c-C),X=d*d-f;if(V===0&&L===0&&R===0&&G===0)return b;p=RE.computeRealRoots(V,L,R,G,X);let v=p.length;if(v===0)return b;for(let W=0;W<v;++W){let F=p[W],A=F*F,y=Math.max(1-A,0),Z=Math.sqrt(y),E;P.sign(a)===P.sign(d)?E=ux(a*A+d,c*F,P.EPSILON12):P.sign(d)===P.sign(c*F)?E=ux(a*A,c*F+d,P.EPSILON12):E=ux(a*A+c*F,d,P.EPSILON12);let I=ux(u*F,m,P.EPSILON15),w=E*I;w<0?b.push(new h(i,o*F,o*Z)):w>0?b.push(new h(i,o*F,o*-Z)):Z!==0?(b.push(new h(i,o*F,o*-Z)),b.push(new h(i,o*F,o*Z)),++W):b.push(new h(i,o*F,o*Z))}return b};var eO=new h,yte=new h,gte=new h,f5=new h,qEe=new h,$Ee=new $,eXe=new $,tXe=new $,nXe=new $,iXe=new $,xte=new $,_te=new $,Tte=new h,oXe=new h,rXe=new he;Wo.grazingAltitudeLocation=function(e,t){let n=e.origin,i=e.direction;if(!h.equals(n,h.ZERO)){let X=t.geodeticSurfaceNormal(n,eO);if(h.dot(i,X)>=0)return n}let o=l(this.rayEllipsoid(e,t)),r=t.transformPositionToScaledSpace(i,eO),s=h.normalize(r,r),a=h.mostOrthogonalAxis(r,f5),c=h.normalize(h.cross(a,s,yte),yte),d=h.normalize(h.cross(s,c,gte),gte),u=$Ee;u[0]=s.x,u[1]=s.y,u[2]=s.z,u[3]=c.x,u[4]=c.y,u[5]=c.z,u[6]=d.x,u[7]=d.y,u[8]=d.z;let m=$.transpose(u,eXe),p=$.fromScale(t.radii,tXe),b=$.fromScale(t.oneOverRadii,nXe),f=iXe;f[0]=0,f[1]=-i.z,f[2]=i.y,f[3]=i.z,f[4]=0,f[5]=-i.x,f[6]=-i.y,f[7]=i.x,f[8]=0;let x=$.multiply($.multiply(m,b,xte),f,xte),_=$.multiply($.multiply(x,p,_te),u,_te),C=$.multiplyByVector(x,n,qEe),V=Wo.quadraticVectorExpression(_,h.negate(C,eO),0,0,1),L,R,G=V.length;if(G>0){let X=h.clone(h.ZERO,oXe),v=Number.NEGATIVE_INFINITY;for(let F=0;F<G;++F){L=$.multiplyByVector(p,$.multiplyByVector(u,V[F],Tte),Tte);let A=h.normalize(h.subtract(L,n,f5),f5),y=h.dot(A,i);y>v&&(v=y,X=h.clone(L,X))}let W=t.cartesianToCartographic(X,rXe);return v=P.clamp(v,0,1),R=h.magnitude(h.subtract(X,n,f5))*Math.sqrt(1-v*v),R=o?-R:R,W.height=R,t.cartographicToCartesian(W,new h)}};var sXe=new h;Wo.lineSegmentPlane=function(e,t,n,i){l(i)||(i=new h);let o=h.subtract(t,e,sXe),r=n.normal,s=h.dot(r,o);if(Math.abs(s)<P.EPSILON6)return;let a=h.dot(r,e),c=-(n.distance+a)/s;if(!(c<0||c>1))return h.multiplyByScalar(o,c,i),h.add(e,i,i),i};Wo.trianglePlaneIntersection=function(e,t,n,i){let o=i.normal,r=i.distance,s=h.dot(o,e)+r<0,a=h.dot(o,t)+r<0,c=h.dot(o,n)+r<0,d=0;d+=s?1:0,d+=a?1:0,d+=c?1:0;let u,m;if((d===1||d===2)&&(u=new h,m=new h),d===1){if(s)return Wo.lineSegmentPlane(e,t,i,u),Wo.lineSegmentPlane(e,n,i,m),{positions:[e,t,n,u,m],indices:[0,3,4,1,2,4,1,4,3]};if(a)return Wo.lineSegmentPlane(t,n,i,u),Wo.lineSegmentPlane(t,e,i,m),{positions:[e,t,n,u,m],indices:[1,3,4,2,0,4,2,4,3]};if(c)return Wo.lineSegmentPlane(n,e,i,u),Wo.lineSegmentPlane(n,t,i,m),{positions:[e,t,n,u,m],indices:[2,3,4,0,1,4,0,4,3]}}else if(d===2)if(s)if(a){if(!c)return Wo.lineSegmentPlane(e,n,i,u),Wo.lineSegmentPlane(t,n,i,m),{positions:[e,t,n,u,m],indices:[0,1,4,0,4,3,2,3,4]}}else return Wo.lineSegmentPlane(n,t,i,u),Wo.lineSegmentPlane(e,t,i,m),{positions:[e,t,n,u,m],indices:[2,0,4,2,4,3,1,3,4]};else return Wo.lineSegmentPlane(t,e,i,u),Wo.lineSegmentPlane(n,e,i,m),{positions:[e,t,n,u,m],indices:[1,2,4,1,4,3,0,3,4]}};var jn=Wo;var tO=new se;function qh(e,t){t=g(t,oe.WGS84),e=t.scaleToGeodeticSurface(e);let n=Wt.eastNorthUpToFixedFrame(e,t);this._ellipsoid=t,this._origin=e,this._xAxis=h.fromCartesian4(M.getColumn(n,0,tO)),this._yAxis=h.fromCartesian4(M.getColumn(n,1,tO));let i=h.fromCartesian4(M.getColumn(n,2,tO));this._plane=an.fromPointNormal(e,i)}Object.defineProperties(qh.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},origin:{get:function(){return this._origin}},plane:{get:function(){return this._plane}},xAxis:{get:function(){return this._xAxis}},yAxis:{get:function(){return this._yAxis}},zAxis:{get:function(){return this._plane.normal}}});var aXe=new vb;qh.fromPoints=function(e,t){let n=vb.fromPoints(e,aXe);return new qh(n.center,t)};var Vte=new bn,p5=new h;qh.prototype.projectPointOntoPlane=function(e,t){let n=Vte;n.origin=e,h.normalize(e,n.direction);let i=jn.rayPlane(n,this._plane,p5);if(l(i)||(h.negate(n.direction,n.direction),i=jn.rayPlane(n,this._plane,p5)),l(i)){let o=h.subtract(i,this._origin,i),r=h.dot(this._xAxis,o),s=h.dot(this._yAxis,o);return l(t)?(t.x=r,t.y=s,t):new D(r,s)}};qh.prototype.projectPointsOntoPlane=function(e,t){l(t)||(t=[]);let n=0,i=e.length;for(let o=0;o<i;o++){let r=this.projectPointOntoPlane(e[o],t[n]);l(r)&&(t[n]=r,n++)}return t.length=n,t};qh.prototype.projectPointToNearestOnPlane=function(e,t){l(t)||(t=new D);let n=Vte;n.origin=e,h.clone(this._plane.normal,n.direction);let i=jn.rayPlane(n,this._plane,p5);l(i)||(h.negate(n.direction,n.direction),i=jn.rayPlane(n,this._plane,p5));let o=h.subtract(i,this._origin,i),r=h.dot(this._xAxis,o),s=h.dot(this._yAxis,o);return t.x=r,t.y=s,t};qh.prototype.projectPointsToNearestOnPlane=function(e,t){l(t)||(t=[]);let n=e.length;t.length=n;for(let i=0;i<n;i++)t[i]=this.projectPointToNearestOnPlane(e[i],t[i]);return t};var cXe=new h;qh.prototype.projectPointOntoEllipsoid=function(e,t){l(t)||(t=new h);let n=this._ellipsoid,i=this._origin,o=this._xAxis,r=this._yAxis,s=cXe;return h.multiplyByScalar(o,e.x,s),t=h.add(i,s,t),h.multiplyByScalar(r,e.y,s),h.add(t,s,t),n.scaleToGeocentricSurface(t,t),t};qh.prototype.projectPointsOntoEllipsoid=function(e,t){let n=e.length;l(t)?t.length=n:t=new Array(n);for(let i=0;i<n;++i)t[i]=this.projectPointOntoEllipsoid(e[i],t[i]);return t};var Dr=qh;function wi(e,t){this.center=h.clone(g(e,h.ZERO)),this.halfAxes=$.clone(g(t,$.ZERO))}wi.packedLength=h.packedLength+$.packedLength;wi.pack=function(e,t,n){return n=g(n,0),h.pack(e.center,t,n),$.pack(e.halfAxes,t,n+h.packedLength),t};wi.unpack=function(e,t,n){return t=g(t,0),l(n)||(n=new wi),h.unpack(e,t,n.center),$.unpack(e,t+h.packedLength,n.halfAxes),n};var lXe=new h,dXe=new h,uXe=new h,mXe=new h,hXe=new h,fXe=new h,pXe=new $,bXe={unitary:new $,diagonal:new $};wi.fromPoints=function(e,t){if(l(t)||(t=new wi),!l(e)||e.length===0)return t.halfAxes=$.ZERO,t.center=h.ZERO,t;let n,i=e.length,o=h.clone(e[0],lXe);for(n=1;n<i;n++)h.add(o,e[n],o);let r=1/i;h.multiplyByScalar(o,r,o);let s=0,a=0,c=0,d=0,u=0,m=0,p;for(n=0;n<i;n++)p=h.subtract(e[n],o,dXe),s+=p.x*p.x,a+=p.x*p.y,c+=p.x*p.z,d+=p.y*p.y,u+=p.y*p.z,m+=p.z*p.z;s*=r,a*=r,c*=r,d*=r,u*=r,m*=r;let b=pXe;b[0]=s,b[1]=a,b[2]=c,b[3]=a,b[4]=d,b[5]=u,b[6]=c,b[7]=u,b[8]=m;let f=$.computeEigenDecomposition(b,bXe),x=$.clone(f.unitary,t.halfAxes),_=$.getColumn(x,0,mXe),C=$.getColumn(x,1,hXe),V=$.getColumn(x,2,fXe),L=-Number.MAX_VALUE,R=-Number.MAX_VALUE,G=-Number.MAX_VALUE,X=Number.MAX_VALUE,v=Number.MAX_VALUE,W=Number.MAX_VALUE;for(n=0;n<i;n++)p=e[n],L=Math.max(h.dot(_,p),L),R=Math.max(h.dot(C,p),R),G=Math.max(h.dot(V,p),G),X=Math.min(h.dot(_,p),X),v=Math.min(h.dot(C,p),v),W=Math.min(h.dot(V,p),W);_=h.multiplyByScalar(_,.5*(X+L),_),C=h.multiplyByScalar(C,.5*(v+R),C),V=h.multiplyByScalar(V,.5*(W+G),V);let F=h.add(_,C,t.center);h.add(F,V,F);let A=uXe;return A.x=L-X,A.y=R-v,A.z=G-W,h.multiplyByScalar(A,.5,A),$.multiplyByScale(t.halfAxes,A,t.halfAxes),t};var Xte=new h,yXe=new h;function Lte(e,t,n,i,o,r,s,a,c,d,u){l(u)||(u=new wi);let m=u.halfAxes;$.setColumn(m,0,t,m),$.setColumn(m,1,n,m),$.setColumn(m,2,i,m);let p=Xte;p.x=(o+r)/2,p.y=(s+a)/2,p.z=(c+d)/2;let b=yXe;b.x=(r-o)/2,b.y=(a-s)/2,b.z=(d-c)/2;let f=u.center;return p=$.multiplyByVector(m,p,p),h.add(e,p,f),$.multiplyByScale(m,b,m),u}var Zte=new he,gXe=new h,xXe=new he,_Xe=new he,TXe=new he,SXe=new he,CXe=new he,VXe=new h,Rte=new h,LXe=new h,Gte=new h,ZXe=new h,RXe=new D,GXe=new D,EXe=new D,XXe=new D,IXe=new D,WXe=new h,PXe=new h,vXe=new h,wXe=new h,FXe=new D,AXe=new h,MXe=new h,NXe=new h,kXe=new an(h.UNIT_X,0);wi.fromRectangle=function(e,t,n,i,o){t=g(t,0),n=g(n,0),i=g(i,oe.WGS84);let r,s,a,c,d,u,m;if(e.width<=P.PI){let v=le.center(e,Zte),W=i.cartographicToCartesian(v,gXe),F=new Dr(W,i);m=F.plane;let A=v.longitude,y=e.south<0&&e.north>0?0:v.latitude,Z=he.fromRadians(A,e.north,n,xXe),E=he.fromRadians(e.west,e.north,n,_Xe),I=he.fromRadians(e.west,y,n,TXe),w=he.fromRadians(e.west,e.south,n,SXe),k=he.fromRadians(A,e.south,n,CXe),B=i.cartographicToCartesian(Z,VXe),U=i.cartographicToCartesian(E,Rte),Y=i.cartographicToCartesian(I,LXe),N=i.cartographicToCartesian(w,Gte),J=i.cartographicToCartesian(k,ZXe),z=F.projectPointToNearestOnPlane(B,RXe),ee=F.projectPointToNearestOnPlane(U,GXe),H=F.projectPointToNearestOnPlane(Y,EXe),j=F.projectPointToNearestOnPlane(N,XXe),q=F.projectPointToNearestOnPlane(J,IXe);return r=Math.min(ee.x,H.x,j.x),s=-r,c=Math.max(ee.y,z.y),a=Math.min(j.y,q.y),E.height=w.height=t,U=i.cartographicToCartesian(E,Rte),N=i.cartographicToCartesian(w,Gte),d=Math.min(an.getPointDistance(m,U),an.getPointDistance(m,N)),u=n,Lte(F.origin,F.xAxis,F.yAxis,F.zAxis,r,s,a,c,d,u,o)}let p=e.south>0,b=e.north<0,f=p?e.south:b?e.north:0,x=le.center(e,Zte).longitude,_=h.fromRadians(x,f,n,i,WXe);_.z=0;let V=Math.abs(_.x)<P.EPSILON10&&Math.abs(_.y)<P.EPSILON10?h.UNIT_X:h.normalize(_,PXe),L=h.UNIT_Z,R=h.cross(V,L,vXe);m=an.fromPointNormal(_,V,kXe);let G=h.fromRadians(x+P.PI_OVER_TWO,f,n,i,wXe);s=h.dot(an.projectPointOntoPlane(m,G,FXe),R),r=-s,c=h.fromRadians(0,e.north,b?t:n,i,AXe).z,a=h.fromRadians(0,e.south,p?t:n,i,MXe).z;let X=h.fromRadians(e.east,f,n,i,NXe);return d=an.getPointDistance(m,X),u=0,Lte(_,R,L,V,r,s,a,c,d,u,o)};wi.fromTransformation=function(e,t){return l(t)||(t=new wi),t.center=M.getTranslation(e,t.center),t.halfAxes=M.getMatrix3(e,t.halfAxes),t.halfAxes=$.multiplyByScalar(t.halfAxes,.5,t.halfAxes),t};wi.clone=function(e,t){if(l(e))return l(t)?(h.clone(e.center,t.center),$.clone(e.halfAxes,t.halfAxes),t):new wi(e.center,e.halfAxes)};wi.intersectPlane=function(e,t){let n=e.center,i=t.normal,o=e.halfAxes,r=i.x,s=i.y,a=i.z,c=Math.abs(r*o[$.COLUMN0ROW0]+s*o[$.COLUMN0ROW1]+a*o[$.COLUMN0ROW2])+Math.abs(r*o[$.COLUMN1ROW0]+s*o[$.COLUMN1ROW1]+a*o[$.COLUMN1ROW2])+Math.abs(r*o[$.COLUMN2ROW0]+s*o[$.COLUMN2ROW1]+a*o[$.COLUMN2ROW2]),d=h.dot(i,n)+t.distance;return d<=-c?nn.OUTSIDE:d>=c?nn.INSIDE:nn.INTERSECTING};var Ite=new h,Wte=new h,Pte=new h,UXe=new h,Ete=new h,DXe=new h;wi.distanceSquaredTo=function(e,t){let n=h.subtract(t,e.center,Xte),i=e.halfAxes,o=$.getColumn(i,0,Ite),r=$.getColumn(i,1,Wte),s=$.getColumn(i,2,Pte),a=h.magnitude(o),c=h.magnitude(r),d=h.magnitude(s),u=!0,m=!0,p=!0;a>0?h.divideByScalar(o,a,o):u=!1,c>0?h.divideByScalar(r,c,r):m=!1,d>0?h.divideByScalar(s,d,s):p=!1;let b=!u+!m+!p,f,x,_;if(b===1){let R=o;f=r,x=s,m?p||(R=s,x=o):(R=r,f=o),_=h.cross(f,x,Ete),R===o?o=_:R===r?r=_:R===s&&(s=_)}else if(b===2){f=o,m?f=r:p&&(f=s);let R=h.UNIT_Y;R.equalsEpsilon(f,P.EPSILON3)&&(R=h.UNIT_X),x=h.cross(f,R,UXe),h.normalize(x,x),_=h.cross(f,x,Ete),h.normalize(_,_),f===o?(r=x,s=_):f===r?(s=x,o=_):f===s&&(o=x,r=_)}else b===3&&(o=h.UNIT_X,r=h.UNIT_Y,s=h.UNIT_Z);let C=DXe;C.x=h.dot(n,o),C.y=h.dot(n,r),C.z=h.dot(n,s);let V=0,L;return C.x<-a?(L=C.x+a,V+=L*L):C.x>a&&(L=C.x-a,V+=L*L),C.y<-c?(L=C.y+c,V+=L*L):C.y>c&&(L=C.y-c,V+=L*L),C.z<-d?(L=C.z+d,V+=L*L):C.z>d&&(L=C.z-d,V+=L*L),V};var BXe=new h,YXe=new h;wi.computePlaneDistances=function(e,t,n,i){l(i)||(i=new Va);let o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=e.center,a=e.halfAxes,c=$.getColumn(a,0,Ite),d=$.getColumn(a,1,Wte),u=$.getColumn(a,2,Pte),m=h.add(c,d,BXe);h.add(m,u,m),h.add(m,s,m);let p=h.subtract(m,t,YXe),b=h.dot(n,p);return o=Math.min(b,o),r=Math.max(b,r),h.add(s,c,m),h.add(m,d,m),h.subtract(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),h.add(s,c,m),h.subtract(m,d,m),h.add(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),h.add(s,c,m),h.subtract(m,d,m),h.subtract(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),h.subtract(s,c,m),h.add(m,d,m),h.add(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),h.subtract(s,c,m),h.add(m,d,m),h.subtract(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),h.subtract(s,c,m),h.subtract(m,d,m),h.add(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),h.subtract(s,c,m),h.subtract(m,d,m),h.subtract(m,u,m),h.subtract(m,t,p),b=h.dot(n,p),o=Math.min(b,o),r=Math.max(b,r),i.start=o,i.stop=r,i};var OXe=new h,zXe=new h,HXe=new h;wi.computeCorners=function(e,t){l(t)||(t=[new h,new h,new h,new h,new h,new h,new h,new h]);let n=e.center,i=e.halfAxes,o=$.getColumn(i,0,OXe),r=$.getColumn(i,1,zXe),s=$.getColumn(i,2,HXe);return h.clone(n,t[0]),h.subtract(t[0],o,t[0]),h.subtract(t[0],r,t[0]),h.subtract(t[0],s,t[0]),h.clone(n,t[1]),h.subtract(t[1],o,t[1]),h.subtract(t[1],r,t[1]),h.add(t[1],s,t[1]),h.clone(n,t[2]),h.subtract(t[2],o,t[2]),h.add(t[2],r,t[2]),h.subtract(t[2],s,t[2]),h.clone(n,t[3]),h.subtract(t[3],o,t[3]),h.add(t[3],r,t[3]),h.add(t[3],s,t[3]),h.clone(n,t[4]),h.add(t[4],o,t[4]),h.subtract(t[4],r,t[4]),h.subtract(t[4],s,t[4]),h.clone(n,t[5]),h.add(t[5],o,t[5]),h.subtract(t[5],r,t[5]),h.add(t[5],s,t[5]),h.clone(n,t[6]),h.add(t[6],o,t[6]),h.add(t[6],r,t[6]),h.subtract(t[6],s,t[6]),h.clone(n,t[7]),h.add(t[7],o,t[7]),h.add(t[7],r,t[7]),h.add(t[7],s,t[7]),t};var KXe=new $;wi.computeTransformation=function(e,t){l(t)||(t=new M);let n=e.center,i=$.multiplyByUniformScale(e.halfAxes,2,KXe);return M.fromRotationTranslation(i,n,t)};var JXe=new ce;wi.isOccluded=function(e,t){let n=ce.fromOrientedBoundingBox(e,JXe);return!t.isBoundingSphereVisible(n)};wi.prototype.intersectPlane=function(e){return wi.intersectPlane(this,e)};wi.prototype.distanceSquaredTo=function(e){return wi.distanceSquaredTo(this,e)};wi.prototype.computePlaneDistances=function(e,t,n){return wi.computePlaneDistances(this,e,t,n)};wi.prototype.computeCorners=function(e){return wi.computeCorners(this,e)};wi.prototype.computeTransformation=function(e){return wi.computeTransformation(this,e)};wi.prototype.isOccluded=function(e){return wi.isOccluded(this,e)};wi.equals=function(e,t){return e===t||l(e)&&l(t)&&h.equals(e.center,t.center)&&$.equals(e.halfAxes,t.halfAxes)};wi.prototype.clone=function(e){return wi.clone(this,e)};wi.prototype.equals=function(e){return wi.equals(this,e)};var Zn=wi;var pzt=T(S(),1);var b5={};b5.getHeight=function(e,t,n){return(e-n)*t+n};var QXe=new he;b5.getPosition=function(e,t,n,i,o){let"
}