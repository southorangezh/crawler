{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 179,
    "total_chunks": 194,
    "chunk_size": 40989,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.757Z"
  },
  "content": "nS=zTe;var PKi=T(S(),1);function Egt(e){return e<=.04045?e*.07739938080495357:Math.pow((e+.055)*.9478672985781991,2.4)}var iS=Egt;var FKi=T(S(),1);function Xgt(e){switch(e){case ne.FLOAT:return\"float\";case ne.FLOAT_VEC2:return\"vec2\";case ne.FLOAT_VEC3:return\"vec3\";case ne.FLOAT_VEC4:return\"vec4\";case ne.FLOAT_MAT2:return\"mat2\";case ne.FLOAT_MAT3:return\"mat3\";case ne.FLOAT_MAT4:return\"mat4\";case ne.SAMPLER_2D:return\"sampler2D\";case ne.BOOL:return\"bool\"}}var a7=Xgt;var MKi=T(S(),1);function Igt(e,t,n){return function(){n.apply(e,arguments),t.apply(e,arguments)}}var O9=Igt;var BKi=T(S(),1);var Wgt=new h(1,1,1);function c7(e){e=g(e,Wgt),this._dimensions=h.clone(e)}Object.defineProperties(c7.prototype,{dimensions:{get:function(){return this._dimensions},set:function(e){h.clone(e,this._dimensions)}}});var Pgt=new h;c7.prototype.emit=function(e){let t=this._dimensions,n=h.multiplyByScalar(t,.5,Pgt),i=P.randomBetween(-n.x,n.x),o=P.randomBetween(-n.y,n.y),r=P.randomBetween(-n.z,n.z);e.position=h.fromElements(i,o,r,e.position),e.velocity=h.normalize(e.position,e.velocity)};var l7=c7;var zKi=T(S(),1);function np(){this.featurePropertiesDirty=!1}Object.defineProperties(np.prototype,{featuresLength:{get:function(){fe.throwInstantiationError()}},pointsLength:{get:function(){fe.throwInstantiationError()}},trianglesLength:{get:function(){fe.throwInstantiationError()}},geometryByteLength:{get:function(){fe.throwInstantiationError()}},texturesByteLength:{get:function(){fe.throwInstantiationError()}},batchTableByteLength:{get:function(){fe.throwInstantiationError()}},innerContents:{get:function(){fe.throwInstantiationError()}},ready:{get:function(){fe.throwInstantiationError()}},tileset:{get:function(){fe.throwInstantiationError()}},tile:{get:function(){fe.throwInstantiationError()}},url:{get:function(){fe.throwInstantiationError()}},batchTable:{get:function(){fe.throwInstantiationError()}},metadata:{get:function(){fe.throwInstantiationError()},set:function(e){fe.throwInstantiationError()}},group:{get:function(){fe.throwInstantiationError()},set:function(e){fe.throwInstantiationError()}}});np.prototype.hasProperty=function(e,t){fe.throwInstantiationError()};np.prototype.getFeature=function(e){fe.throwInstantiationError()};np.prototype.applyDebugSettings=function(e,t){fe.throwInstantiationError()};np.prototype.applyStyle=function(e){fe.throwInstantiationError()};np.prototype.update=function(e,t){fe.throwInstantiationError()};np.prototype.pick=function(e,t,n){fe.throwInstantiationError()};np.prototype.isDestroyed=function(){fe.throwInstantiationError()};np.prototype.destroy=function(){fe.throwInstantiationError()};var d7=np;var rJi=T(S(),1);var jKi=T(S(),1);function hL(e,t){this._conditionsExpression=Oe(e,!0),this._conditions=e.conditions,this._runtimeConditions=void 0,wgt(this,t)}Object.defineProperties(hL.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}});function vgt(e,t){this.condition=e,this.expression=t}function wgt(e,t){let n=[],i=e._conditions;if(!l(i))return;let o=i.length;for(let r=0;r<o;++r){let s=i[r],a=String(s[0]),c=String(s[1]);n.push(new vgt(new pu(a,t),new pu(c,t)))}e._runtimeConditions=n}hL.prototype.evaluate=function(e,t){let n=this._runtimeConditions;if(!l(n))return;let i=n.length;for(let o=0;o<i;++o){let r=n[o];if(r.condition.evaluate(e))return r.expression.evaluate(e,t)}};hL.prototype.evaluateColor=function(e,t){let n=this._runtimeConditions;if(!l(n))return;let i=n.length;for(let o=0;o<i;++o){let r=n[o];if(r.condition.evaluate(e))return r.expression.evaluateColor(e,t)}};hL.prototype.getShaderFunction=function(e,t,n,i){let o=this._runtimeConditions;if(!l(o)||o.length===0)return;let r=\"\",s=o.length;for(let a=0;a<s;++a){let c=o[a],d=c.condition.getShaderExpression(t,n),u=c.expression.getShaderExpression(t,n);r+=` ${a===0?\"if\":\"else if\"} (${d}) { return ${u}; } `}return r=`${i} ${e} { ${r} return ${i}(1.0); } `,r};hL.prototype.getVariables=function(){let e=[],t=this._runtimeConditions;if(!l(t)||t.length===0)return e;let n=t.length;for(let i=0;i<n;++i){let o=t[i];e.push.apply(e,o.condition.getVariables()),e.push.apply(e,o.expression.getVariables())}return e=e.filter(function(i,o,r){return r.indexOf(i)===o}),e};var z9=hL;function Fg(e){this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,Fgt(this,e)}function Fgt(e,t){t=g(Oe(t,!0),e._style),e._style=t,e.show=t.show,e.color=t.color,e.pointSize=t.pointSize,e.pointOutlineColor=t.pointOutlineColor,e.pointOutlineWidth=t.pointOutlineWidth,e.labelColor=t.labelColor,e.labelOutlineColor=t.labelOutlineColor,e.labelOutlineWidth=t.labelOutlineWidth,e.labelStyle=t.labelStyle,e.font=t.font,e.labelText=t.labelText,e.backgroundColor=t.backgroundColor,e.backgroundPadding=t.backgroundPadding,e.backgroundEnabled=t.backgroundEnabled,e.scaleByDistance=t.scaleByDistance,e.translucencyByDistance=t.translucencyByDistance,e.distanceDisplayCondition=t.distanceDisplayCondition,e.heightOffset=t.heightOffset,e.anchorLineEnabled=t.anchorLineEnabled,e.anchorLineColor=t.anchorLineColor,e.image=t.image,e.disableDepthTestDistance=t.disableDepthTestDistance,e.horizontalOrigin=t.horizontalOrigin,e.verticalOrigin=t.verticalOrigin,e.labelHorizontalOrigin=t.labelHorizontalOrigin,e.labelVerticalOrigin=t.labelVerticalOrigin;let n={};if(l(t.meta)){let i=t.defines,o=g(t.meta,g.EMPTY_OBJECT);for(let r in o)o.hasOwnProperty(r)&&(n[r]=new pu(o[r],i))}e._meta=n,e._ready=!0}function $o(e,t){let n=g(e._style,g.EMPTY_OBJECT).defines;if(l(t)){if(typeof t==\"boolean\"||typeof t==\"number\")return new pu(String(t));if(typeof t==\"string\")return new pu(t,n);if(l(t.conditions))return new z9(t,n)}else return;return t}function er(e){if(l(e)){if(l(e.expression))return e.expression;if(l(e.conditionsExpression))return Oe(e.conditionsExpression,!0)}else return;return e}Object.defineProperties(Fg.prototype,{style:{get:function(){return this._style}},show:{get:function(){return this._show},set:function(e){this._show=$o(this,e),this._style.show=er(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){return this._color},set:function(e){this._color=$o(this,e),this._style.color=er(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=$o(this,e),this._style.pointSize=er(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=$o(this,e),this._style.pointOutlineColor=er(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=$o(this,e),this._style.pointOutlineWidth=er(this._pointOutlineWidth)}},labelColor:{get:function(){return this._labelColor},set:function(e){this._labelColor=$o(this,e),this._style.labelColor=er(this._labelColor)}},labelOutlineColor:{get:function(){return this._labelOutlineColor},set:function(e){this._labelOutlineColor=$o(this,e),this._style.labelOutlineColor=er(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){return this._labelOutlineWidth},set:function(e){this._labelOutlineWidth=$o(this,e),this._style.labelOutlineWidth=er(this._labelOutlineWidth)}},font:{get:function(){return this._font},set:function(e){this._font=$o(this,e),this._style.font=er(this._font)}},labelStyle:{get:function(){return this._labelStyle},set:function(e){this._labelStyle=$o(this,e),this._style.labelStyle=er(this._labelStyle)}},labelText:{get:function(){return this._labelText},set:function(e){this._labelText=$o(this,e),this._style.labelText=er(this._labelText)}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=$o(this,e),this._style.backgroundColor=er(this._backgroundColor)}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){this._backgroundPadding=$o(this,e),this._style.backgroundPadding=er(this._backgroundPadding)}},backgroundEnabled:{get:function(){return this._backgroundEnabled},set:function(e){this._backgroundEnabled=$o(this,e),this._style.backgroundEnabled=er(this._backgroundEnabled)}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){this._scaleByDistance=$o(this,e),this._style.scaleByDistance=er(this._scaleByDistance)}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){this._translucencyByDistance=$o(this,e),this._style.translucencyByDistance=er(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=$o(this,e),this._style.distanceDisplayCondition=er(this._distanceDisplayCondition)}},heightOffset:{get:function(){return this._heightOffset},set:function(e){this._heightOffset=$o(this,e),this._style.heightOffset=er(this._heightOffset)}},anchorLineEnabled:{get:function(){return this._anchorLineEnabled},set:function(e){this._anchorLineEnabled=$o(this,e),this._style.anchorLineEnabled=er(this._anchorLineEnabled)}},anchorLineColor:{get:function(){return this._anchorLineColor},set:function(e){this._anchorLineColor=$o(this,e),this._style.anchorLineColor=er(this._anchorLineColor)}},image:{get:function(){return this._image},set:function(e){this._image=$o(this,e),this._style.image=er(this._image)}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance=$o(this,e),this._style.disableDepthTestDistance=er(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin=$o(this,e),this._style.horizontalOrigin=er(this._horizontalOrigin)}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){this._verticalOrigin=$o(this,e),this._style.verticalOrigin=er(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){return this._labelHorizontalOrigin},set:function(e){this._labelHorizontalOrigin=$o(this,e),this._style.labelHorizontalOrigin=er(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){return this._labelVerticalOrigin},set:function(e){this._labelVerticalOrigin=$o(this,e),this._style.labelVerticalOrigin=er(this._labelVerticalOrigin)}},meta:{get:function(){return this._meta},set:function(e){this._meta=e}}});Fg.fromUrl=function(e){return Xe.createIfNeeded(e).fetchJson(e).then(function(n){return new Fg(n)})};Fg.prototype.getColorShaderFunction=function(e,t,n){return this._colorShaderFunctionReady?(n.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,l(this.color)&&l(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(e,t,n,\"vec4\"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=n.translucent,this._colorShaderFunction)};Fg.prototype.getShowShaderFunction=function(e,t,n){return this._showShaderFunctionReady?this._showShaderFunction:(this._showShaderFunctionReady=!0,l(this.show)&&l(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(e,t,n,\"bool\"):this._showShaderFunction=void 0,this._showShaderFunction)};Fg.prototype.getPointSizeShaderFunction=function(e,t,n){return this._pointSizeShaderFunctionReady?this._pointSizeShaderFunction:(this._pointSizeShaderFunctionReady=!0,l(this.pointSize)&&l(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(e,t,n,\"float\"):this._pointSizeShaderFunction=void 0,this._pointSizeShaderFunction)};Fg.prototype.getVariables=function(){let e=[];return l(this.color)&&l(this.color.getVariables)&&e.push.apply(e,this.color.getVariables()),l(this.show)&&l(this.show.getVariables)&&e.push.apply(e,this.show.getVariables()),l(this.pointSize)&&l(this.pointSize.getVariables)&&e.push.apply(e,this.pointSize.getVariables()),e=e.filter(function(t,n,i){return i.indexOf(t)===n}),e};var oS=Fg;var MJi=T(S(),1);var lJi=T(S(),1);function H9(e){e=g(e,g.EMPTY_OBJECT),this._maximumSubtreeCount=g(e.maximumSubtreeCount,0),this._subtreeRequestCounter=0,this._queue=new DT({comparator:H9.comparator})}H9.prototype.addSubtree=function(e){let t=new Agt(e,this._subtreeRequestCounter);this._subtreeRequestCounter++,this._queue.insert(t);let n=e.implicitCoordinates;if(n.level>0){let i=n.getParentSubtreeCoordinates(),o=this.find(i)}if(this._maximumSubtreeCount>0)for(;this._queue.length>this._maximumSubtreeCount&&this._queue.getMinimum()!==t;)this._queue.removeMinimum()};H9.prototype.find=function(e){let t=this._queue,n=t.internalArray,i=t.length;for(let o=0;o<i;o++){let r=n[o],a=r.subtree.implicitCoordinates;if(e.isEqual(a))return r.subtree}};H9.comparator=function(e,t){let n=e.subtree.implicitCoordinates,i=t.subtree.implicitCoordinates;return n.isAncestor(i)?1:i.isAncestor(n)?-1:e.stamp-t.stamp};function Agt(e,t){this.subtree=e,this.stamp=t}var K9=H9;var fJi=T(S(),1);function W3(e){this._resource=e,this._metadataTable=void 0}Object.defineProperties(W3.prototype,{metadataTable:{get:function(){return this._metadataTable}}});W3.fromJson=async function(e,t,n,i){let o;l(t)?o={json:t,binary:void 0}:o=Ngt(n);let r=await Mgt(e,o.json,o.binary),s={},a=o.json.bufferViews.length;for(let m=0;m<a;++m){let p=o.json.bufferViews[m],b=p.byteOffset,f=b+p.byteLength,_=r[p.buffer].subarray(b,f);s[m]=_}let c=o.json.voxelTable,d=o.json.propertyTables[c],u=new W3(e);return u._metadataTable=new El({count:d.count,properties:d.properties,class:i.classes[d.class],bufferViews:s}),u};function Mgt(e,t,n){let i=t.buffers.length,o=new Array(i);for(let r=0;r<i;r++){let s=t.buffers[r];if(l(s.uri)){let c=e.getDerivedResource({url:s.uri});o[r]=c.fetchArrayBuffer().then(function(d){return new Uint8Array(d)})}else o[r]=Promise.resolve(n)}return Promise.all(o)}function Ngt(e){let n=new DataView(e.buffer,e.byteOffset),i=8,o=n.getUint32(i,!0);i+=8;let r=n.getUint32(i,!0);i+=8;let s=Go(e,i,o);i+=o;let a=e.subarray(i,i+r);return{json:s,binary:a}}var J9=W3;function P3(e){e=g(e,g.EMPTY_OBJECT),this.shapeTransform=void 0,this.globalTransform=void 0,this.shape=void 0,this.minBounds=void 0,this.maxBounds=void 0,this.dimensions=void 0,this.paddingBefore=void 0,this.paddingAfter=void 0,this.names=void 0,this.types=void 0,this.componentTypes=void 0,this.minimumValues=void 0,this.maximumValues=void 0,this.maximumTileCount=void 0,this._implicitTileset=void 0,this._subtreeCache=new K9}P3.fromUrl=async function(e){let t=Xe.createIfNeeded(e),n=await t.fetchJson();Ugt(n);let i=zgt(n,t);await i.load();let o=n.root,r=o.content.extensions[\"3DTILES_content_voxels\"],s=r.class,a=oi(n,\"3DTILES_metadata\")?n.extensions[\"3DTILES_metadata\"]:n,c=i.schema,d=new X_({metadataJson:a,schema:c}),u=new P3;Hgt(u,d,s);let m=new W_(t,o,c),{shape:p,minBounds:b,maxBounds:f,shapeTransform:x,globalTransform:_}=Dgt(o);u.shape=p,u.minBounds=b,u.maxBounds=f,u.dimensions=h.unpack(r.dimensions),u.shapeTransform=x,u.globalTransform=_,u.maximumTileCount=kgt(d);let C,V;return l(r.padding)&&(C=h.unpack(r.padding.before),V=h.unpack(r.padding.after)),u.paddingBefore=C,u.paddingAfter=V,u._implicitTileset=m,Di.unload(i),u};function kgt(e){if(l(e.tileset))return e.tileset.getPropertyBySemantic(t_.TILESET_TILE_COUNT)}function Ugt(e){let t=e.root;if(!l(t.content))throw new ue(\"Root must have content\");if(!oi(t.content,\"3DTILES_content_voxels\"))throw new ue(\"Root tile content must have 3DTILES_content_voxels extension\");if(!oi(t,\"3DTILES_implicit_tiling\")&&!l(t.implicitTiling))throw new ue(\"Root tile must have implicit tiling\");if(!l(e.schema)&&!l(e.schemaUri)&&!oi(e,\"3DTILES_metadata\"))throw new ue(\"Tileset must have a metadata schema\")}function Dgt(e){let t=e.boundingVolume,n;if(l(e.transform)?n=M.unpack(e.transform):n=M.clone(M.IDENTITY),l(t.box))return Ygt(t.box,n);if(l(t.region))return Bgt(t.region);if(oi(t,\"3DTILES_bounding_volume_cylinder\"))return Ogt(t.extensions[\"3DTILES_bounding_volume_cylinder\"].cylinder,n);throw new ue(\"Only box, region and 3DTILES_bounding_volume_cylinder are supported in Cesium3DTilesVoxelProvider\")}function Bgt(e){let t=e[0],n=e[1],i=e[2],o=e[3],r=e[4],s=e[5],a=M.fromScale(oe.WGS84.radii),c=new h(t,n,r),d=new h(i,o,s);return{shape:Ii.ELLIPSOID,minBounds:c,maxBounds:d,shapeTransform:a,globalTransform:M.clone(M.IDENTITY)}}function Ygt(e,t){let n=Zn.unpack(e),i=M.fromRotationTranslation(n.halfAxes,n.center);return{shape:Ii.BOX,minBounds:h.clone(qf.DefaultMinBounds),maxBounds:h.clone(qf.DefaultMaxBounds),shapeTransform:i,globalTransform:t}}function Ogt(e,t){let n=Zn.unpack(e),i=M.fromRotationTranslation(n.halfAxes,n.center);return{shape:Ii.CYLINDER,minBounds:h.clone($f.DefaultMinBounds),maxBounds:h.clone($f.DefaultMaxBounds),shapeTransform:i,globalTransform:t}}function zgt(e,t){let{schemaUri:n,schema:i}=e;return l(n)?Di.getSchemaLoader({resource:t.getDerivedResource({url:n})}):Di.getSchemaLoader({schema:i})}function Hgt(e,t,n){let{schema:i,statistics:o}=t,r=o?.classes[n],s=i.classes[n].properties,a=Object.entries(s).map(([m,p])=>{let{type:b,componentType:f}=p,x=r?.properties[m].min,_=r?.properties[m].max,C=Kt.getComponentCount(b),V=HTe(x,C),L=HTe(_,C);return{id:m,type:b,componentType:f,minValue:V,maxValue:L}});e.names=a.map(m=>m.id),e.types=a.map(m=>m.type),e.componentTypes=a.map(m=>m.componentType);let c=a.map(m=>m.minValue),d=a.map(m=>m.maxValue),u=c.some(l);e.minimumValues=u?c:void 0,e.maximumValues=u?d:void 0}function HTe(e,t){if(!l(e))return;let n=Array.isArray(e)?e:[e];return Array.from({length:t},(i,o)=>n[o])}async function Kgt(e,t){let n=e.contentUriTemplates[0].getDerivedResource({templateValues:t.getTemplateValues()}),i=e.baseResource.getDerivedResource({url:n.url}),o=await i.fetchArrayBuffer(),r=bf(o);return await J9.fromJson(i,r.jsonPayload,r.binaryPayload,e.metadataSchema)}async function Jgt(e,t){let n=e._implicitTileset,i=e._subtreeCache,o=i.find(t);if(l(o))return o;let r=n.subtreeUriTemplate.getDerivedResource({templateValues:t.getTemplateValues()}),s=n.baseResource.getDerivedResource({url:r.url}),a=await s.fetchArrayBuffer();if(o=i.find(t),l(o))return o;let c=bf(a);return o=await e_.fromSubtreeJson(s,c.jsonPayload,c.binaryPayload,n,t),i.addSubtree(o),o}P3.prototype.requestData=function(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.tileLevel,0),n=g(e.tileX,0),i=g(e.tileY,0),o=g(e.tileZ,0);if(g(e.keyframe,0)!==0)return;let s=this._implicitTileset,a=this.names,c=new P_({subdivisionScheme:s.subdivisionScheme,subtreeLevels:s.subtreeLevels,level:t,x:n,y:i,z:o}),d=c.isSubtreeRoot()&&c.level>0,u=d?c.getParentSubtreeCoordinates():c.getSubtreeCoordinates();return Jgt(this,u).then(function(p){return(d?p.childSubtreeIsAvailableAtCoordinates(c):p.tileIsAvailableAtCoordinates(c))?Kgt(s,c):Promise.reject(\"Tile is not available\")}).then(function(p){return a.map(function(b){return p.metadataTable.getPropertyTypedArray(b)})})};var u7=P3;var BJi=T(S(),1);function m7(e){e=g(e,1),this._radius=g(e,1)}Object.defineProperties(m7.prototype,{radius:{get:function(){return this._radius},set:function(e){this._radius=e}}});m7.prototype.emit=function(e){let t=P.randomBetween(0,P.TWO_PI),n=P.randomBetween(0,this._radius),i=n*Math.cos(t),o=n*Math.sin(t),r=0;e.position=h.fromElements(i,o,r,e.position),e.velocity=h.clone(h.UNIT_Z,e.velocity)};var Q9=m7;var PQi=T(S(),1);var OJi=T(S(),1),h7={CUMULUS:0};h7.validate=function(e){return e===h7.CUMULUS};var fL=Object.freeze(h7);var qJi=T(S(),1);function Wh(e,t){if(e=g(e,g.EMPTY_OBJECT),this._show=g(e.show,!0),this._position=h.clone(g(e.position,h.ZERO)),!l(e.scale)&&l(e.maximumSize))this._maximumSize=h.clone(e.maximumSize),this._scale=new D(this._maximumSize.x,this._maximumSize.y);else{this._scale=D.clone(g(e.scale,new D(20,12)));let n=new h(this._scale.x,this._scale.y,Math.min(this._scale.x,this._scale.y)/1.5);this._maximumSize=h.clone(g(e.maximumSize,n))}this._slice=g(e.slice,-1),this._color=O.clone(g(e.color,O.WHITE)),this._brightness=g(e.brightness,1),this._cloudCollection=t,this._index=-1}var Qgt=Wh.SHOW_INDEX=0,jgt=Wh.POSITION_INDEX=1,qgt=Wh.SCALE_INDEX=2,$gt=Wh.MAXIMUM_SIZE_INDEX=3,ext=Wh.SLICE_INDEX=4,txt=Wh.BRIGHTNESS_INDEX=5,nxt=Wh.COLOR_INDEX=6;Wh.NUMBER_OF_PROPERTIES=7;function rS(e,t){let n=e._cloudCollection;l(n)&&(n._updateCloud(e,t),e._dirty=!0)}Object.defineProperties(Wh.prototype,{show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,rS(this,Qgt))}},position:{get:function(){return this._position},set:function(e){let t=this._position;h.equals(t,e)||(h.clone(e,t),rS(this,jgt))}},scale:{get:function(){return this._scale},set:function(e){let t=this._scale;D.equals(t,e)||(D.clone(e,t),rS(this,qgt))}},maximumSize:{get:function(){return this._maximumSize},set:function(e){let t=this._maximumSize;h.equals(t,e)||(h.clone(e,t),rS(this,$gt))}},color:{get:function(){return this._color},set:function(e){let t=this._color;O.equals(t,e)||(O.clone(e,t),rS(this,nxt))}},slice:{get:function(){return this._slice},set:function(e){this._slice!==e&&(this._slice=e,rS(this,ext))}},brightness:{get:function(){return this._brightness},set:function(e){this._brightness!==e&&(this._brightness=e,rS(this,txt))}}});Wh.prototype._destroy=function(){this._cloudCollection=void 0};var jd=Wh;var qd,v3=new h,ixt={positionHighAndScaleX:0,positionLowAndScaleY:1,packedAttribute0:2,packedAttribute1:3,color:4},oxt={direction:0,positionHighAndScaleX:1,positionLowAndScaleY:2,packedAttribute0:3,packedAttribute1:4,color:5},rxt=jd.SHOW_INDEX,sxt=jd.POSITION_INDEX,axt=jd.SCALE_INDEX,cxt=jd.MAXIMUM_SIZE_INDEX,lxt=jd.SLICE_INDEX,dxt=jd.BRIGHTNESS_INDEX,uxt=jd.NUMBER_OF_PROPERTIES,mxt=jd.COLOR_INDEX;function Ph(e){e=g(e,g.EMPTY_OBJECT),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(uxt),this._noiseTexture=void 0,this._textureSliceWidth=128,this._noiseTextureRows=4,this.noiseDetail=g(e.noiseDetail,16),this.noiseOffset=h.clone(g(e.noiseOffset,h.ZERO)),this._loading=!1,this._ready=!1;let t=this;this._uniforms={u_noiseTexture:function(){return t._noiseTexture},u_noiseTextureDimensions:KTe(t),u_noiseDetail:function(){return t.noiseDetail}},this._vaNoise=void 0,this._spNoise=void 0,this._spCreated=!1,this._sp=void 0,this._rs=void 0,this.show=g(e.show,!0),this._colorCommands=[],this.debugBillboards=g(e.debugBillboards,!1),this._compiledDebugBillboards=!1,this.debugEllipsoids=g(e.debugEllipsoids,!1),this._compiledDebugEllipsoids=!1}function KTe(e){return function(){return v3.x=e._textureSliceWidth,v3.y=e._noiseTextureRows,v3.z=1/e._noiseTextureRows,v3}}Object.defineProperties(Ph.prototype,{length:{get:function(){return p7(this),this._clouds.length}}});function JTe(e){let t=e.length;for(let n=0;n<t;++n)e[n]&&e[n]._destroy()}Ph.prototype.add=function(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.cloudType,fL.CUMULUS),n;return t===fL.CUMULUS&&(n=new jd(e,this),n._index=this._clouds.length,this._clouds.push(n),this._createVertexArray=!0),n};Ph.prototype.remove=function(e){return this.contains(e)?(this._clouds[e._index]=void 0,this._cloudsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0):!1};Ph.prototype.removeAll=function(){JTe(this._clouds),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!0};function p7(e){if(e._cloudsRemoved){e._cloudsRemoved=!1;let t=[],n=e._clouds,i=n.length;for(let o=0,r=0;o<i;++o){let s=n[o];l(s)&&(n._index=r++,t.push(s))}e._clouds=t}}Ph.prototype._updateCloud=function(e,t){e._dirty||(this._cloudsToUpdate[this._cloudsToUpdateIndex++]=e),++this._propertiesChanged[t]};Ph.prototype.contains=function(e){return l(e)&&e._cloudCollection===this};Ph.prototype.get=function(e){return p7(this),this._clouds[e]};var hxt=new Float32Array([-1,-1,1,-1,1,1,-1,1]),fxt=new Uint16Array([0,1,2,0,2,3]);function pxt(e){let t=pt.createVertexBuffer({context:e,typedArray:hxt,usage:Me.STATIC_DRAW}),n=pt.createIndexBuffer({context:e,typedArray:fxt,usage:Me.STATIC_DRAW,indexDatatype:Ae.UNSIGNED_SHORT}),i=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:Q.FLOAT}];return new ti({context:e,attributes:i,indexBuffer:n})}var b7;function bxt(e){let n=e.cache.cloudCollection_indexBufferBatched;if(l(n))return n;let i=16384*6-6,o=new Uint16Array(i);for(let r=0,s=0;r<i;r+=6,s+=4)o[r]=s,o[r+1]=s+1,o[r+2]=s+2,o[r+3]=s,o[r+4]=s+2,o[r+5]=s+3;return n=pt.createIndexBuffer({context:e,typedArray:o,usage:Me.STATIC_DRAW,indexDatatype:Ae.UNSIGNED_SHORT}),n.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferBatched=n,n}function yxt(e){let t=e.cache.cloudCollection_indexBufferInstanced;return l(t)||(t=pt.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:Me.STATIC_DRAW,indexDatatype:Ae.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferInstanced=t),t}function gxt(e){let t=e.cache.cloudCollection_vertexBufferInstanced;return l(t)||(t=pt.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:Me.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_vertexBufferInstanced=t),t}function xxt(e,t,n){let i=[{index:qd.positionHighAndScaleX,componentsPerAttribute:4,componentDatatype:Q.FLOAT,usage:Me.STATIC_DRAW},{index:qd.positionLowAndScaleY,componentsPerAttribute:4,componentDatatype:Q.FLOAT,usage:Me.STATIC_DRAW},{index:qd.packedAttribute0,componentsPerAttribute:4,componentDatatype:Q.FLOAT,usage:Me.STATIC_DRAW},{index:qd.packedAttribute1,componentsPerAttribute:4,componentDatatype:Q.FLOAT,usage:Me.STATIC_DRAW},{index:qd.color,componentsPerAttribute:4,componentDatatype:Q.UNSIGNED_BYTE,normalize:!0,usage:Me.STATIC_DRAW}];n&&i.push({index:qd.direction,componentsPerAttribute:2,componentDatatype:Q.FLOAT,vertexBuffer:gxt(e)});let o=n?t:4*t;return new xp(e,i,o,n)}var f7=new Yn;function QTe(e,t,n,i){let o,r=n[qd.positionHighAndScaleX],s=n[qd.positionLowAndScaleY],a=i.position;Yn.fromCartesian(a,f7);let c=i.scale,d=f7.high,u=f7.low;e._instanced?(o=i._index,r(o,d.x,d.y,d.z,c.x),s(o,u.x,u.y,u.z,c.y)):(o=i._index*4,r(o+0,d.x,d.y,d.z,c.x),r(o+1,d.x,d.y,d.z,c.x),r(o+2,d.x,d.y,d.z,c.x),r(o+3,d.x,d.y,d.z,c.x),s(o+0,u.x,u.y,u.z,c.y),s(o+1,u.x,u.y,u.z,c.y),s(o+2,u.x,u.y,u.z,c.y),s(o+3,u.x,u.y,u.z,c.y))}function jTe(e,t,n,i){let o,r=n[qd.packedAttribute0],s=i.show,a=i.brightness;e._instanced?(o=i._index,r(o,s,a,0,0)):(o=i._index*4,r(o+0,s,a,0,0),r(o+1,s,a,1,0),r(o+2,s,a,1,1),r(o+3,s,a,0,1))}function qTe(e,t,n,i){let o,r=n[qd.packedAttribute1],s=i.maximumSize,a=i.slice;e._instanced?(o=i._index,r(o,s.x,s.y,s.z,a)):(o=i._index*4,r(o+0,s.x,s.y,s.z,a),r(o+1,s.x,s.y,s.z,a),r(o+2,s.x,s.y,s.z,a),r(o+3,s.x,s.y,s.z,a))}function $Te(e,t,n,i){let o,r=n[qd.color],s=i.color,a=O.floatToByte(s.red),c=O.floatToByte(s.green),d=O.floatToByte(s.blue),u=O.floatToByte(s.alpha);e._instanced?(o=i._index,r(o,a,c,d,u)):(o=i._index*4,r(o+0,a,c,d,u),r(o+1,a,c,d,u),r(o+2,a,c,d,u),r(o+3,a,c,d,u))}function _xt(e,t,n,i){QTe(e,t,n,i),jTe(e,t,n,i),qTe(e,t,n,i),$Te(e,t,n,i)}function Txt(e,t,n,i){let o=e,r=o._textureSliceWidth,s=o._noiseTextureRows,a=t.context;o._vaNoise=pxt(a),o._spNoise=Ht.fromCache({context:a,vertexShaderSource:n,fragmentShaderSource:i,attributeLocations:{position:0}});let c=o.noiseDetail,d=o.noiseOffset;o._noiseTexture=new Ft({context:a,width:r*r/s,height:r*s,pixelDatatype:Qe.UNSIGNED_BYTE,pixelFormat:at.RGBA,sampler:new mn({wrapS:En.REPEAT,wrapT:En.REPEAT,minificationFilter:dn.NEAREST,magnificationFilter:yi.NEAREST})});let u=new iu({vertexArray:o._vaNoise,shaderProgram:o._spNoise,outputTexture:o._noiseTexture,uniformMap:{u_noiseTextureDimensions:KTe(o),u_noiseDetail:function(){return c},u_noiseOffset:function(){return d}},persists:!1,owner:e,postExecute:function(m){o._ready=!0,o._loading=!1}});t.commandList.push(u),o._loading=!0}function Sxt(e,t){let n=e,i=t.context;n._createVertexArray=!1,n._vaf=n._vaf&&n._vaf.destroy();let o=e._clouds,r=o.length;if(r>0){n._vaf=xxt(i,r,n._instanced);let s=n._vaf.writers,a;for(a=0;a<r;++a){let c=o[a];_xt(e,t,s,c)}n._vaf.commit(b7(i))}}var Cxt=[];function Vxt(e,t){let n=t.context,i=e,r=i._clouds.length,s=i._cloudsToUpdate,a=i._cloudsToUpdateIndex,c=i._propertiesChanged,d=Cxt;d.length=0,(c[sxt]||c[axt])&&d.push(QTe),(c[rxt]||c[dxt])&&d.push(jTe),(c[cxt]||c[lxt])&&d.push(qTe),c[mxt]&&d.push($Te);let u=d.length,m=i._vaf.writers,p,b,f;if(a/r>.1){for(p=0;p<a;++p)for(b=s[p],b._dirty=!1,f=0;f<u;++f)d[f](e,t,m,b);i._vaf.commit(b7(n))}else{for(p=0;p<a;++p){for(b=s[p],b._dirty=!1,f=0;f<u;++f)d[f](e,t,m,b);i._instanced?i._vaf.subCommit(b._index,1):i._vaf.subCommit(b._index*4,4)}i._vaf.endSubCommits()}i._cloudsToUpdateIndex=0}function Lxt(e,t,n,i){let o=t.context,r=e,s=new Ue({defines:[],sources:[n]});r._instanced&&s.defines.push(\"INSTANCED\");let a=new Ue({defines:[],sources:[i]});r.debugBillboards&&a.defines.push(\"DEBUG_BILLBOARDS\"),r.debugEllipsoids&&a.defines.push(\"DEBUG_ELLIPSOIDS\"),r._sp=Ht.replaceCache({context:o,shaderProgram:r._sp,vertexShaderSource:s,fragmentShaderSource:a,attributeLocations:qd}),r._rs=Ne.fromCache({depthTest:{enabled:!0,func:ne.LESS},depthMask:!1,blending:un.ALPHA_BLEND}),r._spCreated=!0,r._compiledDebugBillboards=r.debugBillboards,r._compiledDebugEllipsoids=r.debugEllipsoids}function Zxt(e,t){let n=e,i=t.passes,o=n._uniforms,r=t.commandList;if(i.render){let s=n._colorCommands,a=n._vaf.va,c=a.length;s.length=c;for(let d=0;d<c;d++){let u=s[d];l(u)||(u=s[d]=new je),u.pass=Ze.TRANSLUCENT,u.owner=e,u.uniformMap=o,u.count=a[d].indicesCount,u.vertexArray=a[d].va,u.shaderProgram=n._sp,u.renderState=n._rs,n._instanced&&(u.count=6,u.instanceCount=n._clouds.length),r.push(u)}}}Ph.prototype.update=function(e){if(p7(this),!this.show)return;let t=this.debugBillboards||this.debugEllipsoids;this._ready=t?!0:l(this._noiseTexture),!this._ready&&!this._loading&&!t&&Txt(this,e,P9,W9),this._instanced=e.context.instancedArrays,qd=this._instanced?oxt:ixt,b7=this._instanced?yxt:bxt;let i=this._clouds.length,o=this._cloudsToUpdate,r=this._cloudsToUpdateIndex;this._createVertexArray?Sxt(this,e):r>0&&Vxt(this,e),r>i*1.5&&(o.length=i),!(!l(this._vaf)||!l(this._vaf.va)||!this._ready&!t)&&((!this._spCreated||this.debugBillboards!==this._compiledDebugBillboards||this.debugEllipsoids!==this._compiledDebugEllipsoids)&&Lxt(this,e,I9,X9),Zxt(this,e))};Ph.prototype.isDestroyed=function(){return!1};Ph.prototype.destroy=function(){return this._noiseTexture=this._noiseTexture&&this._noiseTexture.destroy(),this._sp=this._sp&&this._sp.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),JTe(this._clouds),me(this)};var y7=Ph;var MQi=T(S(),1);var Rxt=P.toRadians(30);function g7(e){this._angle=g(e,Rxt)}Object.defineProperties(g7.prototype,{angle:{get:function(){return this._angle},set:function(e){this._angle=e}}});g7.prototype.emit=function(e){let t=Math.tan(this._angle),n=P.randomBetween(0,P.TWO_PI),i=P.randomBetween(0,t),o=i*Math.cos(n),r=i*Math.sin(n),s=1;e.velocity=h.fromElements(o,r,s,e.velocity),h.normalize(e.velocity,e.velocity),e.position=h.clone(h.ZERO,e.position)};var x7=g7;var BQi=T(S(),1);function j9(e){e=g(e,g.EMPTY_OBJECT);let t=e.attributeName,n=e.perInstanceAttribute;l(n)||(n=!1);let i=g(e.glslDatatype,\"vec3\"),o=`v_${t}`,r;if(t===\"normal\"||t===\"tangent\"||t===\"bitangent\")r=`vec4 getColor() { return vec4((${o} + vec3(1.0)) * 0.5, 1.0); } `;else switch(t===\"st\"&&(i=\"vec2\"),i){case\"float\":r=`vec4 getColor() { return vec4(vec3(${o}), 1.0); } `;break;case\"vec2\":r=`vec4 getColor() { return vec4(${o}, 0.0, 1.0); } `;break;case\"vec3\":r=`vec4 getColor() { return vec4(${o}, 1.0); } `;break;case\"vec4\":r=`vec4 getColor() { return ${o}; } `;break}let s=`in vec3 position3DHigh; in vec3 position3DLow; in float batchId; ${n?\"\":`in ${i} ${t}; `}out ${i} ${o}; void main() { vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow); ${n?`${o} = czm_batchTable_${t}(batchId); `:`${o} = ${t}; `}gl_Position = czm_modelViewProjectionRelativeToEye * p; }`,a=`in ${i} ${o}; ${r} void main() { out_FragColor = getColor(); }`;this.material=void 0,this.translucent=g(e.translucent,!1),this._vertexShaderSource=g(e.vertexShaderSource,s),this._fragmentShaderSource=g(e.fragmentShaderSource,a),this._renderState=eo.getDefaultRenderState(!1,!1,e.renderState),this._closed=g(e.closed,!1),this._attributeName=t,this._glslDatatype=i}Object.defineProperties(j9.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}});j9.prototype.getFragmentShaderSource=eo.prototype.getFragmentShaderSource;j9.prototype.isTranslucent=eo.prototype.isTranslucent;j9.prototype.getRenderState=eo.prototype.getRenderState;var _7=j9;var n4i=T(S(),1);function w3(e){e=g(e,g.EMPTY_OBJECT),this.length=g(e.length,1e7),this._length=void 0,this.width=g(e.width,2),this._width=void 0,this.show=g(e.show,!0),this.modelMatrix=M.clone(g(e.modelMatrix,M.IDENTITY)),this._modelMatrix=new M,this.id=e.id,this._id=void 0,this._primitive=void 0}w3.prototype.update=function(e){if(this.show){if(!l(this._primitive)||!M.equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=M.clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,l(this._primitive)&&this._primitive.destroy(),this.modelMatrix[12]===0&&this.modelMatrix[13]===0&&this.modelMatrix[14]===0&&(this.modelMatrix[14]=.01);let t=new Vt({geometry:new N0({positions:[h.ZERO,h.UNIT_X],width:this.width,vertexFormat:Br.VERTEX_FORMAT,colors:[O.RED,O.RED],arcType:$t.NONE}),modelMatrix:M.multiplyByUniformScale(this.modelMatrix,this.length,new M),id:this.id,pickPrimitive:this}),n=new Vt({geometry:new N0({positions:[h.ZERO,h.UNIT_Y],width:this.width,vertexFormat:Br.VERTEX_FORMAT,colors:[O.GREEN,O.GREEN],arcType:$t.NONE}),modelMatrix:M.multiplyByUniformScale(this.modelMatrix,this.length,new M),id:this.id,pickPrimitive:this}),i=new Vt({geometry:new N0({positions:[h.ZERO,h.UNIT_Z],width:this.width,vertexFormat:Br.VERTEX_FORMAT,colors:[O.BLUE,O.BLUE],arcType:$t.NONE}),modelMatrix:M.multiplyByUniformScale(this.modelMatrix,this.length,new M),id:this.id,pickPrimitive:this});this._primitive=new Rn({geometryInstances:[t,n,i],appearance:new Br,asynchronous:!1})}this._primitive.update(e)}};w3.prototype.isDestroyed=function(){return!1};w3.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};var q9=w3;var a4i=T(S(),1);function Gxt(e){this.direction=h.clone(e.direction),this.color=O.clone(g(e.color,O.WHITE)),this.intensity=g(e.intensity,1)}var T7=Gxt;var _4i=T(S(),1);var l4i=T(S(),1),$9=`in vec3 v_positionMC; in vec3 v_positionEC; in vec2 v_st; void main() { czm_materialInput materialInput; vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0))); #ifdef FACE_FORWARD normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC); #endif materialInput.s = v_st.s; materialInput.st = v_st; materialInput.str = vec3(v_st, 0.0); // Convert tangent space material normal to eye space materialInput.normalEC = normalEC; materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC); // Convert view vector to world space vec3 positionToEyeEC = -v_positionEC; materialInput.positionToEyeEC = positionToEyeEC; czm_material material = czm_getMaterial(materialInput); #ifdef FLAT out_FragColor = vec4(material.diffuse + material.emission, material.alpha); #else out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC); #endif } `;var u4i=T(S(),1),eA=`in vec3 position3DHigh; in vec3 position3DLow; in vec2 st; in float batchId; out vec3 v_positionMC; out vec3 v_positionEC; out vec2 v_st; void main() { vec4 p = czm_computePosition(); v_positionMC = position3DHigh + position3DLow; // position in model coordinates v_positionEC = (czm_modelViewRelativeToEye * p).xyz; // position in eye coordinates v_st = st; gl_Position = czm_modelViewProjectionRelativeToEye * p; } `;function sS(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.translucent,!0),n=g(e.aboveGround,!1);this.material=l(e.material)?e.material:ki.fromType(ki.ColorType),this.translucent=g(e.translucent,!0),this._vertexShaderSource=g(e.vertexShaderSource,eA),this._fragmentShaderSource=g(e.fragmentShaderSource,$9),this._renderState=eo.getDefaultRenderState(t,!n,e.renderState),this._closed=!1,this._flat=g(e.flat,!1),this._faceForward=g(e.faceForward,n),this._aboveGround=n}Object.defineProperties(sS.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return sS.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}});sS.VERTEX_FORMAT=Pe.POSITION_AND_ST;sS.prototype.getFragmentShaderSource=eo.prototype.getFragmentShaderSource;sS.prototype.isTranslucent=eo.prototype.isTranslucent;sS.prototype.getRenderState=eo.prototype.getRenderState;var S7=sS;var G4i=T(S(),1);function ql(e){this._scene=e.scene,this.samplingWindow=g(e.samplingWindow,ql.defaultSettings.samplingWindow),this.quietPeriod=g(e.quietPeriod,ql.defaultSettings.quietPeriod),this.warmupPeriod=g(e.warmupPeriod,ql.defaultSettings.warmupPeriod),this.minimumFrameRateDuringWarmup=g(e.minimumFrameRateDuringWarmup,ql.defaultSettings.minimumFrameRateDuringWarmup),this.minimumFrameRateAfterWarmup=g(e.minimumFrameRateAfterWarmup,ql.defaultSettings.minimumFrameRateAfterWarmup),this._lowFrameRate=new ge,this._nominalFrameRate=new ge,this._frameTimes=[],this._needsQuietPeriod=!0,this._quietPeriodEndTime=0,this._warmupPeriodEndTime=0,this._frameRateIsLow=!1,this._lastFramesPerSecond=void 0,this._pauseCount=0;let t=this;this._preUpdateRemoveListener=this._scene.preUpdate.addEventListener(function(o,r){Ext(t,r)}),this._hiddenPropertyName=document.hidden!==void 0?\"hidden\":document.mozHidden!==void 0?\"mozHidden\":document.msHidden!==void 0?\"msHidden\":document.webkitHidden!==void 0?\"webkitHidden\":void 0;let n=document.hidden!==void 0?\"visibilitychange\":document.mozHidden!==void 0?\"mozvisibilitychange\":document.msHidden!==void 0?\"msvisibilitychange\":document.webkitHidden!==void 0?\"webkitvisibilitychange\":void 0;function i(){Xxt(t)}this._visibilityChangeRemoveListener=void 0,l(n)&&(document.addEventListener(n,i,!1),this._visibilityChangeRemoveListener=function(){document.removeEventListener(n,i,!1)})}ql.defaultSettings={samplingWindow:5,quietPeriod:2,warmupPeriod:5,minimumFrameRateDuringWarmup:4,minimumFrameRateAfterWarmup:8};ql.fromScene=function(e){return(!l(e._frameRateMonitor)||e._frameRateMonitor.isDestroyed())&&(e._frameRateMonitor=new ql({scene:e})),e._frameRateMonitor};Object.defineProperties(ql.prototype,{scene:{get:function(){return this._scene}},lowFrameRate:{get:function(){return this._lowFrameRate}},nominalFrameRate:{get:function(){return this._nominalFrameRate}},lastFramesPerSecond:{get:function(){return this._lastFramesPerSecond}}});ql.prototype.pause=function(){++this._pauseCount,this._pauseCount===1&&(this._frameTimes.length=0,this._lastFramesPerSecond=void 0)};ql.prototype.unpause=function(){--this._pauseCount,this._pauseCount<=0&&(this._pauseCount=0,this._needsQuietPeriod=!0)};ql.prototype.isDestroyed=function(){return!1};ql.prototype.destroy=function(){return this._preUpdateRemoveListener(),l(this._visibilityChangeRemoveListener)&&this._visibilityChangeRemoveListener(),me(this)};function Ext(e,t){if(e._pauseCount>0)return;let n=fi();if(e._needsQuietPeriod)e._needsQuietPeriod=!1,e._frameTimes.length=0,e._quietPeriodEndTime=n+e.quietPeriod/Hn.SECONDS_PER_MILLISECOND,e._warmupPeriodEndTime=e._quietPeriodEndTime+(e.warmupPeriod+e.samplingWindow)/Hn.SECONDS_PER_MILLISECOND;else"
}