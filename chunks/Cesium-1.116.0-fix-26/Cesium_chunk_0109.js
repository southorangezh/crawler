{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 109,
    "total_chunks": 194,
    "chunk_size": 63659,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.712Z"
  },
  "content": "on the document object in the <Major>.<Minor> version format.\");let i=t._documentPacket;l(e.name)&&(i.name=e.name);let o=e.clock;if(l(o)){let r=i.clock;l(r)?(r.interval=g(o.interval,r.interval),r.currentTime=g(o.currentTime,r.currentTime),r.range=g(o.range,r.range),r.step=g(o.step,r.step),r.multiplier=g(o.multiplier,r.multiplier)):i.clock={interval:o.interval,currentTime:o.currentTime,range:o.range,step:o.step,multiplier:o.multiplier}}}function wje(e,t,n,i){let o=t.ellipse;if(!l(o))return;let r=ar(o.interval),s=e.ellipse;l(s)||(e.ellipse=s=new Ex),xe(Boolean,s,\"show\",o.show,r,i,n),xe(Number,s,\"semiMajorAxis\",o.semiMajorAxis,r,i,n),xe(Number,s,\"semiMinorAxis\",o.semiMinorAxis,r,i,n),xe(Number,s,\"height\",o.height,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(Number,s,\"extrudedHeight\",o.extrudedHeight,r,i,n),xe(Je,s,\"extrudedHeightReference\",o.extrudedHeightReference,r,i,n),xe(Au,s,\"rotation\",o.rotation,r,i,n),xe(Au,s,\"stRotation\",o.stRotation,r,i,n),xe(Number,s,\"granularity\",o.granularity,r,i,n),xe(Boolean,s,\"fill\",o.fill,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(Boolean,s,\"outline\",o.outline,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(Number,s,\"numberOfVerticalLines\",o.numberOfVerticalLines,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n),xe(Un,s,\"classificationType\",o.classificationType,r,i,n),xe(Number,s,\"zIndex\",o.zIndex,r,i,n)}function Fje(e,t,n,i){let o=t.ellipsoid;if(!l(o))return;let r=ar(o.interval),s=e.ellipsoid;l(s)||(e.ellipsoid=s=new Xx),xe(Boolean,s,\"show\",o.show,r,i,n),xe(h,s,\"radii\",o.radii,r,i,n),xe(h,s,\"innerRadii\",o.innerRadii,r,i,n),xe(Number,s,\"minimumClock\",o.minimumClock,r,i,n),xe(Number,s,\"maximumClock\",o.maximumClock,r,i,n),xe(Number,s,\"minimumCone\",o.minimumCone,r,i,n),xe(Number,s,\"maximumCone\",o.maximumCone,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(Boolean,s,\"fill\",o.fill,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(Boolean,s,\"outline\",o.outline,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(Number,s,\"stackPartitions\",o.stackPartitions,r,i,n),xe(Number,s,\"slicePartitions\",o.slicePartitions,r,i,n),xe(Number,s,\"subdivisions\",o.subdivisions,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n)}function Aje(e,t,n,i){let o=t.label;if(!l(o))return;let r=ar(o.interval),s=e.label;l(s)||(e.label=s=new Zm),xe(Boolean,s,\"show\",o.show,r,i,n),xe(String,s,\"text\",o.text,r,i,n),xe(String,s,\"font\",o.font,r,i,n),xe(wo,s,\"style\",o.style,r,i,n),xe(Number,s,\"scale\",o.scale,r,i,n),xe(Boolean,s,\"showBackground\",o.showBackground,r,i,n),xe(O,s,\"backgroundColor\",o.backgroundColor,r,i,n),xe(D,s,\"backgroundPadding\",o.backgroundPadding,r,i,n),xe(D,s,\"pixelOffset\",o.pixelOffset,r,i,n),xe(h,s,\"eyeOffset\",o.eyeOffset,r,i,n),xe(ui,s,\"horizontalOrigin\",o.horizontalOrigin,r,i,n),xe(Wn,s,\"verticalOrigin\",o.verticalOrigin,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(O,s,\"fillColor\",o.fillColor,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(At,s,\"translucencyByDistance\",o.translucencyByDistance,r,i,n),xe(At,s,\"pixelOffsetScaleByDistance\",o.pixelOffsetScaleByDistance,r,i,n),xe(At,s,\"scaleByDistance\",o.scaleByDistance,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n),xe(Number,s,\"disableDepthTestDistance\",o.disableDepthTestDistance,r,i,n)}function Mje(e,t,n,i){let o=t.model;if(!l(o))return;let r=ar(o.interval),s=e.model;l(s)||(e.model=s=new Ep),xe(Boolean,s,\"show\",o.show,r,i,n),xe(hP.default,s,\"uri\",o.gltf,r,i,n),xe(Number,s,\"scale\",o.scale,r,i,n),xe(Number,s,\"minimumPixelSize\",o.minimumPixelSize,r,i,n),xe(Number,s,\"maximumScale\",o.maximumScale,r,i,n),xe(Boolean,s,\"incrementallyLoadTextures\",o.incrementallyLoadTextures,r,i,n),xe(Boolean,s,\"runAnimations\",o.runAnimations,r,i,n),xe(Boolean,s,\"clampAnimations\",o.clampAnimations,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(O,s,\"silhouetteColor\",o.silhouetteColor,r,i,n),xe(Number,s,\"silhouetteSize\",o.silhouetteSize,r,i,n),xe(O,s,\"color\",o.color,r,i,n),xe(ac,s,\"colorBlendMode\",o.colorBlendMode,r,i,n),xe(Number,s,\"colorBlendAmount\",o.colorBlendAmount,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n);let a,c,d=o.nodeTransformations;if(l(d))if(Array.isArray(d))for(a=0,c=d.length;a<c;++a)Cue(s,d[a],r,i,n);else Cue(s,d,r,i,n);let u=o.articulations;if(l(u))if(Array.isArray(u))for(a=0,c=u.length;a<c;++a)Vue(s,u[a],r,i,n);else Vue(s,u,r,i,n)}function Cue(e,t,n,i,o){let r=ar(t.interval);l(n)&&(l(r)?r=Sn.intersect(r,n,Y_):r=n);let s=e.nodeTransformations,a=Object.keys(t);for(let c=0,d=a.length;c<d;++c){let u=a[c];if(u===\"interval\")continue;let m=t[u];if(!l(m))continue;l(s)||(e.nodeTransformations=s=new Ll),s.hasProperty(u)||s.addProperty(u);let p=s[u];l(p)||(s[u]=p=new Ix),xe(h,p,\"translation\",m.translation,r,i,o),xe(Fe,p,\"rotation\",m.rotation,r,i,o),xe(h,p,\"scale\",m.scale,r,i,o)}}function Vue(e,t,n,i,o){let r=ar(t.interval);l(n)&&(l(r)?r=Sn.intersect(r,n,Y_):r=n);let s=e.articulations,a=Object.keys(t);for(let c=0,d=a.length;c<d;++c){let u=a[c];if(u===\"interval\")continue;let m=t[u];l(m)&&(l(s)||(e.articulations=s=new Ll),s.hasProperty(u)||s.addProperty(u),xe(Number,s,u,m,r,i,o))}}function Nje(e,t,n,i){let o=t.path;if(!l(o))return;let r=ar(o.interval),s=e.path;l(s)||(e.path=s=new Xp),xe(Boolean,s,\"show\",o.show,r,i,n),xe(Number,s,\"leadTime\",o.leadTime,r,i,n),xe(Number,s,\"trailTime\",o.trailTime,r,i,n),xe(Number,s,\"width\",o.width,r,i,n),xe(Number,s,\"resolution\",o.resolution,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n)}function kje(e,t,n,i){let o=t.point;if(!l(o))return;let r=ar(o.interval),s=e.point;l(s)||(e.point=s=new Px),xe(Boolean,s,\"show\",o.show,r,i,n),xe(Number,s,\"pixelSize\",o.pixelSize,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(O,s,\"color\",o.color,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(At,s,\"scaleByDistance\",o.scaleByDistance,r,i,n),xe(At,s,\"translucencyByDistance\",o.translucencyByDistance,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n),xe(Number,s,\"disableDepthTestDistance\",o.disableDepthTestDistance,r,i,n)}function mP(e){this.polygon=e,this._definitionChanged=new ge}Object.defineProperties(mP.prototype,{isConstant:{get:function(){let e=this.polygon._positions,t=this.polygon._holes;return(!l(e)||e.isConstant)&&(!l(t)||t.isConstant)}},definitionChanged:{get:function(){return this._definitionChanged}}});mP.prototype.getValue=function(e,t){let n;l(this.polygon._positions)&&(n=this.polygon._positions.getValue(e));let i;return l(this.polygon._holes)&&(i=this.polygon._holes.getValue(e),l(i)&&(i=i.map(function(o){return new Ra(o)}))),l(t)?(t.positions=n,t.holes=i,t):new Ra(n,i)};mP.prototype.equals=function(e){return this===e||e instanceof mP&&K.equals(this.polygon._positions,e.polygon._positions)&&K.equals(this.polygon._holes,e.polygon._holes)};function Uje(e,t,n,i){let o=t.polygon;if(!l(o))return;let r=ar(o.interval),s=e.polygon;l(s)||(e.polygon=s=new Rm),xe(Boolean,s,\"show\",o.show,r,i,n),fP(s,\"_positions\",o.positions,n),Zje(s,\"_holes\",o.holes,n),(l(s._positions)||l(s._holes))&&(s.hierarchy=new mP(s)),xe(Number,s,\"height\",o.height,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(Number,s,\"extrudedHeight\",o.extrudedHeight,r,i,n),xe(Je,s,\"extrudedHeightReference\",o.extrudedHeightReference,r,i,n),xe(Au,s,\"stRotation\",o.stRotation,r,i,n),xe(Number,s,\"granularity\",o.granularity,r,i,n),xe(Boolean,s,\"fill\",o.fill,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(Boolean,s,\"outline\",o.outline,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(Boolean,s,\"perPositionHeight\",o.perPositionHeight,r,i,n),xe(Boolean,s,\"closeTop\",o.closeTop,r,i,n),xe(Boolean,s,\"closeBottom\",o.closeBottom,r,i,n),xe($t,s,\"arcType\",o.arcType,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n),xe(Un,s,\"classificationType\",o.classificationType,r,i,n),xe(Number,s,\"zIndex\",o.zIndex,r,i,n)}function Dje(e){return e?$t.GEODESIC:$t.NONE}function Bje(e,t,n,i){let o=t.polyline;if(!l(o))return;let r=ar(o.interval),s=e.polyline;if(l(s)||(e.polyline=s=new ic),xe(Boolean,s,\"show\",o.show,r,i,n),fP(s,\"positions\",o.positions,n),xe(Number,s,\"width\",o.width,r,i,n),xe(Number,s,\"granularity\",o.granularity,r,i,n),Rd(s,\"material\",o.material,r,i,n),Rd(s,\"depthFailMaterial\",o.depthFailMaterial,r,i,n),xe($t,s,\"arcType\",o.arcType,r,i,n),xe(Boolean,s,\"clampToGround\",o.clampToGround,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n),xe(Un,s,\"classificationType\",o.classificationType,r,i,n),xe(Number,s,\"zIndex\",o.zIndex,r,i,n),l(o.followSurface)&&!l(o.arcType)){let a={};xe(Boolean,a,\"followSurface\",o.followSurface,r,i,n),s.arcType=sje(a.followSurface,Dje)}}function Yje(e,t,n,i){let o=t.polylineVolume;if(!l(o))return;let r=ar(o.interval),s=e.polylineVolume;l(s)||(e.polylineVolume=s=new vx),fP(s,\"positions\",o.positions,n),Rje(s,\"shape\",o.shape,n),xe(Boolean,s,\"show\",o.show,r,i,n),xe(Gi,s,\"cornerType\",o.cornerType,r,i,n),xe(Boolean,s,\"fill\",o.fill,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(Boolean,s,\"outline\",o.outline,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(Number,s,\"granularity\",o.granularity,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n)}function Oje(e,t,n,i){let o=t.rectangle;if(!l(o))return;let r=ar(o.interval),s=e.rectangle;l(s)||(e.rectangle=s=new Gm),xe(Boolean,s,\"show\",o.show,r,i,n),xe(le,s,\"coordinates\",o.coordinates,r,i,n),xe(Number,s,\"height\",o.height,r,i,n),xe(Je,s,\"heightReference\",o.heightReference,r,i,n),xe(Number,s,\"extrudedHeight\",o.extrudedHeight,r,i,n),xe(Je,s,\"extrudedHeightReference\",o.extrudedHeightReference,r,i,n),xe(Au,s,\"rotation\",o.rotation,r,i,n),xe(Au,s,\"stRotation\",o.stRotation,r,i,n),xe(Number,s,\"granularity\",o.granularity,r,i,n),xe(Boolean,s,\"fill\",o.fill,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(Boolean,s,\"outline\",o.outline,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n),xe(Un,s,\"classificationType\",o.classificationType,r,i,n),xe(Number,s,\"zIndex\",o.zIndex,r,i,n)}function zje(e,t,n,i){let o=t.tileset;if(!l(o))return;let r=ar(o.interval),s=e.tileset;l(s)||(e.tileset=s=new Wx),xe(Boolean,s,\"show\",o.show,r,i,n),xe(hP.default,s,\"uri\",o.uri,r,i,n),xe(Number,s,\"maximumScreenSpaceError\",o.maximumScreenSpaceError,r,i,n)}function Hje(e,t,n,i){let o=t.wall;if(!l(o))return;let r=ar(o.interval),s=e.wall;l(s)||(e.wall=s=new Ip),xe(Boolean,s,\"show\",o.show,r,i,n),fP(s,\"positions\",o.positions,n),_ue(s,\"minimumHeights\",o.minimumHeights,n),_ue(s,\"maximumHeights\",o.maximumHeights,n),xe(Number,s,\"granularity\",o.granularity,r,i,n),xe(Boolean,s,\"fill\",o.fill,r,i,n),Rd(s,\"material\",o.material,r,i,n),xe(Boolean,s,\"outline\",o.outline,r,i,n),xe(O,s,\"outlineColor\",o.outlineColor,r,i,n),xe(Number,s,\"outlineWidth\",o.outlineWidth,r,i,n),xe(_n,s,\"shadows\",o.shadows,r,i,n),xe(It,s,\"distanceDisplayCondition\",o.distanceDisplayCondition,r,i,n)}function Lue(e,t,n,i,o){let r=e.id;if(l(r)||(r=Bn()),UK=r,!l(o._version)&&r!==\"document\")throw new ue(\"The first CZML packet is required to be the document object.\");if(e.delete===!0)t.removeById(r);else if(r===\"document\")vje(e,o);else{let s=t.getOrCreateEntity(r),a=e.parent;l(a)&&(s.parent=t.getOrCreateEntity(a));for(let c=n.length-1;c>-1;c--)n[c](s,e,t,i)}UK=void 0}function Kje(e){let t,n=e._documentPacket.clock;if(!l(n)){if(!l(e._clock)){let o=e._entityCollection.computeAvailability();if(!o.start.equals(Be.MINIMUM_VALUE)){let r=o.start,s=o.stop,a=te.secondsDifference(s,r),c=Math.round(a/120);return t=new nh,t.startTime=te.clone(r),t.stopTime=te.clone(s),t.clockRange=vr.LOOP_STOP,t.multiplier=c,t.currentTime=te.clone(r),t.clockStep=mo.SYSTEM_CLOCK_MULTIPLIER,e._clock=t,!0}}return!1}l(e._clock)?t=e._clock.clone():(t=new nh,t.startTime=Be.MINIMUM_VALUE.clone(),t.stopTime=Be.MAXIMUM_VALUE.clone(),t.currentTime=Be.MINIMUM_VALUE.clone(),t.clockRange=vr.LOOP_STOP,t.clockStep=mo.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=1);let i=ar(n.interval);return l(i)&&(t.startTime=i.start,t.stopTime=i.stop),l(n.currentTime)&&(t.currentTime=te.fromIso8601(n.currentTime)),l(n.range)&&(t.clockRange=g(vr[n.range],vr.LOOP_STOP)),l(n.step)&&(t.clockStep=g(mo[n.step],mo.SYSTEM_CLOCK_MULTIPLIER)),l(n.multiplier)&&(t.multiplier=n.multiplier),t.equals(e._clock)?!1:(e._clock=t.clone(e._clock),!0)}function Eue(e,t,n,i){n=g(n,g.EMPTY_OBJECT);let o=t,r=n.sourceUri,s=n.credit;if(typeof s==\"string\"&&(s=new Zt(s)),e._credit=s,typeof t==\"string\"||t instanceof Xe){t=Xe.createIfNeeded(t),o=t.fetchJson(),r=g(r,t.clone());let a=e._resourceCredits,c=t.credits;if(l(c)){let d=c.length;for(let u=0;u<d;u++)a.push(c[u])}}return r=Xe.createIfNeeded(r),Pr.setLoading(e,!0),Promise.resolve(o).then(function(a){return Jje(e,a,r,i)}).catch(function(a){return Pr.setLoading(e,!1),e._error.raiseEvent(e,a),console.log(a),Promise.reject(a)})}function Jje(e,t,n,i){Pr.setLoading(e,!0);let o=e._entityCollection;i&&(e._version=void 0,e._documentPacket=new Xue,o.removeAll()),as._processCzml(t,o,n,void 0,e);let r=Kje(e),s=e._documentPacket;return l(s.name)&&e._name!==s.name?(e._name=s.name,r=!0):!l(e._name)&&l(n)&&(e._name=G0(n.getUrlComponent()),r=!0),Pr.setLoading(e,!1),r&&e._changed.raiseEvent(e),e}function Xue(){this.name=void 0,this.clock=void 0}function as(e){this._name=e,this._changed=new ge,this._error=new ge,this._isLoading=!1,this._loading=new ge,this._clock=void 0,this._documentPacket=new Xue,this._version=void 0,this._entityCollection=new Us(this),this._entityCluster=new Sd,this._credit=void 0,this._resourceCredits=[]}as.load=function(e,t){return new as().load(e,t)};Object.defineProperties(as.prototype,{name:{get:function(){return this._name}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){this._entityCluster=e}},credit:{get:function(){return this._credit}}});as.updaters=[Xje,Ije,Wje,Pje,wje,Fje,Aje,Mje,yje,gje,Nje,kje,Uje,Bje,Yje,Sje,Oje,xje,zje,_je,Hje,Tje,Gje];as.registerUpdater=function(e){as.updaters.includes(e)||as.updaters.push(e)};as.unregisterUpdater=function(e){if(as.updaters.includes(e)){let t=as.updaters.indexOf(e);as.updaters.splice(t,1)}};as.prototype.process=function(e,t){return Eue(this,e,t,!1)};as.prototype.load=function(e,t){return Eue(this,e,t,!0)};as.prototype.update=function(e){return!0};as.processPacketData=xe;as.processPositionPacketData=Gue;as.processMaterialPacketData=Rd;as._processCzml=function(e,t,n,i,o){if(i=g(i,as.updaters),Array.isArray(e))for(let r=0,s=e.length;r<s;++r)Lue(e[r],t,i,n,o);else Lue(e,t,i,n,o)};var pP=as;var DQn=T(S(),1);function qc(){this._dataSources=[],this._dataSourceAdded=new ge,this._dataSourceRemoved=new ge,this._dataSourceMoved=new ge}Object.defineProperties(qc.prototype,{length:{get:function(){return this._dataSources.length}},dataSourceAdded:{get:function(){return this._dataSourceAdded}},dataSourceRemoved:{get:function(){return this._dataSourceRemoved}},dataSourceMoved:{get:function(){return this._dataSourceMoved}}});qc.prototype.add=function(e){let t=this,n=this._dataSources;return Promise.resolve(e).then(function(i){return n===t._dataSources&&(t._dataSources.push(i),t._dataSourceAdded.raiseEvent(t,i)),i})};qc.prototype.remove=function(e,t){t=g(t,!1);let n=this._dataSources.indexOf(e);return n!==-1?(this._dataSources.splice(n,1),this._dataSourceRemoved.raiseEvent(this,e),t&&typeof e.destroy==\"function\"&&e.destroy(),!0):!1};qc.prototype.removeAll=function(e){e=g(e,!1);let t=this._dataSources;for(let n=0,i=t.length;n<i;++n){let o=t[n];this._dataSourceRemoved.raiseEvent(this,o),e&&typeof o.destroy==\"function\"&&o.destroy()}this._dataSources=[]};qc.prototype.contains=function(e){return this.indexOf(e)!==-1};qc.prototype.indexOf=function(e){return this._dataSources.indexOf(e)};qc.prototype.get=function(e){return this._dataSources[e]};qc.prototype.getByName=function(e){return this._dataSources.filter(function(t){return t.name===e})};function dk(e,t){return e.indexOf(t)}function Iue(e,t,n){let i=e._dataSources,o=i.length-1;if(t=P.clamp(t,0,o),n=P.clamp(n,0,o),t===n)return;let r=i[t];i[t]=i[n],i[n]=r,e.dataSourceMoved.raiseEvent(r,n,t)}qc.prototype.raise=function(e){let t=dk(this._dataSources,e);Iue(this,t,t+1)};qc.prototype.lower=function(e){let t=dk(this._dataSources,e);Iue(this,t,t-1)};qc.prototype.raiseToTop=function(e){let t=dk(this._dataSources,e);t!==this._dataSources.length-1&&(this._dataSources.splice(t,1),this._dataSources.push(e),this.dataSourceMoved.raiseEvent(e,this._dataSources.length-1,t))};qc.prototype.lowerToBottom=function(e){let t=dk(this._dataSources,e);t!==0&&(this._dataSources.splice(t,1),this._dataSources.splice(0,0,e),this.dataSourceMoved.raiseEvent(e,0,t))};qc.prototype.isDestroyed=function(){return!1};qc.prototype.destroy=function(){return this.removeAll(!0),me(this)};var bP=qc;var Hsi=T(S(),1);var t4n=T(S(),1);var JQn=T(S(),1);function da(e){e=g(e,g.EMPTY_OBJECT),this._primitives=[],this._guid=Bn(),this._primitiveAdded=new ge,this._primitiveRemoved=new ge,this._zIndex=void 0,this.show=g(e.show,!0),this.destroyPrimitives=g(e.destroyPrimitives,!0)}Object.defineProperties(da.prototype,{length:{get:function(){return this._primitives.length}},primitiveAdded:{get:function(){return this._primitiveAdded}},primitiveRemoved:{get:function(){return this._primitiveRemoved}}});da.prototype.add=function(e,t){let n=l(t),i=e._external=e._external||{},o=i._composites=i._composites||{};return o[this._guid]={collection:this},n?this._primitives.splice(t,0,e):this._primitives.push(e),this._primitiveAdded.raiseEvent(e),e};da.prototype.remove=function(e){if(this.contains(e)){let t=this._primitives.indexOf(e);if(t!==-1)return this._primitives.splice(t,1),delete e._external._composites[this._guid],this.destroyPrimitives&&e.destroy(),this._primitiveRemoved.raiseEvent(e),!0}return!1};da.prototype.removeAndDestroy=function(e){let t=this.remove(e);return t&&!this.destroyPrimitives&&e.destroy(),t};da.prototype.removeAll=function(){let e=this._primitives,t=e.length;for(let n=0;n<t;++n)delete e[n]._external._composites[this._guid],this.destroyPrimitives&&e[n].destroy(),this._primitiveRemoved.raiseEvent(e[n]);this._primitives=[]};da.prototype.contains=function(e){return!!(l(e)&&e._external&&e._external._composites&&e._external._composites[this._guid])};function uk(e,t){return e._primitives.indexOf(t)}da.prototype.raise=function(e){if(l(e)){let t=uk(this,e),n=this._primitives;if(t!==n.length-1){let i=n[t];n[t]=n[t+1],n[t+1]=i}}};da.prototype.raiseToTop=function(e){if(l(e)){let t=uk(this,e),n=this._primitives;t!==n.length-1&&(n.splice(t,1),n.push(e))}};da.prototype.lower=function(e){if(l(e)){let t=uk(this,e),n=this._primitives;if(t!==0){let i=n[t];n[t]=n[t-1],n[t-1]=i}}};da.prototype.lowerToBottom=function(e){if(l(e)){let t=uk(this,e),n=this._primitives;t!==0&&(n.splice(t,1),n.unshift(e))}};da.prototype.get=function(e){return this._primitives[e]};da.prototype.update=function(e){if(!this.show)return;let t=this._primitives;for(let n=0;n<t.length;++n)t[n].update(e)};da.prototype.prePassesUpdate=function(e){let t=this._primitives;for(let n=0;n<t.length;++n){let i=t[n];l(i.prePassesUpdate)&&i.prePassesUpdate(e)}};da.prototype.updateForPass=function(e,t){let n=this._primitives;for(let i=0;i<n.length;++i){let o=n[i];l(o.updateForPass)&&o.updateForPass(e,t)}};da.prototype.postPassesUpdate=function(e){let t=this._primitives;for(let n=0;n<t.length;++n){let i=t[n];l(i.postPassesUpdate)&&i.postPassesUpdate(e)}};da.prototype.isDestroyed=function(){return!1};da.prototype.destroy=function(){return this.removeAll(),me(this)};var Ml=da;function xf(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(xf.prototype,{length:{get:function(){return this._length}}});xf.prototype.add=function(e,t){t=g(t,0);let n=this._collections[t];if(!l(n)){n=new Ml({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;let i=this._collectionsArray,o=0;for(;o<i.length&&i[o]._zIndex<t;)o++;i.splice(o,0,n)}return n.add(e),this._length++,e._zIndex=t,e};xf.prototype.set=function(e,t){return t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e};xf.prototype.remove=function(e,t){if(this.contains(e)){let n=e._zIndex,i=this._collections[n],o;return t?o=i.remove(e):o=i.removeAndDestroy(e),o&&this._length--,i.length===0&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),o}return!1};xf.prototype.removeAll=function(){let e=this._collectionsArray;for(let t=0;t<e.length;t++){let n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0};xf.prototype.contains=function(e){if(!l(e))return!1;let t=this._collections[e._zIndex];return l(t)&&t.contains(e)};xf.prototype.update=function(e){if(!this.show)return;let t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)};xf.prototype.isDestroyed=function(){return!1};xf.prototype.destroy=function(){return this.removeAll(),me(this)};var yP=xf;var Tii=T(S(),1);var s4n=T(S(),1);function v1(e,t){this._primitives=e,this._orderedGroundPrimitives=t,this._dynamicUpdaters=new Lt}v1.prototype.add=function(e,t){this._dynamicUpdaters.set(t.id,t.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))};v1.prototype.remove=function(e){let t=e.id,n=this._dynamicUpdaters.get(t);l(n)&&(this._dynamicUpdaters.remove(t),n.destroy())};v1.prototype.update=function(e){let t=this._dynamicUpdaters.values;for(let n=0,i=t.length;n<i;n++)t[n].update(e);return!0};v1.prototype.removeAllPrimitives=function(){let e=this._dynamicUpdaters.values;for(let t=0,n=e.length;t<n;t++)e[t].destroy();this._dynamicUpdaters.removeAll()};v1.prototype.getBoundingSphere=function(e,t){return e=this._dynamicUpdaters.get(e.id),l(e)&&l(e.getBoundingSphere)?e.getBoundingSphere(t):ht.FAILED};var O_=v1;var Iti=T(S(),1);var Sjn=T(S(),1);var A4n=T(S(),1);var m4n=T(S(),1);var OK={},mk=new h,Wue=new h,Pue=new Fe,vue=new $;function w1(e,t,n,i,o,r,s,a,c,d){let u=e+t;h.multiplyByScalar(i,Math.cos(u),mk),h.multiplyByScalar(n,Math.sin(u),Wue),h.add(mk,Wue,mk);let m=Math.cos(e);m=m*m;let p=Math.sin(e);p=p*p;let f=r/Math.sqrt(s*m+o*p)/a;return Fe.fromAxisAngle(mk,f,Pue),$.fromQuaternion(Pue,vue),$.multiplyByVector(vue,c,d),h.normalize(d,d),h.multiplyByScalar(d,a,d),d}var wue=new h,Fue=new h,YK=new h,Qje=new h;OK.raisePositionsToHeight=function(e,t,n){let i=t.ellipsoid,o=t.height,r=t.extrudedHeight,s=n?e.length/3*2:e.length/3,a=new Float64Array(s*3),c=e.length,d=n?c:0;for(let u=0;u<c;u+=3){let m=u+1,p=u+2,b=h.fromArray(e,u,wue);i.scaleToGeodeticSurface(b,b);let f=h.clone(b,Fue),x=i.geodeticSurfaceNormal(b,Qje),_=h.multiplyByScalar(x,o,YK);h.add(b,_,b),n&&(h.multiplyByScalar(x,r,_),h.add(f,_,f),a[u+d]=f.x,a[m+d]=f.y,a[p+d]=f.z),a[u]=b.x,a[m]=b.y,a[p]=b.z}return a};var jje=new h,qje=new h,$je=new h;OK.computeEllipsePositions=function(e,t,n){let i=e.semiMinorAxis,o=e.semiMajorAxis,r=e.rotation,s=e.center,a=e.granularity*8,c=i*i,d=o*o,u=o*i,m=h.magnitude(s),p=h.normalize(s,jje),b=h.cross(h.UNIT_Z,s,qje);b=h.normalize(b,b);let f=h.cross(p,b,$je),x=1+Math.ceil(P.PI_OVER_TWO/a),_=P.PI_OVER_TWO/(x-1),C=P.PI_OVER_TWO-x*_;C<0&&(x-=Math.ceil(Math.abs(C)/_));let V=2*(x*(x+2)),L=t?new Array(V*3):void 0,R=0,G=wue,X=Fue,v=x*4*3,W=v-1,F=0,A=n?new Array(v):void 0,y,Z,E,I,w;for(C=P.PI_OVER_TWO,G=w1(C,r,f,b,c,u,d,m,p,G),t&&(L[R++]=G.x,L[R++]=G.y,L[R++]=G.z),n&&(A[W--]=G.z,A[W--]=G.y,A[W--]=G.x),C=P.PI_OVER_TWO-_,y=1;y<x+1;++y){if(G=w1(C,r,f,b,c,u,d,m,p,G),X=w1(Math.PI-C,r,f,b,c,u,d,m,p,X),t){for(L[R++]=G.x,L[R++]=G.y,L[R++]=G.z,E=2*y+2,Z=1;Z<E-1;++Z)I=Z/(E-1),w=h.lerp(G,X,I,YK),L[R++]=w.x,L[R++]=w.y,L[R++]=w.z;L[R++]=X.x,L[R++]=X.y,L[R++]=X.z}n&&(A[W--]=G.z,A[W--]=G.y,A[W--]=G.x,A[F++]=X.x,A[F++]=X.y,A[F++]=X.z),C=P.PI_OVER_TWO-(y+1)*_}for(y=x;y>1;--y){if(C=P.PI_OVER_TWO-(y-1)*_,G=w1(-C,r,f,b,c,u,d,m,p,G),X=w1(C+Math.PI,r,f,b,c,u,d,m,p,X),t){for(L[R++]=G.x,L[R++]=G.y,L[R++]=G.z,E=2*(y-1)+2,Z=1;Z<E-1;++Z)I=Z/(E-1),w=h.lerp(G,X,I,YK),L[R++]=w.x,L[R++]=w.y,L[R++]=w.z;L[R++]=X.x,L[R++]=X.y,L[R++]=X.z}n&&(A[W--]=G.z,A[W--]=G.y,A[W--]=G.x,A[F++]=X.x,A[F++]=X.y,A[F++]=X.z)}C=P.PI_OVER_TWO,G=w1(-C,r,f,b,c,u,d,m,p,G);let k={};return t&&(L[R++]=G.x,L[R++]=G.y,L[R++]=G.z,k.positions=L,k.numPts=x),n&&(A[W--]=G.z,A[W--]=G.y,A[W--]=G.x,k.outerPositions=A),k};var Nl=OK;var F1=new h,zK=new h,HK=new h,Aue=new h,Ts=new D,Mue=new $,e8e=new $,KK=new Fe,Nue=new h,kue=new h,Uue=new h,pk=new he,Due=new h,Bue=new D,Yue=new D;function Oue(e,t,n){let i=t.vertexFormat,o=t.center,r=t.semiMajorAxis,s=t.semiMinorAxis,a=t.ellipsoid,c=t.stRotation,d=n?e.length/3*2:e.length/3,u=t.shadowVolume,m=i.st?new Float32Array(d*2):void 0,p=i.normal?new Float32Array(d*3):void 0,b=i.tangent?new Float32Array(d*3):void 0,f=i.bitangent?new Float32Array(d*3):void 0,x=u?new Float32Array(d*3):void 0,_=0,C=Nue,V=kue,L=Uue,R=new Ci(a),G=R.project(a.cartesianToCartographic(o,pk),Due),X=a.scaleToGeodeticSurface(o,F1);a.geodeticSurfaceNormal(X,X);let v=Mue,W=e8e;if(c!==0){let w=Fe.fromAxisAngle(X,c,KK);v=$.fromQuaternion(w,v),w=Fe.fromAxisAngle(X,-c,KK),W=$.fromQuaternion(w,W)}else v=$.clone($.IDENTITY,v),W=$.clone($.IDENTITY,W);let F=D.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Bue),A=D.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Yue),y=e.length,Z=n?y:0,E=Z/3*2;for(let w=0;w<y;w+=3){let k=w+1,B=w+2,U=h.fromArray(e,w,F1);if(i.st){let Y=$.multiplyByVector(v,U,zK),N=R.project(a.cartesianToCartographic(Y,pk),HK);h.subtract(N,G,N),Ts.x=(N.x+r)/(2*r),Ts.y=(N.y+s)/(2*s),F.x=Math.min(Ts.x,F.x),F.y=Math.min(Ts.y,F.y),A.x=Math.max(Ts.x,A.x),A.y=Math.max(Ts.y,A.y),n&&(m[_+E]=Ts.x,m[_+1+E]=Ts.y),m[_++]=Ts.x,m[_++]=Ts.y}(i.normal||i.tangent||i.bitangent||u)&&(C=a.geodeticSurfaceNormal(U,C),u&&(x[w+Z]=-C.x,x[k+Z]=-C.y,x[B+Z]=-C.z),(i.normal||i.tangent||i.bitangent)&&((i.tangent||i.bitangent)&&(V=h.normalize(h.cross(h.UNIT_Z,C,V),V),$.multiplyByVector(W,V,V)),i.normal&&(p[w]=C.x,p[k]=C.y,p[B]=C.z,n&&(p[w+Z]=-C.x,p[k+Z]=-C.y,p[B+Z]=-C.z)),i.tangent&&(b[w]=V.x,b[k]=V.y,b[B]=V.z,n&&(b[w+Z]=-V.x,b[k+Z]=-V.y,b[B+Z]=-V.z)),i.bitangent&&(L=h.normalize(h.cross(C,V,L),L),f[w]=L.x,f[k]=L.y,f[B]=L.z,n&&(f[w+Z]=L.x,f[k+Z]=L.y,f[B+Z]=L.z))))}if(i.st){y=m.length;for(let w=0;w<y;w+=2)m[w]=(m[w]-F.x)/(A.x-F.x),m[w+1]=(m[w+1]-F.y)/(A.y-F.y)}let I=new hn;if(i.position){let w=Nl.raisePositionsToHeight(e,t,n);I.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:w})}if(i.st&&(I.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:m})),i.normal&&(I.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:p})),i.tangent&&(I.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:b})),i.bitangent&&(I.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:f})),u&&(I.extrudeDirection=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:x})),n&&l(t.offsetAttribute)){let w=new Uint8Array(d);if(t.offsetAttribute===cn.TOP)w=w.fill(1,0,d/2);else{let k=t.offsetAttribute===cn.NONE?0:1;w=w.fill(k)}I.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:w})}return I}function zue(e){let t=new Array(12*(e*(e+1))-6),n=0,i,o,r,s,a;for(i=0,r=1,s=0;s<3;s++)t[n++]=r++,t[n++]=i,t[n++]=r;for(s=2;s<e+1;++s){for(r=s*(s+1)-1,i=(s-1)*s-1,t[n++]=r++,t[n++]=i,t[n++]=r,o=2*s,a=0;a<o-1;++a)t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i,t[n++]=r;t[n++]=r++,t[n++]=i,t[n++]=r}for(o=e*2,++r,++i,s=0;s<o-1;++s)t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i,t[n++]=r;for(t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i++,t[n++]=i,++i,s=e-1;s>1;--s){for(t[n++]=i++,t[n++]=i,t[n++]=r,o=2*s,a=0;a<o-1;++a)t[n++]=r,t[n++]=i++,t[n++]=i,t[n++]=r++,t[n++]=i,t[n++]=r;t[n++]=i++,t[n++]=i++,t[n++]=r++}for(s=0;s<3;s++)t[n++]=i++,t[n++]=i,t[n++]=r;return t}var z_=new h;function t8e(e){let t=e.center;z_=h.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,z_),e.height,z_),z_=h.add(t,z_,z_);let n=new ce(z_,e.semiMajorAxis),i=Nl.computeEllipsePositions(e,!0,!1),o=i.positions,r=i.numPts,s=Oue(o,e,!1),a=zue(r);return a=Ae.createTypedArray(o.length/3,a),{boundingSphere:n,attributes:s,indices:a}}function n8e(e,t){let n=t.vertexFormat,i=t.center,o=t.semiMajorAxis,r=t.semiMinorAxis,s=t.ellipsoid,a=t.height,c=t.extrudedHeight,d=t.stRotation,u=e.length/3*2,m=new Float64Array(u*3),p=n.st?new Float32Array(u*2):void 0,b=n.normal?new Float32Array(u*3):void 0,f=n.tangent?new Float32Array(u*3):void 0,x=n.bitangent?new Float32Array(u*3):void 0,_=t.shadowVolume,C=_?new Float32Array(u*3):void 0,V=0,L=Nue,R=kue,G=Uue,X=new Ci(s),v=X.project(s.cartesianToCartographic(i,pk),Due),W=s.scaleToGeodeticSurface(i,F1);s.geodeticSurfaceNormal(W,W);let F=Fe.fromAxisAngle(W,d,KK),A=$.fromQuaternion(F,Mue),y=D.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Bue),Z=D.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Yue),E=e.length,I=E/3*2;for(let k=0;k<E;k+=3){let B=k+1,U=k+2,Y=h.fromArray(e,k,F1),N;if(n.st){let z=$.multiplyByVector(A,Y,zK),ee=X.project(s.cartesianToCartographic(z,pk),HK);h.subtract(ee,v,ee),Ts.x=(ee.x+o)/(2*o),Ts.y=(ee.y+r)/(2*r),y.x=Math.min(Ts.x,y.x),y.y=Math.min(Ts.y,y.y),Z.x=Math.max(Ts.x,Z.x),Z.y=Math.max(Ts.y,Z.y),p[V+I]=Ts.x,p[V+1+I]=Ts.y,p[V++]=Ts.x,p[V++]=Ts.y}Y=s.scaleToGeodeticSurface(Y,Y),N=h.clone(Y,zK),L=s.geodeticSurfaceNormal(Y,L),_&&(C[k+E]=-L.x,C[B+E]=-L.y,C[U+E]=-L.z);let J=h.multiplyByScalar(L,a,Aue);if(Y=h.add(Y,J,Y),J=h.multiplyByScalar(L,c,J),N=h.add(N,J,N),n.position&&(m[k+E]=N.x,m[B+E]=N.y,m[U+E]=N.z,m[k]=Y.x,m[B]=Y.y,m[U]=Y.z),n.normal||n.tangent||n.bitangent){G=h.clone(L,G);let z=h.fromArray(e,(k+3)%E,Aue);h.subtract(z,Y,z);let ee=h.subtract(N,Y,HK);L=h.normalize(h.cross(ee,z,L),L),n.normal&&(b[k]=L.x,b[B]=L.y,b[U]=L.z,b[k+E]=L.x,b[B+E]=L.y,b[U+E]=L.z),n.tangent&&(R=h.normalize(h.cross(G,L,R),R),f[k]=R.x,f[B]=R.y,f[U]=R.z,f[k+E]=R.x,f[k+1+E]=R.y,f[k+2+E]=R.z),n.bitangent&&(x[k]=G.x,x[B]=G.y,x[U]=G.z,x[k+E]=G.x,x[B+E]=G.y,x[U+E]=G.z)}}if(n.st){E=p.length;for(let k=0;k<E;k+=2)p[k]=(p[k]-y.x)/(Z.x-y.x),p[k+1]=(p[k+1]-y.y)/(Z.y-y.y)}let w=new hn;if(n.position&&(w.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:m})),n.st&&(w.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:p})),n.normal&&(w.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:b})),n.tangent&&(w.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:f})),n.bitangent&&(w.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:x})),_&&(w.extrudeDirection=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:C})),l(t.offsetAttribute)){let k=new Uint8Array(u);if(t.offsetAttribute===cn.TOP)k=k.fill(1,0,u/2);else{let B=t.offsetAttribute===cn.NONE?0:1;k=k.fill(B)}w.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:k})}return w}function i8e(e){let t=e.length/3,n=Ae.createTypedArray(t,t*6),i=0;for(let o=0;o<t;o++){let r=o,s=o+t,a=(r+1)%t,c=a+t;n[i++]=r,n[i++]=s,n[i++]=a,n[i++]=a,n[i++]=s,n[i++]=c}return n}var hk=new ce,fk=new ce;function o8e(e){let t=e.center,n=e.ellipsoid,i=e.semiMajorAxis,o=h.multiplyByScalar(n.geodeticSurfaceNormal(t,F1),e.height,F1);hk.center=h.add(t,o,hk.center),hk.radius=i,o=h.multiplyByScalar(n.geodeticSurfaceNormal(t,o),e.extrudedHeight,o),fk.center=h.add(t,o,fk.center),fk.radius=i;let r=Nl.computeEllipsePositions(e,!0,!0),s=r.positions,a=r.numPts,c=r.outerPositions,d=ce.union(hk,fk),u=Oue(s,e,!0),m=zue(a),p=m.length;m.length=p*2;let b=s.length/3;for(let R=0;R<p;R+=3)m[R+p]=m[R+2]+b,m[R+1+p]=m[R+1]+b,m[R+2+p]=m[R]+b;let f=Ae.createTypedArray(b*2/3,m),x=new ut({attributes:u,indices:f,primitiveType:we.TRIANGLES}),_=n8e(c,e);m=i8e(c);let C=Ae.createTypedArray(c.length*2/3,m),V=new ut({attributes:_,indices:C,primitiveType:we.TRIANGLES}),L=An.combineInstances([new Vt({geometry:x}),new Vt({geometry:V})]);return{boundingSphere:d,attributes:L[0].attributes,indices:L[0].indices}}function Hue(e,t,n,i,o,r,s){let c=Nl.computeEllipsePositions({center:e,semiMajorAxis:t,semiMinorAxis:n,rotation:i,granularity:o},!1,!0).outerPositions,d=c.length/3,u=new Array(d);for(let p=0;p<d;++p)u[p]=h.fromArray(c,p*3);let m=le.fromCartesianArray(u,r,s);return m.width>P.PI&&(m.north=m.north>0?P.PI_OVER_TWO-P.EPSILON7:m.north,m.south=m.south<0?P.EPSILON7-P.PI_OVER_TWO:m.south,m.east=P.PI,m.west=-P.PI),m}function Tf(e){e=g(e,g.EMPTY_OBJECT);let t=e.center,n=g(e.ellipsoid,oe.WGS84),i=e.semiMajorAxis,o=e.semiMinorAxis,r=g(e.granularity,P.RADIANS_PER_DEGREE),s=g(e.vertexFormat,Pe.DEFAULT),a=g(e.height,0),c=g(e.extrudedHeight,a);this._center=h.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=oe.clone(n),this._rotation=g(e.rotation,0),this._stRotation=g(e.stRotation,0),this._height=Math.max(c,a),this._granularity=r,this._vertexFormat=Pe.clone(s),this._extrudedHeight=Math.min(c,a),this._shadowVolume=g(e.shadowVolume,!1),this._workerName=\"createEllipseGeometry\",this._offsetAttribute=e.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}Tf.packedLength=h.packedLength+oe.packedLength+Pe.packedLength+9;Tf.pack=function(e,t,n){return n=g(n,0),h.pack(e._center,t,n),n+=h.packedLength,oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._stRotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._shadowVolume?1:0,t[n]=g(e._offsetAttribute,-1),t};var Kue=new h,Jue=new oe,Que=new Pe,_f={center:Kue,ellipsoid:Jue,vertexFormat:Que,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};Tf.unpack=function(e,t,n){t=g(t,0);let i=h.unpack(e,t,Kue);t+=h.packedLength;let o=oe.unpack(e,t,Jue);t+=oe.packedLength;let r=Pe.unpack(e,t,Que);t+=Pe.packedLength;let s=e[t++],a=e[t++],c=e[t++],d=e[t++],u=e[t++],m=e[t++],p=e[t++],b=e[t++]===1,f=e[t];return l(n)?(n._center=h.clone(i,n._center),n._ellipsoid=oe.clone(o,n._ellipsoid),n._vertexFormat=Pe.clone(r,n._vertexFormat),n._semiMajorAxis=s,n._semiMinorAxis=a,n._rotation=c,n._stRotation=d,n._height=u,n._granularity=m,n._extrudedHeight=p,n._shadowVolume=b,n._offsetAttribute=f===-1?void 0:f,n):(_f.height=u,_f.extrudedHeight=p,_f.granularity=m,_f.stRotation=d,_f.rotation=c,_f.semiMajorAxis=s,_f.semiMinorAxis=a,_f.shadowVolume=b,_f.offsetAttribute=f===-1?void 0:f,new Tf(_f))};Tf.computeRectangle=function(e,t){e=g(e,g.EMPTY_OBJECT);let n=e.center,i=g(e.ellipsoid,oe.WGS84),o=e.semiMajorAxis,r=e.semiMinorAxis,s=g(e.granularity,P.RADIANS_PER_DEGREE),a=g(e.rotation,0);return Hue(n,o,r,a,s,i,t)};Tf.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;let t=e._height,n=e._extrudedHeight,i=!P.equalsEpsilon(t,n,0,P.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);let o={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,vertexFormat:e._vertexFormat,stRotation:e._stRotation},r;if(i)o.extrudedHeight=n,o.shadowVolume=e._shadowVolume,o.offsetAttribute=e._offsetAttribute,r=o8e(o);else if(r=t8e(o),l(e._offsetAttribute)){let s=r.attributes.position.values.length,a=e._offsetAttribute===cn.NONE?0:1,c=new Uint8Array(s/3).fill(a);r.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:c})}return new ut({attributes:r.attributes,indices:r.indices,primitiveType:we.TRIANGLES,boundingSphere:r.boundingSphere,offsetAttribute:e._offsetAttribute})};Tf.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new Tf({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:o,rotation:e._rotation,stRotation:e._stRotation,granularity:i,extrudedHeight:r,height:s,vertexFormat:Pe.POSITION_ONLY,shadowVolume:!0})};function r8e(e){let t=-e._stRotation;if(t===0)return[0,0,0,1,1,0];let i=Nl.computeEllipsePositions({center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,rotation:e._rotation,granularity:e._granularity},!1,!0).outerPositions,o=i.length/3,r=new Array(o);for(let c=0;c<o;++c)r[c]=h.fromArray(i,c*3);let s=e._ellipsoid,a=e.rectangle;return ut._textureCoordinateRotationPoints(r,t,s,a)}Object.defineProperties(Tf.prototype,{rectangle:{get:function(){return l(this._rectangle)||(this._rectangle=Hue(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return l(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=r8e(this)),this._textureCoordinateRotationPoints}}});var $c=Tf;var $4n=T(S(),1);var jue=new h,H_=new h;function s8e(e){let t=e.center;H_=h.multiplyByScalar(e.ellipsoid.geodeticSurfaceNormal(t,H_),e.height,H_),H_=h.add(t,H_,H_);let n=new ce(H_,e.semiMajorAxis),i=Nl.computeEllipsePositions(e,!1,!0).outerPositions,o=new hn({position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:Nl.raisePositionsToHeight(i,e,!1)})}),r=i.length/3,s=Ae.createTypedArray(r,r*2),a=0;for(let c=0;c<r;++c)s[a++]=c,s[a++]=(c+1)%r;return{boundingSphere:n,attributes:o,indices:s}}var bk=new ce,yk=new ce;function a8e(e){let t=e.center,n=e.ellipsoid,i=e.semiMajorAxis,o=h.multiplyByScalar(n.geodeticSurfaceNormal(t,jue),e.height,jue);bk.center=h.add(t,o,bk.center),bk.radius=i,o=h.multiplyByScalar(n.geodeticSurfaceNormal(t,o),e.extrudedHeight,o),yk.center=h.add(t,o,yk.center),yk.radius=i;let r=Nl.computeEllipsePositions(e,!1,!0).outerPositions,s=new hn({position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:Nl.raisePositionsToHeight(r,e,!0)})});r=s.position.values;let a=ce.union(bk,yk),c=r.length/3;if(l(e.offsetAttribute)){let f=new Uint8Array(c);if(e.offsetAttribute===cn.TOP)f=f.fill(1,0,c/2);else{let x=e.offsetAttribute===cn.NONE?0:1;f=f.fill(x)}s.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:f})}let d=g(e.numberOfVerticalLines,16);d=P.clamp(d,0,c/2);let u=Ae.createTypedArray(c,c*2+d*2);c/=2;let m=0,p;for(p=0;p<c;++p)u[m++]=p,u[m++]=(p+1)%c,u[m++]=p+c,u[m++]=(p+1)%c+c;let b;if(d>0){let f=Math.min(d,c);b=Math.round(c/f);let x=Math.min(b*d,c);for(p=0;p<x;p+=b)u[m++]=p,u[m++]=p+c}return{boundingSphere:a,attributes:s,indices:u}}function A1(e){e=g(e,g.EMPTY_OBJECT);let t=e.center,n=g(e.ellipsoid,oe.WGS84),i=e.semiMajorAxis,o=e.semiMinorAxis,r=g(e.granularity,P.RADIANS_PER_DEGREE),s=g(e.height,0),a=g(e.extrudedHeight,s);this._center=h.clone(t),this._semiMajorAxis=i,this._semiMinorAxis=o,this._ellipsoid=oe.clone(n),this._rotation=g(e.rotation,0),this._height=Math.max(a,s),this._granularity=r,this._extrudedHeight=Math.min(a,s),this._numberOfVerticalLines=Math.max(g(e.numberOfVerticalLines,16),0),this._offsetAttribute=e.offsetAttribute,this._workerName=\"createEllipseOutlineGeometry\"}A1.packedLength=h.packedLength+oe.packedLength+8;A1.pack=function(e,t,n){return n=g(n,0),h.pack(e._center,t,n),n+=h.packedLength,oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,t[n++]=e._semiMajorAxis,t[n++]=e._semiMinorAxis,t[n++]=e._rotation,t[n++]=e._height,t[n++]=e._granularity,t[n++]=e._extrudedHeight,t[n++]=e._numberOfVerticalLines,t[n]=g(e._offsetAttribute,-1),t};var que=new h,$ue=new oe,w0={center:que,ellipsoid:$ue,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};A1.unpack=function(e,t,n){t=g(t,0);let i=h.unpack(e,t,que);t+=h.packedLength;let o=oe.unpack(e,t,$ue);t+=oe.packedLength;let r=e[t++],s=e[t++],a=e[t++],c=e[t++],d=e[t++],u=e[t++],m=e[t++],p=e[t];return l(n)?(n._center=h.clone(i,n._center),n._ellipsoid=oe.clone(o,n._ellipsoid),n._semiMajorAxis=r,n._semiMinorAxis=s,n._rotation=a,n._height=c,n._granularity=d,n._extrudedHeight=u,n._numberOfVerticalLines=m,n._offsetAttribute=p===-1?void 0:p,n):(w0.height=c,w0.extrudedHeight=u,w0.granularity=d,w0.rotation=a,w0.semiMajorAxis=r,w0.semiMinorAxis=s,w0.numberOfVerticalLines=m,w0.offsetAttribute=p===-1?void 0:p,new A1(w0))};A1.createGeometry=function(e){if(e._semiMajorAxis<=0||e._semiMinorAxis<=0)return;let t=e._height,n=e._extrudedHeight,i=!P.equalsEpsilon(t,n,0,P.EPSILON2);e._center=e._ellipsoid.scaleToGeodeticSurface(e._center,e._center);let o={center:e._center,semiMajorAxis:e._semiMajorAxis,semiMinorAxis:e._semiMinorAxis,ellipsoid:e._ellipsoid,rotation:e._rotation,height:t,granularity:e._granularity,numberOfVerticalLines:e._numberOfVerticalLines},r;if(i)o.extrudedHeight=n,o.offsetAttribute=e._offsetAttribute,r=a8e(o);else if(r=s8e(o),l(e._offsetAttribute)){let s=r.attributes.position.values.length,a=e._offsetAttribute===cn.NONE?0:1,c=new Uint8Array(s/3).fill(a);r.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:c})}return new ut({attributes:r.attributes,indices:r.indices,primitiveType:we.LINES,boundingSphere:r.boundingSphere,offsetAttribute:e._offsetAttribute})};var Gd=A1;var eme=new O,tme=h.ZERO,nme=new h,ime=new le;function c8e(e){this.id=e,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function rh(e,t){On.call(this,{entity:e,scene:t,geometryOptions:new c8e(e),geometryPropertyName:\"ellipse\",observedPropertyNames:[\"availability\",\"position\",\"ellipse\"]}),this._onEntityPropertyChanged(e,\"ellipse\",e.ellipse,void 0)}l(Object.create)&&(rh.prototype=Object.create(On.prototype),rh.prototype.constructor=rh);rh.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i={show:new xn(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:kn.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof kt){let o;l(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(o=this._materialProperty.color.getValue(e,eme)),l(o)||(o=O.WHITE),i.color=Ot.fromColor(o)}return l(this._options.offsetAttribute)&&(i.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,tme,nme))),new Vt({id:t,geometry:new $c(this._options),attributes:i})};rh.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=K.getValueOrDefault(this._outlineColorProperty,e,O.BLACK,eme),o=this._distanceDisplayConditionProperty.getValue(e),r={show:new xn(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Ot.fromColor(i),distanceDisplayCondition:kn.fromDistanceDisplayCondition(o),offset:void 0};return l(this._options.offsetAttribute)&&(r.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,tme,nme))),new Vt({id:t,geometry:new Gd(this._options),attributes:r})};rh.prototype._computeCenter=function(e,t){return K.getValueOrUndefined(this._entity.position,e,t)};rh.prototype._isHidden=function(e,t){let n=e.position;return!l(n)||!l(t.semiMajorAxis)||!l(t.semiMinorAxis)||ii.prototype._isHidden.call(this,e,t)};rh.prototype._isDynamic=function(e,t){return!e.position.isConstant||!t.semiMajorAxis.isConstant||!t.semiMinorAxis.isConstant||!K.isConstant(t.rotation)||!K.isConstant(t.height)||!K.isConstant(t.extrudedHeight)||!K.isConstant(t.granularity)||!K.isConstant(t.stRotation)||!K.isConstant(t.outlineWidth)||!K.isConstant(t.numberOfVerticalLines)||!K.isConstant(t.zIndex)||this._onTerrain&&!K.isConstant(this._materialProperty)&&!(this._materialProperty instanceof kt)};rh.prototype._setStaticOptions=function(e,t){let n=K.getValueOrUndefined(t.height,Be.MINIMUM_VALUE),i=K.getValueOrDefault(t.heightReference,Be.MINIMUM_VALUE,Je.NONE),o=K.getValueOrUndefined(t.extrudedHeight,Be.MINIMUM_VALUE),r=K.getValueOrDefault(t.extrudedHeightReference,Be.MINIMUM_VALUE,Je.NONE);l(o)&&!l(n)&&(n=0);let s=this._options;s.vertexFormat=this._materialProperty instanceof kt?ln.VERTEX_FORMAT:so.MaterialSupport.TEXTURED.vertexFormat,s.center=e.position.getValue(Be.MINIMUM_VALUE,s.center),s.semiMajorAxis=t.semiMajorAxis.getValue(Be.MINIMUM_VALUE,s.semiMajorAxis),s.semiMinorAxis=t.semiMinorAxis.getValue(Be.MINIMUM_VALUE,s.semiMinorAxis),s.rotation=K.getValueOrUndefined(t.rotation,Be.MINIMUM_VALUE),s.granularity=K.getValueOrUndefined(t.granularity,Be.MINIMUM_VALUE),s.stRotation=K.getValueOrUndefined(t.stRotation,Be.MINIMUM_VALUE),s.numberOfVerticalLines=K.getValueOrUndefined(t.numberOfVerticalLines,Be.MINIMUM_VALUE),s.offsetAttribute=On.computeGeometryOffsetAttribute(n,i,o,r),s.height=On.getGeometryHeight(n,i),o=On.getGeometryExtrudedHeight(o,r),o===On.CLAMP_TO_GROUND&&(o=ai.getMinimumMaximumHeights($c.computeRectangle(s,ime)).minimumTerrainHeight),s.extrudedHeight=o};rh.DynamicGeometryUpdater=M1;function M1(e,t,n){ni.call(this,e,t,n)}l(Object.create)&&(M1.prototype=Object.create(ni.prototype),M1.prototype.constructor=M1);M1.prototype._isHidden=function(e,t,n){let i=this._options;return!l(i.center)||!l(i.semiMajorAxis)||!l(i.semiMinorAxis)||ni.prototype._isHidden.call(this,e,t,n)};M1.prototype._setOptions=function(e,t,n){let i=this._options,o=K.getValueOrUndefined(t.height,n),r=K.getValueOrDefault(t.heightReference,n,Je.NONE),s=K.getValueOrUndefined(t.extrudedHeight,n),a=K.getValueOrDefault(t.extrudedHeightReference,n,Je.NONE);l(s)&&!l(o)&&(o=0),i.center=K.getValueOrUndefined(e.position,n,i.center),i.semiMajorAxis=K.getValueOrUndefined(t.semiMajorAxis,n),i.semiMinorAxis=K.getValueOrUndefined(t.semiMinorAxis,n),i.rotation=K.getValueOrUndefined(t.rotation,n),i.granularity=K.getValueOrUndefined(t.granularity,n),i.stRotation=K.getValueOrUndefined(t.stRotation,n),i.numberOfVerticalLines=K.getValueOrUndefined(t.numberOfVerticalLines,n),i.offsetAttribute=On.computeGeometryOffsetAttribute(o,r,s,a),i.height=On.getGeometryHeight(o,r),s=On.getGeometryExtrudedHeight(s,a),s===On.CLAMP_TO_GROUND&&(s=ai.getMinimumMaximumHeights($c.computeRectangle(i,ime)).minimumTerrainHeight),i.extrudedHeight=s};var gP=rh;var h8n=T(S(),1);var Njn=T(S(),1);var l8e=new h,d8e=new h,u8e=new h,m8e=new h,h8e=new h,f8e=new h(1,1,1),ome=Math.cos,rme=Math.sin;function F0(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.radii,f8e),n=g(e.innerRadii,t),i=g(e.minimumClock,0),o=g(e.maximumClock,P.TWO_PI),r=g(e.minimumCone,0),s=g(e.maximumCone,P.PI),a=Math.round(g(e.stackPartitions,64)),c=Math.round(g(e.slicePartitions,64)),d=g(e.vertexFormat,Pe.DEFAULT);this._radii=h.clone(t),this._innerRadii=h.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=r,this._maximumCone=s,this._stackPartitions=a,this._slicePartitions=c,this._vertexFormat=Pe.clone(d),this._offsetAttribute=e.offsetAttribute,this._workerName=\"createEllipsoidGeometry\"}F0.packedLength=2*h.packedLength+Pe.packedLength+7;F0.pack=function(e,t,n){return n=g(n,0),h.pack(e._radii,t,n),n+=h.packedLength,h.pack(e._innerRadii,t,n),n+=h.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=g(e._offsetAttribute,-1),t};var sme=new h,ame=new h,cme=new Pe,Uy={radii:sme,innerRadii:ame,vertexFormat:cme,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};F0.unpack=function(e,t,n){t=g(t,0);let i=h.unpack(e,t,sme);t+=h.packedLength;let o=h.unpack(e,t,ame);t+=h.packedLength;let r=Pe.unpack(e,t,cme);t+=Pe.packedLength;let s=e[t++],a=e[t++],c=e[t++],d=e[t++],u=e[t++],m=e[t++],p=e[t];return l(n)?(n._radii=h.clone(i,n._radii),n._innerRadii=h.clone(o,n._innerRadii),n._vertexFormat=Pe.clone(r,n._vertexFormat),n._minimumClock=s,n._maximumClock=a,n._minimumCone=c,n._maximumCone=d,n._stackPartitions=u,n._slicePartitions=m,n._offsetAttribute=p===-1?void 0:p,n):(Uy.minimumClock=s,Uy.maximumClock=a,Uy.minimumCone=c,Uy.maximumCone=d,Uy.stackPartitions=u,Uy.slicePartitions=m,Uy.offsetAttribute=p===-1?void 0:p,new F0(Uy))};F0.createGeometry=function(e){let t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;let n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;let i=e._minimumClock,o=e._maximumClock,r=e._minimumCone,s=e._maximumCone,a=e._vertexFormat,c=e._slicePartitions+1,d=e._stackPartitions+1;c=Math.round(c*Math.abs(o-i)/P.TWO_PI),d=Math.round(d*Math.abs(s-r)/P.PI),c<2&&(c=2),d<2&&(d=2);let u,m,p=0,b=[r],f=[i];for(u=0;u<d;u++)b.push(r+u*(s-r)/(d-1));for(b.push(s),m=0;m<c;m++)f.push(i+m*(o-i)/(c-1));f.push(o);let x=b.length,_=f.length,C=0,V=1,L=n.x!==t.x||n.y!==t.y||n.z!==t.z,R=!1,G=!1,X=!1;L&&(V=2,r>0&&(R=!0,C+=c-1),s<Math.PI&&(G=!0,C+=c-1),(o-i)%P.TWO_PI?(X=!0,C+=(d-1)*2+1):C+=1);let v=_*x*V,W=new Float64Array(v*3),F=new Array(v).fill(!1),A=new Array(v).fill(!1),y=c*d*V,Z=6*(y+C+1-(c+d)*V),E=Ae.createTypedArray(y,Z),I=a.normal?new Float32Array(v*3):void 0,w=a.tangent?new Float32Array(v*3):void 0,k=a.bitangent?new Float32Array(v*3):void 0,B=a.st?new Float32Array(v*2):void 0,U=new Array(x),Y=new Array(x);for(u=0;u<x;u++)U[u]=rme(b[u]),Y[u]=ome(b[u]);let N=new Array(_),J=new Array(_);for(m=0;m<_;m++)J[m]=ome(f[m]),N[m]=rme(f[m]);for(u=0;u<x;u++)for(m=0;m<_;m++)W[p++]=t.x*U[u]*J[m],W[p++]=t.y*U[u]*N[m],W[p++]=t.z*Y[u];let z=v/2;if(L)for(u=0;u<x;u++)for(m=0;m<_;m++)W[p++]=n.x*U[u]*J[m],W[p++]=n.y*U[u]*N[m],W[p++]=n.z*Y[u],F[z]=!0,u>0&&u!==x-1&&m!==0&&m!==_-1&&(A[z]=!0),z++;p=0;let ee,H;for(u=1;u<x-2;u++)for(ee=u*_,H=(u+1)*_,m=1;m<_-2;m++)E[p++]=H+m,E[p++]=H+m+1,E[p++]=ee+m+1,E[p++]=H+m,E[p++]=ee+m+1,E[p++]=ee+m;if(L){let yt=x*_;for(u=1;u<x-2;u++)for(ee=yt+u*_,H=yt+(u+1)*_,m=1;m<_-2;m++)E[p++]=H+m,E[p++]=ee+m,E[p++]=ee+m+1,E[p++]=H+m,E[p++]=ee+m+1,E[p++]=H+m+1}let j,q;if(L){if(R)for(q=x*_,u=1;u<_-2;u++)E[p++]=u,E[p++]=u+1,E[p++]=q+u+1,E[p++]=u,E[p++]=q+u+1,E[p++]=q+u;if(G)for(j=x*_-_,q=x*_*V-_,u=1;u<_-2;u++)E[p++]=j+u+1,E[p++]=j+u,E[p++]=q+u,E[p++]=j+u+1,E[p++]=q+u,E[p++]=q+u+1}if(X){for(u=1;u<x-2;u++)q=_*x+_*u,j=_*u,E[p++]=q,E[p++]=j+_,E[p++]=j,E[p++]=q,E[p++]=q+_,E[p++]=j+_;for(u=1;u<x-2;u++)q=_*x+_*(u+1)-1,j=_*(u+1)-1,E[p++]=j+_,E[p++]=q,E[p++]=j,E[p++]=j+_,E[p++]=q+_,E[p++]=q}let pe=new hn;a.position&&(pe.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:W}));let _e=0,ae=0,ye=0,Te=0,Le=v/2,Re,ke=oe.fromCartesian3(t),rt=oe.fromCartesian3(n);if(a.st||a.normal||a.tangent||a.bitangent){for(u=0;u<v;u++){Re=F[u]?rt:ke;let yt=h.fromArray(W,u*3,l8e),Dt=Re.geodeticSurfaceNormal(yt,d8e);if(A[u]&&h.negate(Dt,Dt),a.st){let it=D.negate(Dt,h8e);B[_e++]=Math.atan2(it.y,it.x)/P.TWO_PI+.5,B[_e++]=Math.asin(Dt.z)/Math.PI+.5}if(a.normal&&(I[ae++]=Dt.x,I[ae++]=Dt.y,I[ae++]=Dt.z),a.tangent||a.bitangent){let it=u8e,Ie=0,ft;if(F[u]&&(Ie=Le),!R&&u>=Ie&&u<Ie+_*2?ft=h.UNIT_X:ft=h.UNIT_Z,h.cross(ft,Dt,it),h.normalize(it,it),a.tangent&&(w[ye++]=it.x,w[ye++]=it.y,w[ye++]=it.z),a.bitangent){let Ke=h.cross(Dt,it,m8e);h.normalize(Ke,Ke),k[Te++]=Ke.x,k[Te++]=Ke.y,k[Te++]=Ke.z}}}a.st&&(pe.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:B})),a.normal&&(pe.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:I})),a.tangent&&(pe.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:w})),a.bitangent&&(pe.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:k}))}if(l(e._offsetAttribute)){let yt=W.length,Dt=e._offsetAttribute===cn.NONE?0:1,it=new Uint8Array(yt/3).fill(Dt);pe.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:it})}return new ut({attributes:pe,indices:E,primitiveType:we.TRIANGLES,boundingSphere:ce.fromEllipsoid(ke),offsetAttribute:e._offsetAttribute})};var JK;F0.getUnitEllipsoid=function(){return l(JK)||(JK=F0.createGeometry(new F0({radii:new h(1,1,1),vertexFormat:Pe.POSITION_ONLY}))),JK};var Ds=F0;var p8e=new kt(O.WHITE),QK=h.ZERO,jK=new h,b8e=new h,y8e=new h,qK=new O,g8e=new h(1,1,1);function x8e(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function Ed(e,t){ii.call(this,{entity:e,scene:t,geometryOptions:new x8e(e),geometryPropertyName:\"ellipsoid\",observedPropertyNames:[\"availability\",\"position\",\"orientation\",\"ellipsoid\"]}),this._onEntityPropertyChanged(e,\"ellipsoid\",e.ellipsoid,void 0)}l(Object.create)&&(Ed.prototype=Object.create(ii.prototype),Ed.prototype.constructor=Ed);Object.defineProperties(Ed.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}});Ed.prototype.createFillGeometryInstance=function(e,t,n){let i=this._entity,o=i.isAvailable(e),r,s=new xn(o&&i.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),c=kn.fromDistanceDisplayCondition(a),d={show:s,distanceDisplayCondition:c,color:void 0,offset:void 0};if(this._materialProperty instanceof kt){let u;l(this._materialProperty.color)&&(this._materialProperty.color.isConstant||o)&&(u=this._materialProperty.color.getValue(e,qK)),l(u)||(u=O.WHITE),r=Ot.fromColor(u),d.color=r}return l(this._options.offsetAttribute)&&(d.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,QK,jK))),new Vt({id:i,geometry:new Ds(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,this._options.radii.z*.5,this._scene.mapProjection.ellipsoid,n),attributes:d})};Ed.prototype.createOutlineGeometryInstance=function(e,t,n){let i=this._entity,o=i.isAvailable(e),r=K.getValueOrDefault(this._outlineColorProperty,e,O.BLACK,qK),s=this._distanceDisplayConditionProperty.getValue(e),a={show:new xn(o&&i.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Ot.fromColor(r),distanceDisplayCondition:kn.fromDistanceDisplayCondition(s),offset:void 0};return l(this._options.offsetAttribute)&&(a.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,QK,jK))),new Vt({id:i,geometry:new xd(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,this._options.radii.z*.5,this._scene.mapProjection.ellipsoid,n),attributes:a})};Ed.prototype._computeCenter=function(e,t){return K.getValueOrUndefined(this._entity.position,e,t)};Ed.prototype._isHidden=function(e,t){return!l(e.position)||!l(t.radii)||ii.prototype._isHidden.call(this,e,t)};Ed.prototype._isDynamic=function(e,t){return!e.position.isConstant||!K.isConstant(e.orientation)||!t.radii.isConstant||!K.isConstant(t.innerRadii)||!K.isConstant(t.stackPartitions)||!K.isConstant(t.slicePartitions)||!K.isConstant(t.outlineWidth)||!K.isConstant(t.minimumClock)||!K.isConstant(t.maximumClock)||!K.isConstant(t.minimumCone)||!K.isConstant(t.maximumCone)||!K.isConstant(t.subdivisions)};Ed.prototype._setStaticOptions=function(e,t){let n=K.getValueOrDefault(t.heightReference,Be.MINIMUM_VALUE,Je.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof kt?ln.VERTEX_FORMAT:so.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(Be.MINIMUM_VALUE,i.radii),i.innerRadii=K.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=K.getValueOrUndefined(t.minimumClock,Be.MINIMUM_VALUE),i.maximumClock=K.getValueOrUndefined(t.maximumClock,Be.MINIMUM_VALUE),i.minimumCone=K.getValueOrUndefined(t.minimumCone,Be.MINIMUM_VALUE),i.maximumCone=K.getValueOrUndefined(t.maximumCone,Be.MINIMUM_VALUE),i.stackPartitions=K.getValueOrUndefined(t.stackPartitions,Be.MINIMUM_VALUE),i.slicePartitions=K.getValueOrUndefined(t.slicePartitions,Be.MINIMUM_VALUE),i.subdivisions=K.getValueOrUndefined(t.subdivisions,Be.MINIMUM_VALUE),i.offsetAttribute=n!==Je.NONE?cn.ALL:void 0};Ed.prototype._onEntityPropertyChanged=Wp;Ed.DynamicGeometryUpdater=xP;function xP(e,t,n){ni.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new M,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new h,this._material={}}l(Object.create)&&(xP.prototype=Object.create(ni.prototype),xP.prototype.constructor=xP);xP.prototype.update=function(e){let t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!K.getValueOrDefault(n.show,e,!0)){l(this._primitive)&&(this._primitive.show=!1),l(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1);return}let i=K.getValueOrUndefined(n.radii,e,b8e),o=l(i)?t.computeModelMatrixForHeightReference(e,n.heightReference,i.z*.5,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!l(o)||!l(i)){l(this._primitive)&&(this._primitive.show=!1),l(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1);return}let r=K.getValueOrDefault(n.fill,e,!0),s=K.getValueOrDefault(n.outline,e,!1),a=K.getValueOrClonedDefault(n.outlineColor,e,O.BLACK,qK),c=Oo.getValue(e,g(n.material,p8e),this._material),d=K.getValueOrUndefined(n.innerRadii,e,y8e),u=K.getValueOrUndefined(n.minimumClock,e),m=K.getValueOrUndefined(n.maximumClock,e),p=K.getValueOrUndefined(n.minimumCone,e),b=K.getValueOrUndefined(n.maximumCone,e),f=K.getValueOrUndefined(n.stackPartitions,e),x=K.getValueOrUndefined(n.slicePartitions,e),_=K.getValueOrUndefined(n.subdivisions,e),C=K.getValueOrDefault(n.outlineWidth,e,1),V=K.getValueOrDefault(n.heightReference,e,Je.NONE),L=V!==Je.NONE?cn.ALL:void 0,R=this._scene.mode,G=R===ie.SCENE3D&&V===Je.NONE,X=this._options,v=this._geometryUpdater.shadowsProperty.getValue(e),F=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),A=K.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,QK,jK);if(!G||this._lastSceneMode!==R||!l(this._primitive)||X.stackPartitions!==f||X.slicePartitions!==x||l(d)&&!h.equals(X.innerRadii!==d)||X.minimumClock!==u||X.maximumClock!==m||X.minimumCone!==p||X.maximumCone!==b||X.subdivisions!==_||this._lastOutlineWidth!==C||X.offsetAttribute!==L){let Z=this._primitives;Z.removeAndDestroy(this._primitive),Z.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=R,this._lastOutlineWidth=C,X.stackPartitions=f,X.slicePartitions=x,X.subdivisions=_,X.offsetAttribute=L,X.radii=h.clone(G?g8e:i,X.radii),l(d)?G?X.innerRadii=h.fromElements(d.x/i.x,d.y/i.y,d.z/i.z,X.innerRadii):X.innerRadii=h.clone(d,X.innerRadii):X.innerRadii=void 0,X.minimumClock=u,X.maximumClock=m,X.minimumCone=p,X.maximumCone=b;let E=new so({material:c,translucent:c.isTranslucent(),closed:!0});X.vertexFormat=E.vertexFormat;let I=this._geometryUpdater.createFillGeometryInstance(e,G,this._modelMatrix);this._primitive=Z.add(new Rn({geometryInstances:I,appearance:E,asynchronous:!1,shadows:v}));let w=this._geometryUpdater.createOutlineGeometryInstance(e,G,this._modelMatrix);this._outlinePrimitive=Z.add(new Rn({geometryInstances:w,appearance:new ln({flat:!0,translucent:w.attributes.color.value[3]!==255,renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(C)}}),asynchronous:!1,shadows:v})),this._lastShow=r,this._lastOutlineShow=s,this._lastOutlineColor=O.clone(a,this._lastOutlineColor),this._lastDistanceDisplayCondition=F,this._lastOffset=h.clone(A,this._lastOffset)}else if(this._primitive.ready){let Z=this._primitive,E=this._outlinePrimitive;Z.show=!0,E.show=!0,Z.appearance.material=c;let I=this._attributes;l(I)||(I=Z.getGeometryInstanceAttributes(t),this._attributes=I),r!==this._lastShow&&(I.show=xn.toValue(r,I.show),this._lastShow=r);let w=this._outlineAttributes;l(w)||(w=E.getGeometryInstanceAttributes(t),this._outlineAttributes=w),s!==this._lastOutlineShow&&(w.show=xn.toValue(s,w.show),this._lastOutlineShow=s),O.equals(a,this._lastOutlineColor)||(w.color=Ot.toValue(a,w.color),O.clone(a,this._lastOutlineColor)),It.equals(F,this._lastDistanceDisplayCondition)||(I.distanceDisplayCondition=kn.toValue(F,I.distanceDisplayCondition),w.distanceDisplayCondition=kn.toValue(F,w.distanceDisplayCondition),It.clone(F,this._lastDistanceDisplayCondition)),h.equals(A,this._lastOffset)||(I.offset=Ji.toValue(A,I.offset),w.offset=Ji.toValue(A,I.offset),h.clone(A,this._lastOffset))}G&&(i.x=Math.max(i.x,.001),i.y=Math.max(i.y,.001),i.z=Math.max(i.z,.001),o=M.multiplyByScale(o,i,o),this._primitive.modelMatrix=o,this._outlinePrimitive.modelMatrix=o)};var _P=Ed;var n7n=T(S(),1);var L8n=T(S(),1);function N1(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.vertexFormat,Pe.DEFAULT);this._vertexFormat=t,this._workerName=\"createPlaneGeometry\"}N1.packedLength=Pe.packedLength;N1.pack=function(e,t,n){return n=g(n,0),Pe.pack(e._vertexFormat,t,n),t};var lme=new Pe,_8e={vertexFormat:lme};N1.unpack=function(e,t,n){t=g(t,0);let i=Pe.unpack(e,t,lme);return l(n)?(n._vertexFormat=Pe.clone(i,n._vertexFormat),n):new N1(_8e)};var gk=new h(-.5,-.5,0),xk=new h(.5,.5,0);N1.createGeometry=function(e){let t=e._vertexFormat,n=new hn,i,o;if(t.position){if(o=new Float64Array(4*3),o[0]=gk.x,o[1]=gk.y,o[2]=0,o[3]=xk.x,o[4]=gk.y,o[5]=0,o[6]=xk.x,o[7]=xk.y,o[8]=0,o[9]=gk.x,o[10]=xk.y,o[11]=0,n.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:o}),t.normal){let r=new Float32Array(12);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=1,r[9]=0,r[10]=0,r[11]=1,n.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})}if(t.st){let r=new Float32Array(8);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=1,r[5]=1,r[6]=0,r[7]=1,n.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:r})}if(t.tangent){let r=new Float32Array(12);r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=1,r[10]=0,r[11]=0,n.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})}if(t.bitangent){let r=new Float32Array(12);r[0]=0,r[1]=1,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=1,r[8]=0,r[9]=0,r[10]=1,r[11]=0,n.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})}i=new Uint16Array(2*3),i[0]=0,i[1]=1,i[2]=2,i[3]=0,i[4]=2,i[5]=3}return new ut({attributes:n,indices:i,primitiveType:we.TRIANGLES,boundingSphere:new ce(h.ZERO,Math.sqrt(2))})};var TP=N1;var w8n=T(S(),1);function k1(){this._workerName=\"createPlaneOutlineGeometry\"}k1.packedLength=0;k1.pack=function(e,t){return t};k1.unpack=function(e,t,n){return l(n)?n:new k1};var Dy=new h(-.5,-.5,0),_k=new h(.5,.5,0);k1.createGeometry=function(){let e=new hn,t=new"
}