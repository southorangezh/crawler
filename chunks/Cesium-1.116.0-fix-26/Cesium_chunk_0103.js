{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 103,
    "total_chunks": 194,
    "chunk_size": 50353,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.708Z"
  },
  "content": "this._asset}},extensions:{get:function(){return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){fs.setOwner(e,this,\"_clippingPlanes\")}},properties:{get:function(){return this._properties}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return Is(\"Cesium3DTileset.basePath\",\"Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead.\"),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},hasMixedContent:{get:function(){return this._hasMixedContent},set:function(e){this._hasMixedContent=e}},isSkippingLevelOfDetail:{get:function(){return this.skipLevelOfDetail&&!l(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if(l(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if(l(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){this._maximumScreenSpaceError=e,this._memoryAdjustedScreenSpaceError=e}},cacheBytes:{get:function(){return this._cacheBytes},set:function(e){this._cacheBytes=e}},maximumCacheOverflowBytes:{get:function(){return this._maximumCacheOverflowBytes},set:function(e){this._maximumCacheOverflowBytes=e}},memoryAdjustedScreenSpaceError:{get:function(){return this._memoryAdjustedScreenSpaceError}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){this._pointCloudShading=e}},root:{get:function(){return this._root}},boundingSphere:{get:function(){return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=M.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){let e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return l(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(M.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):M.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e,vle(this)}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){typeof e==\"number\"&&(e=`featureId_${e}`),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){typeof e==\"number\"&&(e=`instanceFeatureId_${e}`),this._instanceFeatureIdLabel=e}}});Qo.fromIonAssetId=async function(e,t){let n=await md.fromAssetId(e);return Qo.fromUrl(n,t)};Qo.fromUrl=async function(e,t){t=g(t,g.EMPTY_OBJECT);let n=Xe.createIfNeeded(e),i;n.extension===\"json\"?i=n.getBaseUri(!0):n.isDataUri&&(i=\"\");let o=await Qo.loadJson(n),r=await gJe(n,o),s=new Qo(t);s._resource=n,s._url=n.url,s._basePath=i,s._metadataExtension=r,s._geometricError=o.geometricError,s._scaledGeometricError=o.geometricError;let a=o.asset;s._asset=a,s._extras=o.extras,vle(s);let c=l(o.asset.gltfUpAxis)?Ro.fromName(o.asset.gltfUpAxis):Ro.Y,d=g(t.modelUpAxis,c),u=g(t.modelForwardAxis,Ro.X);s._properties=o.properties,s._extensionsUsed=o.extensionsUsed,s._extensions=o.extensions,s._modelUpAxis=d,s._modelForwardAxis=u,s._root=s.loadTileset(n,o);let p=s._root.createBoundingVolume(o.root.boundingVolume,M.IDENTITY).boundingSphere.center,b=s._ellipsoid.cartesianToCartographic(p);return l(b)&&b.height>ai._defaultMinTerrainHeight&&(s._initialClippingPlanesOriginMatrix=Wt.eastNorthUpToFixedFrame(p)),s._clippingPlanesOriginMatrix=M.clone(s._initialClippingPlanesOriginMatrix),s};Qo.loadJson=function(e){return Xe.createIfNeeded(e).fetchJson()};Qo.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()};Qo.prototype.loadTileset=function(e,t,n){let i=t.asset;if(!l(i))throw new ue(\"Tileset must have an asset property.\");if(i.version!==\"0.0\"&&i.version!==\"1.0\"&&i.version!==\"1.1\")throw new ue(\"The tileset must be 3D Tiles version 0.0, 1.0, or 1.1\");l(t.extensionsRequired)&&Qo.checkSupportedExtensions(t.extensionsRequired);let o=this._statistics,r=i.tilesetVersion;l(r)&&(this._basePath+=`?v=${r}`,e=e.clone(),e.setQueryParameters({v:r}));let s=Rle(this,e,t.root,n);l(n)&&(n.children.push(s),s._depth=n._depth+1);let a=[];for(a.push(s);a.length>0;){let c=a.pop();++o.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&c.refine===vo.ADD;let d=c._header.children;if(l(d))for(let u=0;u<d.length;++u){let m=d[u],p=Rle(this,e,m,c);c.children.push(p),p._depth=c._depth+1,a.push(p)}this._cullWithChildrenBounds&&L2.checkChildrenWithinParent(c)}return s};function Rle(e,t,n,i){if(!(l(n.implicitTiling)||oi(n,\"3DTILES_implicit_tiling\")))return new Pu(e,t,n,i);let r=e.schema,s=new W_(t,n,r),a=new P_({subdivisionScheme:s.subdivisionScheme,subtreeLevels:s.subtreeLevels,level:0,x:0,y:0,z:0}),c=s.subtreeUriTemplate.getDerivedResource({templateValues:a.getTemplateValues()}).url,u=Oe(n,!0);u.contents=[{uri:c}],delete u.content,delete u.extensions;let m=new Pu(e,t,u,i);return m.implicitTileset=s,m.implicitCoordinates=a,m}async function gJe(e,t){let n=oi(t,\"3DTILES_metadata\")?t.extensions[\"3DTILES_metadata\"]:t,i;if(l(n.schemaUri))e=e.getDerivedResource({url:n.schemaUri}),i=Di.getSchemaLoader({resource:e});else if(l(n.schema))i=Di.getSchemaLoader({schema:n.schema});else return;await i.load();let o=new X_({schema:i.schema,metadataJson:n});return Di.unload(i),o}var Gle=new h,xJe=new he,_Je=new M,TJe=new h,SJe=new h,CJe=new h,VJe=new h;function LJe(e,t){let n,i,o,r,s,a=t.camera,c=e._root,d=c.contentBoundingVolume;if(d instanceof Iu)n=h.normalize(a.positionWC,Gle),i=a.directionWC,o=a.positionCartographic.height,r=d.minimumHeight,s=d.maximumHeight;else{let x=M.inverseTransformation(c.computedTransform,_Je),_=t.mapProjection.ellipsoid,C=d.boundingVolume,V=M.multiplyByPoint(x,C.center,TJe);if(h.magnitude(V)>_.minimumRadius){let L=he.fromCartesian(V,_,xJe);n=h.normalize(a.positionWC,Gle),i=a.directionWC,o=a.positionCartographic.height,r=0,s=L.height*2}else{let L=M.multiplyByPoint(x,a.positionWC,SJe);if(n=h.UNIT_Z,i=M.multiplyByPointAsVector(x,a.directionWC,CJe),i=h.normalize(i,i),o=L.z,d instanceof _d){let R=$.getColumn(C.halfAxes,2,VJe),G=h.magnitude(R);r=V.z-G,s=V.z+G}else if(d instanceof b0){let R=C.radius;r=V.z-R,s=V.z+R}}}let u=e.dynamicScreenSpaceErrorHeightFalloff,m=r+(s-r)*u,p=s,b=P.clamp((o-m)/(p-m),0,1),f=1-Math.abs(h.dot(i,n));f=f*(1-b),e._dynamicScreenSpaceErrorComputedDensity=e.dynamicScreenSpaceErrorDensity*f}function ZJe(e,t){if(t.hasEmptyContent)return;let{statistics:n}=e,i=t.contentExpired,o=t.requestContent();l(o)&&(o.then(r=>{!l(r)||t.isDestroyed()||e.isDestroyed()||(e._processingQueue.push(t),++n.numberOfTilesProcessing)}).catch(r=>{Ile(r,e,t)}),i&&(t.hasTilesetContent||t.hasImplicitContent?kJe(e,t):(n.decrementLoadCounts(t.content),--n.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t))}function Xle(e,t){return e._priority-t._priority}Qo.prototype.postPassesUpdate=function(e){l(this._root)&&(RJe(this,e),DJe(this,e),this._cache.unloadTiles(this,Ple),this._styleApplied&&this._styleEngine.resetDirty(),this._styleApplied=!1)};Qo.prototype.prePassesUpdate=function(e){if(!l(this._root))return;vJe(this,e);let t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,l(t)&&t.enabled&&t.update(e),l(this._loadTimestamp)||(this._loadTimestamp=te.clone(e.time)),this._timeSinceLoad=Math.max(te.secondsDifference(e.time,this._loadTimestamp)*1e3,0),this.dynamicScreenSpaceError&&LJe(this,e),e.newFrame&&this._cache.reset()};function RJe(e,t){let n=e._requestedTilesInFlight,i=0;for(let o=0;o<n.length;++o){let r=n[o],s=t.frameNumber-r._touchedFrame>=1;if(r._contentState!==Fo.LOADING){++i;continue}else if(s){r.cancelRequests(),++i;continue}i>0&&(n[o-i]=r)}n.length-=i}function GJe(e){let t=e._requestedTiles;t.sort(Xle);for(let n=0;n<t.length;++n)ZJe(e,t[n])}function Ile(e,t,n){if(t.isDestroyed())return;let i;n.isDestroyed()||(i=n._contentResource.url);let o=l(e.message)?e.message:e.toString();t.tileFailed.numberOfListeners>0?t.tileFailed.raiseEvent({url:i,message:o}):(console.log(`A 3D tile failed to load: ${i}`),console.log(`Error: ${o}`))}function EJe(e){let t=e._processingQueue,n=0;for(let i=0;i<t.length;++i){let o=t[i];if(o.isDestroyed()||o._contentState!==Fo.PROCESSING){++n;continue}n>0&&(t[i-n]=o)}t.length-=n}var XJe=new he,IJe=new he,WJe=new h;function PJe(e,t,n){if(!e.enableCollision||!e.show)return;let i=e._addHeightCallbacks,o=t.boundingSphere;for(let r of i){if(r.invoked||t._wasSelectedLastFrame)continue;let s=r.ellipsoid,a=he.clone(r.positionCartographic,XJe),c=he.fromCartesian(o.center,s,IJe);l(c)&&(a.height=c.height);let d=he.toCartesian(a,s,WJe);if(h.distance(d,o.center)<=o.radius){let u=n.tilesetPassState&&n.tilesetPassState.pass;n.afterRender.push(()=>{l(r.callback)&&r.callback(a,t,u),r.invoked=!1})}}}function vJe(e,t){EJe(e);let n=e._processingQueue,{cacheBytes:i,maximumCacheOverflowBytes:o,statistics:r}=e,s=i+o,a=!1;for(let c=0;c<n.length;++c){if(e.totalMemoryUsageInBytes>s){a=!0;break}let d=n[c];try{d.process(e,t),d.contentReady&&(--r.numberOfTilesProcessing,e.tileLoad.raiseEvent(d))}catch(u){--r.numberOfTilesProcessing,Ile(u,e,d)}}e.totalMemoryUsageInBytes<i?FJe(e):a&&n.length>0&&wJe(e)}function wJe(e){e._memoryAdjustedScreenSpaceError*=1.02;let t=e._processingQueue;for(let n=0;n<t.length;++n)t[n].updatePriority();t.sort(Xle)}function FJe(e){e._memoryAdjustedScreenSpaceError=Math.max(e.memoryAdjustedScreenSpaceError/1.02,e.maximumScreenSpaceError)}var zN=new h,AJe={maximumFractionDigits:3};function Ele(e){let t=e/1048576;return t<1?t.toLocaleString(void 0,AJe):Math.round(t).toLocaleString()}function $H(e){let{halfAxes:t,radius:n,center:i}=e.boundingVolume.boundingVolume,o=h.clone(i,zN);if(l(t))o.x+=.75*(t[0]+t[3]+t[6]),o.y+=.75*(t[1]+t[4]+t[7]),o.z+=.75*(t[2]+t[5]+t[8]);else if(l(n)){let r=h.normalize(i,zN);r=h.multiplyByScalar(r,.75*n,zN),o=h.add(r,i,zN)}return o}function eK(e,t,n){let i=\"\",o=0;if(t.debugShowGeometricError&&(i+=` Geometric error: ${e.geometricError}`,o++),t.debugShowRenderingStatistics&&(i+=` Commands: ${e.commandsLength}`,o++,e.content.pointsLength>0&&(i+=` Points: ${e.content.pointsLength}`,o++),e.content.trianglesLength>0&&(i+=` Triangles: ${e.content.trianglesLength}`,o++),i+=` Features: ${e.content.featuresLength}`,o++),t.debugShowMemoryUsage&&(i+=` Texture Memory: ${Ele(e.content.texturesByteLength)}`,i+=` Geometry Memory: ${Ele(e.content.geometryByteLength)}`,o+=2),t.debugShowUrl)if(e.hasMultipleContents){i+=` Urls:`;let s=e.content.innerContentUrls;for(let a=0;a<s.length;a++)i+=` - ${s[a]}`;o+=s.length}else i+=` Url: ${e._contentHeader.uri}`,o++;let r={text:i.substring(1),position:n,font:`${19-o}px sans-serif`,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(r)}function MJe(e,t){let n=e._selectedTiles,i=n.length,o=e._emptyTiles,r=o.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if(l(e.debugPickedTile)){let s=l(e.debugPickPosition)?e.debugPickPosition:$H(e.debugPickedTile),a=eK(e.debugPickedTile,e,s);a.pixelOffset=new D(15,-15)}}else{for(let s=0;s<i;++s){let a=n[s];eK(a,e,$H(a))}for(let s=0;s<r;++s){let a=o[s];(a.hasTilesetContent||a.hasImplicitContent)&&eK(a,e,$H(a))}}e._tileDebugLabels.update(t)}function NJe(e,t,n){e._styleEngine.applyStyle(e),e._styleApplied=!0;let{commandList:i,context:o}=t,r=i.length,s=e._selectedTiles,a=e.isSkippingLevelOfDetail&&e._hasMixedContent&&o.stencilBuffer&&s.length>0;e._backfaceCommands.length=0,a&&(l(e._stencilClearCommand)||(e._stencilClearCommand=new ei({stencil:0,pass:Ze.CESIUM_3D_TILE,renderState:Ne.fromCache({stencilMask:Mt.SKIP_LOD_MASK})})),i.push(e._stencilClearCommand));let{statistics:c,tileVisible:d}=e,u=n.isRender,m=i.length;for(let f=0;f<s.length;++f){let x=s[f];u&&d.raiseEvent(x),PJe(e,x,t),x.update(e,t,n),c.incrementSelectionCounts(x.content),++c.selected}let p=e._emptyTiles;for(let f=0;f<p.length;++f)p[f].update(e,t,n);let b=i.length-m;if(e._backfaceCommands.trim(),a){let f=e._backfaceCommands.values,x=f.length;i.length+=x;for(let _=b-1;_>=0;--_)i[m+x+_]=i[m+_];for(let _=0;_<x;++_)i[m+_]=f[_]}b=i.length-r,c.numberOfCommands=b,u&&(e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&b>0&&e._pointCloudEyeDomeLighting.update(t,r,e.pointCloudShading,e.boundingSphere),e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?(l(e._tileDebugLabels)||(e._tileDebugLabels=new hf),MJe(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}var Wle=[];function kJe(e,t){let n=t,i=Wle;for(i.push(t);i.length>0;){t=i.pop();let o=t.children;for(let r=0;r<o.length;++r)i.push(o[r]);t!==n&&(UJe(e,t),--e._statistics.numberOfTilesTotal)}n.children=[]}function Ple(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function UJe(e,t){e._cache.unloadTile(e,t,Ple),t.destroy()}Qo.prototype.trimLoadedTiles=function(){this._cache.trim()};function DJe(e,t){let n=e._statistics,i=e._statisticsLast,o=n.numberOfPendingRequests,r=n.numberOfTilesProcessing,s=i.numberOfPendingRequests,a=i.numberOfTilesProcessing;x0.clone(n,i);let c=o!==s||r!==a;c&&t.afterRender.push(function(){return e.loadProgress.raiseEvent(o,r),!0}),e._tilesLoaded=n.numberOfPendingRequests===0&&n.numberOfTilesProcessing===0&&n.numberOfAttemptedRequests===0,c&&e._tilesLoaded&&(t.afterRender.push(function(){return e.allTilesLoaded.raiseEvent(),!0}),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push(function(){return e.initialTilesLoaded.raiseEvent(),!0})))}function BJe(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}function YJe(e,t){t.frameNumber===e._updatedModelMatrixFrame&&l(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!M.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=M.clone(e.modelMatrix,e._previousModelMatrix)))}function OJe(e,t,n,i){if(t.mode===ie.MORPHING||!l(e._root))return!1;let o=e._statistics;o.clear(),++e._updatedVisibilityFrame,BJe(e),YJe(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;let r=e.getTraversal(i).selectTiles(e,t);if(i.requestTiles&&GJe(e),NJe(e,t,i),x0.clone(o,n),i.isRender){let s=e._credits;if(l(s)&&o.selected!==0)for(let a=0;a<s.length;++a){let c=s[a];t.creditDisplay.addCreditToNextFrame(c)}}return r}function vle(e){let t=e._credits;l(t)||(t=[]),t.length=0,l(e.resource.credits)&&e.resource.credits.forEach(i=>{t.push(Zt.clone(i))});let n=e.asset.extras;if(l(n)&&l(n.cesium)&&l(n.cesium.credits)){let i=n.cesium.credits;for(let o=0;o<i.length;++o){let r=i[o];t.push(new Zt(r.html))}}t.forEach(i=>i.showOnScreen=i.showOnScreen||e._showCreditsOnScreen),e._credits=t}Qo.prototype.getTraversal=function(e){let{pass:t}=e;return t===Io.MOST_DETAILED_PRELOAD||t===Io.MOST_DETAILED_PICK?v2:this.isSkippingLevelOfDetail?k2:A2};Qo.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)};Qo.prototype.updateForPass=function(e,t){let n=t.pass;if(n===Io.PRELOAD&&(!this.preloadWhenHidden||this.show)||n===Io.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||n===Io.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;let i=e.commandList,o=e.camera,r=e.cullingVolume;t.ready=!1;let s=Io.getPassOptions(n),a=s.ignoreCommands,c=g(t.commandList,i),d=c.length;e.commandList=c,e.camera=g(t.camera,o),e.cullingVolume=g(t.cullingVolume,r);let u=this._statisticsPerPass[n];(this.show||a)&&(this._pass=n,t.ready=OJe(this,e,u,s)),a&&(c.length=d),e.commandList=i,e.camera=o,e.cullingVolume=r};Qo.prototype.hasExtension=function(e){return l(this._extensionsUsed)?this._extensionsUsed.indexOf(e)>-1:!1};Qo.prototype.isDestroyed=function(){return!1};Qo.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),l(this._root)){let e=Wle;for(e.push(this._root);e.length>0;){let t=e.pop();t.destroy();let n=t.children;for(let i=0;i<n.length;++i)e.push(n[i])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,me(this)};Qo.supportedExtensions={\"3DTILES_metadata\":!0,\"3DTILES_implicit_tiling\":!0,\"3DTILES_content_gltf\":!0,\"3DTILES_multiple_contents\":!0,\"3DTILES_bounding_volume_S2\":!0,\"3DTILES_batch_table_hierarchy\":!0,\"3DTILES_draco_point_compression\":!0,MAXAR_content_geojson:!0};Qo.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!Qo.supportedExtensions[e[t]])throw new ue(`Unsupported 3D Tiles Extension: ${e[t]}`)};var zJe=new bn,HJe=new h,KJe=new he;Qo.prototype.getHeight=function(e,t){let n=t.globe?.ellipsoid;l(n)||(n=oe.WGS84);let i=zJe,o=n.cartographicToCartesian(e,i.direction);h.normalize(i.direction,i.direction),i.direction=h.normalize(o,i.direction),i.direction=h.negate(o,i.direction),i.origin=h.multiplyByScalar(i.direction,-2*n.maximumRadius,i.origin);let r=this.pick(i,t.frameState,HJe);if(l(r))return n.cartesianToCartographic(r,KJe)?.height};Qo.prototype.updateHeight=function(e,t,n){n=g(n,oe.WGS84);let i={positionCartographic:e,ellipsoid:n,callback:t,invoked:!1},o=()=>{let r=this._addHeightCallbacks,s=r.length;for(let a=0;a<s;++a)if(r[a]===i){r.splice(a,1);break}i.callback&&(i.callback=void 0)};return this._addHeightCallbacks.push(i),o};var JJe=new Va,QJe=new h;Qo.prototype.pick=function(e,t,n){if(!t.context.webgl2&&!this._enablePick)return;let i=this._selectedTiles,o=i.length,r=[];for(let c=0;c<o;++c){let d=i[c],u=jn.raySphere(e,d.contentBoundingVolume.boundingSphere,JJe);!l(u)||!l(d.content)||r.push(d)}let s=r.length;r.sort((c,d)=>{let u=ce.distanceSquaredTo(c.contentBoundingVolume.boundingSphere,e.origin),m=ce.distanceSquaredTo(d.contentBoundingVolume.boundingSphere,e.origin);return u-m});let a;for(let c=0;c<s;++c){let u=r[c].content.pick(e,t,QJe);if(l(u))return a=h.clone(u,n),a}};var sa=Qo;var jJe=new M;function Iy(e,t){t.collectionChanged.addEventListener(Iy.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=t,this._tilesetHash={},this._entitiesToVisualize=new Lt,this._onCollectionChanged(t,t.values,[],[])}Iy.prototype.update=function(e){let t=this._entitiesToVisualize.values,n=this._tilesetHash,i=this._primitives;for(let o=0,r=t.length;o<r;o++){let s=t[o],a=s._tileset,c,d=n[s.id],u=s.isShowing&&s.isAvailable(e)&&K.getValueOrDefault(a._show,e,!0),m;u&&(m=s.computeModelMatrix(e,jJe),c=Xe.createIfNeeded(K.getValueOrUndefined(a._uri,e)));let p=l(d)?d.tilesetPrimitive:void 0;if(!u){l(p)&&(p.show=!1);continue}(!l(d)||c.url!==d.url)&&(l(p)&&i.removeAndDestroy(p),delete n[s.id],qJe(c,n,s,i)),l(p)&&(p.show=!0,l(m)&&(p.modelMatrix=m),p.maximumScreenSpaceError=K.getValueOrDefault(a.maximumScreenSpaceError,e,p.maximumScreenSpaceError))}return!0};Iy.prototype.isDestroyed=function(){return!1};Iy.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(Iy.prototype._onCollectionChanged,this);let e=this._entitiesToVisualize.values,t=this._tilesetHash,n=this._primitives;for(let i=e.length-1;i>-1;i--)tK(this,e[i],t,n);return me(this)};Iy.prototype.getBoundingSphere=function(e,t){let n=this._tilesetHash[e.id];if(!l(n)||n.loadFail)return ht.FAILED;let i=n.tilesetPrimitive;return l(i)?i.show?(ce.clone(i.boundingSphere,t),ht.DONE):ht.FAILED:ht.PENDING};Iy.prototype._onCollectionChanged=function(e,t,n,i){let o,r,s=this._entitiesToVisualize,a=this._tilesetHash,c=this._primitives;for(o=t.length-1;o>-1;o--)r=t[o],l(r._tileset)&&s.set(r.id,r);for(o=i.length-1;o>-1;o--)r=i[o],l(r._tileset)?s.set(r.id,r):(tK(this,r,a,c),s.remove(r.id));for(o=n.length-1;o>-1;o--)r=n[o],tK(this,r,a,c),s.remove(r.id)};function tK(e,t,n,i){let o=n[t.id];l(o)&&(l(o.tilesetPrimitive)&&i.removeAndDestroy(o.tilesetPrimitive),delete n[t.id])}async function qJe(e,t,n,i){t[n.id]={url:e.url,loadFail:!1};try{let o=await sa.fromUrl(e);if(o.id=n,i.add(o),!l(t[n.id]))return;t[n.id].tilesetPrimitive=o}catch(o){console.error(o),t[n.id].loadFail=!0}}var U2=Iy;var hUn=T(S(),1);var $Je=O.WHITE,eQe=O.BLACK,tQe=new D(2,2);function c1(e){e=g(e,g.EMPTY_OBJECT),this._definitionChanged=new ge,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.repeat=e.repeat}Object.defineProperties(c1.prototype,{isConstant:{get:function(){return K.isConstant(this._evenColor)&&K.isConstant(this._oddColor)&&K.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},evenColor:de(\"evenColor\"),oddColor:de(\"oddColor\"),repeat:de(\"repeat\")});c1.prototype.getType=function(e){return\"Checkerboard\"};c1.prototype.getValue=function(e,t){return l(t)||(t={}),t.lightColor=K.getValueOrClonedDefault(this._evenColor,e,$Je,t.lightColor),t.darkColor=K.getValueOrClonedDefault(this._oddColor,e,eQe,t.darkColor),t.repeat=K.getValueOrDefault(this._repeat,e,tQe),t};c1.prototype.equals=function(e){return this===e||e instanceof c1&&K.equals(this._evenColor,e._evenColor)&&K.equals(this._oddColor,e._oddColor)&&K.equals(this._repeat,e._repeat)};var l1=c1;var IUn=T(S(),1);var VUn=T(S(),1);var wle={id:void 0};function D2(e){if(e._firing){e._refire=!0;return}if(e._suspendCount===0){let t=e._addedEntities,n=e._removedEntities,i=e._changedEntities;if(i.length!==0||t.length!==0||n.length!==0){e._firing=!0;do{e._refire=!1;let o=t.values.slice(0),r=n.values.slice(0),s=i.values.slice(0);t.removeAll(),n.removeAll(),i.removeAll(),e._collectionChanged.raiseEvent(e,o,r,s)}while(e._refire);e._firing=!1}}}function uc(e){this._owner=e,this._entities=new Lt,this._addedEntities=new Lt,this._removedEntities=new Lt,this._changedEntities=new Lt,this._suspendCount=0,this._collectionChanged=new ge,this._id=Bn(),this._show=!0,this._firing=!1,this._refire=!1}uc.prototype.suspendEvents=function(){this._suspendCount++};uc.prototype.resumeEvents=function(){this._suspendCount--,D2(this)};Object.defineProperties(uc.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(e){if(e===this._show)return;this.suspendEvents();let t,n=[],i=this._entities.values,o=i.length;for(t=0;t<o;t++)n.push(i[t].isShowing);for(this._show=e,t=0;t<o;t++){let r=n[t],s=i[t];r!==s.isShowing&&s.definitionChanged.raiseEvent(s,\"isShowing\",s.isShowing,r)}this.resumeEvents()}},owner:{get:function(){return this._owner}}});uc.prototype.computeAvailability=function(){let e=Be.MAXIMUM_VALUE,t=Be.MINIMUM_VALUE,n=this._entities.values;for(let i=0,o=n.length;i<o;i++){let s=n[i].availability;if(l(s)){let a=s.start,c=s.stop;te.lessThan(a,e)&&!a.equals(Be.MINIMUM_VALUE)&&(e=a),te.greaterThan(c,t)&&!c.equals(Be.MAXIMUM_VALUE)&&(t=c)}}return Be.MAXIMUM_VALUE.equals(e)&&(e=Be.MINIMUM_VALUE),Be.MINIMUM_VALUE.equals(t)&&(t=Be.MAXIMUM_VALUE),new Sn({start:e,stop:t})};uc.prototype.add=function(e){e instanceof zo||(e=new zo(e));let t=e.id,n=this._entities;if(n.contains(t))throw new fe(`An entity with id ${t} already exists in this collection.`);return e.entityCollection=this,n.set(t,e),this._removedEntities.remove(t)||this._addedEntities.set(t,e),e.definitionChanged.addEventListener(uc.prototype._onEntityDefinitionChanged,this),D2(this),e};uc.prototype.remove=function(e){return l(e)?this.removeById(e.id):!1};uc.prototype.contains=function(e){return this._entities.get(e.id)===e};uc.prototype.removeById=function(e){if(!l(e))return!1;let n=this._entities.get(e);return this._entities.remove(e)?(this._addedEntities.remove(e)||(this._removedEntities.set(e,n),this._changedEntities.remove(e)),this._entities.remove(e),n.definitionChanged.removeEventListener(uc.prototype._onEntityDefinitionChanged,this),D2(this),!0):!1};uc.prototype.removeAll=function(){let e=this._entities,t=e.length,n=e.values,i=this._addedEntities,o=this._removedEntities;for(let r=0;r<t;r++){let s=n[r],a=s.id,c=i.get(a);l(c)||(s.definitionChanged.removeEventListener(uc.prototype._onEntityDefinitionChanged,this),o.set(a,s))}e.removeAll(),i.removeAll(),this._changedEntities.removeAll(),D2(this)};uc.prototype.getById=function(e){return this._entities.get(e)};uc.prototype.getOrCreateEntity=function(e){let t=this._entities.get(e);return l(t)||(wle.id=e,t=new zo(wle),this.add(t)),t};uc.prototype._onEntityDefinitionChanged=function(e){let t=e.id;this._addedEntities.contains(t)||this._changedEntities.set(t,e),D2(this)};var Us=uc;var HN={id:void 0},d1=new Array(2);function nK(e){let t=e.propertyNames,n=t.length;for(let i=0;i<n;i++)e[t[i]]=void 0;e._name=void 0,e._availability=void 0}function Fle(e,t,n,i){d1[0]=n,d1[1]=i.id,t[JSON.stringify(d1)]=i.definitionChanged.addEventListener(Er.prototype._onDefinitionChanged,e)}function Ale(e,t,n,i){d1[0]=n,d1[1]=i.id;let o=JSON.stringify(d1);t[o](),t[o]=void 0}function Wy(e){if(e._shouldRecomposite=!0,e._suspendCount!==0)return;let t=e._collections,n=t.length,i=e._collectionsCopy,o=i.length,r,s,a,c,d,u=e._composite,m=new Us(e),p=e._eventHash,b;for(r=0;r<o;r++)for(d=i[r],d.collectionChanged.removeEventListener(Er.prototype._onCollectionChanged,e),a=d.values,b=d.id,c=a.length-1;c>-1;c--)s=a[c],Ale(e,p,b,s);for(r=n-1;r>=0;r--)for(d=t[r],d.collectionChanged.addEventListener(Er.prototype._onCollectionChanged,e),a=d.values,b=d.id,c=a.length-1;c>-1;c--){s=a[c],Fle(e,p,b,s);let x=m.getById(s.id);l(x)||(x=u.getById(s.id),l(x)?nK(x):(HN.id=s.id,x=new zo(HN)),m.add(x)),x.merge(s)}e._collectionsCopy=t.slice(0),u.suspendEvents(),u.removeAll();let f=m.values;for(r=0;r<f.length;r++)u.add(f[r]);u.resumeEvents()}function Er(e,t){this._owner=t,this._composite=new Us(this),this._suspendCount=0,this._collections=l(e)?e.slice():[],this._collectionsCopy=[],this._id=Bn(),this._eventHash={},Wy(this),this._shouldRecomposite=!1}Object.defineProperties(Er.prototype,{collectionChanged:{get:function(){return this._composite._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._composite.values}},owner:{get:function(){return this._owner}}});Er.prototype.addCollection=function(e,t){l(t)?this._collections.splice(t,0,e):(t=this._collections.length,this._collections.push(e)),Wy(this)};Er.prototype.removeCollection=function(e){let t=this._collections.indexOf(e);return t!==-1?(this._collections.splice(t,1),Wy(this),!0):!1};Er.prototype.removeAllCollections=function(){this._collections.length=0,Wy(this)};Er.prototype.containsCollection=function(e){return this._collections.indexOf(e)!==-1};Er.prototype.contains=function(e){return this._composite.contains(e)};Er.prototype.indexOfCollection=function(e){return this._collections.indexOf(e)};Er.prototype.getCollection=function(e){return this._collections[e]};Er.prototype.getCollectionsLength=function(){return this._collections.length};function KN(e,t){return e.indexOf(t)}function Mle(e,t,n){let i=e._collections;if(t=P.clamp(t,0,i.length-1),n=P.clamp(n,0,i.length-1),t===n)return;let o=i[t];i[t]=i[n],i[n]=o,Wy(e)}Er.prototype.raiseCollection=function(e){let t=KN(this._collections,e);Mle(this,t,t+1)};Er.prototype.lowerCollection=function(e){let t=KN(this._collections,e);Mle(this,t,t-1)};Er.prototype.raiseCollectionToTop=function(e){let t=KN(this._collections,e);t!==this._collections.length-1&&(this._collections.splice(t,1),this._collections.push(e),Wy(this))};Er.prototype.lowerCollectionToBottom=function(e){let t=KN(this._collections,e);t!==0&&(this._collections.splice(t,1),this._collections.splice(0,0,e),Wy(this))};Er.prototype.suspendEvents=function(){this._suspendCount++,this._composite.suspendEvents()};Er.prototype.resumeEvents=function(){this._suspendCount--,this._shouldRecomposite&&this._suspendCount===0&&(Wy(this),this._shouldRecomposite=!1),this._composite.resumeEvents()};Er.prototype.computeAvailability=function(){return this._composite.computeAvailability()};Er.prototype.getById=function(e){return this._composite.getById(e)};Er.prototype._onCollectionChanged=function(e,t,n){let i=this._collectionsCopy,o=i.length,r=this._composite;r.suspendEvents();let s,a,c,d,u=n.length,m=this._eventHash,p=e.id;for(s=0;s<u;s++){let f=n[s];Ale(this,m,p,f);let x=f.id;for(a=o-1;a>=0;a--)c=i[a].getById(x),l(c)&&(l(d)||(d=r.getById(x),nK(d)),d.merge(c));l(d)||r.removeById(x),d=void 0}let b=t.length;for(s=0;s<b;s++){let f=t[s];Fle(this,m,p,f);let x=f.id;for(a=o-1;a>=0;a--)c=i[a].getById(x),l(c)&&(l(d)||(d=r.getById(x),l(d)?nK(d):(HN.id=x,d=new zo(HN),r.add(d))),d.merge(c));d=void 0}r.resumeEvents()};Er.prototype._onDefinitionChanged=function(e,t,n,i){let o=this._collections,r=this._composite,s=o.length,a=e.id,c=r.getById(a),d=c[t],u=!l(d),m=!0;for(let p=s-1;p>=0;p--){let b=o[p].getById(e.id);if(l(b)){let f=b[t];if(l(f)){if(m)if(m=!1,l(f.merge)&&l(f.clone))d=f.clone(d);else{d=f;break}d.merge(f)}}}u&&c.propertyNames.indexOf(t)===-1&&c.addProperty(t),c[t]=d};var iK=Er;var iDn=T(S(),1);var jUn=T(S(),1);var PUn=T(S(),1);function oK(){this._removalFunctions=[]}oK.prototype.add=function(e,t,n){let i=e.addEventListener(t,n);this._removalFunctions.push(i);let o=this;return function(){i();let r=o._removalFunctions;r.splice(r.indexOf(i),1)}};oK.prototype.removeAll=function(){let e=this._removalFunctions;for(let t=0,n=e.length;t<n;++t)e[t]();e.length=0};var Xr=oK;var YUn=T(S(),1);function aK(e,t){return te.compare(e.start,t.start)}function Ir(e){if(this._intervals=[],this._changedEvent=new ge,l(e)){let t=e.length;for(let n=0;n<t;n++)this.addInterval(e[n])}}Object.defineProperties(Ir.prototype,{changedEvent:{get:function(){return this._changedEvent}},start:{get:function(){let e=this._intervals;return e.length===0?void 0:e[0].start}},isStartIncluded:{get:function(){let e=this._intervals;return e.length===0?!1:e[0].isStartIncluded}},stop:{get:function(){let e=this._intervals,t=e.length;return t===0?void 0:e[t-1].stop}},isStopIncluded:{get:function(){let e=this._intervals,t=e.length;return t===0?!1:e[t-1].isStopIncluded}},length:{get:function(){return this._intervals.length}},isEmpty:{get:function(){return this._intervals.length===0}}});Ir.prototype.equals=function(e,t){if(this===e)return!0;if(!(e instanceof Ir))return!1;let n=this._intervals,i=e._intervals,o=n.length;if(o!==i.length)return!1;for(let r=0;r<o;r++)if(!Sn.equals(n[r],i[r],t))return!1;return!0};Ir.prototype.get=function(e){return this._intervals[e]};Ir.prototype.removeAll=function(){this._intervals.length>0&&(this._intervals.length=0,this._changedEvent.raiseEvent(this))};Ir.prototype.findIntervalContainingDate=function(e){let t=this.indexOf(e);return t>=0?this._intervals[t]:void 0};Ir.prototype.findDataForIntervalContainingDate=function(e){let t=this.indexOf(e);return t>=0?this._intervals[t].data:void 0};Ir.prototype.contains=function(e){return this.indexOf(e)>=0};var rK=new Sn;Ir.prototype.indexOf=function(e){let t=this._intervals;rK.start=e,rK.stop=e;let n=Lo(t,rK,aK);return n>=0?t[n].isStartIncluded?n:n>0&&t[n-1].stop.equals(e)&&t[n-1].isStopIncluded?n-1:~n:(n=~n,n>0&&n-1<t.length&&Sn.contains(t[n-1],e)?n-1:~n)};Ir.prototype.findInterval=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.start,n=e.stop,i=e.isStartIncluded,o=e.isStopIncluded,r=this._intervals;for(let s=0,a=r.length;s<a;s++){let c=r[s];if((!l(t)||c.start.equals(t))&&(!l(n)||c.stop.equals(n))&&(!l(i)||c.isStartIncluded===i)&&(!l(o)||c.isStopIncluded===o))return r[s]}};Ir.prototype.addInterval=function(e,t){if(e.isEmpty)return;let n=this._intervals;if(n.length===0||te.greaterThan(e.start,n[n.length-1].stop)){n.push(e),this._changedEvent.raiseEvent(this);return}let i=Lo(n,e,aK);i<0?i=~i:i>0&&e.isStartIncluded&&n[i-1].isStartIncluded&&n[i-1].start.equals(e.start)?--i:i<n.length&&!e.isStartIncluded&&n[i].isStartIncluded&&n[i].start.equals(e.start)&&++i;let o;for(i>0&&(o=te.compare(n[i-1].stop,e.start),(o>0||o===0&&(n[i-1].isStopIncluded||e.isStartIncluded))&&((l(t)?t(n[i-1].data,e.data):n[i-1].data===e.data)?(te.greaterThan(e.stop,n[i-1].stop)?e=new Sn({start:n[i-1].start,stop:e.stop,isStartIncluded:n[i-1].isStartIncluded,isStopIncluded:e.isStopIncluded,data:e.data}):e=new Sn({start:n[i-1].start,stop:n[i-1].stop,isStartIncluded:n[i-1].isStartIncluded,isStopIncluded:n[i-1].isStopIncluded||e.stop.equals(n[i-1].stop)&&e.isStopIncluded,data:e.data}),n.splice(i-1,1),--i):(o=te.compare(n[i-1].stop,e.stop),(o>0||o===0&&n[i-1].isStopIncluded&&!e.isStopIncluded)&&n.splice(i,0,new Sn({start:e.stop,stop:n[i-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[i-1].isStopIncluded,data:n[i-1].data})),n[i-1]=new Sn({start:n[i-1].start,stop:e.start,isStartIncluded:n[i-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:n[i-1].data}))));i<n.length&&(o=te.compare(e.stop,n[i].start),o>0||o===0&&(e.isStopIncluded||n[i].isStartIncluded));)if(l(t)?t(n[i].data,e.data):n[i].data===e.data)e=new Sn({start:e.start,stop:te.greaterThan(n[i].stop,e.stop)?n[i].stop:e.stop,isStartIncluded:e.isStartIncluded,isStopIncluded:te.greaterThan(n[i].stop,e.stop)?n[i].isStopIncluded:e.isStopIncluded,data:e.data}),n.splice(i,1);else if(n[i]=new Sn({start:e.stop,stop:n[i].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:n[i].isStopIncluded,data:n[i].data}),n[i].isEmpty)n.splice(i,1);else break;n.splice(i,0,e),this._changedEvent.raiseEvent(this)};Ir.prototype.removeInterval=function(e){if(e.isEmpty)return!1;let t=this._intervals,n=Lo(t,e,aK);n<0&&(n=~n);let i=!1;for(n>0&&(te.greaterThan(t[n-1].stop,e.start)||t[n-1].stop.equals(e.start)&&t[n-1].isStopIncluded&&e.isStartIncluded)&&(i=!0,(te.greaterThan(t[n-1].stop,e.stop)||t[n-1].isStopIncluded&&!e.isStopIncluded&&t[n-1].stop.equals(e.stop))&&t.splice(n,0,new Sn({start:e.stop,stop:t[n-1].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n-1].isStopIncluded,data:t[n-1].data})),t[n-1]=new Sn({start:t[n-1].start,stop:e.start,isStartIncluded:t[n-1].isStartIncluded,isStopIncluded:!e.isStartIncluded,data:t[n-1].data})),n<t.length&&!e.isStartIncluded&&t[n].isStartIncluded&&e.start.equals(t[n].start)&&(i=!0,t.splice(n,0,new Sn({start:t[n].start,stop:t[n].start,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data})),++n);n<t.length&&te.greaterThan(e.stop,t[n].stop);)i=!0,t.splice(n,1);return n<t.length&&e.stop.equals(t[n].stop)&&(i=!0,!e.isStopIncluded&&t[n].isStopIncluded?n+1<t.length&&t[n+1].start.equals(e.stop)&&t[n].data===t[n+1].data?(t.splice(n,1),t[n]=new Sn({start:t[n].start,stop:t[n].stop,isStartIncluded:!0,isStopIncluded:t[n].isStopIncluded,data:t[n].data})):t[n]=new Sn({start:e.stop,stop:e.stop,isStartIncluded:!0,isStopIncluded:!0,data:t[n].data}):t.splice(n,1)),n<t.length&&(te.greaterThan(e.stop,t[n].start)||e.stop.equals(t[n].start)&&e.isStopIncluded&&t[n].isStartIncluded)&&(i=!0,t[n]=new Sn({start:e.stop,stop:t[n].stop,isStartIncluded:!e.isStopIncluded,isStopIncluded:t[n].isStopIncluded,data:t[n].data})),i&&this._changedEvent.raiseEvent(this),i};Ir.prototype.intersect=function(e,t,n){let i=new Ir,o=0,r=0,s=this._intervals,a=e._intervals;for(;o<s.length&&r<a.length;){let c=s[o],d=a[r];if(te.lessThan(c.stop,d.start))++o;else if(te.lessThan(d.stop,c.start))++r;else{if(l(n)||l(t)&&t(c.data,d.data)||!l(t)&&d.data===c.data){let u=Sn.intersect(c,d,new Sn,n);u.isEmpty||i.addInterval(u,t)}te.lessThan(c.stop,d.stop)||c.stop.equals(d.stop)&&!c.isStopIncluded&&d.isStopIncluded?++o:++r}}return i};Ir.fromJulianDateArray=function(e,t){l(t)||(t=new Ir);let n=e.julianDates,i=n.length,o=e.dataCallback,r=g(e.isStartIncluded,!0),s=g(e.isStopIncluded,!0),a=g(e.leadingInterval,!1),c=g(e.trailingInterval,!1),d,u=0;a&&(++u,d=new Sn({start:Be.MINIMUM_VALUE,stop:n[0],isStartIncluded:!0,isStopIncluded:!r}),d.data=l(o)?o(d,t.length):t.length,t.addInterval(d));for(let m=0;m<i-1;++m){let p=n[m],b=n[m+1];d=new Sn({start:p,stop:b,isStartIncluded:t.length===u?r:!0,isStopIncluded:m===i-2?s:!1}),d.data=l(o)?o(d,t.length):t.length,t.addInterval(d),p=b}return c&&(d=new Sn({start:n[i-1],stop:Be.MAXIMUM_VALUE,isStartIncluded:!s,isStopIncluded:!0}),d.data=l(o)?o(d,t.length):t.length,t.addInterval(d)),t};var mc=new mp,B2=[0,31,28,31,30,31,30,31,31,30,31,30,31];function sK(e,t,n){l(n)||(n=new te),te.toGregorianDate(e,mc);let i=mc.millisecond+t.millisecond,o=mc.second+t.second,r=mc.minute+t.minute,s=mc.hour+t.hour,a=mc.day+t.day,c=mc.month+t.month,d=mc.year+t.year;for(i>=1e3&&(o+=Math.floor(i/1e3),i=i%1e3),o>=60&&(r+=Math.floor(o/60),o=o%60),r>=60&&(s+=Math.floor(r/60),r=r%60),s>=24&&(a+=Math.floor(s/24),s=s%24),B2[2]=bm(d)?29:28;a>B2[c]||c>=13;)a>B2[c]&&(a-=B2[c],++c),c>=13&&(--c,d+=Math.floor(c/12),c=c%12,++c),B2[2]=bm(d)?29:28;return mc.millisecond=i,mc.second=o,mc.minute=r,mc.hour=s,mc.day=a,mc.month=c,mc.year=d,te.fromGregorianDate(mc,n)}var nQe=new te,iQe=/P(?:([\\d.,]+)Y)?(?:([\\d.,]+)M)?(?:([\\d.,]+)W)?(?:([\\d.,]+)D)?(?:T(?:([\\d.,]+)H)?(?:([\\d.,]+)M)?(?:([\\d.,]+)S)?)?/;function Nle(e,t){if(!l(e)||e.length===0)return!1;if(t.year=0,t.month=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.millisecond=0,e[0]===\"P\"){let n=e.match(iQe);if(!l(n))return!1;if(l(n[1])&&(t.year=Number(n[1].replace(\",\",\".\"))),l(n[2])&&(t.month=Number(n[2].replace(\",\",\".\"))),l(n[3])&&(t.day=Number(n[3].replace(\",\",\".\"))*7),l(n[4])&&(t.day+=Number(n[4].replace(\",\",\".\"))),l(n[5])&&(t.hour=Number(n[5].replace(\",\",\".\"))),l(n[6])&&(t.minute=Number(n[6].replace(\",\",\".\"))),l(n[7])){let i=Number(n[7].replace(\",\",\".\"));t.second=Math.floor(i),t.millisecond=i%1*1e3}}else e[e.length-1]!==\"Z\"&&(e+=\"Z\"),te.toGregorianDate(te.fromIso8601(e,nQe),t);return t.year||t.month||t.day||t.hour||t.minute||t.second||t.millisecond}var Y2=new mp;Ir.fromIso8601=function(e,t){let n=e.iso8601.split(\"/\"),i=te.fromIso8601(n[0]),o=te.fromIso8601(n[1]),r=[];if(!Nle(n[2],Y2))r.push(i,o);else{let s=te.clone(i);for(r.push(s);te.compare(s,o)<0;)s=sK(s,Y2),te.compare(o,s)<=0&&te.clone(o,s),r.push(s)}return Ir.fromJulianDateArray({julianDates:r,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};Ir.fromIso8601DateArray=function(e,t){return Ir.fromJulianDateArray({julianDates:e.iso8601Dates.map(function(n){return te.fromIso8601(n)}),isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};Ir.fromIso8601DurationArray=function(e,t){let n=e.epoch,i=e.iso8601Durations,o=g(e.relativeToPrevious,!1),r=[],s,a,c=i.length;for(let d=0;d<c;++d)(Nle(i[d],Y2)||d===0)&&(o&&l(a)?s=sK(a,Y2):s=sK(n,Y2),r.push(s),a=s);return Ir.fromJulianDateArray({julianDates:r,isStartIncluded:e.isStartIncluded,isStopIncluded:e.isStopIncluded,leadingInterval:e.leadingInterval,trailingInterval:e.trailingInterval,dataCallback:e.dataCallback},t)};var Wr=Ir;function oQe(e,t,n,i){function o(){n.raiseEvent(e)}let r=[];t.removeAll();let s=i.length;for(let a=0;a<s;a++){let c=i.get(a);l(c.data)&&r.indexOf(c.data)===-1&&t.add(c.data.definitionChanged,o)}}function v_(){this._eventHelper=new Xr,this._definitionChanged=new ge,this._intervals=new Wr,this._intervals.changedEvent.addEventListener(v_.prototype._intervalsChanged,this)}Object.defineProperties(v_.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}});v_.prototype.getValue=function(e,t){let n=this._intervals.findDataForIntervalContainingDate(e);if(l(n))return n.getValue(e,t)};v_.prototype.equals=function(e){return this===e||e instanceof v_&&this._intervals.equals(e._intervals,K.equals)};v_.prototype._intervalsChanged=function(){oQe(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)};var hc=v_;function Py(){this._definitionChanged=new ge,this._composite=new hc,this._composite.definitionChanged.addEventListener(Py.prototype._raiseDefinitionChanged,this)}Object.defineProperties(Py.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite._intervals}}});Py.prototype.getType=function(e){let t=this._composite._intervals.findDataForIntervalContainingDate(e);if(l(t))return t.getType(e)};Py.prototype.getValue=function(e,t){let n=this._composite._intervals.findDataForIntervalContainingDate(e);if(l(n))return n.getValue(e,t)};Py.prototype.equals=function(e){return this===e||e instanceof Py&&this._composite.equals(e._composite,K.equals)};Py.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var u1=Py;var uDn=T(S(),1);function vy(e){this._referenceFrame=g(e,no.FIXED),this._definitionChanged=new ge,this._composite=new hc,this._composite.definitionChanged.addEventListener(vy.prototype._raiseDefinitionChanged,this)}Object.defineProperties(vy.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(e){this._referenceFrame=e}}});vy.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,no.FIXED,t)};vy.prototype.getValueInReferenceFrame=function(e,t,n){let i=this._composite._intervals.findDataForIntervalContainingDate(e);if(l(i))return i.getValueInReferenceFrame(e,t,n)};vy.prototype.equals=function(e){return this===e||e instanceof vy&&this._referenceFrame===e._referenceFrame&&this._composite.equals(e._composite,K.equals)};vy.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};var aa=vy;var aBn=T(S(),1);var s3n=T(S(),1);var hDn=T(S(),1),rQe={ROUNDED:0,MITERED:1,BEVELED:2},Gi=Object.freeze(rQe);var MDn=T(S(),1);var GDn=T(S(),1);var ca=[new h,new h],sQe=new h,aQe=new h,cQe=new h,lQe=new h,dQe=new h,uQe=new h,mQe=new h,hQe=new h,fQe=new h,m1=new h,JN=new h,O2={},cK=new he;function pQe(e,t){let n=new Array(e.length);for(let i=0;i<e.length;i++){let o=e[i];cK=t.cartesianToCartographic(o,cK),n[i]=cK.height,e[i]=t.scaleToGeodeticSurface(o,o)}return n}function lK(e,t,n,i){let o=e[0],r=e[1],s=h.angleBetween(o,r),a=Math.ceil(s/i),c=new Array(a),d;if(t===n){for(d=0;d<a;d++)c[d]=t;return c.push(n),c}let m=(n-t)/a;for(d=1;d<a;d++){let p=t+d*m;c[d]=p}return c[0]=t,c.push(n),c}var QN=new h,jN=new h;function bQe(e,t,n,i){let o=new Dr(n,i),r=o.projectPointOntoPlane(h.add(n,e,QN),QN),s=o.projectPointOntoPlane(h.add(n,t,jN),jN),a=D.angleBetween(r,s);return s.x*r.y-s.y*r.x>=0?-a:a}var yQe=new h(-1,0,0),w_=new M,gQe=new M,dK=new $,xQe=$.IDENTITY.clone(),_Qe=new h,TQe=new se,kle=new h;function S0(e,t,n,i,o,r,s,a){let c=_Qe,d=TQe;w_=Wt.eastNorthUpToFixedFrame(e,o,w_),c=M.multiplyByPointAsVector(w_,yQe,c),c=h.normalize(c,c);let u=bQe(c,t,e,o);dK=$.fromRotationZ(u,dK),kle.z=r,w_=M.multiplyTransformation(w_,M.fromRotationTranslation(dK,kle,gQe),w_);let m=xQe;m[0]=s;for(let p=0;p<a;p++)for(let b=0;b<n.length;b+=3)d=h.fromArray(n,b,d),d=$.multiplyByVector(m,d,d),d=M.multiplyByPoint(w_,d,d),i.push(d.x,d.y,d.z);return i}var SQe=new h;function uK(e,t,n,i,o,r,s){for(let a=0;a<e.length;a+=3){let c=h.fromArray(e,a,SQe);i=S0(c,t,n,i,o,r[a/3],s,1)}return i}function CQe(e,t){let n=e.length,i=new Array(n*6),o=0,r=t.x+t.width/2,s=t.y+t.height/2,a=e[0];i[o++]=a.x-r,i[o++]=0,i[o++]=a.y-s;for(let c=1;c<n;c++){a=e[c];let d=a.x-r,u=a.y-s;i[o++]=d,i[o++]=0,i[o++]=u,i[o++]=d,i[o++]=0,i[o++]=u}return a=e[0],i[o++]=a.x-r,i[o++]=0,i[o++]=a.y-s,i}function Ule(e,t){let n=e.length,i=new Array(n*3),o=0,r=t.x+t.width/2,s=t.y+t.height/2;for(let a=0;a<n;a++)i[o++]=e[a].x-r,i[o++]=0,i[o++]=e[a].y-s;return i}var Dle=new Fe,Ble=new h,Yle=new $;function Ole(e,t,n,i,o,r,s,a,c,d){let u=h.angleBetween(h.subtract(t,e,m1),h.subtract(n,e,JN)),m=i===Gi.BEVELED?0:Math.ceil(u/P.toRadians(5)),p;o?p=$.fromQuaternion(Fe.fromAxisAngle(h.negate(e,m1),u/(m+1),Dle),Yle):p=$.fromQuaternion(Fe.fromAxisAngle(e,u/(m+1),Dle),Yle);let b,f;if(t=h.clone(t,Ble),m>0){let x=d?2:1;for(let _=0;_<m;_++)t=$.multiplyByVector(p,t,t),b=h.subtract(t,e,m1),b=h.normalize(b,b),o||(b=h.negate(b,b)),f=r.scaleToGeodeticSurface(t,JN),s=S0(f,b,a,s,r,c,1,x)}else b=h.subtract(t,e,m1),b=h.normalize(b,b),o||(b=h.negate(b,b)),f=r.scaleToGeodeticSurface(t,JN),s=S0(f,b,a,s,r,c,1,1),n=h.clone(n,Ble),b=h.subtract(n,e,m1),b=h.normalize(b,b),o||(b=h.negate(b,b)),f=r.scaleToGeodeticSurface(n,JN),s=S0(f,b,a,s,r,c,1,1);return s}O2.removeDuplicatesFromShape=function(e){let t=e.length,n=[];for(let i=t-1,o=0;o<t;i=o++){let r=e[i],s=e[o];D.equals(r,s)||n.push(s)}return n};O2.angleIsGreaterThanPi=function(e,t,n,i){let o=new Dr(n,i),r=o.projectPointOntoPlane(h.add(n,e,QN),QN),s=o.projectPointOntoPlane(h.add(n,t,jN),jN);return s.x*r.y-s.y*r.x>=0};var VQe=new h,LQe=new h;O2.computePositions=function(e,t,n,i,o){let r=i._ellipsoid,s=pQe(e,r),a=i._granularity,c=i._cornerType,d=o?CQe(t,n):Ule(t,n),u=o?Ule(t,n):void 0,m=n.height/2,p=n.width/2,b=e.length,f=[],x=o?[]:void 0,_=sQe,C=aQe,V=cQe,L=lQe,R=dQe,G=uQe,X=mQe,v=hQe,W=fQe,F=e[0],A=e[1];L=r.geodeticSurfaceNormal(F,L),_=h.subtract(A,F,_),_=h.normalize(_,_),v=h.cross(L,_,v),v=h.normalize(v,v);let y=s[0],Z=s[1];o&&(x=S0(F,v,u,x,r,y+m,1,1)),W=h.clone(F,W),F=A,C=h.negate(_,C);let E,I;for(let B=1;B<b-1;B++){let U=o?2:1;if(A=e[B+1],F.equals(A)){wt(\"Positions are too close and are considered equivalent with rounding error.\");continue}_=h.subtract(A,F,_),_=h.normalize(_,_),V=h.add(_,C,V),V=h.normalize(V,V),L=r.geodeticSurfaceNormal(F,L);let Y=h.multiplyByScalar(L,h.dot(_,L),VQe);h.subtract(_,Y,Y),h.normalize(Y,Y);let N=h.multiplyByScalar(L,h.dot(C,L),LQe);if(h.subtract(C,N,N),h.normalize(N,N),!P.equalsEpsilon(Math.abs(h.dot(Y,N)),1,P.EPSILON7)){V=h.cross(V,L,V),V=h.cross(L,V,V),V=h.normalize(V,V);let z=1/Math.max(.25,h.magnitude(h.cross(V,C,m1))),ee=O2.angleIsGreaterThanPi(_,C,F,r);ee?(R=h.add(F,h.multiplyByScalar(V,z*p,V),R),G=h.add(R,h.multiplyByScalar(v,p,G),G),ca[0]=h.clone(W,ca[0]),ca[1]=h.clone(G,ca[1]),E=lK(ca,y+m,Z+m,a),I=Ri.generateArc({positions:ca,granularity:a,ellipsoid:r}),f=uK(I,v,d,f,r,E,1),v=h.cross(L,_,v),v=h.normalize(v,v),X=h.add(R,h.multiplyByScalar(v,p,X),X),c===Gi.ROUNDED||c===Gi.BEVELED?Ole(R,G,X,c,ee,r,f,d,Z+m,o):(V=h.negate(V,V),f=S0(F,V,d,f,r,Z+m,z,U)),W=h.clone(X,W)):(R=h.add(F,h.multiplyByScalar(V,z*p,V),R),G=h.add(R,h.multiplyByScalar(v,-p,G),G),ca[0]=h.clone(W,ca[0]),ca[1]=h.clone(G,ca[1]),E=lK(ca,y+m,Z+m,a),I=Ri.generateArc({positions:ca,granularity:a,ellipsoid:r}),f=uK(I,v,d,f,r,E,1),v=h.cross(L,_,v),v=h.normalize(v,v),X=h.add(R,h.multiplyByScalar(v,-p,X),X),c===Gi.ROUNDED||c===Gi.BEVELED?Ole(R,G,X,c,ee,r,f,d,Z+m,o):f=S0(F,V,d,f,r,Z+m,z,U),W=h.clone(X,W)),C=h.negate(_,C)}else f=S0(W,v,d,f,r,y+m,1,1),W=F;y=Z,Z=s[B+1],F=A}ca[0]=h.clone(W,ca[0]),ca[1]=h.clone(F,ca[1]),E=lK(ca,y+m,Z+m,a),I=Ri.generateArc({positions:ca,granularity:a,ellipsoid:r}),f=uK(I,v,d,f,r,E,1),o&&(x=S0(F,v,u,x,r,Z+m,1,1)),b=f.length;let w=o?b+x.length:b,k=new Float64Array(w);return k.set(f),o&&k.set(x,b),k};var jm=O2;var hK={},h1=new h,Qle=new h,ZQe=new h,zle=new h,Jc=[new h,new h],jle=new h,qle=new h,$le=new h,RQe=new h,GQe=new h,EQe=new h,XQe=new h,IQe=new h,WQe=new h,PQe=new h,Hle=new Fe,Kle=new $;function qN(e,t,n,i,o){let r=h.angleBetween(h.subtract(t,e,h1),h.subtract(n,e,Qle)),s=i===Gi.BEVELED?1:Math.ceil(r/P.toRadians(5))+1,a=s*3,c=new Array(a);c[a-3]=n.x,c[a-2]=n.y,c[a-1]=n.z;let d;o?d=$.fromQuaternion(Fe.fromAxisAngle(h.negate(e,h1),r/s,Hle),Kle):d=$.fromQuaternion(Fe.fromAxisAngle(e,r/s,Hle),Kle);let u=0;t=h.clone(t,h1);for(let m=0;m<s;m++)t=$.multiplyByVector(d,t,t),c[u++]=t.x,c[u++]=t.y,c[u++]=t.z;return c}function vQe(e){let t=jle,n=qle,i=$le,o=e[1];n=h.fromArray(e[1],o.length-3,n),i=h.fromArray(e[0],0,i),t=h.midpoint(n,i,t);let r=qN(t,n,i,Gi.ROUNDED,!1),s=e.length-1,a=e[s-1];o=e[s],n=h.fromArray(a,a.length-3,n),i=h.fromArray(o,0,i),t=h.midpoint(n,i,t);let c=qN(t,n,i,Gi.ROUNDED,!1);return[r,c]}function Jle(e,t,n,i){let o=h1;return i?o=h.add(e,t,o):(t=h.negate(t,t),o=h.add(e,t,o)),[o.x,o.y,o.z,n.x,n.y,n.z]}function mK(e,t,n,i){let o=new"
}