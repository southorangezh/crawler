{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 131,
    "total_chunks": 194,
    "chunk_size": 52284,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.729Z"
  },
  "content": "o=0;o<i.length;++o){let r=i[o],s={};_4(r,s),t.push(sD(r,s))}return t}function zot(e){let t=[],n,i=e.documentElement.childNodes;for(let r=0;r<i.length;r++)if(i[r].nodeType===Node.ELEMENT_NODE){n=i[r];break}if(!l(n))throw new ue(\"Unable to find first child of the feature info xml document\");let o=n.childNodes;for(let r=0;r<o.length;++r){let s=o[r];if(s.nodeType===Node.ELEMENT_NODE){let a={};_4(s,a),t.push(sD(s,a))}}return t}function _4(e,t){let n=!0;for(let i=0;i<e.childNodes.length;++i){let o=e.childNodes[i];o.nodeType===Node.ELEMENT_NODE&&(n=!1),!(o.localName===\"Point\"||o.localName===\"LineString\"||o.localName===\"Polygon\"||o.localName===\"boundedBy\")&&o.hasChildNodes()&&_4(o,t)&&(t[o.localName]=o.textContent)}return n}function sD(e,t){let n=new xh;return n.data=e,n.properties=t,n.configureNameFromProperties(t),n.configureDescriptionFromProperties(t),n}function Hot(e){let t=new XMLSerializer().serializeToString(e),n=document.createElement(\"div\"),i=document.createElement(\"pre\");i.textContent=t,n.appendChild(i);let o=new xh;return o.data=e,o.description=n.innerHTML,[o]}var Kot=/<body>\\s*<\\/body>/im,Jot=/<ServiceExceptionReport([\\s\\S]*)<\\/ServiceExceptionReport>/im,Qot=/<title>([\\s\\S]*)<\\/title>/im;function Rbe(e){if(Kot.test(e)||Jot.test(e))return;let t,n=Qot.exec(e);n&&n.length>1&&(t=n[1]);let i=new xh;return i.name=t,i.description=e,i.data=e,[i]}var yT=Aot;var c_i=T(S(),1);function Kv(e){e=g(e,g.EMPTY_OBJECT),this._tileCache={},this._tilesRequestedForInterval=[];let t=this._clock=e.clock;this._times=e.times,this._requestImageFunction=e.requestImageFunction,this._reloadFunction=e.reloadFunction,this._currentIntervalIndex=-1,t.onTick.addEventListener(this._clockOnTick,this),this._clockOnTick(t)}Object.defineProperties(Kv.prototype,{clock:{get:function(){return this._clock},set:function(e){this._clock!==e&&(this._clock=e,this._clockOnTick(e),this._reloadFunction())}},times:{get:function(){return this._times},set:function(e){this._times!==e&&(this._times=e,this._clockOnTick(this._clock),this._reloadFunction())}},currentInterval:{get:function(){return this._times.get(this._currentIntervalIndex)}}});Kv.prototype.getFromCache=function(e,t,n,i){let o=Gbe(e,t,n),r,s=this._tileCache[this._currentIntervalIndex];if(l(s)&&l(s[o])){let a=s[o];r=a.promise.catch(function(c){throw i.state=a.request.state,c}),delete s[o]}return r};Kv.prototype.checkApproachingInterval=function(e,t,n,i){let o=Gbe(e,t,n),r=this._tilesRequestedForInterval,s=Ebe(this),a={key:o,priorityFunction:i.priorityFunction};(!l(s)||!Xbe(this,a,s))&&r.push(a),r.length>=512&&r.splice(0,256)};Kv.prototype._clockOnTick=function(e){let t=e.currentTime,i=this._times.indexOf(t),o=this._currentIntervalIndex;if(i!==o){let s=this._tileCache[o];for(let a in s)s.hasOwnProperty(a)&&s[a].request.cancel();delete this._tileCache[o],this._tilesRequestedForInterval=[],this._currentIntervalIndex=i,this._reloadFunction();return}let r=Ebe(this);if(l(r)){let s=this._tilesRequestedForInterval,a=!0;for(;a&&s.length!==0;){let c=s.pop();a=Xbe(this,c,r),a||s.push(c)}}};function Gbe(e,t,n){return`${e}-${t}-${n}`}function jot(e){let t=e.split(\"-\");if(t.length===3)return{x:Number(t[0]),y:Number(t[1]),level:Number(t[2])}}function Ebe(e){let t=e._times;if(!l(t))return;let n=e._clock,i=n.currentTime,o=n.canAnimate&&n.shouldAnimate,r=n.multiplier;if(!o&&r!==0)return;let s,a=t.indexOf(i);if(a<0)return;let c=t.get(a);return r>0?(s=te.secondsDifference(c.stop,i),++a):(s=te.secondsDifference(c.start,i),--a),s/=r,a>=0&&s<=5?t.get(a):void 0}function Xbe(e,t,n){let i=e._times.indexOf(n.start),o=e._tileCache,r=o[i];l(r)||(r=o[i]={});let s=t.key;if(l(r[s]))return!0;let a=jot(s),c=new Do({throttle:!1,throttleByServer:!0,type:is.IMAGERY,priorityFunction:t.priorityFunction}),d=e._requestImageFunction(a.x,a.y,a.level,c,n);return l(d)?(r[s]={promise:d,request:c},!0):!1}var gT=Kv;var qot=[3034,3035,3042,3043,3044],$ot=[4471,4559];function Th(e){if(e=g(e,g.EMPTY_OBJECT),l(e.times)&&!l(e.clock))throw new fe(\"options.times was specified, so options.clock is required.\");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._getFeatureInfoUrl=g(e.getFeatureInfoUrl,e.url);let t=Xe.createIfNeeded(e.url),n=Xe.createIfNeeded(this._getFeatureInfoUrl);t.setQueryParameters(Th.DefaultParameters,!0),n.setQueryParameters(Th.GetFeatureInfoDefaultParameters,!0),l(e.parameters)&&t.setQueryParameters(Ibe(e.parameters)),l(e.getFeatureInfoParameters)&&n.setQueryParameters(Ibe(e.getFeatureInfoParameters));let i=this;this._reload=void 0,l(e.times)&&(this._timeDynamicImagery=new gT({clock:e.clock,times:e.times,requestImageFunction:function(s,a,c,d,u){return Wbe(i,s,a,c,d,u)},reloadFunction:function(){l(i._reload)&&i._reload()}}));let o={};if(o.layers=e.layers,o.bbox=\"{westProjected},{southProjected},{eastProjected},{northProjected}\",o.width=\"{width}\",o.height=\"{height}\",parseFloat(t.queryParameters.version)>=1.3){o.crs=g(e.crs,e.tilingScheme&&e.tilingScheme.projection instanceof Li?\"EPSG:3857\":\"CRS:84\");let s=o.crs.split(\":\");if(s[0]===\"EPSG\"&&s.length===2){let a=Number(s[1]);(a>=4e3&&a<5e3&&!$ot.includes(a)||qot.includes(a))&&(o.bbox=\"{southProjected},{westProjected},{northProjected},{eastProjected}\")}}else o.srs=g(e.srs,e.tilingScheme&&e.tilingScheme.projection instanceof Li?\"EPSG:3857\":\"EPSG:4326\");t.setQueryParameters(o,!0),n.setQueryParameters(o,!0);let r={query_layers:e.layers,info_format:\"{format}\"};parseFloat(n.queryParameters.version)>=1.3?(r.i=\"{i}\",r.j=\"{j}\"):(r.x=\"{i}\",r.y=\"{j}\"),n.setQueryParameters(r,!0),this._resource=t,this._pickFeaturesResource=n,this._layers=e.layers,this._tileProvider=new Hs({url:t,pickFeaturesUrl:n,tilingScheme:g(e.tilingScheme,new Ui({ellipsoid:e.ellipsoid})),rectangle:e.rectangle,tileWidth:e.tileWidth,tileHeight:e.tileHeight,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,subdomains:e.subdomains,tileDiscardPolicy:e.tileDiscardPolicy,credit:e.credit,getFeatureInfoFormats:g(e.getFeatureInfoFormats,Th.DefaultGetFeatureInfoFormats),enablePickFeatures:e.enablePickFeatures})}function Wbe(e,t,n,i,o,r){let s=l(r)?r.data:void 0,a=e._tileProvider;return l(s)&&a._resource.setQueryParameters(s),a.requestImage(t,n,i,o)}function ert(e,t,n,i,o,r,s){let a=l(s)?s.data:void 0,c=e._tileProvider;return l(a)&&c._pickFeaturesResource.setQueryParameters(a),c.pickFeatures(t,n,i,o,r)}Object.defineProperties(Th.prototype,{url:{get:function(){return this._resource._url}},proxy:{get:function(){return this._resource.proxy}},layers:{get:function(){return this._layers}},tileWidth:{get:function(){return this._tileProvider.tileWidth}},tileHeight:{get:function(){return this._tileProvider.tileHeight}},maximumLevel:{get:function(){return this._tileProvider.maximumLevel}},minimumLevel:{get:function(){return this._tileProvider.minimumLevel}},tilingScheme:{get:function(){return this._tileProvider.tilingScheme}},rectangle:{get:function(){return this._tileProvider.rectangle}},tileDiscardPolicy:{get:function(){return this._tileProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._tileProvider.errorEvent}},credit:{get:function(){return this._tileProvider.credit}},hasAlphaChannel:{get:function(){return this._tileProvider.hasAlphaChannel}},enablePickFeatures:{get:function(){return this._tileProvider.enablePickFeatures},set:function(e){this._tileProvider.enablePickFeatures=e}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},getFeatureInfoUrl:{get:function(){return this._getFeatureInfoUrl}}});Th.prototype.getTileCredits=function(e,t,n){return this._tileProvider.getTileCredits(e,t,n)};Th.prototype.requestImage=function(e,t,n,i){let o,r=this._timeDynamicImagery,s;return l(r)&&(s=r.currentInterval,o=r.getFromCache(e,t,n,i)),l(o)||(o=Wbe(this,e,t,n,i,s)),l(o)&&l(r)&&r.checkApproachingInterval(e,t,n,i),o};Th.prototype.pickFeatures=function(e,t,n,i,o){let r=this._timeDynamicImagery,s=l(r)?r.currentInterval:void 0;return ert(this,e,t,n,i,o,s)};Th.DefaultParameters=Object.freeze({service:\"WMS\",version:\"1.1.1\",request:\"GetMap\",styles:\"\",format:\"image/jpeg\"});Th.GetFeatureInfoDefaultParameters=Object.freeze({service:\"WMS\",version:\"1.1.1\",request:\"GetFeatureInfo\"});Th.DefaultGetFeatureInfoFormats=Object.freeze([Object.freeze(new yT(\"json\",\"application/json\")),Object.freeze(new yT(\"xml\",\"text/xml\")),Object.freeze(new yT(\"text\",\"text/html\"))]);function Ibe(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n.toLowerCase()]=e[n]);return t}var Jv=Th;var I_i=T(S(),1);var trt=Object.freeze({service:\"WMTS\",version:\"1.0.0\",request:\"GetTile\"});function Qv(e){e=g(e,g.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;let t=Xe.createIfNeeded(e.url),n=e.style,i=e.tileMatrixSetID,o=t.url,r=o.match(/{/g);if(!l(r)||r.length===1&&/{s}/.test(o))t.setQueryParameters(trt),this._useKvp=!0;else{let m={style:n,Style:n,TileMatrixSet:i};t.setTemplateValues(m),this._useKvp=!1}this._resource=t,this._layer=e.layer,this._style=n,this._tileMatrixSetID=i,this._tileMatrixLabels=e.tileMatrixLabels,this._format=g(e.format,\"image/jpeg\"),this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=l(e.tilingScheme)?e.tilingScheme:new _r({ellipsoid:e.ellipsoid}),this._tileWidth=g(e.tileWidth,256),this._tileHeight=g(e.tileHeight,256),this._minimumLevel=g(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=g(e.rectangle,this._tilingScheme.rectangle),this._dimensions=e.dimensions;let s=this;this._reload=void 0,l(e.times)&&(this._timeDynamicImagery=new gT({clock:e.clock,times:e.times,requestImageFunction:function(m,p,b,f,x){return Pbe(s,m,p,b,f,x)},reloadFunction:function(){l(s._reload)&&s._reload()}}));let a=this._tilingScheme.positionToTileXY(le.southwest(this._rectangle),this._minimumLevel),c=this._tilingScheme.positionToTileXY(le.northeast(this._rectangle),this._minimumLevel),d=(Math.abs(c.x-a.x)+1)*(Math.abs(c.y-a.y)+1);this._errorEvent=new ge;let u=e.credit;this._credit=typeof u==\"string\"?new Zt(u):u,this._subdomains=e.subdomains,Array.isArray(this._subdomains)?this._subdomains=this._subdomains.slice():l(this._subdomains)&&this._subdomains.length>0?this._subdomains=this._subdomains.split(\"\"):this._subdomains=[\"a\",\"b\",\"c\"]}function Pbe(e,t,n,i,o,r){let s=e._tileMatrixLabels,a=l(s)?s[i]:i.toString(),c=e._subdomains,d=e._dimensions,u=l(r)?r.data:void 0,m,p;if(!e._useKvp)p={TileMatrix:a,TileRow:n.toString(),TileCol:t.toString(),s:c[(t+n+i)%c.length]},m=e._resource.getDerivedResource({request:o}),m.setTemplateValues(p),l(d)&&m.setTemplateValues(d),l(u)&&m.setTemplateValues(u);else{let b={};b.tilematrix=a,b.layer=e._layer,b.style=e._style,b.tilerow=n,b.tilecol=t,b.tilematrixset=e._tileMatrixSetID,b.format=e._format,l(d)&&(b=Ct(b,d)),l(u)&&(b=Ct(b,u)),p={s:c[(t+n+i)%c.length]},m=e._resource.getDerivedResource({queryParameters:b,request:o}),m.setTemplateValues(p)}return Aa.loadImage(e,m)}Object.defineProperties(Qv.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},format:{get:function(){return this._format}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}},clock:{get:function(){return this._timeDynamicImagery.clock},set:function(e){this._timeDynamicImagery.clock=e}},times:{get:function(){return this._timeDynamicImagery.times},set:function(e){this._timeDynamicImagery.times=e}},dimensions:{get:function(){return this._dimensions},set:function(e){this._dimensions!==e&&(this._dimensions=e,l(this._reload)&&this._reload())}}});Qv.prototype.getTileCredits=function(e,t,n){};Qv.prototype.requestImage=function(e,t,n,i){let o,r=this._timeDynamicImagery,s;return l(r)&&(s=r.currentInterval,o=r.getFromCache(e,t,n,i)),l(o)||(o=Pbe(this,e,t,n,i,s)),l(o)&&l(r)&&r.checkApproachingInterval(e,t,n,i),o};Qv.prototype.pickFeatures=function(e,t,n,i,o){};var jv=Qv;var nrt={ARCGIS_MAPSERVER:J0.fromUrl,BING:async(e,t)=>Dv.fromUrl(e,t),GOOGLE_EARTH:async(e,t)=>{let n=t.channel;return delete t.channel,Ov.fromUrl(e,n,t)},MAPBOX:(e,t)=>new zv({url:e,...t}),SINGLE_TILE:Hv.fromUrl,TMS:hg.fromUrl,URL_TEMPLATE:(e,t)=>new Hs({url:e,...t}),WMS:(e,t)=>new Jv({url:e,...t}),WMTS:(e,t)=>new jv({url:e,...t})};function Df(e){e=g(e,g.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileCredits=void 0,this._errorEvent=new ge}Object.defineProperties(Df.prototype,{rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},proxy:{get:function(){}}});Df.fromAssetId=async function(e,t){t=g(t,g.EMPTY_OBJECT);let n=md._createEndpointResource(e,t),i=e.toString()+t.accessToken+t.server,o=Df._endpointCache[i];l(o)||(o=n.fetchJson(),Df._endpointCache[i]=o);let r=await o;if(r.type!==\"IMAGERY\")throw new ue(`Cesium ion asset ${e} is not an imagery asset.`);let s,a=r.externalType;if(!l(a))s=await hg.fromUrl(new md(r,n));else{let d=nrt[a];if(!l(d))throw new ue(`Unrecognized Cesium ion imagery type: ${a}`);let u={...r.options},m=u.url;delete u.url,s=await d(m,u)}let c=new Df(t);return s.errorEvent.addEventListener(function(d){d.provider=c,c._errorEvent.raiseEvent(d)}),c._tileCredits=md.getCreditsFromEndpoint(r,n),c._imageryProvider=s,c};Df.prototype.getTileCredits=function(e,t,n){let i=this._imageryProvider.getTileCredits(e,t,n);return l(i)?this._tileCredits.concat(i):this._tileCredits};Df.prototype.requestImage=function(e,t,n,i){return this._imageryProvider.requestImage(e,t,n,i)};Df.prototype.pickFeatures=function(e,t,n,i,o){return this._imageryProvider.pickFeatures(e,t,n,i,o)};Df._endpointCache={};var Q0=Df;var J_i=T(S(),1),irt={AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4},j0=Object.freeze(irt);function ort(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.style,j0.AERIAL);return Q0.fromAssetId(t)}var q0=ort;var nTi=T(S(),1),qv=`uniform sampler2D u_texture; in vec2 v_textureCoordinates; void main() { out_FragColor = texture(u_texture, v_textureCoordinates); } `;var oTi=T(S(),1),$v=`in vec4 position; in float webMercatorT; uniform vec2 u_textureDimensions; out vec2 v_textureCoordinates; void main() { v_textureCoordinates = vec2(position.x, webMercatorT); gl_Position = czm_viewportOrthographic * (position * vec4(u_textureDimensions, 1.0, 1.0)); } `;var lTi=T(S(),1);function XV(e,t,n,i,o){if(this.imageryLayer=e,this.x=t,this.y=n,this.level=i,this.request=void 0,i!==0){let r=t/2|0,s=n/2|0,a=i-1;this.parent=e.getImageryFromCache(r,s,a)}this.state=$n.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!l(o)&&e.ready&&(o=e.imageryProvider.tilingScheme.tileXYToRectangle(t,n,i)),this.rectangle=o}XV.createPlaceholder=function(e){let t=new XV(e,0,0,0);return t.addReference(),t.state=$n.PLACEHOLDER,t};XV.prototype.addReference=function(){++this.referenceCount};XV.prototype.releaseReference=function(){return--this.referenceCount,this.referenceCount===0?(this.imageryLayer.removeImageryFromCache(this),l(this.parent)&&this.parent.releaseReference(),l(this.image)&&l(this.image.destroy)&&this.image.destroy(),l(this.texture)&&this.texture.destroy(),l(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),me(this),0):this.referenceCount};XV.prototype.processStateMachine=function(e,t,n){this.state===$n.UNLOADED&&!n&&(this.state=$n.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===$n.RECEIVED&&(this.state=$n.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));let i=this.state===$n.READY&&t&&!this.texture;(this.state===$n.TEXTURE_LOADED||i)&&(this.state=$n.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};var IV=XV;var fTi=T(S(),1);function T4(e,t,n){this.readyImagery=void 0,this.loadingImagery=e,this.textureCoordinateRectangle=t,this.textureTranslationAndScale=void 0,this.useWebMercatorT=n,this.correctionMatrix=$.IDENTITY.clone(new $)}T4.prototype.freeResources=function(){l(this.readyImagery)&&this.readyImagery.releaseReference(),l(this.loadingImagery)&&this.loadingImagery.releaseReference()};T4.prototype.processStateMachine=function(e,t,n){let i=this.loadingImagery,o=i.imageryLayer;if(i.processStateMachine(t,!this.useWebMercatorT,n),i.state===$n.READY)return l(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=this.loadingImagery,this.loadingImagery=void 0,this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this),!0;let r=i.parent,s;for(;l(r)&&(r.state!==$n.READY||!this.useWebMercatorT&&!l(r.texture));)r.state!==$n.FAILED&&r.state!==$n.INVALID&&(s=s||r),r=r.parent;return this.readyImagery!==r&&(l(this.readyImagery)&&this.readyImagery.releaseReference(),this.readyImagery=r,l(r)&&(r.addReference(),this.textureTranslationAndScale=o._calculateTextureTranslationAndScale(e,this))),i.state===$n.FAILED||i.state===$n.INVALID?l(s)?(s.processStateMachine(t,!this.useWebMercatorT,n),!1):!0:!1};var WV=T4;var YTi=T(S(),1);var PTi=T(S(),1);var VTi=T(S(),1);var bTi=T(S(),1),xc=3.141592653589793,aD=xc*3e3/180,vbe=6378245,wbe=.006693421622965943,Fbe=(e,t)=>!(e>73.66&&e<135.05&&t>3.86&&t<53.55),rrt=(e,t)=>{let n=srt(e-105,t-35),i=art(e-105,t-35),o=t/180*xc,r=Math.sin(o);r=1-wbe*r*r;let s=Math.sqrt(r);return n=n*180/(vbe/s*Math.cos(o)*xc),i=i*180/(vbe*(1-wbe)/(r*s)*xc),[n,i]},srt=(e,t)=>{let n=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return n+=(20*Math.sin(6*e*xc)+20*Math.sin(2*e*xc))*2/3,n+=(20*Math.sin(e*xc)+40*Math.sin(e/3*xc))*2/3,n+=(150*Math.sin(e/12*xc)+300*Math.sin(e/30*xc))*2/3,n},art=(e,t)=>{let n=-100+2*e+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return n+=(20*Math.sin(6*e*xc)+20*Math.sin(2*e*xc))*2/3,n+=(20*Math.sin(t*xc)+40*Math.sin(t/3*xc))*2/3,n+=(160*Math.sin(t/12*xc)+320*Math.sin(t*xc/30))*2/3,n},S4=(e,t)=>{if(Fbe(e,t))return[e,t];{let n=rrt(e,t);return[e+n[0],t+n[1]]}},crt=(e,t)=>{let n=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*aD),i=Math.atan2(t,e)+3e-6*Math.cos(e*aD),o=n*Math.cos(i)+.0065,r=n*Math.sin(i)+.006;return[o,r]},lrt=(e,t)=>{let n=e-.0065,i=t-.006,o=Math.sqrt(n*n+i*i)-2e-5*Math.sin(i*aD),r=Math.atan2(i,n)-3e-6*Math.cos(n*aD),s=o*Math.cos(r),a=o*Math.sin(r);return[s,a]},drt=(e,t)=>{if(Fbe(e,t))return[e,t];{let n=[e,t],i=S4(e,t),o=i[0]-e,r=i[1]-t;do i=S4(n[0]-=o,n[1]-=r),o=i[0]-e,r=i[1]-t;while(Math.abs(o)>1e-6&&Math.abs(r)>1e-6);return n}},urt={WGS84ToGCJ02:S4,GCJ02ToWGS84:drt,GCJ02ToBD09:crt,BD09ToGCJ02:lrt},ew=urt;var{WGS84ToGCJ02:mrt,GCJ02ToBD09:hrt,BD09ToGCJ02:frt,GCJ02ToWGS84:prt}=ew,brt=637099681e-2,Abe=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],cD=[75,60,45,30,15,0],yrt=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Mbe=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],C4=class{constructor(){fl(this,\"isWgs84\");this.isWgs84=!1}getDistanceByMC(t,n){if(!t||!n||(t=this.convertMC2LL(t),!t))return 0;let i=P.toRadians(t.lng),o=P.toRadians(t.lat);if(n=this.convertMC2LL(n),!n)return 0;let r=P.toRadians(n.lng),s=P.toRadians(n.lat);return this.getDistance(i,r,o,s)}getDistanceByLL(t,n){if(!t||!n)return 0;t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74),n.lng=this.getLoop(n.lng,-180,180),n.lat=this.getRange(n.lat,-74,74);let i=P.toRadians(t.lng),o=P.toRadians(t.lat),r=P.toRadians(n.lng),s=P.toRadians(n.lat);return this.getDistance(i,r,o,s)}convertMC2LL(t){if(!t)return{lng:0,lat:0};let n={lng:0,lat:0};if(this.isWgs84){n.lng=t.lng/2003750834e-2*180;let r=t.lat/2003750834e-2*180;return n.lat=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),{lng:+n.lng,lat:+n.lat}}let i={lng:Math.abs(t.lng),lat:Math.abs(t.lat)},o=[];for(let r=0;r<Abe.length;r++)if(i.lat>=Abe[r]){o=yrt[r];break}return n=this.convertor(t,o),{lng:+n.lng,lat:+n.lat}}convertLL2MC(t){if(!t)return{lng:0,lat:0};if(t.lng>180||t.lng<-180||t.lat>90||t.lat<-90)return t;if(this.isWgs84){let r={lng:0,lat:0},s=6378137;r.lng=t.lng*Math.PI/180*s;let a=t.lat*Math.PI/180;return r.lat=s/2*Math.log((1+Math.sin(a))/(1-Math.sin(a))),{lng:r.lng,lat:r.lat}}t.lng=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74);let n={lng:t.lng,lat:t.lat},i=[];for(let r=0;r<cD.length;r++)if(n.lat>=cD[r]){i=Mbe[r];break}if(!i){for(let r=0;r<cD.length;r++)if(n.lat<=-cD[r]){i=Mbe[r];break}}let o=this.convertor(t,i);return{lng:o.lng,lat:o.lat}}convertor(t,n){if(!t||!n)return{lng:0,lat:0};let i=n[0]+n[1]*Math.abs(t.lng),o=Math.abs(t.lat)/n[9],r=n[2]+n[3]*o+n[4]*o*o+n[5]*o*o*o+n[6]*o*o*o*o+n[7]*o*o*o*o*o+n[8]*o*o*o*o*o*o;return i*=t.lng<0?-1:1,r*=t.lat<0?-1:1,{lng:i,lat:r}}getDistance(t,n,i,o){return brt*Math.acos(Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos(n-t))}getRange(t,n,i){return t=Math.max(t,n),t=Math.min(t,i),t}getLoop(t,n,i){for(;t>i;)t-=i-n;for(;t<n;)t+=i-n;return t}lngLatToMercator(t){return this.convertLL2MC(t)}lngLatToPoint(t){let n=this.convertLL2MC(t);return new D(n.lng,n.lat)}mercatorToLngLat(t){return this.convertMC2LL(t)}pointToLngLat(t){let n={lng:t.x,lat:t.y};return this.convertMC2LL(n)}pointToPixel(t,n,i,o){if(!t)return{x:0,y:0};t=this.lngLatToMercator(t);let r=this.getZoomUnits(n),s=Math.round((t.lng-i.lng)/r+o.width/2),a=Math.round((i.lat-t.lat)/r+o.height/2);return{x:s,y:a}}pixelToPoint(t,n,i,o){if(!t)return{lng:0,lat:0};let r=this.getZoomUnits(n),s=i.lng+r*(t.x-o.width/2),a=i.lat-r*(t.y-o.height/2),c={lng:s,lat:a};return this.mercatorToLngLat(c)}getZoomUnits(t){return Math.pow(2,18-t)}unproject(t,n){l(n)||(n=new he);let i=this.mercatorToLngLat({lng:t.x,lat:t.y}),o=frt(i.lng,i.lat),r=prt(o[0],o[1]);return n.longitude=P.toRadians(r[0]),n.latitude=P.toRadians(r[1]),n}project(t,n){l(n)||(n=new h);let i=mrt(P.toDegrees(t.longitude),P.toDegrees(t.latitude)),o=hrt(i[0],i[1]);o[0]=Math.min(o[0],180),o[0]=Math.max(o[0],-180),o[1]=Math.min(o[1],74.000022),o[1]=Math.max(o[1],-71.988531);let r=this.lngLatToPoint({lng:o[0],lat:o[1]});return n.x=r.x,n.y=r.y,n.z=t.height,n}},tw=C4;var V4=class{constructor(t){fl(this,\"resolutions\");fl(this,\"_ellipsoid\");fl(this,\"_numberOfLevelZeroTilesX\");fl(this,\"_numberOfLevelZeroTilesY\");fl(this,\"_projection\");fl(this,\"_rectangleSouthwestInMeters\");fl(this,\"_rectangleNortheastInMeters\");fl(this,\"_rectangle\");fl(this,\"shouldCorrection\",!0);if(t=g(t,Object.freeze({})),this._ellipsoid=g(t.ellipsoid,oe.WGS84),this._numberOfLevelZeroTilesX=g(t.numberOfLevelZeroTilesX,1),this._numberOfLevelZeroTilesY=g(t.numberOfLevelZeroTilesY,1),this._projection=new tw,l(t.rectangleSouthwestInMeters)&&l(t.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=t.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=t.rectangleNortheastInMeters;else{let o=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new D(-o,-o),this._rectangleNortheastInMeters=new D(o,o)}let n=this._projection.unproject(this._rectangleSouthwestInMeters),i=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new le(n.longitude,n.latitude,i.longitude,i.latitude),this.resolutions=t.resolutions||[]}get projection(){return this._projection}get rectangle(){return this._rectangle}get ellipsoid(){return this._ellipsoid}positionToTileXY(t,n,i){let o=this._rectangle;if(!le.contains(o,t))return;let s=this._projection.project(t);if(!l(s))return;let a=this.resolutions[n],c=Math.floor(s.x/a),d=-Math.floor(s.y/a);return l(i)?(i.x=c,i.y=d,i):new D(c,d)}rectangleToNativeRectangle(t,n){let i=this._projection,o=i.project(le.southwest(t)),r=i.project(le.northeast(t));return l(n)?(n.west=o.x,n.south=o.y,n.east=r.x,n.north=r.y,n):new le(o.x,o.y,r.x,r.y)}getNumberOfXTilesAtLevel(t){return this._numberOfLevelZeroTilesX<<t}getNumberOfYTilesAtLevel(t){return this._numberOfLevelZeroTilesY<<t}tileXYToRectangle(t,n,i,o){let r=this.tileXYToNativeRectangle(t,n,i,o),s=this._projection,a=s.unproject(new D(r.west,r.south)),c=s.unproject(new D(r.east,r.north));return r.west=a.longitude,r.south=a.latitude,r.east=c.longitude,r.north=c.latitude,r}tileXYToNativeRectangle(t,n,i,o){let r=this.resolutions[i],s=t*r,a=(t+1)*r,c=((n=-n)+1)*r,d=n*r;return l(o)?(o.west=s,o.south=d,o.east=a,o.north=c,o):new le(s,d,a,c)}},nw=V4;var FTi=T(S(),1);function Ube(e,t,n,i){if(n===t.length-1)return i(e);var o,r=t[n],s=Array(r);for(o=r-1;o>=0;o--)s[o]=Ube(e[o],t,n+1,i);return s}function grt(e){var t=e.length,n,i=Array(t);for(n=t-1;n!==-1;--n)i[n]=e[n];return i}function xrt(e){if(typeof e!=\"object\")return e;var t=grt,n=Dbe(e);return Ube(e,n,0,t)}function _rt(e){for(var t=[];typeof e==\"object\";)t.push(e.length),e=e[0];return t}function Dbe(e){var t,n;return typeof e==\"object\"?(t=e[0],typeof t==\"object\"?(n=t[0],typeof n==\"object\"?_rt(e):[e.length,t.length]):[e.length]):[]}function Bbe(e,t,n){typeof n>\"u\"&&(n=0);var i=e[n],o=Array(i),r;if(n===e.length-1){for(r=i-2;r>=0;r-=2)o[r+1]=t,o[r]=t;return r===-1&&(o[0]=t),o}for(r=i-1;r>=0;r--)o[r]=Bbe(e,t,n+1);return o}function Trt(e){var t,n,i,o=e.length,r=Array(o),s;for(t=o-1;t>=0;t--){for(s=Array(o),n=t+2,i=o-1;i>=n;i-=2)s[i]=0,s[i-1]=0;for(i>t&&(s[i]=0),s[t]=e[t],i=t-1;i>=1;i-=2)s[i]=0,s[i-1]=0;i===0&&(s[0]=0),r[t]=s}return r}function Srt(e){return Trt(Bbe([e],1))}function Crt(e){var t=Dbe(e),n=Math.abs,i=t[0],o=t[1],r=xrt(e),s,a,c=Srt(i),d,u,m,p,b,f;for(p=0;p<o;++p){var x=-1,_=-1;for(m=p;m!==i;++m)b=n(r[m][p]),b>_&&(x=m,_=b);for(a=r[x],r[x]=r[p],r[p]=a,u=c[x],c[x]=c[p],c[p]=u,f=a[p],b=p;b!==o;++b)a[b]/=f;for(b=o-1;b!==-1;--b)u[b]/=f;for(m=i-1;m!==-1;--m)if(m!==p){for(s=r[m],d=c[m],f=s[p],b=p+1;b!==o;++b)s[b]-=a[b]*f;for(b=o-1;b>0;--b)d[b]-=u[b]*f,--b,d[b]-=u[b]*f;b===0&&(d[0]-=u[0]*f)}}return c}function Nbe(e,t){let n,i,o,r,s,a,c,d,u,m,p;for(r=e.length,s=t.length,a=t[0].length,c=Array(r),n=r-1;n>=0;n--){for(d=Array(a),u=e[n],o=a-1;o>=0;o--){for(m=u[s-1]*t[s-1][o],i=s-2;i>=1;i-=2)p=i-1,m+=u[i]*t[i][o]+u[p]*t[p][o];i===0&&(m+=u[0]*t[0][o]),d[o]=m}c[n]=d}return c}function kbe(e){let t,n,i=e.length,o=e[0].length,r=Array(o),s,a,c;for(n=0;n<o;n++)r[n]=Array(i);for(t=i-1;t>=1;t-=2){for(a=e[t],s=e[t-1],n=o-1;n>=1;--n)c=r[n],c[t]=a[n],c[t-1]=s[n],--n,c=r[n],c[t]=a[n],c[t-1]=s[n];n===0&&(c=r[0],c[t]=a[0],c[t-1]=s[0])}if(t===0){for(s=e[0],n=o-1;n>=1;--n)r[n][0]=s[n],--n,r[n][0]=s[n];n===0&&(r[0][0]=s[0])}return r}function Vrt(e,t){var n,i=e.length,o,r=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)o=n-1,r+=e[n]*t[n]+e[o]*t[o];return n===0&&(r+=e[0]*t[0]),r}function Lrt(e,t){let n=e.length,i,o=Array(n);for(i=n-1;i>=0;i--)o[i]=Vrt(e[i],t);return o}function Zrt(e){return Math.round(e*1e10)/1e10}function PV(e,t,n){if(n){let C=t;t=e,e=C}let i=[e[0],e[1],1,0,0,0,-1*t[0]*e[0],-1*t[0]*e[1]],o=[0,0,0,e[0],e[1],1,-1*t[1]*e[0],-1*t[1]*e[1]],r=[e[2],e[3],1,0,0,0,-1*t[2]*e[2],-1*t[2]*e[3]],s=[0,0,0,e[2],e[3],1,-1*t[3]*e[2],-1*t[3]*e[3]],a=[e[4],e[5],1,0,0,0,-1*t[4]*e[4],-1*t[4]*e[5]],c=[0,0,0,e[4],e[5],1,-1*t[5]*e[4],-1*t[5]*e[5]],d=[e[6],e[7],1,0,0,0,-1*t[6]*e[6],-1*t[6]*e[7]],u=[0,0,0,e[6],e[7],1,-1*t[7]*e[6],-1*t[7]*e[7]],m=[i,o,r,s,a,c,d,u],p=t,b;try{b=Crt(Nbe(kbe(m),m))}catch(C){return console.log(C),[1,0,0,0,1,0,0,0]}let f=Nbe(b,kbe(m)),x=Lrt(f,p);for(var _=0;_<x.length;_++)x[_]=Zrt(x[_]);return x[8]=1,x}var Rrt=new le,Grt=new he,Ert=new he,Xrt=new he,Irt=new he,fg=P.DEGREES_PER_RADIAN;function Wrt(e,t){let n=e.correctionMatrix,i=e.readyImagery,o=e.loadingImagery,r;i?r=i:r=o;let s=r.level,a=r.x,c=r.y,d=t.tileXYToNativeRectangle(a,c,s,Rrt),{west:u,east:m,north:p,south:b}=d,f=t.projection.unproject(new D(u,p),Grt),x=t.projection.unproject(new D(u,b),Ert),_=t.projection.unproject(new D(m,p),Xrt),C=t.projection.unproject(new D(m,b),Irt),V=[f.longitude*fg,f.latitude*fg],L=[x.longitude*fg,x.latitude*fg],R=[_.longitude*fg,_.latitude*fg],G=[C.longitude*fg,C.latitude*fg],X=R[0]-L[0],v=R[1]-L[1],W=L[0],F=L[1];V[0]-=W,L[0]-=W,G[0]-=W,R[0]-=W,V[1]-=F,L[1]-=F,G[1]-=F,R[1]-=F,V[0]/=X,G[0]/=X,R[0]/=X,V[1]/=v,G[1]/=v,R[1]/=v;let A=PV([...V,...L,...G,...R],[L[0],R[1],...L,R[0],L[1],...R]);$.fromRowMajorArray(A,n)}var iw=Wrt;var qTi=T(S(),1);var Ybe={street:\"//maponline{s}.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=pl&scaler=2&udt=BD_TILES_DATE&from=jsapi2_0&showtext=1\",marks:\"//maponline{s}.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles=sl&scaler=2&udt=BD_TILES_DATE&from=jsapi2_0&showtext=1\",satellite:\"//maponline{s}.bdimg.com/starpic/?qt=satepc&u=x%3D{x}%3By%3D{y}%3Bz%3D{z}%3Bv%3D009%3Btype%3Dsate&fm=46&app=webearth2&v=009&udt=BD_TILES_DATE\"},R4=document.createElement(\"canvas\");R4.width=128;R4.height=128;var L4=19,ow=class ow extends Hs{constructor(t={}){t.udt=g(t.udt,\"20240101\"),t.crs=g(t.crs,\"WGS84\"),t.maximumLevel=g(t.maximumLevel,L4),t.tileWidth=g(t.tileWidth,128),t.tileHeight=g(t.tileHeight,128),t.style?t.style in Ybe||(console.warn(`BaiduImageryProvider Warning >>> options.style: ${t.style} is not support, will use 'street' instead.`),t.style=\"street\"):t.style=\"street\";let n=Ybe[t.style].replace(\"BD_TILES_DATE\",t.udt);if(t.url=g(t.url,n),t.crs===\"WGS84\"){let i=[];for(let o=0;o<t.maximumLevel+1;o++)i[o]=256*Math.pow(2,18-o);t.tilingScheme=new nw({resolutions:i,rectangleSouthwestInMeters:new D(-2003772637e-2,-1247410417e-2),rectangleNortheastInMeters:new D(2003772637e-2,1247410417e-2)})}else t.tilingScheme=new _r({rectangleSouthwestInMeters:new D(-33554054,-33746824),rectangleNortheastInMeters:new D(33554054,33746824)});super(t),this._rectangle=this._tilingScheme.rectangle,this._url=t.url,this._crs=t.crs,this._style=t.style,this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight}requestImage(t,n,i){if(this.maximumLevel>L4){if(i>L4&&i<this.maximumLevel)return Promise.reject(ow.BaiduError);if(i>=this.maximumLevel)return Promise.resolve(R4)}let o=this._tilingScheme.getNumberOfXTilesAtLevel(i),r=this._tilingScheme.getNumberOfYTilesAtLevel(i),s=this._url.replace(\"{z}\",i).replace(\"{s}\",String(1)).replace(\"{style}\",this._style);if(this._crs===\"WGS84\"){if(i<2||i===2&&t<2&&-n<2)return Promise.reject(ow.BaiduError);s=s.replace(\"{x}\",String(t)).replace(\"{y}\",String(-n))}else s=s.replace(\"{x}\",String(t-o/2)).replace(\"{y}\",String(r/2-n-1));return Aa.loadImage(this,s)}};fl(ow,\"BaiduError\",\"uranus-baidu\");var Z4=ow,rw=Z4;function pi(e,t){this._imageryProvider=e,this._readyEvent=new ge,this._errorEvent=new ge,this._requestEvent=new ge,t=g(t,g.EMPTY_OBJECT),e=g(e,g.EMPTY_OBJECT),this.alpha=g(t.alpha,g(e._defaultAlpha,1)),this.nightAlpha=g(t.nightAlpha,g(e._defaultNightAlpha,1)),this.dayAlpha=g(t.dayAlpha,g(e._defaultDayAlpha,1)),this.brightness=g(t.brightness,g(e._defaultBrightness,pi.DEFAULT_BRIGHTNESS)),this.contrast=g(t.contrast,g(e._defaultContrast,pi.DEFAULT_CONTRAST)),this.hue=g(t.hue,g(e._defaultHue,pi.DEFAULT_HUE)),this.saturation=g(t.saturation,g(e._defaultSaturation,pi.DEFAULT_SATURATION)),this.gamma=g(t.gamma,g(e._defaultGamma,pi.DEFAULT_GAMMA)),this.splitDirection=g(t.splitDirection,pi.DEFAULT_SPLIT),this.minificationFilter=g(t.minificationFilter,g(e._defaultMinificationFilter,pi.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=g(t.magnificationFilter,g(e._defaultMagnificationFilter,pi.DEFAULT_MAGNIFICATION_FILTER)),this.show=g(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=g(t.rectangle,le.MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new WV(IV.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=g(t.colorToAlphaThreshold,pi.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(pi.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},ready:{get:function(){return l(this._imageryProvider)}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},requestEvent:{get:function(){return this._requestEvent}},rectangle:{get:function(){return this._rectangle}}});pi.DEFAULT_BRIGHTNESS=1;pi.DEFAULT_CONTRAST=1;pi.DEFAULT_HUE=0;pi.DEFAULT_SATURATION=1;pi.DEFAULT_GAMMA=1;pi.DEFAULT_SPLIT=Hc.NONE;pi.DEFAULT_MINIFICATION_FILTER=dn.LINEAR;pi.DEFAULT_MAGNIFICATION_FILTER=yi.LINEAR;pi.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004;pi.fromProviderAsync=function(e,t){let n=new pi(void 0,t);return Art(n,Promise.resolve(e)),n};pi.fromWorldImagery=function(e){return e=g(e,g.EMPTY_OBJECT),pi.fromProviderAsync(q0({style:e.style}),e)};pi.prototype.isBaseLayer=function(){return this._isBaseLayer};pi.prototype.isDestroyed=function(){return!1};pi.prototype.destroy=function(){return me(this)};var Hbe=new le,Obe=new le,G4=new le,Kbe=new le;pi.prototype.getImageryRectangle=function(){let e=this._imageryProvider,t=this._rectangle;return le.intersection(e.rectangle,t)};pi.prototype._createTileImagerySkeletons=function(e,t,n){let i=e.data;if(!l(t)||l(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel||l(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;l(n)||(n=i.imagery.length);let o=this._imageryProvider;if(!this.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),i.imagery.splice(n,0,this._skeletonPlaceholder),!0;let r=o.tilingScheme.projection instanceof Li&&e.rectangle.north<Li.MaximumLatitude&&e.rectangle.south>-Li.MaximumLatitude,s=le.intersection(o.rectangle,this._rectangle,Hbe),a=le.intersection(e.rectangle,s,Obe);if(!l(a)){if(!this.isBaseLayer())return!1;let E=s,I=e.rectangle;a=Obe,I.south>=E.north?a.north=a.south=E.north:I.north<=E.south?a.north=a.south=E.south:(a.south=Math.max(I.south,E.south),a.north=Math.min(I.north,E.north)),I.west>=E.east?a.west=a.east=E.east:I.east<=E.west?a.west=a.east=E.west:(a.west=Math.max(I.west,E.west),a.east=Math.min(I.east,E.east))}let c=0;a.south>0?c=a.south:a.north<0&&(c=a.north);let u=1*t.getLevelMaximumGeometricError(e.level),m=wrt(this,u,c);m=Math.max(0,m);let p=o.maximumLevel;if(m>p&&(m=p),l(o.minimumLevel)){let E=o.minimumLevel;m<E&&(m=E)}let b=o.tilingScheme,f=b.positionToTileXY(le.northwest(a),m),x=b.positionToTileXY(le.southeast(a),m),_=e.rectangle.width/512,C=e.rectangle.height/512,V=b.tileXYToRectangle(f.x,f.y,m);Math.abs(V.south-e.rectangle.north)<C&&f.y<x.y&&++f.y,Math.abs(V.east-e.rectangle.west)<_&&f.x<x.x&&++f.x;let L=b.tileXYToRectangle(x.x,x.y,m);Math.abs(L.north-e.rectangle.south)<C&&x.y>f.y&&--x.y,Math.abs(L.west-e.rectangle.east)<_&&x.x>f.x&&--x.x;let R=le.clone(e.rectangle,Kbe),G=b.tileXYToRectangle(f.x,f.y,m),X=le.intersection(G,s,G4);if(!X)return!1;let v;r?(b.rectangleToNativeRectangle(R,R),b.rectangleToNativeRectangle(G,G),b.rectangleToNativeRectangle(X,X),b.rectangleToNativeRectangle(s,s),v=b.tileXYToNativeRectangle.bind(b),_=R.width/512,C=R.height/512):v=b.tileXYToRectangle.bind(b);let W,F=0,A=1,y;!this.isBaseLayer()&&Math.abs(X.west-R.west)>=_&&(F=Math.min(1,(X.west-R.west)/R.width)),!this.isBaseLayer()&&Math.abs(X.north-R.north)>=C&&(A=Math.max(0,(X.north-R.south)/R.height));let Z=A;for(let E=f.x;E<=x.x;E++)if(W=F,G=v(E,f.y,m),X=le.simpleIntersection(G,s,G4),!!l(X)){F=Math.min(1,(X.east-R.west)/R.width),E===x.x&&(this.isBaseLayer()||Math.abs(X.east-R.east)<_)&&(F=1),A=Z;for(let I=f.y;I<=x.y;I++){if(y=A,G=v(E,I,m),X=le.simpleIntersection(G,s,G4),!l(X))continue;A=Math.max(0,(X.south-R.south)/R.height),I===x.y&&(this.isBaseLayer()||Math.abs(X.south-R.south)<C)&&(A=0);let w=new se(W,A,F,y),k=this.getImageryFromCache(E,I,m);if(i.imagery.splice(n,0,new WV(k,w,r)),b.shouldCorrection){let B=i.imagery[n];iw(B,b)}++n}}return!0};pi.prototype._calculateTextureTranslationAndScale=function(e,t){let n=t.readyImagery.rectangle,i=e.rectangle;if(t.useWebMercatorT){let c=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;n=c.rectangleToNativeRectangle(n,Hbe),i=c.rectangleToNativeRectangle(i,Kbe)}let o=i.width,r=i.height,s=o/n.width,a=r/n.height;return new se(s*(i.west-n.west)/o,a*(i.south-n.south)/r,s,a)};pi.prototype._requestImagery=function(e){let t=this._imageryProvider,n=this;function i(s){if(!l(s))return o();e.image=s,e.state=$n.RECEIVED,e.request=void 0,So.reportSuccess(n._requestImageError),n.requestEvent.raiseEvent(\"success\")}function o(s){if(s===rw.BaiduError){e.state=$n.FAILED,e.request=void 0;return}if(e.request.state===Qn.CANCELLED){e.state=$n.UNLOADED,e.request=void 0;return}e.state=$n.FAILED,e.request=void 0,n.requestEvent.raiseEvent(\"failure\");let a=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;n._requestImageError=So.reportError(n._requestImageError,t,t.errorEvent,a,e.x,e.y,e.level,s),n._requestImageError.retry&&r()}function r(){let s=new Do({throttle:!1,throttleByServer:!0,type:is.IMAGERY});e.request=s,e.state=$n.TRANSITIONING;let a=t.requestImage(e.x,e.y,e.level,s);if(!l(a)){e.state=$n.UNLOADED,e.request=void 0;return}l(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),a.then(function(c){i(c)}).catch(function(c){o(c)})}r()};pi.prototype._createTextureWebGL=function(e,t){let n=new mn({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),i=t.image;return l(i.internalFormat)?new Ft({context:e,pixelFormat:i.internalFormat,width:i.width,height:i.height,source:{arrayBufferView:i.bufferView},sampler:n}):new Ft({context:e,source:i,pixelFormat:this._imageryProvider.hasAlphaChannel?at.RGBA:at.RGB,sampler:n})};pi.prototype._createTexture=function(e,t){let n=this._imageryProvider,i=t.image;if(l(n.tileDiscardPolicy)){let r=n.tileDiscardPolicy;if(l(r)){if(!r.isReady()){t.state=$n.RECEIVED;return}if(r.shouldDiscardImage(i)){t.state=$n.INVALID;return}}}let o=this._createTextureWebGL(e,t);n.tilingScheme.projection instanceof Li?t.textureWebMercator=o:t.texture=o,t.image=void 0,t.state=$n.TEXTURE_LOADED};function zbe(e,t,n){return`${e}:${t}:${n}`}pi.prototype._finalizeReprojectTexture=function(e,t){let n=this.minificationFilter,i=this.magnificationFilter;if(n===dn.LINEAR&&i===yi.LINEAR&&!at.isCompressedFormat(t.pixelFormat)&&P.isPowerOfTwo(t.width)&&P.isPowerOfTwo(t.height)){n=dn.LINEAR_MIPMAP_LINEAR;let r=Yt.maximumTextureFilterAnisotropy,s=Math.min(r,g(this._maximumAnisotropy,r)),a=zbe(n,i,s),c=e.cache.imageryLayerMipmapSamplers;l(c)||(c={},e.cache.imageryLayerMipmapSamplers=c);let d=c[a];l(d)||(d=c[a]=new mn({wrapS:En.CLAMP_TO_EDGE,wrapT:En.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i,maximumAnisotropy:s})),t.generateMipmap(Kh.NICEST),t.sampler=d}else{let r=zbe(n,i,0),s=e.cache.imageryLayerNonMipmapSamplers;l(s)||(s={},e.cache.imageryLayerNonMipmapSamplers=s);let a=s[r];l(a)||(a=s[r]=new mn({wrapS:En.CLAMP_TO_EDGE,wrapT:En.CLAMP_TO_EDGE,minificationFilter:n,magnificationFilter:i})),t.sampler=a}};pi.prototype._reprojectTexture=function(e,t,n){let i=t.textureWebMercator||t.texture,o=t.rectangle,r=e.context;if(n=g(n,!0),n&&!(this._imageryProvider.tilingScheme.projection instanceof Ci)&&o.width/i.width>1e-5){let s=this;t.addReference();let a=new iu({persists:!0,owner:this,preExecute:function(c){vrt(c,r,i,t.rectangle)},postExecute:function(c){t.texture=c,s._finalizeReprojectTexture(r,c),t.state=$n.READY,t.releaseReference()},canceled:function(){t.state=$n.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(a)}else n&&(t.texture=i),this._finalizeReprojectTexture(r,i),t.state=$n.READY};pi.prototype.queueReprojectionCommands=function(e){let t=this._reprojectComputeCommands,n=t.length;for(let i=0;i<n;++i)e.commandList.push(t[i]);t.length=0};pi.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach(function(e){l(e.canceled)&&e.canceled()}),this._reprojectComputeCommands.length=0};pi.prototype.getImageryFromCache=function(e,t,n,i){let o=Jbe(e,t,n),r=this._imageryCache[o];return l(r)||(r=new IV(this,e,t,n,i),this._imageryCache[o]=r),r.addReference(),r};pi.prototype.removeImageryFromCache=function(e){let t=Jbe(e.x,e.y,e.level);delete this._imageryCache[t]};function Jbe(e,t,n){return JSON.stringify([e,t,n])}var lD={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new D,texture:void 0},Prt=Ut.supportsTypedArrays()?new Float32Array(2*64):void 0;function vrt(e,t,n,i){let o=t.cache.imageryLayer_reproject;if(!l(o)){o=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){l(this.framebuffer)&&this.framebuffer.destroy(),l(this.vertexArray)&&this.vertexArray.destroy(),l(this.shaderProgram)&&this.shaderProgram.destroy()}};let _=new Float32Array(2*64*2),C=0;for(let X=0;X<64;++X){let v=X/63;_[C++]=0,_[C++]=v,_[C++]=1,_[C++]=v}let V={position:0,webMercatorT:1},L=Jr.getRegularGridIndices(2,64),R=pt.createIndexBuffer({context:t,typedArray:L,usage:Me.STATIC_DRAW,indexDatatype:Ae.UNSIGNED_SHORT});o.vertexArray=new ti({context:t,attributes:[{index:V.position,vertexBuffer:pt.createVertexBuffer({context:t,typedArray:_,usage:Me.STATIC_DRAW}),componentsPerAttribute:2},{index:V.webMercatorT,vertexBuffer:pt.createVertexBuffer({context:t,sizeInBytes:64*2*4,usage:Me.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:R});let G=new Ue({sources:[$v]});o.shaderProgram=Ht.fromCache({context:t,vertexShaderSource:G,fragmentShaderSource:qv,attributeLocations:V}),o.sampler=new mn({wrapS:En.CLAMP_TO_EDGE,wrapT:En.CLAMP_TO_EDGE,minificationFilter:dn.LINEAR,magnificationFilter:yi.LINEAR})}n.sampler=o.sampler;let r=n.width,s=n.height;lD.textureDimensions.x=r,lD.textureDimensions.y=s,lD.texture=n;let a=Math.sin(i.south),c=.5*Math.log((1+a)/(1-a));a=Math.sin(i.north);let u=1/(.5*Math.log((1+a)/(1-a))-c),m=new Ft({context:t,width:r,height:s,pixelFormat:n.pixelFormat,pixelDatatype:n.pixelDatatype,preMultiplyAlpha:n.preMultiplyAlpha});P.isPowerOfTwo(r)&&P.isPowerOfTwo(s)&&m.generateMipmap(Kh.NICEST);let p=i.south,b=i.north,f=Prt,x=0;for(let _=0;_<64;++_){let C=_/63,V=P.lerp(p,b,C);a=Math.sin(V);let R=(.5*Math.log((1+a)/(1-a))-c)*u;f[x++]=R,f[x++]=R}o.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(f),e.shaderProgram=o.shaderProgram,e.outputTexture=m,e.uniformMap=lD,e.vertexArray=o.vertexArray}function wrt(e,t,n){let i=e._imageryProvider,o=i.tilingScheme,r=o.ellipsoid,s=e._imageryProvider.tilingScheme.projection instanceof Ci?1:Math.cos(n),a=o.rectangle,d=r.maximumRadius*a.width*s/(i.tileWidth*o.getNumberOfXTilesAtLevel(0))/t,u=Math.log(d)/Math.log(2);return Math.round(u)|0}function Frt(e,t){e.numberOfListeners>0?e.raiseEvent(t):console.error(t)}async function Art(e,t){let n;try{if(n=await Promise.resolve(t),e.isDestroyed())return;e._imageryProvider=n,e._readyEvent.raiseEvent(n)}catch(i){Frt(e._errorEvent,i)}}var ha=pi;var hCi=T(S(),1);var BSi=T(S(),1),Mrt={WEST:0,NORTH:1,EAST:2,SOUTH:3,NORTHWEST:4,NORTHEAST:5,SOUTHWEST:6,SOUTHEAST:7},gn=Mrt;var OSi=T(S(),1),Qbe={NONE:0,CULLED:1,RENDERED:2,REFINED:3,RENDERED_AND_KICKED:6,REFINED_AND_KICKED:7,CULLED_BUT_NEEDED:9,wasKicked:function(e){return e>=Qbe.RENDERED_AND_KICKED},originalResult:function(e){return e&3},kick:function(e){return e|4}},Kn=Qbe;function wV(e){this.tile=e,this.frameLastUpdated=void 0,this.westMeshes=[],this.westTiles=[],this.southMeshes=[],this.southTiles=[],this.eastMeshes=[],this.eastTiles=[],this.northMeshes=[],this.northTiles=[],this.southwestMesh=void 0,this.southwestTile=void 0,this.southeastMesh=void 0,this.southeastTile=void 0,this.northwestMesh=void 0,this.northwestTile=void 0,this.northeastMesh=void 0,this.northeastTile=void 0,this.changedThisFrame=!0,this.visitedFrame=void 0,this.enqueuedFrame=void 0,this.mesh=void 0,this.vertexArray=void 0,this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new se}wV.prototype.update=function(e,t,n){this.changedThisFrame&&(iye(e,t,this.tile,n),this.changedThisFrame=!1)};wV.prototype.destroy=function(e){this._destroyVertexArray(e),l(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,this.waterMaskTexture.referenceCount===0&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0)};wV.prototype._destroyVertexArray=function(e){l(this.vertexArray)&&(l(e)?e.push(this.vertexArray):ju._freeVertexArray(this.vertexArray),this.vertexArray=void 0)};var Nrt=new Zy;wV.updateFillTiles=function(e,t,n,i){let o=e._quadtree,r=o._levelZeroTiles,s=o._lastSelectionFrameNumber,a=Nrt;a.clear();for(let d=0;d<t.length;++d){let u=t[d];l(u.data.vertexArray)&&a.enqueue(t[d])}let c=a.dequeue();for(;c!==void 0;){let d=c.findTileToWest(r),u=c.findTileToSouth(r),m=c.findTileToEast(r),p=c.findTileToNorth(r);Ls(e,n,c,d,s,gn.EAST,!1,a,i),Ls(e,n,c,u,s,gn.NORTH,!1,a,i),Ls(e,n,c,m,s,gn.WEST,!1,a,i),Ls(e,n,c,p,s,gn.SOUTH,!1,a,i);let b=d.findTileToNorth(r),f=d.findTileToSouth(r),x=m.findTileToNorth(r),_=m.findTileToSouth(r);Ls(e,n,c,b,s,gn.SOUTHEAST,!1,a,i),Ls(e,n,c,x,s,gn.SOUTHWEST,!1,a,i),Ls(e,n,c,f,s,gn.NORTHEAST,!1,a,i),Ls(e,n,c,_,s,gn.NORTHWEST,!1,a,i),c=a.dequeue()}};function Ls(e,t,n,i,o,r,s,a,c){if(i===void 0)return;let d=i;for(;d&&(d._lastSelectionResultFrame!==o||Kn.wasKicked(d._lastSelectionResult)||Kn.originalResult(d._lastSelectionResult)===Kn.CULLED);){if(s)return;let u=d.parent;if(r>=gn.NORTHWEST&&u!==void 0)switch(r){case gn.NORTHWEST:d=d===u.northwestChild?u:void 0;break;case gn.NORTHEAST:d=d===u.northeastChild?u:void 0;break;case gn.SOUTHWEST:d=d===u.southwestChild?u:void 0;break;case gn.SOUTHEAST:d=d===u.southeastChild?u:void 0;break}else d=u}if(d!==void 0){if(d._lastSelectionResult===Kn.RENDERED){if(l(d.data.vertexArray))return;krt(e,t,n,d,r,o,a,c);return}if(Kn.originalResult(i._lastSelectionResult)!==Kn.CULLED)switch(r){case gn.WEST:Ls(e,t,n,i.northwestChild,o,r,!0,a,c),Ls(e,t,n,i.southwestChild,o,r,!0,a,c);break;case gn.EAST:Ls(e,t,n,i.southeastChild,o,r,!0,a,c),Ls(e,t,n,i.northeastChild,o,r,!0,a,c);break;case gn.SOUTH:Ls(e,t,n,i.southwestChild,o,r,!0,a,c),Ls(e,t,n,i.southeastChild,o,r,!0,a,c);break;case gn.NORTH:Ls(e,t,n,i.northeastChild,o,r,!0,a,c),Ls(e,t,n,i.northwestChild,o,r,!0,a,c);break;case gn.NORTHWEST:Ls(e,t,n,i.northwestChild,o,r,!0,a,c);break;case gn.NORTHEAST:Ls(e,t,n,i.northeastChild,o,r,!0,a,c);break;case gn.SOUTHWEST:Ls(e,t,n,i.southwestChild,o,r,!0,a,c);break;case gn.SOUTHEAST:Ls(e,t,n,i.southeastChild,o,r,!0,a,c);break;default:throw new fe(\"Invalid edge\")}}}function krt(e,t,n,i,o,r,s,a){let c=i.data;if(c.fill===void 0)c.fill=new wV(i);else if(c.fill.visitedFrame===r)return;c.fill.enqueuedFrame!==r&&(c.fill.enqueuedFrame=r,c.fill.changedThisFrame=!1,s.enqueue(i)),Urt(e,t,n,i,o,a)}function Urt(e,t,n,i,o,r){let s=i.data.fill,a,c=n.data.fill;l(c)?(c.visitedFrame=t.frameNumber,c.changedThisFrame&&(iye(e,t,n,r),c.changedThisFrame=!1),a=n.data.fill.mesh):a=n.data.mesh;let d,u;switch(o){case gn.WEST:d=s.westMeshes,u=s.westTiles;break;case gn.SOUTH:d=s.southMeshes,u=s.southTiles;break;case gn.EAST:d=s.eastMeshes,u=s.eastTiles;break;case gn.NORTH:d=s.northMeshes,u=s.northTiles;break;case gn.NORTHWEST:s.changedThisFrame=s.changedThisFrame||s.northwestMesh!==a,s.northwestMesh=a,s.northwestTile=n;return;case gn.NORTHEAST:s.changedThisFrame=s.changedThisFrame||s.northeastMesh!==a,s.northeastMesh=a,s.northeastTile=n;return;case gn.SOUTHWEST:s.changedThisFrame=s.changedThisFrame||s.southwestMesh!==a,s.southwestMesh=a,s.southwestTile=n;return;case gn.SOUTHEAST:s.changedThisFrame=s.changedThisFrame||s.southeastMesh!==a,s.southeastMesh=a,s.southeastTile=n;return}if(n.level<=i.level){s.changedThisFrame=s.changedThisFrame||d[0]!==a||d.length!==1,d[0]=a,u[0]=n,d.length=1,u.length=1;return}let m,p,b,f,x=n.rectangle,_,C=i.rectangle;switch(o){case gn.WEST:for(_=(C.north-C.south)*P.EPSILON5,m=0;m<u.length&&(b=u[m],f=b.rectangle,!P.greaterThan(x.north,f.south,_));++m);for(p=m;p<u.length&&(b=u[p],f=b.rectangle,!P.greaterThanOrEquals(x.south,f.north,_));++p);break;case gn.SOUTH:for(_=(C.east-C.west)*P.EPSILON5,m=0;m<u.length&&(b=u[m],f=b.rectangle,!P.lessThan(x.west,f.east,_));++m);for(p=m;p<u.length&&(b=u[p],f=b.rectangle,!P.lessThanOrEquals(x.east,f.west,_));++p);break;case gn.EAST:for(_=(C.north-C.south)*P.EPSILON5,m=0;m<u.length&&(b=u[m],f=b.rectangle,!P.lessThan(x.south,f.north,_));++m);for(p=m;p<u.length&&(b=u[p],f=b.rectangle,!P.lessThanOrEquals(x.north,f.south,_));++p);break;case gn.NORTH:for(_=(C.east-C.west)*P.EPSILON5,m=0;m<u.length&&(b=u[m],f=b.rectangle,!P.greaterThan(x.east,f.west,_));++m);for(p=m;p<u.length&&(b=u[p],f=b.rectangle,!P.greaterThanOrEquals(x.west,f.east,_));++p);break}p-m===1?(s.changedThisFrame=s.changedThisFrame||d[m]!==a,d[m]=a,u[m]=n):(s.changedThisFrame=!0,d.splice(m,p-m,a),u.splice(m,p-m,n))}var xT=new he,Drt=new he,vV=new h,W4=new h,E4=new D,X4=new D,Ud=new D;function bD(){this.height=0,this.encodedNormal=new D}function dD(e,t,n,i,o,r,s,a,c){if(l(o))return o;let d;if(l(r)&&l(s))d=(r.height+s.height)*.5;else if(l(r))d=r.height;else if(l(s))d=s.height;else if(l(a))d=a.height;else{let"
}