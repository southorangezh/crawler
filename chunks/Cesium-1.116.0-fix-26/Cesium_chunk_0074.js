{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 74,
    "total_chunks": 194,
    "chunk_size": 42523,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.690Z"
  },
  "content": "a.primitive}}}}function v9e(e){let t=e.nodes,n=new h,i=new Fe;for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o];if(l(r.rotation)){let a=r.rotation;h.fromArray(a,0,n),Fe.fromAxisAngle(n,a[3],i),r.rotation=[i.x,i.y,i.z,i.w]}let s=r.instanceSkin;l(s)&&(r.skeletons=s.skeletons,r.skin=s.skin,r.meshes=s.meshes,delete r.instanceSkin)}}function w9e(e){let t=e.animations,n=e.accessors,i=e.bufferViews,o=e.buffers,r={},s=new h,a=new Fe;for(let c in t)if(Object.prototype.hasOwnProperty.call(t,c)){let d=t[c],u=d.channels,m=d.parameters,p=d.samplers;if(l(u)){let b=u.length;for(let f=0;f<b;++f){let x=u[f];if(x.target.path===\"rotation\"){let _=m[p[x.sampler].output];if(l(r[_]))continue;r[_]=!0;let C=n[_],V=i[C.bufferView],R=o[V.buffer].extras._pipeline.source,G=R.byteOffset+V.byteOffset+C.byteOffset,X=C.componentType,v=C.count,W=pd(C.type),F=C.count*W,A=Q.createArrayBufferView(X,R.buffer,G,F);for(let y=0;y<v;y++){let Z=y*W;h.unpack(A,Z,s);let E=A[Z+3];Fe.fromAxisAngle(s,E,a),Fe.pack(a,A,Z)}}}}}}function F9e(e){let t=e.techniques;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.passes;if(l(o)){let r=g(i.pass,\"defaultPass\");if(Object.prototype.hasOwnProperty.call(o,r)){let s=o[r],a=s.instanceProgram;i.attributes=g(i.attributes,a.attributes),i.program=g(i.program,a.program),i.uniforms=g(i.uniforms,a.uniforms),i.states=g(i.states,s.states)}delete i.passes,delete i.pass}}}function A9e(e){l(e.asset)||(e.asset={});let t=e.asset;if(t.version=\"1.0\",typeof t.profile==\"string\"){let n=t.profile.split(\" \");t.profile={api:n[0],version:n[1]}}else t.profile={};if(l(e.version)&&delete e.version,Zoe(e),P9e(e),v9e(e),w9e(e),F9e(e),l(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions),l(e.lights)){let n=g(e.extensions,{});e.extensions=n;let i=g(n.KHR_materials_common,{});n.KHR_materials_common=i,i.lights=e.lights,delete e.lights,bu(e,\"KHR_materials_common\")}}function M9e(e){let t=e.animations;for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],o=i.parameters;if(l(o)){let r=i.samplers;for(let s in r)if(Object.prototype.hasOwnProperty.call(r,s)){let a=r[s];a.input=o[a.input],a.output=o[a.output]}delete i.parameters}}}function Voe(e,t){let n=[];for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let o=e[i];t[i]=n.length,n.push(o),l(o.name)||(o.name=i)}return n}function N9e(e){let t,n={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}},i,o={},r=e.nodes;for(let s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i=r[s].jointName,l(i)&&(o[i]=s));for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&l(n[s])){let a={},c=e[s];e[s]=Voe(c,a),n[s]=a}for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(o[i]=n.nodes[o[i]]);l(e.scene)&&(e.scene=n.scenes[e.scene]),We.bufferView(e,function(s){l(s.buffer)&&(s.buffer=n.buffers[s.buffer])}),We.accessor(e,function(s){l(s.bufferView)&&(s.bufferView=n.bufferViews[s.bufferView])}),We.shader(e,function(s){let a=s.extensions;if(l(a)){let c=a.KHR_binary_glTF;l(c)&&(s.bufferView=n.bufferViews[c.bufferView],delete a.KHR_binary_glTF),Object.keys(a).length===0&&delete s.extensions}}),We.program(e,function(s){l(s.vertexShader)&&(s.vertexShader=n.shaders[s.vertexShader]),l(s.fragmentShader)&&(s.fragmentShader=n.shaders[s.fragmentShader])}),We.technique(e,function(s){l(s.program)&&(s.program=n.programs[s.program]),We.techniqueParameter(s,function(a){l(a.node)&&(a.node=n.nodes[a.node]);let c=a.value;typeof c==\"string\"&&(a.value={index:n.textures[c]})})}),We.mesh(e,function(s){We.meshPrimitive(s,function(a){l(a.indices)&&(a.indices=n.accessors[a.indices]),We.meshPrimitiveAttribute(a,function(c,d){a.attributes[d]=n.accessors[c]}),l(a.material)&&(a.material=n.materials[a.material])})}),We.node(e,function(s){let a=s.children;if(l(a)){let c=a.length;for(t=0;t<c;++t)a[t]=n.nodes[a[t]]}if(l(s.meshes)){let c=s.meshes,d=c.length;if(d>0)for(s.mesh=n.meshes[c[0]],t=1;t<d;++t){let u={mesh:n.meshes[c[t]]},m=hs(e.nodes,u);l(a)||(a=[],s.children=a),a.push(m)}delete s.meshes}if(l(s.camera)&&(s.camera=n.cameras[s.camera]),l(s.skin)&&(s.skin=n.skins[s.skin]),l(s.skeletons)){let c=s.skeletons;if(c.length>0&&l(s.skin)){let u=e.skins[s.skin];u.skeleton=n.nodes[c[0]]}delete s.skeletons}l(s.jointName)&&delete s.jointName}),We.skin(e,function(s){l(s.inverseBindMatrices)&&(s.inverseBindMatrices=n.accessors[s.inverseBindMatrices]);let a=s.jointNames;if(l(a)){let c=[],d=a.length;for(t=0;t<d;++t)c[t]=o[a[t]];s.joints=c,delete s.jointNames}}),We.scene(e,function(s){let a=s.nodes;if(l(a)){let c=a.length;for(t=0;t<c;++t)a[t]=n.nodes[a[t]]}}),We.animation(e,function(s){let a={};s.samplers=Voe(s.samplers,a),We.animationSampler(s,function(c){c.input=n.accessors[c.input],c.output=n.accessors[c.output]}),We.animationChannel(s,function(c){c.sampler=a[c.sampler];let d=c.target;l(d)&&(d.node=n.nodes[d.id],delete d.id)})}),We.material(e,function(s){l(s.technique)&&(s.technique=n.techniques[s.technique]),We.materialValue(s,function(c,d){typeof c==\"string\"&&(s.values[d]={index:n.textures[c]})});let a=s.extensions;if(l(a)){let c=a.KHR_materials_common;l(c)&&l(c.values)&&We.materialValue(c,function(d,u){typeof d==\"string\"&&(c.values[u]={index:n.textures[d]})})}}),We.image(e,function(s){let a=s.extensions;if(l(a)){let c=a.KHR_binary_glTF;l(c)&&(s.bufferView=n.bufferViews[c.bufferView],s.mimeType=c.mimeType,delete a.KHR_binary_glTF),Object.keys(a).length===0&&delete s.extensions}}),We.texture(e,function(s){l(s.sampler)&&(s.sampler=n.samplers[s.sampler]),l(s.source)&&(s.source=n.images[s.source])})}function k9e(e){We.animation(e,function(t){We.animationSampler(t,function(n){delete n.name})})}function U9e(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];Array.isArray(n)&&n.length===0&&delete e[t]}We.node(e,function(t){l(t.children)&&t.children.length===0&&delete t.children})}function D9e(e){let t=e.asset;delete t.profile,delete t.premultipliedAlpha}var B9e={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0};function Y9e(e){let t=e.extensionsUsed;if(e.extensionsRequired=g(e.extensionsRequired,[]),l(t)){let n=t.length;for(let i=0;i<n;++i){let o=t[i];l(B9e[o])&&e.extensionsRequired.push(o)}}}function O9e(e){We.buffer(e,function(t){delete t.type})}function z9e(e){We.texture(e,function(t){delete t.format,delete t.internalFormat,delete t.target,delete t.type})}function H9e(e){We.mesh(e,function(t){We.meshPrimitive(t,function(n){We.meshPrimitiveAttribute(n,function(i,o){o===\"TEXCOORD\"?n.attributes.TEXCOORD_0=i:o===\"COLOR\"&&(n.attributes.COLOR_0=i)}),delete n.attributes.TEXCOORD,delete n.attributes.COLOR})}),We.technique(e,function(t){We.techniqueParameter(t,function(n){let i=n.semantic;l(i)&&(i===\"TEXCOORD\"?n.semantic=\"TEXCOORD_0\":i===\"COLOR\"&&(n.semantic=\"COLOR_0\"))})})}var K9e={POSITION:!0,NORMAL:!0,TANGENT:!0},J9e={COLOR:\"COLOR\",JOINT:\"JOINTS\",JOINTS:\"JOINTS\",TEXCOORD:\"TEXCOORD\",WEIGHT:\"WEIGHTS\",WEIGHTS:\"WEIGHTS\"};function Q9e(e){let t={};We.mesh(e,function(n){We.meshPrimitive(n,function(i){We.meshPrimitiveAttribute(i,function(o,r){if(r.charAt(0)!==\"_\"){let s=r.search(/_[0-9]+/g),a=r,c=\"_0\";s>=0&&(a=r.substring(0,s),c=r.substring(s));let d,u=J9e[a];l(u)?(d=u+c,t[r]=d):l(K9e[a])||(d=`_${r}`,t[r]=d)}});for(let o in t)if(Object.prototype.hasOwnProperty.call(t,o)){let r=t[o],s=i.attributes[o];l(s)&&(delete i.attributes[o],i.attributes[r]=s)}})}),We.technique(e,function(n){We.techniqueParameter(n,function(i){let o=t[i.semantic];l(o)&&(i.semantic=o)})})}function j9e(e){We.camera(e,function(t){let n=t.perspective;if(l(n)){let i=n.aspectRatio;l(i)&&i===0&&delete n.aspectRatio;let o=n.yfov;l(o)&&o===0&&(n.yfov=1)}})}function uz(e,t){return l(t.byteStride)&&t.byteStride!==0?t.byteStride:Xl(e,t)}function q9e(e){We.buffer(e,function(t){l(t.byteLength)||(t.byteLength=t.extras._pipeline.source.length)}),We.accessor(e,function(t){let n=t.bufferView;if(l(n)){let i=e.bufferViews[n],o=uz(e,t),r=t.byteOffset+t.count*o;i.byteLength=Math.max(g(i.byteLength,0),r)}})}function $9e(e){let t,n,i,o=e.bufferViews,r={};We.accessorContainingVertexAttributeData(e,function(a){let c=e.accessors[a];l(c.bufferView)&&(r[c.bufferView]=!0)});let s={};We.accessor(e,function(a){l(a.bufferView)&&(s[a.bufferView]=g(s[a.bufferView],[]),s[a.bufferView].push(a))});for(let a in s)if(Object.prototype.hasOwnProperty.call(s,a)){i=o[a];let c=s[a];c.sort(function(p,b){return p.byteOffset-b.byteOffset});let d=0,u=0,m=c.length;for(t=0;t<m;++t){let p=c[t],b=uz(e,p),f=p.byteOffset,x=p.count*b;delete p.byteStride;let _=t<m-1,C=_?uz(e,c[t+1]):void 0;if(b!==C){let V=Oe(i,!0);r[a]&&(V.byteStride=b),V.byteOffset+=d,V.byteLength=f+x-d;let L=hs(o,V);for(n=u;n<=t;++n)p=c[n],p.bufferView=L,p.byteOffset=p.byteOffset-d;d=_?c[t+1].byteOffset:void 0,u=t+1}}}IX(e,[\"accessor\",\"bufferView\",\"buffer\"])}function eAe(e){We.accessorWithSemantic(e,\"POSITION\",function(t){let n=e.accessors[t];if(!l(n.min)||!l(n.max)){let i=Qx(e,n);n.min=i.min,n.max=i.max}})}function Roe(e){return(!l(e.children)||e.children.length===0)&&(!l(e.meshes)||e.meshes.length===0)&&!l(e.camera)&&!l(e.skin)&&!l(e.skeletons)&&!l(e.jointName)&&(!l(e.translation)||h.fromArray(e.translation).equals(h.ZERO))&&(!l(e.scale)||h.fromArray(e.scale).equals(new h(1,1,1)))&&(!l(e.rotation)||se.fromArray(e.rotation).equals(new se(0,0,0,1)))&&(!l(e.matrix)||M.fromColumnMajorArray(e.matrix).equals(M.IDENTITY))&&!l(e.extensions)&&!l(e.extras)}function Goe(e,t){We.scene(e,function(n){let i=n.nodes;if(l(i)){let o=i.length;for(let r=o;r>=0;--r)if(i[r]===t){i.splice(r,1);return}}}),We.node(e,function(n,i){if(l(n.children)){let o=n.children.indexOf(t);o>-1&&(n.children.splice(o,1),Roe(n)&&Goe(e,i))}}),delete e.nodes[t]}function tAe(e){return We.node(e,function(t,n){Roe(t)&&Goe(e,n)}),e}function nAe(e){We.animation(e,function(t){We.animationSampler(t,function(n){let i=e.accessors[n.input];if(!l(i.min)||!l(i.max)){let o=Qx(e,i);i.min=o.min,i.max=o.max}})})}function iAe(e){We.accessor(e,function(t){if(l(t.min)||l(t.max)){let n=Qx(e,t);l(t.min)&&(t.min=n.min),l(t.max)&&(t.max=n.max)}})}function oAe(e){e.asset=g(e.asset,{}),e.asset.version=\"2.0\",Zoe(e),M9e(e),tAe(e),N9e(e),k9e(e),D9e(e),Y9e(e),q9e(e),$9e(e),eAe(e),nAe(e),iAe(e),O9e(e),z9e(e),H9e(e),Q9e(e),vX(e),j9e(e),GX(e),XX(e),U9e(e)}var rAe=[\"u_tex\",\"u_diffuse\",\"u_emission\",\"u_diffuse_tex\"],sAe=[\"u_diffuse\",\"u_diffuse_mat\"];function mz(e){e.pbrMetallicRoughness=l(e.pbrMetallicRoughness)?e.pbrMetallicRoughness:{},e.pbrMetallicRoughness.roughnessFactor=1,e.pbrMetallicRoughness.metallicFactor=0}function hz(e){return l(e.index)}function fz(e){return Array.isArray(e)&&e.length===4}function Eoe(e){let t=new Array(4);t[3]=e[3];for(let n=0;n<3;n++){let i=e[n];i<=.04045?t[n]=e[n]*.07739938080495357:t[n]=Math.pow((i+.055)*.9478672985781991,2.4)}return t}function aAe(e,t){t=g(t,g.EMPTY_OBJECT);let n=g(t.baseColorTextureNames,rAe),i=g(t.baseColorFactorNames,sAe);We.material(e,function(o){We.materialValue(o,function(r,s){n.indexOf(s)!==-1&&hz(r)?(mz(o),o.pbrMetallicRoughness.baseColorTexture=r):i.indexOf(s)!==-1&&fz(r)&&(mz(o),o.pbrMetallicRoughness.baseColorFactor=Eoe(r))})}),jx(e,\"KHR_techniques_webgl\"),jx(e,\"KHR_blend\")}function dz(e,t){l(t)&&(fz(t)?e.pbrMetallicRoughness.baseColorFactor=Eoe(t):hz(t)&&(e.pbrMetallicRoughness.baseColorTexture=t))}function Loe(e,t){l(t)&&(fz(t)?e.emissiveFactor=t.slice(0,3):hz(t)&&(e.emissiveTexture=t))}function cAe(e){We.material(e,function(t){let n=g(t.extensions,g.EMPTY_OBJECT).KHR_materials_common;if(!l(n))return;let i=g(n.values,{}),o=i.ambient,r=i.diffuse,s=i.emission,a=i.transparency,c=n.doubleSided,d=n.transparent;mz(t),n.technique===\"CONSTANT\"?(bu(e,\"KHR_materials_unlit\"),t.extensions=l(t.extensions)?t.extensions:{},t.extensions.KHR_materials_unlit={},dz(t,s),dz(t,o)):(dz(t,r),Loe(t,o),Loe(t,s)),l(c)&&(t.doubleSided=c),l(a)&&(l(t.pbrMetallicRoughness.baseColorFactor)?t.pbrMetallicRoughness.baseColorFactor[3]*=a:t.pbrMetallicRoughness.baseColorFactor=[1,1,1,a]),l(d)&&(t.alphaMode=d?\"BLEND\":\"OPAQUE\")}),jx(e,\"KHR_materials_common\")}var wX=W9e;var Aln=T(S(),1);var Vln=T(S(),1);var ri={POSITION:\"POSITION\",NORMAL:\"NORMAL\",TANGENT:\"TANGENT\",TEXCOORD:\"TEXCOORD\",COLOR:\"COLOR\",JOINTS:\"JOINTS\",WEIGHTS:\"WEIGHTS\",FEATURE_ID:\"_FEATURE_ID\"};function lAe(e){switch(e){case ri.POSITION:return\"positionMC\";case ri.NORMAL:return\"normalMC\";case ri.TANGENT:return\"tangentMC\";case ri.TEXCOORD:return\"texCoord\";case ri.COLOR:return\"color\";case ri.JOINTS:return\"joints\";case ri.WEIGHTS:return\"weights\";case ri.FEATURE_ID:return\"featureId\"}}ri.hasSetIndex=function(e){switch(e){case ri.POSITION:case ri.NORMAL:case ri.TANGENT:return!1;case ri.TEXCOORD:case ri.COLOR:case ri.JOINTS:case ri.WEIGHTS:case ri.FEATURE_ID:return!0}};ri.fromGltfSemantic=function(e){let t=e,i=/^(\\w+)_\\d+$/.exec(e);switch(i!==null&&(t=i[1]),t){case\"POSITION\":return ri.POSITION;case\"NORMAL\":return ri.NORMAL;case\"TANGENT\":return ri.TANGENT;case\"TEXCOORD\":return ri.TEXCOORD;case\"COLOR\":return ri.COLOR;case\"JOINTS\":return ri.JOINTS;case\"WEIGHTS\":return ri.WEIGHTS;case\"_FEATURE_ID\":return ri.FEATURE_ID}};ri.fromPntsSemantic=function(e){switch(e){case\"POSITION\":case\"POSITION_QUANTIZED\":return ri.POSITION;case\"RGBA\":case\"RGB\":case\"RGB565\":return ri.COLOR;case\"NORMAL\":case\"NORMAL_OCT16P\":return ri.NORMAL;case\"BATCH_ID\":return ri.FEATURE_ID}};ri.getGlslType=function(e){switch(e){case ri.POSITION:case ri.NORMAL:case ri.TANGENT:return\"vec3\";case ri.TEXCOORD:return\"vec2\";case ri.COLOR:return\"vec4\";case ri.JOINTS:return\"ivec4\";case ri.WEIGHTS:return\"vec4\";case ri.FEATURE_ID:return\"int\"}};ri.getVariableName=function(e,t){let n=lAe(e);return l(t)&&(n+=`_${t}`),n};var St=Object.freeze(ri);function rc(){}rc.getError=function(e,t,n){let i=`Failed to load ${e}: ${t}`;l(n)&&l(n.message)&&(i+=` ${n.message}`);let o=new ue(i);return l(n)&&(o.stack=`Original stack: ${n.stack} Handler stack: ${o.stack}`),o};rc.getNodeTransform=function(e){return l(e.matrix)?e.matrix:M.fromTranslationQuaternionRotationScale(l(e.translation)?e.translation:h.ZERO,l(e.rotation)?e.rotation:Fe.IDENTITY,l(e.scale)?e.scale:h.ONE)};rc.getAttributeBySemantic=function(e,t,n){let i=e.attributes,o=i.length;for(let r=0;r<o;++r){let s=i[r],a=l(n)?s.setIndex===n:!0;if(s.semantic===t&&a)return s}};rc.getAttributeByName=function(e,t){let n=e.attributes,i=n.length;for(let o=0;o<i;++o){let r=n[o];if(r.name===t)return r}};rc.getFeatureIdsByLabel=function(e,t){for(let n=0;n<e.length;n++){let i=e[n];if(i.positionalLabel===t||i.label===t)return i}};rc.hasQuantizedAttributes=function(e){if(!l(e))return!1;for(let t=0;t<e.length;t++){let n=e[t];if(l(n.quantization))return!0}return!1};rc.getAttributeInfo=function(e){let t=e.semantic,n=e.setIndex,i,o=!1;l(t)?(i=St.getVariableName(t,n),o=!0):(i=e.name,i=i.replace(/^_/,\"\"),i=i.toLowerCase());let r=/^color_\\d+$/.test(i),s=e.type,a=tn.getGlslType(s);r&&(a=\"vec4\");let c=l(e.quantization),d;return c&&(d=r?\"vec4\":tn.getGlslType(e.quantization.type)),{attribute:e,isQuantized:c,variableName:i,hasSemantic:o,glslType:a,quantizedGlslType:d}};var dAe=new h,uAe=new h;rc.getPositionMinMax=function(e,t,n){let i=rc.getAttributeBySemantic(e,\"POSITION\"),o=i.max,r=i.min;return l(n)&&l(t)&&(r=h.add(r,t,uAe),o=h.add(o,n,dAe)),{min:r,max:o}};rc.getAxisCorrectionMatrix=function(e,t,n){return n=M.clone(M.IDENTITY,n),e===Ro.Y?n=M.clone(Ro.Y_UP_TO_Z_UP,n):e===Ro.X&&(n=M.clone(Ro.X_UP_TO_Z_UP,n)),t===Ro.Z&&(n=M.multiplyTransformation(n,Ro.Z_UP_TO_X_UP,n)),n};var mAe=new $;rc.getCullFace=function(e,t){if(!we.isTriangles(t))return mi.BACK;let n=M.getMatrix3(e,mAe);return $.determinant(n)<0?mi.FRONT:mi.BACK};rc.sanitizeGlslIdentifier=function(e){let t=e.replaceAll(/[^A-Za-z0-9]+/g,\"_\");return t=t.replace(/^gl_/,\"\"),/^\\d/.test(t)&&(t=`_${t}`),t};rc.supportedExtensions={AGI_articulations:!0,CESIUM_primitive_outline:!0,CESIUM_RTC:!0,EXT_feature_metadata:!0,EXT_instance_features:!0,EXT_mesh_features:!0,EXT_mesh_gpu_instancing:!0,EXT_meshopt_compression:!0,EXT_structural_metadata:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_draco_mesh_compression:!0,KHR_techniques_webgl:!0,KHR_materials_common:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_materials_unlit:!0,KHR_mesh_quantization:!0,KHR_texture_basisu:!0,KHR_texture_transform:!0,WEB3D_quantized_attributes:!0};rc.checkSupportedExtensions=function(e){let t=e.length;for(let n=0;n<t;n++){let i=e[n];if(!rc.supportedExtensions[i])throw new ue(`Unsupported glTF Extension: ${i}`)}};var qt=rc;function $b(e){e=g(e,g.EMPTY_OBJECT);let t=e.resourceCache,n=e.gltfResource,i=e.baseResource,o=e.typedArray,r=e.gltfJson,s=e.cacheKey;this._resourceCache=t,this._gltfResource=n,this._baseResource=i,this._typedArray=o,this._gltfJson=r,this._cacheKey=s,this._gltf=void 0,this._bufferLoaders=[],this._state=Xt.UNLOADED,this._promise=void 0}l(Object.create)&&($b.prototype=Object.create(io.prototype),$b.prototype.constructor=$b);Object.defineProperties($b.prototype,{cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}});$b.prototype.load=async function(){return l(this._promise)?this._promise:(this._state=Xt.LOADING,l(this._gltfJson)?(this._promise=Xoe(this,this._gltfJson),this._promise):l(this._typedArray)?(this._promise=Ioe(this,this._typedArray),this._promise):(this._promise=hAe(this),this._promise))};async function hAe(e){let t;try{let n=await e._fetchGltf();if(e.isDestroyed())return;t=new Uint8Array(n)}catch(n){if(e.isDestroyed())return;pz(e,n)}return Ioe(e,t)}function pz(e,t){e.unload(),e._state=Xt.FAILED;let n=`Failed to load glTF: ${e._gltfResource.url}`;throw e.getError(n,t)}async function fAe(e,t){if(l(t.asset)&&t.asset.version===\"2.0\"&&!or(t,\"KHR_techniques_webgl\")&&!or(t,\"KHR_materials_common\"))return Promise.resolve();let n=[];We.buffer(t,function(i){if(!l(i.extras._pipeline.source)&&l(i.uri)){let o=e._baseResource.getDerivedResource({url:i.uri}),s=e._resourceCache.getExternalBufferLoader({resource:o});e._bufferLoaders.push(s),n.push(s.load().then(function(){s.isDestroyed()||(i.extras._pipeline.source=s.typedArray)}))}}),await Promise.all(n),wX(t)}function pAe(e){let t=[];return We.buffer(e,function(n){let i=n.uri;!l(n.extras._pipeline.source)&&l(i)&&hp(i)&&(delete n.uri,t.push(Xe.fetchArrayBuffer(i).then(function(o){n.extras._pipeline.source=new Uint8Array(o)})))}),Promise.all(t)}function bAe(e,t){let n=[];return We.buffer(t,function(i,o){let r=i.extras._pipeline.source;if(l(r)&&!l(i.uri)){let a=e._resourceCache.getEmbeddedBufferLoader({parentResource:e._gltfResource,bufferId:o,typedArray:r});e._bufferLoaders.push(a),n.push(a.load())}}),Promise.all(n)}async function Xoe(e,t){try{qb(t),await pAe(t),await fAe(e,t),VX(t),await bAe(e,t),RX(t);let n=t.asset.version;if(n!==\"1.0\"&&n!==\"2.0\")throw new ue(`Unsupported glTF version: ${n}`);let i=t.extensionsRequired;return l(i)&&qt.checkSupportedExtensions(i),e._gltf=t,e._state=Xt.READY,e}catch(n){if(e.isDestroyed())return;pz(e,n)}}async function Ioe(e,t){let n;try{Wm(t)===\"glTF\"?n=ZX(t):n=Go(t)}catch(i){if(e.isDestroyed())return;pz(e,i)}return Xoe(e,n)}$b.prototype.unload=function(){let e=this._bufferLoaders,t=e.length;for(let n=0;n<t;++n)e[n]=!e[n].isDestroyed()&&this._resourceCache.unload(e[n]);this._bufferLoaders.length=0,this._gltf=void 0};$b.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()};var yC=$b;var Ndn=T(S(),1);var Sdn=T(S(),1);var udn=T(S(),1);var odn=T(S(),1),yAe={OPAQUE:\"OPAQUE\",MASK:\"MASK\",BLEND:\"BLEND\"},af=Object.freeze(yAe);var Ho={};function gAe(){this.octEncoded=!1,this.octEncodedZXY=!1,this.normalizationRange=void 0,this.quantizedVolumeOffset=void 0,this.quantizedVolumeDimensions=void 0,this.quantizedVolumeStepSize=void 0,this.componentDatatype=void 0,this.type=void 0}function xAe(){this.name=void 0,this.semantic=void 0,this.setIndex=void 0,this.componentDatatype=void 0,this.type=void 0,this.normalized=!1,this.count=void 0,this.min=void 0,this.max=void 0,this.constant=void 0,this.quantization=void 0,this.typedArray=void 0,this.buffer=void 0,this.byteOffset=0,this.byteStride=void 0}function _Ae(){this.indexDatatype=void 0,this.count=void 0,this.buffer=void 0,this.typedArray=void 0}function TAe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.setIndex=void 0,this.label=void 0,this.positionalLabel=void 0}function SAe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.offset=0,this.repeat=void 0,this.label=void 0,this.positionalLabel=void 0}function CAe(){this.featureCount=void 0,this.nullFeatureId=void 0,this.propertyTableId=void 0,this.textureReader=void 0,this.label=void 0,this.positionalLabel=void 0}function VAe(){this.attributes=[]}function LAe(){this.attributes=[],this.morphTargets=[],this.indices=void 0,this.material=void 0,this.primitiveType=void 0,this.featureIds=[],this.propertyTextureIds=[],this.propertyAttributeIds=[],this.outlineCoordinates=void 0}function ZAe(){this.attributes=[],this.featureIds=[],this.transformInWorldSpace=!1}function RAe(){this.index=void 0,this.joints=[],this.inverseBindMatrices=[]}function GAe(){this.name=void 0,this.index=void 0,this.children=[],this.primitives=[],this.instances=void 0,this.skin=void 0,this.matrix=void 0,this.translation=void 0,this.rotation=void 0,this.scale=void 0,this.morphWeights=[],this.articulationName=void 0}function EAe(){this.nodes=[]}var XAe={TRANSLATION:\"translation\",ROTATION:\"rotation\",SCALE:\"scale\",WEIGHTS:\"weights\"};function IAe(){this.input=[],this.interpolation=void 0,this.output=[]}function WAe(){this.node=void 0,this.path=void 0}function PAe(){this.sampler=void 0,this.target=void 0}function vAe(){this.name=void 0,this.samplers=[],this.channels=[]}function wAe(){this.name=void 0,this.type=void 0,this.minimumValue=void 0,this.maximumValue=void 0,this.initialValue=void 0}function FAe(){this.name=void 0,this.stages=[]}function Woe(){this.credits=[]}function AAe(){this.asset=new Woe,this.scene=void 0,this.nodes=[],this.skins=[],this.animations=[],this.articulations=[],this.structuralMetadata=void 0,this.upAxis=void 0,this.forwardAxis=void 0,this.transform=M.clone(M.IDENTITY)}function MAe(){this.texture=void 0,this.index=void 0,this.texCoord=0,this.transform=$.clone($.IDENTITY),this.channels=void 0}function ey(){this.baseColorTexture=void 0,this.metallicRoughnessTexture=void 0,this.baseColorFactor=se.clone(ey.DEFAULT_BASE_COLOR_FACTOR),this.metallicFactor=ey.DEFAULT_METALLIC_FACTOR,this.roughnessFactor=ey.DEFAULT_ROUGHNESS_FACTOR}ey.DEFAULT_BASE_COLOR_FACTOR=se.ONE;ey.DEFAULT_METALLIC_FACTOR=1;ey.DEFAULT_ROUGHNESS_FACTOR=1;function qx(){this.diffuseTexture=void 0,this.specularGlossinessTexture=void 0,this.diffuseFactor=se.clone(qx.DEFAULT_DIFFUSE_FACTOR),this.specularFactor=h.clone(qx.DEFAULT_SPECULAR_FACTOR),this.glossinessFactor=qx.DEFAULT_GLOSSINESS_FACTOR}qx.DEFAULT_DIFFUSE_FACTOR=se.ONE;qx.DEFAULT_SPECULAR_FACTOR=h.ONE;qx.DEFAULT_GLOSSINESS_FACTOR=1;function bz(){this.metallicRoughness=new ey,this.specularGlossiness=void 0,this.emissiveTexture=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveFactor=h.clone(bz.DEFAULT_EMISSIVE_FACTOR),this.alphaMode=af.OPAQUE,this.alphaCutoff=.5,this.doubleSided=!1,this.unlit=!1}bz.DEFAULT_EMISSIVE_FACTOR=h.ZERO;Ho.Quantization=gAe;Ho.Attribute=xAe;Ho.Indices=_Ae;Ho.FeatureIdAttribute=TAe;Ho.FeatureIdTexture=CAe;Ho.FeatureIdImplicitRange=SAe;Ho.MorphTarget=VAe;Ho.Primitive=LAe;Ho.Instances=ZAe;Ho.Skin=RAe;Ho.Node=GAe;Ho.Scene=EAe;Ho.AnimatedPropertyType=Object.freeze(XAe);Ho.AnimationSampler=IAe;Ho.AnimationTarget=WAe;Ho.AnimationChannel=PAe;Ho.Animation=vAe;Ho.ArticulationStage=wAe;Ho.Articulation=FAe;Ho.Asset=Woe;Ho.Components=AAe;Ho.TextureReader=MAe;Ho.MetallicRoughness=ey;Ho.SpecularGlossiness=qx;Ho.Material=bz;var Nt=Ho;var Q5={};Q5.getImageIdFromTexture=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.textureId,i=e.supportedImageFormats,o=t.textures[n],r=o.extensions;if(l(r)){if(i.webp&&l(r.EXT_texture_webp))return r.EXT_texture_webp.source;if(i.basis&&l(r.KHR_texture_basisu))return r.KHR_texture_basisu.source}return o.source};Q5.createSampler=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.textureInfo,i=g(e.compressedTextureNoMipmap,!1),o=En.REPEAT,r=En.REPEAT,s=dn.LINEAR,a=yi.LINEAR,c=n.index,u=t.textures[c].sampler;if(l(u)){let m=t.samplers[u];o=g(m.wrapS,o),r=g(m.wrapT,r),s=g(m.minFilter,s),a=g(m.magFilter,a)}return i&&s!==dn.LINEAR&&s!==dn.NEAREST&&(s===dn.NEAREST_MIPMAP_NEAREST||s===dn.NEAREST_MIPMAP_LINEAR?s=dn.NEAREST:s=dn.LINEAR),new mn({wrapS:o,wrapT:r,minificationFilter:s,magnificationFilter:a})};var NAe=new D(1,1);Q5.createModelTextureReader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.textureInfo,n=e.channels,i=e.texture,o=g(t.texCoord,0),r,s=g(t.extensions,g.EMPTY_OBJECT).KHR_texture_transform;if(l(s)){o=g(s.texCoord,o);let c=l(s.offset)?D.unpack(s.offset):D.ZERO,d=g(s.rotation,0),u=l(s.scale)?D.unpack(s.scale):NAe;d=-d,r=new $(Math.cos(d)*u.x,-Math.sin(d)*u.y,c.x,Math.sin(d)*u.x,Math.cos(d)*u.y,c.y,0,0,1)}let a=new Nt.TextureReader;return a.index=t.index,a.texture=i,a.texCoord=o,a.transform=r,a.channels=n,a};var Il=Q5;var Ldn=T(S(),1);function kAe(e){let t=document.createElement(\"canvas\");return t.width=P.nextPowerOfTwo(e.width),t.height=P.nextPowerOfTwo(e.height),t.getContext(\"2d\").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}var ty=kAe;function ny(e){e=g(e,g.EMPTY_OBJECT);let t=e.resourceCache,n=e.gltf,i=e.textureInfo,o=e.gltfResource,r=e.baseResource,s=e.supportedImageFormats,a=e.cacheKey,c=g(e.asynchronous,!0),d=i.index,u=Il.getImageIdFromTexture({gltf:n,textureId:d,supportedImageFormats:s});this._resourceCache=t,this._gltf=n,this._textureInfo=i,this._imageId=u,this._gltfResource=o,this._baseResource=r,this._cacheKey=a,this._asynchronous=c,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=Xt.UNLOADED,this._promise=void 0}l(Object.create)&&(ny.prototype=Object.create(io.prototype),ny.prototype.constructor=ny);Object.defineProperties(ny.prototype,{cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});var UAe=new yz;async function DAe(e){let t=e._resourceCache;try{let n=t.getImageLoader({gltf:e._gltf,imageId:e._imageId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._imageLoader=n,await n.load(),e.isDestroyed()?void 0:(e._image=n.image,e._mipLevels=n.mipLevels,e._state=Xt.LOADED,e)}catch(n){if(e.isDestroyed())return;throw e.unload(),e._state=Xt.FAILED,e.getError(\"Failed to load texture\",n)}}ny.prototype.load=async function(){return l(this._promise)?this._promise:(this._state=Xt.LOADING,this._promise=DAe(this),this._promise)};function yz(){this.gltf=void 0,this.textureInfo=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}yz.prototype.set=function(e,t,n,i,o){this.gltf=e,this.textureInfo=t,this.image=n,this.mipLevels=i,this.context=o};yz.prototype.execute=function(){this.texture=Poe(this.gltf,this.textureInfo,this.image,this.mipLevels,this.context)};function Poe(e,t,n,i,o){let r=n.internalFormat,s=!1;at.isCompressedFormat(r)&&!l(i)&&(s=!0);let a=Il.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:s}),c=a.minificationFilter,d=a.wrapS,u=a.wrapT,m=c===dn.NEAREST_MIPMAP_NEAREST||c===dn.NEAREST_MIPMAP_LINEAR||c===dn.LINEAR_MIPMAP_NEAREST||c===dn.LINEAR_MIPMAP_LINEAR,p=!l(r)&&m,b=p||d===En.REPEAT||d===En.MIRRORED_REPEAT||u===En.REPEAT||u===En.MIRRORED_REPEAT,f=!P.isPowerOfTwo(n.width)||!P.isPowerOfTwo(n.height),x=b&&f,_;return l(r)?(!o.webgl2&&at.isCompressedFormat(r)&&f&&b&&console.warn(\"Compressed texture uses REPEAT or MIRRORED_REPEAT texture wrap mode and dimensions are not powers of two. The texture may be rendered incorrectly.\"),_=Ft.create({context:o,source:{arrayBufferView:n.bufferView,mipLevels:i},width:n.width,height:n.height,pixelFormat:n.internalFormat,sampler:a})):(x&&(n=ty(n)),_=Ft.create({context:o,source:n,sampler:a,flipY:!1,skipColorSpaceConversion:!0})),p&&_.generateMipmap(),_}ny.prototype.process=function(e){if(this._state===Xt.READY)return!0;if(this._state!==Xt.LOADED&&this._state!==Xt.PROCESSING||l(this._texture)||!l(this._image))return!1;this._state=Xt.PROCESSING;let t;if(this._asynchronous){let n=UAe;if(n.set(this._gltf,this._textureInfo,this._image,this._mipLevels,e.context),!e.jobScheduler.execute(n,Ea.TEXTURE))return;t=n.texture}else t=Poe(this._gltf,this._textureInfo,this._image,this._mipLevels,e.context);return this.unload(),this._texture=t,this._state=Xt.READY,this._resourceCache.statistics.addTextureLoader(this),!0};ny.prototype.unload=function(){l(this._texture)&&this._texture.destroy(),l(this._imageLoader)&&!this._imageLoader.isDestroyed()&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0};var gC=ny;var Qdn=T(S(),1);function iy(e){e=g(e,g.EMPTY_OBJECT);let t=e.resourceCache,n=e.gltf,i=e.gltfResource,o=e.baseResource,r=e.bufferViewId,s=e.draco,a=e.attributeSemantic,c=e.accessorId,d=e.cacheKey,u=g(e.asynchronous,!0),m=g(e.loadBuffer,!1),p=g(e.loadTypedArray,!1);this._resourceCache=t,this._gltfResource=i,this._baseResource=o,this._gltf=n,this._bufferViewId=r,this._draco=s,this._attributeSemantic=a,this._accessorId=c,this._cacheKey=d,this._asynchronous=u,this._loadBuffer=m,this._loadTypedArray=p,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=Xt.UNLOADED,this._promise=void 0}l(Object.create)&&(iy.prototype=Object.create(io.prototype),iy.prototype.constructor=iy);Object.defineProperties(iy.prototype,{cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}});function BAe(e,t){return l(e)&&l(e.attributes)&&l(e.attributes[t])}iy.prototype.load=async function(){return l(this._promise)?this._promise:BAe(this._draco,this._attributeSemantic)?(this._promise=OAe(this),this._promise):(this._promise=HAe(this),this._promise)};function YAe(e,t,n,i){let r=(1<<e.quantizationBits)-1,s=1/r,a=new Nt.Quantization;if(a.componentDatatype=t,a.octEncoded=e.octEncoded,a.octEncodedZXY=!0,a.type=i,a.octEncoded)a.type=tn.VEC2,a.normalizationRange=r;else{let c=tn.getMathType(i);if(c===Number){let d=e.range;a.quantizedVolumeOffset=e.minValues[0],a.quantizedVolumeDimensions=d,a.normalizationRange=r,a.quantizedVolumeStepSize=d*s}else{a.quantizedVolumeOffset=c.unpack(e.minValues),a.normalizationRange=c.unpack(new Array(n).fill(r));let d=new Array(n).fill(e.range);a.quantizedVolumeDimensions=c.unpack(d);let u=d.map(function(m){return m*s});a.quantizedVolumeStepSize=c.unpack(u)}}return a}async function OAe(e){e._state=Xt.LOADING;let t=e._resourceCache;try{let n=t.getDracoLoader({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=Xt.LOADED,e)}catch{if(e.isDestroyed())return;gz(e)}}function zAe(e){e._state=Xt.PROCESSING;let n=e._dracoLoader.decodedData.vertexAttributes,i=e._attributeSemantic,o=n[i],r=e._accessorId,a=e._gltf.accessors[r].type,c=o.array,d=o.data.quantization;l(d)&&(e._quantization=YAe(d,o.data.componentDatatype,o.data.componentsPerAttribute,a)),e._typedArray=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}async function HAe(e){e._state=Xt.LOADING;let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._typedArray=n.typedArray,e._state=Xt.PROCESSING,e)}catch(n){if(e.isDestroyed())return;gz(e,n)}}function gz(e,t){throw e.unload(),e._state=Xt.FAILED,e.getError(\"Failed to load vertex buffer\",t)}function xz(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}xz.prototype.set=function(e,t){this.typedArray=e,this.context=t};xz.prototype.execute=function(){this.buffer=voe(this.typedArray,this.context)};function voe(e,t){let n=pt.createVertexBuffer({typedArray:e,context:t,usage:Me.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}var KAe=new xz;iy.prototype.process=function(e){if(this._state===Xt.READY)return!0;if(this._state!==Xt.LOADED&&this._state!==Xt.PROCESSING)return!1;if(l(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(i){gz(this,i)}zAe(this)}let t,n=this._typedArray;if(this._loadBuffer&&this._asynchronous){let i=KAe;if(i.set(n,e.context),!e.jobScheduler.execute(i,Ea.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=voe(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=Xt.READY,this._resourceCache.statistics.addGeometryLoader(this),!0};iy.prototype.unload=function(){l(this._buffer)&&this._buffer.destroy();let e=this._resourceCache;l(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),l(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};var xC=iy;var Zun=T(S(),1);var xun=T(S(),1);var nun=T(S(),1);function FX(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=g(e.properties,{}),i={};for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];l(r.semantic)&&(i[r.semantic]=r)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=i,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}FX.fromJson=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=e.class,i={};for(let o in n.properties)if(n.properties.hasOwnProperty(o)){let r=Kb.fromJson({id:o,property:n.properties[o],enums:e.enums});i[o]=r}return new FX({id:t,name:n.name,description:n.description,properties:i,extras:n.extras,extensions:n.extensions})};Object.defineProperties(FX.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});FX.BATCH_TABLE_CLASS_NAME=\"_batchTable\";var wm=FX;var mun=T(S(),1);var sun=T(S(),1);function j5(e){e=g(e,g.EMPTY_OBJECT);let t=e.value,n=e.name;this._value=t,this._name=n,this._description=e.description,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}j5.fromJson=function(e){return new j5({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})};Object.defineProperties(j5.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var AX=j5;function q5(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=e.values,i={},o={},r=n.length;for(let a=0;a<r;++a){let c=n[a];i[c.value]=c.name,o[c.name]=c.value}let s=g(e.valueType,sn.UINT16);this._values=n,this._namesByValue=i,this._valuesByName=o,this._valueType=s,this._id=t,this._name=e.name,this._description=e.description,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}q5.fromJson=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=e.enum,i=n.values.map(function(o){return AX.fromJson(o)});return new q5({id:t,values:i,valueType:sn[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})};Object.defineProperties(q5.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var MX=q5;function $5(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.classes,{}),n=g(e.enums,{});this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}$5.fromJson=function(e){let t={};if(l(e.enums))for(let i in e.enums)e.enums.hasOwnProperty(i)&&(t[i]=MX.fromJson({id:i,enum:e.enums[i]}));let n={};if(l(e.classes))for(let i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=wm.fromJson({id:i,class:e.classes[i],enums:t}));return new $5({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})};Object.defineProperties($5.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var Fm=$5;function $x(e){e=g(e,g.EMPTY_OBJECT);let t=e.schema,n=e.resource,i=e.cacheKey;this._schema=l(t)?Fm.fromJson(t):void 0,this._resource=n,this._cacheKey=i,this._state=Xt.UNLOADED,this._promise=void 0}l(Object.create)&&($x.prototype=Object.create(io.prototype),$x.prototype.constructor=$x);Object.defineProperties($x.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}});$x.prototype.load=async function(){return l(this._promise)?this._promise:l(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=JAe(this),this._promise)};async function JAe(e){let t=e._resource;e._state=Xt.LOADING;try{let n=await t.fetchJson();return e.isDestroyed()?void 0:(e._schema=Fm.fromJson(n),e._state=Xt.READY,e)}catch(n){if(e.isDestroyed())return;e._state=Xt.FAILED;let i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}$x.prototype.unload=function(){this._schema=void 0};var _C=$x;var Pun=T(S(),1);var Am={};function NX(e){return Dh(e.url)}function eN(e){let t=e.byteOffset,n=e.byteLength;if(oi(e,\"EXT_meshopt_compression\")){let i=e.extensions.EXT_meshopt_compression;t=g(i.byteOffset,0),n=i.byteLength}return`${t}-${t+n}`}function QAe(e,t){let n=t.byteOffset+e.byteOffset,i=e.componentType,o=e.type,r=e.count;return`${n}-${i}-${o}-${r}`}function woe(e){return NX(e)}function Foe(e,t){return`${NX(e)}-buffer-id-${t}`}function kX(e,t,n,i){if(l(e.uri)){let o=i.getDerivedResource({url:e.uri});return woe(o)}return Foe(n,t)}function _z(e,t,n,i){let o=t.bufferView,r=e.bufferViews[o],s=r.buffer,a=e.buffers[s],c=kX(a,s,n,i),d=eN(r);return`${c}-range-${d}`}function Aoe(e,t,n,i){let o=e.images[t],r=o.bufferView,s=o.uri;if(l(s)){let p=i.getDerivedResource({url:s});return NX(p)}let a=e.bufferViews[r],c=a.buffer,d=e.buffers[c],u=kX(d,c,n,i),m=eN(a);return`${u}-range-${m}`}function jAe(e,t){let n=Il.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}Am.getSchemaCacheKey=function(e){let t=e.schema,n=e.resource;return l(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${NX(n)}`};Am.getExternalBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.resource;return`external-buffer:${woe(t)}`};Am.getEmbeddedBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.parentResource,n=e.bufferId;return`embedded-buffer:${Foe(t,n)}`};Am.getGltfCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltfResource;return`gltf:${NX(t)}`};Am.getBufferViewCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.bufferViewId,i=e.gltfResource,o=e.baseResource,r=t.bufferViews[n],s=r.buffer,a=t.buffers[s];oi(r,\"EXT_meshopt_compression\")&&(s=r.extensions.EXT_meshopt_compression.buffer);let c=kX(a,s,i,o),d=eN(r);return`buffer-view:${c}-range-${d}`};Am.getDracoCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.draco,i=e.gltfResource,o=e.baseResource;return`draco:${_z(t,n,i,o)}`};Am.getVertexBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.gltfResource,i=e.baseResource,o=e.frameState,r=e.bufferViewId,s=e.draco,a=e.attributeSemantic,c=g(e.dequantize,!1),d=g(e.loadBuffer,!1),u=g(e.loadTypedArray,!1),m=\"\";if(c&&(m+=\"-dequantize\"),d&&(m+=\"-buffer\",m+=`-context-${o.context.id}`),u&&(m+=\"-typed-array\"),l(s))return`vertex-buffer:${_z(t,s,n,i)}-draco-${a}${m}`;let p=t.bufferViews[r],b=p.buffer,f=t.buffers[b],x=kX(f,b,n,i),_=eN(p);return`vertex-buffer:${x}-range-${_}${m}`};Am.getIndexBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.accessorId,i=e.gltfResource,o=e.baseResource,r=e.frameState,s=e.draco,a=g(e.loadBuffer,!1),c=g(e.loadTypedArray,!1),d=\"\";if(a&&(d+=\"-buffer\",d+=`-context-${r.context.id}`),c&&(d+=\"-typed-array\"),l(s))return`index-buffer:${_z(t,s,i,o)}-draco${d}`;let u=t.accessors[n],m=u.bufferView,p=t.bufferViews[m],b=p.buffer,f=t.buffers[b],x=kX(f,b,i,o),_=QAe(u,p);return`index-buffer:${x}-accessor-${_}${d}`};Am.getImageCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.imageId,i=e.gltfResource,o=e.baseResource;return`image:${Aoe(t,n,i,o)}`};Am.getTextureCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.textureInfo,i=e.gltfResource,o=e.baseResource,r=e.supportedImageFormats,s=e.frameState,a=n.index,c=Il.getImageIdFromTexture({gltf:t,textureId:a,supportedImageFormats:r}),d=Aoe(t,c,i,o),u=jAe(t,n);return`texture:${d}-sampler-${u}-context-${s.context.id}`};var Wl=Am;var Fun=T(S(),1);function UX(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}UX.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}};UX.prototype.addGeometryLoader=function(e){let t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;let n=e.buffer,i=e.typedArray,o=0;l(n)&&(o+=n.sizeInBytes),l(i)&&(o+=i.byteLength),this.geometryByteLength+=o,this._geometrySizes[t]=o};UX.prototype.addTextureLoader=function(e){let t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;let n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n};UX.prototype.removeLoader=function(e){let t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],l(n)&&(this.geometryByteLength-=n);let"
}