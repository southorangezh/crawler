{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 129,
    "total_chunks": 194,
    "chunk_size": 40979,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.728Z"
  },
  "content": "0,this._shadersByTexturesFlags=[],this.material=void 0}function Cit(e){let t=\"vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }\",n=\"vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }\",i=\"vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }\",o;switch(e){case ie.SCENE3D:o=t;break;case ie.SCENE2D:case ie.COLUMBUS_VIEW:o=n;break;case ie.MORPHING:o=i;break}return o}function Vit(e){return e?\"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }\":\"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }\"}d4.prototype.getShaderProgram=function(e){let t=e.frameState,n=e.surfaceTile,i=e.numberOfDayTextures,o=e.applyBrightness,r=e.applyContrast,s=e.applyHue,a=e.applySaturation,c=e.applyGamma,d=e.applyAlpha,u=e.applyDayNightAlpha,m=e.applySplit,p=e.showReflectiveOcean,b=e.showOceanWaves,f=e.enableLighting,x=e.dynamicAtmosphereLighting,_=e.dynamicAtmosphereLightingFromSun,C=e.showGroundAtmosphere,V=e.perFragmentGroundAtmosphere,L=e.hasVertexNormals,R=e.useWebMercatorProjection,G=e.enableFog,X=e.enableClippingPlanes,v=e.clippingPlanes,W=e.clippedByBoundaries,F=e.hasImageryLayerCutout,A=e.colorCorrect,y=e.highlightFillTile,Z=e.colorToAlpha,E=e.hasGeodeticSurfaceNormals,I=e.hasExaggeration,w=e.showUndergroundColor,k=e.translucent,B=e.applyTileUVCorrection,U=0,Y=\"\",J=n.renderedMesh.encoding;J.quantization===Os.BITS12&&(U=1,Y=\"QUANTIZATION_BITS12\");let ee=0,H=\"\";W&&(ee=1,H=\"TILE_LIMIT_RECTANGLE\");let j=0,q=\"\";F&&(j=1,q=\"APPLY_IMAGERY_CUTOUT\");let pe=t.mode,_e=pe|o<<2|r<<3|s<<4|a<<5|c<<6|d<<7|p<<8|b<<9|f<<10|x<<11|_<<12|C<<13|V<<14|L<<15|R<<16|G<<17|U<<18|m<<19|X<<20|ee<<21|j<<22|A<<23|y<<24|Z<<25|E<<26|I<<27|w<<28|k<<29|u<<30,ae=0;l(v)&&v.length>0&&(ae=X?v.clippingPlanesState:0);let ye=n.surfaceShader;if(l(ye)&&ye.numberOfDayTextures===i&&ye.flags===_e&&ye.material===this.material&&ye.clippingShaderState===ae)return ye.shaderProgram;let Te=this._shadersByTexturesFlags[i];if(l(Te)||(Te=this._shadersByTexturesFlags[i]=[]),ye=Te[_e],!l(ye)||ye.material!==this.material||ye.clippingShaderState!==ae){let Le=this.baseVertexShaderSource.clone(),Re=this.baseFragmentShaderSource.clone();ae!==0&&Re.sources.unshift(K0(v,t.context)),Le.defines.push(Y),Re.defines.push(`TEXTURE_UNITS ${i}`,H,q),o&&Re.defines.push(\"APPLY_BRIGHTNESS\"),r&&Re.defines.push(\"APPLY_CONTRAST\"),s&&Re.defines.push(\"APPLY_HUE\"),a&&Re.defines.push(\"APPLY_SATURATION\"),c&&Re.defines.push(\"APPLY_GAMMA\"),d&&Re.defines.push(\"APPLY_ALPHA\"),u&&Re.defines.push(\"APPLY_DAY_NIGHT_ALPHA\"),p&&(Re.defines.push(\"SHOW_REFLECTIVE_OCEAN\"),Le.defines.push(\"SHOW_REFLECTIVE_OCEAN\")),b&&Re.defines.push(\"SHOW_OCEAN_WAVES\"),Z&&Re.defines.push(\"APPLY_COLOR_TO_ALPHA\"),w&&(Le.defines.push(\"UNDERGROUND_COLOR\"),Re.defines.push(\"UNDERGROUND_COLOR\")),k&&(Le.defines.push(\"TRANSLUCENT\"),Re.defines.push(\"TRANSLUCENT\")),f&&(L?(Le.defines.push(\"ENABLE_VERTEX_LIGHTING\"),Re.defines.push(\"ENABLE_VERTEX_LIGHTING\")):(Le.defines.push(\"ENABLE_DAYNIGHT_SHADING\"),Re.defines.push(\"ENABLE_DAYNIGHT_SHADING\"))),x&&(Le.defines.push(\"DYNAMIC_ATMOSPHERE_LIGHTING\"),Re.defines.push(\"DYNAMIC_ATMOSPHERE_LIGHTING\"),_&&(Le.defines.push(\"DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN\"),Re.defines.push(\"DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN\"))),C&&(Le.defines.push(\"GROUND_ATMOSPHERE\"),Re.defines.push(\"GROUND_ATMOSPHERE\"),V&&(Le.defines.push(\"PER_FRAGMENT_GROUND_ATMOSPHERE\"),Re.defines.push(\"PER_FRAGMENT_GROUND_ATMOSPHERE\"))),Le.defines.push(\"INCLUDE_WEB_MERCATOR_Y\"),Re.defines.push(\"INCLUDE_WEB_MERCATOR_Y\"),G&&(Le.defines.push(\"FOG\"),Re.defines.push(\"FOG\")),m&&Re.defines.push(\"APPLY_SPLIT\"),X&&Re.defines.push(\"ENABLE_CLIPPING_PLANES\"),A&&Re.defines.push(\"COLOR_CORRECT\"),y&&Re.defines.push(\"HIGHLIGHT_FILL_TILE\"),E&&Le.defines.push(\"GEODETIC_SURFACE_NORMALS\"),I&&Le.defines.push(\"EXAGGERATION\"),B&&Re.defines.push(\"APPLY_TILE_UV_CORRECTION\");let ke=` vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend) { vec4 color = initialColor; mat3 correction = mat3(1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0); `;F&&(ke+=` vec4 cutoutAndColorResult; bool texelUnclipped; `);for(let yt=0;yt<i;++yt){let Dt=B?`correction = u_dayTileUVCorrections[${yt}]; `:\"\";F?ke+=` cutoutAndColorResult = u_dayTextureCutoutRectangles[${yt}]; texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y; ${Dt} cutoutAndColorResult = sampleAndBlend( `:ke+=Dt+` color = sampleAndBlend( `,ke+=` color, u_dayTextures[${yt}], u_dayTextureUseWebMercatorT[${yt}] ? textureCoordinates.xz : textureCoordinates.xy, u_dayTextureTexCoordsRectangle[${yt}], u_dayTextureTranslationAndScale[${yt}], ${d?`u_dayTextureAlpha[${yt}]`:\"1.0\"}, ${u?`u_dayTextureNightAlpha[${yt}]`:\"1.0\"}, ${u?`u_dayTextureDayAlpha[${yt}]`:\"1.0\"}, ${o?`u_dayTextureBrightness[${yt}]`:\"0.0\"}, ${r?`u_dayTextureContrast[${yt}]`:\"0.0\"}, ${s?`u_dayTextureHue[${yt}]`:\"0.0\"}, ${a?`u_dayTextureSaturation[${yt}]`:\"0.0\"}, ${c?`u_dayTextureOneOverGamma[${yt}]`:\"0.0\"}, ${m?`u_dayTextureSplit[${yt}]`:\"0.0\"}, ${Z?`u_colorsToAlpha[${yt}]`:\"vec4(0.0)\"}, nightBlend, correction ); `,F&&(ke+=` color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color); `)}ke+=` return color; }`,Re.sources.push(ke),Le.sources.push(Cit(pe)),Le.sources.push(Vit(R));let rt=Ht.fromCache({context:t.context,vertexShaderSource:Le,fragmentShaderSource:Re,attributeLocations:J.getAttributeLocations()});ye=Te[_e]=new Sit(i,_e,this.material,rt,ae)}return n.surfaceShader=ye,ye.shaderProgram};d4.prototype.destroy=function(){let e,t,n=this._shadersByTexturesFlags;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i];if(!l(o))continue;for(e in o)o.hasOwnProperty(e)&&(t=o[e],l(t)&&t.shaderProgram.destroy())}return me(this)};var Nv=d4;var f1i=T(S(),1);var vbi=T(S(),1),Lit={NONE:-1,PARTIAL:0,FULL:1},lr=Object.freeze(Lit);var _yi=T(S(),1);var Nbi=T(S(),1);function $U(e,t,n,i,o,r,s){this.provider=e,this.message=t,this.x=n,this.y=i,this.level=o,this.timesRetried=g(r,0),this.retry=!1,this.error=s}$U.reportError=function(e,t,n,i,o,r,s,a){let c=e;return l(e)?(c.provider=t,c.message=i,c.x=o,c.y=r,c.level=s,c.retry=!1,c.error=a,++c.timesRetried):c=new $U(t,i,o,r,s,0,a),l(n)&&n.numberOfListeners>0?n.raiseEvent(c):l(t)&&console.log(`An error occurred in \"${t.constructor.name}\": ${Mf(i)}`),c};$U.reportSuccess=function(e){l(e)&&(e.timesRetried=-1)};var So=$U;var Ubi=T(S(),1),Zit={UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7},$n=Object.freeze(Zit);var Bbi=T(S(),1),Rit={START:0,LOADING:1,DONE:2,FAILED:3},zs=Object.freeze(Rit);var Obi=T(S(),1),Git={FAILED:0,UNLOADED:1,RECEIVING:2,RECEIVED:3,TRANSFORMING:4,TRANSFORMED:5,READY:6},co=Object.freeze(Git);function jo(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new se(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new h,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=co.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new ce,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(jo.prototype,{eligibleForUnloading:{get:function(){let e=this.terrainState,n=!(e===co.RECEIVING||e===co.TRANSFORMING),i=this.imagery;for(let o=0,r=i.length;n&&o<r;++o){let s=i[o];n=!l(s.loadingImagery)||s.loadingImagery.state!==$n.TRANSITIONING}return n}},renderedMesh:{get:function(){if(l(this.vertexArray))return this.mesh;if(l(this.fill))return this.fill.mesh}}});var Eit=new he;function u4(e,t,n,i,o,r){let s=e.getExaggeratedPosition(i,o,r);if(l(t)&&t!==ie.SCENE3D){let c=n.ellipsoid.cartesianToCartographic(s,Eit);s=n.project(c,r),s=h.fromElements(s.z,s.x,s.y,r)}return s}var Xit=new h,Iit=new h,Wit=new h;jo.prototype.pick=function(e,t,n,i,o){let r=this.renderedMesh;if(!l(r))return;let s=r.vertices,a=r.indices,c=r.encoding,d=a.length,u=Number.MAX_VALUE;for(let m=0;m<d;m+=3){let p=a[m],b=a[m+1],f=a[m+2],x=u4(c,t,n,s,p,Xit),_=u4(c,t,n,s,b,Iit),C=u4(c,t,n,s,f,Wit),V=jn.rayTriangleParametric(e,x,_,C,i);l(V)&&V<u&&V>=0&&(u=V)}return u!==Number.MAX_VALUE?bn.getPoint(e,u,o):void 0};jo.prototype.freeResources=function(){l(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,this.waterMaskTexture.referenceCount===0&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=co.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();let e=this.imagery;for(let t=0,n=e.length;t<n;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()};jo.prototype.freeVertexArray=function(){jo._freeVertexArray(this.vertexArray),this.vertexArray=void 0,jo._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0};jo.initialize=function(e,t,n){let i=e.data;l(i)||(i=e.data=new jo),e.state===zs.START&&(Pit(e,t,n),e.state=zs.LOADING)};jo.processStateMachine=function(e,t,n,i,o,r,s){jo.initialize(e,n,i);let a=e.data;if(e.state===zs.LOADING&&vit(e,t,n,i,o,r),s)return;let c=e.renderable;e.renderable=l(a.vertexArray);let d=a.terrainState===co.READY;e.upsampledFromParent=l(a.terrainData)&&a.terrainData.wasCreatedByUpsampling();let u=a.processImagery(e,n,t);if(d&&u){let m=e._loadedCallbacks,p={};for(let b in m)m.hasOwnProperty(b)&&(m[b](e)||(p[b]=m[b]));e._loadedCallbacks=p,e.state=zs.DONE}c&&(e.renderable=!0)};jo.prototype.processImagery=function(e,t,n,i){let o=e.data,r=e.upsampledFromParent,s=!1,a=!0,c=o.imagery,d,u;for(d=0,u=c.length;d<u;++d){let m=c[d];if(!l(m.loadingImagery)){r=!1;continue}if(m.loadingImagery.state===$n.PLACEHOLDER){let b=m.loadingImagery.imageryLayer;if(b.ready){m.freeResources(),c.splice(d,1),b._createTileImagerySkeletons(e,t,d),--d,u=c.length;continue}else r=!1}let p=m.processStateMachine(e,n,i);a=a&&p,s=s||p||l(m.readyImagery),r=r&&l(m.loadingImagery)&&(m.loadingImagery.state===$n.FAILED||m.loadingImagery.state===$n.INVALID)}return e.upsampledFromParent=r,e.renderable=e.renderable&&(s||a),a};function bbe(e,t,n,i){let o=e.renderedMesh,r=o.vertices,s=o.encoding,a=r.length/s.stride,c=gc.clone(s);c.hasGeodeticSurfaceNormals=t,c=gc.clone(c);let d=c.stride,u=new Float32Array(a*d);t?s.addGeodeticSurfaceNormals(r,u,n):s.removeGeodeticSurfaceNormals(r,u),o.vertices=u,o.stride=d,o!==e.mesh?(jo._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=jo._createVertexArrayForMesh(i.context,o)):(jo._freeVertexArray(e.vertexArray),e.vertexArray=jo._createVertexArrayForMesh(i.context,o)),jo._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}jo.prototype.addGeodeticSurfaceNormals=function(e,t){bbe(this,!0,e,t)};jo.prototype.removeGeodeticSurfaceNormals=function(e){bbe(this,!1,void 0,e)};jo.prototype.updateExaggeration=function(e,t,n){let i=this,o=i.renderedMesh;if(o===void 0)return;let r=t.verticalExaggeration,s=t.verticalExaggerationRelativeHeight,a=r!==1,c=o.encoding,d=c.exaggeration!==r,u=c.exaggerationRelativeHeight!==s;if(d||u){if(d)if(a&&!c.hasGeodeticSurfaceNormals){let m=e.tilingScheme.ellipsoid;i.addGeodeticSurfaceNormals(m,t)}else!a&&c.hasGeodeticSurfaceNormals&&i.removeGeodeticSurfaceNormals(t);if(c.exaggeration=r,c.exaggerationRelativeHeight=s,n!==void 0){n._tileToUpdateHeights.push(e);let m=e.customData,p=m.length;for(let b=0;b<p;b++){let f=m[b];f.level=-1}}}};function Pit(e,t,n){let i=t.getTileDataAvailable(e.x,e.y,e.level);if(!l(i)&&l(e.parent)){let o=e.parent,r=o.data;l(r)&&l(r.terrainData)&&(i=r.terrainData.isChildAvailable(o.x,o.y,e.x,e.y))}i===!1&&(e.data.terrainState=co.FAILED);for(let o=0,r=n.length;o<r;++o){let s=n.get(o);s.show&&s._createTileImagerySkeletons(e,t)}}function vit(e,t,n,i,o,r){let s=e.data,a=e.parent;if(s.terrainState===co.FAILED&&a!==void 0&&(a.data!==void 0&&a.data.terrainData!==void 0&&a.data.terrainData.canUpsample!==!1||jo.processStateMachine(a,t,n,i,o,r,!0)),s.terrainState===co.FAILED&&wit(s,e,t,n,e.x,e.y,e.level),s.terrainState===co.UNLOADED&&Fit(s,n,e.x,e.y,e.level),s.terrainState===co.RECEIVED&&Mit(s,t,n,e.x,e.y,e.level),s.terrainState===co.TRANSFORMED&&(Nit(s,t.context,n,e.x,e.y,e.level,r),s.updateExaggeration(e,t,o)),s.terrainState>=co.RECEIVED&&s.waterMaskTexture===void 0&&n.hasWaterMask)if(s.terrainData.waterMask!==void 0)Uit(t.context,s);else{let d=s._findAncestorTileWithTerrainData(e);l(d)&&l(d.data.waterMaskTexture)&&(s.waterMaskTexture=d.data.waterMaskTexture,++s.waterMaskTexture.referenceCount,s._computeWaterMaskTranslationAndScale(e,d,s.waterMaskTranslationAndScale))}}function wit(e,t,n,i,o,r,s){let a=t.parent;if(!a){t.state=zs.FAILED;return}let c=a.data.terrainData,d=a.x,u=a.y,m=a.level;if(!l(c))return;let p=c.upsample(i.tilingScheme,d,u,m,o,r,s);l(p)&&(e.terrainState=co.RECEIVING,Promise.resolve(p).then(function(b){l(b)&&(e.terrainData=b,e.terrainState=co.RECEIVED)}).catch(function(){e.terrainState=co.FAILED}))}function Fit(e,t,n,i,o){function r(c){if(!l(c)){e.terrainState=co.UNLOADED,e.request=void 0;return}e.terrainData=c,e.terrainState=co.RECEIVED,e.request=void 0}function s(c){if(e.request.state===Qn.CANCELLED){e.terrainData=void 0,e.terrainState=co.UNLOADED,e.request=void 0;return}e.terrainState=co.FAILED,e.request=void 0;let d=`Failed to obtain terrain tile X: ${n} Y: ${i} Level: ${o}. Error message: \"${c}\"`;t._requestError=So.reportError(t._requestError,t,t.errorEvent,d,n,i,o),t._requestError.retry&&a()}function a(){let c=new Do({throttle:!1,throttleByServer:!0,type:is.TERRAIN});e.request=c;let d=t.requestTileGeometry(n,i,o,c);l(d)?(e.terrainState=co.RECEIVING,Promise.resolve(d).then(function(u){r(u)}).catch(function(u){s(u)})):(e.terrainState=co.UNLOADED,e.request=void 0)}a()}var Ait={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};function Mit(e,t,n,i,o,r){let s=n.tilingScheme,a=Ait;a.tilingScheme=s,a.x=i,a.y=o,a.level=r,a.exaggeration=t.verticalExaggeration,a.exaggerationRelativeHeight=t.verticalExaggerationRelativeHeight,a.throttle=!0;let d=e.terrainData.createMesh(a);l(d)&&(e.terrainState=co.TRANSFORMING,Promise.resolve(d).then(function(u){e.mesh=u,e.terrainState=co.TRANSFORMED}).catch(function(){e.terrainState=co.FAILED}))}jo._createVertexArrayForMesh=function(e,t){let n=t.vertices,i=pt.createVertexBuffer({context:e,typedArray:n,usage:Me.STATIC_DRAW}),o=t.encoding.getAttributes(i),r=t.indices.indexBuffers||{},s=r[e.id];if(!l(s)||s.isDestroyed()){let a=t.indices;s=pt.createIndexBuffer({context:e,typedArray:a,usage:Me.STATIC_DRAW,indexDatatype:Ae.fromSizeInBytes(a.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,r[e.id]=s,t.indices.indexBuffers=r}else++s.referenceCount;return new ti({context:e,attributes:o,indexBuffer:s})};jo._freeVertexArray=function(e){if(l(e)){let t=e.indexBuffer;e.isDestroyed()||e.destroy(),l(t)&&!t.isDestroyed()&&l(t.referenceCount)&&(--t.referenceCount,t.referenceCount===0&&t.destroy())}};function Nit(e,t,n,i,o,r,s){e.vertexArray=jo._createVertexArrayForMesh(t,e.mesh),e.terrainState=co.READY,e.fill=e.fill&&e.fill.destroy(s)}function kit(e){let t=e.cache.tile_waterMaskData;if(!l(t)){let n=Ft.create({context:e,pixelFormat:at.LUMINANCE,pixelDatatype:Qe.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});n.referenceCount=1;let i=new mn({wrapS:En.CLAMP_TO_EDGE,wrapT:En.CLAMP_TO_EDGE,minificationFilter:dn.LINEAR,magnificationFilter:yi.LINEAR});t={allWaterTexture:n,sampler:i,destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}function Uit(e,t){let n=t.terrainData.waterMask,i=kit(e),o,r=n.length;if(r===1)if(n[0]!==0)o=i.allWaterTexture;else return;else{let s=Math.sqrt(r);o=Ft.create({context:e,pixelFormat:at.LUMINANCE,pixelDatatype:Qe.UNSIGNED_BYTE,source:{width:s,height:s,arrayBufferView:n},sampler:i.sampler,flipY:!1}),o.referenceCount=0}++o.referenceCount,t.waterMaskTexture=o,se.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}jo.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;for(;l(t)&&(!l(t.data)||!l(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling());)t=t.parent;return t};jo.prototype._computeWaterMaskTranslationAndScale=function(e,t,n){let i=t.rectangle,o=e.rectangle,r=o.width,s=o.height,a=r/i.width,c=s/i.height;return n.x=a*(o.west-i.west)/r,n.y=c*(o.south-i.south)/s,n.z=a,n.w=c,n};var ju=jo;var USi=T(S(),1);var eTi=T(S(),1);var H_i=T(S(),1);var ggi=T(S(),1);var Gyi=T(S(),1);function mg(e){if(e=g(e,g.EMPTY_OBJECT),this._ellipsoid=g(e.ellipsoid,oe.WGS84),this._numberOfLevelZeroTilesX=g(e.numberOfLevelZeroTilesX,1),this._numberOfLevelZeroTilesY=g(e.numberOfLevelZeroTilesY,1),this._projection=new Li(this._ellipsoid),l(e.rectangleSouthwestInMeters)&&l(e.rectangleNortheastInMeters))this._rectangleSouthwestInMeters=e.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=e.rectangleNortheastInMeters;else{let i=this._ellipsoid.maximumRadius*Math.PI;this._rectangleSouthwestInMeters=new D(-i,-i),this._rectangleNortheastInMeters=new D(i,i)}let t=this._projection.unproject(this._rectangleSouthwestInMeters),n=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new le(t.longitude,t.latitude,n.longitude,n.latitude)}Object.defineProperties(mg.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}});mg.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e};mg.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e};mg.prototype.rectangleToNativeRectangle=function(e,t){let n=this._projection,i=n.project(le.southwest(e)),o=n.project(le.northeast(e));return l(t)?(t.west=i.x,t.south=i.y,t.east=o.x,t.north=o.y,t):new le(i.x,i.y,o.x,o.y)};mg.prototype.tileXYToNativeRectangle=function(e,t,n,i){let o=this.getNumberOfXTilesAtLevel(n),r=this.getNumberOfYTilesAtLevel(n),s=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,a=this._rectangleSouthwestInMeters.x+e*s,c=this._rectangleSouthwestInMeters.x+(e+1)*s,d=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/r,u=this._rectangleNortheastInMeters.y-t*d,m=this._rectangleNortheastInMeters.y-(t+1)*d;return l(i)?(i.west=a,i.south=m,i.east=c,i.north=u,i):new le(a,m,c,u)};mg.prototype.tileXYToRectangle=function(e,t,n,i){let o=this.tileXYToNativeRectangle(e,t,n,i),r=this._projection,s=r.unproject(new D(o.west,o.south)),a=r.unproject(new D(o.east,o.north));return o.west=s.longitude,o.south=s.latitude,o.east=a.longitude,o.north=a.latitude,o};mg.prototype.positionToTileXY=function(e,t,n){let i=this._rectangle;if(!le.contains(i,e))return;let o=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),a=(this._rectangleNortheastInMeters.x-this._rectangleSouthwestInMeters.x)/o,d=(this._rectangleNortheastInMeters.y-this._rectangleSouthwestInMeters.y)/r,m=this._projection.project(e),p=m.x-this._rectangleSouthwestInMeters.x,b=this._rectangleNortheastInMeters.y-m.y,f=p/a|0;f>=o&&(f=o-1);let x=b/d|0;return x>=r&&(x=r-1),l(n)?(n.x=f,n.y=x,n):new D(f,x)};var _r=mg;var Pyi=T(S(),1);var m4,ybe=\"AAPK3b7fccd1509046758d03c6641e404040gQG5edfR9eun2VcwtbXJKNbQjIZ7ma2vUd9ulqZK4lo3R_DJIAhwoGW9p86JNauB\",SV={};SV.defaultAccessToken=ybe;SV.defaultWorldImageryServer=new Xe({url:\"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer\"});SV.defaultWorldHillshadeServer=new Xe({url:\"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer\"});SV.defaultWorldOceanServer=new Xe({url:\"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer\"});SV.getDefaultTokenCredit=function(e){if(e===ybe){if(!l(m4)){let t='<b> This application is using a default ArcGIS access token. Please assign <i>Cesium.ArcGisMapService.defaultAccessToken</i> with an API key from your ArcGIS Developer account before using the ArcGIS tile services. You can sign up for a free ArcGIS Developer account at <a href=\"https://developers.arcgis.com/\">https://developers.arcgis.com/</a>.</b>';m4=new Zt(t,!0)}return m4}};var Nd=SV;var Nyi=T(S(),1);function h4(e){e=g(e,g.EMPTY_OBJECT),this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;let t=Xe.createIfNeeded(e.missingImageUrl),n=this;function i(r){l(r.blob)&&(n._missingImageByteLength=r.blob.size);let s=ym(r);if(e.disableCheckIfAllPixelsAreTransparent){let a=!0,c=r.width,d=e.pixelsToCheck;for(let u=0,m=d.length;a&&u<m;++u){let p=d[u],b=p.x*4+p.y*c;s[b+3]>0&&(a=!1)}a&&(s=void 0)}n._missingImagePixels=s,n._isReady=!0}function o(){n._missingImagePixels=void 0,n._isReady=!0}t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then(i).catch(o)}h4.prototype.isReady=function(){return this._isReady};h4.prototype.shouldDiscardImage=function(e){let t=this._pixelsToCheck,n=this._missingImagePixels;if(!l(n)||l(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;let i=ym(e),o=e.width;for(let r=0,s=t.length;r<s;++r){let a=t[r],c=a.x*4+a.y*o;for(let d=0;d<4;++d){let u=c+d;if(i[u]!==n[u])return!1}}return!0};var kv=h4;var Dyi=T(S(),1);function f4(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}f4.prototype.configureNameFromProperties=function(e){let t=10,n;for(let i in e)if(e.hasOwnProperty(i)&&e[i]){let o=i.toLowerCase();t>1&&o===\"name\"?(t=1,n=i):t>2&&o===\"title\"?(t=2,n=i):t>3&&/name/i.test(i)?(t=3,n=i):t>4&&/title/i.test(i)&&(t=4,n=i)}l(n)&&(this.name=e[n])};f4.prototype.configureDescriptionFromProperties=function(e){function t(n){let i='<table class=\"cesium-infoBox-defaultTable\">';for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];l(r)&&(typeof r==\"object\"?i+=`<tr><td>${o}</td><td>${t(r)}</td></tr>`:i+=`<tr><td>${o}</td><td>${r}</td></tr>`)}return i+=\"</table>\",i}this.description=t(e)};var xh=f4;var Kyi=T(S(),1);function CV(){fe.throwInstantiationError()}Object.defineProperties(CV.prototype,{rectangle:{get:fe.throwInstantiationError},tileWidth:{get:fe.throwInstantiationError},tileHeight:{get:fe.throwInstantiationError},maximumLevel:{get:fe.throwInstantiationError},minimumLevel:{get:fe.throwInstantiationError},tilingScheme:{get:fe.throwInstantiationError},tileDiscardPolicy:{get:fe.throwInstantiationError},errorEvent:{get:fe.throwInstantiationError},credit:{get:fe.throwInstantiationError},proxy:{get:fe.throwInstantiationError},hasAlphaChannel:{get:fe.throwInstantiationError}});CV.prototype.getTileCredits=function(e,t,n){fe.throwInstantiationError()};CV.prototype.requestImage=function(e,t,n,i){fe.throwInstantiationError()};CV.prototype.pickFeatures=function(e,t,n,i,o){fe.throwInstantiationError()};var Dit=/\\.ktx2$/i;CV.loadImage=function(e,t){let n=Xe.createIfNeeded(t);return Dit.test(n.url)?gl(n):l(e)&&l(e.tileDiscardPolicy)?n.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):n.fetchImage({preferImageBitmap:!0,flipY:!0})};var Aa=CV;var Qyi=T(S(),1),Bit={SATELLITE:1,OCEANS:2,HILLSHADE:3},_h=Object.freeze(Bit);function gbe(e){this.useTiles=g(e.usePreCachedTilesIfAvailable,!0);let t=e.ellipsoid;this.tilingScheme=g(e.tilingScheme,new Ui({ellipsoid:t})),this.rectangle=g(e.rectangle,this.tilingScheme.rectangle),this.ellipsoid=t;let n=e.credit;typeof n==\"string\"&&(n=new Zt(n)),this.credit=n,this.tileCredits=void 0,this.tileDiscardPolicy=e.tileDiscardPolicy,this.tileWidth=g(e.tileWidth,256),this.tileHeight=g(e.tileHeight,256),this.maximumLevel=e.maximumLevel}gbe.prototype.build=function(e){e._useTiles=this.useTiles,e._tilingScheme=this.tilingScheme,e._rectangle=this.rectangle,e._credit=this.credit,e._tileCredits=this.tileCredits,e._tileDiscardPolicy=this.tileDiscardPolicy,e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,this.useTiles&&!l(this.tileDiscardPolicy)&&(e._tileDiscardPolicy=new kv({missingImageUrl:xbe(e,0,0,this.maximumLevel).url,pixelsToCheck:[new D(0,0),new D(200,20),new D(20,200),new D(80,110),new D(160,130)],disableCheckIfAllPixelsAreTransparent:!0}))};function Yit(e,t){let n=e.tileInfo;if(!l(n))t.useTiles=!1;else{if(t.tileWidth=n.rows,t.tileHeight=n.cols,n.spatialReference.wkid===102100||n.spatialReference.wkid===102113)t.tilingScheme=new _r({ellipsoid:t.ellipsoid});else if(e.tileInfo.spatialReference.wkid===4326)t.tilingScheme=new Ui({ellipsoid:t.ellipsoid});else{let i=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;throw new ue(i)}if(t.maximumLevel=e.tileInfo.lods.length-1,l(e.fullExtent)){if(l(e.fullExtent.spatialReference)&&l(e.fullExtent.spatialReference.wkid))if(e.fullExtent.spatialReference.wkid===102100||e.fullExtent.spatialReference.wkid===102113){let i=new Li,o=e.fullExtent,r=i.unproject(new h(Math.max(o.xmin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(o.ymin,-t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),s=i.unproject(new h(Math.min(o.xmax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(o.ymax,t.tilingScheme.ellipsoid.maximumRadius*Math.PI),0));t.rectangle=new le(r.longitude,r.latitude,s.longitude,s.latitude)}else if(e.fullExtent.spatialReference.wkid===4326)t.rectangle=le.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax);else{let i=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;throw new ue(i)}}else t.rectangle=t.tilingScheme.rectangle;t.useTiles=!0}l(e.copyrightText)&&e.copyrightText.length>0&&(l(t.credit)?t.tileCredits=[new Zt(e.copyrightText)]:t.credit=new Zt(e.copyrightText))}function Oit(e,t){let n=`An error occurred while accessing ${e.url}`;throw l(t)&&l(t.message)&&(n+=`: ${t.message}`),new ue(n)}async function zit(e,t){let n=e.getDerivedResource({queryParameters:{f:\"json\"}});try{let i=await n.fetchJson();Yit(i,t)}catch(i){Oit(e,i)}}function Uf(e){e=g(e,g.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=g(e.tileWidth,256),this._tileHeight=g(e.tileHeight,256),this._maximumLevel=e.maximumLevel,this._tilingScheme=g(e.tilingScheme,new Ui({ellipsoid:e.ellipsoid})),this._useTiles=g(e.usePreCachedTilesIfAvailable,!0),this._rectangle=g(e.rectangle,this._tilingScheme.rectangle),this._layers=e.layers,this._credit=e.credit,this._tileCredits=void 0;let t=e.credit;typeof t==\"string\"&&(t=new Zt(t)),this.enablePickFeatures=g(e.enablePickFeatures,!0),this._errorEvent=new ge}Uf.fromBasemapType=async function(e,t){t=g(t,g.EMPTY_OBJECT);let n,i,o;switch(e){case _h.SATELLITE:{n=g(t.token,Nd.defaultAccessToken),i=Xe.createIfNeeded(Nd.defaultWorldImageryServer),i.appendForwardSlash();let r=Nd.getDefaultTokenCredit(n);l(r)&&(o=Zt.clone(r))}break;case _h.OCEANS:{n=g(t.token,Nd.defaultAccessToken),i=Xe.createIfNeeded(Nd.defaultWorldOceanServer),i.appendForwardSlash();let r=Nd.getDefaultTokenCredit(n);l(r)&&(o=Zt.clone(r))}break;case _h.HILLSHADE:{n=g(t.token,Nd.defaultAccessToken),i=Xe.createIfNeeded(Nd.defaultWorldHillshadeServer),i.appendForwardSlash();let r=Nd.getDefaultTokenCredit(n);l(r)&&(o=Zt.clone(r))}break;default:}return Uf.fromUrl(i,{...t,token:n,credit:o,usePreCachedTilesIfAvailable:!0})};function xbe(e,t,n,i,o){let r;if(e._useTiles)r=e._resource.getDerivedResource({url:`tile/${i}/${n}/${t}`,request:o});else{let s=e._tilingScheme.tileXYToNativeRectangle(t,n,i),c={bbox:`${s.west},${s.south},${s.east},${s.north}`,size:`${e._tileWidth},${e._tileHeight}`,format:\"png32\",transparent:!0,f:\"image\"};e._tilingScheme.projection instanceof Ci?(c.bboxSR=4326,c.imageSR=4326):(c.bboxSR=3857,c.imageSR=3857),e.layers&&(c.layers=`show:${e.layers}`),r=e._resource.getDerivedResource({url:\"export\",request:o,queryParameters:c})}return r}Object.defineProperties(Uf.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}});Uf.fromUrl=async function(e,t){t=g(t,g.EMPTY_OBJECT);let n=Xe.createIfNeeded(e);n.appendForwardSlash(),l(t.token)&&n.setQueryParameters({token:t.token});let i=new Uf(t);i._resource=n;let o=new gbe(t);return g(t.usePreCachedTilesIfAvailable,!0)&&await zit(n,o),o.build(i),i};Uf.prototype.getTileCredits=function(e,t,n){return this._tileCredits};Uf.prototype.requestImage=function(e,t,n,i){return Aa.loadImage(this,xbe(this,e,t,n,i))};Uf.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures)return;let r=this._tilingScheme.tileXYToNativeRectangle(e,t,n),s,a,c;if(this._tilingScheme.projection instanceof Ci)s=P.toDegrees(i),a=P.toDegrees(o),c=\"4326\";else{let p=this._tilingScheme.projection.project(new he(i,o,0));s=p.x,a=p.y,c=\"3857\"}let d=\"visible\";l(this._layers)&&(d+=`:${this._layers}`);let u={f:\"json\",tolerance:2,geometryType:\"esriGeometryPoint\",geometry:`${s},${a}`,mapExtent:`${r.west},${r.south},${r.east},${r.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:c,layers:d};return this._resource.getDerivedResource({url:\"identify\",queryParameters:u}).fetchJson().then(function(p){let b=[],f=p.results;if(!l(f))return b;for(let x=0;x<f.length;++x){let _=f[x],C=new xh;if(C.data=_,C.name=_.value,C.properties=_.attributes,C.configureDescriptionFromProperties(_.attributes),_.geometryType===\"esriGeometryPoint\"&&_.geometry){let V=_.geometry.spatialReference&&_.geometry.spatialReference.wkid?_.geometry.spatialReference.wkid:4326;if(V===4326||V===4283)C.position=he.fromDegrees(_.geometry.x,_.geometry.y,_.geometry.z);else if(V===102100||V===900913||V===3857){let L=new Li;C.position=L.unproject(new h(_.geometry.x,_.geometry.y,_.geometry.z))}}b.push(C)}return b})};Uf._metadataCache={};var J0=Uf;var Ngi=T(S(),1);var _gi=T(S(),1),Hit={AERIAL:\"Aerial\",AERIAL_WITH_LABELS:\"AerialWithLabels\",AERIAL_WITH_LABELS_ON_DEMAND:\"AerialWithLabelsOnDemand\",ROAD:\"Road\",ROAD_ON_DEMAND:\"RoadOnDemand\",CANVAS_DARK:\"CanvasDark\",CANVAS_LIGHT:\"CanvasLight\",CANVAS_GRAY:\"CanvasGray\",ORDNANCE_SURVEY:\"OrdnanceSurvey\",COLLINS_BART:\"CollinsBart\"},VV=Object.freeze(Hit);var Cgi=T(S(),1);function Uv(e){}Uv.prototype.isReady=function(){return!0};Uv.prototype.shouldDiscardImage=function(e){return Uv.EMPTY_IMAGE===e};var eD;Object.defineProperties(Uv,{EMPTY_IMAGE:{get:function(){return l(eD)||(eD=new Image,eD.src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\"),eD}}});var LV=Uv;function _be(e){this.tileWidth=void 0,this.tileHeight=void 0,this.maximumLevel=void 0,this.imageUrlSubdomains=void 0,this.imageUrlTemplate=void 0,this.attributionList=void 0}_be.prototype.build=function(e){e._tileWidth=this.tileWidth,e._tileHeight=this.tileHeight,e._maximumLevel=this.maximumLevel,e._imageUrlSubdomains=this.imageUrlSubdomains,e._imageUrlTemplate=this.imageUrlTemplate;let t=e._attributionList=this.attributionList;t||(t=[]),e._attributionList=t;for(let n=0,i=t.length;n<i;++n){let o=t[n];if(o.credit instanceof Zt)break;o.credit=new Zt(o.attribution);let r=o.coverageAreas;for(let s=0,a=o.coverageAreas.length;s<a;++s){let c=r[s],d=c.bbox;c.bbox=new le(P.toRadians(d[1]),P.toRadians(d[0]),P.toRadians(d[3]),P.toRadians(d[2]))}}};function Kit(e,t){if(e.resourceSets.length!==1)throw new ue(\"metadata does not specify one resource in resourceSets\");let n=e.resourceSets[0].resources[0];t.tileWidth=n.imageWidth,t.tileHeight=n.imageHeight,t.maximumLevel=n.zoomMax-1,t.imageUrlSubdomains=n.imageUrlSubdomains,t.imageUrlTemplate=n.imageUrl,t.attributionList=n.imageryProviders}function Jit(e,t,n){let i=`An error occurred while accessing ${e.url}`;throw l(t)&&l(t.message)&&(i+=`: ${t.message}`),So.reportError(void 0,n,l(n)?n._errorEvent:void 0,i,void 0,void 0,void 0,t),new ue(i)}async function Qit(e,t,n){let i=e.url,o=Vs._metadataCache[i];l(o)||(o=e.fetchJsonp(\"jsonp\"),Vs._metadataCache[i]=o);try{let r=await o;return Kit(r,t)}catch(r){Jit(e,r,n)}}function Vs(e){e=g(e,g.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=1,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._mapStyle=g(e.mapStyle,VV.AERIAL),this._mapLayer=e.mapLayer,this._culture=g(e.culture,\"\"),this._key=e.key,this._tileDiscardPolicy=e.tileDiscardPolicy,l(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new LV),this._proxy=e.proxy,this._credit=new Zt(`<a href=\"https://www.microsoft.com/en-us/maps/product/enduserterms\"><img src=\"${Vs.logoUrl}\" title=\"Bing Imagery\"/></a>`),this._tilingScheme=new _r({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._attributionList=void 0,this._errorEvent=new ge}Object.defineProperties(Vs.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},mapLayer:{get:function(){return this._mapLayer}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return l(this.mapLayer)}}});Vs.fromUrl=async function(e,t){t=g(t,g.EMPTY_OBJECT);let n=t.tileProtocol;l(n)?n.length>0&&n[n.length-1]===\":\"&&(n=n.substr(0,n.length-1)):n=document.location.protocol===\"http:\"?\"http\":\"https\";let i=g(t.mapStyle,VV.AERIAL),o=Xe.createIfNeeded(e);o.appendForwardSlash();let r={incl:\"ImageryProviders\",key:t.key,uriScheme:n};l(t.mapLayer)&&(r.mapLayer=t.mapLayer),l(t.culture)&&(r.culture=t.culture);let s=o.getDerivedResource({url:`REST/v1/Imagery/Metadata/${i}`,queryParameters:r}),a=new Vs(t);a._resource=o;let c=new _be(t);return await Qit(s,c),c.build(a),a};var jit=new le;Vs.prototype.getTileCredits=function(e,t,n){let i=this._tilingScheme.tileXYToRectangle(e,t,n,jit);return eot(this._attributionList,n,i)};Vs.prototype.requestImage=function(e,t,n,i){let o=Aa.loadImage(this,qit(this,e,t,n,i));if(l(o))return o.catch(function(r){return l(r.blob)&&r.blob.size===0?LV.EMPTY_IMAGE:Promise.reject(r)})};Vs.prototype.pickFeatures=function(e,t,n,i,o){};Vs.tileXYToQuadKey=function(e,t,n){let i=\"\";for(let o=n;o>=0;--o){let r=1<<o,s=0;e&r&&(s|=1),t&r&&(s|=2),i+=s}return i};Vs.quadKeyToTileXY=function(e){let t=0,n=0,i=e.length-1;for(let o=i;o>=0;--o){let r=1<<o,s=+e[i-o];s&1&&(t|=r),s&2&&(n|=r)}return{x:t,y:n,level:i}};Vs._logoUrl=void 0;Object.defineProperties(Vs,{logoUrl:{get:function(){return l(Vs._logoUrl)||(Vs._logoUrl=on(\"Assets/Images/bing_maps_credit.png\")),Vs._logoUrl},set:function(e){Vs._logoUrl=e}}});function qit(e,t,n,i,o){let r=e._imageUrlTemplate,s=e._imageUrlSubdomains,a=(t+n+i)%s.length;return e._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:Vs.tileXYToQuadKey(t,n,i),subdomain:s[a],culture:e._culture},queryParameters:{n:\"z\"}})}var $it=new le;function eot(e,t,n){++t;let i=[];for(let o=0,r=e.length;o<r;++o){let s=e[o],a=s.coverageAreas,c=!1;for(let d=0,u=s.coverageAreas.length;!c&&d<u;++d){let m=a[d];if(t>=m.zoomMin&&t<=m.zoomMax){let p=le.intersection(n,m.bbox,$it);l(p)&&(c=!0)}}c&&i.push(s.credit)}return i}Vs._metadataCache={};var Dv=Vs;var bxi=T(S(),1);var txi=T(S(),1);var Tbe=/{[^}]+}/g,Sbe={x:oot,y:sot,z:lot,s:dot,reverseX:rot,reverseY:aot,reverseZ:cot,westDegrees:uot,southDegrees:mot,eastDegrees:hot,northDegrees:fot,westProjected:pot,southProjected:bot,eastProjected:yot,northProjected:got,width:xot,height:_ot},tot=Ct(Sbe,{i:Tot,j:Sot,reverseI:Cot,reverseJ:Vot,longitudeDegrees:Zot,latitudeDegrees:Rot,longitudeProjected:Got,latitudeProjected:Eot,format:Iot});function Bv(e){e=g(e,g.EMPTY_OBJECT),this._errorEvent=new ge;let t=Xe.createIfNeeded(e.url),n=Xe.createIfNeeded(e.pickFeaturesUrl);this._resource=t,this._urlSchemeZeroPadding=e.urlSchemeZeroPadding,this._getFeatureInfoFormats=e.getFeatureInfoFormats,this._pickFeaturesResource=n;let i=e.subdomains;Array.isArray(i)?i=i.slice():l(i)&&i.length>0?i=i.split(\"\"):i=[\"a\",\"b\",\"c\"],this._subdomains=i,this._tileWidth=g(e.tileWidth,256),this._tileHeight=g(e.tileHeight,256),this._minimumLevel=g(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._tilingScheme=g(e.tilingScheme,new _r({ellipsoid:e.ellipsoid})),this._rectangle=g(e.rectangle,this._tilingScheme.rectangle),this._rectangle=le.intersection(this._rectangle,this._tilingScheme.rectangle),this._tileDiscardPolicy=e.tileDiscardPolicy;let o=e.credit;typeof o==\"string\"&&(o=new Zt(o)),this._credit=o,this._hasAlphaChannel=g(e.hasAlphaChannel,!0);let r=e.customTags,s=Ct(Sbe,r),a=Ct(tot,r);this._tags=s,this._pickFeaturesTags=a,this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this.enablePickFeatures=g(e.enablePickFeatures,!0)}Object.defineProperties(Bv.prototype,{url:{get:function(){return this._resource.url}},urlSchemeZeroPadding:{get:function(){return this._urlSchemeZeroPadding}},pickFeaturesUrl:{get:function(){return this._pickFeaturesResource.url}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return this._hasAlphaChannel}}});Bv.prototype.getTileCredits=function(e,t,n){};Bv.prototype.requestImage=function(e,t,n,i){return Aa.loadImage(this,not(this,e,t,n,i))};Bv.prototype.pickFeatures=function(e,t,n,i,o){if(!this.enablePickFeatures||!l(this._pickFeaturesResource)||this._getFeatureInfoFormats.length===0)return;let r=0,s=this;function a(d,u){return d.callback(u)}function c(){if(r>=s._getFeatureInfoFormats.length)return Promise.resolve([]);let d=s._getFeatureInfoFormats[r],u=iot(s,e,t,n,i,o,d.format);return++r,d.type===\"json\"?u.fetchJson().then(d.callback).catch(c):d.type===\"xml\"?u.fetchXML().then(d.callback).catch(c):d.type===\"text\"||d.type===\"html\"?u.fetchText().then(d.callback).catch(c):u.fetch({responseType:d.format}).then(a.bind(void 0,d)).catch(c)}return c()};var tD=!1,kd=new le,nD=!1,Yv=new le;function not(e,t,n,i,o){tD=!1,nD=!1;let r=e._resource,s=r.getUrlComponent(!0),a=e._tags,c={},d=s.match(Tbe);return l(d)&&d.forEach(function(u){let m=u.substring(1,u.length-1);l(a[m])&&(c[m]=a[m](e,t,n,i))}),r.getDerivedResource({request:o,templateValues:c})}var p4=!1,RV=new D,b4=!1;function iot(e,t,n,i,o,r,s){tD=!1,nD=!1,p4=!1,b4=!1;let a=e._pickFeaturesResource,c=a.getUrlComponent(!0),d=e._pickFeaturesTags,u={},m=c.match(Tbe);return l(m)&&m.forEach(function(p){let b=p.substring(1,p.length-1);l(d[b])&&(u[b]=d[b](e,t,n,i,o,r,s))}),a.getDerivedResource({templateValues:u})}function"
}