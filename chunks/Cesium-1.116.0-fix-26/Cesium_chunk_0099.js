{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 99,
    "total_chunks": 194,
    "chunk_size": 25909,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.705Z"
  },
  "content": "mix(startEllipsoidNormal, endEllipsoidNormal, isEnd); // offset height to create volume offset = mix(startPositionAndHeight.w, endPositionAndHeight.w, isEnd); offset = mix(u_minimumMaximumVectorHeights.y, u_minimumMaximumVectorHeights.x, isTop) - offset; position.xyz += offset * ellipsoidNormal; // move from RTC to EC position = u_modifiedModelView * position; right = czm_normal * right; // Push for width in a direction that is in the start or end plane and in a plane with right // N = normalEC (\"right-facing\" direction for push) // R = right // p = angle between N and R // w = distance to push along R if R == N // d = distance to push along N // // N R // { p| } * cos(p) = dot(N, R) = w / d // d | |w * d = w / dot(N, R) // { | } // o---------- polyline segment ----> // vec3 scratchNormal = mix(-startFaceNormalAndVertexCorner.xyz, endFaceNormalAndHalfWidth.xyz, isEnd); scratchNormal = cross(scratchNormal, mix(startEllipsoidNormal, endEllipsoidNormal, isEnd)); vec3 miterPushNormal = czm_normal * normalize(scratchNormal); offset = 2.0 * endFaceNormalAndHalfWidth.w * max(0.0, czm_metersPerPixel(position)); // offset = widthEC offset = offset / dot(miterPushNormal, right); position.xyz += miterPushNormal * (offset * sign(0.5 - mod(startFaceNormalAndVertexCorner.w, 2.0))); gl_Position = czm_depthClamp(czm_projection * position); position = u_modifiedModelView * vec4(startPositionAndHeight.xyz, 1.0); vec3 startNormalEC = czm_normal * startFaceNormalAndVertexCorner.xyz; v_startPlaneEC = vec4(startNormalEC, -dot(startNormalEC, position.xyz)); v_rightPlaneEC = vec4(right, -dot(right, position.xyz)); position = u_modifiedModelView * vec4(endPositionAndHeight.xyz, 1.0); vec3 endNormalEC = czm_normal * endFaceNormalAndHalfWidth.xyz; v_endPlaneEC = vec4(endNormalEC, -dot(endNormalEC, position.xyz)); v_halfWidth = endFaceNormalAndHalfWidth.w; } `;var EPn=T(S(),1),l2=`in vec4 v_startPlaneEC; in vec4 v_endPlaneEC; in vec4 v_rightPlaneEC; in float v_halfWidth; in vec3 v_volumeUpEC; uniform vec4 u_highlightColor; void main() { float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw))); // Discard for sky if (logDepthOrDepth == 0.0) { #ifdef DEBUG_SHOW_VOLUME out_FragColor = vec4(0.0, 0.0, 1.0, 0.5); return; #else // DEBUG_SHOW_VOLUME discard; #endif // DEBUG_SHOW_VOLUME } vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); eyeCoordinate /= eyeCoordinate.w; float halfMaxWidth = v_halfWidth * czm_metersPerPixel(eyeCoordinate); // Expand halfMaxWidth if direction to camera is almost perpendicular with the volume's up direction halfMaxWidth += halfMaxWidth * (1.0 - dot(-normalize(eyeCoordinate.xyz), v_volumeUpEC)); // Check distance of the eye coordinate against the right-facing plane float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz); // Check eye coordinate against the mitering planes float distanceFromStart = czm_planeDistance(v_startPlaneEC, eyeCoordinate.xyz); float distanceFromEnd = czm_planeDistance(v_endPlaneEC, eyeCoordinate.xyz); if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) { #ifdef DEBUG_SHOW_VOLUME out_FragColor = vec4(logDepthOrDepth, 0.0, 0.0, 0.5); return; #else // DEBUG_SHOW_VOLUME discard; #endif // DEBUG_SHOW_VOLUME } out_FragColor = u_highlightColor; czm_writeDepthClamp(); } `;function c0(e){this._positions=e.positions,this._widths=e.widths,this._counts=e.counts,this._batchIds=e.batchIds,this._ellipsoid=g(e.ellipsoid,oe.WGS84),this._minimumHeight=e.minimumHeight,this._maximumHeight=e.maximumHeight,this._center=e.center,this._rectangle=e.rectangle,this._batchTable=e.batchTable,this._va=void 0,this._sp=void 0,this._rs=void 0,this._uniformMap=void 0,this._command=void 0,this._transferrableBatchIds=void 0,this._packedBuffer=void 0,this._minimumMaximumVectorHeights=new D(ai._defaultMinTerrainHeight,ai._defaultMaxTerrainHeight),this._boundingVolume=Zn.fromRectangle(e.rectangle,ai._defaultMinTerrainHeight,ai._defaultMaxTerrainHeight,this._ellipsoid),this._classificationType=e.classificationType,this._keepDecodedPositions=e.keepDecodedPositions,this._decodedPositions=void 0,this._decodedPositionOffsets=void 0,this._startEllipsoidNormals=void 0,this._endEllipsoidNormals=void 0,this._startPositionAndHeights=void 0,this._startFaceNormalAndVertexCornerIds=void 0,this._endPositionAndHeights=void 0,this._endFaceNormalAndHalfWidths=void 0,this._vertexBatchIds=void 0,this._indices=void 0,this._constantColor=O.clone(O.WHITE),this._highlightColor=this._constantColor,this._trianglesLength=0,this._geometryByteLength=0,this._ready=!1,this._promise=void 0,this._error=void 0}Object.defineProperties(c0.prototype,{trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},ready:{get:function(){return this._ready}}});function Tze(e,t,n){let i=ai.getMinimumMaximumHeights(t,n),o=i.minimumTerrainHeight,r=i.maximumTerrainHeight,s=e._minimumMaximumVectorHeights;s.x=o,s.y=r;let a=e._boundingVolume,c=e._rectangle;Zn.fromRectangle(c,o,r,n,a)}function Sze(e){let t=e._rectangle,n=e._minimumHeight,i=e._maximumHeight,o=e._ellipsoid,r=e._center,s=2+le.packedLength+oe.packedLength+h.packedLength,a=new Float64Array(s),c=0;return a[c++]=n,a[c++]=i,le.pack(t,a,c),c+=le.packedLength,oe.pack(o,a,c),c+=oe.packedLength,h.pack(r,a,c),a}var Cze=new di(\"createVectorTileClampedPolylines\"),Cy={startEllipsoidNormal:0,endEllipsoidNormal:1,startPositionAndHeight:2,endPositionAndHeight:3,startFaceNormalAndVertexCorner:4,endFaceNormalAndHalfWidth:5,a_batchId:6};function Vze(e,t){if(l(e._va))return;let n=e._positions,i=e._widths,o=e._counts,r=e._transferrableBatchIds,s=e._packedBuffer;l(s)||(n=e._positions=n.slice(),i=e._widths=i.slice(),o=e._counts=o.slice(),r=e._transferrableBatchIds=e._batchIds.slice(),s=e._packedBuffer=Sze(e));let a=[n.buffer,i.buffer,o.buffer,r.buffer,s.buffer],c={positions:n.buffer,widths:i.buffer,counts:o.buffer,batchIds:r.buffer,packedBuffer:s.buffer,keepDecodedPositions:e._keepDecodedPositions},d=Cze.scheduleTask(c,a);if(l(d))return d.then(function(u){if(e.isDestroyed())return;e._keepDecodedPositions&&(e._decodedPositions=new Float64Array(u.decodedPositions),e._decodedPositionOffsets=new Uint32Array(u.decodedPositionOffsets)),e._startEllipsoidNormals=new Float32Array(u.startEllipsoidNormals),e._endEllipsoidNormals=new Float32Array(u.endEllipsoidNormals),e._startPositionAndHeights=new Float32Array(u.startPositionAndHeights),e._startFaceNormalAndVertexCornerIds=new Float32Array(u.startFaceNormalAndVertexCornerIds),e._endPositionAndHeights=new Float32Array(u.endPositionAndHeights),e._endFaceNormalAndHalfWidths=new Float32Array(u.endFaceNormalAndHalfWidths),e._vertexBatchIds=new Uint16Array(u.vertexBatchIds);let m=u.indexDatatype;e._indices=m===Ae.UNSIGNED_SHORT?new Uint16Array(u.indices):new Uint32Array(u.indices),Lze(e,t),e._ready=!0}).catch(u=>{e.isDestroyed()||(e._error=u)})}function Lze(e,t){if(!l(e._va)){let n=e._startEllipsoidNormals,i=e._endEllipsoidNormals,o=e._startPositionAndHeights,r=e._endPositionAndHeights,s=e._startFaceNormalAndVertexCornerIds,a=e._endFaceNormalAndHalfWidths,c=e._vertexBatchIds,d=e._indices,u=n.byteLength+i.byteLength;u+=o.byteLength+r.byteLength,u+=s.byteLength+a.byteLength,u+=c.byteLength+d.byteLength,e._trianglesLength=d.length/3,e._geometryByteLength=u;let m=pt.createVertexBuffer({context:t,typedArray:n,usage:Me.STATIC_DRAW}),p=pt.createVertexBuffer({context:t,typedArray:i,usage:Me.STATIC_DRAW}),b=pt.createVertexBuffer({context:t,typedArray:o,usage:Me.STATIC_DRAW}),f=pt.createVertexBuffer({context:t,typedArray:r,usage:Me.STATIC_DRAW}),x=pt.createVertexBuffer({context:t,typedArray:s,usage:Me.STATIC_DRAW}),_=pt.createVertexBuffer({context:t,typedArray:a,usage:Me.STATIC_DRAW}),C=pt.createVertexBuffer({context:t,typedArray:c,usage:Me.STATIC_DRAW}),V=pt.createIndexBuffer({context:t,typedArray:d,usage:Me.STATIC_DRAW,indexDatatype:d.BYTES_PER_ELEMENT===2?Ae.UNSIGNED_SHORT:Ae.UNSIGNED_INT}),L=[{index:Cy.startEllipsoidNormal,vertexBuffer:m,componentDatatype:Q.FLOAT,componentsPerAttribute:3},{index:Cy.endEllipsoidNormal,vertexBuffer:p,componentDatatype:Q.FLOAT,componentsPerAttribute:3},{index:Cy.startPositionAndHeight,vertexBuffer:b,componentDatatype:Q.FLOAT,componentsPerAttribute:4},{index:Cy.endPositionAndHeight,vertexBuffer:f,componentDatatype:Q.FLOAT,componentsPerAttribute:4},{index:Cy.startFaceNormalAndVertexCorner,vertexBuffer:x,componentDatatype:Q.FLOAT,componentsPerAttribute:4},{index:Cy.endFaceNormalAndHalfWidth,vertexBuffer:_,componentDatatype:Q.FLOAT,componentsPerAttribute:4},{index:Cy.a_batchId,vertexBuffer:C,componentDatatype:Q.UNSIGNED_SHORT,componentsPerAttribute:1}];e._va=new ti({context:t,attributes:L,indexBuffer:V}),e._positions=void 0,e._widths=void 0,e._counts=void 0,e._ellipsoid=void 0,e._minimumHeight=void 0,e._maximumHeight=void 0,e._rectangle=void 0,e._transferrableBatchIds=void 0,e._packedBuffer=void 0,e._startEllipsoidNormals=void 0,e._endEllipsoidNormals=void 0,e._startPositionAndHeights=void 0,e._startFaceNormalAndVertexCornerIds=void 0,e._endPositionAndHeights=void 0,e._endFaceNormalAndHalfWidths=void 0,e._vertexBatchIds=void 0,e._indices=void 0}}var d2=new M,gce=new h;function Zze(e,t){l(e._uniformMap)||(e._uniformMap={u_modifiedModelView:function(){let n=t.uniformState.view;return M.clone(n,d2),M.multiplyByPoint(d2,e._center,gce),M.setTranslation(d2,gce,d2),d2},u_highlightColor:function(){return e._highlightColor},u_minimumMaximumVectorHeights:function(){return e._minimumMaximumVectorHeights}})}function xce(e){return Ne.fromCache({cull:{enabled:!0,face:mi.FRONT},blending:un.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:vn.EQUAL,frontOperation:{fail:dt.KEEP,zFail:dt.KEEP,zPass:dt.KEEP},backFunction:vn.EQUAL,backOperation:{fail:dt.KEEP,zFail:dt.KEEP,zPass:dt.KEEP},reference:Mt.CESIUM_3D_TILE_MASK,mask:Mt.CESIUM_3D_TILE_MASK}})}function Rze(e){l(e._rs)||(e._rs=xce(!1),e._rs3DTiles=xce(!0))}function Gze(e,t){if(l(e._sp))return;let n=e._batchTable,i=n.getVertexShaderCallback(!1,\"a_batchId\",void 0)(c2),o=n.getFragmentShaderCallback(!1,void 0,!0)(l2),r=new Ue({defines:[\"VECTOR_TILE\",Ut.isInternetExplorer()?\"\":\"CLIP_POLYLINE\"],sources:[dd,i]}),s=new Ue({defines:[\"VECTOR_TILE\"],sources:[o]});e._sp=Ht.fromCache({context:t,vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:Cy})}function Eze(e,t){let n=e._command;if(!l(e._command)){let o=e._batchTable.getUniformMapCallback()(e._uniformMap);n=e._command=new je({owner:e,vertexArray:e._va,renderState:e._rs,shaderProgram:e._sp,uniformMap:o,boundingVolume:e._boundingVolume,pass:Ze.TERRAIN_CLASSIFICATION,pickId:e._batchTable.getPickId()});let r=je.shallowClone(n,n.derivedCommands.tileset);r.renderState=e._rs3DTiles,r.pass=Ze.CESIUM_3D_TILE_CLASSIFICATION,n.derivedCommands.tileset=r}let i=e._classificationType;(i===Un.TERRAIN||i===Un.BOTH)&&t.commandList.push(n),(i===Un.CESIUM_3D_TILE||i===Un.BOTH)&&t.commandList.push(n.derivedCommands.tileset)}c0.prototype.getPositions=function(e){return y_.getPolylinePositions(this,e)};c0.prototype.createFeatures=function(e,t){let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o];t[r]=new Fs(e,r)}};c0.prototype.applyDebugSettings=function(e,t){this._highlightColor=e?t:this._constantColor};function Xze(e,t){let n=e._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],s=t[r];s.show=!0,s.color=O.WHITE}}var Ize=new O,Wze=O.WHITE,Pze=!0;c0.prototype.applyStyle=function(e,t){if(!l(e)){Xze(this,t);return}let n=this._batchIds,i=n.length;for(let o=0;o<i;++o){let r=n[o],s=t[r];s.color=l(e.color)?e.color.evaluateColor(s,Ize):Wze,s.show=l(e.show)?e.show.evaluate(s):Pze}};function vze(e){return ai.initialize().then(function(){Tze(e,e._rectangle,e._ellipsoid)}).catch(t=>{e.isDestroyed()||(e._error=t)})}c0.prototype.update=function(e){let t=e.context;if(!this._ready){if(l(this._promise)||(this._promise=vze(this).then(Vze(this,t))),l(this._error)){let i=this._error;throw this._error=void 0,i}return}Zze(this,t),Gze(this,t),Rze(this);let n=e.passes;(n.render||n.pick)&&Eze(this,e)};c0.prototype.isDestroyed=function(){return!1};c0.prototype.destroy=function(){return this._va=this._va&&this._va.destroy(),this._sp=this._sp&&this._sp.destroy(),me(this)};var u2=c0;var yvn=T(S(),1);var SH=32767,wze=new he,Fze=new h;function Aze(e,t,n,i,o){let r=e.length/3,s=e.subarray(0,r),a=e.subarray(r,2*r),c=e.subarray(2*r,3*r);wn.zigZagDeltaDecode(s,a,c);let d=new Float64Array(e.length);for(let u=0;u<r;++u){let m=s[u],p=a[u],b=c[u],f=P.lerp(t.west,t.east,m/SH),x=P.lerp(t.south,t.north,p/SH),_=P.lerp(n,i,b/SH),C=he.fromRadians(f,x,_,wze),V=o.cartographicToCartesian(C,Fze);h.pack(V,d,u*3)}return d}var m2=Aze;function Jm(e,t,n,i,o){this._tileset=e,this._tile=t,this._resource=n,this._polygons=void 0,this._polylines=void 0,this._points=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._ready=!1,Dze(this,i,o)}Object.defineProperties(Jm.prototype,{featuresLength:{get:function(){return l(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return l(this._points)?this._points.pointsLength:0}},trianglesLength:{get:function(){let e=0;return l(this._polygons)&&(e+=this._polygons.trianglesLength),l(this._polylines)&&(e+=this._polylines.trianglesLength),e}},geometryByteLength:{get:function(){let e=0;return l(this._polygons)&&(e+=this._polygons.geometryByteLength),l(this._polylines)&&(e+=this._polylines.geometryByteLength),e}},texturesByteLength:{get:function(){return l(this._points)?this._points.texturesByteLength:0}},batchTableByteLength:{get:function(){return l(this._batchTable)?this._batchTable.batchTableByteLength:0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});function Mze(e){return function(t,n){l(e._polygons)&&e._polygons.updateCommands(t,n)}}function Nze(e,t){let n,i,o,r,s=g(e.POLYGONS_LENGTH,0),a=g(e.POLYLINES_LENGTH,0),c=g(e.POINTS_LENGTH,0);if(s>0&&l(e.POLYGON_BATCH_IDS)){let p=t.byteOffset+e.POLYGON_BATCH_IDS.byteOffset;n=new Uint16Array(t.buffer,p,s)}if(a>0&&l(e.POLYLINE_BATCH_IDS)){let p=t.byteOffset+e.POLYLINE_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,p,a)}if(c>0&&l(e.POINT_BATCH_IDS)){let p=t.byteOffset+e.POINT_BATCH_IDS.byteOffset;o=new Uint16Array(t.buffer,p,c)}let d=l(n)||l(i)||l(o),u=s>0&&!l(n)||a>0&&!l(i)||c>0&&!l(o);if(d&&u)throw new ue(\"If one group of batch ids is defined, then all batch ids must be defined\");if(!l(n)&&!l(i)&&!l(o)){let p=0;if(!l(n)&&s>0)for(n=new Uint16Array(s),r=0;r<s;++r)n[r]=p++;if(!l(i)&&a>0)for(i=new Uint16Array(a),r=0;r<a;++r)i[r]=p++;if(!l(o)&&c>0)for(o=new Uint16Array(c),r=0;r<c;++r)o[r]=p++}return{polygons:n,polylines:i,points:o}}var Km=Uint32Array.BYTES_PER_ELEMENT;function kze(e){return new y_(e)}function Uze(e){return new u2(e)}function Dze(e,t,n){n=g(n,0);let i=new Uint8Array(t),o=new DataView(t);n+=Km;let r=o.getUint32(n,!0);if(r!==1)throw new ue(`Only Vector tile version 1 is supported. Version ${r} is not.`);n+=Km;let s=o.getUint32(n,!0);if(n+=Km,s===0){e._ready=!0;return}let a=o.getUint32(n,!0);if(n+=Km,a===0)throw new ue(\"Feature table must have a byte length greater than zero\");let c=o.getUint32(n,!0);n+=Km;let d=o.getUint32(n,!0);n+=Km;let u=o.getUint32(n,!0);n+=Km;let m=o.getUint32(n,!0);n+=Km;let p=o.getUint32(n,!0);n+=Km;let b=o.getUint32(n,!0);n+=Km;let f=o.getUint32(n,!0);n+=Km;let x=Go(i,n,a);n+=a;let _=new Uint8Array(t,n,c);n+=c;let C,V;d>0&&(C=Go(i,n,d),n+=d,u>0&&(V=new Uint8Array(t,n,u),V=new Uint8Array(V),n+=u));let L=g(x.POLYGONS_LENGTH,0),R=g(x.POLYLINES_LENGTH,0),G=g(x.POINTS_LENGTH,0),X=L+R+G,v=new wp(e,X,C,V,Mze(e));if(e._batchTable=v,X===0)return;let W=new Um(x,_),F=W.getGlobalProperty(\"REGION\");if(!l(F))throw new ue(\"Feature table global property: REGION must be defined\");let A=le.unpack(F),y=F[4],Z=F[5],E=e._tile.computedTransform,I=W.getGlobalProperty(\"RTC_CENTER\",Q.FLOAT,3);l(I)?(I=h.unpack(I),M.multiplyByPoint(E,I,I)):(I=le.center(A),I.height=P.lerp(y,Z,.5),I=oe.WGS84.cartographicToCartesian(I));let w=Nze(x,_);if(n+=(4-n%4)%4,L>0){W.featuresLength=L;let k=g(W.getPropertyArray(\"POLYGON_COUNTS\",Q.UNSIGNED_INT,1),W.getPropertyArray(\"POLYGON_COUNT\",Q.UNSIGNED_INT,1));if(!l(k))throw new ue(\"Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0\");let B=g(W.getPropertyArray(\"POLYGON_INDEX_COUNTS\",Q.UNSIGNED_INT,1),W.getPropertyArray(\"POLYGON_INDEX_COUNT\",Q.UNSIGNED_INT,1));if(!l(B))throw new ue(\"Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0\");let U=k.reduce(function(H,j){return H+j*2},0),Y=B.reduce(function(H,j){return H+j},0),N=new Uint32Array(t,n,Y);n+=m;let J=new Uint16Array(t,n,U);n+=p;let z,ee;l(x.POLYGON_MINIMUM_HEIGHTS)&&l(x.POLYGON_MAXIMUM_HEIGHTS)&&(z=W.getPropertyArray(\"POLYGON_MINIMUM_HEIGHTS\",Q.FLOAT,1),ee=W.getPropertyArray(\"POLYGON_MAXIMUM_HEIGHTS\",Q.FLOAT,1)),e._polygons=new r2({positions:J,counts:k,indexCounts:B,indices:N,minimumHeight:y,maximumHeight:Z,polygonMinimumHeights:z,polygonMaximumHeights:ee,center:I,rectangle:A,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:v,batchIds:w.polygons,modelMatrix:E})}if(R>0){W.featuresLength=R;let k=g(W.getPropertyArray(\"POLYLINE_COUNTS\",Q.UNSIGNED_INT,1),W.getPropertyArray(\"POLYLINE_COUNT\",Q.UNSIGNED_INT,1));if(!l(k))throw new ue(\"Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0\");let B=W.getPropertyArray(\"POLYLINE_WIDTHS\",Q.UNSIGNED_SHORT,1);if(!l(B)){B=new Uint16Array(R);for(let ee=0;ee<R;++ee)B[ee]=2}let U=k.reduce(function(ee,H){return ee+H*3},0),Y=new Uint16Array(t,n,U);n+=b;let N=e._tileset,J=N.examineVectorLinesFunction;if(l(J)){let ee=m2(new Uint16Array(Y),A,y,Z,oe.WGS84);Bze(ee,k,w.polylines,v,e.url,J)}let z=kze;l(N.classificationType)&&(z=Uze),e._polylines=z({positions:Y,widths:B,counts:k,batchIds:w.polylines,minimumHeight:y,maximumHeight:Z,center:I,rectangle:A,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:v,classificationType:N.classificationType,keepDecodedPositions:N.vectorKeepDecodedPositions})}if(G>0){let k=new Uint16Array(t,n,G*3);n+=f,e._points=new o2({positions:k,batchIds:w.points,minimumHeight:y,maximumHeight:Z,rectangle:A,batchTable:v})}}function CH(e){let t=e.featuresLength;if(!l(e._features)&&t>0){let n=new Array(t);l(e._polygons)&&e._polygons.createFeatures(e,n),l(e._polylines)&&e._polylines.createFeatures(e,n),l(e._points)&&e._points.createFeatures(e,n),e._features=n}}Jm.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)};Jm.prototype.getFeature=function(e){return l(this._features)||CH(this),this._features[e]};Jm.prototype.applyDebugSettings=function(e,t){l(this._polygons)&&this._polygons.applyDebugSettings(e,t),l(this._polylines)&&this._polylines.applyDebugSettings(e,t),l(this._points)&&this._points.applyDebugSettings(e,t)};Jm.prototype.applyStyle=function(e){l(this._features)||CH(this),l(this._polygons)&&this._polygons.applyStyle(e,this._features),l(this._polylines)&&this._polylines.applyStyle(e,this._features),l(this._points)&&this._points.applyStyle(e,this._features)};Jm.prototype.update=function(e,t){let n=!0;l(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),l(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),l(this._points)&&(this._points.update(t),n=n&&this._points.ready),l(this._batchTable)&&n&&(l(this._features)||CH(this),this._batchTable.update(e,t),this._ready=!0)};Jm.prototype.pick=function(e,t,n){};Jm.prototype.getPolylinePositions=function(e){let t=this._polylines;if(l(t))return t.getPositions(e)};Jm.prototype.isDestroyed=function(){return!1};Jm.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),me(this)};function Bze(e,t,n,i,o,r){let s=t.length,a=0;for(let c=0;c<s;c++){let d=t[c]*3,u=e.slice(a,a+d);a+=d,r(u,n[c],o,i)}}var h2=Jm;var _ce={b3dm:function(e,t,n,i,o){return df.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return df.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return df.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,i,o){return gX.fromTileType(e,t,n,i,o,_ce)},externalTileset:function(e,t,n,i){return OW.fromJson(e,t,n,i)},geom:function(e,t,n,i,o){return new _X(e,t,n,i,o)},vctr:function(e,t,n,i,o){return new h2(e,t,n,i,o)},subt:function(e,t,n,i,o){return TC.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return TC.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new ue(\"Invalid glb content\");let a=new DataView(i,o).getUint32(8,!0),c=new Uint8Array(i,o,a);return df.fromGltf(e,t,n,c)},gltf:function(e,t,n,i){return df.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return df.fromGeoJson(e,t,n,i)}},g_=_ce;var Kvn=T(S(),1),Yze={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},Fo=Object.freeze(Yze);var Qvn=T(S(),1),Qm={BATCHED_3D_MODEL:\"b3dm\",INSTANCED_3D_MODEL:\"i3dm\",COMPOSITE:\"cmpt\",POINT_CLOUD:\"pnts\",VECTOR:\"vctr\",GEOMETRY:\"geom\",GLTF:\"gltf\",GLTF_BINARY:\"glb\",IMPLICIT_SUBTREE:\"subt\",IMPLICIT_SUBTREE_JSON:\"subtreeJson\",EXTERNAL_TILESET:\"externalTileset\",MULTIPLE_CONTENT:\"multipleContent\",GEOJSON:\"geoJson\",VOXEL_BINARY:\"voxl\",VOXEL_JSON:\"voxelJson\"};Qm.isBinaryFormat=function(e){switch(e){case Qm.BATCHED_3D_MODEL:case Qm.INSTANCED_3D_MODEL:case Qm.COMPOSITE:case Qm.POINT_CLOUD:case Qm.VECTOR:case Qm.GEOMETRY:case Qm.IMPLICIT_SUBTREE:case Qm.VOXEL_BINARY:case Qm.GLTF_BINARY:return!0;default:return!1}};var gs=Object.freeze(Qm);var qvn=T(S(),1),Oze={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},Ru=Object.freeze(Oze);var ewn=T(S(),1),Ns={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},l0=new Array(Ns.NUMBER_OF_PASSES);l0[Ns.RENDER]=Object.freeze({pass:Ns.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1});l0[Ns.PICK]=Object.freeze({pass:Ns.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});l0[Ns.SHADOW]=Object.freeze({pass:Ns.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1});l0[Ns.PRELOAD]=Object.freeze({pass:Ns.PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.PRELOAD_FLIGHT]=Object.freeze({pass:Ns.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:Ns.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.MOST_DETAILED_PRELOAD]=Object.freeze({pass:Ns.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.MOST_DETAILED_PICK]=Object.freeze({pass:Ns.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});Ns.getPassOptions=function(e){return l0[e]};var Io=Object.freeze(Ns);var iwn=T(S(),1);function pf(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(pf.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){}}});pf.prototype.hasProperty=function(e,t){return!1};pf.prototype.getFeature=function(e){};pf.prototype.applyDebugSettings=function(e,t){};pf.prototype.applyStyle=function(e){};pf.prototype.update=function(e,t){};pf.prototype.pick=function(e,t,n){};pf.prototype.isDestroyed=function(){return!1};pf.prototype.destroy=function(){return me(this)};var KC=pf;var fwn=T(S(),1);var awn=T(S(),1);function d0(e){e=g(e,g.EMPTY_OBJECT);let t=e.content,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(d0.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});d0.prototype.hasProperty=function(e){return Mn.hasProperty(e,this._properties,this._class)};d0.prototype.hasPropertyBySemantic=function(e){return Mn.hasPropertyBySemantic(e,this._properties,this._class)};d0.prototype.getPropertyIds=function(e){return Mn.getPropertyIds(this._properties,this._class,e)};d0.prototype.getProperty=function(e){return Mn.getProperty(e,this._properties,this._class)};d0.prototype.setProperty=function(e,t){return Mn.setProperty(e,t,this._properties,this._class)};d0.prototype.getPropertyBySemantic=function(e){return Mn.getPropertyBySemantic(e,this._properties,this._class)};d0.prototype.setPropertyBySemantic=function(e,t){return Mn.setPropertyBySemantic(e,t,this._properties,this._class)};var f2=d0;function VH(e,t){let n=oi(t,\"3DTILES_metadata\")?t.extensions[\"3DTILES_metadata\"]:t.metadata;if(!l(n))return;if(!l(e.schema)){VH._oneTimeWarning(\"findContentMetadata-missing-root-schema\",\"Could not find"
}