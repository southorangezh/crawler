{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 79,
    "total_chunks": 194,
    "chunk_size": 29229,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.693Z"
  },
  "content": "global property: INSTANCES_LENGTH must be defined\");this._instancesLength=a;let c=s.getGlobalProperty(\"RTC_CENTER\",Q.FLOAT,3);l(c)&&(this._transform=M.fromTranslation(h.fromArray(c))),this._batchTable={json:i,binary:o};let d={upAxis:this._upAxis,forwardAxis:this._forwardAxis,releaseGltfJson:this._releaseGltfJson,incrementallyLoadTextures:this._incrementallyLoadTextures,loadAttributesAsTypedArray:this._loadAttributesAsTypedArray,enablePick:this._enablePick,loadIndicesForWireframe:this._loadIndicesForWireframe,loadPrimitiveOutline:this._loadPrimitiveOutline};if(r===0){let m=Zl(e.gltf);m=m.replace(/[\\s\\0]+$/,\"\");let p=this._baseResource.getDerivedResource({url:m});d.gltfResource=p,d.baseResource=p}else d.gltfResource=this._i3dmResource,d.typedArray=e.gltf;let u=new Hp(d);return this._gltfLoader=u,this._state=qp.LOADING,this._promise=u.load().then(()=>{if(!this.isDestroyed())return this._state=qp.PROCESSING,this}).catch(m=>{if(!this.isDestroyed())throw mke(this,m)}),this._promise};function mke(e,t){return e.unload(),e._state=qp.FAILED,e.getError(\"Failed to load i3dm\",t)}$p.prototype.process=function(e){if(this._state===qp.READY)return!0;let t=this._gltfLoader,n=!1;if(this._state===qp.PROCESSING&&(n=t.process(e)),!n)return!1;let i=t.components;return i.transform=M.multiplyTransformation(this._transform,i.transform,i.transform),pke(this,i,e),hke(this,i),this._components=i,this._arrayBuffer=void 0,this._state=qp.READY,!0};function hke(e,t){let n=e._batchTable,i=e._instancesLength;if(i===0)return;let o;if(l(n.json))o=jp({count:i,batchTable:n.json,binaryBody:n.binary});else{let r=new zc({name:wm.BATCH_TABLE_CLASS_NAME,count:i});o=new Xa({schema:{},propertyTables:[r]})}t.structuralMetadata=o}var lN=new h,wz=new Array(4),fke=new M;function pke(e,t,n){let i,o=e._featureTable,r=e._instancesLength;if(r===0)return;let s=o.getGlobalProperty(\"RTC_CENTER\",Q.FLOAT,3),a=o.getGlobalProperty(\"EAST_NORTH_UP\"),c=o.hasProperty(\"NORMAL_UP\")||o.hasProperty(\"NORMAL_UP_OCT32P\")||a,d=o.hasProperty(\"SCALE\")||o.hasProperty(\"SCALE_NON_UNIFORM\"),u=yke(o,r),m;c&&(m=new Float32Array(4*r));let p;d&&(p=new Float32Array(3*r));let b=new Float32Array(r),f=h.unpackArray(u),x=new h,_=new h,C=new h,V=new h,L=new $,R=new Fe,G=new Array(4),X=new h,v=new Array(3),W=new M;if(!l(s)||h.equals(h.unpack(s),h.ZERO)){let U=ce.fromPoints(f);for(i=0;i<f.length;i++)h.subtract(f[i],U.center,lN),u[3*i+0]=lN.x,u[3*i+1]=lN.y,u[3*i+2]=lN.z;let Y=M.fromTranslation(U.center,fke);t.transform=M.multiplyTransformation(Y,t.transform,t.transform)}for(i=0;i<r;i++){x=h.clone(f[i]),l(s)&&h.add(x,h.unpack(s),x),c&&(gke(o,a,i,R,x,C,_,V,L,W),Fe.pack(R,G,0),m[4*i+0]=G[0],m[4*i+1]=G[1],m[4*i+2]=G[2],m[4*i+3]=G[3]),d&&(xke(o,i,X),h.pack(X,v,0),p[3*i+0]=v[0],p[3*i+1]=v[1],p[3*i+2]=v[2]);let U=o.getProperty(\"BATCH_ID\",Q.UNSIGNED_SHORT,1,i);l(U)||(U=i),b[i]=U}let F=new wre;F.transformInWorldSpace=!0;let A=e._buffers,y=new cN;if(y.name=\"Instance Translation\",y.semantic=zr.TRANSLATION,y.componentDatatype=Q.FLOAT,y.type=tn.VEC3,y.count=r,y.typedArray=u,!c){let U=pt.createVertexBuffer({context:n.context,typedArray:u,usage:Me.STATIC_DRAW});U.vertexArrayDestroyable=!1,A.push(U),y.buffer=U}if(F.attributes.push(y),c){let U=new cN;U.name=\"Instance Rotation\",U.semantic=zr.ROTATION,U.componentDatatype=Q.FLOAT,U.type=tn.VEC4,U.count=r,U.typedArray=m,F.attributes.push(U)}if(d){let U=new cN;if(U.name=\"Instance Scale\",U.semantic=zr.SCALE,U.componentDatatype=Q.FLOAT,U.type=tn.VEC3,U.count=r,c)U.typedArray=p;else{let Y=pt.createVertexBuffer({context:n.context,typedArray:p,usage:Me.STATIC_DRAW});Y.vertexArrayDestroyable=!1,A.push(Y),U.buffer=Y}F.attributes.push(U)}let Z=new cN;Z.name=\"Instance Feature ID\",Z.setIndex=0,Z.semantic=zr.FEATURE_ID,Z.componentDatatype=Q.FLOAT,Z.type=tn.SCALAR,Z.count=r;let E=pt.createVertexBuffer({context:n.context,typedArray:b,usage:Me.STATIC_DRAW});E.vertexArrayDestroyable=!1,A.push(E),Z.buffer=E,F.attributes.push(Z);let I=new uke;I.propertyTableId=0,I.setIndex=0,I.positionalLabel=\"instanceFeatureId_0\",F.featureIds.push(I);let w=t.nodes,k=w.length,B=!1;for(i=0;i<k;i++){let U=w[i];U.primitives.length>0&&(U.instances=B?bke(F):F,B=!0)}}function bke(e){let t=new wre;t.transformInWorldSpace=e.transformInWorldSpace;let n=e.attributes,i=n.length;for(let o=0;o<i;o++){let r=Oe(n[o],!1);t.attributes.push(r)}return t.featureIds=e.featureIds,t}function yke(e,t){if(e.hasProperty(\"POSITION\"))return e.getPropertyArray(\"POSITION\",Q.FLOAT,3);if(e.hasProperty(\"POSITION_QUANTIZED\")){let n=e.getPropertyArray(\"POSITION_QUANTIZED\",Q.UNSIGNED_SHORT,3),i=e.getGlobalProperty(\"QUANTIZED_VOLUME_OFFSET\",Q.FLOAT,3);if(!l(i))throw new ue(\"Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.\");let o=e.getGlobalProperty(\"QUANTIZED_VOLUME_SCALE\",Q.FLOAT,3);if(!l(o))throw new ue(\"Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.\");let r=new Float32Array(n.length);for(let s=0;s<n.length/3;s++)for(let a=0;a<3;a++){let c=3*s+a;r[c]=n[c]/65535*o[a]+i[a]}return r}else throw new ue(\"Either POSITION or POSITION_QUANTIZED must be defined for each instance.\")}var vre=new Array(4);function gke(e,t,n,i,o,r,s,a,c,d){let u=e.getProperty(\"NORMAL_UP\",Q.FLOAT,3,n,wz),m=e.getProperty(\"NORMAL_RIGHT\",Q.FLOAT,3,n,vre),p=!1;if(l(u)){if(!l(m))throw new ue(\"To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.\");h.unpack(u,0,r),h.unpack(m,0,s),p=!0}else{let b=e.getProperty(\"NORMAL_UP_OCT32P\",Q.UNSIGNED_SHORT,2,n,wz),f=e.getProperty(\"NORMAL_RIGHT_OCT32P\",Q.UNSIGNED_SHORT,2,n,vre);if(l(b)){if(!l(f))throw new ue(\"To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.\");wn.octDecodeInRange(b[0],b[1],65535,r),wn.octDecodeInRange(f[0],f[1],65535,s),p=!0}else t?(Wt.eastNorthUpToFixedFrame(o,oe.WGS84,d),M.getMatrix3(d,c)):$.clone($.IDENTITY,c)}p&&(h.cross(s,r,a),h.normalize(a,a),$.setColumn(c,0,s,c),$.setColumn(c,1,r,c),$.setColumn(c,2,a,c)),Fe.fromRotationMatrix(c,i)}function xke(e,t,n){n=h.fromElements(1,1,1,n);let i=e.getProperty(\"SCALE\",Q.FLOAT,1,t);l(i)&&h.multiplyByScalar(n,i,n);let o=e.getProperty(\"SCALE_NON_UNIFORM\",Q.FLOAT,3,t,wz);l(o)&&(n.x*=o[0],n.y*=o[1],n.z*=o[2])}function _ke(e){let t=e._buffers,n=t.length;for(let i=0;i<n;i++){let o=t[i];o.isDestroyed()||o.destroy()}t.length=0}$p.prototype.isUnloaded=function(){return this._state===qp.UNLOADED};$p.prototype.unload=function(){l(this._gltfLoader)&&!this._gltfLoader.isDestroyed()&&this._gltfLoader.unload(),_ke(this),this._components=void 0,this._arrayBuffer=void 0,this._state=qp.UNLOADED};var aI=$p;var Rgn=T(S(),1);var ygn=T(S(),1);var lyn=T(S(),1),Tke={STOPPED:0,ANIMATING:1},Dm=Object.freeze(Tke);var cgn=T(S(),1);var xyn=T(S(),1);var byn=T(S(),1);function ZC(){this.times=void 0,this.points=void 0,fe.throwInstantiationError()}ZC.getPointType=function(e){if(typeof e==\"number\")return Number;if(e instanceof h)return h;if(e instanceof Fe)return Fe};ZC.prototype.evaluate=fe.throwInstantiationError;ZC.prototype.findTimeInterval=function(e,t){let n=this.times,i=n.length;if(t=g(t,0),e>=n[t]){if(t+1<i&&e<n[t+1])return t;if(t+2<i&&e<n[t+2])return t+1}else if(t-1>=0&&e>=n[t-1])return t-1;let o;if(e>n[t])for(o=t;o<i-1&&!(e>=n[o]&&e<n[o+1]);++o);else for(o=t-1;o>=0&&!(e>=n[o]&&e<n[o+1]);--o);return o===i-1&&(o=i-2),o};ZC.prototype.wrapTime=function(e){let t=this.times,n=t[t.length-1],i=t[0],o=n-i,r;return e<i&&(r=Math.floor((i-e)/o)+1,e+=r*o),e>n&&(r=Math.floor((e-n)/o)+1,e-=r*o),e};ZC.prototype.clampTime=function(e){let t=this.times;return P.clamp(e,t[0],t[t.length-1])};var oo=ZC;function RC(e){this._value=e,this._valueType=oo.getPointType(e)}Object.defineProperties(RC.prototype,{value:{get:function(){return this._value}}});RC.prototype.findTimeInterval=function(e){};RC.prototype.wrapTime=function(e){return 0};RC.prototype.clampTime=function(e){return 0};RC.prototype.evaluate=function(e,t){let n=this._value,i=this._valueType;return i===Number?n:i.clone(n,t)};var cI=RC;var Myn=T(S(),1);var Lyn=T(S(),1);function GC(e){e=g(e,g.EMPTY_OBJECT);let t=e.points,n=e.times;this._times=n,this._points=t,this._pointType=oo.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(GC.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});GC.prototype.findTimeInterval=oo.prototype.findTimeInterval;GC.prototype.wrapTime=oo.prototype.wrapTime;GC.prototype.clampTime=oo.prototype.clampTime;GC.prototype.evaluate=function(e,t){let n=this.points,i=this.times,o=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),r=(e-i[o])/(i[o+1]-i[o]);return this._pointType===Number?(1-r)*n[o]+r*n[o+1]:(l(t)||(t=new h),h.lerp(n[o],n[o+1],r,t))};var cy=GC;var Gyn=T(S(),1);var Fre={};Fre.solve=function(e,t,n,i){let o=new Array(n.length),r=new Array(i.length),s=new Array(i.length),a;for(a=0;a<r.length;a++)r[a]=new h,s[a]=new h;o[0]=n[0]/t[0],r[0]=h.multiplyByScalar(i[0],1/t[0],r[0]);let c;for(a=1;a<o.length;++a)c=1/(t[a]-o[a-1]*e[a-1]),o[a]=n[a]*c,r[a]=h.subtract(i[a],h.multiplyByScalar(r[a-1],e[a-1],r[a]),r[a]),r[a]=h.multiplyByScalar(r[a],c,r[a]);for(c=1/(t[a]-o[a-1]*e[a-1]),r[a]=h.subtract(i[a],h.multiplyByScalar(r[a-1],e[a-1],r[a]),r[a]),r[a]=h.multiplyByScalar(r[a],c,r[a]),s[s.length-1]=r[r.length-1],a=s.length-2;a>=0;--a)s[a]=h.subtract(r[a],h.multiplyByScalar(s[a+1],o[a],s[a]),s[a]);return s};var EC=Fre;var Are=[],Mre=[],Nre=[],kre=[];function Ske(e,t,n){let i=Are,o=Nre,r=Mre,s=kre;i.length=o.length=e.length-1,r.length=s.length=e.length;let a;i[0]=r[0]=1,o[0]=0;let c=s[0];for(l(c)||(c=s[0]=new h),h.clone(t,c),a=1;a<i.length-1;++a)i[a]=o[a]=1,r[a]=4,c=s[a],l(c)||(c=s[a]=new h),h.subtract(e[a+1],e[a-1],c),h.multiplyByScalar(c,3,c);return i[a]=0,o[a]=1,r[a]=4,c=s[a],l(c)||(c=s[a]=new h),h.subtract(e[a+1],e[a-1],c),h.multiplyByScalar(c,3,c),r[a+1]=1,c=s[a+1],l(c)||(c=s[a+1]=new h),h.clone(n,c),EC.solve(i,r,o,s)}function Cke(e){let t=Are,n=Nre,i=Mre,o=kre;t.length=n.length=e.length-1,i.length=o.length=e.length;let r;t[0]=n[0]=1,i[0]=2;let s=o[0];for(l(s)||(s=o[0]=new h),h.subtract(e[1],e[0],s),h.multiplyByScalar(s,3,s),r=1;r<t.length;++r)t[r]=n[r]=1,i[r]=4,s=o[r],l(s)||(s=o[r]=new h),h.subtract(e[r+1],e[r-1],s),h.multiplyByScalar(s,3,s);return i[r]=2,s=o[r],l(s)||(s=o[r]=new h),h.subtract(e[r],e[r-1],s),h.multiplyByScalar(s,3,s),EC.solve(t,i,n,o)}function vl(e){e=g(e,g.EMPTY_OBJECT);let t=e.points,n=e.times,i=e.inTangents,o=e.outTangents;this._times=n,this._points=t,this._pointType=oo.getPointType(t[0]),this._inTangents=i,this._outTangents=o,this._lastTimeIndex=0}Object.defineProperties(vl.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},inTangents:{get:function(){return this._inTangents}},outTangents:{get:function(){return this._outTangents}}});vl.createC1=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.times,n=e.points,i=e.tangents,o=i.slice(0,i.length-1),r=i.slice(1,i.length);return new vl({times:t,points:n,inTangents:r,outTangents:o})};vl.createNaturalCubic=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.times,n=e.points;if(n.length<3)return new cy({points:n,times:t});let i=Cke(n),o=i.slice(0,i.length-1),r=i.slice(1,i.length);return new vl({times:t,points:n,inTangents:r,outTangents:o})};vl.createClampedCubic=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.times,n=e.points,i=e.firstTangent,o=e.lastTangent,r=oo.getPointType(n[0]);if(n.length<3)return new cy({points:n,times:t});let s=Ske(n,i,o),a=s.slice(0,s.length-1),c=s.slice(1,s.length);return new vl({times:t,points:n,inTangents:c,outTangents:a})};vl.hermiteCoefficientMatrix=new M(2,-3,0,1,-2,3,0,0,1,-2,1,0,1,-1,0,0);vl.prototype.findTimeInterval=oo.prototype.findTimeInterval;var Vke=new se,XC=new h;vl.prototype.wrapTime=oo.prototype.wrapTime;vl.prototype.clampTime=oo.prototype.clampTime;vl.prototype.evaluate=function(e,t){let n=this.points,i=this.times,o=this.inTangents,r=this.outTangents;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);let s=this._lastTimeIndex,a=i[s+1]-i[s],c=(e-i[s])/a,d=Vke;d.z=c,d.y=c*c,d.x=d.y*c,d.w=1;let u=M.multiplyByVector(vl.hermiteCoefficientMatrix,d,d);u.z*=a,u.w*=a;let m=this._pointType;return m===Number?n[s]*u.x+n[s+1]*u.y+r[s]*u.z+o[s]*u.w:(l(t)||(t=new m),t=m.multiplyByScalar(n[s],u.x,t),m.multiplyByScalar(n[s+1],u.y,XC),m.add(t,XC,t),m.multiplyByScalar(r[s],u.z,XC),m.add(t,XC,t),m.multiplyByScalar(o[s],u.w,XC),m.add(t,XC,t))};var ly=vl;var Byn=T(S(),1);function IC(e){e=g(e,g.EMPTY_OBJECT);let t=e.points,n=e.times;this._times=n,this._points=t,this._pointType=oo.getPointType(t[0]),this._lastTimeIndex=0}Object.defineProperties(IC.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});IC.prototype.findTimeInterval=oo.prototype.findTimeInterval;IC.prototype.wrapTime=oo.prototype.wrapTime;IC.prototype.clampTime=oo.prototype.clampTime;IC.prototype.evaluate=function(e,t){let n=this.points;this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex);let i=this._lastTimeIndex,o=this._pointType;return o===Number?n[i]:(l(t)||(t=new o),o.clone(n[i],t))};var lI=IC;var Jyn=T(S(),1);function Lke(e){let t=e.points,n=e.times;return function(i,o){l(o)||(o=new Fe);let r=e._lastTimeIndex=e.findTimeInterval(i,e._lastTimeIndex),s=(i-n[r])/(n[r+1]-n[r]),a=t[r],c=t[r+1];return Fe.fastSlerp(a,c,s,o)}}function WC(e){e=g(e,g.EMPTY_OBJECT);let t=e.points,n=e.times;this._times=n,this._points=t,this._evaluateFunction=Lke(this),this._lastTimeIndex=0}Object.defineProperties(WC.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}}});WC.prototype.findTimeInterval=oo.prototype.findTimeInterval;WC.prototype.wrapTime=oo.prototype.wrapTime;WC.prototype.clampTime=oo.prototype.clampTime;WC.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};var dI=WC;var PC=Nt.AnimatedPropertyType;function Fz(e){e=g(e,g.EMPTY_OBJECT);let t=e.channel,n=e.runtimeAnimation,i=e.runtimeNode;this._channel=t,this._runtimeAnimation=n,this._runtimeNode=i,this._splines=[],this._path=void 0,Xke(this)}Object.defineProperties(Fz.prototype,{channel:{get:function(){return this._channel}},runtimeAnimation:{get:function(){return this._runtimeAnimation}},runtimeNode:{get:function(){return this._runtimeNode}},splines:{get:function(){return this._splines}}});function Zke(e,t){let n=[],i=[],o=[],r=t.length;for(let s=0;s<r;s+=3)i.push(t[s]),n.push(t[s+1]),o.push(t[s+2]);return i.splice(0,1),o.length=o.length-1,new ly({times:e,points:n,inTangents:i,outTangents:o})}function Ure(e,t,n,i){if(e.length===1&&t.length===1)return new cI(t[0]);switch(n){case Nm.STEP:return new lI({times:e,points:t});case Nm.CUBICSPLINE:return Zke(e,t);case Nm.LINEAR:return i===PC.ROTATION?new dI({times:e,points:t}):new cy({times:e,points:t})}}function Rke(e,t,n,i,o){let r=[];if(i===PC.WEIGHTS){let a=t.length/o,c,d;for(c=0;c<o;c++){let u=new Array(a),m=c;if(n===Nm.CUBICSPLINE)for(d=0;d<a;d+=3)u[d]=t[m],u[d+1]=t[m+o],u[d+2]=t[m+2*o],m+=o*3;else for(d=0;d<a;d++)u[d]=t[m],m+=o;r.push(Ure(e,u,n,i))}}else r.push(Ure(e,t,n,i));return r}var Gke=new h,Eke=new Fe;function Xke(e){let t=e._channel,n=t.sampler,i=n.input,o=n.output,r=n.interpolation,a=t.target.path,c=e._runtimeNode,d=l(c.morphWeights)?c.morphWeights.length:1,u=Rke(i,o,r,a,d);e._splines=u,e._path=a}Fz.prototype.animate=function(e){let t=this._splines,n=this._path,i=this._runtimeAnimation.model,o=this._runtimeNode;if(n===PC.WEIGHTS){let r=o.morphWeights,s=r.length;for(let a=0;a<s;a++){let c=t[a],d=i.clampAnimations?c.clampTime(e):c.wrapTime(e);r[a]=c.evaluate(d)}}else{if(o.userAnimated)return;{let r=t[0],s=i.clampAnimations?r.clampTime(e):r.wrapTime(e);n===PC.TRANSLATION||n===PC.SCALE?o[n]=r.evaluate(s,Gke):n===PC.ROTATION&&(o[n]=r.evaluate(s,Eke))}}};var uI=Fz;function Az(e,t,n){this._animation=t,this._name=t.name,this._runtimeChannels=void 0,this._startTime=te.clone(n.startTime),this._delay=g(n.delay,0),this._stopTime=te.clone(n.stopTime),this.removeOnStop=g(n.removeOnStop,!1),this._multiplier=g(n.multiplier,1),this._reverse=g(n.reverse,!1),this._loop=g(n.loop,Pl.NONE),this._animationTime=n.animationTime,this._prevAnimationDelta=void 0,this.start=new ge,this.update=new ge,this.stop=new ge,this._state=Dm.STOPPED,this._computedStartTime=void 0,this._duration=void 0;let i=this;this._raiseStartEvent=function(){i.start.raiseEvent(e,i)},this._updateEventTime=0,this._raiseUpdateEvent=function(){i.update.raiseEvent(e,i,i._updateEventTime)},this._raiseStopEvent=function(){i.stop.raiseEvent(e,i)},this._model=e,this._localStartTime=void 0,this._localStopTime=void 0,Ike(this)}Object.defineProperties(Az.prototype,{animation:{get:function(){return this._animation}},name:{get:function(){return this._name}},runtimeChannels:{get:function(){return this._runtimeChannels}},model:{get:function(){return this._model}},localStartTime:{get:function(){return this._localStartTime}},localStopTime:{get:function(){return this._localStopTime}},startTime:{get:function(){return this._startTime}},delay:{get:function(){return this._delay}},stopTime:{get:function(){return this._stopTime}},multiplier:{get:function(){return this._multiplier}},reverse:{get:function(){return this._reverse}},loop:{get:function(){return this._loop}},animationTime:{get:function(){return this._animationTime}}});function Ike(e){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE,i=e._model.sceneGraph,r=e._animation.channels,s=r.length,a=[];for(let c=0;c<s;c++){let d=r[c],u=d.target;if(!l(u))continue;let m=u.node.index,p=i._runtimeNodes[m],b=new uI({channel:d,runtimeAnimation:e,runtimeNode:p}),f=d.sampler.input;t=Math.min(t,f[0]),n=Math.max(n,f[f.length-1]),a.push(b)}e._runtimeChannels=a,e._localStartTime=t,e._localStopTime=n}Az.prototype.animate=function(e){let t=this._runtimeChannels,n=t.length;for(let i=0;i<n;i++)t[i].animate(e)};var mI=Az;function e0(e){this.animationAdded=new ge,this.animationRemoved=new ge,this.animateWhilePaused=!1,this._model=e,this._runtimeAnimations=[],this._previousTime=void 0}Object.defineProperties(e0.prototype,{length:{get:function(){return this._runtimeAnimations.length}},model:{get:function(){return this._model}}});function Mz(e,t,n){let i=e._model,o=new mI(i,t,n);return e._runtimeAnimations.push(o),e.animationAdded.raiseEvent(i,o),o}e0.prototype.add=function(e){e=g(e,g.EMPTY_OBJECT);let n=this._model.sceneGraph.components.animations,i=e.index;if(l(i))return Mz(this,n[i],e);let o=n.length;for(let r=0;r<o;++r)if(n[r].name===e.name){i=r;break}return Mz(this,n[i],e)};e0.prototype.addAll=function(e){e=g(e,g.EMPTY_OBJECT);let n=this._model.sceneGraph.components.animations,i=[],o=n.length;for(let r=0;r<o;++r){let s=Mz(this,n[r],e);i.push(s)}return i};e0.prototype.remove=function(e){if(!l(e))return!1;let t=this._runtimeAnimations,n=t.indexOf(e);return n!==-1?(t.splice(n,1),this.animationRemoved.raiseEvent(this._model,e),!0):!1};e0.prototype.removeAll=function(){let e=this._model,t=this._runtimeAnimations,n=t.length;this._runtimeAnimations.length=0;for(let i=0;i<n;++i)this.animationRemoved.raiseEvent(e,t[i])};e0.prototype.contains=function(e){return l(e)?this._runtimeAnimations.indexOf(e)!==-1:!1};e0.prototype.get=function(e){return this._runtimeAnimations[e]};var dN=[];function Wke(e,t,n){return function(){e.animationRemoved.raiseEvent(t,n)}}e0.prototype.update=function(e){let t=this._runtimeAnimations,n=t.length;if(n===0)return this._previousTime=void 0,!1;if(!this.animateWhilePaused&&te.equals(e.time,this._previousTime))return!1;this._previousTime=te.clone(e.time,this._previousTime);let i=!1,o=e.time,r=this._model;for(let s=0;s<n;++s){let a=t[s];l(a._computedStartTime)||(a._computedStartTime=te.addSeconds(g(a.startTime,o),a.delay,new te)),l(a._duration)||(a._duration=a.localStopTime*(1/a.multiplier));let c=a._computedStartTime,d=a._duration,u=a.stopTime,m=te.lessThanOrEquals(c,o),p=l(u)&&te.greaterThan(o,u),b=0;if(d!==0){let _=te.secondsDifference(p?u:o,c);b=l(a._animationTime)?a._animationTime(d,_):_/d}let f=a.loop===Pl.REPEAT||a.loop===Pl.MIRRORED_REPEAT,x=(m||f&&!l(a.startTime))&&(b<=1||f)&&!p;if(b===a._prevAnimationDelta){let _=a._state===Dm.STOPPED;if(x!==_)continue}if(a._prevAnimationDelta=b,x||a._state===Dm.ANIMATING){if(x&&a._state===Dm.STOPPED&&(a._state=Dm.ANIMATING,a.start.numberOfListeners>0&&e.afterRender.push(a._raiseStartEvent)),a.loop===Pl.REPEAT)b=b-Math.floor(b);else if(a.loop===Pl.MIRRORED_REPEAT){let C=Math.floor(b),V=b-C;b=C%2===1?1-V:V}a.reverse&&(b=1-b);let _=b*d*a.multiplier;_=P.clamp(_,a.localStartTime,a.localStopTime),a.animate(_),a.update.numberOfListeners>0&&(a._updateEventTime=_,e.afterRender.push(a._raiseUpdateEvent)),i=!0,x||(a._state=Dm.STOPPED,a.stop.numberOfListeners>0&&e.afterRender.push(a._raiseStopEvent),a.removeOnStop&&dN.push(a))}}n=dN.length;for(let s=0;s<n;++s){let a=dN[s];t.splice(t.indexOf(a),1),e.afterRender.push(Wke(this,r,a))}return dN.length=0,i};var hI=e0;var zgn=T(S(),1);var Ign=T(S(),1);function l_(e){this._model=e.model,this._featureTable=e.featureTable,this._featureId=e.featureId,this._color=void 0}Object.defineProperties(l_.prototype,{show:{get:function(){return this._featureTable.getShow(this._featureId)},set:function(e){this._featureTable.setShow(this._featureId,e)}},color:{get:function(){return l(this._color)||(this._color=new O),this._featureTable.getColor(this._featureId,this._color)},set:function(e){this._featureTable.setColor(this._featureId,e)}},primitive:{get:function(){return this._model}},featureTable:{get:function(){return this._featureTable}},featureId:{get:function(){return this._featureId}}});l_.prototype.hasProperty=function(e){return this._featureTable.hasProperty(this._featureId,e)};l_.prototype.getProperty=function(e){return this._featureTable.getProperty(this._featureId,e)};l_.prototype.getPropertyInherited=function(e){return this._featureTable.hasPropertyBySemantic(this._featureId,e)?this._featureTable.getPropertyBySemantic(this._featureId,e):this._featureTable.getProperty(this._featureId,e)};l_.prototype.getPropertyIds=function(e){return this._featureTable.getPropertyIds(e)};l_.prototype.setProperty=function(e,t){return this._featureTable.setProperty(this._featureId,e,t)};var fI=l_;var Pgn=T(S(),1),pI={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2};pI.getStyleCommandsNeeded=function(e,t){return t===0?pI.ALL_OPAQUE:t===e?pI.ALL_TRANSLUCENT:pI.OPAQUE_AND_TRANSLUCENT};var Bm=Object.freeze(pI);var wgn=T(S(),1);var dy={GLTF:\"GLTF\",TILE_GLTF:\"TILE_GLTF\",TILE_B3DM:\"B3DM\",TILE_I3DM:\"I3DM\",TILE_PNTS:\"PNTS\",TILE_GEOJSON:\"TILE_GEOJSON\"};dy.is3DTiles=function(e){switch(e){case dy.TILE_GLTF:case dy.TILE_B3DM:case dy.TILE_I3DM:case dy.TILE_PNTS:case dy.TILE_GEOJSON:return!0;case dy.GLTF:return!1}};var rr=Object.freeze(dy);function Rr(e){let t=e.model,n=e.propertyTable;this._propertyTable=n,this._model=t,this._features=void 0,this._featuresLength=0,this._batchTexture=void 0,this._styleCommandsNeededDirty=!1,this._styleCommandsNeeded=Bm.ALL_OPAQUE,Pke(this)}Object.defineProperties(Rr.prototype,{batchTexture:{get:function(){return this._batchTexture}},featuresLength:{get:function(){return this._featuresLength}},batchTextureByteLength:{get:function(){return l(this._batchTexture)?this._batchTexture.byteLength:0}},styleCommandsNeededDirty:{get:function(){return this._styleCommandsNeededDirty}}});function Pke(e){let t=e._model,n=rr.is3DTiles(t.type),i=e._propertyTable.count;if(i===0)return;let o,r=new Array(i);if(n){let s=t.content;for(o=0;o<i;o++)r[o]=new Fs(s,o)}else for(o=0;o<i;o++)r[o]=new fI({model:t,featureId:o,featureTable:e});e._features=r,e._featuresLength=i,e._batchTexture=new Yc({featuresLength:i,owner:e,statistics:n?t.content.tileset.statistics:void 0})}Rr.prototype.update=function(e){this._styleCommandsNeededDirty=!1,this._batchTexture.update(void 0,e);let t=Bm.getStyleCommandsNeeded(this._featuresLength,this._batchTexture.translucentFeaturesLength);this._styleCommandsNeeded!==t&&(this._styleCommandsNeededDirty=!0,this._styleCommandsNeeded=t)};Rr.prototype.setShow=function(e,t){this._batchTexture.setShow(e,t)};Rr.prototype.setAllShow=function(e){this._batchTexture.setAllShow(e)};Rr.prototype.getShow=function(e){return this._batchTexture.getShow(e)};Rr.prototype.setColor=function(e,t){this._batchTexture.setColor(e,t)};Rr.prototype.setAllColor=function(e){this._batchTexture.setAllColor(e)};Rr.prototype.getColor=function(e,t){return this._batchTexture.getColor(e,t)};Rr.prototype.getPickColor=function(e){return this._batchTexture.getPickColor(e)};Rr.prototype.getFeature=function(e){return this._features[e]};Rr.prototype.hasProperty=function(e,t){return this._propertyTable.hasProperty(e,t)};Rr.prototype.hasPropertyBySemantic=function(e,t){return this._propertyTable.hasPropertyBySemantic(e,t)};Rr.prototype.getProperty=function(e,t){return this._propertyTable.getProperty(e,t)};Rr.prototype.getPropertyBySemantic=function(e,t){return this._propertyTable.getPropertyBySemantic(e,t)};Rr.prototype.getPropertyIds=function(e){return this._propertyTable.getPropertyIds(e)};Rr.prototype.setProperty=function(e,t,n){return this._propertyTable.setProperty(e,t,n)};Rr.prototype.isClass=function(e,t){return this._propertyTable.isClass(e,t)};Rr.prototype.isExactClass=function(e,t){return this._propertyTable.isExactClass(e,t)};Rr.prototype.getExactClassName=function(e){return this._propertyTable.getExactClassName(e)};var vke=new O;Rr.prototype.applyStyle=function(e){if(!l(e)){this.setAllColor(Yc.DEFAULT_COLOR_VALUE),this.setAllShow(Yc.DEFAULT_SHOW_VALUE);return}for(let t=0;t<this._featuresLength;t++){let n=this.getFeature(t),i=l(e.color)?g(e.color.evaluateColor(n,vke),Yc.DEFAULT_COLOR_VALUE):Yc.DEFAULT_COLOR_VALUE,o=l(e.show)?g(e.show.evaluate(n),Yc.DEFAULT_SHOW_VALUE):Yc.DEFAULT_SHOW_VALUE;this.setColor(t,i),this.setShow(t,o)}};Rr.prototype.isDestroyed=function(){return!1};Rr.prototype.destroy=function(e){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),me(this)};var bI=Rr;var LRn=T(S(),1);var Hxn=T(S(),1);var Kgn=T(S(),1),yI=`czm_modelMaterial defaultModelMaterial() { czm_modelMaterial material; material.diffuse = vec3(0.0); material.specular = vec3(1.0); material.roughness = 1.0; material.occlusion = 1.0; material.normalEC = vec3(0.0, 0.0, 1.0); material.emissive = vec3(0.0); material.alpha = 1.0; return material; } vec4 handleAlpha(vec3 color, float alpha) { #ifdef ALPHA_MODE_MASK if (alpha < u_alphaCutoff) { discard; } #endif return vec4(color, alpha); } SelectedFeature selectedFeature; void main() { #ifdef HAS_MODEL_SPLITTER modelSplitterStage(); #endif czm_modelMaterial material = defaultModelMaterial(); ProcessedAttributes attributes; geometryStage(attributes); FeatureIds featureIds; featureIdStage(featureIds, attributes); Metadata metadata; MetadataClass metadataClass; MetadataStatistics metadataStatistics; metadataStage(metadata, metadataClass, metadataStatistics, attributes); #ifdef HAS_SELECTED_FEATURE_ID selectedFeatureIdStage(selectedFeature, featureIds); #endif #ifndef CUSTOM_SHADER_REPLACE_MATERIAL materialStage(material, attributes, selectedFeature); #endif #ifdef HAS_CUSTOM_FRAGMENT_SHADER customShaderStage(material, attributes, featureIds, metadata, metadataClass, metadataStatistics); #endif lightingStage(material, attributes); #ifdef HAS_SELECTED_FEATURE_ID cpuStylingStage(material, selectedFeature); #endif #ifdef HAS_MODEL_COLOR modelColorStage(material); #endif #ifdef HAS_PRIMITIVE_OUTLINE primitiveOutlineStage(material); #endif vec4 color = handleAlpha(material.diffuse, material.alpha); #ifdef HAS_CLIPPING_PLANES modelClippingPlanesStage(color); #endif #if defined(HAS_SILHOUETTE) && defined(HAS_NORMALS) silhouetteStage(color); #endif #ifdef HAS_ATMOSPHERE atmosphereStage(color, attributes); #endif out_FragColor = color; } `;var Qgn=T(S(),1),gI=`precision highp float; czm_modelVertexOutput defaultVertexOutput(vec3 positionMC) { czm_modelVertexOutput vsOutput; vsOutput.positionMC = positionMC; vsOutput.pointSize = 1.0; return vsOutput; } void main() { // Initialize the attributes struct with all // attributes except quantized ones. ProcessedAttributes attributes; initializeAttributes(attributes); // Dequantize the quantized ones and add them to the // attributes struct. #ifdef USE_DEQUANTIZATION dequantizationStage(attributes); #endif #ifdef HAS_MORPH_TARGETS morphTargetsStage(attributes); #endif #ifdef HAS_SKINNING skinningStage(attributes); #endif #ifdef HAS_PRIMITIVE_OUTLINE primitiveOutlineStage(); #endif // Compute the bitangent according to the formula in the glTF spec. // Normal and tangents can be affected by morphing and skinning, so // the bitangent should not be computed until their values are finalized. #ifdef HAS_BITANGENTS attributes.bitangentMC = normalize(cross(attributes.normalMC, attributes.tangentMC) * attributes.tangentSignMC); #endif FeatureIds featureIds; featureIdStage(featureIds, attributes); #ifdef HAS_SELECTED_FEATURE_ID SelectedFeature feature; selectedFeatureIdStage(feature, featureIds); // Handle any show properties that come from the style. cpuStylingStage(attributes.positionMC, feature); #endif #if defined(USE_2D_POSITIONS) || defined(USE_2D_INSTANCING) // The scene mode 2D pipeline stage and instancing stage add a different // model view matrix to accurately project the model to 2D. However, the //"
}