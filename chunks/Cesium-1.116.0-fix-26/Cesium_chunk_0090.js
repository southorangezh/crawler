{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 90,
    "total_chunks": 194,
    "chunk_size": 46565,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.698Z"
  },
  "content": "Uint8Array(m):Ae.createTypedArray(o,m),u.getBufferData(s)):s=t.typedArray}let a=e.primitiveType,c=NC.createWireframeIndices(a,o,s),d=Ae.fromSizeInBytes(c.BYTES_PER_ELEMENT);return pt.createIndexBuffer({context:n.context,typedArray:c,usage:Me.STATIC_DRAW,indexDatatype:d})}var ZW=Bse;function Yse(e){e=g(e,g.EMPTY_OBJECT);let t=e.primitive,n=e.node,i=e.model;this.primitive=t,this.node=n,this.model=i,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}Yse.prototype.configurePipeline=function(e){let t=this.pipelineStages;t.length=0;let n=this.primitive,i=this.node,o=this.model,r=o.customShader,s=o.style,a=e.context.webgl2,d=e.mode!==ie.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,u=e.verticalExaggeration!==1,m=l(n.morphTargets)&&n.morphTargets.length>0,p=l(i.skin),b=l(r),x=!(b&&l(r.fragmentShaderText))||r.mode!==n0.REPLACE_MATERIAL,_=qt.hasQuantizedAttributes(n.attributes),C=o.debugWireframe&&we.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||a),V=o.pointCloudShading,L=l(V)&&V.attenuation,R=l(V)&&V.backFaceCulling,G=n.primitiveType===we.POINTS&&(l(s)||L||R),X=o._enableShowOutline&&l(n.outlineCoordinates),v=b3e(o,i,n),W=l(o.classificationType);d&&t.push(TW),t.push(aW),C&&t.push(ZW),W&&t.push(OI),m&&t.push(hW),p&&t.push(CW),G&&t.push(bW),_&&t.push(iW),x&&t.push(uW),t.push(my),t.push(gu),v.hasPropertyTable&&(t.push(fy),t.push(YI),t.push(KI)),u&&t.push(LW),b&&t.push(tW),t.push(lW),o.allowPicking&&t.push(fW),X&&t.push(xW),t.push(BI),t.push(_W)};function b3e(e,t,n){let i;return l(t.instances)&&(i=qt.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),l(i))?{hasFeatureIds:!0,hasPropertyTable:l(i.propertyTableId)}:(i=qt.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),l(i)?{hasFeatureIds:!0,hasPropertyTable:l(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}var RW=Yse;var dZn=T(S(),1);function $z(e){e=g(e,g.EMPTY_OBJECT),this._sceneGraph=e.sceneGraph;let t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],y3e(this)}Object.defineProperties($z.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}});function y3e(e){let t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;let i=t.joints,o=i.length,r=e.sceneGraph._runtimeNodes,s=e.joints,a=e._jointMatrices;for(let c=0;c<o;c++){let d=i[c].index,u=r[d];s.push(u);let m=n[c],p=Ose(u,m,new M);a.push(p)}}function Ose(e,t,n){let i=M.multiplyTransformation(e.transformToRoot,e.transform,n);return n=M.multiplyTransformation(i,t,n),n}$z.prototype.updateJointMatrices=function(){let e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){let i=this.joints[n],o=this.inverseBindMatrices[n];e[n]=Ose(i,o,e[n])}};var GW=$z;var gZn=T(S(),1);var mZn=T(S(),1);function g3e(){this.pass=void 0,this.alphaCutoff=void 0}var EW=g3e;function x3e(e){this.shaderBuilder=new sx,this.model=e,this.uniformMap={},this.alphaOptions=new EW,this.renderStateOptions=Ne.getState(Ne.fromCache({depthTest:{enabled:!0,func:tc.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1}var XW=x3e;var EZn=T(S(),1);var _Zn=T(S(),1),IW=`void silhouetteStage(inout vec4 color) { if(model_silhouettePass) { color = czm_gammaCorrect(model_silhouetteColor); } }`;var SZn=T(S(),1),WW=`void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) { #ifdef HAS_NORMALS if(model_silhouettePass) { vec3 normal = normalize(czm_normal3D * attributes.normalMC); normal.x *= czm_projection[0][0]; normal.y *= czm_projection[1][1]; positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z; } #endif } `;var fN={name:\"ModelSilhouettePipelineStage\"};fN.silhouettesLength=0;fN.process=function(e,t,n){l(t._silhouetteId)||(t._silhouetteId=++fN.silhouettesLength);let i=e.shaderBuilder;i.addDefine(\"HAS_SILHOUETTE\",void 0,Ce.BOTH),i.addVertexLines(WW),i.addFragmentLines(IW),i.addUniform(\"vec4\",\"model_silhouetteColor\",Ce.FRAGMENT),i.addUniform(\"float\",\"model_silhouetteSize\",Ce.VERTEX),i.addUniform(\"bool\",\"model_silhouettePass\",Ce.BOTH);let o={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=Ct(o,e.uniformMap),e.hasSilhouette=!0};var PW=fN;var FZn=T(S(),1);var IZn=T(S(),1),vW=`void modelSplitterStage() { // Don't split when rendering the shadow map, because it is rendered from // the perspective of a totally different camera. #ifndef SHADOW_MAP if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard; if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard; #endif } `;var pN={name:\"ModelSplitterPipelineStage\",SPLIT_DIRECTION_UNIFORM_NAME:\"model_splitDirection\"};pN.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine(\"HAS_MODEL_SPLITTER\",void 0,Ce.FRAGMENT),i.addFragmentLines(vW);let o={};i.addUniform(\"float\",pN.SPLIT_DIRECTION_UNIFORM_NAME,Ce.FRAGMENT),o[pN.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=Ct(o,e.uniformMap)};var wW=pN;var NZn=T(S(),1);function _3e(e,t){this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=Oe(e.uniformMap),this.alphaOptions=Oe(e.alphaOptions),this.renderStateOptions=Oe(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0}var FW=_3e;var jZn=T(S(),1);var BZn=T(S(),1);function T3e(e){e=g(e,g.EMPTY_OBJECT),this.lightingModel=g(e.lightingModel,lf.UNLIT)}var AW=T3e;function S3e(e,t){this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=Oe(e.uniformMap),this.alphaOptions=Oe(e.alphaOptions),this.renderStateOptions=Oe(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;let n=t.primitive;this.count=l(n.indices)?n.indices.count:qt.getAttributeBySemantic(n,\"POSITION\").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;let i=qt.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=h.clone(i.min,new h),this.positionMax=h.clone(i.max,new h),this.boundingSphere=ce.fromCornerPoints(this.positionMin,this.positionMax,new ce),this.lightingOptions=new AW,this.pickId=void 0}var MW=S3e;function bd(e){e=g(e,g.EMPTY_OBJECT);let t=e.modelComponents;this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=M.clone(M.IDENTITY),this._computedModelMatrix2D=M.clone(M.IDENTITY),this._axisCorrectionMatrix=qt.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new M),this._runtimeArticulations={},C3e(this)}Object.defineProperties(bd.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});function C3e(e){let t=e._components,n=t.scene,o=e._model.modelMatrix;zse(e,o);let r=t.articulations,s=r.length,a=e._runtimeArticulations;for(let V=0;V<s;V++){let L=r[V],R=new XI({articulation:L,sceneGraph:e}),G=R.name;a[G]=R}let c=t.nodes,d=c.length;e._runtimeNodes=new Array(d);let m=n.nodes.length,p=M.IDENTITY;for(let V=0;V<m;V++){let L=n.nodes[V],R=Hse(e,L,p);e._rootNodes.push(R)}let b=t.skins,f=e._runtimeSkins,x=b.length;for(let V=0;V<x;V++){let L=b[V];f.push(new GW({skin:L,sceneGraph:e}))}let _=e._skinnedNodes,C=_.length;for(let V=0;V<C;V++){let L=_[V],R=e._runtimeNodes[L],X=c[L].skin.index;R._runtimeSkin=f[X],R.updateJointMatrices()}e.applyArticulations()}function zse(e,t){let n=e._components,i=e._model;e._computedModelMatrix=M.multiplyTransformation(t,n.transform,e._computedModelMatrix),e._computedModelMatrix=M.multiplyTransformation(e._computedModelMatrix,e._axisCorrectionMatrix,e._computedModelMatrix),e._computedModelMatrix=M.multiplyByUniformScale(e._computedModelMatrix,i.computedScale,e._computedModelMatrix)}var V3e=new h;function L3e(e,t){let n=e._computedModelMatrix,i=M.getTranslation(n,V3e);if(!h.equals(i,h.ZERO))e._computedModelMatrix2D=Wt.basisTo2D(t.mapProjection,n,e._computedModelMatrix2D);else{let o=e.boundingSphere.center,r=Wt.wgs84To2DModelMatrix(t.mapProjection,o,e._computedModelMatrix2D);e._computedModelMatrix2D=M.multiply(r,n,e._computedModelMatrix2D)}e._boundingSphere2D=ce.transform(e._boundingSphere,e._computedModelMatrix2D,e._boundingSphere2D)}function Hse(e,t,n){let i=[],o=qt.getNodeTransform(t),r=t.children.length;for(let u=0;u<r;u++){let m=t.children[u],p=M.multiplyTransformation(n,o,new M),b=Hse(e,m,p);i.push(b)}let s=new DI({node:t,transform:o,transformToRoot:n,children:i,sceneGraph:e}),a=t.primitives.length;for(let u=0;u<a;u++)s.runtimePrimitives.push(new RW({primitive:t.primitives[u],node:t,model:e._model}));let c=t.index;e._runtimeNodes[c]=s,l(t.skin)&&e._skinnedNodes.push(c);let d=t.name;if(l(d)){let u=e._model,m=new vI(u,s);u._nodesByName[d]=m}return c}var Z3e=new h,R3e=new h,G3e=new h,E3e=new h;bd.prototype.buildDrawCommands=function(e){let t=this._model,n=new XW(t);t.statistics.clear(),this.configurePipeline(e);let i=this.modelPipelineStages,o,r,s;for(o=0;o<i.length;o++)i[o].process(n,t,e);let a=h.fromElements(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Z3e),c=h.fromElements(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,R3e);for(o=0;o<this._runtimeNodes.length;o++){let d=this._runtimeNodes[o];if(!l(d))continue;d.configurePipeline();let u=d.pipelineStages,m=new FW(n,d);for(r=0;r<u.length;r++)u[r].process(m,d.node,e);let p=d.computedTransform;for(r=0;r<d.runtimePrimitives.length;r++){let b=d.runtimePrimitives[r];b.configurePipeline(e);let f=b.pipelineStages,x=new MW(m,b);for(s=0;s<f.length;s++)f[s].process(x,b.primitive,e);b.boundingSphere=ce.clone(x.boundingSphere,new ce);let _=M.multiplyByPoint(p,x.positionMin,G3e),C=M.multiplyByPoint(p,x.positionMax,E3e);h.minimumByComponent(a,_,a),h.maximumByComponent(c,C,c);let V=SI(x,e);b.drawCommand=V}}this._boundingSphere=ce.fromCornerPoints(a,c,new ce),this._boundingSphere=ce.transformWithoutScale(this._boundingSphere,this._axisCorrectionMatrix,this._boundingSphere),this._boundingSphere=ce.transform(this._boundingSphere,this._components.transform,this._boundingSphere),t._boundingSphere=ce.transform(this._boundingSphere,t.modelMatrix,t._boundingSphere),t._initialRadius=t._boundingSphere.radius,t._boundingSphere.radius*=t._clampedScale};bd.prototype.configurePipeline=function(e){let t=this.modelPipelineStages;t.length=0;let n=this._model,i=e.fog.enabled&&e.fog.renderable;l(n.color)&&t.push(uy),!l(n.classificationType)&&(n.imageBasedLighting.enabled&&t.push(GI),n.isClippingEnabled()&&t.push(PI),n.hasSilhouette(e)&&t.push(PW),l(n.splitDirection)&&n.splitDirection!==Hc.NONE&&t.push(wW),rr.is3DTiles(n.type)&&t.push(CI),i&&t.push(ZI))};bd.prototype.update=function(e,t){let n,i,o;for(n=0;n<this._runtimeNodes.length;n++){let r=this._runtimeNodes[n];if(!l(r))continue;for(i=0;i<r.updateStages.length;i++)r.updateStages[i].update(r,this,e);let s=e.mode!==ie.SCENE3D&&this._model._projectTo2D;for(t&&!s&&this.updateJointMatrices(),i=0;i<r.runtimePrimitives.length;i++){let a=r.runtimePrimitives[i];for(o=0;o<a.updateStages.length;o++)a.updateStages[o].update(a,this)}}};bd.prototype.updateModelMatrix=function(e,t){zse(this,e),t.mode!==ie.SCENE3D&&L3e(this,t);let n=this._rootNodes;for(let i=0;i<n.length;i++){let o=this._runtimeNodes[n[i]];o._transformDirty=!0}};bd.prototype.updateJointMatrices=function(){let e=this._skinnedNodes,t=e.length;for(let n=0;n<t;n++){let i=e[n];this._runtimeNodes[i].updateJointMatrices()}};function Kse(e,t,n,i,o){if(n&&!t.show)return;let r=t.children.length;for(let c=0;c<r;c++){let d=t.getChild(c);Kse(e,d,n,i,o)}let s=t.runtimePrimitives,a=s.length;for(let c=0;c<a;c++){let d=s[c];i(d,o)}}function bN(e,t,n,i){let o=e._rootNodes,r=o.length;for(let s=0;s<r;s++){let a=o[s],c=e._runtimeNodes[a];Kse(e,c,t,n,i)}}var X3e={backFaceCulling:void 0};bd.prototype.updateBackFaceCulling=function(e){let t=X3e;t.backFaceCulling=e,bN(this,!1,I3e,t)};function I3e(e,t){let n=e.drawCommand;n.backFaceCulling=t.backFaceCulling}var W3e={shadowMode:void 0};bd.prototype.updateShadows=function(e){let t=W3e;t.shadowMode=e,bN(this,!1,P3e,t)};function P3e(e,t){let n=e.drawCommand;n.shadows=t.shadowMode}var v3e={debugShowBoundingVolume:void 0};bd.prototype.updateShowBoundingVolume=function(e){let t=v3e;t.debugShowBoundingVolume=e,bN(this,!1,w3e,t)};function w3e(e,t){let n=e.drawCommand;n.debugShowBoundingVolume=t.debugShowBoundingVolume}var Jse=[],F3e={frameState:void 0,hasSilhouette:void 0};bd.prototype.pushDrawCommands=function(e){let t=Jse;t.length=0;let n=F3e;n.hasSilhouette=this._model.hasSilhouette(e),n.frameState=e,bN(this,!0,A3e,n),e.commandList.push.apply(e.commandList,t)};function A3e(e,t){let n=t.frameState,i=t.hasSilhouette,o=n.passes,r=Jse,s=e.drawCommand;s.pushCommands(n,n.commandList),i&&!o.pick&&s.pushSilhouetteCommands(n,r)}bd.prototype.setArticulationStage=function(e,t){let n=e.split(\" \");if(n.length!==2)return;let i=n[0],o=n[1],r=this._runtimeArticulations[i];l(r)&&r.setArticulationStage(o,t)};bd.prototype.applyArticulations=function(){let e=this._runtimeArticulations;for(let t in e)e.hasOwnProperty(t)&&e[t].apply()};var NW=bd;var GRn=T(S(),1);function kC(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap=new Lt}Object.defineProperties(kC.prototype,{batchTexturesByteLength:{get:function(){let e=this._batchTextureIdMap.length,t=this._batchTextureIdMap.values,n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;return n}}});kC.prototype.clear=function(){this.pointsLength=0,this.trianglesLength=0,this.geometryByteLength=0,this.texturesByteLength=0,this.propertyTablesByteLength=0,this._bufferIdSet={},this._textureIdSet={},this._batchTextureIdMap.removeAll()};kC.prototype.addBuffer=function(e,t){if(!this._bufferIdSet.hasOwnProperty(e._id)){let n=t?2:1;this.geometryByteLength+=e.sizeInBytes*n}this._bufferIdSet[e._id]=!0};kC.prototype.addTexture=function(e){this._textureIdSet.hasOwnProperty(e._id)||(this.texturesByteLength+=e.sizeInBytes),this._textureIdSet[e._id]=!0};kC.prototype.addBatchTexture=function(e){this._batchTextureIdMap.contains(e._id)||this._batchTextureIdMap.set(e._id,e)};var kW=kC;var uGn=T(S(),1);var $se=T(_M(),1);var URn=T(S(),1);var Qse={},u_=Uint32Array.BYTES_PER_ELEMENT;Qse.parse=function(e,t){t=g(t,0);let n=new Uint8Array(e),i=new DataView(e);t+=u_;let o=i.getUint32(t,!0);if(o!==1)throw new ue(`Only Point Cloud tile version 1 is supported. Version ${o} is not.`);t+=u_,t+=u_;let r=i.getUint32(t,!0);if(r===0)throw new ue(\"Feature table must have a byte length greater than zero\");t+=u_;let s=i.getUint32(t,!0);t+=u_;let a=i.getUint32(t,!0);t+=u_;let c=i.getUint32(t,!0);t+=u_;let d=Go(n,t,r);t+=r;let u=new Uint8Array(e,t,s);t+=s;let m,p;a>0&&(m=Go(n,t,a),t+=a,c>0&&(p=new Uint8Array(e,t,c),t+=c));let b=new Um(d,u),f=b.getGlobalProperty(\"POINTS_LENGTH\");if(b.featuresLength=f,!l(f))throw new ue(\"Feature table global property: POINTS_LENGTH must be defined\");let x=b.getGlobalProperty(\"RTC_CENTER\",Q.FLOAT,3);l(x)&&(x=h.unpack(x));let _=M3e(b,m);if(_.rtcCenter=x,_.pointsLength=f,!_.hasPositions){let C=N3e(b);_.positions=C,_.hasPositions=_.hasPositions||l(C)}if(!_.hasPositions)throw new ue(\"Either POSITION or POSITION_QUANTIZED must be defined.\");if(!_.hasNormals){let C=U3e(b);_.normals=C,_.hasNormals=_.hasNormals||l(C)}if(!_.hasColors){let C=k3e(b);_.colors=C,_.hasColors=_.hasColors||l(C),_.hasConstantColor=l(_.constantColor),_.isTranslucent=l(C)&&C.isTranslucent}if(!_.hasBatchIds){let C=D3e(b);_.batchIds=C,_.hasBatchIds=_.hasBatchIds||l(C)}if(_.hasBatchIds){let C=b.getGlobalProperty(\"BATCH_LENGTH\");if(!l(C))throw new ue(\"Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.\");_.batchLength=C}return l(p)&&(p=new Uint8Array(p),_.batchTableJson=m,_.batchTableBinary=p),_};function M3e(e,t){let n=e.json,i,o,r,s=l(n.extensions)?n.extensions[\"3DTILES_draco_point_compression\"]:void 0,a=l(t)&&l(t.extensions)?t.extensions[\"3DTILES_draco_point_compression\"]:void 0;l(a)&&(r=a.properties);let c,d,u,m,p;if(l(s)){o=s.properties;let f=s.byteOffset,x=s.byteLength;if(!l(o)||!l(f)||!l(x))throw new ue(\"Draco properties, byteOffset, and byteLength must be defined\");i=e.buffer.slice(f,f+x),c=l(o.POSITION),d=l(o.RGB)||l(o.RGBA),u=l(o.NORMAL),m=l(o.BATCH_ID),p=l(o.RGBA)}let b;return l(i)&&(b={buffer:i,featureTableProperties:o,batchTableProperties:r,properties:Ct(o,r),dequantizeInShader:!0}),{draco:b,hasPositions:c,hasColors:d,isTranslucent:p,hasNormals:u,hasBatchIds:m}}function N3e(e){let t=e.json,n;if(l(t.POSITION))return n=e.getPropertyArray(\"POSITION\",Q.FLOAT,3),{name:St.POSITION,semantic:St.POSITION,typedArray:n,isQuantized:!1,componentDatatype:Q.FLOAT,type:tn.VEC3};if(l(t.POSITION_QUANTIZED)){n=e.getPropertyArray(\"POSITION_QUANTIZED\",Q.UNSIGNED_SHORT,3);let i=e.getGlobalProperty(\"QUANTIZED_VOLUME_SCALE\",Q.FLOAT,3);if(!l(i))throw new ue(\"Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.\");let o=65535,r=e.getGlobalProperty(\"QUANTIZED_VOLUME_OFFSET\",Q.FLOAT,3);if(!l(r))throw new ue(\"Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.\");return{name:St.POSITION,semantic:St.POSITION,typedArray:n,isQuantized:!0,componentDatatype:Q.FLOAT,type:tn.VEC3,quantizedRange:o,quantizedVolumeOffset:h.unpack(r),quantizedVolumeScale:h.unpack(i),quantizedComponentDatatype:Q.UNSIGNED_SHORT,quantizedType:tn.VEC3}}}function k3e(e){let t=e.json,n;if(l(t.RGBA))return n=e.getPropertyArray(\"RGBA\",Q.UNSIGNED_BYTE,4),{name:St.COLOR,semantic:St.COLOR,setIndex:0,typedArray:n,componentDatatype:Q.UNSIGNED_BYTE,type:tn.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if(l(t.RGB))return n=e.getPropertyArray(\"RGB\",Q.UNSIGNED_BYTE,3),{name:\"COLOR\",semantic:St.COLOR,setIndex:0,typedArray:n,componentDatatype:Q.UNSIGNED_BYTE,type:tn.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if(l(t.RGB565))return n=e.getPropertyArray(\"RGB565\",Q.UNSIGNED_SHORT,1),{name:\"COLOR\",semantic:St.COLOR,setIndex:0,typedArray:n,componentDatatype:Q.FLOAT,type:tn.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if(l(t.CONSTANT_RGBA)){let i=e.getGlobalProperty(\"CONSTANT_RGBA\",Q.UNSIGNED_BYTE,4),o=i[3],r=O.fromBytes(i[0],i[1],i[2],o),s=o<255;return{name:St.COLOR,semantic:St.COLOR,setIndex:0,constantColor:r,componentDatatype:Q.FLOAT,type:tn.VEC4,isQuantized:!1,isTranslucent:s}}}function U3e(e){let t=e.json,n;if(l(t.NORMAL))return n=e.getPropertyArray(\"NORMAL\",Q.FLOAT,3),{name:St.NORMAL,semantic:St.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:Q.FLOAT,type:tn.VEC3};if(l(t.NORMAL_OCT16P))return n=e.getPropertyArray(\"NORMAL_OCT16P\",Q.UNSIGNED_BYTE,2),{name:St.NORMAL,semantic:St.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<8)-1,quantizedType:tn.VEC2,quantizedComponentDatatype:Q.UNSIGNED_BYTE,componentDatatype:Q.FLOAT,type:tn.VEC3}}function D3e(e){let t=e.json;if(l(t.BATCH_ID)){let n=e.getPropertyArray(\"BATCH_ID\",Q.UNSIGNED_SHORT,1);return{name:St.FEATURE_ID,semantic:St.FEATURE_ID,setIndex:0,typedArray:n,componentDatatype:Q.fromTypedArray(n),type:tn.SCALAR}}}var m_=Qse;var B3e=Nt.Components,Y3e=Nt.Scene,O3e=Nt.Node,z3e=Nt.Primitive,H3e=Nt.Attribute,jse=Nt.Quantization,K3e=Nt.FeatureIdAttribute,J3e=Nt.Material,Q3e=Nt.MetallicRoughness;function by(e){e=g(e,g.EMPTY_OBJECT);let t=e.arrayBuffer,n=g(e.byteOffset,0);this._arrayBuffer=t,this._byteOffset=n,this._loadAttributesFor2D=g(e.loadAttributesFor2D,!1),this._parsedContent=void 0,this._decodePromise=void 0,this._decodedAttributes=void 0,this._promise=void 0,this._error=void 0,this._state=Xt.UNLOADED,this._buffers=[],this._components=void 0,this._transform=M.IDENTITY}l(Object.create)&&(by.prototype=Object.create(io.prototype),by.prototype.constructor=by);Object.defineProperties(by.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},transform:{get:function(){return this._transform}}});by.prototype.load=function(){if(l(this._promise))return this._promise;this._parsedContent=m_.parse(this._arrayBuffer,this._byteOffset),this._state=Xt.PROCESSING,this._promise=Promise.resolve(this)};by.prototype.process=function(e){if(l(this._error)){let t=this._error;throw this._error=void 0,t}if(this._state===Xt.READY)return!0;if(this._state===Xt.PROCESSING){if(l(this._decodePromise))return!1;this._decodePromise=j3e(this,e.context)}return!1};function j3e(e,t){let i=e._parsedContent.draco,o;if(l(i)?o=Dp.decodePointCloud(i,t):o=Promise.resolve(),!!l(o))return e._decodePromise=o,o.then(function(r){if(!e.isDestroyed())return l(r)&&q3e(e,i,r),lBe(e,t),e._state=Xt.READY,e}).catch(function(r){e.unload(),e._state=Xt.FAILED;let s=\"Failed to load Draco pnts\";e._error=e.getError(s,r)})}function q3e(e,t,n){e._state=Xt.READY;let i=e._parsedContent,o;if(l(n.POSITION)){if(o={name:\"POSITION\",semantic:St.POSITION,typedArray:n.POSITION.array,componentDatatype:Q.FLOAT,type:tn.VEC3,isQuantized:!1},l(n.POSITION.data.quantization)){let a=n.POSITION.data.quantization,c=a.range,d=h.fromElements(c,c,c),u=h.unpack(a.minValues),m=(1<<a.quantizationBits)-1;o.isQuantized=!0,o.quantizedRange=m,o.quantizedVolumeOffset=u,o.quantizedVolumeScale=d,o.quantizedComponentDatatype=m<=255?Q.UNSIGNED_BYTE:Q.UNSIGNED_SHORT,o.quantizedType=tn.VEC3}i.positions=o}if(l(n.NORMAL)){if(o={name:\"NORMAL\",semantic:St.NORMAL,typedArray:n.NORMAL.array,componentDatatype:Q.FLOAT,type:tn.VEC3,isQuantized:!1,octEncoded:!1,octEncodedZXY:!1},l(n.NORMAL.data.quantization)){let a=(1<<n.NORMAL.data.quantization.quantizationBits)-1;o.quantizedRange=a,o.octEncoded=!0,o.octEncodedZXY=!0,o.quantizedComponentDatatype=Q.UNSIGNED_BYTE,o.quantizedType=tn.VEC2}i.normals=o}if(l(n.RGBA)?i.colors={name:\"COLOR\",semantic:St.COLOR,setIndex:0,typedArray:n.RGBA.array,componentDatatype:Q.UNSIGNED_BYTE,type:tn.VEC4,normalized:!0,isTranslucent:!0}:l(n.RGB)&&(i.colors={name:\"COLOR\",semantic:St.COLOR,setIndex:0,typedArray:n.RGB.array,componentDatatype:Q.UNSIGNED_BYTE,type:tn.VEC3,normalized:!0,isTranslucent:!1}),l(n.BATCH_ID)){let a=n.BATCH_ID.array;i.batchIds={name:\"_FEATURE_ID\",semantic:St.FEATURE_ID,setIndex:0,typedArray:a,componentDatatype:Q.fromTypedArray(a),type:tn.SCALAR}}let r=i.batchTableJson,s=t.batchTableProperties;for(let a in s)if(s.hasOwnProperty(a)){let c=n[a];l(r)||(r={}),i.hasDracoBatchTable=!0;let d=c.data;r[a]={byteOffset:d.byteOffset,type:$3e(d.componentsPerAttribute),componentType:eBe(d.componentDatatype),typedArray:c.array}}i.batchTableJson=r}function $3e(e){switch(e){case 1:return\"SCALAR\";case 2:return\"VEC2\";case 3:return\"VEC3\";case 4:return\"VEC4\"}}function eBe(e){switch(e){case ne.BYTE:return\"BYTE\";case ne.UNSIGNED_BYTE:return\"UNSIGNED_BYTE\";case ne.SHORT:return\"SHORT\";case ne.UNSIGNED_SHORT:return\"UNSIGNED_SHORT\";case ne.INT:return\"INT\";case ne.UNSIGNED_INT:return\"UNSIGNED_INT\";case ne.DOUBLE:return\"DOUBLE\";case ne.FLOAT:return\"FLOAT\"}}function UW(e,t,n){let i=t.typedArray,o;if(t.octEncoded&&(o=new jse,o.octEncoded=t.octEncoded,o.octEncodedZXY=t.octEncodedZXY,o.normalizationRange=t.quantizedRange,o.type=t.quantizedType,o.componentDatatype=t.quantizedComponentDatatype),t.isQuantized){o=new jse;let a=t.quantizedRange;o.normalizationRange=a,o.quantizedVolumeOffset=h.ZERO;let c=t.quantizedVolumeScale;o.quantizedVolumeDimensions=c,o.quantizedVolumeStepSize=h.divideByScalar(c,a,new h),o.componentDatatype=t.quantizedComponentDatatype,o.type=t.quantizedType}let r=new H3e;if(r.name=t.name,r.semantic=t.semantic,r.setIndex=t.setIndex,r.componentDatatype=t.componentDatatype,r.type=t.type,r.normalized=g(t.normalized,!1),r.min=t.min,r.max=t.max,r.quantization=o,t.isRGB565&&(i=wn.decodeRGB565(i)),l(t.constantColor)){let a=new Array(4);r.constant=O.pack(t.constantColor,a)}else{let a=pt.createVertexBuffer({typedArray:i,context:n,usage:Me.STATIC_DRAW});a.vertexArrayDestroyable=!1,e._buffers.push(a),r.buffer=a}let s=e._loadAttributesFor2D;return r.semantic===St.POSITION&&s&&(r.typedArray=i),r}var qse,yN;function tBe(e){if(!l(yN)){qse=new $se.default(0),yN=new Array(e);for(let t=0;t<e;++t)yN[t]=qse.random()}return yN}var nBe=new h,iBe=new h,oBe=new h;function rBe(e){let t=e.typedArray,n=20,i=t.length/3,o=Math.min(i,n),r=tBe(n),s=Number.MAX_VALUE,a=-Number.MAX_VALUE,c=h.fromElements(s,s,s,nBe),d=h.fromElements(a,a,a,iBe),u,m,p;if(e.isQuantized)c=h.ZERO,d=e.quantizedVolumeScale;else for(u=0;u<o;++u)m=Math.floor(r[u]*i),p=h.unpack(t,m*3,oBe),h.minimumByComponent(c,p,c),h.maximumByComponent(d,p,d);e.min=h.clone(c),e.max=h.clone(d)}var sBe={name:St.COLOR,semantic:St.COLOR,setIndex:0,constantColor:O.DARKGRAY,componentDatatype:Q.FLOAT,type:tn.VEC4,isQuantized:!1,isTranslucent:!1};function aBe(e,t,n){let i=[],o,r=t.positions;return l(r)&&(rBe(r),o=UW(e,r,n),o.count=t.pointsLength,i.push(o)),l(t.normals)&&(o=UW(e,t.normals,n),i.push(o)),l(t.colors)?(o=UW(e,t.colors,n),i.push(o)):(o=UW(e,sBe,n),i.push(o)),l(t.batchIds)&&(o=UW(e,t.batchIds,n),i.push(o)),i}function cBe(e,t){let n=e.batchLength,i=e.pointsLength,o=e.batchTableBinary,r=!l(e.batchIds);if(l(o)||e.hasDracoBatchTable){let s=g(n,i);return jp({count:s,batchTable:e.batchTableJson,binaryBody:o,parseAsPropertyAttributes:r,customAttributeOutput:t})}return new Xa({schema:{},propertyTables:[]})}function lBe(e,t){let n=e._parsedContent,i=new Q3e;i.metallicFactor=0,i.roughnessFactor=.9;let o=new J3e;o.metallicRoughness=i;let r=n.colors;l(r)&&r.isTranslucent&&(o.alphaMode=af.BLEND);let s=!l(n.normals);o.unlit=s;let a=new z3e;if(a.attributes=aBe(e,n,t),a.primitiveType=we.POINTS,a.material=o,l(n.batchIds)){let b=new K3e;b.propertyTableId=0,b.setIndex=0,b.positionalLabel=\"featureId_0\",a.featureIds.push(b)}let c=new O3e;c.index=0,c.primitives=[a];let d=new Y3e;d.nodes=[c],d.upAxis=Ro.Z,d.forwardAxis=Ro.X;let u=new B3e;u.scene=d,u.nodes=[c];let m=[];u.structuralMetadata=cBe(n,m),m.length>0&&dBe(e,a,m,t),l(n.rtcCenter)&&(u.transform=M.multiplyByTranslation(u.transform,n.rtcCenter,u.transform));let p=n.positions;l(p)&&p.isQuantized&&(u.transform=M.multiplyByTranslation(u.transform,p.quantizedVolumeOffset,u.transform)),e._components=u,e._parsedContent=void 0,e._arrayBuffer=void 0}function dBe(e,t,n,i){let o=t.attributes,r=n.length;for(let s=0;s<r;s++){let a=n[s],c=pt.createVertexBuffer({typedArray:a.typedArray,context:i,usage:Me.STATIC_DRAW});c.vertexArrayDestroyable=!1,e._buffers.push(c),a.buffer=c,a.typedArray=void 0,o.push(a)}t.propertyAttributeIds=[0]}by.prototype.unload=function(){let e=this._buffers;for(let t=0;t<e.length;t++)e[t].destroy();e.length=0,this._components=void 0,this._parsedContent=void 0,this._arrayBuffer=void 0};var DW=by;var IGn=T(S(),1);var eae=new h,uBe=new h,mBe=new h,hBe=new M,fBe=new M,pBe=new M,bBe=new he,yBe=new ce;function UC(e,t,n,i,o,r,s){if(!e._ready||n.mode===ie.MORPHING)return;let a=Number.MAX_VALUE;if(qt.getModelTriangles(e,n.mode,n.mapProjection,n.context.webgl2,c=>{let d=jn.raySphere(t,c);return l(d)},(c,d,u)=>{let m=jn.rayTriangleParametric(t,c,d,u,g(e.backFaceCulling,!0));l(m)&&m<a&&m>=0&&(a=m)},i,o,r),a!==Number.MAX_VALUE){if(s=bn.getPoint(t,a,s),n.mode!==ie.SCENE3D){h.fromElements(s.y,s.z,s.x,s);let c=n.mapProjection,d=c.ellipsoid,u=c.unproject(s,bBe);d.cartographicToCartesian(u,s)}return s}}qt.getModelTriangles=function(e,t,n,i,o,r,s,a,c,d){let u=e.sceneGraph,m=u._runtimeNodes;for(let p=0;p<m.length;p++){let b=m[p],f=b.node,x=M.clone(b.computedTransform,hBe),_=M.clone(u.computedModelMatrix,fBe),C=f.instances;l(C)&&C.transformInWorldSpace&&(_=M.multiplyTransformation(e.modelMatrix,u.components.transform,_),x=M.multiplyTransformation(u.axisCorrectionMatrix,b.computedTransform,x));let V=M.multiplyTransformation(_,x,pBe);t!==ie.SCENE3D&&(V=Wt.basisTo2D(n,V,V));let L=[];if(l(C)){let G=C.attributes[0].count,X=C.attributes[0].componentDatatype,v=12,W=b.transformsTypedArray;if(!l(W)){let F=b.instancingTransformsBuffer;l(F)&&i&&(W=Q.createTypedArray(X,G*v),F.getBufferData(W))}if(l(W))for(let F=0;F<G;F++){let A=F*v,y=new M(W[A],W[A+1],W[A+2],W[A+3],W[A+4],W[A+5],W[A+6],W[A+7],W[A+8],W[A+9],W[A+10],W[A+11],0,0,0,1);C.transformInWorldSpace?(M.multiplyTransformation(y,x,y),M.multiplyTransformation(_,y,y)):M.multiplyTransformation(y,V,y),L.push(y)}}L.length===0&&L.push(V);let R=b.runtimePrimitives.length;for(let G=0;G<R;G++){let X=b.runtimePrimitives[G],v=X.primitive;if(l(X.boundingSphere)&&!l(C)){let j=ce.transform(X.boundingSphere,V,yBe);if(!o(j))continue}let W=qt.getAttributeBySemantic(v,St.POSITION),F=W.byteOffset,A=W.byteStride,y=W.count,Z=!1;l(v.indices)||(Z=!0);let E=v.indices&&v.indices.typedArray;if(!Z&&!l(E)){let j=v.indices.buffer,q=v.indices.count,pe=v.indices.indexDatatype;if(l(j)&&i){let _e=Ae.getSizeInBytes(pe),ae=Math.floor(j.sizeInBytes/_e);q!==ae&&(q=ae),pe===Ae.UNSIGNED_BYTE?E=new Uint8Array(q):pe===Ae.UNSIGNED_SHORT?E=new Uint16Array(q):pe===Ae.UNSIGNED_INT&&(E=new Uint32Array(q)),j.getBufferData(E)}}let I=W.typedArray,w=W.componentDatatype,k=W.type,B=W.quantization;l(B)&&(w=W.quantization.componentDatatype,k=W.quantization.type);let U=tn.getNumberOfComponents(k),Y=Q.getSizeInBytes(w),N=!l(I)&&l(A)&&A!==U*Y,J=U,z=0;if(N&&(J=A/Y,z=F/Y),l(W.buffer)){let j=Math.floor(W.buffer.sizeInBytes/(J*Y));y!==j&&(y=j)}let ee=y*J;if(!l(I)){let j=W.buffer;l(j)&&i&&(I=Q.createTypedArray(w,ee),j.getBufferData(I,N?0:F,0,ee)),B&&W.normalized&&(I=wn.dequantize(I,w,k,y))}if(!Z&&!l(E)||!l(I))return;if(c=g(c,oe.WGS84),s=g(s,1),a=g(a,0),Z&&l(I)){let j=Math.floor(I.length/J);for(let q=0;q<j;q++)for(let pe of L){let _e=gN(I,q,z,J,B,pe,s,a,c,eae);d(_e)}return}let H=E.length;for(let j=0;j<H;j+=3){let q=E[j],pe=E[j+1],_e=E[j+2];for(let ae of L){let ye=gN(I,q,z,J,B,ae,s,a,c,eae),Te=gN(I,pe,z,J,B,ae,s,a,c,uBe),Le=gN(I,_e,z,J,B,ae,s,a,c,mBe);r(ye,Te,Le)}}}}};function gN(e,t,n,i,o,r,s,a,c,d){let u=n+t*i;if(d.x=e[u],d.y=e[u+1],d.z=e[u+2],l(o))if(o.octEncoded){if(d=wn.octDecodeInRange(d,o.normalizationRange,d),o.octEncodedZXY){let m=d.x;d.x=d.z,d.z=d.y,d.y=m}}else d=h.multiplyComponents(d,o.quantizedVolumeStepSize,d),d=h.add(d,o.quantizedVolumeOffset,d);return d=M.multiplyByPoint(r,d,d),s!==1&&pr.getPosition(d,c,s,a,d),d}function go(e){e=g(e,g.EMPTY_OBJECT),this._loader=e.loader,this._resource=e.resource,this.type=g(e.type,rr.GLTF),this.modelMatrix=M.clone(g(e.modelMatrix,M.IDENTITY)),this._modelMatrix=M.clone(this.modelMatrix),this._scale=g(e.scale,1),this._minimumPixelSize=g(e.minimumPixelSize,0),this._maximumScale=e.maximumScale,this._clampedScale=l(this._maximumScale)?Math.min(this._scale,this._maximumScale):this._scale,this._computedScale=this._clampedScale,this._updateModelMatrix=!1,this.referenceMatrix=void 0,this._iblReferenceFrameMatrix=$.clone($.IDENTITY),this._resourcesLoaded=!1,this._drawCommandsBuilt=!1,this._ready=!1,this._customShader=e.customShader,this._content=e.content,this._texturesLoaded=!1,this._defaultTexture=void 0,this._activeAnimations=new hI(this),this._clampAnimations=g(e.clampAnimations,!0),this._userAnimationDirty=!1,this._id=e.id,this._idDirty=!1,this._color=O.clone(e.color),this._colorBlendMode=g(e.colorBlendMode,ac.HIGHLIGHT),this._colorBlendAmount=g(e.colorBlendAmount,.5);let t=g(e.silhouetteColor,O.RED);this._silhouetteColor=O.clone(t),this._silhouetteSize=g(e.silhouetteSize,0),this._silhouetteDirty=!1,this._silhouetteId=void 0,this._cull=g(e.cull,!0),this._opaquePass=g(e.opaquePass,Ze.OPAQUE),this._allowPicking=g(e.allowPicking,!0),this._show=g(e.show,!0),this._style=void 0,this._styleDirty=!1,this._styleCommandsNeeded=void 0;let n=g(e.featureIdLabel,\"featureId_0\");typeof n==\"number\"&&(n=`featureId_${n}`),this._featureIdLabel=n;let i=g(e.instanceFeatureIdLabel,\"instanceFeatureId_0\");typeof i==\"number\"&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i,this._featureTables=[],this._featureTableId=void 0,this._featureTableIdDirty=!0,this._pipelineResources=[],this._modelResources=[],this._pickIds=[],this._boundingSphere=new ce,this._initialRadius=void 0,this._heightReference=g(e.heightReference,Je.NONE),this._heightDirty=this._heightReference!==Je.NONE,this._removeUpdateHeightCallback=void 0,this._verticalExaggerationOn=!1,this._clampedModelMatrix=void 0;let o=e.scene;l(o)&&l(o.terrainProviderChanged)&&(this._terrainProviderChangedCallback=o.terrainProviderChanged.addEventListener(()=>{this._heightDirty=!0})),this._scene=o,this._distanceDisplayCondition=e.distanceDisplayCondition;let r=new cf(e.pointCloudShading);this._pointCloudShading=r,this._attenuation=r.attenuation,this._pointCloudBackFaceCulling=r.backFaceCulling;let s=e.clippingPlanes;l(s)&&s.owner===void 0?fs.setOwner(s,this,\"_clippingPlanes\"):this._clippingPlanes=s,this._clippingPlanesState=0,this._clippingPlanesMatrix=M.clone(M.IDENTITY),this._lightColor=h.clone(e.lightColor),this._imageBasedLighting=l(e.imageBasedLighting)?e.imageBasedLighting:new Ax,this._shouldDestroyImageBasedLighting=!l(e.imageBasedLighting),this._backFaceCulling=g(e.backFaceCulling,!0),this._backFaceCullingDirty=!1,this._shadows=g(e.shadows,_n.ENABLED),this._shadowsDirty=!1,this._debugShowBoundingVolumeDirty=!1,this._debugShowBoundingVolume=g(e.debugShowBoundingVolume,!1),this._enableDebugWireframe=g(e.enableDebugWireframe,!1),this._enableShowOutline=g(e.enableShowOutline,!0),this._debugWireframe=g(e.debugWireframe,!1),this._debugWireframe===!0&&this._enableDebugWireframe===!1&&this.type===rr.GLTF&&wt(\"model-debug-wireframe-ignored\",\"enableDebugWireframe must be set to true in Model.fromGltf, otherwise debugWireframe will be ignored.\");let a=e.credit;typeof a==\"string\"&&(a=new Zt(a)),this._credits=[],this._credit=a,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=g(e.showCreditsOnScreen,!1),this._showCreditsOnScreenDirty=!0,this._splitDirection=g(e.splitDirection,Hc.NONE),this._enableShowOutline=g(e.enableShowOutline,!0),this.showOutline=g(e.showOutline,!0),this.outlineColor=g(e.outlineColor,O.BLACK),this._classificationType=e.classificationType,this._statistics=new kW,this._sceneMode=void 0,this._projectTo2D=g(e.projectTo2D,!1),this._enablePick=g(e.enablePick,!1),this._fogRenderable=void 0,this._skipLevelOfDetail=!1,this._ignoreCommands=g(e.ignoreCommands,!1),this._errorEvent=new ge,this._readyEvent=new ge,this._texturesReadyEvent=new ge,this._sceneGraph=void 0,this._nodesByName={},this.pickObject=e.pickObject}function eH(e,t){if(e._errorEvent.numberOfListeners>0){e._errorEvent.raiseEvent(t);return}console.log(t)}function gBe(e,t){let n=e._featureTables,i=t.propertyTables,o=i.length;for(let r=0;r<o;r++){let s=i[r],a=new bI({model:e,propertyTable:s});n.push(a)}return n}function xBe(e,t){let n=t._featureIdLabel,i=t._instanceFeatureIdLabel,o,r,s,a;for(o=0;o<e.nodes.length;o++)if(a=e.nodes[o],l(a.instances)&&(s=qt.getFeatureIdsByLabel(a.instances.featureIds,i),l(s)&&l(s.propertyTableId)))return s.propertyTableId;for(o=0;o<e.nodes.length;o++)for(a=e.nodes[o],r=0;r<a.primitives.length;r++){let c=a.primitives[r],d=qt.getFeatureIdsByLabel(c.featureIds,n);if(l(d))return d.propertyTableId}if(t._featureTables.length===1)return 0}function iH(e,t){if(!l(e)&&!l(t))return!1;if(l(e)!==l(t))return!0;let n=e.alpha,i=t.alpha;return Math.floor(n)!==Math.floor(i)||Math.ceil(n)!==Math.ceil(i)}Object.defineProperties(go.prototype,{ready:{get:function(){return this._ready}},errorEvent:{get:function(){return this._errorEvent}},readyEvent:{get:function(){return this._readyEvent}},incrementallyLoadTextures:{get:function(){return g(this._loader.incrementallyLoadTextures,!1)}},texturesReadyEvent:{get:function(){return this._texturesReadyEvent}},loader:{get:function(){return this._loader}},statistics:{get:function(){return this._statistics}},activeAnimations:{get:function(){return this._activeAnimations}},clampAnimations:{get:function(){return this._clampAnimations},set:function(e){this._clampAnimations=e}},cull:{get:function(){return this._cull}},opaquePass:{get:function(){return this._opaquePass}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){e!==this._pointCloudShading&&this.resetDrawCommands(),this._pointCloudShading=e}},customShader:{get:function(){return this._customShader},set:function(e){e!==this._customShader&&this.resetDrawCommands(),this._customShader=e}},sceneGraph:{get:function(){return this._sceneGraph}},content:{get:function(){return this._content}},heightReference:{get:function(){return this._heightReference},set:function(e){e!==this._heightReference&&(this._heightDirty=!0),this._heightReference=e}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=It.clone(e,this._distanceDisplayCondition)}},structuralMetadata:{get:function(){return this._sceneGraph.components.structuralMetadata}},featureTableId:{get:function(){return this._featureTableId},set:function(e){this._featureTableId=e}},featureTables:{get:function(){return this._featureTables},set:function(e){this._featureTables=e}},id:{get:function(){return this._id},set:function(e){e!==this._id&&(this._idDirty=!0),this._id=e}},allowPicking:{get:function(){return this._allowPicking}},style:{get:function(){return this._style},set:function(e){this._style=e,this._styleDirty=!0}},color:{get:function(){return this._color},set:function(e){iH(e,this._color)&&this.resetDrawCommands(),this._color=O.clone(e,this._color)}},colorBlendMode:{get:function(){return this._colorBlendMode},set:function(e){this._colorBlendMode=e}},colorBlendAmount:{get:function(){return this._colorBlendAmount},set:function(e){this._colorBlendAmount=e}},silhouetteColor:{get:function(){return this._silhouetteColor},set:function(e){if(!O.equals(e,this._silhouetteColor)){let t=iH(e,this._silhouetteColor);this._silhouetteDirty=this._silhouetteDirty||t}this._silhouetteColor=O.clone(e,this._silhouetteColor)}},silhouetteSize:{get:function(){return this._silhouetteSize},set:function(e){if(e!==this._silhouetteSize){let t=this._silhouetteSize,n=e>0&&t===0||e===0&&t>0;this._silhouetteDirty=this._silhouetteDirty||n,this._backFaceCullingDirty=this._backFaceCullingDirty||n}this._silhouetteSize=e}},boundingSphere:{get:function(){let e=l(this._clampedModelMatrix)?this._clampedModelMatrix:this.modelMatrix;return iae(this,e),this._boundingSphere}},debugShowBoundingVolume:{get:function(){return this._debugShowBoundingVolume},set:function(e){this._debugShowBoundingVolume!==e&&(this._debugShowBoundingVolumeDirty=!0),this._debugShowBoundingVolume=e}},debugWireframe:{get:function(){return this._debugWireframe},set:function(e){this._debugWireframe!==e&&this.resetDrawCommands(),this._debugWireframe=e,this._debugWireframe===!0&&this._enableDebugWireframe===!1&&this.type===rr.GLTF&&wt(\"model-debug-wireframe-ignored\",\"enableDebugWireframe must be set to true in Model.fromGltfAsync, otherwise debugWireframe will be ignored.\")}},show:{get:function(){return this._show},set:function(e){this._show=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){typeof e==\"number\"&&(e=`featureId_${e}`),e!==this._featureIdLabel&&(this._featureTableIdDirty=!0),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){typeof e==\"number\"&&(e=`instanceFeatureId_${e}`),e!==this._instanceFeatureIdLabel&&(this._featureTableIdDirty=!0),this._instanceFeatureIdLabel=e}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&(fs.setOwner(e,this,\"_clippingPlanes\"),this.resetDrawCommands())}},lightColor:{get:function(){return this._lightColor},set:function(e){l(e)!==l(this._lightColor)&&this.resetDrawCommands(),this._lightColor=h.clone(e,this._lightColor)}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this.resetDrawCommands())}},backFaceCulling:{get:function(){return this._backFaceCulling},set:function(e){e!==this._backFaceCulling&&(this._backFaceCullingDirty=!0),this._backFaceCulling=e}},scale:{get:function(){return this._scale},set:function(e){e!==this._scale&&(this._updateModelMatrix=!0),this._scale=e}},computedScale:{get:function(){return this._computedScale}},minimumPixelSize:{get:function(){return this._minimumPixelSize},set:function(e){e!==this._minimumPixelSize&&(this._updateModelMatrix=!0),this._minimumPixelSize=e}},maximumScale:{get:function(){return this._maximumScale},set:function(e){e!==this._maximumScale&&(this._updateModelMatrix=!0),this._maximumScale=e}},shadows:{get:function(){return this._shadows},set:function(e){e!==this._shadows&&(this._shadowsDirty=!0),this._shadows=e}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen!==e&&(this._showCreditsOnScreenDirty=!0),this._showCreditsOnScreen=e}},splitDirection:{get:function(){return this._splitDirection},set:function(e){this._splitDirection!==e&&this.resetDrawCommands(),this._splitDirection=e}},classificationType:{get:function(){return this._classificationType}},pickIds:{get:function(){return this._pickIds}},styleCommandsNeeded:{get:function(){return this._styleCommandsNeeded}}});go.prototype.getNode=function(e){return this._nodesByName[e]};go.prototype.setArticulationStage=function(e,t){this._sceneGraph.setArticulationStage(e,t)};go.prototype.applyArticulations=function(){this._sceneGraph.applyArticulations()};go.prototype.makeStyleDirty=function(){this._styleDirty=!0};go.prototype.resetDrawCommands=function(){this._drawCommandsBuilt=!1};var _Be=new M,TBe=new $,SBe=new M;go.prototype.update=function(e){let t=!1;try{t=CBe(this,e)}catch(n){if(!this._loader.incrementallyLoadTextures&&n.name===\"TextureError\")eH(this,n);else{let i=qt.getError(\"model\",this._resource,n);eH(this,i)}}if(VBe(this,e),LBe(this,e),!this._resourcesLoaded&&t){this._resourcesLoaded=!0;let n=this._loader.components;if(!l(n)){if(this._loader.isUnloaded())return;let r=qt.getError(\"model\",this._resource,new ue(\"Failed to load model.\"));eH(r),this._rejectLoad=this._rejectLoad&&this._rejectLoad(r)}let i=n.structuralMetadata;l(i)&&i.propertyTableCount>0&&gBe(this,i);let o=new NW({model:this,modelComponents:n});this._sceneGraph=o,this._gltfCredits=o.components.asset.credits}if(!(!this._resourcesLoaded||e.mode===ie.MORPHING)){if(ZBe(this),RBe(this),GBe(this,e),EBe(this),XBe(this,e),IBe(this,e),WBe(this,e),PBe(this,e),vBe(this,e),wBe(this,e),this._defaultTexture=e.context.defaultTexture,FBe(this,e),ABe(this,e),MBe(this),NBe(this,e),DBe(this,e),!this._ready){e.afterRender.push(()=>{this._ready=!0,this._readyEvent.raiseEvent(this)});return}this._loader.incrementallyLoadTextures&&!this._texturesLoaded&&this._loader.texturesLoaded&&(this.resetDrawCommands(),this._texturesLoaded=!0,this._texturesReadyEvent.raiseEvent(this)),UBe(this),BBe(this,e),YBe(this),OBe(this,e)}};function CBe(e,t){return!e._resourcesLoaded||e._loader.incrementallyLoadTextures&&!e._texturesLoaded?(t.afterRender.push(()=>!0),e._loader.process(t)):!0}function VBe(e,t){l(e._customShader)&&e._customShader.update(t)}function LBe(e,t){e._imageBasedLighting.update(t),e._imageBasedLighting.shouldRegenerateShaders&&e.resetDrawCommands()}function ZBe(e){if(!e._featureTableIdDirty)return;e._featureTableIdDirty=!1;let t=e._sceneGraph.components,n=t.structuralMetadata;l(n)&&n.propertyTableCount>0&&(e.featureTableId=xBe(t,e),e._styleDirty=!0,e.resetDrawCommands())}function RBe(e){e._styleDirty&&(e.applyStyle(e._style),e._styleDirty=!1)}function GBe(e,t){let n=e._featureTables,i=n.length,o=!1;for(let r=0;r<i;r++)n[r].update(t),n[r].styleCommandsNeededDirty&&(o=!0);o&&nae(e)}function nae(e){let t=e.featureTables[e.featureTableId];e._styleCommandsNeeded=Bm.getStyleCommandsNeeded(t.featuresLength,t.batchTexture.translucentFeaturesLength)}function EBe(e){let t=e.pointCloudShading;t.attenuation!==e._attenuation&&(e.resetDrawCommands(),e._attenuation=t.attenuation),t.backFaceCulling!==e._pointCloudBackFaceCulling&&(e.resetDrawCommands(),e._pointCloudBackFaceCulling=t.backFaceCulling)}function XBe(e,t){e._silhouetteDirty&&(oae(t)&&e.resetDrawCommands(),e._silhouetteDirty=!1)}function IBe(e,t){let n=e.hasSkipLevelOfDetail(t);n!==e._skipLevelOfDetail&&(e.resetDrawCommands(),e._skipLevelOfDetail=n)}function WBe(e,t){let n=0;e.isClippingEnabled()&&(e._clippingPlanes.owner===e&&e._clippingPlanes.update(t),n=e._clippingPlanes.clippingPlanesState),n!==e._clippingPlanesState&&(e.resetDrawCommands(),e._clippingPlanesState=n)}function PBe(e,t){t.mode!==e._sceneMode&&(e._projectTo2D?e.resetDrawCommands():e._updateModelMatrix=!0,e._sceneMode=t.mode)}function vBe(e,t){let n=t.fog.enabled&&t.fog.renderable;n!==e._fogRenderable&&(e.resetDrawCommands(),e._fogRenderable=n)}function wBe(e,t){let n=t.verticalExaggeration!==1;e._verticalExaggerationOn!==n&&(e.resetDrawCommands(),e._verticalExaggerationOn=n)}function FBe(e,t){e._drawCommandsBuilt||(e.destroyPipelineResources(),e._sceneGraph.buildDrawCommands(t),e._drawCommandsBuilt=!0)}function ABe(e,t){M.equals(e.modelMatrix,e._modelMatrix)||(e._updateModelMatrix=!0,e._modelMatrix=M.clone(e.modelMatrix,e._modelMatrix))}var yy=new h,tH=new he;function MBe(e){if(!e._updateModelMatrix&&!e._heightDirty&&e._minimumPixelSize===0)return;l(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);let t=e._scene;if(!l(t)||e.heightReference===Je.NONE){e._clampedModelMatrix=void 0;return}let"
}