{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 89,
    "total_chunks": 194,
    "chunk_size": 23247,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.698Z"
  },
  "content": "ue(\"Style references the NORMAL semantic but the point cloud does not have normals\");i.addDefine(\"COMPUTE_POSITION_WC_STYLE\",void 0,Ce.VERTEX),_.styleTranslucent&&(e.alphaOptions.pass=Ze.TRANSLUCENT)}let u=o.pointCloudShading;u.attenuation&&i.addDefine(\"HAS_POINT_CLOUD_ATTENUATION\",void 0,Ce.VERTEX),u.backFaceCulling&&i.addDefine(\"HAS_POINT_CLOUD_BACK_FACE_CULLING\",void 0,Ce.VERTEX);let m,p,b;rr.is3DTiles(o.type)&&(p=!0,m=o.content,b=m.tile.refine===vo.ADD),i.addUniform(\"vec4\",\"model_pointCloudParameters\",Ce.VERTEX),i.addVertexLines(pW);let f=e.uniformMap;f.model_pointCloudParameters=function(){let x=UDe,_=1;p&&(_=b?5:m.tileset.memoryAdjustedScreenSpaceError),x.x=g(u.maximumAttenuation,_),x.x*=n.pixelRatio;let C=DDe(e,t,u,m);x.y=C*u.geometricErrorScale;let V=n.context,L=n.camera.frustum,R;return n.mode===ie.SCENE2D||L instanceof rn?R=Number.POSITIVE_INFINITY:R=V.drawingBufferHeight/n.camera.frustum.sseDenominator,x.z=R,p&&(x.w=m.tileset.timeSinceLoad),x},i.addUniform(\"float\",\"model_pointCloudParameters1\",Ce.VERTEX),f.model_pointCloudParameters1=function(){let _=g(u.minimumPointSize,1);return _*=n.pixelRatio,_}};var Xse=new h;function DDe(e,t,n,i){if(!n.ignoreGeometricError&&l(i)){let u=i.tile.geometricError;if(u>0)return u}if(l(n.baseResolution))return n.baseResolution;let o=qt.getAttributeBySemantic(t,St.POSITION),r=o.count,s=e.runtimeNode.transform,a=h.subtract(o.max,o.min,Xse);a=M.multiplyByPointAsVector(s,a,Xse);let c=a.x*a.y*a.z;return P.cbrt(c/r)}var BDe={colorStyleFunction:void 0,showStyleFunction:void 0,pointSizeStyleFunction:void 0,styleTranslucent:!1},YDe={POSITION:\"attributes.positionMC\",POSITION_ABSOLUTE:\"v_positionWC\",COLOR:\"attributes.color_0\",NORMAL:\"attributes.normalMC\"};function ODe(e){let t=Oe(YDe);if(!l(e))return t;for(let n=0;n<e.length;n++){let o=e[n].properties;for(let r in o)o.hasOwnProperty(r)&&(t[r]=`metadata.${r}`)}return t}var Qz=\"ProcessedAttributes attributes, Metadata metadata, float tiles3d_tileset_time\";function zDe(e,t){let n=BDe,i={translucent:!1};return n.colorStyleFunction=e.getColorShaderFunction(`getColorFromStyle(${Qz})`,t,i),n.showStyleFunction=e.getShowShaderFunction(`getShowFromStyle(${Qz})`,t,i),n.pointSizeStyleFunction=e.getPointSizeShaderFunction(`getPointSizeFromStyle(${Qz})`,t,i),n.styleTranslucent=l(n.colorStyleFunction)&&i.translucent,n}function HDe(e,t){let n=t.colorStyleFunction;l(n)&&(e.addDefine(\"HAS_POINT_CLOUD_COLOR_STYLE\",void 0,Ce.BOTH),e.addVertexLines(n),e.addVarying(\"vec4\",\"v_pointCloudColor\"));let i=t.showStyleFunction;l(i)&&(e.addDefine(\"HAS_POINT_CLOUD_SHOW_STYLE\",void 0,Ce.VERTEX),e.addVertexLines(i));let o=t.pointSizeStyleFunction;l(o)&&(e.addDefine(\"HAS_POINT_CLOUD_POINT_SIZE_STYLE\",void 0,Ce.VERTEX),e.addVertexLines(o))}function jz(e,t){let n=/attributes\\.(\\w+)/g,i=n.exec(e);for(;i!==null;){let o=i[1];t.indexOf(o)===-1&&t.push(o),i=n.exec(e)}}function KDe(e){let t=e.colorStyleFunction,n=e.showStyleFunction,i=e.pointSizeStyleFunction,o=[];return l(t)&&jz(t,o),l(n)&&jz(n,o),l(i)&&jz(i,o),o}var bW=Ise;var PVn=T(S(),1);var VVn=T(S(),1),yW=`void primitiveOutlineStage() { v_outlineCoordinates = a_outlineCoordinates; } `;var ZVn=T(S(),1),gW=`void primitiveOutlineStage(inout czm_modelMaterial material) { if (!model_showOutline) { return; } float outlineX = texture(model_outlineTexture, vec2(v_outlineCoordinates.x, 0.5)).r; float outlineY = texture(model_outlineTexture, vec2(v_outlineCoordinates.y, 0.5)).r; float outlineZ = texture(model_outlineTexture, vec2(v_outlineCoordinates.z, 0.5)).r; float outlineness = max(outlineX, max(outlineY, outlineZ)); material.diffuse = mix(material.diffuse, model_outlineColor.rgb, model_outlineColor.a * outlineness); } `;var Wse={name:\"PrimitiveOutlinePipelineStage\"};Wse.process=function(e,t,n){let i=e.shaderBuilder,o=e.uniformMap;i.addDefine(\"HAS_PRIMITIVE_OUTLINE\",void 0,Ce.BOTH),i.addAttribute(\"vec3\",\"a_outlineCoordinates\"),i.addVarying(\"vec3\",\"v_outlineCoordinates\");let r=t.outlineCoordinates,s={index:e.attributeIndex++,vertexBuffer:r.buffer,componentsPerAttribute:tn.getNumberOfComponents(r.type),componentDatatype:r.componentDatatype,offsetInBytes:r.byteOffset,strideInBytes:r.byteStride,normalize:r.normalized};e.attributes.push(s),i.addUniform(\"sampler2D\",\"model_outlineTexture\",Ce.FRAGMENT);let a=s_.createTexture(n.context);o.model_outlineTexture=function(){return a};let c=e.model;i.addUniform(\"vec4\",\"model_outlineColor\",Ce.FRAGMENT),o.model_outlineColor=function(){return c.outlineColor},i.addUniform(\"bool\",\"model_showOutline\",Ce.FRAGMENT),o.model_showOutline=function(){return c.showOutline},i.addVertexLines(yW),i.addFragmentLines(gW)};var xW=Wse;var NVn=T(S(),1);var Pse={name:\"PrimitiveStatisticsPipelineStage\",_countGeometry:vse,_count2DPositions:wse,_countMorphTargetAttributes:Fse,_countMaterialTextures:Ase,_countFeatureIdTextures:Mse,_countBinaryMetadata:Nse};Pse.process=function(e,t,n){let i=e.model,o=i.statistics;vse(o,t),wse(o,e.runtimePrimitive),Fse(o,t),Ase(o,t.material),Mse(o,t.featureIds),Nse(o,i)};function vse(e,t){let n=l(t.indices)?t.indices.count:qt.getAttributeBySemantic(t,\"POSITION\").count,i=t.primitiveType;i===we.POINTS?e.pointsLength+=n:we.isTriangles(i)&&(e.trianglesLength+=JDe(i,n));let o=t.attributes,r=o.length;for(let c=0;c<r;c++){let d=o[c];if(l(d.buffer)){let u=l(d.typedArray);e.addBuffer(d.buffer,u)}}let s=t.outlineCoordinates;l(s)&&l(s.buffer)&&e.addBuffer(s.buffer,!1);let a=t.indices;if(l(a)&&l(a.buffer)){let c=l(a.typedArray);e.addBuffer(a.buffer,c)}}function JDe(e,t){switch(e){case we.TRIANGLES:return t/3;case we.TRIANGLE_STRIP:case we.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function wse(e,t){let n=t.positionBuffer2D;l(n)&&e.addBuffer(n,!0)}function Fse(e,t){let n=t.morphTargets;if(!l(n))return;let i=!1,o=n.length;for(let r=0;r<o;r++){let s=n[r].attributes,a=s.length;for(let c=0;c<a;c++){let d=s[c];l(d.buffer)&&e.addBuffer(d.buffer,i)}}}function Ase(e,t){let n=QDe(t),i=n.length;for(let o=0;o<i;o++){let r=n[o];l(r)&&l(r.texture)&&e.addTexture(r.texture)}}function QDe(e){let t=e.metallicRoughness,n=[e.emissiveTexture,e.normalTexture,e.occlusionTexture,t.baseColorTexture,t.metallicRoughnessTexture],i=e.specularGlossiness;return l(i)&&(n.push(i.diffuseTexture),n.push(i.specularGlossinessTexture)),n}function Mse(e,t){let n=t.length;for(let i=0;i<n;i++){let o=t[i];if(o instanceof Nt.FeatureIdTexture){let r=o.textureReader;l(r.texture)&&e.addTexture(r.texture)}}}function Nse(e,t){let n=t.structuralMetadata;l(n)&&(jDe(e,n),e.propertyTablesByteLength+=n.propertyTablesByteLength);let i=t.featureTables;if(!l(i))return;let o=i.length;for(let r=0;r<o;r++){let s=i[r];e.addBatchTexture(s.batchTexture)}}function jDe(e,t){let n=t.propertyTextures;if(!l(n))return;let i=n.length;for(let o=0;o<i;o++){let s=n[o].properties;for(let a in s)if(s.hasOwnProperty(a)){let d=s[a].textureReader;l(d.texture)&&e.addTexture(d.texture)}}}var _W=Pse;var eLn=T(S(),1);var qDe=new M,$De=new M,kse={name:\"SceneMode2DPipelineStage\"};kse.process=function(e,t,n){let i=qt.getAttributeBySemantic(t,St.POSITION),o=e.shaderBuilder,r=e.model,s=r.sceneGraph.computedModelMatrix,a=e.runtimeNode.computedTransform,c=M.multiplyTransformation(s,a,qDe),d=n3e(e,c,n),u=e.runtimePrimitive;u.boundingSphere2D=d;let m=e.runtimeNode.node.instances;if(l(m))return;if(l(i.typedArray)){let x=r3e(i,c,d,n);u.positionBuffer2D=x,r._modelResources.push(x),i.typedArray=void 0}o.addDefine(\"USE_2D_POSITIONS\",void 0,Ce.VERTEX),o.addUniform(\"mat4\",\"u_modelView2D\",Ce.VERTEX);let p=M.fromTranslation(d.center,new M),b=n.context,f={u_modelView2D:function(){return M.multiplyTransformation(b.uniformState.view,p,$De)}};e.uniformMap=Ct(f,e.uniformMap)};var e3e=new h,t3e=new h;function n3e(e,t,n){let i=M.multiplyByPoint(t,e.positionMin,e3e),o=Zi.computeActualWgs84Position(n,i,i),r=M.multiplyByPoint(t,e.positionMax,t3e),s=Zi.computeActualWgs84Position(n,r,r);return ce.fromCornerPoints(o,s,new ce)}var Use=new h;function i3e(e,t){let n=e.length,i=new Float32Array(n),o=t.quantizedVolumeOffset,r=t.quantizedVolumeStepSize;for(let s=0;s<n;s+=3){let a=h.fromArray(e,s,Use),c=h.multiplyComponents(a,r,a),d=h.add(c,o,c);i[s]=d.x,i[s+1]=d.y,i[s+2]=d.z}return i}function o3e(e,t,n,i){let o;l(e.quantization)?o=i3e(e.typedArray,e.quantization):o=e.typedArray.slice();let r=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,s=o.length,a=l(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let c=r;c<s;c+=a){let d=h.fromArray(o,c,Use);if(isNaN(d.x)||isNaN(d.y)||isNaN(d.z))continue;let u=M.multiplyByPoint(t,d,d),m=Zi.computeActualWgs84Position(i,u,u),p=h.subtract(m,n,m);o[c]=p.x,o[c+1]=p.y,o[c+2]=p.z}return o}function r3e(e,t,n,i){let o=Oe(i);o.mode=ie.COLUMBUS_VIEW;let r=n.center,s=o3e(e,t,r,o),a=pt.createVertexBuffer({context:i.context,typedArray:s,usage:Me.STATIC_DRAW});return a.vertexArrayDestroyable=!1,a}var TW=kse;var cLn=T(S(),1);var nLn=T(S(),1),SW=`void skinningStage(inout ProcessedAttributes attributes) { mat4 skinningMatrix = getSkinningMatrix(); mat3 skinningMatrixMat3 = mat3(skinningMatrix); vec4 positionMC = vec4(attributes.positionMC, 1.0); attributes.positionMC = vec3(skinningMatrix * positionMC); #ifdef HAS_NORMALS vec3 normalMC = attributes.normalMC; attributes.normalMC = skinningMatrixMat3 * normalMC; #endif #ifdef HAS_TANGENTS vec3 tangentMC = attributes.tangentMC; attributes.tangentMC = skinningMatrixMat3 * tangentMC; #endif }`;var d_={name:\"SkinningPipelineStage\",FUNCTION_ID_GET_SKINNING_MATRIX:\"getSkinningMatrix\",FUNCTION_SIGNATURE_GET_SKINNING_MATRIX:\"mat4 getSkinningMatrix()\"};d_.process=function(e,t){let n=e.shaderBuilder;n.addDefine(\"HAS_SKINNING\",void 0,Ce.VERTEX),a3e(n,t);let i=e.runtimeNode,o=i.computedJointMatrices;n.addUniform(\"mat4\",`u_jointMatrices[${o.length}]`,Ce.VERTEX),n.addVertexLines(SW);let r={u_jointMatrices:function(){return i.computedJointMatrices}};e.uniformMap=Ct(r,e.uniformMap)};function s3e(e){let t=-1,n=e.attributes,i=n.length;for(let o=0;o<i;o++){let r=n[o];(r.semantic===St.JOINTS||r.semantic===St.WEIGHTS)&&(t=Math.max(t,r.setIndex))}return t}function a3e(e,t){e.addFunction(d_.FUNCTION_ID_GET_SKINNING_MATRIX,d_.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,Ce.VERTEX),e.addFunctionLines(d_.FUNCTION_ID_GET_SKINNING_MATRIX,[\"mat4 skinnedMatrix = mat4(0);\"]);let i,o,r=[\"x\",\"y\",\"z\",\"w\"],s=s3e(t);for(i=0;i<=s;i++)for(o=0;o<=3;o++){let c=r[o],d=`skinnedMatrix += a_weights_${i}.${c} * u_jointMatrices[int(a_joints_${i}.${c})];`;e.addFunctionLines(d_.FUNCTION_ID_GET_SKINNING_MATRIX,[d])}e.addFunctionLines(d_.FUNCTION_ID_GET_SKINNING_MATRIX,[\"return skinnedMatrix;\"])}var CW=d_;var pLn=T(S(),1);var dLn=T(S(),1),VW=`void verticalExaggerationStage( inout ProcessedAttributes attributes ) { // Compute the distance from the camera to the local center of curvature. vec4 vertexPositionENU = czm_modelToEnu * vec4(attributes.positionMC, 1.0); vec2 vertexAzimuth = normalize(vertexPositionENU.xy); // Curvature = 1 / radius of curvature. float azimuthalCurvature = dot(vertexAzimuth * vertexAzimuth, czm_eyeEllipsoidCurvature); float eyeToCenter = 1.0 / azimuthalCurvature + czm_eyeHeight; // Compute the approximate ellipsoid normal at the vertex position. // Uses a circular approximation for the Earth curvature along the geodesic. vec3 vertexPositionEC = (czm_modelView * vec4(attributes.positionMC, 1.0)).xyz; vec3 centerToVertex = eyeToCenter * czm_eyeEllipsoidNormalEC + vertexPositionEC; vec3 vertexNormal = normalize(centerToVertex); // Estimate the (sine of the) angle between the camera direction and the vertex normal float verticalDistance = dot(vertexPositionEC, czm_eyeEllipsoidNormalEC); float horizontalDistance = length(vertexPositionEC - verticalDistance * czm_eyeEllipsoidNormalEC); float sinTheta = horizontalDistance / (eyeToCenter + verticalDistance); bool isSmallAngle = clamp(sinTheta, 0.0, 0.05) == sinTheta; // Approximate the change in height above the ellipsoid, from camera to vertex position. float exactVersine = 1.0 - dot(czm_eyeEllipsoidNormalEC, vertexNormal); float smallAngleVersine = 0.5 * sinTheta * sinTheta; float versine = isSmallAngle ? smallAngleVersine : exactVersine; float dHeight = dot(vertexPositionEC, vertexNormal) - eyeToCenter * versine; float vertexHeight = czm_eyeHeight + dHeight; // Transform the approximate vertex normal to model coordinates. vec3 vertexNormalMC = (czm_inverseModelView * vec4(vertexNormal, 0.0)).xyz; vertexNormalMC = normalize(vertexNormalMC); // Compute the exaggeration and apply it along the approximate vertex normal. float stretch = u_verticalExaggerationAndRelativeHeight.x; float shift = u_verticalExaggerationAndRelativeHeight.y; float exaggeration = (vertexHeight - shift) * (stretch - 1.0); attributes.positionMC += exaggeration * vertexNormalMC; } `;var Dse={name:\"VerticalExaggerationPipelineStage\"},c3e=new D;Dse.process=function(e,t,n){let{shaderBuilder:i,uniformMap:o}=e;i.addVertexLines(VW),i.addDefine(\"HAS_VERTICAL_EXAGGERATION\",void 0,Ce.VERTEX),i.addUniform(\"vec2\",\"u_verticalExaggerationAndRelativeHeight\",Ce.VERTEX),o.u_verticalExaggerationAndRelativeHeight=function(){return D.fromElements(n.verticalExaggeration,n.verticalExaggerationRelativeHeight,c3e)}};var LW=Dse;var ILn=T(S(),1);var _Ln=T(S(),1);var qz={};function l3e(e){let t=Ae.createTypedArray(e,e*2),n=e,i=0;for(let o=0;o<n;o+=3)t[i++]=o,t[i++]=o+1,t[i++]=o+1,t[i++]=o+2,t[i++]=o+2,t[i++]=o;return t}function d3e(e,t){let n=t.length,i=Ae.createTypedArray(e,n*2),o=0;for(let r=0;r<n;r+=3){let s=t[r],a=t[r+1],c=t[r+2];i[o++]=s,i[o++]=a,i[o++]=a,i[o++]=c,i[o++]=c,i[o++]=s}return i}function u3e(e){let t=e-2,n=2+t*4,i=Ae.createTypedArray(e,n),o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=r;return i}function m3e(e,t){let i=t.length-2,o=2+i*4,r=Ae.createTypedArray(e,o),s=0;r[s++]=t[0],r[s++]=t[1];for(let a=0;a<i;a++){let c=t[a],d=t[a+1],u=t[a+2];r[s++]=d,r[s++]=u,r[s++]=u,r[s++]=c}return r}function h3e(e){let t=e-2,n=2+t*4,i=Ae.createTypedArray(e,n),o=0;i[o++]=0,i[o++]=1;for(let r=0;r<t;r++)i[o++]=r+1,i[o++]=r+2,i[o++]=r+2,i[o++]=0;return i}function f3e(e,t){let i=t.length-2,o=2+i*4,r=Ae.createTypedArray(e,o),s=0,a=t[0];r[s++]=a,r[s++]=t[1];for(let c=0;c<i;c++){let d=t[c+1],u=t[c+2];r[s++]=d,r[s++]=u,r[s++]=u,r[s++]=a}return r}qz.createWireframeIndices=function(e,t,n){let i=l(n);if(e===we.TRIANGLES)return i?d3e(t,n):l3e(t);if(e===we.TRIANGLE_STRIP)return i?m3e(t,n):u3e(t);if(e===we.TRIANGLE_FAN)return i?f3e(t,n):h3e(t)};qz.getWireframeIndicesCount=function(e,t){return e===we.TRIANGLES?t*2:e===we.TRIANGLE_STRIP||e===we.TRIANGLE_FAN?2+(t-2)*4:t};var NC=qz;var Bse={name:\"WireframePipelineStage\"};Bse.process=function(e,t,n){e.shaderBuilder.addDefine(\"HAS_WIREFRAME\",void 0,Ce.FRAGMENT);let o=e.model,r=p3e(t,e.indices,n);o._pipelineResources.push(r),e.wireframeIndexBuffer=r,o.statistics.addBuffer(r,!1);let a=e.primitiveType,c=e.count;e.primitiveType=we.LINES,e.count=NC.getWireframeIndicesCount(a,c)};function p3e(e,t,n){let o=qt.getAttributeBySemantic(e,St.POSITION).count,r=n.context.webgl2,s;if(l(t)){let u=t.buffer,m=t.count;l(u)&&r?(s=u.sizeInBytes===m?new Uint8Array(m):Ae.createTypedArray(o,m),u.getBufferData(s)):s=t.typedArray}let a=e.primitiveType,c=NC.createWireframeIndices(a,o,s),d=Ae.fromSizeInBytes(c.BYTES_PER_ELEMENT);return pt.createIndexBuffer({context:n.context,typedArray:c,usage:Me.STATIC_DRAW,indexDatatype:d})}var ZW=Bse;function Yse(e){e=g(e,g.EMPTY_OBJECT);let t=e.primitive,n=e.node,i=e.model;this.primitive=t,this.node=n,this.model=i,this.pipelineStages=[],this.drawCommand=void 0,this.boundingSphere=void 0,this.boundingSphere2D=void 0,this.positionBuffer2D=void 0,this.batchLengths=void 0,this.batchOffsets=void 0,this.updateStages=[]}Yse.prototype.configurePipeline=function(e){let t=this.pipelineStages;t.length=0;let n=this.primitive,i=this.node,o=this.model,r=o.customShader,s=o.style,a=e.context.webgl2,d=e.mode!==ie.SCENE3D&&!e.scene3DOnly&&o._projectTo2D,u=e.verticalExaggeration!==1,m=l(n.morphTargets)&&n.morphTargets.length>0,p=l(i.skin),b=l(r),x=!(b&&l(r.fragmentShaderText))||r.mode!==n0.REPLACE_MATERIAL,_=qt.hasQuantizedAttributes(n.attributes),C=o.debugWireframe&&we.isTriangles(n.primitiveType)&&(o._enableDebugWireframe||a),V=o.pointCloudShading,L=l(V)&&V.attenuation,R=l(V)&&V.backFaceCulling,G=n.primitiveType===we.POINTS&&(l(s)||L||R),X=o._enableShowOutline&&l(n.outlineCoordinates),v=b3e(o,i,n),W=l(o.classificationType);d&&t.push(TW),t.push(aW),C&&t.push(ZW),W&&t.push(OI),m&&t.push(hW),p&&t.push(CW),G&&t.push(bW),_&&t.push(iW),x&&t.push(uW),t.push(my),t.push(gu),v.hasPropertyTable&&(t.push(fy),t.push(YI),t.push(KI)),u&&t.push(LW),b&&t.push(tW),t.push(lW),o.allowPicking&&t.push(fW),X&&t.push(xW),t.push(BI),t.push(_W)};function b3e(e,t,n){let i;return l(t.instances)&&(i=qt.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),l(i))?{hasFeatureIds:!0,hasPropertyTable:l(i.propertyTableId)}:(i=qt.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),l(i)?{hasFeatureIds:!0,hasPropertyTable:l(i.propertyTableId)}:{hasFeatureIds:!1,hasPropertyTable:!1})}var RW=Yse;var dZn=T(S(),1);function $z(e){e=g(e,g.EMPTY_OBJECT),this._sceneGraph=e.sceneGraph;let t=e.skin;this._skin=t,this._inverseBindMatrices=void 0,this._joints=[],this._jointMatrices=[],y3e(this)}Object.defineProperties($z.prototype,{skin:{get:function(){return this._skin}},sceneGraph:{get:function(){return this._sceneGraph}},inverseBindMatrices:{get:function(){return this._inverseBindMatrices}},joints:{get:function(){return this._joints}},jointMatrices:{get:function(){return this._jointMatrices}}});function y3e(e){let t=e.skin,n=t.inverseBindMatrices;e._inverseBindMatrices=n;let i=t.joints,o=i.length,r=e.sceneGraph._runtimeNodes,s=e.joints,a=e._jointMatrices;for(let c=0;c<o;c++){let d=i[c].index,u=r[d];s.push(u);let m=n[c],p=Ose(u,m,new M);a.push(p)}}function Ose(e,t,n){let i=M.multiplyTransformation(e.transformToRoot,e.transform,n);return n=M.multiplyTransformation(i,t,n),n}$z.prototype.updateJointMatrices=function(){let e=this._jointMatrices,t=e.length;for(let n=0;n<t;n++){let i=this.joints[n],o=this.inverseBindMatrices[n];e[n]=Ose(i,o,e[n])}};var GW=$z;var gZn=T(S(),1);var mZn=T(S(),1);function g3e(){this.pass=void 0,this.alphaCutoff=void 0}var EW=g3e;function x3e(e){this.shaderBuilder=new sx,this.model=e,this.uniformMap={},this.alphaOptions=new EW,this.renderStateOptions=Ne.getState(Ne.fromCache({depthTest:{enabled:!0,func:tc.LESS_OR_EQUAL}})),this.hasSilhouette=!1,this.hasSkipLevelOfDetail=!1}var XW=x3e;var EZn=T(S(),1);var _Zn=T(S(),1),IW=`void silhouetteStage(inout vec4 color) { if(model_silhouettePass) { color = czm_gammaCorrect(model_silhouetteColor); } }`;var SZn=T(S(),1),WW=`void silhouetteStage(in ProcessedAttributes attributes, inout vec4 positionClip) { #ifdef HAS_NORMALS if(model_silhouettePass) { vec3 normal = normalize(czm_normal3D * attributes.normalMC); normal.x *= czm_projection[0][0]; normal.y *= czm_projection[1][1]; positionClip.xy += normal.xy * positionClip.w * model_silhouetteSize * czm_pixelRatio / czm_viewport.z; } #endif } `;var fN={name:\"ModelSilhouettePipelineStage\"};fN.silhouettesLength=0;fN.process=function(e,t,n){l(t._silhouetteId)||(t._silhouetteId=++fN.silhouettesLength);let i=e.shaderBuilder;i.addDefine(\"HAS_SILHOUETTE\",void 0,Ce.BOTH),i.addVertexLines(WW),i.addFragmentLines(IW),i.addUniform(\"vec4\",\"model_silhouetteColor\",Ce.FRAGMENT),i.addUniform(\"float\",\"model_silhouetteSize\",Ce.VERTEX),i.addUniform(\"bool\",\"model_silhouettePass\",Ce.BOTH);let o={model_silhouetteColor:function(){return t.silhouetteColor},model_silhouetteSize:function(){return t.silhouetteSize},model_silhouettePass:function(){return!1}};e.uniformMap=Ct(o,e.uniformMap),e.hasSilhouette=!0};var PW=fN;var FZn=T(S(),1);var IZn=T(S(),1),vW=`void modelSplitterStage() { // Don't split when rendering the shadow map, because it is rendered from // the perspective of a totally different camera. #ifndef SHADOW_MAP if (model_splitDirection < 0.0 && gl_FragCoord.x > czm_splitPosition) discard; if (model_splitDirection > 0.0 && gl_FragCoord.x < czm_splitPosition) discard; #endif } `;var pN={name:\"ModelSplitterPipelineStage\",SPLIT_DIRECTION_UNIFORM_NAME:\"model_splitDirection\"};pN.process=function(e,t,n){let i=e.shaderBuilder;i.addDefine(\"HAS_MODEL_SPLITTER\",void 0,Ce.FRAGMENT),i.addFragmentLines(vW);let o={};i.addUniform(\"float\",pN.SPLIT_DIRECTION_UNIFORM_NAME,Ce.FRAGMENT),o[pN.SPLIT_DIRECTION_UNIFORM_NAME]=function(){return t.splitDirection},e.uniformMap=Ct(o,e.uniformMap)};var wW=pN;var NZn=T(S(),1);function _3e(e,t){this.model=e.model,this.shaderBuilder=e.shaderBuilder.clone(),this.uniformMap=Oe(e.uniformMap),this.alphaOptions=Oe(e.alphaOptions),this.renderStateOptions=Oe(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.runtimeNode=t,this.attributes=[],this.attributeIndex=1,this.featureIdVertexAttributeSetIndex=0,this.instanceCount=0}var FW=_3e;var jZn=T(S(),1);var BZn=T(S(),1);function T3e(e){e=g(e,g.EMPTY_OBJECT),this.lightingModel=g(e.lightingModel,lf.UNLIT)}var AW=T3e;function S3e(e,t){this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.uniformMap=Oe(e.uniformMap),this.alphaOptions=Oe(e.alphaOptions),this.renderStateOptions=Oe(e.renderStateOptions,!0),this.hasSilhouette=e.hasSilhouette,this.hasSkipLevelOfDetail=e.hasSkipLevelOfDetail,this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;let n=t.primitive;this.count=l(n.indices)?n.indices.count:qt.getAttributeBySemantic(n,\"POSITION\").count,this.hasPropertyTable=!1,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;let i=qt.getPositionMinMax(n,this.runtimeNode.instancingTranslationMin,this.runtimeNode.instancingTranslationMax);this.positionMin=h.clone(i.min,new h),this.positionMax=h.clone(i.max,new h),this.boundingSphere=ce.fromCornerPoints(this.positionMin,this.positionMax,new ce),this.lightingOptions=new AW,this.pickId=void 0}var MW=S3e;function bd(e){e=g(e,g.EMPTY_OBJECT);let t=e.modelComponents;this._model=e.model,this._components=t,this._pipelineStages=[],this._updateStages=[],this._runtimeNodes=[],this._rootNodes=[],this._skinnedNodes=[],this._runtimeSkins=[],this.modelPipelineStages=[],this._boundingSphere=void 0,this._boundingSphere2D=void 0,this._computedModelMatrix=M.clone(M.IDENTITY),this._computedModelMatrix2D=M.clone(M.IDENTITY),this._axisCorrectionMatrix=qt.getAxisCorrectionMatrix(t.upAxis,t.forwardAxis,new M),this._runtimeArticulations={},C3e(this)}Object.defineProperties(bd.prototype,{components:{get:function(){return this._components}},computedModelMatrix:{get:function(){return this._computedModelMatrix}},axisCorrectionMatrix:{get:function(){return this._axisCorrectionMatrix}},boundingSphere:{get:function(){return this._boundingSphere}}});function C3e(e){let t=e._components,n=t.scene,o=e._model.modelMatrix;zse(e,o);let r=t.articulations,s=r.length,a=e._runtimeArticulations;for(let V=0;V<s;V++){let L=r[V],R=new XI({articulation:L,sceneGraph:e}),G=R.name;a[G]=R}let c=t.nodes,d=c.length;e._runtimeNodes=new Array(d);let m=n.nodes.length,p=M.IDENTITY;for(let V=0;V<m;V++){let"
}