{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 56,
    "total_chunks": 194,
    "chunk_size": 51085,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.679Z"
  },
  "content": "D,new D];function Ene(e,t){let n=XWe,i=D.unpack(t,0,n[0]),o=D.unpack(t,2,n[1]),r=D.unpack(t,4,n[2]);e.uMaxVmax=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:4,normalize:!1,value:[o.x,o.y,r.x,r.y]});let s=1/Vne(i,o,r),a=1/Vne(i,r,o);e.uvMinAndExtents=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:4,normalize:!1,value:[i.x,i.y,s,a]})}var Xne=new he,Ine=new h,IWe=new h,WWe=new h,Z5={high:0,low:0};function Wne(e,t,n){let i=Xne;i.height=0,i.longitude=e.west,i.latitude=e.south;let o=t.project(i,Ine);i.latitude=e.north;let r=t.project(i,IWe);i.longitude=e.east,i.latitude=e.south;let s=t.project(i,WWe),a=[0,0,0,0],c=[0,0,0,0],d=Yn.encode(o.x,Z5);a[0]=d.high,c[0]=d.low,d=Yn.encode(o.y,Z5),a[1]=d.high,c[1]=d.low,d=Yn.encode(r.y,Z5),a[2]=d.high,c[2]=d.low,d=Yn.encode(s.x,Z5),a[3]=d.high,c[3]=d.low,n.planes2D_HIGH=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:4,normalize:!1,value:a}),n.planes2D_LOW=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:4,normalize:!1,value:c})}var PWe=new M,vWe=new M,Lne=new h,wWe=new he,FWe=[new he,new he,new he,new he,new he,new he,new he,new he];function AWe(e,t,n,i,o,r){let s=le.center(e,wWe);s.height=n;let a=he.toCartesian(s,t,Lne),c=Wt.eastNorthUpToFixedFrame(a,t,PWe),d=M.inverse(c,vWe),u=e.west,m=e.east,p=e.north,b=e.south,f=FWe;f[0].latitude=b,f[0].longitude=u,f[1].latitude=p,f[1].longitude=u,f[2].latitude=p,f[2].longitude=m,f[3].latitude=b,f[3].longitude=m;let x=(u+m)*.5,_=(p+b)*.5;f[4].latitude=b,f[4].longitude=x,f[5].latitude=p,f[5].longitude=x,f[6].latitude=_,f[6].longitude=u,f[7].latitude=_,f[7].longitude=m;let C=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY;for(let W=0;W<8;W++){f[W].height=n;let F=he.toCartesian(f[W],t,Lne);M.multiplyByPoint(d,F,F),F.z=0,C=Math.min(C,F.x),V=Math.max(V,F.x),L=Math.min(L,F.y),R=Math.max(R,F.y)}let G=i;G.x=C,G.y=L,G.z=0,M.multiplyByPoint(c,G,G);let X=o;X.x=V,X.y=L,X.z=0,M.multiplyByPoint(c,X,X),h.subtract(X,G,o);let v=r;v.x=C,v.y=R,v.z=0,M.multiplyByPoint(c,v,v),h.subtract(v,G,r)}var MWe=new h,NWe=new h,kWe=new Yn;uu.getPlanarTextureCoordinateAttributes=function(e,t,n,i,o){let r=Ine,s=MWe,a=NWe;AWe(e,n,g(o,0),r,s,a);let c={};Ene(c,t);let d=Yn.fromCartesian(r,kWe);return c.southWest_HIGH=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:3,normalize:!1,value:h.pack(d.high,[0,0,0])}),c.southWest_LOW=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:3,normalize:!1,value:h.pack(d.low,[0,0,0])}),c.eastward=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:3,normalize:!1,value:h.pack(s,[0,0,0])}),c.northward=new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:3,normalize:!1,value:h.pack(a,[0,0,0])}),Wne(e,i,c),c};var UWe=new h;function Zne(e,t,n,i){let o=Xne;o.latitude=e,o.longitude=t,o.height=0;let r=he.toCartesian(o,n,UWe),s=Math.sqrt(r.x*r.x+r.y*r.y),a=P.fastApproximateAtan2(s,r.z),c=P.fastApproximateAtan2(r.x,r.y);return i.x=a,i.y=c,i}var Rne=new D;uu.getSphericalExtentGeometryInstanceAttributes=function(e,t,n,i){let o=Zne(e.south,e.west,n,Rne),r=o.x,s=o.y,a=Zne(e.north,e.east,n,Rne),c=a.x,d=a.y,u=0;s>d&&(u=P.PI-s,s=-P.PI,d+=u),r-=P.EPSILON5,s-=P.EPSILON5,c+=P.EPSILON5,d+=P.EPSILON5;let m=1/(d-s),p=1/(c-r),b={sphericalExtents:new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:4,normalize:!1,value:[r,s,p,m]}),longitudeRotation:new nc({componentDatatype:Q.FLOAT,componentsPerAttribute:1,normalize:!1,value:[u]})};return Ene(b,t),Wne(e,i,b),b};uu.hasAttributesForTextureCoordinatePlanes=function(e){return l(e.southWest_HIGH)&&l(e.southWest_LOW)&&l(e.northward)&&l(e.eastward)&&l(e.planes2D_HIGH)&&l(e.planes2D_LOW)&&l(e.uMaxVmax)&&l(e.uvMinAndExtents)};uu.hasAttributesForSphericalExtents=function(e){return l(e.sphericalExtents)&&l(e.longitudeRotation)&&l(e.planes2D_HIGH)&&l(e.planes2D_LOW)&&l(e.uMaxVmax)&&l(e.uvMinAndExtents)};function DWe(e){return Math.max(e.width,e.height)>uu.MAX_WIDTH_FOR_PLANAR_EXTENTS}uu.shouldUseSphericalCoordinates=function(e){return DWe(e)};uu.MAX_WIDTH_FOR_PLANAR_EXTENTS=P.toRadians(1);var ld=uu;var IJt=T(S(),1);var VJt=T(S(),1);var BWe={NEVER:ne.NEVER,LESS:ne.LESS,EQUAL:ne.EQUAL,LESS_OR_EQUAL:ne.LEQUAL,GREATER:ne.GREATER,NOT_EQUAL:ne.NOTEQUAL,GREATER_OR_EQUAL:ne.GEQUAL,ALWAYS:ne.ALWAYS},vn=Object.freeze(BWe);var RJt=T(S(),1);var YWe={ZERO:ne.ZERO,KEEP:ne.KEEP,REPLACE:ne.REPLACE,INCREMENT:ne.INCR,DECREMENT:ne.DECR,INVERT:ne.INVERT,INCREMENT_WRAP:ne.INCR_WRAP,DECREMENT_WRAP:ne.DECR_WRAP},dt=Object.freeze(YWe);var R5={CESIUM_3D_TILE_MASK:128,SKIP_LOD_MASK:112,SKIP_LOD_BIT_SHIFT:4,CLASSIFICATION_MASK:15};R5.setCesium3DTileBit=function(){return{enabled:!0,frontFunction:vn.ALWAYS,frontOperation:{fail:dt.KEEP,zFail:dt.KEEP,zPass:dt.REPLACE},backFunction:vn.ALWAYS,backOperation:{fail:dt.KEEP,zFail:dt.KEEP,zPass:dt.REPLACE},reference:R5.CESIUM_3D_TILE_MASK,mask:R5.CESIUM_3D_TILE_MASK}};var Mt=Object.freeze(R5);function xx(e){e=g(e,g.EMPTY_OBJECT);let t=e.geometryInstances;this.geometryInstances=t,this.show=g(e.show,!0),this.classificationType=g(e.classificationType,Un.BOTH),this.debugShowBoundingVolume=g(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=g(e.debugShowShadowVolume,!1),this._debugShowShadowVolume=!1,this._extruded=g(e._extruded,!1),this._uniformMap=e._uniformMap,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._spColor=void 0,this._spPick2D=void 0,this._spColor2D=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._commandsIgnoreShow=[],this._ready=!1,this._primitive=void 0,this._pickPrimitive=e._pickPrimitive,this._hasSphericalExtentsAttribute=!1,this._hasPlanarExtentsAttributes=!1,this._hasPerColorAttribute=!1,this.appearance=e.appearance,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._usePickOffsets=!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:g(e.vertexCacheOptimize,!1),interleave:g(e.interleave,!1),releaseGeometryInstances:g(e.releaseGeometryInstances,!0),allowPicking:g(e.allowPicking,!0),asynchronous:g(e.asynchronous,!0),compressVertices:g(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_createRenderStatesFunction:void 0,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0,_createPickOffsets:!0}}Object.defineProperties(xx.prototype,{vertexCacheOptimize:{get:function(){return this._primitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},compressVertices:{get:function(){return this._primitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},_needs2DShader:{get:function(){return this._hasPlanarExtentsAttributes||this._hasSphericalExtentsAttribute}}});xx.isSupported=function(e){return e.context.stencilBuffer};function qS(e,t){let n=t?vn.EQUAL:vn.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:e,frontFunction:n,frontOperation:{fail:dt.KEEP,zFail:dt.DECREMENT_WRAP,zPass:dt.KEEP},backFunction:n,backOperation:{fail:dt.KEEP,zFail:dt.INCREMENT_WRAP,zPass:dt.KEEP},reference:Mt.CESIUM_3D_TILE_MASK,mask:Mt.CESIUM_3D_TILE_MASK},stencilMask:Mt.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:tc.LESS_OR_EQUAL},depthMask:!1}}function TO(e){return{stencilTest:{enabled:e,frontFunction:vn.NOT_EQUAL,frontOperation:{fail:dt.ZERO,zFail:dt.ZERO,zPass:dt.ZERO},backFunction:vn.NOT_EQUAL,backOperation:{fail:dt.ZERO,zFail:dt.ZERO,zPass:dt.ZERO},reference:0,mask:Mt.CLASSIFICATION_MASK},stencilMask:Mt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:un.PRE_MULTIPLIED_ALPHA_BLEND}}var OWe={stencilTest:{enabled:!0,frontFunction:vn.NOT_EQUAL,frontOperation:{fail:dt.ZERO,zFail:dt.ZERO,zPass:dt.ZERO},backFunction:vn.NOT_EQUAL,backOperation:{fail:dt.ZERO,zFail:dt.ZERO,zPass:dt.ZERO},reference:0,mask:Mt.CLASSIFICATION_MASK},stencilMask:Mt.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function zWe(e,t,n,i){if(l(e._rsStencilDepthPass))return;let o=!e.debugShowShadowVolume;e._rsStencilDepthPass=Ne.fromCache(qS(o,!1)),e._rsStencilDepthPass3DTiles=Ne.fromCache(qS(o,!0)),e._rsColorPass=Ne.fromCache(TO(o,!1)),e._rsPickPass=Ne.fromCache(OWe)}function HWe(e,t){if(!e.compressVertices)return t;if(t.search(/in\\s+vec3\\s+extrudeDirection;/g)!==-1){let n=\"compressedAttributes\",i=`in vec2 ${n};`,o=`vec3 extrudeDirection; `,r=` extrudeDirection = czm_octDecode(${n}, 65535.0); `,s=t;s=s.replace(/in\\s+vec3\\s+extrudeDirection;/g,\"\"),s=Ue.replaceMain(s,\"czm_non_compressed_main\");let a=`void main() { ${r} czm_non_compressed_main(); }`;return[i,o,s,a].join(` `)}}function KWe(e,t){let n=t.context,i=e._primitive,o=GE;o=e._primitive._batchTable.getVertexShaderCallback()(o),o=Rn._appendDistanceDisplayConditionToShader(i,o),o=Rn._modifyShaderPosition(e,o,t.scene3DOnly),o=Rn._updateColorAttribute(i,o);let r=e._hasPlanarExtentsAttributes,s=r||e._hasSphericalExtentsAttribute;e._extruded&&(o=HWe(i,o));let a=e._extruded?\"EXTRUDED_GEOMETRY\":\"\",c=new Ue({defines:[a],sources:[o]}),d=new Ue({sources:[wb]}),u=e._primitive._attributeLocations,m=new ld(s,r,e.appearance);if(e._spStencil=Ht.replaceCache({context:n,shaderProgram:e._spStencil,vertexShaderSource:c,fragmentShaderSource:d,attributeLocations:u}),e._primitive.allowPicking){let f=Ue.createPickVertexShaderSource(o);f=Rn._appendShowToShader(i,f),f=Rn._updatePickColorAttribute(f);let x=m.createPickFragmentShader(!1),_=m.createPickVertexShader([a],f,!1,t.mapProjection);if(e._spPick=Ht.replaceCache({context:n,shaderProgram:e._spPick,vertexShaderSource:_,fragmentShaderSource:x,attributeLocations:u}),s){let C=n.shaderCache.getDerivedShaderProgram(e._spPick,\"2dPick\");if(!l(C)){let V=m.createPickFragmentShader(!0),L=m.createPickVertexShader([a],f,!0,t.mapProjection);C=n.shaderCache.createDerivedShaderProgram(e._spPick,\"2dPick\",{vertexShaderSource:L,fragmentShaderSource:V,attributeLocations:u})}e._spPick2D=C}}else e._spPick=Ht.fromCache({context:n,vertexShaderSource:c,fragmentShaderSource:d,attributeLocations:u});o=Rn._appendShowToShader(i,o),c=new Ue({defines:[a],sources:[o]}),e._sp=Ht.replaceCache({context:n,shaderProgram:e._sp,vertexShaderSource:c,fragmentShaderSource:d,attributeLocations:u});let p=m.createFragmentShader(!1),b=m.createVertexShader([a],o,!1,t.mapProjection);if(e._spColor=Ht.replaceCache({context:n,shaderProgram:e._spColor,vertexShaderSource:b,fragmentShaderSource:p,attributeLocations:u}),s){let f=n.shaderCache.getDerivedShaderProgram(e._spColor,\"2dColor\");if(!l(f)){let x=m.createFragmentShader(!0),_=m.createVertexShader([a],o,!0,t.mapProjection);f=n.shaderCache.createDerivedShaderProgram(e._spColor,\"2dColor\",{vertexShaderSource:_,fragmentShaderSource:x,attributeLocations:u})}e._spColor2D=f}}function JWe(e,t){let n=e._primitive,i=n._va.length*2;t.length=i;let o,r,s,a=0,c=n._batchTable.getUniformMapCallback()(e._uniformMap),d=e._needs2DShader;for(o=0;o<i;o+=2){let b=n._va[a++];r=t[o],l(r)||(r=t[o]=new je({owner:e,primitiveType:n._primitiveType})),r.vertexArray=b,r.renderState=e._rsStencilDepthPass,r.shaderProgram=e._sp,r.uniformMap=c,r.pass=Ze.TERRAIN_CLASSIFICATION,s=je.shallowClone(r,r.derivedCommands.tileset),s.renderState=e._rsStencilDepthPass3DTiles,s.pass=Ze.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=s,r=t[o+1],l(r)||(r=t[o+1]=new je({owner:e,primitiveType:n._primitiveType})),r.vertexArray=b,r.renderState=e._rsColorPass,r.shaderProgram=e._spColor,r.pass=Ze.TERRAIN_CLASSIFICATION;let x=e.appearance.material;if(l(x)&&(c=Ct(c,x._uniforms)),r.uniformMap=c,s=je.shallowClone(r,r.derivedCommands.tileset),s.pass=Ze.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=s,d){let _=je.shallowClone(r,r.derivedCommands.appearance2D);_.shaderProgram=e._spColor2D,r.derivedCommands.appearance2D=_,_=je.shallowClone(s,s.derivedCommands.appearance2D),_.shaderProgram=e._spColor2D,s.derivedCommands.appearance2D=_}}let u=e._commandsIgnoreShow,m=e._spStencil,p=0;i=u.length=i/2;for(let b=0;b<i;++b){let f=u[b]=je.shallowClone(t[p],u[b]);f.shaderProgram=m,f.pass=Ze.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,p+=2}}function QWe(e,t){let n=e._usePickOffsets,i=e._primitive,o=i._va.length*2,r,s=0,a;n&&(r=i._pickOffsets,o=r.length*2),t.length=o;let c,d,u,m=0,p=i._batchTable.getUniformMapCallback()(e._uniformMap),b=e._needs2DShader;for(c=0;c<o;c+=2){let f=i._va[m++];if(n&&(a=r[s++],f=i._va[a.index]),d=t[c],l(d)||(d=t[c]=new je({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),d.vertexArray=f,d.renderState=e._rsStencilDepthPass,d.shaderProgram=e._sp,d.uniformMap=p,d.pass=Ze.TERRAIN_CLASSIFICATION,n&&(d.offset=a.offset,d.count=a.count),u=je.shallowClone(d,d.derivedCommands.tileset),u.renderState=e._rsStencilDepthPass3DTiles,u.pass=Ze.CESIUM_3D_TILE_CLASSIFICATION,d.derivedCommands.tileset=u,d=t[c+1],l(d)||(d=t[c+1]=new je({owner:e,primitiveType:i._primitiveType,pickOnly:!0})),d.vertexArray=f,d.renderState=e._rsPickPass,d.shaderProgram=e._spPick,d.uniformMap=p,d.pass=Ze.TERRAIN_CLASSIFICATION,n&&(d.offset=a.offset,d.count=a.count),u=je.shallowClone(d,d.derivedCommands.tileset),u.pass=Ze.CESIUM_3D_TILE_CLASSIFICATION,d.derivedCommands.tileset=u,b){let x=je.shallowClone(d,d.derivedCommands.pick2D);x.shaderProgram=e._spPick2D,d.derivedCommands.pick2D=x,x=je.shallowClone(u,u.derivedCommands.pick2D),x.shaderProgram=e._spPick2D,u.derivedCommands.pick2D=x}}}function jWe(e,t,n,i,o,r,s){JWe(e,r),QWe(e,s)}function Pne(e,t){return Math.floor(e%t/2)}function _O(e,t,n,i,o,r){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,e.debugShowBoundingVolume=r,t.commandList.push(e)}function vne(e,t,n,i,o){e.modelMatrix=n,e.boundingVolume=o,e.cull=i,t.commandList.push(e)}function qWe(e,t,n,i,o,r,s,a){let c=e._primitive;Rn._updateBoundingVolumes(c,t,o);let d;t.mode===ie.SCENE3D?d=c._boundingSphereWC:t.mode===ie.COLUMBUS_VIEW?d=c._boundingSphereCV:t.mode===ie.SCENE2D&&l(c._boundingSphere2D)?d=c._boundingSphere2D:l(c._boundingSphereMorph)&&(d=c._boundingSphereMorph);let u=e.classificationType,m=u!==Un.CESIUM_3D_TILE,p=u!==Un.TERRAIN,b=t.passes,f,x,_;if(b.render){let C=n.length;for(f=0;f<C;++f)x=d[Pne(f,C)],m&&(_=n[f],_O(_,t,o,r,x,s)),p&&(_=n[f].derivedCommands.tileset,_O(_,t,o,r,x,s));if(t.invertClassification){let V=e._commandsIgnoreShow,L=V.length;for(f=0;f<L;++f)x=d[f],_=V[f],_O(_,t,o,r,x,s)}}if(b.pick){let C=i.length,V=c._pickOffsets;for(f=0;f<C;++f){let L=V[Pne(f,C)];x=d[L.index],m&&(_=i[f],vne(_,t,o,r,x)),p&&(_=i[f].derivedCommands.tileset,vne(_,t,o,r,x))}}}xx.prototype.update=function(e){if(!l(this._primitive)&&!l(this.geometryInstances))return;let t=this.appearance;l(t)&&l(t.material)&&t.material.update(e.context);let n=this,i=this._primitiveOptions;if(!l(this._primitive)){let o=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],r=o.length,s,a,c,d=!1,u=!0,m,p=!1,b=!1;for(r>0&&(c=o[0].attributes,p=ld.hasAttributesForSphericalExtents(c),b=ld.hasAttributesForTextureCoordinatePlanes(c),m=c.color),s=0;s<r;s++){a=o[s];let x=a.attributes.color;l(x)&&(d=!0),u=u&&l(x)&&Ot.equals(m,x)}if(!u&&!p&&!b)throw new fe(\"All GeometryInstances must have the same color attribute except via GroundPrimitives\");d&&!l(t)&&(t=new ln({flat:!0}),this.appearance=t),this._usePickOffsets=!p&&!b,this._hasSphericalExtentsAttribute=p,this._hasPlanarExtentsAttributes=b,this._hasPerColorAttribute=d;let f=new Array(r);for(s=0;s<r;++s)a=o[s],f[s]=new Vt({geometry:a.geometry,attributes:a.attributes,modelMatrix:a.modelMatrix,id:a.id,pickPrimitive:g(this._pickPrimitive,n)});i.appearance=t,i.geometryInstances=f,l(this._createBoundingVolumeFunction)&&(i._createBoundingVolumeFunction=function(x,_){n._createBoundingVolumeFunction(x,_)}),i._createRenderStatesFunction=function(x,_,C,V){zWe(n,_)},i._createShaderProgramFunction=function(x,_,C){KWe(n,_)},i._createCommandsFunction=function(x,_,C,V,L,R,G){jWe(n,void 0,void 0,!0,!1,R,G)},l(this._updateAndQueueCommandsFunction)?i._updateAndQueueCommandsFunction=function(x,_,C,V,L,R,G,X){n._updateAndQueueCommandsFunction(x,_,C,V,L,R,G,X)}:i._updateAndQueueCommandsFunction=function(x,_,C,V,L,R,G,X){qWe(n,_,C,V,L,R,G,X)},this._primitive=new Rn(i)}this.debugShowShadowVolume&&!this._debugShowShadowVolume&&this._ready?(this._debugShowShadowVolume=!0,this._rsStencilDepthPass=Ne.fromCache(qS(!1,!1)),this._rsStencilDepthPass3DTiles=Ne.fromCache(qS(!1,!0)),this._rsColorPass=Ne.fromCache(TO(!1))):!this.debugShowShadowVolume&&this._debugShowShadowVolume&&(this._debugShowShadowVolume=!1,this._rsStencilDepthPass=Ne.fromCache(qS(!0,!1)),this._rsStencilDepthPass3DTiles=Ne.fromCache(qS(!0,!0)),this._rsColorPass=Ne.fromCache(TO(!0))),this._primitive.appearance!==t&&(this._primitive.appearance=t),this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{l(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};xx.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};xx.prototype.isDestroyed=function(){return!1};xx.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._spColor=this._spColor&&this._spColor.destroy(),this._spPick2D=void 0,this._spColor2D=void 0,me(this)};var $S=xx;var $We={u_globeMinimumAltitude:function(){return 55e3}};function Cl(e){e=g(e,g.EMPTY_OBJECT);let t=e.appearance,n=e.geometryInstances;if(!l(t)&&l(n)){let o=Array.isArray(n)?n:[n],r=o.length;for(let s=0;s<r;s++){let a=o[s].attributes;if(l(a)&&l(a.color)){t=new ln({flat:!0});break}}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=g(e.show,!0),this.classificationType=g(e.classificationType,Un.BOTH),this.debugShowBoundingVolume=g(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=g(e.debugShowShadowVolume,!1),this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1,this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=ai._defaultMaxTerrainHeight,this._minTerrainHeight=ai._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;let i=this;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:g(e.vertexCacheOptimize,!1),interleave:g(e.interleave,!1),releaseGeometryInstances:g(e.releaseGeometryInstances,!0),allowPicking:g(e.allowPicking,!0),asynchronous:g(e.asynchronous,!0),compressVertices:g(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:i,_extruded:!0,_uniformMap:$We}}Object.defineProperties(Cl.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}}});Cl.isSupported=$S.isSupported;function wne(e){return function(t,n){let i=n.maximumRadius,o=i/Math.cos(t*.5)-i;return e._maxHeight+o}}function Fne(e){return function(t,n){return e._minHeight}}var e2e=new h,t2e=new h,n2e=new h,i2e=new he,o2e=new le;function G5(e,t){let n=e.mapProjection.ellipsoid;if(!l(t.attributes)||!l(t.attributes.position3DHigh))return l(t.rectangle)?t.rectangle:void 0;let i=t.attributes.position3DHigh.values,o=t.attributes.position3DLow.values,r=i.length,s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;for(let m=0;m<r;m+=3){let p=h.unpack(i,m,e2e),b=h.unpack(o,m,t2e),f=h.add(p,b,n2e),x=n.cartesianToCartographic(f,i2e),_=x.latitude,C=x.longitude;s=Math.min(s,_),a=Math.min(a,C),c=Math.max(c,_),d=Math.max(d,C)}let u=o2e;return u.north=c,u.south=s,u.east=d,u.west=a,u}function r2e(e,t,n){let i=ai.getMinimumMaximumHeights(t,n);e._minTerrainHeight=i.minimumTerrainHeight,e._maxTerrainHeight=i.maximumTerrainHeight}function s2e(e,t,n){let i=t.mapProjection.ellipsoid,o=G5(t,n),r=Zn.fromRectangle(o,e._minHeight,e._maxHeight,i);if(e._boundingVolumes.push(r),!t.scene3DOnly){let s=t.mapProjection,a=ce.fromRectangleWithHeights2D(o,s,e._maxHeight,e._minHeight);h.fromElements(a.center.z,a.center.x,a.center.y,a.center),e._boundingVolumes2D.push(a)}}function SO(e,t){return Math.floor(e%t/2)}function CO(e,t,n,i,o,r,s){let a=e._primitive;n.mode!==ie.SCENE3D&&t.shaderProgram===a._spColor&&a._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,t.debugShowBoundingVolume=s,n.commandList.push(t)}function Ane(e,t,n,i,o,r){let s=e._primitive;n.mode!==ie.SCENE3D&&t.shaderProgram===s._spPick&&s._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=i,t.boundingVolume=r,t.cull=o,n.commandList.push(t)}function a2e(e,t,n,i,o,r,s,a){let c;t.mode===ie.SCENE3D?c=e._boundingVolumes:c=e._boundingVolumes2D;let d=e.classificationType,u=d!==Un.CESIUM_3D_TILE,m=d!==Un.TERRAIN,p=t.passes,b=e._primitive,f,x,_;if(p.render){let C=n.length;for(f=0;f<C;++f)x=c[SO(f,C)],u&&(_=n[f],CO(e,_,t,o,r,x,s)),m&&(_=n[f].derivedCommands.tileset,CO(e,_,t,o,r,x,s));if(t.invertClassification){let V=b._commandsIgnoreShow,L=V.length;for(f=0;f<L;++f)x=c[f],_=V[f],CO(e,_,t,o,r,x,s)}}if(p.pick){let C=i.length,V;for(e._useFragmentCulling||(V=b._primitive._pickOffsets),f=0;f<C;++f){if(x=c[SO(f,C)],!e._useFragmentCulling){let L=V[SO(f,C)];x=c[L.index]}u&&(_=i[f],Ane(e,_,t,o,r,x)),m&&(_=i[f].derivedCommands.tileset,Ane(e,_,t,o,r,x))}}}Cl.initializeTerrainHeights=function(){return ai.initialize()};Cl.prototype.update=function(e){if(!l(this._primitive)&&!l(this.geometryInstances))return;if(!ai.initialized){Cl.initializeTerrainHeights();return}let t=this,n=this._classificationPrimitiveOptions;if(!l(this._primitive)){let i=e.mapProjection.ellipsoid,o,r,s,a=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],c=a.length,d=new Array(c),u,m;for(u=0;u<c;++u){o=a[u],r=o.geometry;let x=G5(e,r);l(m)?l(x)&&le.union(m,x,m):m=le.clone(x);let _=o.id;if(l(_)&&l(x)){let C=ai.getBoundingSphere(x,i);this._boundingSpheresKeys.push(_),this._boundingSpheres.push(C)}s=r.constructor,!l(s)||l(s.createShadowVolume)}r2e(this,m,i);let p=e.verticalExaggeration,b=e.verticalExaggerationRelativeHeight;this._minHeight=pr.getHeight(this._minTerrainHeight,p,b),this._maxHeight=pr.getHeight(this._maxTerrainHeight,p,b);let f=Cl._supportsMaterials(e.context);if(this._useFragmentCulling=f,f){let x,_=!0;for(u=0;u<c;++u)if(o=a[u],r=o.geometry,m=G5(e,r),ld.shouldUseSphericalCoordinates(m)){_=!1;break}for(u=0;u<c;++u){o=a[u],r=o.geometry,s=r.constructor;let C=G5(e,r),V=r.textureCoordinateRotationPoints;_?x=ld.getPlanarTextureCoordinateAttributes(C,V,i,e.mapProjection,this._maxHeight):x=ld.getSphericalExtentGeometryInstanceAttributes(C,V,i,e.mapProjection);let L=o.attributes;for(let R in L)L.hasOwnProperty(R)&&(x[R]=L[R]);d[u]=new Vt({geometry:s.createShadowVolume(r,Fne(this),wne(this)),attributes:x,id:o.id})}}else for(u=0;u<c;++u)o=a[u],r=o.geometry,s=r.constructor,d[u]=new Vt({geometry:s.createShadowVolume(r,Fne(this),wne(this)),attributes:o.attributes,id:o.id});n.geometryInstances=d,n.appearance=this.appearance,n._createBoundingVolumeFunction=function(x,_){s2e(t,x,_)},n._updateAndQueueCommandsFunction=function(x,_,C,V,L,R,G,X){a2e(t,_,C,V,L,R,G,X)},this._primitive=new $S(n)}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e),e.afterRender.push(()=>{!this._ready&&l(this._primitive)&&this._primitive.ready&&(this._ready=!0,this.releaseGeometryInstances&&(this.geometryInstances=void 0))})};Cl.prototype.getBoundingSphere=function(e){let t=this._boundingSpheresKeys.indexOf(e);if(t!==-1)return this._boundingSpheres[t]};Cl.prototype.getGeometryInstanceAttributes=function(e){return this._primitive.getGeometryInstanceAttributes(e)};Cl.prototype.isDestroyed=function(){return!1};Cl.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),me(this)};Cl._supportsMaterials=function(e){return e.depthTexture};Cl.supportsMaterials=function(e){return Cl._supportsMaterials(e.frameState.context)};var Mc=Cl;var RQt=T(S(),1);function eC(){fe.throwInstantiationError()}Object.defineProperties(eC.prototype,{isConstant:{get:fe.throwInstantiationError},definitionChanged:{get:fe.throwInstantiationError}});eC.prototype.getType=fe.throwInstantiationError;eC.prototype.getValue=fe.throwInstantiationError;eC.prototype.equals=fe.throwInstantiationError;eC.getValue=function(e,t,n){let i;return l(t)&&(i=t.getType(e),l(i))?((!l(n)||n.type!==i)&&(n=ki.fromType(i)),t.getValue(e,n.uniforms),n):((!l(n)||n.type!==ki.ColorType)&&(n=ki.fromType(ki.ColorType)),O.clone(O.WHITE,n.uniforms.color),n)};var Oo=eC;function _x(e,t,n){this._primitives=t,this._orderedGroundPrimitives=n,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=e,this._options=e._options,this._entity=e._entity,this._material=void 0}_x.prototype._isHidden=function(e,t,n){return!e.isShowing||!e.isAvailable(n)||!K.getValueOrDefault(t.show,n,!0)};_x.prototype._setOptions=fe.throwInstantiationError;_x.prototype.update=function(e){let t=this._geometryUpdater,n=t._onTerrain,i=this._primitives,o=this._orderedGroundPrimitives;n?o.remove(this._primitive):(i.removeAndDestroy(this._primitive),i.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;let r=this._entity,s=r[this._geometryUpdater._geometryPropertyName];if(this._setOptions(r,s,e),this._isHidden(r,s,e))return;let a=this._geometryUpdater.shadowsProperty.getValue(e),c=this._options;if(!l(s.fill)||s.fill.getValue(e)){let d=t.fillMaterialProperty,u=d instanceof kt,m,p=t._getIsClosed(c);if(u)m=new ln({closed:p,flat:n&&!t._supportsMaterialsforEntitiesOnTerrain});else{let b=Oo.getValue(e,d,this._material);this._material=b,m=new so({material:b,translucent:b.isTranslucent(),closed:p})}if(n)c.vertexFormat=ln.VERTEX_FORMAT,this._primitive=o.add(new Mc({geometryInstances:this._geometryUpdater.createFillGeometryInstance(e),appearance:m,asynchronous:!1,shadows:a,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(e)}),K.getValueOrUndefined(this._geometryUpdater.zIndex,e));else{c.vertexFormat=m.vertexFormat;let b=this._geometryUpdater.createFillGeometryInstance(e);u&&(m.translucent=b.attributes.color.value[3]!==255),this._primitive=i.add(new Rn({geometryInstances:b,appearance:m,asynchronous:!1,shadows:a}))}}if(!n&&l(s.outline)&&s.outline.getValue(e)){let d=this._geometryUpdater.createOutlineGeometryInstance(e),u=K.getValueOrDefault(s.outlineWidth,e,1);this._outlinePrimitive=i.add(new Rn({geometryInstances:d,appearance:new ln({flat:!0,translucent:d.attributes.color.value[3]!==255,renderState:{lineWidth:t._scene.clampLineWidth(u)}}),asynchronous:!1,shadows:a}))}};_x.prototype.getBoundingSphere=function(e){let t=this._entity,n=this._primitive,i=this._outlinePrimitive,o;return l(n)&&n.show&&n.ready&&(o=n.getGeometryInstanceAttributes(t),l(o)&&l(o.boundingSphere))?(ce.clone(o.boundingSphere,e),ht.DONE):l(i)&&i.show&&i.ready&&(o=i.getGeometryInstanceAttributes(t),l(o)&&l(o.boundingSphere))?(ce.clone(o.boundingSphere,e),ht.DONE):l(n)&&!n.ready||l(i)&&!i.ready?ht.PENDING:ht.FAILED};_x.prototype.isDestroyed=function(){return!1};_x.prototype.destroy=function(){let e=this._primitives,t=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?t.remove(this._primitive):e.removeAndDestroy(this._primitive),e.removeAndDestroy(this._outlinePrimitive),me(this)};var ni=_x;var c$t=T(S(),1);var Oqt=T(S(),1);var Jjt=T(S(),1);var w4t=T(S(),1);var BQt=T(S(),1),c2e={NONE:0,GEODESIC:1,RHUMB:2},$t=Object.freeze(c2e);var KQt=T(S(),1);var Mne=P.EPSILON10;function l2e(e,t,n,i){if(!l(e))return;n=g(n,!1);let o=l(i),r=e.length;if(r<2)return e;let s,a=e[0],c,d,u=0,m=-1;for(s=1;s<r;++s)c=e[s],t(a,c,Mne)?(l(d)||(d=e.slice(0,s),u=s-1,m=0),o&&i.push(s)):(l(d)&&(d.push(c),u=s,o&&(m=i.length)),a=c);return n&&t(e[0],e[r-1],Mne)&&(o&&(l(d)?i.splice(m,0,u):i.push(r-1)),l(d)?d.length-=1:d=e.slice(0,-1)),l(d)?d:e}var yo=l2e;var n4t=T(S(),1);function d2e(e){let t=e._uSquared,n=e._ellipsoid.maximumRadius,i=e._ellipsoid.minimumRadius,o=(n-i)/n,r=Math.cos(e._startHeading),s=Math.sin(e._startHeading),a=(1-o)*Math.tan(e._start.latitude),c=1/Math.sqrt(1+a*a),d=c*a,u=Math.atan2(a,r),m=c*s,p=m*m,b=1-p,f=Math.sqrt(b),x=t/4,_=x*x,C=_*x,V=_*_,L=1+x-3*_/4+5*C/4-175*V/64,R=1-x+15*_/8-35*C/8,G=1-3*x+35*_/4,X=1-5*x,v=L*u-R*Math.sin(2*u)*x/2-G*Math.sin(4*u)*_/16-X*Math.sin(6*u)*C/48-Math.sin(8*u)*5*V/512,W=e._constants;W.a=n,W.b=i,W.f=o,W.cosineHeading=r,W.sineHeading=s,W.tanU=a,W.cosineU=c,W.sineU=d,W.sigma=u,W.sineAlpha=m,W.sineSquaredAlpha=p,W.cosineSquaredAlpha=b,W.cosineAlpha=f,W.u2Over4=x,W.u4Over16=_,W.u6Over64=C,W.u8Over256=V,W.a0=L,W.a1=R,W.a2=G,W.a3=X,W.distanceRatio=v}function u2e(e,t){return e*t*(4+e*(4-3*t))/16}function Nne(e,t,n,i,o,r,s){let a=u2e(e,n);return(1-a)*e*t*(i+a*o*(s+a*r*(2*s*s-1)))}function m2e(e,t,n,i,o,r,s){let a=(t-n)/t,c=r-i,d=Math.atan((1-a)*Math.tan(o)),u=Math.atan((1-a)*Math.tan(s)),m=Math.cos(d),p=Math.sin(d),b=Math.cos(u),f=Math.sin(u),x=m*b,_=m*f,C=p*f,V=p*b,L=c,R=P.TWO_PI,G=Math.cos(L),X=Math.sin(L),v,W,F,A,y;do{G=Math.cos(L),X=Math.sin(L);let N=_-V*G;F=Math.sqrt(b*b*X*X+N*N),W=C+x*G,v=Math.atan2(F,W);let J;F===0?(J=0,A=1):(J=x*X/F,A=1-J*J),R=L,y=W-2*C/A,isFinite(y)||(y=0),L=c+Nne(a,J,A,v,F,W,y)}while(Math.abs(L-R)>P.EPSILON12);let Z=A*(t*t-n*n)/(n*n),E=1+Z*(4096+Z*(Z*(320-175*Z)-768))/16384,I=Z*(256+Z*(Z*(74-47*Z)-128))/1024,w=y*y,k=I*F*(y+I*(W*(2*w-1)-I*y*(4*F*F-3)*(4*w-3)/6)/4),B=n*E*(v-k),U=Math.atan2(b*X,_-V*G),Y=Math.atan2(m*X,_*G-V);e._distance=B,e._startHeading=U,e._endHeading=Y,e._uSquared=Z}var h2e=new h,VO=new h;function kne(e,t,n,i){let o=h.normalize(i.cartographicToCartesian(t,VO),h2e),r=h.normalize(i.cartographicToCartesian(n,VO),VO);m2e(e,i.maximumRadius,i.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude),e._start=he.clone(t,e._start),e._end=he.clone(n,e._end),e._start.height=0,e._end.height=0,d2e(e)}function ME(e,t,n){let i=g(n,oe.WGS84);this._ellipsoid=i,this._start=new he,this._end=new he,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,l(e)&&l(t)&&kne(this,e,t,i)}Object.defineProperties(ME.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}});ME.prototype.setEndPoints=function(e,t){kne(this,e,t,this._ellipsoid)};ME.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(this._distance*e,t)};ME.prototype.interpolateUsingSurfaceDistance=function(e,t){let n=this._constants,i=n.distanceRatio+e/n.b,o=Math.cos(2*i),r=Math.cos(4*i),s=Math.cos(6*i),a=Math.sin(2*i),c=Math.sin(4*i),d=Math.sin(6*i),u=Math.sin(8*i),m=i*i,p=i*m,b=n.u8Over256,f=n.u2Over4,x=n.u6Over64,_=n.u4Over16,C=2*p*b*o/3+i*(1-f+7*_/4-15*x/4+579*b/64-(_-15*x/4+187*b/16)*o-(5*x/4-115*b/16)*r-29*b*s/16)+(f/2-_+71*x/32-85*b/16)*a+(5*_/16-5*x/4+383*b/96)*c-m*((x-11*b/2)*a+5*b*c/2)+(29*x/96-29*b/16)*d+539*b*u/1536,V=Math.asin(Math.sin(C)*n.cosineAlpha),L=Math.atan(n.a/n.b*Math.tan(V));C=C-n.sigma;let R=Math.cos(2*n.sigma+C),G=Math.sin(C),X=Math.cos(C),v=n.cosineU*X,W=n.sineU*G,A=Math.atan2(G*n.sineHeading,v-W*n.cosineHeading)-Nne(n.f,n.sineAlpha,n.cosineSquaredAlpha,C,G,X,R);return l(t)?(t.longitude=this._start.longitude+A,t.latitude=L,t.height=0,t):new he(this._start.longitude+A,L,0)};var Cp=ME;var d4t=T(S(),1);function ZO(e,t,n){if(e===0)return t*n;let i=e*e,o=i*i,r=o*i,s=r*i,a=s*i,c=a*i,d=n,u=Math.sin(2*d),m=Math.sin(4*d),p=Math.sin(6*d),b=Math.sin(8*d),f=Math.sin(10*d),x=Math.sin(12*d);return t*((1-i/4-3*o/64-5*r/256-175*s/16384-441*a/65536-4851*c/1048576)*d-(3*i/8+3*o/32+45*r/1024+105*s/4096+2205*a/131072+6237*c/524288)*u+(15*o/256+45*r/1024+525*s/16384+1575*a/65536+155925*c/8388608)*m-(35*r/3072+175*s/12288+3675*a/262144+13475*c/1048576)*p+(315*s/131072+2205*a/524288+43659*c/8388608)*b-(693*a/1310720+6237*c/5242880)*f+1001*c/8388608*x)}function f2e(e,t,n){let i=e/n;if(t===0)return i;let o=i*i,r=o*i,s=r*i,a=t,c=a*a,d=c*c,u=d*c,m=u*c,p=m*c,b=p*c,f=Math.sin(2*i),x=Math.cos(2*i),_=Math.sin(4*i),C=Math.cos(4*i),V=Math.sin(6*i),L=Math.cos(6*i),R=Math.sin(8*i),G=Math.cos(8*i),X=Math.sin(10*i),v=Math.cos(10*i),W=Math.sin(12*i);return i+i*c/4+7*i*d/64+15*i*u/256+579*i*m/16384+1515*i*p/65536+16837*i*b/1048576+(3*i*d/16+45*i*u/256-i*(32*o-561)*m/4096-i*(232*o-1677)*p/16384+i*(399985-90560*o+512*s)*b/5242880)*x+(21*i*u/256+483*i*m/4096-i*(224*o-1969)*p/16384-i*(33152*o-112599)*b/1048576)*C+(151*i*m/4096+4681*i*p/65536+1479*i*b/16384-453*r*b/32768)*L+(1097*i*p/65536+42783*i*b/1048576)*G+8011*i*b/1048576*v+(3*c/8+3*d/16+213*u/2048-3*o*u/64+255*m/4096-33*o*m/512+20861*p/524288-33*o*p/512+s*p/1024+28273*b/1048576-471*o*b/8192+9*s*b/4096)*f+(21*d/256+21*u/256+533*m/8192-21*o*m/512+197*p/4096-315*o*p/4096+584039*b/16777216-12517*o*b/131072+7*s*b/2048)*_+(151*u/6144+151*m/4096+5019*p/131072-453*o*p/16384+26965*b/786432-8607*o*b/131072)*V+(1097*m/131072+1097*p/65536+225797*b/10485760-1097*o*b/65536)*R+(8011*p/2621440+8011*b/1048576)*X+293393*b/251658240*W}function tC(e,t){if(e===0)return Math.log(Math.tan(.5*(P.PI_OVER_TWO+t)));let n=e*Math.sin(t);return Math.log(Math.tan(.5*(P.PI_OVER_TWO+t)))-e/2*Math.log((1+n)/(1-n))}function p2e(e,t,n,i,o){let r=tC(e._ellipticity,n),s=tC(e._ellipticity,o);return Math.atan2(P.negativePiToPi(i-t),s-r)}function b2e(e,t,n,i,o,r,s){let a=e._heading,c=r-i,d=0;if(P.equalsEpsilon(Math.abs(a),P.PI_OVER_TWO,P.EPSILON8))if(t===n)d=t*Math.cos(o)*P.negativePiToPi(c);else{let u=Math.sin(o);d=t*Math.cos(o)*P.negativePiToPi(c)/Math.sqrt(1-e._ellipticitySquared*u*u)}else{let u=ZO(e._ellipticity,t,o);d=(ZO(e._ellipticity,t,s)-u)/Math.cos(a)}return Math.abs(d)}var y2e=new h,LO=new h;function Une(e,t,n,i){let o=h.normalize(i.cartographicToCartesian(t,LO),y2e),r=h.normalize(i.cartographicToCartesian(n,LO),LO),s=i.maximumRadius,a=i.minimumRadius,c=s*s,d=a*a;e._ellipticitySquared=(c-d)/c,e._ellipticity=Math.sqrt(e._ellipticitySquared),e._start=he.clone(t,e._start),e._start.height=0,e._end=he.clone(n,e._end),e._end.height=0,e._heading=p2e(e,t.longitude,t.latitude,n.longitude,n.latitude),e._distance=b2e(e,i.maximumRadius,i.minimumRadius,t.longitude,t.latitude,n.longitude,n.latitude)}function Dne(e,t,n,i,o,r){if(n===0)return he.clone(e,r);let s=o*o,a,c,d;if(Math.abs(P.PI_OVER_TWO-Math.abs(t))>P.EPSILON8){let u=ZO(o,i,e.latitude),m=n*Math.cos(t),p=u+m;if(c=f2e(p,o,i),Math.abs(t)<P.EPSILON10)a=P.negativePiToPi(e.longitude);else{let b=tC(o,e.latitude),f=tC(o,c);d=Math.tan(t)*(f-b),a=P.negativePiToPi(e.longitude+d)}}else{c=e.latitude;let u;if(o===0)u=i*Math.cos(e.latitude);else{let m=Math.sin(e.latitude);u=i*Math.cos(e.latitude)/Math.sqrt(1-s*m*m)}d=n/u,t>0?a=P.negativePiToPi(e.longitude+d):a=P.negativePiToPi(e.longitude-d)}return l(r)?(r.longitude=a,r.latitude=c,r.height=0,r):new he(a,c,0)}function Vp(e,t,n){let i=g(n,oe.WGS84);this._ellipsoid=i,this._start=new he,this._end=new he,this._heading=void 0,this._distance=void 0,this._ellipticity=void 0,this._ellipticitySquared=void 0,l(e)&&l(t)&&Une(this,e,t,i)}Object.defineProperties(Vp.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},heading:{get:function(){return this._heading}}});Vp.fromStartHeadingDistance=function(e,t,n,i,o){let r=g(i,oe.WGS84),s=r.maximumRadius,a=r.minimumRadius,c=s*s,d=a*a,u=Math.sqrt((c-d)/c);t=P.negativePiToPi(t);let m=Dne(e,t,n,r.maximumRadius,u);return!l(o)||l(i)&&!i.equals(o.ellipsoid)?new Vp(e,m,r):(o.setEndPoints(e,m),o)};Vp.prototype.setEndPoints=function(e,t){Une(this,e,t,this._ellipsoid)};Vp.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(e*this._distance,t)};Vp.prototype.interpolateUsingSurfaceDistance=function(e,t){return Dne(this._start,this._heading,e,this._ellipsoid.maximumRadius,this._ellipticity,t)};Vp.prototype.findIntersectionWithLongitude=function(e,t){let n=this._ellipticity,i=this._heading,o=Math.abs(i),r=this._start;if(e=P.negativePiToPi(e),P.equalsEpsilon(Math.abs(e),Math.PI,P.EPSILON14)&&(e=P.sign(r.longitude)*Math.PI),l(t)||(t=new he),Math.abs(P.PI_OVER_TWO-o)<=P.EPSILON8)return t.longitude=e,t.latitude=r.latitude,t.height=0,t;if(P.equalsEpsilon(Math.abs(P.PI_OVER_TWO-o),P.PI_OVER_TWO,P.EPSILON8))return P.equalsEpsilon(e,r.longitude,P.EPSILON12)?void 0:(t.longitude=e,t.latitude=P.PI_OVER_TWO*P.sign(P.PI_OVER_TWO-i),t.height=0,t);let s=r.latitude,a=n*Math.sin(s),c=Math.tan(.5*(P.PI_OVER_TWO+s))*Math.exp((e-r.longitude)/Math.tan(i)),d=(1+a)/(1-a),u=r.latitude,m;do{m=u;let p=n*Math.sin(m),b=(1+p)/(1-p);u=2*Math.atan(c*Math.pow(b/d,n/2))-P.PI_OVER_TWO}while(!P.equalsEpsilon(u,m,P.EPSILON12));return t.longitude=e,t.latitude=u,t.height=0,t};Vp.prototype.findIntersectionWithLatitude=function(e,t){let n=this._ellipticity,i=this._heading,o=this._start;if(P.equalsEpsilon(Math.abs(i),P.PI_OVER_TWO,P.EPSILON8))return;let r=tC(n,o.latitude),s=tC(n,e),a=Math.tan(i)*(s-r),c=P.negativePiToPi(o.longitude+a);return l(t)?(t.longitude=c,t.latitude=e,t.height=0,t):new he(c,e,0)};var Za=Vp;var vO=[Ci,Li],g2e=vO.length,cie=Math.cos(P.toRadians(30)),Bne=Math.cos(P.toRadians(150)),lie=0,die=1e3;function Mb(e){e=g(e,g.EMPTY_OBJECT);let t=e.positions;this.width=g(e.width,1),this._positions=t,this.granularity=g(e.granularity,9999),this.loop=g(e.loop,!1),this.arcType=g(e.arcType,$t.GEODESIC),this._ellipsoid=oe.WGS84,this._projectionIndex=0,this._workerName=\"createGroundPolylineGeometry\",this._scene3DOnly=!1}Object.defineProperties(Mb.prototype,{packedLength:{get:function(){return 1+this._positions.length*3+1+1+1+oe.packedLength+1+1}}});Mb.setProjectionAndEllipsoid=function(e,t){let n=0;for(let i=0;i<g2e;i++)if(t instanceof vO[i]){n=i;break}e._projectionIndex=n,e._ellipsoid=t.ellipsoid};var x2e=new h,Yne=new h,One=new h;function PO(e,t,n,i,o){let r=Nc(i,e,0,x2e),s=Nc(i,e,n,Yne),a=Nc(i,t,0,One),c=Lp(s,r,Yne),d=Lp(a,r,One);return h.cross(d,c,o),h.normalize(o,o)}var _2e=new he,T2e=new h,S2e=new h,C2e=new h;function RO(e,t,n,i,o,r,s,a,c,d,u){if(o===0)return;let m;r===$t.GEODESIC?m=new Cp(e,t,s):r===$t.RHUMB&&(m=new Za(e,t,s));let p=m.surfaceDistance;if(p<o)return;let b=PO(e,t,i,s,C2e),f=Math.ceil(p/o),x=p/f,_=x,C=f-1,V=a.length;for(let L=0;L<C;L++){let R=m.interpolateUsingSurfaceDistance(_,_2e),G=Nc(s,R,n,T2e),X=Nc(s,R,i,S2e);h.pack(b,a,V),h.pack(G,c,V),h.pack(X,d,V),u.push(R.latitude),u.push(R.longitude),V+=3,_+=x}}var GO=new he;function Nc(e,t,n,i){return he.clone(t,GO),GO.height=n,he.toCartesian(GO,e,i)}Mb.pack=function(e,t,n){let i=g(n,0),o=e._positions,r=o.length;t[i++]=r;for(let s=0;s<r;++s){let a=o[s];h.pack(a,t,i),i+=3}return t[i++]=e.granularity,t[i++]=e.loop?1:0,t[i++]=e.arcType,oe.pack(e._ellipsoid,t,i),i+=oe.packedLength,t[i++]=e._projectionIndex,t[i++]=e._scene3DOnly?1:0,t};Mb.unpack=function(e,t,n){let i=g(t,0),o=e[i++],r=new Array(o);for(let p=0;p<o;p++)r[p]=h.unpack(e,i),i+=3;let s=e[i++],a=e[i++]===1,c=e[i++],d=oe.unpack(e,i);i+=oe.packedLength;let u=e[i++],m=e[i++]===1;return l(n)||(n=new Mb({positions:r})),n._positions=r,n.granularity=s,n.loop=a,n.arcType=c,n._ellipsoid=d,n._projectionIndex=u,n._scene3DOnly=m,n};function Lp(e,t,n){return h.subtract(e,t,n),h.normalize(n,n),n}function zne(e,t,n,i){return i=Lp(e,t,i),i=h.cross(i,n,i),i=h.normalize(i,i),i=h.cross(n,i,i),i}var V2e=new h,L2e=new h,Z2e=new h,uie=new h,R2e=0,G2e=-1;function EO(e,t,n,i,o){let r=Lp(n,t,uie),s=zne(e,t,r,V2e),a=zne(i,t,r,L2e);if(P.equalsEpsilon(h.dot(s,a),G2e,P.EPSILON5))return o=h.cross(r,s,o),o=h.normalize(o,o),o;o=h.add(a,s,o),o=h.normalize(o,o);let c=h.cross(r,o,Z2e);return h.dot(a,c)<R2e&&(o=h.negate(o,o)),o}var W5=an.fromPointNormal(h.ZERO,h.UNIT_Y),E2e=new h,X2e=new h,I2e=new h,W2e=new h,P2e=new h,E5=new h,X5=new he,Hne=new he,Kne=new he;Mb.createGeometry=function(e){let t=!e._scene3DOnly,n=e.loop,i=e._ellipsoid,o=e.granularity,r=e.arcType,s=new vO[e._projectionIndex](i),a=lie,c=die,d,u,m=e._positions,p=m.length;p===2&&(n=!1);let b,f,x,_,C=new Za(void 0,void 0,i),V,L,R,G=[m[0]];for(u=0;u<p-1;u++)b=m[u],f=m[u+1],V=jn.lineSegmentPlane(b,f,W5,E5),l(V)&&!h.equalsEpsilon(V,b,P.EPSILON7)&&!h.equalsEpsilon(V,f,P.EPSILON7)&&(e.arcType===$t.GEODESIC?G.push(h.clone(V)):e.arcType===$t.RHUMB&&(R=i.cartesianToCartographic(V,X5).longitude,x=i.cartesianToCartographic(b,X5),_=i.cartesianToCartographic(f,Hne),C.setEndPoints(x,_),L=C.findIntersectionWithLongitude(R,Kne),V=i.cartographicToCartesian(L,E5),l(V)&&!h.equalsEpsilon(V,b,P.EPSILON7)&&!h.equalsEpsilon(V,f,P.EPSILON7)&&G.push(h.clone(V)))),G.push(f);n&&(b=m[p-1],f=m[0],V=jn.lineSegmentPlane(b,f,W5,E5),l(V)&&!h.equalsEpsilon(V,b,P.EPSILON7)&&!h.equalsEpsilon(V,f,P.EPSILON7)&&(e.arcType===$t.GEODESIC?G.push(h.clone(V)):e.arcType===$t.RHUMB&&(R=i.cartesianToCartographic(V,X5).longitude,x=i.cartesianToCartographic(b,X5),_=i.cartesianToCartographic(f,Hne),C.setEndPoints(x,_),L=C.findIntersectionWithLongitude(R,Kne),V=i.cartographicToCartesian(L,E5),l(V)&&!h.equalsEpsilon(V,b,P.EPSILON7)&&!h.equalsEpsilon(V,f,P.EPSILON7)&&G.push(h.clone(V)))));let X=G.length,v=new Array(X);for(u=0;u<X;u++){let z=he.fromCartesian(G[u],i);z.height=0,v[u]=z}if(v=yo(v,he.equalsEpsilon),X=v.length,X<2)return;let W=[],F=[],A=[],y=[],Z=E2e,E=X2e,I=I2e,w=W2e,k=P2e,B=v[0],U=v[1],Y=v[X-1];for(Z=Nc(i,Y,a,Z),w=Nc(i,U,a,w),E=Nc(i,B,a,E),I=Nc(i,B,c,I),n?k=EO(Z,E,I,w,k):k=PO(B,U,c,i,k),h.pack(k,F,0),h.pack(E,A,0),h.pack(I,y,0),W.push(B.latitude),W.push(B.longitude),RO(B,U,a,c,o,r,i,F,A,y,W),u=1;u<X-1;++u){Z=h.clone(E,Z),E=h.clone(w,E);let z=v[u];Nc(i,z,c,I),Nc(i,v[u+1],a,w),EO(Z,E,I,w,k),d=F.length,h.pack(k,F,d),h.pack(E,A,d),h.pack(I,y,d),W.push(z.latitude),W.push(z.longitude),RO(v[u],v[u+1],a,c,o,r,i,F,A,y,W)}let N=v[X-1],J=v[X-2];if(E=Nc(i,N,a,E),I=Nc(i,N,c,I),n){let z=v[0];Z=Nc(i,J,a,Z),w=Nc(i,z,a,w),k=EO(Z,E,I,w,k)}else k=PO(J,N,c,i,k);if(d=F.length,h.pack(k,F,d),h.pack(E,A,d),h.pack(I,y,d),W.push(N.latitude),W.push(N.longitude),n){for(RO(N,B,a,c,o,r,i,F,A,y,W),d=F.length,u=0;u<3;++u)F[d+u]=F[u],A[d+u]=A[u],y[d+u]=y[u];W.push(B.latitude),W.push(B.longitude)}return rPe(n,s,A,y,F,W,t)};var v2e=new h,w2e=new $,F2e=new Fe;function Jne(e,t,n,i){let o=Lp(n,t,v2e),r=h.dot(o,e);if(r>cie||r<Bne){let s=Lp(i,n,uie),a=r<Bne?P.PI_OVER_TWO:-P.PI_OVER_TWO,c=Fe.fromAxisAngle(s,a,F2e),d=$.fromQuaternion(c,w2e);return $.multiplyByVector(d,e,e),!0}return!1}var Qne=new he,A2e=new h,jne=new h;function NE(e,t,n,i,o){let r=he.toCartesian(t,e._ellipsoid,A2e),s=h.add(r,n,jne),a=!1,c=e._ellipsoid,d=c.cartesianToCartographic(s,Qne);Math.abs(t.longitude-d.longitude)>P.PI_OVER_TWO&&(a=!0,s=h.subtract(r,n,jne),d=c.cartesianToCartographic(s,Qne)),d.height=0;let u=e.project(d,o);return o=h.subtract(u,i,o),o.z=0,o=h.normalize(o,o),a&&h.negate(o,o),o}var M2e=new h,qne=new h;function $ne(e,t,n,i,o,r){let s=h.subtract(t,e,M2e);h.normalize(s,s);let a=n-lie,c=h.multiplyByScalar(s,a,qne);h.add(e,c,o);let d=i-die;c=h.multiplyByScalar(s,d,qne),h.add(t,c,r)}var N2e=new h;function I5(e,t){let n=an.getPointDistance(W5,e),i=an.getPointDistance(W5,t),o=N2e;P.equalsEpsilon(n,0,P.EPSILON2)?(o=Lp(t,e,o),h.multiplyByScalar(o,P.EPSILON2,o),h.add(e,o,e)):P.equalsEpsilon(i,0,P.EPSILON2)&&(o=Lp(e,t,o),h.multiplyByScalar(o,P.EPSILON2,o),h.add(t,o,t))}function k2e(e,t){let n=Math.abs(e.longitude),i=Math.abs(t.longitude);if(P.equalsEpsilon(n,P.PI,P.EPSILON11)){let o=P.sign(t.longitude);return e.longitude=o*(n-P.EPSILON11),1}else if(P.equalsEpsilon(i,P.PI,P.EPSILON11)){let o=P.sign(e.longitude);return t.longitude=o*(i-P.EPSILON11),2}return 0}var mie=new he,hie=new he,eie=new h,XO=new h,tie=new h,nie=new h,U2e=new h,iie=new h,D2e=[mie,hie],B2e=new le,Y2e=new h,O2e=new h,z2e=new h,H2e=new h,K2e=new h,J2e=new h,IO=new h,WO=new h,Q2e=new h,j2e=new h,q2e=new h,oie=new h,$2e=new h,ePe=new h,tPe=new Yn,nPe=new Yn,rie=new h,iPe=new h,sie=new h,oPe=[new ce,new ce],fie=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],aie=fie.length;function rPe(e,t,n,i,o,r,s){let a,c,d=t._ellipsoid,u=n.length/3-1,m=u*8,p=m*4,b=u*36,f=m>65535?new Uint32Array(b):new Uint16Array(b),x=new Float64Array(m*3),_=new Float32Array(p),C=new Float32Array(p),V=new Float32Array(p),L=new Float32Array(p),R=new Float32Array(p),G,X,v,W;s&&(G=new Float32Array(p),X=new Float32Array(p),v=new Float32Array(p),W=new Float32Array(m*2));let F=r.length/2,A=0,y=mie;y.height=0;let Z=hie;Z.height=0;let E=eie,I=XO;if(s)for(c=0,a=1;a<F;a++)y.latitude=r[c],y.longitude=r[c+1],Z.latitude=r[c+2],Z.longitude=r[c+3],E=t.project(y,E),I=t.project(Z,I),A+=h.distance(E,I),c+=2;let w=i.length/3;I=h.unpack(i,0,I);let k=0;for(c=3,a=1;a<w;a++)E=h.clone(I,E),I=h.unpack(i,c,I),k+=h.distance(E,I),c+=3;let B;c=3;let U=0,Y=0,N=0,J=0,z=!1,ee=h.unpack(n,0,nie),H=h.unpack(i,0,XO),j=h.unpack(o,0,iie);if(e){let Re=h.unpack(n,n.length-6,tie);Jne(j,Re,ee,H)&&(j=h.negate(j,j))}let q=0,pe=0,_e=0;for(a=0;a<u;a++){let Re=h.clone(ee,tie),ke=h.clone(H,eie),rt=h.clone(j,U2e);z&&(rt=h.negate(rt,rt)),ee=h.unpack(n,c,nie),H=h.unpack(i,c,XO),j=h.unpack(o,c,iie),z=Jne(j,Re,ee,H),y.latitude=r[U],y.longitude=r[U+1],Z.latitude=r[U+2],Z.longitude=r[U+3];let yt,Dt,it,Ie;if(s){let zi=k2e(y,Z);yt=t.project(y,K2e),Dt=t.project(Z,J2e);let ds=Lp(Dt,yt,rie);ds.y=Math.abs(ds.y),it=IO,Ie=WO,zi===0||h.dot(ds,h.UNIT_Y)>cie?(it=NE(t,y,rt,yt,IO),Ie=NE(t,Z,j,Dt,WO)):zi===1?(Ie=NE(t,Z,j,Dt,WO),it.x=0,it.y=P.sign(y.longitude-Math.abs(Z.longitude)),it.z=0):(it=NE(t,y,rt,yt,IO),Ie.x=0,Ie.y=P.sign(y.longitude-Z.longitude),Ie.z=0)}let ft=h.distance(ke,H),Ke=Yn.fromCartesian(Re,tPe),ct=h.subtract(ee,Re,Q2e),Jt=h.normalize(ct,oie),be=h.subtract(ke,Re,j2e);be=h.normalize(be,be);let Ve=h.cross(Jt,be,oie);Ve=h.normalize(Ve,Ve);let Bt=h.cross(be,rt,$2e);Bt=h.normalize(Bt,Bt);let mt=h.subtract(H,ee,q2e);mt=h.normalize(mt,mt);let Pi=h.cross(j,mt,ePe);Pi=h.normalize(Pi,Pi);let Co=ft/k,Es=q/k,$r=0,Nr,Qs,De,et=0,qe=0;if(s){$r=h.distance(yt,Dt),Nr=Yn.fromCartesian(yt,nPe),Qs=h.subtract(Dt,yt,rie),De=h.normalize(Qs,iPe);let zi=De.x;De.x=De.y,De.y=-zi,et=$r/A,qe=pe/A}for(B=0;B<8;B++){let zi=J+B*4,ds=Y+B*2,es=zi+3,dl=B<4?1:-1,Uo=B===2||B===3||B===6||B===7?1:-1;h.pack(Ke.high,_,zi),_[es]=ct.x,h.pack(Ke.low,C,zi),C[es]=ct.y,h.pack(Bt,V,zi),V[es]=ct.z,h.pack(Pi,L,zi),L[es]=Co*dl,h.pack(Ve,R,zi);let ur=Es*Uo;ur===0&&Uo<0&&(ur=9),R[es]=ur,s&&(G[zi]=Nr.high.x,G[zi+1]=Nr.high.y,G[zi+2]=Nr.low.x,G[zi+3]=Nr.low.y,v[zi]=-it.y,v[zi+1]=it.x,v[zi+2]=Ie.y,v[zi+3]=-Ie.x,X[zi]=Qs.x,X[zi+1]=Qs.y,X[zi+2]=De.x,X[zi+3]=De.y,W[ds]=et*dl,ur=qe*Uo,ur===0&&Uo<0&&(ur=9),W[ds+1]=ur)}let Ye=z2e,gt=H2e,zt=Y2e,Gn=O2e,Vo=le.fromCartographicArray(D2e,B2e),tr=ai.getMinimumMaximumHeights(Vo,d),Da=tr.minimumTerrainHeight,nr=tr.maximumTerrainHeight;_e+=Math.abs(Da),_e+=Math.abs(nr),$ne(Re,ke,Da,nr,Ye,zt),$ne(ee,H,Da,nr,gt,Gn);let ir=h.multiplyByScalar(Ve,P.EPSILON5,sie);h.add(Ye,ir,Ye),h.add(gt,ir,gt),h.add(zt,ir,zt),h.add(Gn,ir,Gn),I5(Ye,gt),I5(zt,Gn),h.pack(Ye,x,N),h.pack(gt,x,N+3),h.pack(Gn,x,N+6),h.pack(zt,x,N+9),ir=h.multiplyByScalar(Ve,-2*P.EPSILON5,sie),h.add(Ye,ir,Ye),h.add(gt,ir,gt),h.add(zt,ir,zt),h.add(Gn,ir,Gn),I5(Ye,gt),I5(zt,Gn),h.pack(Ye,x,N+12),h.pack(gt,x,N+15),h.pack(Gn,x,N+18),h.pack(zt,x,N+21),U+=2,c+=3,Y+=16,N+=24,J+=32,q+=ft,pe+=$r}c=0;let ae=0;for(a=0;a<u;a++){for(B=0;B<aie;B++)f[c+B]=fie[B]+ae;ae+=8,c+=aie}let ye=oPe;ce.fromVertices(n,h.ZERO,3,ye[0]),ce.fromVertices(i,h.ZERO,3,ye[1]);let Te=ce.fromBoundingSpheres(ye);Te.radius+=_e/(u*2);let Le={position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,normalize:!1,values:x}),startHiAndForwardOffsetX:Ab(_),startLoAndForwardOffsetY:Ab(C),startNormalAndForwardOffsetZ:Ab(V),endNormalAndTextureCoordinateNormalizationX:Ab(L),rightNormalAndTextureCoordinateNormalizationY:Ab(R)};return s&&(Le.startHiLo2D=Ab(G),Le.offsetAndRight2D=Ab(X),Le.startEndNormals2D=Ab(v),Le.texcoordNormalization2D=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,normalize:!1,values:W})),new ut({attributes:Le,indices:f,boundingSphere:Te})}function Ab(e){return new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}Mb._projectNormal=NE;var Tx=Mb;var A4t=T(S(),1),kE=`in vec4 v_startPlaneNormalEcAndHalfWidth; in vec4 v_endPlaneNormalEcAndBatchId; in vec4 v_rightPlaneEC; // Technically can compute distance for this here in vec4 v_endEcAndStartEcX; in vec4 v_texcoordNormalizationAndStartEcYZ; // @uranus change \\u65B0\\u589E\\u53D8\\u91CF\\u7528\\u6765\\u8BA1\\u7B97\\u8FB9\\u7F18\\u6297\\u952F\\u9F7F in float v_aa_width; in float v_aa_out; #ifdef PER_INSTANCE_COLOR in vec4 v_color; #endif void main(void) { float logDepthOrDepth = czm_branchFreeTernary(czm_sceneMode == czm_sceneMode2D, gl_FragCoord.z, czm_unpackDepth(texture(czm_globeDepthTexture, gl_FragCoord.xy / czm_viewport.zw))); vec3 ecStart = vec3(v_endEcAndStartEcX.w, v_texcoordNormalizationAndStartEcYZ.zw); // Discard for sky if (logDepthOrDepth == 0.0) { #ifdef DEBUG_SHOW_VOLUME out_FragColor = vec4(1.0, 0.0, 0.0, 0.5); return; #else // DEBUG_SHOW_VOLUME discard; #endif // DEBUG_SHOW_VOLUME } vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); eyeCoordinate /= eyeCoordinate.w; float halfMaxWidth = v_startPlaneNormalEcAndHalfWidth.w * czm_metersPerPixel(eyeCoordinate); // Check distance of the eye coordinate against the right-facing plane float widthwiseDistance = czm_planeDistance(v_rightPlaneEC, eyeCoordinate.xyz); // Check eye coordinate against the mitering planes float distanceFromStart = czm_planeDistance(v_startPlaneNormalEcAndHalfWidth.xyz, -dot(ecStart, v_startPlaneNormalEcAndHalfWidth.xyz), eyeCoordinate.xyz); float distanceFromEnd = czm_planeDistance(v_endPlaneNormalEcAndBatchId.xyz, -dot(v_endEcAndStartEcX.xyz, v_endPlaneNormalEcAndBatchId.xyz), eyeCoordinate.xyz); if (abs(widthwiseDistance) > halfMaxWidth || distanceFromStart < 0.0 || distanceFromEnd < 0.0) { #ifdef DEBUG_SHOW_VOLUME out_FragColor = vec4(1.0,"
}