{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 75,
    "total_chunks": 194,
    "chunk_size": 50631,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.691Z"
  },
  "content": "Nt.Quantization;if(a.componentDatatype=t,a.octEncoded=e.octEncoded,a.octEncodedZXY=!0,a.type=i,a.octEncoded)a.type=tn.VEC2,a.normalizationRange=r;else{let c=tn.getMathType(i);if(c===Number){let d=e.range;a.quantizedVolumeOffset=e.minValues[0],a.quantizedVolumeDimensions=d,a.normalizationRange=r,a.quantizedVolumeStepSize=d*s}else{a.quantizedVolumeOffset=c.unpack(e.minValues),a.normalizationRange=c.unpack(new Array(n).fill(r));let d=new Array(n).fill(e.range);a.quantizedVolumeDimensions=c.unpack(d);let u=d.map(function(m){return m*s});a.quantizedVolumeStepSize=c.unpack(u)}}return a}async function OAe(e){e._state=Xt.LOADING;let t=e._resourceCache;try{let n=t.getDracoLoader({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=n,await n.load(),e.isDestroyed()?void 0:(e._state=Xt.LOADED,e)}catch{if(e.isDestroyed())return;gz(e)}}function zAe(e){e._state=Xt.PROCESSING;let n=e._dracoLoader.decodedData.vertexAttributes,i=e._attributeSemantic,o=n[i],r=e._accessorId,a=e._gltf.accessors[r].type,c=o.array,d=o.data.quantization;l(d)&&(e._quantization=YAe(d,o.data.componentDatatype,o.data.componentsPerAttribute,a)),e._typedArray=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}async function HAe(e){e._state=Xt.LOADING;let t=e._resourceCache;try{let n=t.getBufferViewLoader({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=n,await n.load(),e.isDestroyed()?void 0:(e._typedArray=n.typedArray,e._state=Xt.PROCESSING,e)}catch(n){if(e.isDestroyed())return;gz(e,n)}}function gz(e,t){throw e.unload(),e._state=Xt.FAILED,e.getError(\"Failed to load vertex buffer\",t)}function xz(){this.typedArray=void 0,this.context=void 0,this.buffer=void 0}xz.prototype.set=function(e,t){this.typedArray=e,this.context=t};xz.prototype.execute=function(){this.buffer=voe(this.typedArray,this.context)};function voe(e,t){let n=pt.createVertexBuffer({typedArray:e,context:t,usage:Me.STATIC_DRAW});return n.vertexArrayDestroyable=!1,n}var KAe=new xz;iy.prototype.process=function(e){if(this._state===Xt.READY)return!0;if(this._state!==Xt.LOADED&&this._state!==Xt.PROCESSING)return!1;if(l(this._dracoLoader)){try{if(!this._dracoLoader.process(e))return!1}catch(i){gz(this,i)}zAe(this)}let t,n=this._typedArray;if(this._loadBuffer&&this._asynchronous){let i=KAe;if(i.set(n,e.context),!e.jobScheduler.execute(i,Ea.BUFFER))return!1;t=i.buffer}else this._loadBuffer&&(t=voe(n,e.context));return this.unload(),this._buffer=t,this._typedArray=this._loadTypedArray?n:void 0,this._state=Xt.READY,this._resourceCache.statistics.addGeometryLoader(this),!0};iy.prototype.unload=function(){l(this._buffer)&&this._buffer.destroy();let e=this._resourceCache;l(this._bufferViewLoader)&&!this._bufferViewLoader.isDestroyed()&&e.unload(this._bufferViewLoader),l(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0};var xC=iy;var Zun=T(S(),1);var xun=T(S(),1);var nun=T(S(),1);function FX(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=g(e.properties,{}),i={};for(let o in n)if(n.hasOwnProperty(o)){let r=n[o];l(r.semantic)&&(i[r.semantic]=r)}this._id=t,this._name=e.name,this._description=e.description,this._properties=n,this._propertiesBySemantic=i,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}FX.fromJson=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=e.class,i={};for(let o in n.properties)if(n.properties.hasOwnProperty(o)){let r=Kb.fromJson({id:o,property:n.properties[o],enums:e.enums});i[o]=r}return new FX({id:t,name:n.name,description:n.description,properties:i,extras:n.extras,extensions:n.extensions})};Object.defineProperties(FX.prototype,{properties:{get:function(){return this._properties}},propertiesBySemantic:{get:function(){return this._propertiesBySemantic}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});FX.BATCH_TABLE_CLASS_NAME=\"_batchTable\";var wm=FX;var mun=T(S(),1);var sun=T(S(),1);function j5(e){e=g(e,g.EMPTY_OBJECT);let t=e.value,n=e.name;this._value=t,this._name=n,this._description=e.description,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}j5.fromJson=function(e){return new j5({value:e.value,name:e.name,description:e.description,extras:e.extras,extensions:e.extensions})};Object.defineProperties(j5.prototype,{value:{get:function(){return this._value}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var AX=j5;function q5(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=e.values,i={},o={},r=n.length;for(let a=0;a<r;++a){let c=n[a];i[c.value]=c.name,o[c.name]=c.value}let s=g(e.valueType,sn.UINT16);this._values=n,this._namesByValue=i,this._valuesByName=o,this._valueType=s,this._id=t,this._name=e.name,this._description=e.description,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}q5.fromJson=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.id,n=e.enum,i=n.values.map(function(o){return AX.fromJson(o)});return new q5({id:t,values:i,valueType:sn[n.valueType],name:n.name,description:n.description,extras:n.extras,extensions:n.extensions})};Object.defineProperties(q5.prototype,{values:{get:function(){return this._values}},namesByValue:{get:function(){return this._namesByValue}},valuesByName:{get:function(){return this._valuesByName}},valueType:{get:function(){return this._valueType}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var MX=q5;function $5(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.classes,{}),n=g(e.enums,{});this._classes=t,this._enums=n,this._id=e.id,this._name=e.name,this._description=e.description,this._version=e.version,this._extras=Oe(e.extras,!0),this._extensions=Oe(e.extensions,!0)}$5.fromJson=function(e){let t={};if(l(e.enums))for(let i in e.enums)e.enums.hasOwnProperty(i)&&(t[i]=MX.fromJson({id:i,enum:e.enums[i]}));let n={};if(l(e.classes))for(let i in e.classes)e.classes.hasOwnProperty(i)&&(n[i]=wm.fromJson({id:i,class:e.classes[i],enums:t}));return new $5({id:e.id,name:e.name,description:e.description,version:e.version,classes:n,enums:t,extras:e.extras,extensions:e.extensions})};Object.defineProperties($5.prototype,{classes:{get:function(){return this._classes}},enums:{get:function(){return this._enums}},id:{get:function(){return this._id}},name:{get:function(){return this._name}},description:{get:function(){return this._description}},version:{get:function(){return this._version}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var Fm=$5;function $x(e){e=g(e,g.EMPTY_OBJECT);let t=e.schema,n=e.resource,i=e.cacheKey;this._schema=l(t)?Fm.fromJson(t):void 0,this._resource=n,this._cacheKey=i,this._state=Xt.UNLOADED,this._promise=void 0}l(Object.create)&&($x.prototype=Object.create(io.prototype),$x.prototype.constructor=$x);Object.defineProperties($x.prototype,{cacheKey:{get:function(){return this._cacheKey}},schema:{get:function(){return this._schema}}});$x.prototype.load=async function(){return l(this._promise)?this._promise:l(this._schema)?(this._promise=Promise.resolve(this),this._promise):(this._promise=JAe(this),this._promise)};async function JAe(e){let t=e._resource;e._state=Xt.LOADING;try{let n=await t.fetchJson();return e.isDestroyed()?void 0:(e._schema=Fm.fromJson(n),e._state=Xt.READY,e)}catch(n){if(e.isDestroyed())return;e._state=Xt.FAILED;let i=`Failed to load schema: ${t.url}`;throw e.getError(i,n)}}$x.prototype.unload=function(){this._schema=void 0};var _C=$x;var Pun=T(S(),1);var Am={};function NX(e){return Dh(e.url)}function eN(e){let t=e.byteOffset,n=e.byteLength;if(oi(e,\"EXT_meshopt_compression\")){let i=e.extensions.EXT_meshopt_compression;t=g(i.byteOffset,0),n=i.byteLength}return`${t}-${t+n}`}function QAe(e,t){let n=t.byteOffset+e.byteOffset,i=e.componentType,o=e.type,r=e.count;return`${n}-${i}-${o}-${r}`}function woe(e){return NX(e)}function Foe(e,t){return`${NX(e)}-buffer-id-${t}`}function kX(e,t,n,i){if(l(e.uri)){let o=i.getDerivedResource({url:e.uri});return woe(o)}return Foe(n,t)}function _z(e,t,n,i){let o=t.bufferView,r=e.bufferViews[o],s=r.buffer,a=e.buffers[s],c=kX(a,s,n,i),d=eN(r);return`${c}-range-${d}`}function Aoe(e,t,n,i){let o=e.images[t],r=o.bufferView,s=o.uri;if(l(s)){let p=i.getDerivedResource({url:s});return NX(p)}let a=e.bufferViews[r],c=a.buffer,d=e.buffers[c],u=kX(d,c,n,i),m=eN(a);return`${u}-range-${m}`}function jAe(e,t){let n=Il.createSampler({gltf:e,textureInfo:t});return`${n.wrapS}-${n.wrapT}-${n.minificationFilter}-${n.magnificationFilter}`}Am.getSchemaCacheKey=function(e){let t=e.schema,n=e.resource;return l(t)?`embedded-schema:${JSON.stringify(t)}`:`external-schema:${NX(n)}`};Am.getExternalBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.resource;return`external-buffer:${woe(t)}`};Am.getEmbeddedBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.parentResource,n=e.bufferId;return`embedded-buffer:${Foe(t,n)}`};Am.getGltfCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltfResource;return`gltf:${NX(t)}`};Am.getBufferViewCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.bufferViewId,i=e.gltfResource,o=e.baseResource,r=t.bufferViews[n],s=r.buffer,a=t.buffers[s];oi(r,\"EXT_meshopt_compression\")&&(s=r.extensions.EXT_meshopt_compression.buffer);let c=kX(a,s,i,o),d=eN(r);return`buffer-view:${c}-range-${d}`};Am.getDracoCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.draco,i=e.gltfResource,o=e.baseResource;return`draco:${_z(t,n,i,o)}`};Am.getVertexBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.gltfResource,i=e.baseResource,o=e.frameState,r=e.bufferViewId,s=e.draco,a=e.attributeSemantic,c=g(e.dequantize,!1),d=g(e.loadBuffer,!1),u=g(e.loadTypedArray,!1),m=\"\";if(c&&(m+=\"-dequantize\"),d&&(m+=\"-buffer\",m+=`-context-${o.context.id}`),u&&(m+=\"-typed-array\"),l(s))return`vertex-buffer:${_z(t,s,n,i)}-draco-${a}${m}`;let p=t.bufferViews[r],b=p.buffer,f=t.buffers[b],x=kX(f,b,n,i),_=eN(p);return`vertex-buffer:${x}-range-${_}${m}`};Am.getIndexBufferCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.accessorId,i=e.gltfResource,o=e.baseResource,r=e.frameState,s=e.draco,a=g(e.loadBuffer,!1),c=g(e.loadTypedArray,!1),d=\"\";if(a&&(d+=\"-buffer\",d+=`-context-${r.context.id}`),c&&(d+=\"-typed-array\"),l(s))return`index-buffer:${_z(t,s,i,o)}-draco${d}`;let u=t.accessors[n],m=u.bufferView,p=t.bufferViews[m],b=p.buffer,f=t.buffers[b],x=kX(f,b,i,o),_=QAe(u,p);return`index-buffer:${x}-accessor-${_}${d}`};Am.getImageCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.imageId,i=e.gltfResource,o=e.baseResource;return`image:${Aoe(t,n,i,o)}`};Am.getTextureCacheKey=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.textureInfo,i=e.gltfResource,o=e.baseResource,r=e.supportedImageFormats,s=e.frameState,a=n.index,c=Il.getImageIdFromTexture({gltf:t,textureId:a,supportedImageFormats:r}),d=Aoe(t,c,i,o),u=jAe(t,n);return`texture:${d}-sampler-${u}-context-${s.context.id}`};var Wl=Am;var Fun=T(S(),1);function UX(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}}UX.prototype.clear=function(){this.geometryByteLength=0,this.texturesByteLength=0,this._geometrySizes={},this._textureSizes={}};UX.prototype.addGeometryLoader=function(e){let t=e.cacheKey;if(this._geometrySizes.hasOwnProperty(t))return;this._geometrySizes[t]=0;let n=e.buffer,i=e.typedArray,o=0;l(n)&&(o+=n.sizeInBytes),l(i)&&(o+=i.byteLength),this.geometryByteLength+=o,this._geometrySizes[t]=o};UX.prototype.addTextureLoader=function(e){let t=e.cacheKey;if(this._textureSizes.hasOwnProperty(t))return;this._textureSizes[t]=0;let n=e.texture.sizeInBytes;this.texturesByteLength+=e.texture.sizeInBytes,this._textureSizes[t]=n};UX.prototype.removeLoader=function(e){let t=e.cacheKey,n=this._geometrySizes[t];delete this._geometrySizes[t],l(n)&&(this.geometryByteLength-=n);let i=this._textureSizes[t];delete this._textureSizes[t],l(i)&&(this.texturesByteLength-=i)};var DX=UX;function Fn(){}Fn.cacheEntries={};Fn.statistics=new DX;function qAe(e){this.referenceCount=1,this.resourceLoader=e,this._statisticsPromise=void 0}Fn.get=function(e){let t=Fn.cacheEntries[e];if(l(t))return++t.referenceCount,t.resourceLoader};Fn.add=function(e){let t=e.cacheKey;return Fn.cacheEntries[t]=new qAe(e),e};Fn.unload=function(e){let t=e.cacheKey,n=Fn.cacheEntries[t];--n.referenceCount,n.referenceCount===0&&(Fn.statistics.removeLoader(e),e.destroy(),delete Fn.cacheEntries[t])};Fn.getSchemaLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.schema,n=e.resource,i=Wl.getSchemaCacheKey({schema:t,resource:n}),o=Fn.get(i);return l(o)?o:(o=new _C({schema:t,resource:n,cacheKey:i}),Fn.add(o))};Fn.getEmbeddedBufferLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.parentResource,n=e.bufferId,i=e.typedArray,o=Wl.getEmbeddedBufferCacheKey({parentResource:t,bufferId:n}),r=Fn.get(o);return l(r)?r:(r=new Ox({typedArray:i,cacheKey:o}),Fn.add(r))};Fn.getExternalBufferLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.resource,n=Wl.getExternalBufferCacheKey({resource:t}),i=Fn.get(n);return l(i)?i:(i=new Ox({resource:t,cacheKey:n}),Fn.add(i))};Fn.getGltfJsonLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltfResource,n=e.baseResource,i=e.typedArray,o=e.gltfJson,r=Wl.getGltfCacheKey({gltfResource:t}),s=Fn.get(r);return l(s)?s:(s=new yC({resourceCache:Fn,gltfResource:t,baseResource:n,typedArray:i,gltfJson:o,cacheKey:r}),Fn.add(s))};Fn.getBufferViewLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.bufferViewId,i=e.gltfResource,o=e.baseResource,r=Wl.getBufferViewCacheKey({gltf:t,bufferViewId:n,gltfResource:i,baseResource:o}),s=Fn.get(r);return l(s)?s:(s=new mC({resourceCache:Fn,gltf:t,bufferViewId:n,gltfResource:i,baseResource:o,cacheKey:r}),Fn.add(s))};Fn.getDracoLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.draco,i=e.gltfResource,o=e.baseResource,r=Wl.getDracoCacheKey({gltf:t,draco:n,gltfResource:i,baseResource:o}),s=Fn.get(r);return l(s)?s:(s=new hC({resourceCache:Fn,gltf:t,draco:n,gltfResource:i,baseResource:o,cacheKey:r}),Fn.add(s))};Fn.getVertexBufferLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.gltfResource,i=e.baseResource,o=e.frameState,r=e.bufferViewId,s=e.draco,a=e.attributeSemantic,c=e.accessorId,d=g(e.asynchronous,!0),u=g(e.dequantize,!1),m=g(e.loadBuffer,!1),p=g(e.loadTypedArray,!1),b=Wl.getVertexBufferCacheKey({gltf:t,gltfResource:n,baseResource:i,frameState:o,bufferViewId:r,draco:s,attributeSemantic:a,dequantize:u,loadBuffer:m,loadTypedArray:p}),f=Fn.get(b);return l(f)?f:(f=new xC({resourceCache:Fn,gltf:t,gltfResource:n,baseResource:i,bufferViewId:r,draco:s,attributeSemantic:a,accessorId:c,cacheKey:b,asynchronous:d,dequantize:u,loadBuffer:m,loadTypedArray:p}),Fn.add(f))};Fn.getIndexBufferLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.accessorId,i=e.gltfResource,o=e.baseResource,r=e.frameState,s=e.draco,a=g(e.asynchronous,!0),c=g(e.loadBuffer,!1),d=g(e.loadTypedArray,!1),u=Wl.getIndexBufferCacheKey({gltf:t,accessorId:n,gltfResource:i,baseResource:o,frameState:r,draco:s,loadBuffer:c,loadTypedArray:d}),m=Fn.get(u);return l(m)?m:(m=new pC({resourceCache:Fn,gltf:t,accessorId:n,gltfResource:i,baseResource:o,draco:s,cacheKey:u,asynchronous:a,loadBuffer:c,loadTypedArray:d}),Fn.add(m))};Fn.getImageLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.imageId,i=e.gltfResource,o=e.baseResource,r=Wl.getImageCacheKey({gltf:t,imageId:n,gltfResource:i,baseResource:o}),s=Fn.get(r);return l(s)?s:(s=new fC({resourceCache:Fn,gltf:t,imageId:n,gltfResource:i,baseResource:o,cacheKey:r}),Fn.add(s))};Fn.getTextureLoader=function(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.textureInfo,i=e.gltfResource,o=e.baseResource,r=e.supportedImageFormats,s=e.frameState,a=g(e.asynchronous,!0),c=Wl.getTextureCacheKey({gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:s}),d=Fn.get(c);return l(d)?d:(d=new gC({resourceCache:Fn,gltf:t,textureInfo:n,gltfResource:i,baseResource:o,supportedImageFormats:r,cacheKey:c,asynchronous:a}),Fn.add(d))};Fn.clearForSpecs=function(){let e=[xC,pC,hC,gC,fC,mC,Ox,_C,yC],t,n=Fn.cacheEntries,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);i.sort(function(r,s){let a=e.indexOf(r.resourceLoader.constructor),c=e.indexOf(s.resourceLoader.constructor);return a-c});let o=i.length;for(let r=0;r<o;++r){let s=i[r];t=s.resourceLoader.cacheKey,l(n[t])&&(s.resourceLoader.destroy(),delete n[t])}Fn.statistics.clear()};var Di=Fn;function ia(e,t,n){this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=n,this._subtreeLevels=t.subtreeLevels,this._subdivisionScheme=t.subdivisionScheme,this._branchingFactor=t.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._ready=!1}Object.defineProperties(ia.prototype,{ready:{get:function(){return this._ready}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}});ia.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)};ia.prototype.tileIsAvailableAtCoordinates=function(e){let t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)};ia.prototype.contentIsAvailableAtIndex=function(e,t){return t=g(t,0),this._contentAvailabilityBitstreams[t].getBit(e)};ia.prototype.contentIsAvailableAtCoordinates=function(e,t){let n=this.getTileIndex(e);return this.contentIsAvailableAtIndex(n,t)};ia.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)};ia.prototype.childSubtreeIsAvailableAtCoordinates=function(e){let t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)};ia.prototype.getLevelOffset=function(e){let t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)};ia.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===Or.OCTREE&&(t=3),e>>t};ia.fromSubtreeJson=async function(e,t,n,i,o){let r=new ia(e,i,o),s;l(t)?s={json:t,binary:void 0}:s=$Ae(n);let a=s.json;r._subtreeJson=a;let c;if(oi(a,\"3DTILES_metadata\"))c=a.extensions[\"3DTILES_metadata\"];else if(l(a.tileMetadata)){let V=a.tileMetadata;c=a.propertyTables[V]}let d=[];if(l(a.contentMetadata)){let V=a.contentMetadata.length;for(let L=0;L<V;L++){let R=a.contentMetadata[L];d.push(a.propertyTables[R])}}let u,m=i.metadataSchema,p=a.subtreeMetadata;if(l(p)){let V=p.class,L=m.classes[V];u=new TX({subtreeMetadata:p,class:L})}r._metadata=u,r._tilePropertyTableJson=c,r._contentPropertyTableJsons=d;let b={constant:0};a.contentAvailabilityHeaders=[],oi(a,\"3DTILES_multiple_contents\")?a.contentAvailabilityHeaders=a.extensions[\"3DTILES_multiple_contents\"].contentAvailability:Array.isArray(a.contentAvailability)?a.contentAvailabilityHeaders=a.contentAvailability:a.contentAvailabilityHeaders.push(g(a.contentAvailability,b));let f=eMe(a.buffers),x=tMe(a.bufferViews,f);nMe(a,x),l(c)&&Moe(c,x);for(let V=0;V<d.length;V++){let L=d[V];Moe(L,x)}let _=await iMe(r,f,s.binary),C=rMe(x,_);return sMe(r,a,i,C),l(c)&&(aMe(r,i,C),lMe(r)),cMe(r,i,C),dMe(r),r._ready=!0,r};function $Ae(e){let n=new DataView(e.buffer,e.byteOffset),i=8,o=n.getUint32(i,!0);i+=8;let r=n.getUint32(i,!0);i+=8;let s=Go(e,i,o);i+=o;let a=e.subarray(i,i+r);return{json:s,binary:a}}function eMe(e){e=l(e)?e:[];for(let t=0;t<e.length;t++){let n=e[t];n.isExternal=l(n.uri),n.isActive=!1}return e}function tMe(e,t){e=l(e)?e:[];for(let n=0;n<e.length;n++){let i=e[n],o=t[i.buffer];i.bufferHeader=o,i.isActive=!1}return e}function nMe(e,t){let n,i=e.tileAvailability;l(i.bitstream)?n=t[i.bitstream]:l(i.bufferView)&&(n=t[i.bufferView]),l(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);let o=e.contentAvailabilityHeaders;for(let s=0;s<o.length;s++)n=void 0,l(o[s].bitstream)?n=t[o[s].bitstream]:l(o[s].bufferView)&&(n=t[o[s].bufferView]),l(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0);n=void 0;let r=e.childSubtreeAvailability;l(r.bitstream)?n=t[r.bitstream]:l(r.bufferView)&&(n=t[r.bufferView]),l(n)&&(n.isActive=!0,n.bufferHeader.isActive=!0)}function Moe(e,t){let n=e.properties,i;for(let o in n)if(n.hasOwnProperty(o)){let r=n[o],s=g(r.values,r.bufferView);i=t[s],i.isActive=!0,i.bufferHeader.isActive=!0;let a=g(r.stringOffsets,r.stringOffsetBufferView);l(a)&&(i=t[a],i.isActive=!0,i.bufferHeader.isActive=!0);let c=g(r.arrayOffsets,r.arrayOffsetBufferView);l(c)&&(i=t[c],i.isActive=!0,i.bufferHeader.isActive=!0)}}function iMe(e,t,n){let i=[];for(let o=0;o<t.length;o++){let r=t[o];if(!r.isActive)i.push(Promise.resolve(void 0));else if(r.isExternal){let s=oMe(e,r);i.push(s)}else i.push(Promise.resolve(n))}return Promise.all(i).then(function(o){let r={};for(let s=0;s<o.length;s++){let a=o[s];l(a)&&(r[s]=a)}return r})}async function oMe(e,t){let i=e._resource.getDerivedResource({url:t.uri}),o=Di.getExternalBufferLoader({resource:i});e._bufferLoader=o;try{await o.load()}catch(r){if(o.isDestroyed())return;throw r}return o.typedArray}function rMe(e,t){let n={};for(let i=0;i<e.length;i++){let o=e[i];if(!o.isActive)continue;let r=o.byteOffset,s=r+o.byteLength,c=t[o.buffer].subarray(r,s);n[i]=c}return n}function sMe(e,t,n,i){let o=n.branchingFactor,r=n.subtreeLevels,s=(Math.pow(o,r)-1)/(o-1),a=Math.pow(o,r),c=oi(t,\"3DTILES_metadata\"),d=l(e._tilePropertyTableJson),u=c||d;e._tileAvailability=Tz(t.tileAvailability,i,s,u);let m=e._contentPropertyTableJsons.length>0;u=u||m;for(let p=0;p<t.contentAvailabilityHeaders.length;p++){let b=Tz(t.contentAvailabilityHeaders[p],i,s,u);e._contentAvailabilityBitstreams.push(b)}e._childSubtreeAvailability=Tz(t.childSubtreeAvailability,i,a)}function Tz(e,t,n,i){if(l(e.constant))return new dC({constant:!!e.constant,lengthBits:n,availableCount:e.availableCount});let o;return l(e.bitstream)?o=t[e.bitstream]:l(e.bufferView)&&(o=t[e.bufferView]),new dC({bitstream:o,lengthBits:n,availableCount:e.availableCount,computeAvailableCountEnabled:i})}function aMe(e,t,n){let i=e._tilePropertyTableJson,o=e._tileAvailability.availableCount,r=t.metadataSchema,s=i.class,a=r.classes[s];e._tileMetadataTable=new El({class:a,count:o,properties:i.properties,bufferViews:n})}function cMe(e,t,n){let i=e._contentPropertyTableJsons,o=e._contentAvailabilityBitstreams,r=t.metadataSchema,s=e._contentMetadataTables;for(let a=0;a<i.length;a++){let c=i[a],u=o[a].availableCount,m=c.class,p=r.classes[m],b=new El({class:p,count:u,properties:c.properties,bufferViews:n});s.push(b)}}function Noe(e){let t=0,n=e.lengthBits,i=e.availableCount,o;i<256?o=new Uint8Array(n):i<65536?o=new Uint16Array(n):o=new Uint32Array(n);for(let r=0;r<e.lengthBits;r++)e.getBit(r)&&(o[r]=t,t++);return o}function lMe(e){let t=Noe(e._tileAvailability);e._tileJumpBuffer=t}function dMe(e){let t=e._contentJumpBuffers,n=e._contentAvailabilityBitstreams;for(let i=0;i<n.length;i++){let o=n[i],r=Noe(o);t.push(r)}}ia.prototype.getTileIndex=function(e){let t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new ue(\"level is out of bounds for this subtree\");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex};ia.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new ue(\"level is out of bounds for this subtree\");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex};function uMe(e,t){if(!l(e._tileMetadataTable))return;let n=e.getTileIndex(t);if(e._tileAvailability.getBit(n))return e._tileJumpBuffer[n]}function mMe(e,t,n){let i=e._contentMetadataTables;if(!l(i))return;let o=i[n];if(!l(o))return;let r=e._contentAvailabilityBitstreams[n],s=e.getTileIndex(t);if(r.getBit(s))return e._contentJumpBuffers[n][s]}ia.prototype.getTileMetadataView=function(e){let t=uMe(this,e);if(!l(t))return;let n=this._tileMetadataTable;return new uC({class:n.class,metadataTable:n,entityId:t,propertyTableJson:this._tilePropertyTableJson})};ia.prototype.getContentMetadataView=function(e,t){let n=mMe(this,e,t);if(!l(n))return;let i=this._contentMetadataTables[t],o=this._contentPropertyTableJsons[t];return new uC({class:i.class,metadataTable:i,entityId:n,contentIndex:t,propertyTableJson:o})};ia.prototype.isDestroyed=function(){return!1};ia.prototype.destroy=function(){return l(this._bufferLoader)&&Di.unload(this._bufferLoader),me(this)};var e_=ia;var hmn=T(S(),1),hMe={ID:\"ID\",NAME:\"NAME\",DESCRIPTION:\"DESCRIPTION\",TILESET_TILE_COUNT:\"TILESET_TILE_COUNT\",TILE_BOUNDING_BOX:\"TILE_BOUNDING_BOX\",TILE_BOUNDING_REGION:\"TILE_BOUNDING_REGION\",TILE_BOUNDING_SPHERE:\"TILE_BOUNDING_SPHERE\",TILE_MINIMUM_HEIGHT:\"TILE_MINIMUM_HEIGHT\",TILE_MAXIMUM_HEIGHT:\"TILE_MAXIMUM_HEIGHT\",TILE_HORIZON_OCCLUSION_POINT:\"TILE_HORIZON_OCCLUSION_POINT\",TILE_GEOMETRIC_ERROR:\"TILE_GEOMETRIC_ERROR\",CONTENT_BOUNDING_BOX:\"CONTENT_BOUNDING_BOX\",CONTENT_BOUNDING_REGION:\"CONTENT_BOUNDING_REGION\",CONTENT_BOUNDING_SPHERE:\"CONTENT_BOUNDING_SPHERE\",CONTENT_MINIMUM_HEIGHT:\"CONTENT_MINIMUM_HEIGHT\",CONTENT_MAXIMUM_HEIGHT:\"CONTENT_MAXIMUM_HEIGHT\",CONTENT_HORIZON_OCCLUSION_POINT:\"CONTENT_HORIZON_OCCLUSION_POINT\"},t_=Object.freeze(hMe);var bmn=T(S(),1);var Mm={};Mm.parseAllBoundingVolumeSemantics=function(e){return{tile:{boundingVolume:Mm.parseBoundingVolumeSemantic(\"TILE\",e),minimumHeight:Mm._parseMinimumHeight(\"TILE\",e),maximumHeight:Mm._parseMaximumHeight(\"TILE\",e)},content:{boundingVolume:Mm.parseBoundingVolumeSemantic(\"CONTENT\",e),minimumHeight:Mm._parseMinimumHeight(\"CONTENT\",e),maximumHeight:Mm._parseMaximumHeight(\"CONTENT\",e)}}};Mm.parseBoundingVolumeSemantic=function(e,t){let n=`${e}_BOUNDING_BOX`,i=t.getPropertyBySemantic(n);if(l(i))return{box:i};let o=`${e}_BOUNDING_REGION`,r=t.getPropertyBySemantic(o);if(l(r))return{region:r};let s=`${e}_BOUNDING_SPHERE`,a=t.getPropertyBySemantic(s);if(l(a))return{sphere:a}};Mm._parseMinimumHeight=function(e,t){let n=`${e}_MINIMUM_HEIGHT`;return t.getPropertyBySemantic(n)};Mm._parseMaximumHeight=function(e,t){let n=`${e}_MAXIMUM_HEIGHT`;return t.getPropertyBySemantic(n)};var n_=Mm;function Oc(e,t,n){let i=t.implicitTileset,o=t.implicitCoordinates;this._implicitTileset=i,this._implicitCoordinates=o,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=n,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;let r=o.getTemplateValues(),s=i.subtreeUriTemplate.getDerivedResource({templateValues:r});this._url=s.getUrlComponent(!0),this._ready=!1}Object.defineProperties(Oc.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return this._ready}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}});Oc.fromSubtreeJson=async function(e,t,n,i,o,r){r=g(r,0);let s;l(o)&&(s=new Uint8Array(o,r));let a=t.implicitTileset,c=t.implicitCoordinates,d=await e_.fromSubtreeJson(n,i,s,a,c),u=new Oc(e,t,n);return u._implicitSubtree=d,fMe(u,d),u._ready=!0,u};function fMe(e,t){let n=e._tile,i=e._implicitCoordinates.childIndex,o=bMe(e,t,n,i),r=e._tileset.statistics;n.children.push(o.rootTile),r.numberOfTilesTotal++;let s=pMe(e,t,o.bottomRow);for(let a=0;a<s.length;a++){let c=s[a],d=c.tile,u=LMe(e,d,c.childIndex);d.children.push(u),r.numberOfTilesTotal++}}function pMe(e,t,n){let i=[],o=e._implicitTileset.branchingFactor;for(let r=0;r<n.length;r++){let s=n[r];if(l(s))for(let a=0;a<o;a++){let c=r*o+a;t.childSubtreeIsAvailableAtIndex(c)&&i.push({tile:s,childIndex:a})}}return i}function bMe(e,t,n,i){let s=koe(e,t,n,i,0,!0),a=e._tileset.statistics,c=[s],d=[],u=e._implicitTileset;for(let m=1;m<u.subtreeLevels;m++){let p=t.getLevelOffset(m),b=u.branchingFactor*c.length;for(let f=0;f<b;f++){let x=p+f;if(!t.tileIsAvailableAtIndex(x)){d.push(void 0);continue}let _=t.getParentMortonIndex(f),C=c[_],V=f%u.branchingFactor,L=koe(e,t,C,V,x);C.children.push(L),a.numberOfTilesTotal++,d.push(L)}c=d,d=[]}return{rootTile:s,bottomRow:c}}function Uoe(e,t,n){let i=t_.TILE_GEOMETRIC_ERROR;return l(e)&&e.hasPropertyBySemantic(i)?e.getPropertyBySemantic(i):t.geometricError/Math.pow(2,n.level)}function koe(e,t,n,i,o,r){let s=e._implicitTileset,a;g(r,!1)?a=n.implicitCoordinates:a=n.implicitCoordinates.getChildCoordinates(i);let c,d,u;if(l(t.tilePropertyTableJson)){c=t.getTileMetadataView(a);let X=n_.parseAllBoundingVolumeSemantics(c);d=X.tile,u=X.content}let p=t.contentPropertyTableJsons.length,b=!1;for(let X=0;X<p;X++)if(t.contentIsAvailableAtCoordinates(a,X)){b=!0;break}let f=xMe(s,a,i,r,n,d),x=[];for(let X=0;X<s.contentCount;X++){if(!t.contentIsAvailableAtIndex(o,X))continue;let F={uri:s.contentUriTemplates[X].getDerivedResource({templateValues:a.getTemplateValues()}).url},A=_Me(f,u);l(A)&&(F.boundingVolume=A),x.push(Ct(F,s.contentHeaders[X]))}let _=Uoe(c,s,a),C={boundingVolume:f,geometricError:_,refine:s.refine,contents:x},V=!0,L=Oe(s.tileHeader,V);delete L.boundingVolume,delete L.transform,delete L.metadata;let R=Ct(C,L,V),G=zoe(e,s.baseResource,R,n);return G.implicitCoordinates=a,G.implicitSubtree=t,G.metadata=c,G.hasImplicitContentMetadata=b,G}function tN(e,t){return l(e)&&l(t)&&(l(t.minimumHeight)||l(t.maximumHeight))&&(oi(e,\"3DTILES_bounding_volume_S2\")||l(e.region))}function Cz(e,t){l(t)&&(oi(e,\"3DTILES_bounding_volume_S2\")?gMe(e.extensions[\"3DTILES_bounding_volume_S2\"],t.minimumHeight,t.maximumHeight):l(e.region)&&yMe(e.region,t.minimumHeight,t.maximumHeight))}function yMe(e,t,n){l(t)&&(e[4]=t),l(n)&&(e[5]=n)}function gMe(e,t,n){l(t)&&(e.minimumHeight=t),l(n)&&(e.maximumHeight=n)}function xMe(e,t,n,i,o,r){let s;return!l(r)||!l(r.boundingVolume)||!tN(r.boundingVolume,r)&&tN(e.boundingVolume,r)?s=Doe(e,t,n,g(i,!1),o):s=r.boundingVolume,Cz(s,r),s}function _Me(e,t){let n;return l(t)&&(n=t.boundingVolume),tN(n,t)?Cz(n,t):tN(e,t)&&(n=Oe(e,!0),Cz(n,t)),n}function Doe(e,t,n,i,o){let r=e.boundingVolume;return oi(r,\"3DTILES_bounding_volume_S2\")?Boe(i,o,n,t.level,t.x,t.y,t.z):l(r.region)?{region:Ooe(r.region,t.level,t.x,t.y,t.z)}:{box:Yoe(r.box,t.level,t.x,t.y,t.z)}}function Boe(e,t,n,i,o,r,s){let a=t._boundingVolume;if(e)return{extensions:{\"3DTILES_bounding_volume_S2\":{token:Mp.getTokenFromId(a.s2Cell._cellId),minimumHeight:a.minimumHeight,maximumHeight:a.maximumHeight}}};let c=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),d=c%2===0?cC.encode2D(i,o,r):cC.encode2D(i,r,o),u=Mp.fromFacePositionLevel(c,BigInt(d),i),m,p;if(l(s)){let b=(a.maximumHeight+a.minimumHeight)/2;m=n<4?a.minimumHeight:b,p=n<4?b:a.maximumHeight}else m=a.minimumHeight,p=a.maximumHeight;return{extensions:{\"3DTILES_bounding_volume_S2\":{token:Mp.getTokenFromId(u._cellId),minimumHeight:m,maximumHeight:p}}}}var TMe=new h,SMe=new h,Sz=new h,CMe=new $;function Yoe(e,t,n,i,o){if(t===0)return e;let r=h.unpack(e,0,SMe),s=$.unpack(e,3,CMe),a=Math.pow(2,-t),c=-1+(2*n+1)*a,d=-1+(2*i+1)*a,u=0,m=h.fromElements(a,a,1,TMe);l(o)&&(u=-1+(2*o+1)*a,m.z=a);let p=h.fromElements(c,d,u,Sz);p=$.multiplyByVector(s,p,Sz),p=h.add(p,r,Sz);let b=$.clone(s);b=$.multiplyByScale(b,m,b);let f=new Array(12);return h.pack(p,f),$.pack(b,f,3),f}var VMe=new le;function Ooe(e,t,n,i,o){if(t===0)return e.slice();let r=le.unpack(e,0,VMe),s=e[4],a=e[5],c=Math.pow(2,-t),d=c*r.width,u=P.negativePiToPi(r.west+n*d),m=P.negativePiToPi(u+d),p=c*r.height,b=P.negativePiToPi(r.south+i*p),f=P.negativePiToPi(b+p),x=s,_=a;if(l(o)){let C=c*(a-s);x+=o*C,_=x+C}return[u,b,m,f,x,_]}function LMe(e,t,n){let i=e._implicitTileset,o=t.implicitCoordinates.getChildCoordinates(n),r=Doe(i,o,n,!1,t),s=Uoe(void 0,i,o),a=i.subtreeUriTemplate.getDerivedResource({templateValues:o.getTemplateValues()}).url,c={boundingVolume:r,geometricError:s,refine:i.refine,contents:[{uri:a}]},d=zoe(e,i.baseResource,c,t);return d.implicitTileset=i,d.implicitCoordinates=o,d}function zoe(e,t,n,i){let o=e._tile.constructor;return new o(e._tileset,t,n,i)}Oc.prototype.hasProperty=function(e,t){return!1};Oc.prototype.getFeature=function(e){};Oc.prototype.applyDebugSettings=function(e,t){};Oc.prototype.applyStyle=function(e){};Oc.prototype.update=function(e,t){};Oc.prototype.pick=function(e,t,n){};Oc.prototype.isDestroyed=function(){return!1};Oc.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),me(this)};Oc._deriveBoundingBox=Yoe;Oc._deriveBoundingRegion=Ooe;Oc._deriveBoundingVolumeS2=Boe;var TC=Oc;var GEn=T(S(),1);var wmn=T(S(),1),ZMe={NONE:0,REPEAT:1,MIRRORED_REPEAT:2},Pl=Object.freeze(ZMe);var gEn=T(S(),1);var rhn=T(S(),1);var Nmn=T(S(),1);function SC(e,t){this._distance=t,this._normal=new Hoe(e,this),this.onChangeCallback=void 0,this.index=-1}Object.defineProperties(SC.prototype,{distance:{get:function(){return this._distance},set:function(e){l(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){l(this.onChangeCallback)&&!h.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),h.clone(e,this._normal._cartesian3)}}});SC.fromPlane=function(e,t){return l(t)?(t.normal=e.normal,t.distance=e.distance):t=new SC(e.normal,e.distance),t};SC.clone=function(e,t){return l(t)?(t.normal=e.normal,t.distance=e.distance,t):new SC(e.normal,e.distance)};function Hoe(e,t){this._clippingPlane=t,this._cartesian3=h.clone(e)}Object.defineProperties(Hoe.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){l(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){l(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){l(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});var i_=SC;function sc(e){e=g(e,g.EMPTY_OBJECT),this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=g(e.enabled,!0),this.modelMatrix=M.clone(g(e.modelMatrix,M.IDENTITY)),this.edgeColor=O.clone(g(e.edgeColor,O.WHITE)),this.edgeWidth=g(e.edgeWidth,0),this.planeAdded=new ge,this.planeRemoved=new ge,this._owner=void 0;let t=g(e.unionClippingRegions,!1);this._unionClippingRegions=t,this._testIntersection=t?qoe:$oe,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;let n=e.planes;if(l(n)){let i=n.length;for(let o=0;o<i;++o)this.add(n[o])}}function qoe(e){return e===nn.OUTSIDE}function $oe(e){return e===nn.INSIDE}Object.defineProperties(sc.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?qoe:$oe)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}});function Koe(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||e._dirtyIndex!==-1&&e._dirtyIndex!==t,e._dirtyIndex=t}sc.prototype.add=function(e){let t=this._planes.length,n=this;e.onChangeCallback=function(i){Koe(n,i)},e.index=t,Koe(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)};sc.prototype.get=function(e){return this._planes[e]};function ere(e,t){let n=e.length;for(let i=0;i<n;++i)if(an.equals(e[i],t))return i;return-1}sc.prototype.contains=function(e){return ere(this._planes,e)!==-1};sc.prototype.remove=function(e){let t=this._planes,n=ere(t,e);if(n===-1)return!1;e instanceof i_&&(e.onChangeCallback=void 0,e.index=-1);let i=t.length-1;for(let o=n;o<i;++o){let r=t[o+1];t[o]=r,r instanceof i_&&(r.index=o)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0};sc.prototype.removeAll=function(){let e=this._planes,t=e.length;for(let n=0;n<t;++n){let i=e[n];i instanceof i_&&(i.onChangeCallback=void 0,i.index=-1),this.planeRemoved.raiseEvent(i,n)}this._multipleDirtyPlanes=!0,this._planes=[]};var RMe=new se,GMe=new se;function Joe(e,t,n){let i=e._uint8View,o=e._planes,r=0;for(let s=t;s<n;++s){let a=o[s],c=wn.octEncodeToCartesian4(a.normal,GMe);i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=c.w;let d=se.packFloat(a.distance,RMe);i[r+4]=d.x,i[r+5]=d.y,i[r+6]=d.z,i[r+7]=d.w,r+=8}}function Qoe(e,t,n){let i=e._float32View,o=e._planes,r=0;for(let s=t;s<n;++s){let a=o[s],c=a.normal;i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=a.distance,r+=4}}function tre(e,t){let n=Yt.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}var EMe=new D;sc.prototype.update=function(e){let t=this._clippingPlanesTexture,n=e.context,i=sc.useFloatTexture(n),o=i?this.length:this.length*2;if(l(t)){let s=t.width*t.height;(s<o||o<.25*s)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(this.length===0)return;if(!l(t)){let s=tre(o,EMe);s.y*=2,i?(t=new Ft({context:n,width:s.x,height:s.y,pixelFormat:at.RGBA,pixelDatatype:Qe.FLOAT,sampler:mn.NEAREST,flipY:!1}),this._float32View=new Float32Array(s.x*s.y*4)):(t=new Ft({context:n,width:s.x,height:s.y,pixelFormat:at.RGBA,pixelDatatype:Qe.UNSIGNED_BYTE,sampler:mn.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(s.x*s.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}let r=this._dirtyIndex;if(!(!this._multipleDirtyPlanes&&r===-1)){if(this._multipleDirtyPlanes)i?(Qoe(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(Joe(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let s=0,a=0;i?(a=Math.floor(r/t.width),s=Math.floor(r-a*t.width),Qoe(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:s,yOffset:a})):(a=Math.floor(r*2/t.width),s=Math.floor(r*2-a*t.width),Joe(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:s,yOffset:a}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};var XMe=new M,joe=new an(h.UNIT_X,0);sc.prototype.computeIntersectionWithBoundingVolume=function(e,t){let n=this._planes,i=n.length,o=this.modelMatrix;l(t)&&(o=M.multiply(t,o,XMe));let r=nn.INSIDE;!this.unionClippingRegions&&i>0&&(r=nn.OUTSIDE);for(let s=0;s<i;++s){let a=n[s];an.transform(a,o,joe);let c=e.intersectPlane(joe);if(c===nn.INTERSECTING)r=c;else if(this._testIntersection(c))return c}return r};sc.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),l(e)&&(e._owner=t,t[n]=e))};sc.useFloatTexture=function(e){return e.floatingPointTexture};sc.getTextureResolution=function(e,t,n){let i=e.texture;if(l(i))return n.x=i.width,n.y=i.height,n;let o=sc.useFloatTexture(t)?e.length:e.length*2,r=tre(o,n);return r.y*=2,r};sc.prototype.isDestroyed=function(){return!1};sc.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),me(this)};var fs=sc;var chn=T(S(),1);var BX={HIGHLIGHT:0,REPLACE:1,MIX:2};BX.getColorBlend=function(e,t){if(e===BX.HIGHLIGHT)return 0;if(e===BX.REPLACE)return 1;if(e===BX.MIX)return P.clamp(t,P.EPSILON4,1)};var ac=Object.freeze(BX);var Vpn=T(S(),1);var dhn=T(S(),1),IMe={XTRANSLATE:\"xTranslate\",YTRANSLATE:\"yTranslate\",ZTRANSLATE:\"zTranslate\",XROTATE:\"xRotate\",YROTATE:\"yRotate\",ZROTATE:\"zRotate\",XSCALE:\"xScale\",YSCALE:\"yScale\",ZSCALE:\"zScale\",UNIFORMSCALE:\"uniformScale\"},cc=Object.freeze(IMe);var mhn=T(S(),1),WMe={STEP:0,LINEAR:1,CUBICSPLINE:2},Nm=Object.freeze(WMe);var _fn=T(S(),1);var nfn=T(S(),1);var Shn=T(S(),1);var yhn=T(S(),1);var nre={};function YX(e){this._count=e.count,this._properties=Oe(e.properties,!0)}YX.prototype.hasProperty=function(e){return Mn.hasProperty(e,this._properties,nre)};YX.prototype.getPropertyIds=function(e){return Mn.getPropertyIds(this._properties,nre,e)};YX.prototype.getProperty=function(e,t){let n=this._properties[t];if(l(n))return Oe(n[e],!0)};YX.prototype.setProperty=function(e,t,n){let i=this._properties[t];l(i)||(i=new Array(this._count),this._properties[t]=i),i[e]=Oe(n,!0)};var Op=YX;function lc(e){e=g(e,g.EMPTY_OBJECT),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(lc.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if(l(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return l(this._metadataTable)&&(e+=this._metadataTable.byteLength),l(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}});lc.prototype.hasProperty=function(e,t){return!!(l(this._metadataTable)&&this._metadataTable.hasProperty(t)||l(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)||l(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(t))};lc.prototype.hasPropertyBySemantic=function(e,t){return l(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(t):!1};lc.prototype.propertyExists=function(e){return!!(l(this._metadataTable)&&this._metadataTable.hasProperty(e)||l(this._batchTableHierarchy)&&this._batchTableHierarchy.propertyExists(e)||l(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(e))};lc.prototype.propertyExistsBySemantic=function(e){return l(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(e):!1};var Vz=[];lc.prototype.getPropertyIds=function(e,t){return t=l(t)?t:[],t.length=0,l(this._metadataTable)&&t.push.apply(t,this._metadataTable.getPropertyIds(Vz)),l(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,Vz)),l(this._jsonMetadataTable)&&t.push.apply(t,this._jsonMetadataTable.getPropertyIds(Vz)),t};lc.prototype.getProperty=function(e,t){let n;if(l(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),l(n))||l(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),l(n))||l(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),l(n)))return n};lc.prototype.setProperty=function(e,t,n){l(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||l(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||(l(this._jsonMetadataTable)||(this._jsonMetadataTable=new Op({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))};lc.prototype.getPropertyBySemantic=function(e,t){if(l(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)};lc.prototype.setPropertyBySemantic=function(e,t,n){return l(this._metadataTable)?this._metadataTable.setPropertyBySemantic(e,t,n):!1};lc.prototype.getPropertyTypedArray=function(e){if(l(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)};lc.prototype.getPropertyTypedArrayBySemantic=function(e){if(l(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)};lc.prototype.isClass=function(e,t){let n=this._batchTableHierarchy;return l(n)?n.isClass(e,t):!1};lc.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t};lc.prototype.getExactClassName=function(e){let t=this._batchTableHierarchy;if(l(t))return t.getClassName(e)};var zc=lc;var vhn=T(S(),1);var Ehn=T(S(),1);function OX(e){e=g(e,g.EMPTY_OBJECT);let t=e.property,n=e.classProperty,i=e.textures,o=l(t.channels)?t.channels:[0],r=t,s=Il.createModelTextureReader({textureInfo:r,channels:wMe(o),texture:i[r.index]});this._min=t.min,this._max=t.max;let a=t.offset,c=t.scale,d=n.hasValueTransform||l(a)||l(c);a=g(a,n.offset),c=g(c,n.scale),a=n.unpackVectorAndMatrixTypes(a),c=n.unpackVectorAndMatrixTypes(c),this._offset=a,this._scale=c,this._hasValueTransform=d,this._textureReader=s,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(OX.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});OX.prototype.isGpuCompatible=function(){let e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?!e.isVariableLengthArray&&e.arrayLength<=4&&t===Kt.SCALAR&&n===sn.UINT8:Kt.isVectorType(t)||t===Kt.SCALAR?n===sn.UINT8:!1};var PMe=[void 0,\"float\",\"vec2\",\"vec3\",\"vec4\"],vMe=[void 0,\"int\",\"ivec2\",\"ivec3\",\"ivec4\"];OX.prototype.getGlslType=function(){let e=this._classProperty,t=Kt.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?PMe[t]:vMe[t]};OX.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};function wMe(e){return e.map(function(t){return\"rgba\".charAt(t)}).join(\"\")}var zX=OX;function Lz(e){e=g(e,g.EMPTY_OBJECT);let t=e.propertyTexture,n=e.class,i=e.textures,o=t.extensions,r=t.extras,s={};if(l(t.properties))for(let a in t.properties)t.properties.hasOwnProperty(a)&&(s[a]=new zX({property:t.properties[a],classProperty:n.properties[a],textures:i}));this._name=e.name,this._id=e.id,this._class=n,this._properties=s,this._extras=r,this._extensions=o}Object.defineProperties(Lz.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Lz.prototype.getProperty=function(e){return this._properties[e]};var o_=Lz;var Bhn=T(S(),1);var Mhn=T(S(),1);function ire(e){e=g(e,g.EMPTY_OBJECT);let t=e.property,n=e.classProperty;this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let i=t.offset,o=t.scale,r=n.hasValueTransform||l(i)||l(o);i=g(i,n.offset),o=g(o,n.scale),i=n.unpackVectorAndMatrixTypes(i),o=n.unpackVectorAndMatrixTypes(o),this._offset=i,this._scale=o,this._hasValueTransform=r,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(ire.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var HX=ire;function Zz(e){e=g(e,g.EMPTY_OBJECT);let t=e.propertyAttribute,n=e.class,i={};if(l(t.properties))for(let o in t.properties)t.properties.hasOwnProperty(o)&&(i[o]=new HX({property:t.properties[o],classProperty:n.properties[o]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(Zz.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Zz.prototype.getProperty=function(e){return this._properties[e]};var r_=Zz;var Hhn=T(S(),1);function KX(e){e=g(e,g.EMPTY_OBJECT),this._schema=e.schema;let t=e.propertyTables;this._propertyTableCount=l(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(KX.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!l(this._propertyTables))return 0;let e=0,t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}});KX.prototype.getPropertyTable=function(e){return this._propertyTables[e]};KX.prototype.getPropertyTexture=function(e){return this._propertyTextures[e]};KX.prototype.getPropertyAttribute=function(e){return this._propertyAttributes[e]};var Xa=KX;function FMe(e){e=g(e,g.EMPTY_OBJECT);let t=e.extension,n=e.schema,i=[];if(l(t.propertyTables))for(let s=0;s<t.propertyTables.length;s++){let a=t.propertyTables[s],c=n.classes[a.class],d=new El({count:a.count,properties:a.properties,class:c,bufferViews:e.bufferViews});i.push(new zc({id:s,name:a.name,count:a.count,metadataTable:d,extras:a.extras,extensions:a.extensions}))}let o=[];if(l(t.propertyTextures))for(let s=0;s<t.propertyTextures.length;s++){let a=t.propertyTextures[s];o.push(new"
}