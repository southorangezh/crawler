{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 76,
    "total_chunks": 194,
    "chunk_size": 44647,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.692Z"
  },
  "content": "i=t.length-1;for(let o=n;o<i;++o){let r=t[o+1];t[o]=r,r instanceof i_&&(r.index=o)}return this._multipleDirtyPlanes=!0,t.length=i,this.planeRemoved.raiseEvent(e,n),!0};sc.prototype.removeAll=function(){let e=this._planes,t=e.length;for(let n=0;n<t;++n){let i=e[n];i instanceof i_&&(i.onChangeCallback=void 0,i.index=-1),this.planeRemoved.raiseEvent(i,n)}this._multipleDirtyPlanes=!0,this._planes=[]};var RMe=new se,GMe=new se;function Joe(e,t,n){let i=e._uint8View,o=e._planes,r=0;for(let s=t;s<n;++s){let a=o[s],c=wn.octEncodeToCartesian4(a.normal,GMe);i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=c.w;let d=se.packFloat(a.distance,RMe);i[r+4]=d.x,i[r+5]=d.y,i[r+6]=d.z,i[r+7]=d.w,r+=8}}function Qoe(e,t,n){let i=e._float32View,o=e._planes,r=0;for(let s=t;s<n;++s){let a=o[s],c=a.normal;i[r]=c.x,i[r+1]=c.y,i[r+2]=c.z,i[r+3]=a.distance,r+=4}}function tre(e,t){let n=Yt.maximumTextureSize;return t.x=Math.min(e,n),t.y=Math.ceil(e/t.x),t}var EMe=new D;sc.prototype.update=function(e){let t=this._clippingPlanesTexture,n=e.context,i=sc.useFloatTexture(n),o=i?this.length:this.length*2;if(l(t)){let s=t.width*t.height;(s<o||o<.25*s)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(this.length===0)return;if(!l(t)){let s=tre(o,EMe);s.y*=2,i?(t=new Ft({context:n,width:s.x,height:s.y,pixelFormat:at.RGBA,pixelDatatype:Qe.FLOAT,sampler:mn.NEAREST,flipY:!1}),this._float32View=new Float32Array(s.x*s.y*4)):(t=new Ft({context:n,width:s.x,height:s.y,pixelFormat:at.RGBA,pixelDatatype:Qe.UNSIGNED_BYTE,sampler:mn.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(s.x*s.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}let r=this._dirtyIndex;if(!(!this._multipleDirtyPlanes&&r===-1)){if(this._multipleDirtyPlanes)i?(Qoe(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(Joe(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let s=0,a=0;i?(a=Math.floor(r/t.width),s=Math.floor(r-a*t.width),Qoe(this,r,r+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:s,yOffset:a})):(a=Math.floor(r*2/t.width),s=Math.floor(r*2-a*t.width),Joe(this,r,r+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:s,yOffset:a}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};var XMe=new M,joe=new an(h.UNIT_X,0);sc.prototype.computeIntersectionWithBoundingVolume=function(e,t){let n=this._planes,i=n.length,o=this.modelMatrix;l(t)&&(o=M.multiply(t,o,XMe));let r=nn.INSIDE;!this.unionClippingRegions&&i>0&&(r=nn.OUTSIDE);for(let s=0;s<i;++s){let a=n[s];an.transform(a,o,joe);let c=e.intersectPlane(joe);if(c===nn.INTERSECTING)r=c;else if(this._testIntersection(c))return c}return r};sc.setOwner=function(e,t,n){e!==t[n]&&(t[n]=t[n]&&t[n].destroy(),l(e)&&(e._owner=t,t[n]=e))};sc.useFloatTexture=function(e){return e.floatingPointTexture};sc.getTextureResolution=function(e,t,n){let i=e.texture;if(l(i))return n.x=i.width,n.y=i.height,n;let o=sc.useFloatTexture(t)?e.length:e.length*2,r=tre(o,n);return r.y*=2,r};sc.prototype.isDestroyed=function(){return!1};sc.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),me(this)};var fs=sc;var chn=T(S(),1);var BX={HIGHLIGHT:0,REPLACE:1,MIX:2};BX.getColorBlend=function(e,t){if(e===BX.HIGHLIGHT)return 0;if(e===BX.REPLACE)return 1;if(e===BX.MIX)return P.clamp(t,P.EPSILON4,1)};var ac=Object.freeze(BX);var Vpn=T(S(),1);var dhn=T(S(),1),IMe={XTRANSLATE:\"xTranslate\",YTRANSLATE:\"yTranslate\",ZTRANSLATE:\"zTranslate\",XROTATE:\"xRotate\",YROTATE:\"yRotate\",ZROTATE:\"zRotate\",XSCALE:\"xScale\",YSCALE:\"yScale\",ZSCALE:\"zScale\",UNIFORMSCALE:\"uniformScale\"},cc=Object.freeze(IMe);var mhn=T(S(),1),WMe={STEP:0,LINEAR:1,CUBICSPLINE:2},Nm=Object.freeze(WMe);var _fn=T(S(),1);var nfn=T(S(),1);var Shn=T(S(),1);var yhn=T(S(),1);var nre={};function YX(e){this._count=e.count,this._properties=Oe(e.properties,!0)}YX.prototype.hasProperty=function(e){return Mn.hasProperty(e,this._properties,nre)};YX.prototype.getPropertyIds=function(e){return Mn.getPropertyIds(this._properties,nre,e)};YX.prototype.getProperty=function(e,t){let n=this._properties[t];if(l(n))return Oe(n[e],!0)};YX.prototype.setProperty=function(e,t,n){let i=this._properties[t];l(i)||(i=new Array(this._count),this._properties[t]=i),i[e]=Oe(n,!0)};var Op=YX;function lc(e){e=g(e,g.EMPTY_OBJECT),this._name=e.name,this._id=e.id,this._count=e.count,this._extras=e.extras,this._extensions=e.extensions,this._metadataTable=e.metadataTable,this._jsonMetadataTable=e.jsonMetadataTable,this._batchTableHierarchy=e.batchTableHierarchy}Object.defineProperties(lc.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},count:{get:function(){return this._count}},class:{get:function(){if(l(this._metadataTable))return this._metadataTable.class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},byteLength:{get:function(){let e=0;return l(this._metadataTable)&&(e+=this._metadataTable.byteLength),l(this._batchTableHierarchy)&&(e+=this._batchTableHierarchy.byteLength),e}}});lc.prototype.hasProperty=function(e,t){return!!(l(this._metadataTable)&&this._metadataTable.hasProperty(t)||l(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(e,t)||l(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(t))};lc.prototype.hasPropertyBySemantic=function(e,t){return l(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(t):!1};lc.prototype.propertyExists=function(e){return!!(l(this._metadataTable)&&this._metadataTable.hasProperty(e)||l(this._batchTableHierarchy)&&this._batchTableHierarchy.propertyExists(e)||l(this._jsonMetadataTable)&&this._jsonMetadataTable.hasProperty(e))};lc.prototype.propertyExistsBySemantic=function(e){return l(this._metadataTable)?this._metadataTable.hasPropertyBySemantic(e):!1};var Vz=[];lc.prototype.getPropertyIds=function(e,t){return t=l(t)?t:[],t.length=0,l(this._metadataTable)&&t.push.apply(t,this._metadataTable.getPropertyIds(Vz)),l(this._batchTableHierarchy)&&t.push.apply(t,this._batchTableHierarchy.getPropertyIds(e,Vz)),l(this._jsonMetadataTable)&&t.push.apply(t,this._jsonMetadataTable.getPropertyIds(Vz)),t};lc.prototype.getProperty=function(e,t){let n;if(l(this._metadataTable)&&(n=this._metadataTable.getProperty(e,t),l(n))||l(this._batchTableHierarchy)&&(n=this._batchTableHierarchy.getProperty(e,t),l(n))||l(this._jsonMetadataTable)&&(n=this._jsonMetadataTable.getProperty(e,t),l(n)))return n};lc.prototype.setProperty=function(e,t,n){l(this._metadataTable)&&this._metadataTable.setProperty(e,t,n)||l(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(e,t,n)||(l(this._jsonMetadataTable)||(this._jsonMetadataTable=new Op({count:this._count,properties:{}})),this._jsonMetadataTable.setProperty(e,t,n))};lc.prototype.getPropertyBySemantic=function(e,t){if(l(this._metadataTable))return this._metadataTable.getPropertyBySemantic(e,t)};lc.prototype.setPropertyBySemantic=function(e,t,n){return l(this._metadataTable)?this._metadataTable.setPropertyBySemantic(e,t,n):!1};lc.prototype.getPropertyTypedArray=function(e){if(l(this._metadataTable))return this._metadataTable.getPropertyTypedArray(e)};lc.prototype.getPropertyTypedArrayBySemantic=function(e){if(l(this._metadataTable))return this._metadataTable.getPropertyTypedArrayBySemantic(e)};lc.prototype.isClass=function(e,t){let n=this._batchTableHierarchy;return l(n)?n.isClass(e,t):!1};lc.prototype.isExactClass=function(e,t){return this.getExactClassName(e)===t};lc.prototype.getExactClassName=function(e){let t=this._batchTableHierarchy;if(l(t))return t.getClassName(e)};var zc=lc;var vhn=T(S(),1);var Ehn=T(S(),1);function OX(e){e=g(e,g.EMPTY_OBJECT);let t=e.property,n=e.classProperty,i=e.textures,o=l(t.channels)?t.channels:[0],r=t,s=Il.createModelTextureReader({textureInfo:r,channels:wMe(o),texture:i[r.index]});this._min=t.min,this._max=t.max;let a=t.offset,c=t.scale,d=n.hasValueTransform||l(a)||l(c);a=g(a,n.offset),c=g(c,n.scale),a=n.unpackVectorAndMatrixTypes(a),c=n.unpackVectorAndMatrixTypes(c),this._offset=a,this._scale=c,this._hasValueTransform=d,this._textureReader=s,this._classProperty=n,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(OX.prototype,{textureReader:{get:function(){return this._textureReader}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});OX.prototype.isGpuCompatible=function(){let e=this._classProperty,t=e.type,n=e.componentType;return e.isArray?!e.isVariableLengthArray&&e.arrayLength<=4&&t===Kt.SCALAR&&n===sn.UINT8:Kt.isVectorType(t)||t===Kt.SCALAR?n===sn.UINT8:!1};var PMe=[void 0,\"float\",\"vec2\",\"vec3\",\"vec4\"],vMe=[void 0,\"int\",\"ivec2\",\"ivec3\",\"ivec4\"];OX.prototype.getGlslType=function(){let e=this._classProperty,t=Kt.getComponentCount(e.type);return e.isArray&&(t=e.arrayLength),e.normalized?PMe[t]:vMe[t]};OX.prototype.unpackInShader=function(e){return this._classProperty.normalized?e:`${this.getGlslType()}(255.0 * ${e})`};function wMe(e){return e.map(function(t){return\"rgba\".charAt(t)}).join(\"\")}var zX=OX;function Lz(e){e=g(e,g.EMPTY_OBJECT);let t=e.propertyTexture,n=e.class,i=e.textures,o=t.extensions,r=t.extras,s={};if(l(t.properties))for(let a in t.properties)t.properties.hasOwnProperty(a)&&(s[a]=new zX({property:t.properties[a],classProperty:n.properties[a],textures:i}));this._name=e.name,this._id=e.id,this._class=n,this._properties=s,this._extras=r,this._extensions=o}Object.defineProperties(Lz.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Lz.prototype.getProperty=function(e){return this._properties[e]};var o_=Lz;var Bhn=T(S(),1);var Mhn=T(S(),1);function ire(e){e=g(e,g.EMPTY_OBJECT);let t=e.property,n=e.classProperty;this._attribute=t.attribute,this._classProperty=n,this._min=t.min,this._max=t.max;let i=t.offset,o=t.scale,r=n.hasValueTransform||l(i)||l(o);i=g(i,n.offset),o=g(o,n.scale),i=n.unpackVectorAndMatrixTypes(i),o=n.unpackVectorAndMatrixTypes(o),this._offset=i,this._scale=o,this._hasValueTransform=r,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(ire.prototype,{attribute:{get:function(){return this._attribute}},hasValueTransform:{get:function(){return this._hasValueTransform}},offset:{get:function(){return this._offset}},scale:{get:function(){return this._scale}},classProperty:{get:function(){return this._classProperty}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});var HX=ire;function Zz(e){e=g(e,g.EMPTY_OBJECT);let t=e.propertyAttribute,n=e.class,i={};if(l(t.properties))for(let o in t.properties)t.properties.hasOwnProperty(o)&&(i[o]=new HX({property:t.properties[o],classProperty:n.properties[o]}));this._name=e.name,this._id=e.id,this._class=n,this._properties=i,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(Zz.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},class:{get:function(){return this._class}},properties:{get:function(){return this._properties}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});Zz.prototype.getProperty=function(e){return this._properties[e]};var r_=Zz;var Hhn=T(S(),1);function KX(e){e=g(e,g.EMPTY_OBJECT),this._schema=e.schema;let t=e.propertyTables;this._propertyTableCount=l(t)?t.length:0,this._propertyTables=t,this._propertyTextures=e.propertyTextures,this._propertyAttributes=e.propertyAttributes,this._statistics=e.statistics,this._extras=e.extras,this._extensions=e.extensions}Object.defineProperties(KX.prototype,{schema:{get:function(){return this._schema}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}},propertyTableCount:{get:function(){return this._propertyTableCount}},propertyTables:{get:function(){return this._propertyTables}},propertyTextures:{get:function(){return this._propertyTextures}},propertyAttributes:{get:function(){return this._propertyAttributes}},propertyTablesByteLength:{get:function(){if(!l(this._propertyTables))return 0;let e=0,t=this._propertyTables.length;for(let n=0;n<t;n++)e+=this._propertyTables[n].byteLength;return e}}});KX.prototype.getPropertyTable=function(e){return this._propertyTables[e]};KX.prototype.getPropertyTexture=function(e){return this._propertyTextures[e]};KX.prototype.getPropertyAttribute=function(e){return this._propertyAttributes[e]};var Xa=KX;function FMe(e){e=g(e,g.EMPTY_OBJECT);let t=e.extension,n=e.schema,i=[];if(l(t.propertyTables))for(let s=0;s<t.propertyTables.length;s++){let a=t.propertyTables[s],c=n.classes[a.class],d=new El({count:a.count,properties:a.properties,class:c,bufferViews:e.bufferViews});i.push(new zc({id:s,name:a.name,count:a.count,metadataTable:d,extras:a.extras,extensions:a.extensions}))}let o=[];if(l(t.propertyTextures))for(let s=0;s<t.propertyTextures.length;s++){let a=t.propertyTextures[s];o.push(new o_({id:s,name:a.name,propertyTexture:a,class:n.classes[a.class],textures:e.textures}))}let r=[];if(l(t.propertyAttributes))for(let s=0;s<t.propertyAttributes.length;s++){let a=t.propertyAttributes[s];r.push(new r_({id:s,name:a.name,class:n.classes[a.class],propertyAttribute:a}))}return new Xa({schema:n,propertyTables:i,propertyTextures:o,propertyAttributes:r,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}var JX=FMe;var ufn=T(S(),1);function AMe(e){e=g(e,g.EMPTY_OBJECT);let t=e.extension,n=e.schema,i,o=[],r;if(l(t.featureTables))for(r=Object.keys(t.featureTables).sort(),i=0;i<r.length;i++){let a=r[i],c=t.featureTables[a],d=n.classes[c.class],u=new El({count:c.count,properties:c.properties,class:d,bufferViews:e.bufferViews});o.push(new zc({id:a,count:c.count,metadataTable:u,extras:c.extras,extensions:c.extensions}))}let s=[];if(l(t.featureTextures))for(r=Object.keys(t.featureTextures).sort(),i=0;i<r.length;i++){let a=r[i],c=t.featureTextures[a];s.push(new o_({id:a,propertyTexture:MMe(c),class:n.classes[c.class],textures:e.textures}))}return new Xa({schema:n,propertyTables:o,propertyTextures:s,statistics:t.statistics,extras:t.extras,extensions:t.extensions})}function MMe(e){let t={class:e.class,properties:{}},n=e.properties;for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],r={channels:NMe(o.channels),extras:o.extras,extensions:o.extensions};t.properties[i]=Ct(o.texture,r,!0)}return t}function NMe(e){let t=e.length,n=new Array(t);for(let i=0;i<t;i++)n[i]=\"rgba\".indexOf(e[i]);return n}var QX=AMe;function oy(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltf,n=e.extension,i=e.extensionLegacy,o=e.gltfResource,r=e.baseResource,s=e.supportedImageFormats,a=e.frameState,c=e.cacheKey,d=g(e.asynchronous,!0);this._gltfResource=o,this._baseResource=r,this._gltf=t,this._extension=n,this._extensionLegacy=i,this._supportedImageFormats=s,this._frameState=a,this._cacheKey=c,this._asynchronous=d,this._bufferViewLoaders=[],this._bufferViewIds=[],this._textureLoaders=[],this._textureIds=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=Xt.UNLOADED,this._promise=void 0}l(Object.create)&&(oy.prototype=Object.create(io.prototype),oy.prototype.constructor=oy);Object.defineProperties(oy.prototype,{cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}});async function kMe(e){try{let t=OMe(e),n=QMe(e),i=jMe(e);return await Promise.all([t,n,i]),e.isDestroyed()?void 0:(e._gltf=void 0,e._state=Xt.LOADED,e)}catch(t){if(e.isDestroyed())return;throw e.unload(),e._state=Xt.FAILED,e.getError(\"Failed to load structural metadata\",t)}}oy.prototype.load=function(){return l(this._promise)?this._promise:(this._state=Xt.LOADING,this._promise=kMe(this),this._promise)};function UMe(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=i.values,r=i.arrayOffsets,s=i.stringOffsets;l(o)&&(t[o]=!0),l(r)&&(t[r]=!0),l(s)&&(t[s]=!0)}}function DMe(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n],o=i.bufferView,r=i.arrayOffsetBufferView,s=i.stringOffsetBufferView;l(o)&&(t[o]=!0),l(r)&&(t[r]=!0),l(s)&&(t[s]=!0)}}function BMe(e){let t=e.propertyTables,n={};if(l(t))for(let i=0;i<t.length;i++){let o=t[i];UMe(o.properties,n)}return n}function YMe(e){let t=e.featureTables,n={};if(l(t)){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i].properties;l(r)&&DMe(r,n)}}return n}async function OMe(e){let t;l(e._extension)?t=BMe(e._extension):t=YMe(e._extensionLegacy);let n=[];for(let i in t)if(t.hasOwnProperty(i)){let o=Di.getBufferViewLoader({gltf:e._gltf,bufferViewId:parseInt(i),gltfResource:e._gltfResource,baseResource:e._baseResource});e._bufferViewLoaders.push(o),e._bufferViewIds.push(i),n.push(o.load())}return Promise.all(n)}function zMe(e){let t={},n=e.propertyTextures;if(l(n))for(let i=0;i<n.length;i++){let r=n[i].properties;l(r)&&HMe(r,t)}return t}function HMe(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t[i.index]=i}}function KMe(e){let t={},n=e.featureTextures;if(l(n)){for(let i in n)if(n.hasOwnProperty(i)){let r=n[i].properties;l(r)&&JMe(r,t)}}return t}function JMe(e,t){for(let n in e)if(e.hasOwnProperty(n)){let o=e[n].texture;t[o.index]=o}}function QMe(e){let t;l(e._extension)?t=zMe(e._extension):t=KMe(e._extensionLegacy);let n=e._gltf,i=e._gltfResource,o=e._baseResource,r=e._supportedImageFormats,s=e._frameState,a=e._asynchronous,c=[];for(let d in t)if(t.hasOwnProperty(d)){let u=Di.getTextureLoader({gltf:n,textureInfo:t[d],gltfResource:i,baseResource:o,supportedImageFormats:r,frameState:s,asynchronous:a});e._textureLoaders.push(u),e._textureIds.push(d),c.push(u.load())}return Promise.all(c)}async function jMe(e){let t=g(e._extension,e._extensionLegacy),n;if(l(t.schemaUri)){let i=e._baseResource.getDerivedResource({url:t.schemaUri});n=Di.getSchemaLoader({resource:i})}else n=Di.getSchemaLoader({schema:t.schema});if(e._schemaLoader=n,await n.load(),!n.isDestroyed())return n.schema}oy.prototype.process=function(e){if(this._state===Xt.READY)return!0;if(this._state!==Xt.LOADED)return!1;let t=this._textureLoaders,n=t.length,i=!0;for(let a=0;a<n;++a){let d=t[a].process(e);i=i&&d}if(!i)return!1;let o=this._schemaLoader.schema,r={};for(let a=0;a<this._bufferViewIds.length;++a){let c=this._bufferViewIds[a],d=this._bufferViewLoaders[a];if(!d.isDestroyed()){let u=new Uint8Array(d.typedArray);r[c]=u}}let s={};for(let a=0;a<this._textureIds.length;++a){let c=this._textureIds[a],d=t[a];d.isDestroyed()||(s[c]=d.texture)}return l(this._extension)?this._structuralMetadata=JX({extension:this._extension,schema:o,bufferViews:r,textures:s}):this._structuralMetadata=QX({extension:this._extensionLegacy,schema:o,bufferViews:r,textures:s}),ore(this),this._state=Xt.READY,!0};function ore(e){let t=e._bufferViewLoaders,n=t.length;for(let i=0;i<n;++i)Di.unload(t[i]);e._bufferViewLoaders.length=0,e._bufferViewIds.length=0}function qMe(e){let t=e._textureLoaders,n=t.length;for(let i=0;i<n;++i)Di.unload(t[i]);e._textureLoaders.length=0,e._textureIds.length=0}oy.prototype.unload=function(){ore(this),qMe(this),l(this._schemaLoader)&&Di.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0};var jX=oy;var Sfn=T(S(),1);var CC={TRANSLATION:\"TRANSLATION\",ROTATION:\"ROTATION\",SCALE:\"SCALE\",FEATURE_ID:\"_FEATURE_ID\"};CC.fromGltfSemantic=function(e){let t=e,i=/^(\\w+)_\\d+$/.exec(e);switch(i!==null&&(t=i[1]),t){case\"TRANSLATION\":return CC.TRANSLATION;case\"ROTATION\":return CC.ROTATION;case\"SCALE\":return CC.SCALE;case\"_FEATURE_ID\":return CC.FEATURE_ID}};var zr=Object.freeze(CC);var Bfn=T(S(),1);var Pfn=T(S(),1);var $Me=65534,e5e=255;function nN(e){e=g(e,g.EMPTY_OBJECT);let t=e.triangleIndices,n=e.outlineIndices,i=e.originalVertexCount;this._triangleIndices=t,this._originalVertexCount=i,this._edges=new are(n,i),this._outlineCoordinatesTypedArray=void 0,this._extraVertices=[],t5e(this)}Object.defineProperties(nN.prototype,{updatedTriangleIndices:{get:function(){return this._triangleIndices}},outlineCoordinates:{get:function(){return this._outlineCoordinatesTypedArray}}});function t5e(e){let t=e._triangleIndices,n=e._edges,i=[],o=e._extraVertices,r=e._originalVertexCount,s={};for(let a=0;a<t.length;a+=3){let c=t[a],d=t[a+1],u=t[a+2],m=!1,p=m||n.hasEdge(c,d),b=m||n.hasEdge(d,u),f=m||n.hasEdge(u,c),x=rre(i,c,d,u,p,b,f);for(;l(x);){let _=s[x];if(!l(_)){_=r+o.length;let C=x;for(;C>=r;)C=o[C-r];o.push(C),s[x]=_}_>$Me&&(t instanceof Uint16Array||t instanceof Uint8Array)?t=new Uint32Array(t):_>e5e&&t instanceof Uint8Array&&(t=new Uint16Array(t)),x===c?(c=_,t[a]=_):x===d?(d=_,t[a+1]=_):(u=_,t[a+2]=_),x=rre(i,c,d,u,p,b,f)}}e._triangleIndices=t,e._outlineCoordinatesTypedArray=new Float32Array(i)}function rre(e,t,n,i,o,r,s){let a=s?1:0,c=o?1:0,d=0,u=Rz(e,t,a,c,d);if(u===0)return t;let m=0,p=o?1:0,b=r?1:0,f=Rz(e,n,m,p,b);if(f===0)return n;let x=s?1:0,_=0,C=r?1:0,V=Rz(e,i,x,_,C);if(V===0)return i;let L=u&f&V,R,G,X;if(L&1)R=0,G=1,X=2;else if(L&2)R=0,X=1,G=2;else if(L&4)G=0,R=1,X=2;else if(L&8)G=0,X=1,R=2;else if(L&16)X=0,R=1,G=2;else if(L&32)X=0,G=1,R=2;else{let A=Gz(u),y=Gz(f),Z=Gz(V);return A<y&&A<Z?t:y<Z?n:i}let v=t*3;e[v+R]=a,e[v+G]=c,e[v+X]=d;let W=n*3;e[W+R]=m,e[W+G]=p,e[W+X]=b;let F=i*3;e[F+R]=x,e[F+G]=_,e[F+X]=C}function Rz(e,t,n,i,o){let r=t*3,s=e[r],a=e[r+1],c=e[r+2];return l(s)?(s===n&&a===i&&c===o)<<0|(s===n&&a===o&&c===i)<<1|(s===i&&a===n&&c===o)<<2|(s===i&&a===o&&c===n)<<3|(s===o&&a===n&&c===i)<<4|(s===o&&a===i&&c===n)<<5:63}function Gz(e){return(e&1)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}nN.prototype.updateAttribute=function(e){let t=this._extraVertices,n=e.length,i=n/this._originalVertexCount,o=t.length,r=e.constructor,s=new r(e.length+o*i);s.set(e);for(let a=0;a<o;a++){let c=t[a]*i,d=n+a*i;for(let u=0;u<i;u++)s[d+u]=s[c+u]}return s};nN.createTexture=function(e){let t=e.cache.modelOutliningCache;if(l(t)||(t=e.cache.modelOutliningCache={}),l(t.outlineTexture))return t.outlineTexture;let n=Math.min(4096,Yt.maximumTextureSize),i=n,o=sre(i),r=[];for(;i>1;)i>>=1,r.push(sre(i));let s=new Ft({context:e,source:{arrayBufferView:o,mipLevels:r},width:n,height:1,pixelFormat:at.LUMINANCE,sampler:new mn({wrapS:En.CLAMP_TO_EDGE,wrapT:En.CLAMP_TO_EDGE,minificationFilter:dn.LINEAR_MIPMAP_LINEAR,magnificationFilter:yi.LINEAR})});return t.outlineTexture=s,s};function sre(e){let t=new Uint8Array(e);return t[e-1]=192,e===8?t[e-1]=96:e===4?t[e-1]=48:e===2?t[e-1]=24:e===1&&(t[e-1]=12),t}function are(e,t){this._originalVertexCount=t,this._edges=new Set;for(let n=0;n<e.length;n+=2){let i=e[n],o=e[n+1],r=Math.min(i,o),s=Math.max(i,o),a=r*this._originalVertexCount+s;this._edges.add(a)}}are.prototype.hasEdge=function(e,t){let n=Math.min(e,t),i=Math.max(e,t),o=n*this._originalVertexCount+i;return this._edges.has(o)};var s_=nN;function cre(e){this.attribute=e,this.loadBuffer=!1,this.loadTypedArray=!1}function n5e(e){this.indices=e,this.loadBuffer=!1,this.loadTypedArray=!1}function iN(e){this.primitive=e,this.attributePlans=[],this.indicesPlan=void 0,this.needsOutlines=!1,this.outlineIndices=void 0}iN.prototype.postProcess=function(e){this.needsOutlines&&(i5e(this),r5e(this,e))};function i5e(e){let t=e.primitive,n=t.indices,i=t.attributes[0].count,o=new s_({triangleIndices:n.typedArray,outlineIndices:e.outlineIndices,originalVertexCount:i});n.typedArray=o.updatedTriangleIndices,n.indexDatatype=Ae.fromTypedArray(n.typedArray);let r=o5e(o.outlineCoordinates),s=new cre(r);s.loadBuffer=!0,s.loadTypedArray=!1,e.attributePlans.push(s),t.outlineCoordinates=s.attribute;let a=e.attributePlans,c=e.attributePlans.length;for(let d=0;d<c;d++){let u=a[d].attribute;u.typedArray=o.updateAttribute(u.typedArray)}}function o5e(e){let t=new Nt.Attribute;return t.name=\"_OUTLINE_COORDINATES\",t.typedArray=e,t.componentDatatype=Q.FLOAT,t.type=tn.VEC3,t.normalized=!1,t.count=e.length/3,t}function r5e(e,t){s5e(e.attributePlans,t),l(e.indicesPlan)&&a5e(e.indicesPlan,t)}function s5e(e,t){let n=e.length;for(let i=0;i<n;i++){let o=e[i],r=o.attribute,s=r.typedArray;if(o.loadBuffer){let a=pt.createVertexBuffer({typedArray:s,context:t,usage:Me.STATIC_DRAW});a.vertexArrayDestroyable=!1,r.buffer=a}o.loadTypedArray||(r.typedArray=void 0)}}function a5e(e,t){let n=e.indices;if(e.loadBuffer){let i=pt.createIndexBuffer({typedArray:n.typedArray,context:t,usage:Me.STATIC_DRAW,indexDatatype:n.indexDatatype});n.buffer=i,i.vertexArrayDestroyable=!1}e.loadTypedArray||(n.typedArray=void 0)}iN.AttributeLoadPlan=cre;iN.IndicesLoadPlan=n5e;var a_=iN;var zfn=T(S(),1);function c5e(e){e=g(e,g.EMPTY_OBJECT),this.webp=g(e.webp,!1),this.basis=g(e.basis,!1)}var qX=c5e;var l5e=Nt.Attribute,d5e=Nt.Indices,lre=Nt.FeatureIdAttribute,dre=Nt.FeatureIdTexture,ure=Nt.FeatureIdImplicitRange,u5e=Nt.MorphTarget,m5e=Nt.Primitive,h5e=Nt.Instances,f5e=Nt.Skin,p5e=Nt.Node,b5e=Nt.AnimatedPropertyType,y5e=Nt.AnimationSampler,g5e=Nt.AnimationTarget,x5e=Nt.AnimationChannel,_5e=Nt.Animation,T5e=Nt.ArticulationStage,S5e=Nt.Articulation,C5e=Nt.Asset,V5e=Nt.Scene,L5e=Nt.Components,Z5e=Nt.MetallicRoughness,R5e=Nt.SpecularGlossiness,G5e=Nt.Material,Eo={NOT_LOADED:0,LOADING:1,LOADED:2,PROCESSING:3,POST_PROCESSING:4,PROCESSED:5,READY:6,FAILED:7,UNLOADED:8};function km(e){e=g(e,g.EMPTY_OBJECT);let t=e.gltfResource,n=e.baseResource,i=e.typedArray,o=g(e.releaseGltfJson,!1),r=g(e.asynchronous,!0),s=g(e.incrementallyLoadTextures,!0),a=g(e.upAxis,Ro.Y),c=g(e.forwardAxis,Ro.Z),d=g(e.loadAttributesAsTypedArray,!1),u=g(e.loadAttributesFor2D,!1),m=g(e.enablePick),p=g(e.loadIndicesForWireframe,!1),b=g(e.loadPrimitiveOutline,!0),f=g(e.loadForClassification,!1),x=g(e.renameBatchIdSemantic,!1);n=l(n)?n:t.clone(),this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=n,this._typedArray=i,this._releaseGltfJson=o,this._asynchronous=r,this._incrementallyLoadTextures=s,this._upAxis=a,this._forwardAxis=c,this._loadAttributesAsTypedArray=d,this._loadAttributesFor2D=u,this._enablePick=m,this._loadIndicesForWireframe=p,this._loadPrimitiveOutline=b,this._loadForClassification=f,this._renameBatchIdSemantic=x,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=Eo.NOT_LOADED,this._textureState=Eo.NOT_LOADED,this._promise=void 0,this._processError=void 0,this._textureErrors=[],this._primitiveLoadPlans=[],this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._textureCallbacks=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._geometryCallbacks=[],this._structuralMetadataLoader=void 0,this._loadResourcesPromise=void 0,this._resourcesLoaded=!1,this._texturesLoaded=!1,this._postProcessBuffers=[],this._components=void 0}l(Object.create)&&(km.prototype=Object.create(io.prototype),km.prototype.constructor=km);Object.defineProperties(km.prototype,{cacheKey:{get:function(){}},components:{get:function(){return this._components}},gltfJson:{get:function(){return l(this._gltfJsonLoader)?this._gltfJsonLoader.gltf:this._gltfJson}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},texturesLoaded:{get:function(){return this._texturesLoaded}}});async function E5e(e){e._state=Eo.LOADING,e._textureState=Eo.LOADING;try{let t=Di.getGltfJsonLoader({gltfResource:e._gltfResource,baseResource:e._baseResource,typedArray:e._typedArray,gltfJson:e._gltfJson});return e._gltfJsonLoader=t,await t.load(),e.isDestroyed()||e.isUnloaded()||t.isDestroyed()?void 0:(e._state=Eo.LOADED,e._textureState=Eo.LOADED,e)}catch(t){if(e.isDestroyed())return;e._state=Eo.FAILED,e._textureState=Eo.FAILED,oN(e,t)}}async function X5e(e,t){Ut.supportsWebP.initialized||await Ut.supportsWebP.initialize();let n=new qX({webp:Ut.supportsWebP(),basis:t.context.supportsBasis}),i=e.gltfJson,o=RNe(e,i,n,t);return e._state=Eo.PROCESSING,e._textureState=Eo.PROCESSING,l(e._gltfJsonLoader)&&e._releaseGltfJson&&(Di.unload(e._gltfJsonLoader),e._gltfJsonLoader=void 0),o}km.prototype.load=async function(){return l(this._promise)?this._promise:(this._promise=E5e(this),this._promise)};function oN(e,t){throw e.unload(),e.getError(\"Failed to load glTF\",t)}function I5e(e,t){let n,i=!0,o=e._geometryLoaders,r=o.length;for(n=0;n<r;++n){let a=o[n].process(t);a&&l(e._geometryCallbacks[n])&&(e._geometryCallbacks[n](),e._geometryCallbacks[n]=void 0),i=i&&a}let s=e._structuralMetadataLoader;if(l(s)){let a=s.process(t);a&&(e._components.structuralMetadata=s.structuralMetadata),i=i&&a}i&&(e._state=Eo.POST_PROCESSING)}function W5e(e,t){let n=e._primitiveLoadPlans,i=n.length;for(let o=0;o<i;o++){let r=n[o];r.postProcess(t),r.needsOutlines&&P5e(e,r)}}function P5e(e,t){let n=e._postProcessBuffers,i=t.primitive,o=i.outlineCoordinates;l(o)&&n.push(o.buffer);let r=i.attributes,s=r.length;for(let c=0;c<s;c++){let d=r[c];l(d.buffer)&&n.push(d.buffer)}let a=i.indices;l(a)&&l(a.buffer)&&n.push(a.buffer)}km.prototype._process=function(e){return this._state===Eo.READY?!0:(this._state===Eo.PROCESSING&&I5e(this,e),this._resourcesLoaded&&this._state===Eo.POST_PROCESSING&&(W5e(this,e.context),this._state=Eo.PROCESSED),this._resourcesLoaded&&this._state===Eo.PROCESSED?(_re(this),this._typedArray=void 0,this._state=Eo.READY,!0):!1)};km.prototype._processTextures=function(e){if(this._textureState===Eo.READY)return!0;if(this._textureState!==Eo.PROCESSING)return!1;let t,n=!0,i=this._textureLoaders,o=i.length;for(t=0;t<o;++t){let r=i[t].process(e);r&&l(this._textureCallbacks[t])&&(this._textureCallbacks[t](),this._textureCallbacks[t]=void 0),n=n&&r}return n?(this._textureState=Eo.READY,this._texturesLoaded=!0,!0):!1};km.prototype.process=function(e){if(this._state===Eo.LOADED&&!l(this._loadResourcesPromise)&&(this._loadResourcesPromise=X5e(this,e).then(()=>{this._resourcesLoaded=!0}).catch(o=>{this._processError=o})),l(this._processError)){this._state=Eo.FAILED;let o=this._processError;this._processError=void 0,oN(this,o)}let t=this._textureErrors.pop();if(l(t)){let o=this.getError(\"Failed to load glTF texture\",t);throw o.name=\"TextureError\",o}if(this._state===Eo.FAILED)return!1;let n=!1;try{n=this._process(e)}catch(o){this._state=Eo.FAILED,oN(this,o)}let i=!1;try{i=this._processTextures(e)}catch(o){this._textureState=Eo.FAILED,oN(this,o)}return this._incrementallyLoadTextures?n:n&&i};function v5e(e,t,n,i,o,r,s,a){let d=t.accessors[n].bufferView;return Di.getVertexBufferLoader({gltf:t,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:a,bufferViewId:d,draco:o,attributeSemantic:i,accessorId:n,asynchronous:e._asynchronous,loadBuffer:r,loadTypedArray:s})}function w5e(e,t,n,i,o,r,s){return Di.getIndexBufferLoader({gltf:t,accessorId:n,gltfResource:e._gltfResource,baseResource:e._baseResource,frameState:s,draco:i,asynchronous:e._asynchronous,loadBuffer:o,loadTypedArray:r})}function F5e(e,t,n){let i=Di.getBufferViewLoader({gltf:t,bufferViewId:n,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(i),i}function mre(e,t,n){let i=t.byteOffset,o=Xl(e,t),r=t.count,s=pd(t.type),a=t.componentType,c=Q.getSizeInBytes(a),d=c*s,u=r*s;if(o===d)return n=new Uint8Array(n),Q.createArrayBufferView(a,n.buffer,n.byteOffset+i,u);let m=Q.createTypedArray(a,u),p=new DataView(n.buffer),b=new Array(s),f=Yp(t.componentType);i=n.byteOffset+i;for(let x=0;x<r;++x){f(p,i,s,c,b);for(let _=0;_<s;++_)m[x*s+_]=b[_];i+=o}return m}function A5e(e,t){let n=e.type;if(n===tn.SCALAR)return t.fill(0);let i=tn.getMathType(n);return t.fill(i.clone(i.ZERO))}function M5e(e,t,n,i){let o=e.type,r=e.count;if(o===tn.SCALAR)for(let s=0;s<r;s++)n[s]=t[s];else if(o===tn.VEC4&&i)for(let s=0;s<r;s++)n[s]=Fe.unpack(t,s*4);else{let s=tn.getMathType(o),a=tn.getNumberOfComponents(o);for(let c=0;c<r;c++)n[c]=s.unpack(t,c*a)}return n}async function N5e(e,t,n,i,o,r){if(await t.load(),e.isDestroyed())return;let s=t.typedArray,a=mre(n,i,s);o=g(o,!1),M5e(i,a,r,o)}function rN(e,t,n,i){let o=t.accessors[n],r=o.count,s=new Array(r),a=o.bufferView;if(l(a)){let c=F5e(e,t,a),d=N5e(e,c,t,o,i,s);return e._loaderPromises.push(d),s}return A5e(o,s)}function yu(e,t){if(l(t))return e===Number?t[0]:e.unpack(t)}function k5e(e){return e===Number?0:new e}function U5e(e){switch(e){case Q.BYTE:return 127;case Q.UNSIGNED_BYTE:return 255;case Q.SHORT:return 32767;case Q.UNSIGNED_SHORT:return 65535;default:return 1}}var D5e={VEC2:new D(-1,-1),VEC3:new h(-1,-1,-1),VEC4:new se(-1,-1,-1,-1)};function B5e(e,t){let n=U5e(e.componentDatatype),i=D5e[e.type],o=e.min;l(o)&&(o=t.divideByScalar(o,n,o),o=t.maximumByComponent(o,i,o));let r=e.max;l(r)&&(r=t.divideByScalar(r,n,r),r=t.maximumByComponent(r,i,r)),e.min=o,e.max=r}function Y5e(e,t,n){let i=e.decodeMatrix,o=yu(n,e.decodedMin),r=yu(n,e.decodedMax);l(o)&&l(r)&&(t.min=o,t.max=r);let s=new Nt.Quantization;s.componentDatatype=t.componentDatatype,s.type=t.type,i.length===4?(s.quantizedVolumeOffset=i[2],s.quantizedVolumeStepSize=i[0]):i.length===9?(s.quantizedVolumeOffset=new D(i[6],i[7]),s.quantizedVolumeStepSize=new D(i[0],i[4])):i.length===16?(s.quantizedVolumeOffset=new h(i[12],i[13],i[14]),s.quantizedVolumeStepSize=new h(i[0],i[5],i[10])):i.length===25&&(s.quantizedVolumeOffset=new se(i[20],i[21],i[22],i[23]),s.quantizedVolumeStepSize=new se(i[0],i[6],i[12],i[18])),t.quantization=s}function O5e(e,t,n,i,o){let r=e.accessors[t],s=tn.getMathType(r.type),a=g(r.normalized,!1),c=new l5e;c.name=n,c.semantic=i,c.setIndex=o,c.constant=k5e(s),c.componentDatatype=r.componentType,c.normalized=a,c.count=r.count,c.type=r.type,c.min=yu(s,r.min),c.max=yu(s,r.max),c.byteOffset=r.byteOffset,c.byteStride=Xl(e,r),oi(r,\"WEB3D_quantized_attributes\")&&Y5e(r.extensions.WEB3D_quantized_attributes,c,s);let d=c.semantic===St.POSITION||c.semantic===St.NORMAL||c.semantic===St.TANGENT||c.semantic===St.TEXCOORD;return e.extensionsRequired?.includes(\"KHR_mesh_quantization\")&&a&&d&&B5e(c,s),c}function hre(e){let n=/^\\w+_(\\d+)$/.exec(e);if(n!==null)return parseInt(n[1])}var z5e={gltfSemantic:void 0,renamedSemantic:void 0,modelSemantic:void 0};function Ez(e,t,n){let i=n;e._renameBatchIdSemantic&&(n===\"_BATCHID\"||n===\"BATCHID\")&&(i=\"_FEATURE_ID_0\");let o=t.fromGltfSemantic(i),r=z5e;return r.gltfSemantic=n,r.renamedSemantic=i,r.modelSemantic=o,r}function H5e(e){let t=e===St.POSITION,n=e===St.FEATURE_ID,i=e===St.TEXCOORD;return t||n||i}function K5e(e,t,n,i){if(e.byteOffset=0,e.byteStride=void 0,e.quantization=t.quantization,n&&(e.buffer=t.buffer),i){let o=l(t.quantization)?t.quantization.componentDatatype:e.componentDatatype;e.typedArray=Q.createArrayBufferView(o,t.typedArray.buffer)}}function J5e(e,t,n,i,o,r){if(o&&(n.buffer=i.buffer),r){let s=i.typedArray;n.typedArray=mre(e,t,s),o||(n.byteOffset=0,n.byteStride=void 0)}}function fre(e,t,n,i,o,r,s,a){let c=t.accessors[n],d=c.bufferView,u=i.gltfSemantic,m=i.renamedSemantic,p=i.modelSemantic,b=l(p)?hre(m):void 0,x=O5e(t,n,u,p,b);if(!l(o)&&!l(d))return x;let _=v5e(e,t,n,u,o,r,s,a),C=e._geometryLoaders.length;e._geometryLoaders.push(_);let V=_.load();return e._loaderPromises.push(V),e._geometryCallbacks[C]=()=>{l(o)&&l(o.attributes)&&l(o.attributes[u])?K5e(x,_,r,s):J5e(t,c,x,_,r,s)},x}function pre(e,t,n,i,o,r,s,a){let c=i.modelSemantic,d=c===St.POSITION,u=c===St.FEATURE_ID,m=d&&!r&&e._loadAttributesFor2D&&!a.scene3DOnly,p=d&&e._enablePick&&!a.context.webgl2,b=e._loadForClassification&&u,f=e._loadAttributesAsTypedArray,x=!f,_=f||m||p||b,L=fre(e,t,n,i,o,s?!1:x,s?!0:_,a),R=new a_.AttributeLoadPlan(L);return R.loadBuffer=x,R.loadTypedArray=_,R}function Q5e(e,t,n,i,o,r){let s=l(i.ROTATION),a=l(i.TRANSLATION)&&l(t.accessors[i.TRANSLATION].min)&&l(t.accessors[i.TRANSLATION].max),c=Ez(e,zr,o),d=c.modelSemantic,u=d===zr.TRANSLATION||d===zr.ROTATION||d===zr.SCALE,m=d===zr.TRANSLATION,p=e._loadAttributesAsTypedArray||s&&u||!r.context.instancedArrays,b=e._enablePick&&!r.context.webgl2,f=!p,x=e._loadAttributesFor2D&&!r.scene3DOnly;return fre(e,t,n,c,void 0,f,p||m&&(!a||x||b),r)}function j5e(e,t,n,i,o,r,s){let a=t.accessors[n],c=a.bufferView;if(!l(i)&&!l(c))return;let d=new d5e;d.count=a.count;let u=e._loadAttributesAsTypedArray,m=(e._loadIndicesForWireframe||e._enablePick)&&!s.context.webgl2,p=e._loadForClassification&&o,f=!u,x=u||m||p,V=w5e(e,t,n,i,r?!1:f,r?!0:x,s),L=e._geometryLoaders.length;e._geometryLoaders.push(V);let R=V.load();e._loaderPromises.push(R),e._geometryCallbacks[L]=()=>{d.indexDatatype=V.indexDatatype,d.buffer=V.buffer,d.typedArray=V.typedArray};let G=new a_.IndicesLoadPlan(d);return G.loadBuffer=f,G.loadTypedArray=x,G}function zp(e,t,n,i,o,r){let s=Il.getImageIdFromTexture({gltf:t,textureId:n.index,supportedImageFormats:i});if(!l(s))return;let a=Di.getTextureLoader({gltf:t,textureInfo:n,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:i,frameState:o,asynchronous:e._asynchronous}),c=Il.createModelTextureReader({textureInfo:n}),d=e._textureLoaders.length;e._textureLoaders.push(a);let u=a.load().catch(m=>{if(!e.isDestroyed()){if(!e._incrementallyLoadTextures)throw m;e._textureState=Eo.FAILED,e._textureErrors.push(m)}});return e._texturesPromises.push(u),e._textureCallbacks[d]=()=>{c.texture=a.texture,l(r)&&(c.texture.sampler=r)},c}function q5e(e,t,n,i,o){let r=new G5e,s=g(n.extensions,g.EMPTY_OBJECT),a=s.KHR_materials_pbrSpecularGlossiness,c=n.pbrMetallicRoughness;if(r.unlit=l(s.KHR_materials_unlit),l(a)){let d=new R5e;r.specularGlossiness=d,l(a.diffuseTexture)&&(d.diffuseTexture=zp(e,t,a.diffuseTexture,i,o)),l(a.specularGlossinessTexture)&&l(a.specularGlossinessTexture)&&(d.specularGlossinessTexture=zp(e,t,a.specularGlossinessTexture,i,o)),d.diffuseFactor=yu(se,a.diffuseFactor),d.specularFactor=yu(h,a.specularFactor),d.glossinessFactor=a.glossinessFactor,r.pbrSpecularGlossiness=a}else if(l(c)){let d=new Z5e;l(c.baseColorTexture)&&(d.baseColorTexture=zp(e,t,c.baseColorTexture,i,o)),l(c.metallicRoughnessTexture)&&(d.metallicRoughnessTexture=zp(e,t,c.metallicRoughnessTexture,i,o)),d.baseColorFactor=yu(se,c.baseColorFactor),d.metallicFactor=c.metallicFactor,d.roughnessFactor=c.roughnessFactor,r.metallicRoughness=d}return l(n.emissiveTexture)&&(r.emissiveTexture=zp(e,t,n.emissiveTexture,i,o)),l(n.normalTexture)&&!e._loadForClassification&&(r.normalTexture=zp(e,t,n.normalTexture,i,o)),l(n.occlusionTexture)&&(r.occlusionTexture=zp(e,t,n.occlusionTexture,i,o)),r.emissiveFactor=yu(h,n.emissiveFactor),r.alphaMode=n.alphaMode,r.alphaCutoff=n.alphaCutoff,r.doubleSided=n.doubleSided,r}function bre(e,t){let n=new lre;return n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.propertyTableId=e.propertyTable,n.setIndex=e.attribute,n.label=e.label,n.positionalLabel=t,n}function yre(e,t,n,i){let o=new lre,r=e.featureIds;return o.featureCount=n,o.propertyTableId=t,o.setIndex=hre(r.attribute),o.positionalLabel=i,o}function gre(e,t){let n=new ure;return n.propertyTableId=e.propertyTable,n.featureCount=e.featureCount,n.nullFeatureId=e.nullFeatureId,n.label=e.label,n.positionalLabel=t,n.offset=0,n.repeat=1,n}function xre(e,t,n,i){let o=new ure,r=e.featureIds;o.propertyTableId=t,o.featureCount=n,o.offset=g(r.constant,0);let s=g(r.divisor,0);return o.repeat=s===0?void 0:s,o.positionalLabel=i,o}function $5e(e,t,n,i,o,r){let s=new dre;s.featureCount=n.featureCount,s.nullFeatureId=n.nullFeatureId,s.propertyTableId=n.propertyTable,s.label=n.label,s.positionalLabel=r;let a=n.texture;s.textureReader=zp(e,t,a,i,o,mn.NEAREST);let d=(l(a.channels)?a.channels:[0]).map(function(u){return\"rgba\".charAt(u)}).join(\"\");return s.textureReader.channels=d,s}function eNe(e,t,n,i,o,r,s,a){let c=new dre,d=n.featureIds,u=d.texture;return c.featureCount=s,c.propertyTableId=i,c.textureReader=zp(e,t,u,o,r,mn.NEAREST),c.textureReader.channels=d.channels,c.positionalLabel=a,c}function tNe(e,t,n,i,o,r){let s=new u5e,a=void 0,c=!1;for(let d in n)if(n.hasOwnProperty(d)){let u=n[d],m=Ez(e,St,d),p=pre(e,t,u,m,a,c,i,r);s.attributes.push(p.attribute),o.attributePlans.push(p)}return s}function nNe(e,t,n,i,o,r){let s=new m5e,a=new a_(s);e._primitiveLoadPlans.push(a);let c=n.material;l(c)&&(s.material=q5e(e,t,t.materials[c],o,r));let d=g(n.extensions,g.EMPTY_OBJECT),u=!1,m=d.CESIUM_primitive_outline;e._loadPrimitiveOutline&&l(m)&&(u=!0,a.needsOutlines=!0,a.outlineIndices=iNe(e,t,m,a));let p=e._loadForClassification,b=d.KHR_draco_mesh_compression,f=!1,x=n.attributes;if(l(x)){for(let v in x)if(x.hasOwnProperty(v)){let W=x[v],F=Ez(e,St,v),A=F.modelSemantic;if(p&&!H5e(A))continue;A===St.FEATURE_ID&&(f=!0);let y=pre(e,t,W,F,b,i,u,r);a.attributePlans.push(y),s.attributes.push(y.attribute)}}let _=n.targets;if(l(_)&&!p){let v=_.length;for(let W=0;W<v;++W)s.morphTargets.push(tNe(e,t,_[W],u,a,r))}let C=n.indices;if(l(C)){let v=j5e(e,t,C,b,f,u,r);l(v)&&(a.indicesPlan=v,s.indices=v.indices)}let V=d.EXT_structural_metadata,L=d.EXT_mesh_features,R=d.EXT_feature_metadata,G=l(R);l(L)?oNe(e,t,s,L,o,r):G&&rNe(e,t,s,R,o,r),l(V)?sNe(s,V):G&&aNe(e,s,R);let X=n.mode;if(p&&X!==we.TRIANGLES)throw new ue(\"Only triangle meshes can be used for classification.\");return s.primitiveType=X,s}function iNe(e,t,n){let i=n.indices;return rN(e,t,i,!1)}function oNe(e,t,n,i,o,r){let s;l(i)&&l(i.featureIds)?s=i.featureIds:s=[];for(let a=0;a<s.length;a++){let c=s[a],d=`featureId_${a}`,u;l(c.texture)?u=$5e(e,t,c,o,r,d):l(c.attribute)?u=bre(c,d):u=gre(c,d),n.featureIds.push(u)}}function rNe(e,t,n,i,o,r){let s=t.extensions.EXT_feature_metadata.featureTables,a=0,c=i.featureIdAttributes;if(l(c)){let u=c.length;for(let m=0;m<u;++m){let p=c[m],b=p.featureTable,f=e._sortedPropertyTableIds.indexOf(b),x=s[b].count,_=`featureId_${a}`;a++;let C;l(p.featureIds.attribute)?C=yre(p,f,x,_):C=xre(p,f,x,_),n.featureIds.push(C)}}let d=i.featureIdTextures;if(l(d)){let u=d.length;for(let m=0;m<u;++m){let p=d[m],b=p.featureTable,f=e._sortedPropertyTableIds.indexOf(b),x=s[b].count,_=`featureId_${a}`;a++;let C=eNe(e,t,p,f,o,r,x,_);n.featureIds.push(C)}}}function sNe(e,t){l(t)&&(l(t.propertyTextures)&&(e.propertyTextureIds=t.propertyTextures),l(t.propertyAttributes)&&(e.propertyAttributeIds=t.propertyAttributes))}function aNe(e,t,n){l(n.featureTextures)&&(t.propertyTextureIds=n.featureTextures.map(function(i){return e._sortedFeatureTextureIds.indexOf(i)}))}function cNe(e,t,n,i){let o=n.EXT_mesh_gpu_instancing,r=new h5e,s=o.attributes;if(l(s)){for(let u in s)if(s.hasOwnProperty(u)){let m=s[u];r.attributes.push(Q5e(e,t,m,s,u,i))}}let a=g(o.extensions,g.EMPTY_OBJECT),c=n.EXT_instance_features,d=a.EXT_feature_metadata;return l(c)?lNe(r,c):l(d)&&dNe(t,r,d,e._sortedPropertyTableIds),r}function lNe(e,t){let n=t.featureIds;for(let i=0;i<n.length;i++){let o=n[i],r=`instanceFeatureId_${i}`,s;l(o.attribute)?s=bre(o,r):s=gre(o,r),e.featureIds.push(s)}}function dNe(e,t,n,i){let o=e.extensions.EXT_feature_metadata.featureTables,r=n.featureIdAttributes;if(l(r)){let s=r.length;for(let a=0;a<s;++a){let c=r[a],d=c.featureTable,u=i.indexOf(d),m=o[d].count,p=`instanceFeatureId_${a}`,b;l(c.featureIds.attribute)?b=yre(c,u,m,p):b=xre(c,u,m,p),t.featureIds.push(b)}}}function uNe(e,t,n,i,o){let r=new p5e;r.name=n.name,r.matrix=yu(M,n.matrix),r.translation=yu(h,n.translation),r.rotation=yu(Fe,n.rotation),r.scale=yu(h,n.scale);let s=g(n.extensions,g.EMPTY_OBJECT),a=s.EXT_mesh_gpu_instancing,c=s.AGI_articulations;if(l(a)){if(e._loadForClassification)throw new ue(\"Models with the EXT_mesh_gpu_instancing extension cannot be used for classification.\");r.instances=cNe(e,t,s,o)}l(c)&&(r.articulationName=c.articulationName);let d=n.mesh;if(l(d)){let u=t.meshes[d],m=u.primitives,p=m.length;for(let _=0;_<p;++_)r.primitives.push(nNe(e,t,m[_],l(r.instances),i,o));let b=g(n.weights,u.weights),x=r.primitives[0].morphTargets.length;r.morphWeights=l(b)?b.slice():new Array(x).fill(0)}return r}function mNe(e,t,n,i){if(!l(t.nodes))return[];let o,r,s=t.nodes.length,a=new Array(s);for(o=0;o<s;++o){let c=uNe(e,t,t.nodes[o],n,i);c.index=o,a[o]=c}for(o=0;o<s;++o){let c=t.nodes[o].children;if(l(c)){let d=c.length;for(r=0;r<d;++r)a[o].children.push(a[c[r]])}}return a}function hNe(e,t,n,i){let o=new f5e,r=n.joints,s=r.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=i[r[d]];o.joints=a;let c=n.inverseBindMatrices;return l(c)?o.inverseBindMatrices=rN(e,t,c):o.inverseBindMatrices=new Array(s).fill(M.IDENTITY),o}function fNe(e,t,n){let i=t.skins;if(e._loadForClassification||!l(i))return[];let"
}