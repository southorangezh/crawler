{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 100,
    "total_chunks": 194,
    "chunk_size": 42453,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.705Z"
  },
  "content": "1 is supported. Version ${r} is not.`);n+=Km;let s=o.getUint32(n,!0);if(n+=Km,s===0){e._ready=!0;return}let a=o.getUint32(n,!0);if(n+=Km,a===0)throw new ue(\"Feature table must have a byte length greater than zero\");let c=o.getUint32(n,!0);n+=Km;let d=o.getUint32(n,!0);n+=Km;let u=o.getUint32(n,!0);n+=Km;let m=o.getUint32(n,!0);n+=Km;let p=o.getUint32(n,!0);n+=Km;let b=o.getUint32(n,!0);n+=Km;let f=o.getUint32(n,!0);n+=Km;let x=Go(i,n,a);n+=a;let _=new Uint8Array(t,n,c);n+=c;let C,V;d>0&&(C=Go(i,n,d),n+=d,u>0&&(V=new Uint8Array(t,n,u),V=new Uint8Array(V),n+=u));let L=g(x.POLYGONS_LENGTH,0),R=g(x.POLYLINES_LENGTH,0),G=g(x.POINTS_LENGTH,0),X=L+R+G,v=new wp(e,X,C,V,Mze(e));if(e._batchTable=v,X===0)return;let W=new Um(x,_),F=W.getGlobalProperty(\"REGION\");if(!l(F))throw new ue(\"Feature table global property: REGION must be defined\");let A=le.unpack(F),y=F[4],Z=F[5],E=e._tile.computedTransform,I=W.getGlobalProperty(\"RTC_CENTER\",Q.FLOAT,3);l(I)?(I=h.unpack(I),M.multiplyByPoint(E,I,I)):(I=le.center(A),I.height=P.lerp(y,Z,.5),I=oe.WGS84.cartographicToCartesian(I));let w=Nze(x,_);if(n+=(4-n%4)%4,L>0){W.featuresLength=L;let k=g(W.getPropertyArray(\"POLYGON_COUNTS\",Q.UNSIGNED_INT,1),W.getPropertyArray(\"POLYGON_COUNT\",Q.UNSIGNED_INT,1));if(!l(k))throw new ue(\"Feature table property: POLYGON_COUNTS must be defined when POLYGONS_LENGTH is greater than 0\");let B=g(W.getPropertyArray(\"POLYGON_INDEX_COUNTS\",Q.UNSIGNED_INT,1),W.getPropertyArray(\"POLYGON_INDEX_COUNT\",Q.UNSIGNED_INT,1));if(!l(B))throw new ue(\"Feature table property: POLYGON_INDEX_COUNTS must be defined when POLYGONS_LENGTH is greater than 0\");let U=k.reduce(function(H,j){return H+j*2},0),Y=B.reduce(function(H,j){return H+j},0),N=new Uint32Array(t,n,Y);n+=m;let J=new Uint16Array(t,n,U);n+=p;let z,ee;l(x.POLYGON_MINIMUM_HEIGHTS)&&l(x.POLYGON_MAXIMUM_HEIGHTS)&&(z=W.getPropertyArray(\"POLYGON_MINIMUM_HEIGHTS\",Q.FLOAT,1),ee=W.getPropertyArray(\"POLYGON_MAXIMUM_HEIGHTS\",Q.FLOAT,1)),e._polygons=new r2({positions:J,counts:k,indexCounts:B,indices:N,minimumHeight:y,maximumHeight:Z,polygonMinimumHeights:z,polygonMaximumHeights:ee,center:I,rectangle:A,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:v,batchIds:w.polygons,modelMatrix:E})}if(R>0){W.featuresLength=R;let k=g(W.getPropertyArray(\"POLYLINE_COUNTS\",Q.UNSIGNED_INT,1),W.getPropertyArray(\"POLYLINE_COUNT\",Q.UNSIGNED_INT,1));if(!l(k))throw new ue(\"Feature table property: POLYLINE_COUNTS must be defined when POLYLINES_LENGTH is greater than 0\");let B=W.getPropertyArray(\"POLYLINE_WIDTHS\",Q.UNSIGNED_SHORT,1);if(!l(B)){B=new Uint16Array(R);for(let ee=0;ee<R;++ee)B[ee]=2}let U=k.reduce(function(ee,H){return ee+H*3},0),Y=new Uint16Array(t,n,U);n+=b;let N=e._tileset,J=N.examineVectorLinesFunction;if(l(J)){let ee=m2(new Uint16Array(Y),A,y,Z,oe.WGS84);Bze(ee,k,w.polylines,v,e.url,J)}let z=kze;l(N.classificationType)&&(z=Uze),e._polylines=z({positions:Y,widths:B,counts:k,batchIds:w.polylines,minimumHeight:y,maximumHeight:Z,center:I,rectangle:A,boundingVolume:e.tile.boundingVolume.boundingVolume,batchTable:v,classificationType:N.classificationType,keepDecodedPositions:N.vectorKeepDecodedPositions})}if(G>0){let k=new Uint16Array(t,n,G*3);n+=f,e._points=new o2({positions:k,batchIds:w.points,minimumHeight:y,maximumHeight:Z,rectangle:A,batchTable:v})}}function CH(e){let t=e.featuresLength;if(!l(e._features)&&t>0){let n=new Array(t);l(e._polygons)&&e._polygons.createFeatures(e,n),l(e._polylines)&&e._polylines.createFeatures(e,n),l(e._points)&&e._points.createFeatures(e,n),e._features=n}}Jm.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)};Jm.prototype.getFeature=function(e){return l(this._features)||CH(this),this._features[e]};Jm.prototype.applyDebugSettings=function(e,t){l(this._polygons)&&this._polygons.applyDebugSettings(e,t),l(this._polylines)&&this._polylines.applyDebugSettings(e,t),l(this._points)&&this._points.applyDebugSettings(e,t)};Jm.prototype.applyStyle=function(e){l(this._features)||CH(this),l(this._polygons)&&this._polygons.applyStyle(e,this._features),l(this._polylines)&&this._polylines.applyStyle(e,this._features),l(this._points)&&this._points.applyStyle(e,this._features)};Jm.prototype.update=function(e,t){let n=!0;l(this._polygons)&&(this._polygons.classificationType=this._tileset.classificationType,this._polygons.debugWireframe=this._tileset.debugWireframe,this._polygons.update(t),n=n&&this._polygons.ready),l(this._polylines)&&(this._polylines.update(t),n=n&&this._polylines.ready),l(this._points)&&(this._points.update(t),n=n&&this._points.ready),l(this._batchTable)&&n&&(l(this._features)||CH(this),this._batchTable.update(e,t),this._ready=!0)};Jm.prototype.pick=function(e,t,n){};Jm.prototype.getPolylinePositions=function(e){let t=this._polylines;if(l(t))return t.getPositions(e)};Jm.prototype.isDestroyed=function(){return!1};Jm.prototype.destroy=function(){return this._polygons=this._polygons&&this._polygons.destroy(),this._polylines=this._polylines&&this._polylines.destroy(),this._points=this._points&&this._points.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),me(this)};function Bze(e,t,n,i,o,r){let s=t.length,a=0;for(let c=0;c<s;c++){let d=t[c]*3,u=e.slice(a,a+d);a+=d,r(u,n[c],o,i)}}var h2=Jm;var _ce={b3dm:function(e,t,n,i,o){return df.fromB3dm(e,t,n,i,o)},pnts:function(e,t,n,i,o){return df.fromPnts(e,t,n,i,o)},i3dm:function(e,t,n,i,o){return df.fromI3dm(e,t,n,i,o)},cmpt:function(e,t,n,i,o){return gX.fromTileType(e,t,n,i,o,_ce)},externalTileset:function(e,t,n,i){return OW.fromJson(e,t,n,i)},geom:function(e,t,n,i,o){return new _X(e,t,n,i,o)},vctr:function(e,t,n,i,o){return new h2(e,t,n,i,o)},subt:function(e,t,n,i,o){return TC.fromSubtreeJson(e,t,n,void 0,i,o)},subtreeJson:function(e,t,n,i){return TC.fromSubtreeJson(e,t,n,i)},glb:function(e,t,n,i,o){if(i.byteLength<12)throw new ue(\"Invalid glb content\");let a=new DataView(i,o).getUint32(8,!0),c=new Uint8Array(i,o,a);return df.fromGltf(e,t,n,c)},gltf:function(e,t,n,i){return df.fromGltf(e,t,n,i)},geoJson:function(e,t,n,i){return df.fromGeoJson(e,t,n,i)}},g_=_ce;var Kvn=T(S(),1),Yze={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},Fo=Object.freeze(Yze);var Qvn=T(S(),1),Qm={BATCHED_3D_MODEL:\"b3dm\",INSTANCED_3D_MODEL:\"i3dm\",COMPOSITE:\"cmpt\",POINT_CLOUD:\"pnts\",VECTOR:\"vctr\",GEOMETRY:\"geom\",GLTF:\"gltf\",GLTF_BINARY:\"glb\",IMPLICIT_SUBTREE:\"subt\",IMPLICIT_SUBTREE_JSON:\"subtreeJson\",EXTERNAL_TILESET:\"externalTileset\",MULTIPLE_CONTENT:\"multipleContent\",GEOJSON:\"geoJson\",VOXEL_BINARY:\"voxl\",VOXEL_JSON:\"voxelJson\"};Qm.isBinaryFormat=function(e){switch(e){case Qm.BATCHED_3D_MODEL:case Qm.INSTANCED_3D_MODEL:case Qm.COMPOSITE:case Qm.POINT_CLOUD:case Qm.VECTOR:case Qm.GEOMETRY:case Qm.IMPLICIT_SUBTREE:case Qm.VOXEL_BINARY:case Qm.GLTF_BINARY:return!0;default:return!1}};var gs=Object.freeze(Qm);var qvn=T(S(),1),Oze={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0},Ru=Object.freeze(Oze);var ewn=T(S(),1),Ns={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},l0=new Array(Ns.NUMBER_OF_PASSES);l0[Ns.RENDER]=Object.freeze({pass:Ns.RENDER,isRender:!0,requestTiles:!0,ignoreCommands:!1});l0[Ns.PICK]=Object.freeze({pass:Ns.PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});l0[Ns.SHADOW]=Object.freeze({pass:Ns.SHADOW,isRender:!1,requestTiles:!0,ignoreCommands:!1});l0[Ns.PRELOAD]=Object.freeze({pass:Ns.PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.PRELOAD_FLIGHT]=Object.freeze({pass:Ns.PRELOAD_FLIGHT,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({pass:Ns.REQUEST_RENDER_MODE_DEFER_CHECK,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.MOST_DETAILED_PRELOAD]=Object.freeze({pass:Ns.MOST_DETAILED_PRELOAD,isRender:!1,requestTiles:!0,ignoreCommands:!0});l0[Ns.MOST_DETAILED_PICK]=Object.freeze({pass:Ns.MOST_DETAILED_PICK,isRender:!1,requestTiles:!1,ignoreCommands:!1});Ns.getPassOptions=function(e){return l0[e]};var Io=Object.freeze(Ns);var iwn=T(S(),1);function pf(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(pf.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},ready:{get:function(){return!0}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){}}});pf.prototype.hasProperty=function(e,t){return!1};pf.prototype.getFeature=function(e){};pf.prototype.applyDebugSettings=function(e,t){};pf.prototype.applyStyle=function(e){};pf.prototype.update=function(e,t){};pf.prototype.pick=function(e,t,n){};pf.prototype.isDestroyed=function(){return!1};pf.prototype.destroy=function(){return me(this)};var KC=pf;var fwn=T(S(),1);var awn=T(S(),1);function d0(e){e=g(e,g.EMPTY_OBJECT);let t=e.content,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(d0.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});d0.prototype.hasProperty=function(e){return Mn.hasProperty(e,this._properties,this._class)};d0.prototype.hasPropertyBySemantic=function(e){return Mn.hasPropertyBySemantic(e,this._properties,this._class)};d0.prototype.getPropertyIds=function(e){return Mn.getPropertyIds(this._properties,this._class,e)};d0.prototype.getProperty=function(e){return Mn.getProperty(e,this._properties,this._class)};d0.prototype.setProperty=function(e,t){return Mn.setProperty(e,t,this._properties,this._class)};d0.prototype.getPropertyBySemantic=function(e){return Mn.getPropertyBySemantic(e,this._properties,this._class)};d0.prototype.setPropertyBySemantic=function(e,t){return Mn.setPropertyBySemantic(e,t,this._properties,this._class)};var f2=d0;function VH(e,t){let n=oi(t,\"3DTILES_metadata\")?t.extensions[\"3DTILES_metadata\"]:t.metadata;if(!l(n))return;if(!l(e.schema)){VH._oneTimeWarning(\"findContentMetadata-missing-root-schema\",\"Could not find a metadata schema for content metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.\");return}let i=g(e.schema.classes,g.EMPTY_OBJECT);if(l(n.class)){let o=i[n.class];return new f2({content:n,class:o})}}VH._oneTimeWarning=wt;var x_=VH;var gwn=T(S(),1);function zze(e,t){let n=e.metadataExtension;if(!l(n))return;let i=n.groups,o=oi(t,\"3DTILES_metadata\")?t.extensions[\"3DTILES_metadata\"].group:t.group;if(typeof o==\"number\")return i[o];let r=n.groupIds.findIndex(function(s){return s===o});return r>=0?i[r]:void 0}var __=zze;var Ewn=T(S(),1);var Swn=T(S(),1);function u0(e){e=g(e,g.EMPTY_OBJECT);let t=e.tile,n=e.class;this._class=n,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(u0.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});u0.prototype.hasProperty=function(e){return Mn.hasProperty(e,this._properties,this._class)};u0.prototype.hasPropertyBySemantic=function(e){return Mn.hasPropertyBySemantic(e,this._properties,this._class)};u0.prototype.getPropertyIds=function(e){return Mn.getPropertyIds(this._properties,this._class,e)};u0.prototype.getProperty=function(e){return Mn.getProperty(e,this._properties,this._class)};u0.prototype.setProperty=function(e,t){return Mn.setProperty(e,t,this._properties,this._class)};u0.prototype.getPropertyBySemantic=function(e){return Mn.getPropertyBySemantic(e,this._properties,this._class)};u0.prototype.setPropertyBySemantic=function(e,t){return Mn.setPropertyBySemantic(e,t,this._properties,this._class)};var p2=u0;function LH(e,t){let n=oi(t,\"3DTILES_metadata\")?t.extensions[\"3DTILES_metadata\"]:t.metadata;if(!l(n))return;if(!l(e.schema)){LH._oneTimeWarning(\"findTileMetadata-missing-root-schema\",\"Could not find a metadata schema for tile metadata. For tilesets that contain external tilesets, make sure the schema is added to the root tileset.json.\");return}let i=g(e.schema.classes,g.EMPTY_OBJECT);if(l(n.class)){let o=i[n.class];return new p2({tile:n,class:o})}}LH._oneTimeWarning=wt;var b2=LH;var qwn=T(S(),1);var Fwn=T(S(),1);function Hze(e){let t=new Uint8Array(e),n=Wm(t);if(n===\"glTF\"&&(n=\"glb\"),gs.isBinaryFormat(n))return{contentType:n,binaryPayload:t};let i=Kze(t);if(l(i.root))return{contentType:gs.EXTERNAL_TILESET,jsonPayload:i};if(l(i.asset))return{contentType:gs.GLTF,jsonPayload:i};if(l(i.tileAvailability))return{contentType:gs.IMPLICIT_SUBTREE_JSON,jsonPayload:i};if(l(i.type))return{contentType:gs.GEOJSON,jsonPayload:i};if(l(i.voxelTable))return{contentType:gs.VOXEL_JSON,jsonPayload:i};throw new ue(\"Invalid tile content.\")}function Kze(e){let t;try{t=Go(e)}catch{throw new ue(\"Invalid tile content.\")}return t}var bf=Hze;function Gu(e,t,n,i){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[],this._contentsCreated=!1;let o=l(i.contents)?i.contents:i.content;this._innerContentHeaders=o,this._requestsInFlight=0,this._cancelCount=0;let r=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(r),this._requests=new Array(r),this._ready=!1,this._innerContentResources=new Array(r),this._serverKeys=new Array(r);for(let s=0;s<r;s++){let a=n.getDerivedResource({url:o[s].uri}),c=Ja.getServerKey(a.getUrlComponent());this._innerContentResources[s]=a,this._serverKeys[s]=c}}Object.defineProperties(Gu.prototype,{featurePropertiesDirty:{get:function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},ready:{get:function(){return this._contentsCreated?this._ready:!1}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){}},batchTable:{get:function(){}},group:{get:function(){},set:function(){}},innerContentUrls:{get:function(){return this._innerContentHeaders.map(function(e){return e.uri})}}});function ZH(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function Tce(e,t){e._cancelCount++,e._tile._contentState=t;let n=e.tileset.statistics;n.numberOfPendingRequests-=e._requestsInFlight,n.numberOfAttemptedRequests+=e._requestsInFlight,e._requestsInFlight=0;let i=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(i)}Gu.prototype.requestInnerContents=function(){if(!Jze(this._serverKeys)){this.tileset.statistics.numberOfAttemptedRequests+=this._serverKeys.length;return}let e=this._innerContentHeaders;ZH(this,e.length);let t=this._cancelCount;for(let n=0;n<e.length;n++)this._arrayFetchPromises[n]=Qze(this,n,t,this._tile._contentState);return jze(this)};function Jze(e){let t={};for(let n=0;n<e.length;n++){let i=e[n];l(t[i])?t[i]++:t[i]=1}for(let n in t)if(t.hasOwnProperty(n)&&!Ja.serverHasOpenSlots(n,t[n]))return!1;return Ja.heapHasOpenSlots(e.length)}function Qze(e,t,n,i){let o=e._innerContentResources[t].clone(),r=e.tile,s=function(){return r._priority},a=e._serverKeys[t],c=new Do({throttle:!0,throttleByServer:!0,type:is.TILES3D,priorityFunction:s,serverKey:a});o.request=c,e._requests[t]=c;let d=o.fetchArrayBuffer();if(l(d))return d.then(function(u){if(!(n<e._cancelCount)){if(o.request.cancelled||o.request.state===Qn.CANCELLED){Tce(e,i);return}return ZH(e,-1),u}}).catch(function(u){if(!(n<e._cancelCount)){if(o.request.cancelled||o.request.state===Qn.CANCELLED){Tce(e,i);return}ZH(e,-1),Sce(e,t,u)}})}async function jze(e){let t=e._cancelCount,n=await Promise.all(e._arrayFetchPromises);if(t<e._cancelCount)return;let i=n.map((r,s)=>qze(e,r,s)),o=await Promise.all(i);return e._contentsCreated=!0,e._contents=o.filter(l),o}async function qze(e,t,n){if(l(t))try{let i=bf(t);if(i.contentType===gs.EXTERNAL_TILESET)throw new ue(\"External tilesets are disallowed inside multiple contents\");e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||i.contentType===gs.GEOMETRY||i.contentType===gs.VECTOR;let o=e._tileset,r=e._innerContentResources[n],s=e._tile,a,c=g_[i.contentType];l(i.binaryPayload)?a=await Promise.resolve(c(o,s,r,i.binaryPayload.buffer,0)):a=await Promise.resolve(c(o,s,r,i.jsonPayload));let d=e._innerContentHeaders[n];if(s.hasImplicitContentMetadata){let m=s.implicitSubtree,p=s.implicitCoordinates;a.metadata=m.getContentMetadataView(p,n)}else s.hasImplicitContent||(a.metadata=x_(o,d));let u=__(o,d);return l(u)&&(a.group=new Mx({metadata:u})),a}catch(i){Sce(e,n,i)}}function Sce(e,t,n){let i=e._tileset,o=e._innerContentResources[t].url,r=l(n.message)?n.message:n.toString();i.tileFailed.numberOfListeners>0?i.tileFailed.raiseEvent({url:o,message:r}):(console.log(`A content failed to load: ${o}`),console.log(`Error: ${r}`))}Gu.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){let t=this._requests[e];l(t)&&t.cancel()}};Gu.prototype.hasProperty=function(e,t){return!1};Gu.prototype.getFeature=function(e){};Gu.prototype.applyDebugSettings=function(e,t){let n=this._contents,i=n.length;for(let o=0;o<i;++o)n[o].applyDebugSettings(e,t)};Gu.prototype.applyStyle=function(e){let t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)};Gu.prototype.update=function(e,t){let n=this._contents,i=n.length,o=!0;for(let r=0;r<i;++r)n[r].update(e,t),o=o&&n[r].ready;!this._ready&&o&&(this._ready=!0)};Gu.prototype.pick=function(e,t,n){if(!this._ready)return;let i,o=Number.POSITIVE_INFINITY,r=this._contents,s=r.length;for(let a=0;a<s;++a){let c=r[a].pick(e,t,n);if(!l(c))continue;let d=h.distance(e.origin,c);d<o&&(i=c,o=d)}if(l(i))return n};Gu.prototype.isDestroyed=function(){return!1};Gu.prototype.destroy=function(){let e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return me(this)};var y2=Gu;var l9n=T(S(),1);var BFn=T(S(),1);var pFn=T(S(),1),Ice=T(Rce(),1);var fHe=new h,pHe=new h,Vy={};Vy.computeArea2D=function(e){let t=e.length,n=0;for(let i=t-1,o=0;o<t;i=o++){let r=e[i],s=e[o];n+=r.x*s.y-s.x*r.y}return n*.5};Vy.computeWindingOrder2D=function(e){return Vy.computeArea2D(e)>0?ns.COUNTER_CLOCKWISE:ns.CLOCKWISE};Vy.triangulate=function(e,t){let n=D.packArray(e);return(0,Ice.default)(n,t,2)};var Wce=new h,Pce=new h,vce=new h,Gce=new h,Ece=new h,Xce=new h,m0=new h,wce=new D,Fce=new D,Ace=new D,QC=new D;Vy.computeSubdivision=function(e,t,n,i,o){o=g(o,P.RADIANS_PER_DEGREE);let r=l(i),s=n.slice(0),a,c=t.length,d=new Array(c*3),u=new Array(c*2),m=0,p=0;for(a=0;a<c;a++){let L=t[a];if(d[m++]=L.x,d[m++]=L.y,d[m++]=L.z,r){let R=i[a];u[p++]=R.x,u[p++]=R.y}}let b=[],f={},x=e.maximumRadius,_=P.chordLength(o,x),C=_*_;for(;s.length>0;){let L=s.pop(),R=s.pop(),G=s.pop(),X=h.fromArray(d,G*3,Wce),v=h.fromArray(d,R*3,Pce),W=h.fromArray(d,L*3,vce),F,A,y;r&&(F=D.fromArray(u,G*2,wce),A=D.fromArray(u,R*2,Fce),y=D.fromArray(u,L*2,Ace));let Z=h.multiplyByScalar(h.normalize(X,Gce),x,Gce),E=h.multiplyByScalar(h.normalize(v,Ece),x,Ece),I=h.multiplyByScalar(h.normalize(W,Xce),x,Xce),w=h.magnitudeSquared(h.subtract(Z,E,m0)),k=h.magnitudeSquared(h.subtract(E,I,m0)),B=h.magnitudeSquared(h.subtract(I,Z,m0)),U=Math.max(w,k,B),Y,N,J;U>C?w===U?(Y=`${Math.min(G,R)} ${Math.max(G,R)}`,a=f[Y],l(a)||(N=h.add(X,v,m0),h.multiplyByScalar(N,.5,N),d.push(N.x,N.y,N.z),a=d.length/3-1,f[Y]=a,r&&(J=D.add(F,A,QC),D.multiplyByScalar(J,.5,J),u.push(J.x,J.y))),s.push(G,a,L),s.push(a,R,L)):k===U?(Y=`${Math.min(R,L)} ${Math.max(R,L)}`,a=f[Y],l(a)||(N=h.add(v,W,m0),h.multiplyByScalar(N,.5,N),d.push(N.x,N.y,N.z),a=d.length/3-1,f[Y]=a,r&&(J=D.add(A,y,QC),D.multiplyByScalar(J,.5,J),u.push(J.x,J.y))),s.push(R,a,G),s.push(a,L,G)):B===U&&(Y=`${Math.min(L,G)} ${Math.max(L,G)}`,a=f[Y],l(a)||(N=h.add(W,X,m0),h.multiplyByScalar(N,.5,N),d.push(N.x,N.y,N.z),a=d.length/3-1,f[Y]=a,r&&(J=D.add(y,F,QC),D.multiplyByScalar(J,.5,J),u.push(J.x,J.y))),s.push(L,a,R),s.push(a,G,R)):(b.push(G),b.push(R),b.push(L))}let V={attributes:{position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:d})},indices:b,primitiveType:we.TRIANGLES};return r&&(V.attributes.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:u})),new ut(V)};var bHe=new he,yHe=new he,gHe=new he,IH=new he;Vy.computeRhumbLineSubdivision=function(e,t,n,i,o){o=g(o,P.RADIANS_PER_DEGREE);let r=l(i),s=n.slice(0),a,c=t.length,d=new Array(c*3),u=new Array(c*2),m=0,p=0;for(a=0;a<c;a++){let G=t[a];if(d[m++]=G.x,d[m++]=G.y,d[m++]=G.z,r){let X=i[a];u[p++]=X.x,u[p++]=X.y}}let b=[],f={},x=e.maximumRadius,_=P.chordLength(o,x),C=new Za(void 0,void 0,e),V=new Za(void 0,void 0,e),L=new Za(void 0,void 0,e);for(;s.length>0;){let G=s.pop(),X=s.pop(),v=s.pop(),W=h.fromArray(d,v*3,Wce),F=h.fromArray(d,X*3,Pce),A=h.fromArray(d,G*3,vce),y,Z,E;r&&(y=D.fromArray(u,v*2,wce),Z=D.fromArray(u,X*2,Fce),E=D.fromArray(u,G*2,Ace));let I=e.cartesianToCartographic(W,bHe),w=e.cartesianToCartographic(F,yHe),k=e.cartesianToCartographic(A,gHe);C.setEndPoints(I,w);let B=C.surfaceDistance;V.setEndPoints(w,k);let U=V.surfaceDistance;L.setEndPoints(k,I);let Y=L.surfaceDistance,N=Math.max(B,U,Y),J,z,ee,H,j;N>_?B===N?(J=`${Math.min(v,X)} ${Math.max(v,X)}`,a=f[J],l(a)||(z=C.interpolateUsingFraction(.5,IH),ee=(I.height+w.height)*.5,H=h.fromRadians(z.longitude,z.latitude,ee,e,m0),d.push(H.x,H.y,H.z),a=d.length/3-1,f[J]=a,r&&(j=D.add(y,Z,QC),D.multiplyByScalar(j,.5,j),u.push(j.x,j.y))),s.push(v,a,G),s.push(a,X,G)):U===N?(J=`${Math.min(X,G)} ${Math.max(X,G)}`,a=f[J],l(a)||(z=V.interpolateUsingFraction(.5,IH),ee=(w.height+k.height)*.5,H=h.fromRadians(z.longitude,z.latitude,ee,e,m0),d.push(H.x,H.y,H.z),a=d.length/3-1,f[J]=a,r&&(j=D.add(Z,E,QC),D.multiplyByScalar(j,.5,j),u.push(j.x,j.y))),s.push(X,a,v),s.push(a,G,v)):Y===N&&(J=`${Math.min(G,v)} ${Math.max(G,v)}`,a=f[J],l(a)||(z=L.interpolateUsingFraction(.5,IH),ee=(k.height+I.height)*.5,H=h.fromRadians(z.longitude,z.latitude,ee,e,m0),d.push(H.x,H.y,H.z),a=d.length/3-1,f[J]=a,r&&(j=D.add(E,y,QC),D.multiplyByScalar(j,.5,j),u.push(j.x,j.y))),s.push(G,a,X),s.push(a,v,X)):(b.push(v),b.push(X),b.push(G))}let R={attributes:{position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:d})},indices:b,primitiveType:we.TRIANGLES};return r&&(R.attributes.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:u})),new ut(R)};Vy.scaleToGeodeticHeight=function(e,t,n,i){n=g(n,oe.WGS84);let o=fHe,r=pHe;if(t=g(t,0),i=g(i,!0),l(e)){let s=e.length;for(let a=0;a<s;a+=3)h.fromArray(e,a,r),i&&(r=n.scaleToGeodeticSurface(r,r)),t!==0&&(o=n.geodeticSurfaceNormal(r,o),h.multiplyByScalar(o,t,o),h.add(r,o,r)),e[a]=r.x,e[a+1]=r.y,e[a+2]=r.z}return e};var si=Vy;var VFn=T(S(),1);var Mce=Math.cos,Nce=Math.sin,xHe=Math.sqrt,PH={};PH.computePosition=function(e,t,n,i,o,r,s){let a=t.radiiSquared,c=e.nwCorner,d=e.boundingRectangle,u=c.latitude-e.granYCos*i+o*e.granXSin,m=Mce(u),p=Nce(u),b=a.z*p,f=c.longitude+i*e.granYSin+o*e.granXCos,x=m*Mce(f),_=m*Nce(f),C=a.x*x,V=a.y*_,L=xHe(C*x+V*_+b*p);if(r.x=C/L,r.y=V/L,r.z=b/L,n){let R=e.stNwCorner;l(R)?(u=R.latitude-e.stGranYCos*i+o*e.stGranXSin,f=R.longitude+i*e.stGranYSin+o*e.stGranXCos,s.x=(f-e.stWest)*e.lonScalar,s.y=(u-e.stSouth)*e.latScalar):(s.x=(f-d.west)*e.lonScalar,s.y=(u-d.south)*e.latScalar)}};var _He=new qi,Eu=new h,THe=new he,vN=new h,WH=new Ci;function kce(e,t,n,i,o,r,s){let a=Math.cos(t),c=i*a,d=n*a,u=Math.sin(t),m=i*u,p=n*u;Eu=WH.project(e,Eu),Eu=h.subtract(Eu,vN,Eu);let b=qi.fromRotation(t,_He);Eu=qi.multiplyByVector(b,Eu,Eu),Eu=h.add(Eu,vN,Eu),e=WH.unproject(Eu,e),r-=1,s-=1;let f=e.latitude,x=f+r*p,_=f-c*s,C=f-c*s+r*p,V=Math.max(f,x,_,C),L=Math.min(f,x,_,C),R=e.longitude,G=R+r*d,X=R+s*m,v=R+s*m+r*d,W=Math.max(R,G,X,v),F=Math.min(R,G,X,v);return{north:V,south:L,east:W,west:F,granYCos:c,granYSin:m,granXCos:d,granXSin:p,nwCorner:e}}PH.computeOptions=function(e,t,n,i,o,r,s){let a=e.east,c=e.west,d=e.north,u=e.south,m=!1,p=!1;d===P.PI_OVER_TWO&&(m=!0),u===-P.PI_OVER_TWO&&(p=!0);let b,f=d-u;c>a?b=P.TWO_PI-c+a:b=a-c;let x=Math.ceil(b/t)+1,_=Math.ceil(f/t)+1,C=b/(x-1),V=f/(_-1),L=le.northwest(e,r),R=le.center(e,THe);(n!==0||i!==0)&&(R.longitude<L.longitude&&(R.longitude+=P.TWO_PI),vN=WH.project(R,vN));let G=V,X=C,v=0,W=0,F=le.clone(e,o),A={granYCos:G,granYSin:v,granXCos:X,granXSin:W,nwCorner:L,boundingRectangle:F,width:x,height:_,northCap:m,southCap:p};if(n!==0){let y=kce(L,n,C,V,R,x,_);d=y.north,u=y.south,a=y.east,c=y.west,A.granYCos=y.granYCos,A.granYSin=y.granYSin,A.granXCos=y.granXCos,A.granXSin=y.granXSin,F.north=d,F.south=u,F.east=a,F.west=c}if(i!==0){n=n-i;let y=le.northwest(F,s),Z=kce(y,n,C,V,R,x,_);A.stGranYCos=Z.granYCos,A.stGranXCos=Z.granXCos,A.stGranYSin=Z.granYSin,A.stGranXSin=Z.granXSin,A.stNwCorner=y,A.stWest=Z.west,A.stSouth=Z.south}return A};var xs=PH;var SHe=new ce,CHe=new ce,VHe=new h,LHe=new le;function Uce(e,t){let n=e._ellipsoid,i=t.height,o=t.width,r=t.northCap,s=t.southCap,a=i,c=2,d=0,u=4;r&&(c-=1,a-=1,d+=1,u-=2),s&&(c-=1,a-=1,d+=1,u-=2),d+=c*o+2*a-u;let m=new Float64Array(d*3),p=0,b=0,f,x=VHe;if(r)xs.computePosition(t,n,!1,b,0,x),m[p++]=x.x,m[p++]=x.y,m[p++]=x.z;else for(f=0;f<o;f++)xs.computePosition(t,n,!1,b,f,x),m[p++]=x.x,m[p++]=x.y,m[p++]=x.z;for(f=o-1,b=1;b<i;b++)xs.computePosition(t,n,!1,b,f,x),m[p++]=x.x,m[p++]=x.y,m[p++]=x.z;if(b=i-1,!s)for(f=o-2;f>=0;f--)xs.computePosition(t,n,!1,b,f,x),m[p++]=x.x,m[p++]=x.y,m[p++]=x.z;for(f=0,b=i-2;b>0;b--)xs.computePosition(t,n,!1,b,f,x),m[p++]=x.x,m[p++]=x.y,m[p++]=x.z;let _=m.length/3*2,C=Ae.createTypedArray(m.length/3,_),V=0;for(let R=0;R<m.length/3-1;R++)C[V++]=R,C[V++]=R+1;C[V++]=m.length/3-1,C[V++]=0;let L=new ut({attributes:new hn,primitiveType:we.LINES});return L.attributes.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:m}),L.indices=C,L}function ZHe(e,t){let n=e._surfaceHeight,i=e._extrudedHeight,o=e._ellipsoid,r=Uce(e,t),s=t.height,a=t.width,c=si.scaleToGeodeticHeight(r.attributes.position.values,n,o,!1),d=c.length,u=new Float64Array(d*2);u.set(c);let m=si.scaleToGeodeticHeight(r.attributes.position.values,i,o);u.set(m,d),r.attributes.position.values=u;let p=t.northCap,b=t.southCap,f=4;p&&(f-=1),b&&(f-=1);let x=(u.length/3+f)*2,_=Ae.createTypedArray(u.length/3,x);d=u.length/6;let C=0;for(let L=0;L<d-1;L++)_[C++]=L,_[C++]=L+1,_[C++]=L+d,_[C++]=L+d+1;_[C++]=d-1,_[C++]=0,_[C++]=d+d-1,_[C++]=d,_[C++]=0,_[C++]=d;let V;if(p)V=s-1;else{let L=a-1;_[C++]=L,_[C++]=L+d,V=a+s-2}if(_[C++]=V,_[C++]=V+d,!b){let L=a+V-1;_[C++]=L,_[C]=L+d}return r.indices=_,r}function qC(e){e=g(e,g.EMPTY_OBJECT);let t=e.rectangle,n=g(e.granularity,P.RADIANS_PER_DEGREE),i=g(e.ellipsoid,oe.WGS84),o=g(e.rotation,0),r=g(e.height,0),s=g(e.extrudedHeight,r);this._rectangle=le.clone(t),this._granularity=n,this._ellipsoid=i,this._surfaceHeight=Math.max(r,s),this._rotation=o,this._extrudedHeight=Math.min(r,s),this._offsetAttribute=e.offsetAttribute,this._workerName=\"createRectangleOutlineGeometry\"}qC.packedLength=le.packedLength+oe.packedLength+5;qC.pack=function(e,t,n){return n=g(n,0),le.pack(e._rectangle,t,n),n+=le.packedLength,oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,t[n++]=e._granularity,t[n++]=e._surfaceHeight,t[n++]=e._rotation,t[n++]=e._extrudedHeight,t[n]=g(e._offsetAttribute,-1),t};var Dce=new le,Bce=oe.clone(oe.UNIT_SPHERE),jC={rectangle:Dce,ellipsoid:Bce,granularity:void 0,height:void 0,rotation:void 0,extrudedHeight:void 0,offsetAttribute:void 0};qC.unpack=function(e,t,n){t=g(t,0);let i=le.unpack(e,t,Dce);t+=le.packedLength;let o=oe.unpack(e,t,Bce);t+=oe.packedLength;let r=e[t++],s=e[t++],a=e[t++],c=e[t++],d=e[t];return l(n)?(n._rectangle=le.clone(i,n._rectangle),n._ellipsoid=oe.clone(o,n._ellipsoid),n._surfaceHeight=s,n._rotation=a,n._extrudedHeight=c,n._offsetAttribute=d===-1?void 0:d,n):(jC.granularity=r,jC.height=s,jC.rotation=a,jC.extrudedHeight=c,jC.offsetAttribute=d===-1?void 0:d,new qC(jC))};var RHe=new he;qC.createGeometry=function(e){let t=e._rectangle,n=e._ellipsoid,i=xs.computeOptions(t,e._granularity,e._rotation,0,LHe,RHe),o,r;if(P.equalsEpsilon(t.north,t.south,P.EPSILON10)||P.equalsEpsilon(t.east,t.west,P.EPSILON10))return;let s=e._surfaceHeight,a=e._extrudedHeight,c=!P.equalsEpsilon(s,a,0,P.EPSILON2),d;if(c){if(o=ZHe(e,i),l(e._offsetAttribute)){let p=o.attributes.position.values.length/3,b=new Uint8Array(p);e._offsetAttribute===cn.TOP?b=b.fill(1,0,p/2):(d=e._offsetAttribute===cn.NONE?0:1,b=b.fill(d)),o.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:b})}let u=ce.fromRectangle3D(t,n,s,CHe),m=ce.fromRectangle3D(t,n,a,SHe);r=ce.union(u,m)}else{if(o=Uce(e,i),o.attributes.position.values=si.scaleToGeodeticHeight(o.attributes.position.values,s,n,!1),l(e._offsetAttribute)){let u=o.attributes.position.values.length;d=e._offsetAttribute===cn.NONE?0:1;let m=new Uint8Array(u/3).fill(d);o.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:m})}r=ce.fromRectangle3D(t,n,s)}return new ut({attributes:o.attributes,indices:o.indices,primitiveType:we.LINES,boundingSphere:r,offsetAttribute:e._offsetAttribute})};var S_=qC;function e1(e){this.rectangle=le.clone(e.rectangle),this.minimumHeight=g(e.minimumHeight,0),this.maximumHeight=g(e.maximumHeight,0),this.southwestCornerCartesian=new h,this.northeastCornerCartesian=new h,this.westNormal=new h,this.southNormal=new h,this.eastNormal=new h,this.northNormal=new h;let t=g(e.ellipsoid,oe.WGS84);WHe(this,e.rectangle,t),this._orientedBoundingBox=void 0,this._boundingSphere=void 0,g(e.computeBoundingVolumes,!0)&&this.computeBoundingVolumes(t)}Object.defineProperties(e1.prototype,{boundingVolume:{get:function(){return this._orientedBoundingBox}},boundingSphere:{get:function(){return this._boundingSphere}}});e1.prototype.computeBoundingVolumes=function(e){this._orientedBoundingBox=Zn.fromRectangle(this.rectangle,this.minimumHeight,this.maximumHeight,e),this._boundingSphere=ce.fromOrientedBoundingBox(this._orientedBoundingBox)};var Yce=new h,wN=new h,Oce=new h,GHe=new h,EHe=new h,XHe=new h,IHe=new h,Xu=new he,zce=new an(h.UNIT_X,0),$C=new bn;function WHe(e,t,n){n.cartographicToCartesian(le.southwest(t),e.southwestCornerCartesian),n.cartographicToCartesian(le.northeast(t),e.northeastCornerCartesian),Xu.longitude=t.west,Xu.latitude=(t.south+t.north)*.5,Xu.height=0;let i=n.cartographicToCartesian(Xu,XHe),o=h.cross(i,h.UNIT_Z,GHe);h.normalize(o,e.westNormal),Xu.longitude=t.east;let r=n.cartographicToCartesian(Xu,IHe),s=h.cross(h.UNIT_Z,r,Yce);h.normalize(s,e.eastNormal);let a=h.subtract(i,r,Yce);h.magnitude(a)===0&&(a=h.clone(o,a));let c=h.normalize(a,EHe),d=t.south,u;if(d>0){Xu.longitude=(t.west+t.east)*.5,Xu.latitude=d;let x=n.cartographicToCartesian(Xu,$C.origin);h.clone(c,$C.direction);let _=an.fromPointNormal(e.southwestCornerCartesian,e.westNormal,zce);jn.rayPlane($C,_,e.southwestCornerCartesian),u=n.geodeticSurfaceNormal(x,wN)}else u=n.geodeticSurfaceNormalCartographic(le.southeast(t),wN);let m=h.cross(u,a,Oce);h.normalize(m,e.southNormal);let p=t.north,b;if(p<0){Xu.longitude=(t.west+t.east)*.5,Xu.latitude=p;let x=n.cartographicToCartesian(Xu,$C.origin);h.negate(c,$C.direction);let _=an.fromPointNormal(e.northeastCornerCartesian,e.eastNormal,zce);jn.rayPlane($C,_,e.northeastCornerCartesian),b=n.geodeticSurfaceNormal(x,wN)}else b=n.geodeticSurfaceNormalCartographic(le.northwest(t),wN);let f=h.cross(a,b,Oce);h.normalize(f,e.northNormal)}var PHe=new h,vHe=new h,wHe=new h(0,-1,0),FHe=new h(0,0,-1),Hce=new h;function AHe(e,t){let n=t.camera,i=n.positionWC,o=n.positionCartographic,r=0;if(!le.contains(e.rectangle,o)){let d=e.southwestCornerCartesian,u=e.northeastCornerCartesian,m=e.westNormal,p=e.southNormal,b=e.eastNormal,f=e.northNormal;t.mode!==ie.SCENE3D&&(d=t.mapProjection.project(le.southwest(e.rectangle),PHe),d.z=d.y,d.y=d.x,d.x=0,u=t.mapProjection.project(le.northeast(e.rectangle),vHe),u.z=u.y,u.y=u.x,u.x=0,m=wHe,b=h.UNIT_Y,p=FHe,f=h.UNIT_Z);let x=h.subtract(i,d,Hce),_=h.dot(x,m),C=h.dot(x,p),V=h.subtract(i,u,Hce),L=h.dot(V,b),R=h.dot(V,f);_>0?r+=_*_:L>0&&(r+=L*L),C>0?r+=C*C:R>0&&(r+=R*R)}let s,a,c;if(t.mode===ie.SCENE3D?(s=o.height,a=e.minimumHeight,c=e.maximumHeight):(s=i.x,a=0,c=0),s>c){let d=s-c;r+=d*d}else if(s<a){let d=a-s;r+=d*d}return Math.sqrt(r)}e1.prototype.distanceToCamera=function(e){let t=AHe(this,e);if(e.mode===ie.SCENE3D&&l(this._orientedBoundingBox)){let n=Math.sqrt(this._orientedBoundingBox.distanceSquaredTo(e.camera.positionWC));return Math.max(t,n)}return t};e1.prototype.intersectPlane=function(e){return this._orientedBoundingBox.intersectPlane(e)};e1.prototype.createDebugVolume=function(e){let t=new M.clone(M.IDENTITY),n=new S_({rectangle:this.rectangle,height:this.minimumHeight,extrudedHeight:this.maximumHeight}),i=new Vt({geometry:n,id:\"outline\",modelMatrix:t,attributes:{color:Ot.fromColor(e)}});return new Rn({geometryInstances:i,appearance:new ln({translucent:!1,flat:!0}),asynchronous:!1})};var Iu=e1;var LAn=T(S(),1);var aAn=T(S(),1);var p9n=T(S(),1);var T2={},MHe=new h,Kce=new h,Jce=new h,Qce=new h,jce=new Zn;T2.validOutline=function(e){let n=Zn.fromPoints(e,jce).halfAxes,i=$.getColumn(n,0,Kce),o=$.getColumn(n,1,Jce),r=$.getColumn(n,2,Qce),s=h.magnitude(i),a=h.magnitude(o),c=h.magnitude(r);return!(s===0&&(a===0||c===0)||a===0&&c===0)};T2.computeProjectTo2DArguments=function(e,t,n,i){let o=Zn.fromPoints(e,jce),r=o.halfAxes,s=$.getColumn(r,0,Kce),a=$.getColumn(r,1,Jce),c=$.getColumn(r,2,Qce),d=h.magnitude(s),u=h.magnitude(a),m=h.magnitude(c),p=Math.min(d,u,m);if(d===0&&(u===0||m===0)||u===0&&m===0)return!1;let b,f;return(p===u||p===m)&&(b=s),p===d?b=a:p===m&&(f=a),(p===d||p===u)&&(f=c),h.normalize(b,n),h.normalize(f,i),h.clone(o.center,t),!0};function qce(e,t,n,i,o){let r=h.subtract(e,t,MHe),s=h.dot(n,r),a=h.dot(i,r);return D.fromElements(s,a,o)}T2.createProjectPointsTo2DFunction=function(e,t,n){return function(i){let o=new Array(i.length);for(let r=0;r<i.length;r++)o[r]=qce(i[r],e,t,n);return o}};T2.createProjectPointTo2DFunction=function(e,t,n){return function(i,o){return qce(i,e,t,n,o)}};var h0=T2;var Y9n=T(S(),1);var y9n=T(S(),1);function Ly(){this._array=[],this._offset=0,this._length=0}Object.defineProperties(Ly.prototype,{length:{get:function(){return this._length}}});Ly.prototype.enqueue=function(e){this._array.push(e),this._length++};Ly.prototype.dequeue=function(){if(this._length===0)return;let e=this._array,t=this._offset,n=e[t];return e[t]=void 0,t++,t>10&&t*2>e.length&&(this._array=e.slice(t),t=0),this._offset=t,this._length--,n};Ly.prototype.peek=function(){if(this._length!==0)return this._array[this._offset]};Ly.prototype.contains=function(e){return this._array.indexOf(e)!==-1};Ly.prototype.clear=function(){this._array.length=this._offset=this._length=0};Ly.prototype.sort=function(e){this._offset>0&&(this._array=this._array.slice(this._offset),this._offset=0),this._array.sort(e)};var Zy=Ly;var Ko={};Ko.computeHierarchyPackedLength=function(e,t){let n=0,i=[e];for(;i.length>0;){let o=i.pop();if(!l(o))continue;n+=2;let r=o.positions,s=o.holes;if(l(r)&&r.length>0&&(n+=r.length*t.packedLength),l(s)){let a=s.length;for(let c=0;c<a;++c)i.push(s[c])}}return n};Ko.packPolygonHierarchy=function(e,t,n,i){let o=[e];for(;o.length>0;){let r=o.pop();if(!l(r))continue;let s=r.positions,a=r.holes;if(t[n++]=l(s)?s.length:0,t[n++]=l(a)?a.length:0,l(s)){let c=s.length;for(let d=0;d<c;++d,n+=i.packedLength)i.pack(s[d],t,n)}if(l(a)){let c=a.length;for(let d=0;d<c;++d)o.push(a[d])}}return n};Ko.unpackPolygonHierarchy=function(e,t,n){let i=e[t++],o=e[t++],r=new Array(i),s=o>0?new Array(o):void 0;for(let a=0;a<i;++a,t+=n.packedLength)r[a]=n.unpack(e,t);for(let a=0;a<o;++a)s[a]=Ko.unpackPolygonHierarchy(e,t,n),t=s[a].startingIndex,delete s[a].startingIndex;return{positions:r,holes:s,startingIndex:t}};var C_=new D;function tle(e,t,n,i){return D.subtract(t,e,C_),D.multiplyByScalar(C_,n/i,C_),D.add(e,C_,C_),[C_.x,C_.y]}var Ry=new h;function NHe(e,t,n,i){return h.subtract(t,e,Ry),h.multiplyByScalar(Ry,n/i,Ry),h.add(e,Ry,Ry),[Ry.x,Ry.y,Ry.z]}Ko.subdivideLineCount=function(e,t,n){let o=h.distance(e,t)/n,r=Math.max(0,Math.ceil(P.log2(o)));return Math.pow(2,r)};var AN=new he,MN=new he,kHe=new he,UHe=new h,FN=new Za;Ko.subdivideRhumbLineCount=function(e,t,n,i){let o=e.cartesianToCartographic(t,AN),r=e.cartesianToCartographic(n,MN),a=new Za(o,r,e).surfaceDistance/i,c=Math.max(0,Math.ceil(P.log2(a)));return Math.pow(2,c)};Ko.subdivideTexcoordLine=function(e,t,n,i,o,r){let s=Ko.subdivideLineCount(n,i,o),a=D.distance(e,t),c=a/s,d=r;d.length=s*2;let u=0;for(let m=0;m<s;m++){let p=tle(e,t,m*c,a);d[u++]=p[0],d[u++]=p[1]}return d};Ko.subdivideLine=function(e,t,n,i){let o=Ko.subdivideLineCount(e,t,n),r=h.distance(e,t),s=r/o;l(i)||(i=[]);let a=i;a.length=o*3;let c=0;for(let d=0;d<o;d++){let u=NHe(e,t,d*s,r);a[c++]=u[0],a[c++]=u[1],a[c++]=u[2]}return a};Ko.subdivideTexcoordRhumbLine=function(e,t,n,i,o,r,s){let a=n.cartesianToCartographic(i,AN),c=n.cartesianToCartographic(o,MN);FN.setEndPoints(a,c);let d=FN.surfaceDistance/r,u=Math.max(0,Math.ceil(P.log2(d))),m=Math.pow(2,u),p=D.distance(e,t),b=p/m,f=s;f.length=m*2;let x=0;for(let _=0;_<m;_++){let C=tle(e,t,_*b,p);f[x++]=C[0],f[x++]=C[1]}return f};Ko.subdivideRhumbLine=function(e,t,n,i,o){let r=e.cartesianToCartographic(t,AN),s=e.cartesianToCartographic(n,MN),a=new Za(r,s,e),c=a.surfaceDistance/i,d=Math.max(0,Math.ceil(P.log2(c))),u=Math.pow(2,d),m=a.surfaceDistance/u;l(o)||(o=[]);let p=o;p.length=u*3;let b=0;for(let f=0;f<u;f++){let x=a.interpolateUsingSurfaceDistance(f*m,kHe),_=e.cartographicToCartesian(x,UHe);p[b++]=_.x,p[b++]=_.y,p[b++]=_.z}return p};var DHe=new h,BHe=new h,YHe=new h,OHe=new h;Ko.scaleToGeodeticHeightExtruded=function(e,t,n,i,o){i=g(i,oe.WGS84);let r=DHe,s=BHe,a=YHe,c=OHe;if(l(e)&&l(e.attributes)&&l(e.attributes.position)){let d=e.attributes.position.values,u=d.length/2;for(let m=0;m<u;m+=3)h.fromArray(d,m,a),i.geodeticSurfaceNormal(a,r),c=i.scaleToGeodeticSurface(a,c),s=h.multiplyByScalar(r,n,s),s=h.add(c,s,s),d[m+u]=s.x,d[m+1+u]=s.y,d[m+2+u]=s.z,o&&(c=h.clone(a,c)),s=h.multiplyByScalar(r,t,s),s=h.add(c,s,s),d[m]=s.x,d[m+1]=s.y,d[m+2]=s.z}return e};Ko.polygonOutlinesFromHierarchy=function(e,t,n){let i=[],o=new Zy;o.enqueue(e);let r,s,a;for(;o.length!==0;){let c=o.dequeue(),d=c.positions;if(t)for(a=d.length,r=0;r<a;r++)n.scaleToGeodeticSurface(d[r],d[r]);if(d=yo(d,h.equalsEpsilon,!0),d.length<3)continue;let u=c.holes?c.holes.length:0;for(r=0;r<u;r++){let m=c.holes[r],p=m.positions;if(t)for(a=p.length,s=0;s<a;++s)n.scaleToGeodeticSurface(p[s],p[s]);if(p=yo(p,h.equalsEpsilon,!0),p.length<3)continue;i.push(p);let b=0;for(l(m.holes)&&(b=m.holes.length),s=0;s<b;s++)o.enqueue(m.holes[s])}i.push(d)}return i};var zHe=new he;function HHe(e,t,n){let i=n.cartesianToCartographic(e,AN),o=n.cartesianToCartographic(t,MN);if(Math.sign(i.latitude)===Math.sign(o.latitude))return;FN.setEndPoints(i,o);let r=FN.findIntersectionWithLatitude(0,zHe);if(!l(r))return;let s=Math.min(i.longitude,o.longitude),a=Math.max(i.longitude,o.longitude);if(Math.abs(a-s)>P.PI){let c=s;s=a,a=c}if(!(r.longitude<s||r.longitude>a))return n.cartographicToCartesian(r)}function KHe(e,t,n,i){if(i===$t.RHUMB)return HHe(e,t,n);let o=jn.lineSegmentPlane(e,t,an.ORIGIN_XY_PLANE);if(l(o))return n.scaleToGeodeticSurface(o,o)}var JHe=new he;function QHe(e,t,n){let i=[],o,r,s,a,c,d=0;for(;d<e.length;){o=e[d],r=e[(d+1)%e.length],s=P.sign(o.z),a=P.sign(r.z);let u=m=>t.cartesianToCartographic(m,JHe).longitude;if(s===0)i.push({position:d,type:s,visited:!1,next:a,theta:u(o)});else if(a!==0){if(c=KHe(o,r,t,n),++d,!l(c))continue;e.splice(d,0,c),i.push({position:d,type:s,visited:!1,next:a,theta:u(c)})}++d}return i}function nle(e,t,n,i,o,r,s){let a=[],c=r,d=m=>p=>p.position===m,u=[];do{let m=n[c];a.push(m);let p=i.findIndex(d(c)),b=i[p];if(!l(b)){++c;continue}let{visited:f,type:x,next:_}=b;if(b.visited=!0,x===0){if(_===0){let R=i[p-(s?1:-1)];if(R?.position===c+1)R.visited=!0;else{++c;continue}}if(!f&&s&&_>0||r===c&&!s&&_<0){++c;continue}}if(!(s?x>=0:x<=0)){++c;continue}f||u.push(c);let V=p+(s?1:-1),L=i[V];if(!l(L)){++c;continue}c=L.position}while(c<n.length&&c>=0&&c!==r&&a.length<n.length);e.splice(t,o,a);for(let m of u)t=nle(e,++t,n,i,0,m,!s);return t}Ko.splitPolygonsOnEquator=function(e,t,n,i){l(i)||(i=[]),i.splice(0,0,...e),i.length=e.length;let o=0;for(;o<i.length;){let r=i[o],s=r.slice();if(r.length<3){i[o]=s,++o;continue}let a=QHe(s,t,n);if(s.length===r.length||a.length<=1){i[o]=s,++o;continue}a.sort((d,u)=>d.theta-u.theta);let c=s[0].z>=0;o=nle(i,o,s,a,1,0,c)}return i};Ko.polygonsFromHierarchy=function(e,t,n,i,o,r){let s=[],a=[],c=new Zy;c.enqueue(e);let d=l(r);for(;c.length!==0;){let u=c.dequeue(),m=u.positions,p=u.holes,b,f;if(i)for(f=m.length,b=0;b<f;b++)o.scaleToGeodeticSurface(m[b],m[b]);if(t||(m=yo(m,h.equalsEpsilon,!0)),m.length<3)continue;let x=n(m);if(!l(x))continue;let _=[],C=si.computeWindingOrder2D(x);if(C===ns.CLOCKWISE&&(x.reverse(),m=m.slice().reverse()),d){d=!1;let X=[m];if(X=r(X,X),X.length>1){for(let v of X)c.enqueue(new Ra(v,p));continue}}let V=m.slice(),L=l(p)?p.length:0,R=[],G;for(b=0;b<L;b++){let X=p[b],v=X.positions;if(i)for(f=v.length,G=0;G<f;++G)o.scaleToGeodeticSurface(v[G],v[G]);if(t||(v=yo(v,h.equalsEpsilon,!0)),v.length<3)continue;let W=n(v);if(!l(W))continue;C=si.computeWindingOrder2D(W),C===ns.CLOCKWISE&&(W.reverse(),v=v.slice().reverse()),R.push(v),_.push(V.length),V=V.concat(v),x=x.concat(W);let F=0;for(l(X.holes)&&(F=X.holes.length),G=0;G<F;G++)c.enqueue(X.holes[G])}s.push({outerRing:m,holes:R}),a.push({positions:V,positions2D:x,holes:_})}return{hierarchy:s,polygons:a}};var jHe=new D,qHe=new h,$He=new Fe,eKe=new $;Ko.computeBoundingRectangle=function(e,t,n,i,o){let r=Fe.fromAxisAngle(e,i,$He),s=$.fromQuaternion(r,eKe),a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,m=n.length;for(let p=0;p<m;++p){let"
}