{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 137,
    "total_chunks": 194,
    "chunk_size": 38459,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.733Z"
  },
  "content": "he,new he];function WD(e,t,n,i,o,r){j4.x=e,j4.y=t;let s=i.pickEllipsoid(j4,o,dlt);return l(s)?(bg[n]=o.cartesianToCartographic(s,bg[n]),1):(bg[n]=o.cartesianToCartographic(r[n],bg[n]),0)}en.prototype.computeViewRectangle=function(e,t){e=g(e,oe.WGS84);let n=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),i=new ce(h.ZERO,e.maximumRadius);if(n.computeVisibility(i)===nn.OUTSIDE)return;let r=this._scene.canvas,s=r.clientWidth,a=r.clientHeight,c=0,d=llt(this,e);if(c+=WD(0,0,0,this,e,d),c+=WD(0,a,1,this,e,d),c+=WD(s,a,2,this,e,d),c+=WD(s,0,3,this,e,d),c<2)return le.MAX_VALUE;t=le.fromCartographicArray(bg,t);let u=0,m=bg[3].longitude;for(let p=0;p<4;++p){let b=bg[p].longitude,f=Math.abs(b-m);f>P.PI?u+=P.TWO_PI-f:u+=f,m=b}return P.equalsEpsilon(Math.abs(u),P.TWO_PI,P.EPSILON9)&&(t.west=-P.PI,t.east=P.PI,bg[0].latitude>=0?t.north=P.PI_OVER_TWO:t.south=-P.PI_OVER_TWO),t};en.prototype.switchToPerspectiveFrustum=function(){if(this._mode===ie.SCENE2D||this.frustum instanceof _i)return;let e=this._scene;this.frustum=new _i,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.fov=P.toRadians(60)};en.prototype.switchToOrthographicFrustum=function(){if(this._mode===ie.SCENE2D||this.frustum instanceof rn)return;let e=ige(this),t=this._scene;this.frustum=new rn,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.width=e};en.clone=function(e,t){return l(t)||(t=new en(e._scene)),h.clone(e.position,t.position),h.clone(e.direction,t.direction),h.clone(e.up,t.up),h.clone(e.right,t.right),M.clone(e._transform,t.transform),t._transformChanged=!0,t.frustum=e.frustum.clone(),t};var lo=en;var IRi=T(S(),1);function ult(e){this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}var em=ult;var NRi=T(S(),1);var yge=T(td(),1),hge=576,mlt=100,vw=\"#ffffff\",nj=\"#48b\";function gge(e,t){this.credit=e,this.count=g(t,1)}function hlt(e,t){let n=e.length;for(let i=0;i<n;i++){let o=e[i];if(Zt.equals(o,t))return!0}return!1}function flt(e){let t=e._previousCesiumCredit,n=e._currentCesiumCredit;Zt.equals(n,t)||(l(t)&&e._cesiumCreditContainer.removeChild(t.element),l(n)&&e._cesiumCreditContainer.appendChild(n.element),e._previousCesiumCredit=n)}var xge=\"cesium-credit-delimiter\";function fge(e){let t=document.createElement(\"span\");return t.textContent=e,t.className=xge,t}function pge(e,t){if(l(t)){let n=document.createElement(t);n._creditId=e._creditId,n.appendChild(e),e=n}return e}function bge(e,t,n,i){let o=e.childNodes,r=-1;t.sort(function(s,a){return a.count-s.count});for(let s=0;s<t.length;++s){let a=t[s].credit;if(l(a)){if(r=s,l(n)&&(r*=2,s>0)){let d=r-1;if(o.length<=d)e.appendChild(fge(n));else{let u=o[d];u.className!==xge&&e.replaceChild(fge(n),u)}}let c=a.element;if(o.length<=r)e.appendChild(pge(c,i));else{let d=o[r];d._creditId!==a._id&&e.replaceChild(pge(c,i),d)}}}for(++r;r<o.length;)e.removeChild(o[r])}function plt(e){let t=e._lightboxCredits,n=e.viewport.clientWidth,i=e.viewport.clientHeight;n!==e._lastViewportWidth&&(n<hge?(t.className=\"cesium-credit-lightbox cesium-credit-lightbox-mobile\",t.style.marginTop=\"0\"):(t.className=\"cesium-credit-lightbox cesium-credit-lightbox-expanded\",t.style.marginTop=`${Math.floor((i-t.clientHeight)*.5)}px`),e._lastViewportWidth=n),n>=hge&&i!==e._lastViewportHeight&&(t.style.marginTop=`${Math.floor((i-t.clientHeight)*.5)}px`,e._lastViewportHeight=i)}function Cc(e,t){let n=`${e} {`;for(let i in t)t.hasOwnProperty(i)&&(n+=`${i}: ${t[i]}; `);return n+=` } `,n}function blt(e){let t=\"\";t+=Cc(\".cesium-credit-lightbox-overlay\",{display:\"none\",\"z-index\":\"1\",position:\"absolute\",top:\"0\",left:\"0\",width:\"100%\",height:\"100%\",\"background-color\":\"rgba(80, 80, 80, 0.8)\"}),t+=Cc(\".cesium-credit-lightbox\",{\"background-color\":\"#303336\",color:vw,position:\"relative\",\"min-height\":`${mlt}px`,margin:\"auto\"}),t+=Cc(\".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited\",{color:vw}),t+=Cc(\".cesium-credit-lightbox > ul > li a:hover\",{color:nj}),t+=Cc(\".cesium-credit-lightbox.cesium-credit-lightbox-expanded\",{border:\"1px solid #444\",\"border-radius\":\"5px\",\"max-width\":\"370px\"}),t+=Cc(\".cesium-credit-lightbox.cesium-credit-lightbox-mobile\",{height:\"100%\",width:\"100%\"}),t+=Cc(\".cesium-credit-lightbox-title\",{padding:\"20px 20px 0 20px\"}),t+=Cc(\".cesium-credit-lightbox-close\",{\"font-size\":\"18pt\",cursor:\"pointer\",position:\"absolute\",top:\"0\",right:\"6px\",color:vw}),t+=Cc(\".cesium-credit-lightbox-close:hover\",{color:nj}),t+=Cc(\".cesium-credit-lightbox > ul\",{margin:\"0\",padding:\"12px 20px 12px 40px\",\"font-size\":\"13px\"}),t+=Cc(\".cesium-credit-lightbox > ul > li\",{\"padding-bottom\":\"6px\"}),t+=Cc(\".cesium-credit-lightbox > ul > li *\",{padding:\"0\",margin:\"0\"}),t+=Cc(\".cesium-credit-expand-link\",{\"padding-left\":\"5px\",cursor:\"pointer\",\"text-decoration\":\"underline\",color:vw}),t+=Cc(\".cesium-credit-expand-link:hover\",{color:nj}),t+=Cc(\".cesium-credit-text\",{color:vw}),t+=Cc(\".cesium-credit-textContainer *, .cesium-credit-logoContainer *\",{display:\"inline\"});function n(r){if(r.shadowRoot)return r.shadowRoot;if(r.getRootNode){let s=r.getRootNode();if(s instanceof ShadowRoot)return s}}let i=g(n(e),document.head),o=document.createElement(\"style\");o.innerHTML=t,i.appendChild(o)}function dr(e,t,n){let i=this;n=g(n,document.body);let o=document.createElement(\"div\");o.className=\"cesium-credit-lightbox-overlay\",n.appendChild(o);let r=document.createElement(\"div\");r.className=\"cesium-credit-lightbox\",o.appendChild(r);function s(f){r.contains(f.target)||i.hideLightbox()}o.addEventListener(\"click\",s,!1);let a=document.createElement(\"div\");a.className=\"cesium-credit-lightbox-title\",a.textContent=\"Data provided by:\",r.appendChild(a);let c=document.createElement(\"a\");c.onclick=this.hideLightbox.bind(this),c.innerHTML=\"&times;\",c.className=\"cesium-credit-lightbox-close\",r.appendChild(c);let d=document.createElement(\"ul\");r.appendChild(d);let u=document.createElement(\"div\");u.className=\"cesium-credit-logoContainer\",u.style.display=\"inline\",e.appendChild(u);let m=document.createElement(\"div\");m.className=\"cesium-credit-textContainer\",m.style.display=\"inline\",e.appendChild(m);let p=document.createElement(\"a\");p.className=\"cesium-credit-expand-link\",p.onclick=this.showLightbox.bind(this),p.textContent=\"Data attribution\",e.appendChild(p),blt(e);let b=Zt.clone(dr.cesiumCredit);this._delimiter=g(t,\" \\u2022 \"),this._screenContainer=m,this._cesiumCreditContainer=u,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=r,this._creditList=d,this._lightbox=o,this._hideLightbox=s,this._expandLink=p,this._expanded=!1,this._staticCredits=[],this._cesiumCredit=b,this._previousCesiumCredit=void 0,this._currentCesiumCredit=b,this._creditDisplayElementPool=[],this._creditDisplayElementIndex=0,this._currentFrameCredits={screenCredits:new Lt,lightboxCredits:new Lt},this._defaultCredit=void 0,this.viewport=n,this.container=e}function _ge(e,t,n,i){i=g(i,1);let o=t.get(n.id);if(l(o))o.count<Number.MAX_VALUE&&(o.count+=i);else{let r=e._creditDisplayElementPool,s=e._creditDisplayElementPoolIndex;s<r.length?(o=r[s],o.credit=n,o.count=i):(o=new gge(n,i),r.push(o)),++e._creditDisplayElementPoolIndex,t.set(n.id,o)}}dr.prototype.addCreditToNextFrame=function(e){if(e.isIon()){l(this._defaultCredit)||(this._defaultCredit=Zt.clone(Tge())),this._currentCesiumCredit=this._defaultCredit;return}let t;e.showOnScreen?t=this._currentFrameCredits.screenCredits:t=this._currentFrameCredits.lightboxCredits,_ge(this,t,e)};dr.prototype.addStaticCredit=function(e){let t=this._staticCredits;hlt(t,e)||t.push(e)};dr.prototype.removeStaticCredit=function(e){let t=this._staticCredits,n=t.indexOf(e);n!==-1&&t.splice(n,1)};dr.prototype.showLightbox=function(){this._lightbox.style.display=\"block\",this._expanded=!0};dr.prototype.hideLightbox=function(){this._lightbox.style.display=\"none\",this._expanded=!1};dr.prototype.update=function(){this._expanded&&plt(this)};dr.prototype.beginFrame=function(){let e=this._currentFrameCredits;this._creditDisplayElementPoolIndex=0;let t=e.screenCredits,n=e.lightboxCredits;t.removeAll(),n.removeAll();let i=this._staticCredits;for(let o=0;o<i.length;++o){let r=i[o],s=r.showOnScreen?t:n;r.isIon()&&Zt.equals(dr.cesiumCredit,this._cesiumCredit)||_ge(this,s,r,Number.MAX_VALUE)}Zt.equals(dr.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=Zt.clone(dr.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit};dr.prototype.endFrame=function(){let e=this._currentFrameCredits.screenCredits.values;bge(this._screenContainer,e,this._delimiter,void 0);let t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?\"inline\":\"none\",bge(this._creditList,t,void 0,\"li\"),flt(this)};dr.prototype.destroy=function(){return this._lightbox.removeEventListener(\"click\",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),me(this)};dr.prototype.isDestroyed=function(){return!1};dr._cesiumCredit=void 0;dr._cesiumCreditInitialized=!1;var AD;function Tge(){if(!l(AD)){let e=on(\"Assets/Images/ion-credit.png\");e.indexOf(\"http://\")!==0&&e.indexOf(\"https://\")!==0&&e.indexOf(\"data:\")!==0&&(e=new yge.default(e).path()),AD=new Zt(`<a href=\"https://cesium.com/\" target=\"_blank\"><img src=\"${e}\" title=\"Cesium ion\"/></a>`,!0)}return dr._cesiumCreditInitialized||(dr._cesiumCredit=AD,dr._cesiumCreditInitialized=!0),AD}Object.defineProperties(dr,{cesiumCredit:{get:function(){return Tge(),dr._cesiumCredit},set:function(e){dr._cesiumCredit=e,dr._cesiumCreditInitialized=!0}}});dr.CreditDisplayElement=gge;var ww=dr;var AGi=T(S(),1);var iGi=T(S(),1);var MD=0,ylt=1;function TT(e){let t=e.frustum,n=e.orientation,i=e.origin,o=g(e.vertexFormat,Pe.DEFAULT),r=g(e._drawNearPlane,!0),s,a;t instanceof _i?(s=MD,a=_i.packedLength):t instanceof rn&&(s=ylt,a=rn.packedLength),this._frustumType=s,this._frustum=t.clone(),this._origin=h.clone(i),this._orientation=Fe.clone(n),this._drawNearPlane=r,this._vertexFormat=o,this._workerName=\"createFrustumGeometry\",this.packedLength=2+a+h.packedLength+Fe.packedLength+Pe.packedLength}TT.pack=function(e,t,n){n=g(n,0);let i=e._frustumType,o=e._frustum;return t[n++]=i,i===MD?(_i.pack(o,t,n),n+=_i.packedLength):(rn.pack(o,t,n),n+=rn.packedLength),h.pack(e._origin,t,n),n+=h.packedLength,Fe.pack(e._orientation,t,n),n+=Fe.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n]=e._drawNearPlane?1:0,t};var glt=new _i,xlt=new rn,_lt=new Fe,Tlt=new h,Slt=new Pe;TT.unpack=function(e,t,n){t=g(t,0);let i=e[t++],o;i===MD?(o=_i.unpack(e,t,glt),t+=_i.packedLength):(o=rn.unpack(e,t,xlt),t+=rn.packedLength);let r=h.unpack(e,t,Tlt);t+=h.packedLength;let s=Fe.unpack(e,t,_lt);t+=Fe.packedLength;let a=Pe.unpack(e,t,Slt);t+=Pe.packedLength;let c=e[t]===1;if(!l(n))return new TT({frustum:o,origin:r,orientation:s,vertexFormat:a,_drawNearPlane:c});let d=i===n._frustumType?n._frustum:void 0;return n._frustum=o.clone(d),n._frustumType=i,n._origin=h.clone(r,n._origin),n._orientation=Fe.clone(s,n._orientation),n._vertexFormat=Pe.clone(a,n._vertexFormat),n._drawNearPlane=c,n};function UV(e,t,n,i,o,r,s,a){let c=e/3*2;for(let d=0;d<4;++d)l(t)&&(t[e]=r.x,t[e+1]=r.y,t[e+2]=r.z),l(n)&&(n[e]=s.x,n[e+1]=s.y,n[e+2]=s.z),l(i)&&(i[e]=a.x,i[e+1]=a.y,i[e+2]=a.z),e+=3;o[c]=0,o[c+1]=0,o[c+2]=1,o[c+3]=0,o[c+4]=1,o[c+5]=1,o[c+6]=0,o[c+7]=1}var Clt=new $,Vlt=new M,ij=new M,Sge=new h,Cge=new h,Vge=new h,Llt=new h,Zlt=new h,Rlt=new h,yg=new Array(3),Fw=new Array(4);Fw[0]=new se(-1,-1,1,1);Fw[1]=new se(1,-1,1,1);Fw[2]=new se(1,1,1,1);Fw[3]=new se(-1,1,1,1);var Lge=new Array(4);for(let e=0;e<4;++e)Lge[e]=new se;TT._computeNearFarPlanes=function(e,t,n,i,o,r,s,a){let c=$.fromQuaternion(t,Clt),d=g(r,Sge),u=g(s,Cge),m=g(a,Vge);d=$.getColumn(c,0,d),u=$.getColumn(c,1,u),m=$.getColumn(c,2,m),h.normalize(d,d),h.normalize(u,u),h.normalize(m,m),h.negate(d,d);let p=M.computeView(e,m,u,d,Vlt),b,f,x=i.projectionMatrix;if(n===MD){let _=M.multiply(x,p,ij);f=M.inverse(_,ij)}else b=M.inverseTransformation(p,ij);l(f)?(yg[0]=i.near,yg[1]=i.far):(yg[0]=0,yg[1]=i.near,yg[2]=i.far);for(let _=0;_<2;++_)for(let C=0;C<4;++C){let V=se.clone(Fw[C],Lge[C]);if(l(f)){V=M.multiplyByVector(f,V,V);let L=1/V.w;h.multiplyByScalar(V,L,V),h.subtract(V,e,V),h.normalize(V,V);let R=h.dot(m,V);h.multiplyByScalar(V,yg[_]/R,V),h.add(V,e,V)}else{let L=i.offCenterFrustum;l(L)&&(i=L);let R=yg[_],G=yg[_+1];V.x=(V.x*(i.right-i.left)+i.left+i.right)*.5,V.y=(V.y*(i.top-i.bottom)+i.bottom+i.top)*.5,V.z=(V.z*(R-G)-R-G)*.5,V.w=1,M.multiplyByVector(b,V,V)}o[12*_+C*3]=V.x,o[12*_+C*3+1]=V.y,o[12*_+C*3+2]=V.z}};TT.createGeometry=function(e){let t=e._frustumType,n=e._frustum,i=e._origin,o=e._orientation,r=e._drawNearPlane,s=e._vertexFormat,a=r?6:5,c=new Float64Array(3*4*6);TT._computeNearFarPlanes(i,o,t,n,c);let d=3*4*2;c[d]=c[3*4],c[d+1]=c[3*4+1],c[d+2]=c[3*4+2],c[d+3]=c[0],c[d+4]=c[1],c[d+5]=c[2],c[d+6]=c[3*3],c[d+7]=c[3*3+1],c[d+8]=c[3*3+2],c[d+9]=c[3*7],c[d+10]=c[3*7+1],c[d+11]=c[3*7+2],d+=3*4,c[d]=c[3*5],c[d+1]=c[3*5+1],c[d+2]=c[3*5+2],c[d+3]=c[3],c[d+4]=c[4],c[d+5]=c[5],c[d+6]=c[0],c[d+7]=c[1],c[d+8]=c[2],c[d+9]=c[3*4],c[d+10]=c[3*4+1],c[d+11]=c[3*4+2],d+=3*4,c[d]=c[3],c[d+1]=c[4],c[d+2]=c[5],c[d+3]=c[3*5],c[d+4]=c[3*5+1],c[d+5]=c[3*5+2],c[d+6]=c[3*6],c[d+7]=c[3*6+1],c[d+8]=c[3*6+2],c[d+9]=c[3*2],c[d+10]=c[3*2+1],c[d+11]=c[3*2+2],d+=3*4,c[d]=c[3*2],c[d+1]=c[3*2+1],c[d+2]=c[3*2+2],c[d+3]=c[3*6],c[d+4]=c[3*6+1],c[d+5]=c[3*6+2],c[d+6]=c[3*7],c[d+7]=c[3*7+1],c[d+8]=c[3*7+2],c[d+9]=c[3*3],c[d+10]=c[3*3+1],c[d+11]=c[3*3+2],r||(c=c.subarray(3*4));let u=new hn({position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:c})});if(l(s.normal)||l(s.tangent)||l(s.bitangent)||l(s.st)){let p=l(s.normal)?new Float32Array(12*a):void 0,b=l(s.tangent)?new Float32Array(3*4*a):void 0,f=l(s.bitangent)?new Float32Array(3*4*a):void 0,x=l(s.st)?new Float32Array(2*4*a):void 0,_=Sge,C=Cge,V=Vge,L=h.negate(_,Llt),R=h.negate(C,Zlt),G=h.negate(V,Rlt);d=0,r&&(UV(d,p,b,f,x,G,_,C),d+=3*4),UV(d,p,b,f,x,V,L,C),d+=3*4,UV(d,p,b,f,x,L,G,C),d+=3*4,UV(d,p,b,f,x,R,G,L),d+=3*4,UV(d,p,b,f,x,_,V,C),d+=3*4,UV(d,p,b,f,x,C,V,L),l(p)&&(u.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:p})),l(b)&&(u.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:b})),l(f)&&(u.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:f})),l(x)&&(u.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:x}))}let m=new Uint16Array(6*a);for(let p=0;p<a;++p){let b=p*6,f=p*4;m[b]=f,m[b+1]=f+1,m[b+2]=f+2,m[b+3]=f,m[b+4]=f+2,m[b+5]=f+3}return new ut({attributes:u,indices:m,primitiveType:we.TRIANGLES,boundingSphere:ce.fromVertices(c)})};var ST=TT;var gGi=T(S(),1);var oj=0,Glt=1;function Aw(e){let t=e.frustum,n=e.orientation,i=e.origin,o=g(e._drawNearPlane,!0),r,s;t instanceof _i?(r=oj,s=_i.packedLength):t instanceof rn&&(r=Glt,s=rn.packedLength),this._frustumType=r,this._frustum=t.clone(),this._origin=h.clone(i),this._orientation=Fe.clone(n),this._drawNearPlane=o,this._workerName=\"createFrustumOutlineGeometry\",this.packedLength=2+s+h.packedLength+Fe.packedLength}Aw.pack=function(e,t,n){n=g(n,0);let i=e._frustumType,o=e._frustum;return t[n++]=i,i===oj?(_i.pack(o,t,n),n+=_i.packedLength):(rn.pack(o,t,n),n+=rn.packedLength),h.pack(e._origin,t,n),n+=h.packedLength,Fe.pack(e._orientation,t,n),n+=Fe.packedLength,t[n]=e._drawNearPlane?1:0,t};var Elt=new _i,Xlt=new rn,Ilt=new Fe,Wlt=new h;Aw.unpack=function(e,t,n){t=g(t,0);let i=e[t++],o;i===oj?(o=_i.unpack(e,t,Elt),t+=_i.packedLength):(o=rn.unpack(e,t,Xlt),t+=rn.packedLength);let r=h.unpack(e,t,Wlt);t+=h.packedLength;let s=Fe.unpack(e,t,Ilt);t+=Fe.packedLength;let a=e[t]===1;if(!l(n))return new Aw({frustum:o,origin:r,orientation:s,_drawNearPlane:a});let c=i===n._frustumType?n._frustum:void 0;return n._frustum=o.clone(c),n._frustumType=i,n._origin=h.clone(r,n._origin),n._orientation=Fe.clone(s,n._orientation),n._drawNearPlane=a,n};Aw.createGeometry=function(e){let t=e._frustumType,n=e._frustum,i=e._origin,o=e._orientation,r=e._drawNearPlane,s=new Float64Array(3*4*2);ST._computeNearFarPlanes(i,o,t,n,s);let a=new hn({position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:s})}),c,d,u=r?2:1,m=new Uint16Array(8*(u+1)),p=r?0:1;for(;p<2;++p)c=r?p*8:0,d=p*4,m[c]=d,m[c+1]=d+1,m[c+2]=d+1,m[c+3]=d+2,m[c+4]=d+2,m[c+5]=d+3,m[c+6]=d+3,m[c+7]=d;for(p=0;p<2;++p)c=(u+p)*8,d=p*4,m[c]=d,m[c+1]=d+4,m[c+2]=d+1,m[c+3]=d+5,m[c+4]=d+2,m[c+5]=d+6,m[c+6]=d+3,m[c+7]=d+7;return new ut({attributes:a,indices:m,primitiveType:we.LINES,boundingSphere:ce.fromVertices(s)})};var Mw=Aw;function ND(e){e=g(e,g.EMPTY_OBJECT),this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=g(e.color,O.CYAN),this._updateOnChange=g(e.updateOnChange,!0),this.show=g(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}var Plt=new h,vlt=new $,wlt=new Fe,Flt=new _i,Alt=new ol,Mlt=new rn,Nlt=new Vr,klt=new O,Ult=[1,1e5];ND.prototype.update=function(e){if(!this.show)return;let t=this._planesPrimitives,n=this._outlinePrimitives,i,o;if(this._updateOnChange){for(o=t.length,i=0;i<o;++i)n[i]=n[i]&&n[i].destroy(),t[i]=t[i]&&t[i].destroy();t.length=0,n.length=0}if(t.length===0){let r=this._camera,s=r.frustum,a;s instanceof _i?a=Flt:s instanceof ol?a=Alt:s instanceof rn?a=Mlt:a=Nlt,a=s.clone(a);let c,d=this._frustumSplits;!l(d)||d.length<=1?(d=Ult,d[0]=this._camera.frustum.near,d[1]=this._camera.frustum.far,c=1):c=d.length-1;let u=r.positionWC,m=r.directionWC,p=r.upWC,b=r.rightWC;b=h.negate(b,Plt);let f=vlt;$.setColumn(f,0,b,f),$.setColumn(f,1,p,f),$.setColumn(f,2,m,f);let x=Fe.fromRotationMatrix(f,wlt);for(t.length=n.length=c,i=0;i<c;++i)a.near=d[i],a.far=d[i+1],t[i]=new Rn({geometryInstances:new Vt({geometry:new ST({origin:u,orientation:x,frustum:a,_drawNearPlane:i===0}),attributes:{color:Ot.fromColor(O.fromAlpha(this._color,.1,klt))},id:this.id,pickPrimitive:this}),appearance:new ln({translucent:!0,flat:!0}),asynchronous:!1}),n[i]=new Rn({geometryInstances:new Vt({geometry:new Mw({origin:u,orientation:x,frustum:a,_drawNearPlane:i===0}),attributes:{color:Ot.fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new ln({translucent:!1,flat:!0}),asynchronous:!1})}for(o=t.length,i=0;i<o;++i)n[i].update(e),t[i].update(e)};ND.prototype.isDestroyed=function(){return!1};ND.prototype.destroy=function(){let e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return me(this)};var Yf=ND;var dEi=T(S(),1);var NGi=T(S(),1),Nw=`in vec4 positionEC; void main() { vec3 position; vec3 direction; if (czm_orthographicIn3D == 1.0) { vec2 uv = (gl_FragCoord.xy - czm_viewport.xy) / czm_viewport.zw; vec2 minPlane = vec2(czm_frustumPlanes.z, czm_frustumPlanes.y); // left, bottom vec2 maxPlane = vec2(czm_frustumPlanes.w, czm_frustumPlanes.x); // right, top position = vec3(mix(minPlane, maxPlane, uv), 0.0); direction = vec3(0.0, 0.0, -1.0); } else { position = vec3(0.0); direction = normalize(positionEC.xyz); } czm_ray ray = czm_ray(position, direction); vec3 ellipsoid_center = czm_view[3].xyz; czm_raySegment intersection = czm_rayEllipsoidIntersectionInterval(ray, ellipsoid_center, czm_ellipsoidInverseRadii); if (!czm_isEmpty(intersection)) { out_FragColor = vec4(1.0, 1.0, 0.0, 1.0); } else { discard; } czm_writeLogDepth(); } `;var UGi=T(S(),1),kw=`in vec4 position; out vec4 positionEC; void main() { positionEC = czm_modelView * position; gl_Position = czm_projection * positionEC; czm_vertexLogDepth(); } `;function Dw(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=g(e,0)}var Uw=Ut.supportsTypedArrays()?new Float32Array(12):[],Zge=new h,Rge=new h,rj=new h,Gge=new h,kD=new h;function Dlt(e,t){let n=e.radii,i=t.camera,o,r,s;if(i.frustum instanceof rn)o=h.ZERO,r=i.rightWC,s=i.upWC;else{let m=i.positionWC,p=h.multiplyComponents(e.oneOverRadii,m,Zge),b=h.normalize(p,Rge),f=h.normalize(h.cross(h.UNIT_Z,p,rj),rj),x=h.normalize(h.cross(b,f,Gge),Gge),_=h.magnitude(p),C=Math.sqrt(_*_-1);o=h.multiplyByScalar(b,1/_,Zge);let V=C/_;r=h.multiplyByScalar(f,V,Rge),s=h.multiplyByScalar(x,V,rj)}let a=h.add(o,s,kD);h.subtract(a,r,a),h.multiplyComponents(n,a,a),h.pack(a,Uw,0);let c=h.subtract(o,s,kD);h.subtract(c,r,c),h.multiplyComponents(n,c,c),h.pack(c,Uw,3);let d=h.add(o,s,kD);h.add(d,r,d),h.multiplyComponents(n,d,d),h.pack(d,Uw,6);let u=h.subtract(o,s,kD);return h.add(u,r,u),h.multiplyComponents(n,u,u),h.pack(u,Uw,9),Uw}Dw.prototype.update=function(e){if(this._mode=e.mode,e.mode!==ie.SCENE3D)return;let t=e.context,n=e.mapProjection.ellipsoid.radii,i=new oe(n.x+this._ellipsoidOffset,n.y+this._ellipsoidOffset,n.z+this._ellipsoidOffset),o=e.useLogDepth;if(l(this._command)||(this._rs=Ne.fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new je({renderState:this._rs,boundingVolume:new ce(h.ZERO,i.maximumRadius),pass:Ze.OPAQUE,owner:this})),!l(this._sp)||this._useLogDepth!==o){this._useLogDepth=o;let s=new Ue({sources:[kw]}),a=new Ue({sources:[Nw]});o&&(a.defines.push(\"LOG_DEPTH\"),s.defines.push(\"LOG_DEPTH\")),this._sp=Ht.replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:s,fragmentShaderSource:a,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}let r=Dlt(i,e);if(l(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(r);else{let s=new ut({attributes:{position:new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})},indices:[0,1,2,2,1,3],primitiveType:we.TRIANGLES});this._va=ti.fromGeometry({context:t,geometry:s,attributeLocations:{position:0},bufferUsage:Me.DYNAMIC_DRAW}),this._command.vertexArray=this._va}};Dw.prototype.execute=function(e,t){this._mode===ie.SCENE3D&&this._command.execute(e,t)};Dw.prototype.isDestroyed=function(){return!1};Dw.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()};var Bw=Dw;var bEi=T(S(),1);function Yw(){}var Blt=/\\bgl_FragDepth\\b/,Ylt=/\\bdiscard\\b/;function Olt(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,\"depthOnly\");if(!l(n)){let i=t._attributeLocations,o=t.fragmentShaderSource,r,s=!1,a=o.sources,c=a.length;for(r=0;r<c;++r)if(Blt.test(a[r])||Ylt.test(a[r])){s=!0;break}let d=!1,u=o.defines;for(c=u.length,r=0;r<c;++r)if(u[r]===\"LOG_DEPTH\"){d=!0;break}let m;!s&&!d?(m=`void main() { out_FragColor = vec4(1.0); } `,o=new Ue({sources:[m]})):!s&&d&&(m=`void main() { out_FragColor = vec4(1.0); czm_writeLogDepth(); } `,o=new Ue({defines:[\"LOG_DEPTH\"],sources:[m]})),n=e.shaderCache.createDerivedShaderProgram(t,\"depthOnly\",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:i})}return n}function zlt(e,t){let n=e._depthOnlyRenderStateCache,i=n[t.id];if(!l(i)){let o=Ne.getState(t);o.depthMask=!0,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},i=Ne.fromCache(o),n[t.id]=i}return i}Yw.createDepthOnlyDerivedCommand=function(e,t,n,i){l(i)||(i={});let o,r;return l(i.depthOnlyCommand)&&(o=i.depthOnlyCommand.shaderProgram,r=i.depthOnlyCommand.renderState),i.depthOnlyCommand=je.shallowClone(t,i.depthOnlyCommand),!l(o)||i.shaderProgramId!==t.shaderProgram.id?(i.depthOnlyCommand.shaderProgram=Olt(n,t.shaderProgram),i.depthOnlyCommand.renderState=zlt(e,t.renderState),i.shaderProgramId=t.shaderProgram.id):(i.depthOnlyCommand.shaderProgram=o,i.depthOnlyCommand.renderState=r),i};var Hlt=/\\s+czm_writeLogDepth\\(/,Klt=/\\s+czm_vertexLogDepth\\(/;function Jlt(e,t){if(t.fragmentShaderSource.defines.indexOf(\"LOG_DEPTH_READ_ONLY\")>=0)return t;let i=e.shaderCache.getDerivedShaderProgram(t,\"logDepth\");if(!l(i)){let o=t._attributeLocations,r=t.vertexShaderSource.clone(),s=t.fragmentShaderSource.clone();r.defines=l(r.defines)?r.defines.slice(0):[],r.defines.push(\"LOG_DEPTH\"),s.defines=l(s.defines)?s.defines.slice(0):[],s.defines.push(\"LOG_DEPTH\");let a,c,d=!1,u=r.sources,m=u.length;for(a=0;a<m;++a)if(Klt.test(u[a])){d=!0;break}if(!d){for(a=0;a<m;++a)u[a]=Ue.replaceMain(u[a],\"czm_log_depth_main\");c=` void main() { czm_log_depth_main(); czm_vertexLogDepth(); } `,u.push(c)}for(u=s.sources,m=u.length,d=!1,a=0;a<m;++a)Hlt.test(u[a])&&(d=!0);s.defines.indexOf(\"LOG_DEPTH_WRITE\")!==-1&&(d=!0);let p=\"\";if(!d){for(a=0;a<m;a++)u[a]=Ue.replaceMain(u[a],\"czm_log_depth_main\");p+=` void main() { czm_log_depth_main(); czm_writeLogDepth(); } `}u.push(p),i=e.shaderCache.createDerivedShaderProgram(t,\"logDepth\",{vertexShaderSource:r,fragmentShaderSource:s,attributeLocations:o})}return i}Yw.createLogDepthCommand=function(e,t,n){l(n)||(n={});let i;return l(n.command)&&(i=n.command.shaderProgram),n.command=je.shallowClone(e,n.command),!l(i)||n.shaderProgramId!==e.shaderProgram.id?(n.command.shaderProgram=Jlt(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id):n.command.shaderProgram=i,n};function Qlt(e,t,n){let i=e.shaderCache.getDerivedShaderProgram(t,\"pick\");if(!l(i)){let o=t._attributeLocations,r=t.fragmentShaderSource,s=r.sources,a=s.length,d=s.some(p=>p.includes(\"out_FragData\"))?\"out_FragData_0\":\"out_FragColor\",u=`void main () { czm_non_pick_main(); if (${d}.a == 0.0) { discard; } ${d} = ${n}; } `,m=new Array(a+1);for(let p=0;p<a;++p)m[p]=Ue.replaceMain(s[p],\"czm_non_pick_main\");m[a]=u,r=new Ue({sources:m,defines:r.defines}),i=e.shaderCache.createDerivedShaderProgram(t,\"pick\",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:r,attributeLocations:o})}return i}function jlt(e,t){let n=e.picking.pickRenderStateCache,i=n[t.id];if(!l(i)){let o=Ne.getState(t);o.blending.enabled=!1,o.depthMask=!0,i=Ne.fromCache(o),n[t.id]=i}return i}Yw.createPickDerivedCommand=function(e,t,n,i){l(i)||(i={});let o,r;return l(i.pickCommand)&&(o=i.pickCommand.shaderProgram,r=i.pickCommand.renderState),i.pickCommand=je.shallowClone(t,i.pickCommand),!l(o)||i.shaderProgramId!==t.shaderProgram.id?(i.pickCommand.shaderProgram=Qlt(n,t.shaderProgram,t.pickId),i.pickCommand.renderState=jlt(e,t.renderState),i.shaderProgramId=t.shaderProgram.id):(i.pickCommand.shaderProgram=o,i.pickCommand.renderState=r),i};function qlt(e,t){let n=e.shaderCache.getDerivedShaderProgram(t,\"HDR\");if(!l(n)){let i=t._attributeLocations,o=t.vertexShaderSource.clone(),r=t.fragmentShaderSource.clone();o.defines=l(o.defines)?o.defines.slice(0):[],o.defines.push(\"HDR\"),r.defines=l(r.defines)?r.defines.slice(0):[],r.defines.push(\"HDR\"),n=e.shaderCache.createDerivedShaderProgram(t,\"HDR\",{vertexShaderSource:o,fragmentShaderSource:r,attributeLocations:i})}return n}Yw.createHdrCommand=function(e,t,n){l(n)||(n={});let i;return l(n.command)&&(i=n.command.shaderProgram),n.command=je.shallowClone(e,n.command),!l(i)||n.shaderProgramId!==e.shaderProgram.id?(n.command.shaderProgram=qlt(t,e.shaderProgram),n.shaderProgramId=e.shaderProgram.id):n.command.shaderProgram=i,n};var Dd=Yw;var CEi=T(S(),1);function UD(e){this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;let t=this;function n(i){let o=i.alpha;if(!l(o)){t._alpha=void 0,t._beta=void 0,t._gamma=void 0;return}t._alpha=P.toRadians(o),t._beta=P.toRadians(i.beta),t._gamma=P.toRadians(i.gamma)}window.addEventListener(\"deviceorientation\",n,!1),this._removeListener=function(){window.removeEventListener(\"deviceorientation\",n,!1)}}var $lt=new Fe,Ege=new Fe,edt=new $;function tdt(e,t,n,i){let o=e.direction,r=e.right,s=e.up,a=Fe.fromAxisAngle(o,n,Ege),c=Fe.fromAxisAngle(r,i,$lt),d=Fe.multiply(c,a,c),u=Fe.fromAxisAngle(s,t,Ege);Fe.multiply(u,d,d);let m=$.fromQuaternion(d,edt);$.multiplyByVector(m,r,r),$.multiplyByVector(m,s,s),$.multiplyByVector(m,o,o)}UD.prototype.update=function(){if(!l(this._alpha))return;l(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);let e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,n=this._lastGamma-this._gamma;tdt(this._scene.camera,-e,t,n),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma};UD.prototype.isDestroyed=function(){return!1};UD.prototype.destroy=function(){return this._removeListener(),me(this)};var Ow=UD;var EEi=T(S(),1);function Xge(){this.enabled=!0,this.renderable=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}var DD=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],Of=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7];for(let e=0;e<Of.length;++e)Of[e]*=1e6;var Ige=Of[1],sj=Of[Of.length-1];for(let e=0;e<Of.length;++e)Of[e]=(Of[e]-sj)/(Ige-sj);var fa=0;function ndt(e){let t=DD,n=t.length;if(e<t[0])return fa=0,fa;if(e>t[n-1])return fa=n-2,fa;if(e>=t[fa]){if(fa+1<n&&e<t[fa+1])return fa;if(fa+2<n&&e<t[fa+2])return++fa,fa}else if(fa-1>=0&&e>=t[fa-1])return--fa,fa;let i;for(i=0;i<n-2&&!(e>=t[i]&&e<t[i+1]);++i);return fa=i,fa}var idt=new h;Xge.prototype.update=function(e){if(!(e.fog.enabled=this.enabled))return;e.fog.renderable=this.renderable;let n=e.camera,i=n.positionCartographic;if(!l(i)||i.height>8e5||e.mode!==ie.SCENE3D){e.fog.enabled=!1,e.fog.density=0;return}let o=i.height,r=ndt(o),s=P.clamp((o-DD[r])/(DD[r+1]-DD[r]),0,1),a=P.lerp(Of[r],Of[r+1],s),c=this.density*1e6,d=c/Ige*sj;a=a*(c-d)*1e-6;let u=h.normalize(n.positionWC,idt),m=Math.abs(h.dot(n.directionWC,u));a*=1-m,e.fog.density=a,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness};var zw=Xge;var PEi=T(S(),1);function odt(e,t,n){this.context=e,this.commandList=[],this.shadowMaps=[],this.brdfLutGenerator=void 0,this.environmentMap=void 0,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this.specularEnvironmentMapsMaximumLOD=void 0,this.mode=ie.SCENE3D,this.morphTime=ie.getMorphTime(ie.SCENE3D),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.jobScheduler=n,this.mapProjection=void 0,this.camera=void 0,this.cameraUnderground=!1,this.globeTranslucencyState=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.maximumScreenSpaceError=void 0,this.pixelRatio=1,this.passes={render:!1,pick:!1,pickVoxel:!1,depth:!1,postProcess:!1,offscreen:!1,uranusDepth:!1},this.creditDisplay=t,this.afterRender=[],this.scene3DOnly=!1,this.fog={enabled:!1,renderable:!1,density:void 0,sse:void 0,minimumBrightness:void 0},this.atmosphere=void 0,this.verticalExaggeration=1,this.verticalExaggerationRelativeHeight=0,this.shadowState={shadowsEnabled:!0,shadowMaps:[],lightShadowMaps:[],nearPlane:1,farPlane:5e3,closestObjectSize:1e3,lastDirtyTime:0,outOfView:!0},this.splitPosition=0,this.splitMode=Xb.LEFT_RIGHT,this.frustumSplits=[],this.backgroundColor=void 0,this.light=void 0,this.minimumDisableDepthTestDistance=void 0,this.invertClassification=!1,this.invertClassificationColor=void 0,this.useLogDepth=!1,this.tilesetPassState=void 0,this.minimumTerrainHeight=0}var Hw=odt;var HEi=T(S(),1);var pa={OPAQUE_FRONT_FACE:0,OPAQUE_BACK_FACE:1,DEPTH_ONLY_FRONT_FACE:2,DEPTH_ONLY_BACK_FACE:3,DEPTH_ONLY_FRONT_AND_BACK_FACE:4,TRANSLUCENT_FRONT_FACE:5,TRANSLUCENT_BACK_FACE:6,TRANSLUCENT_FRONT_FACE_MANUAL_DEPTH_TEST:7,TRANSLUCENT_BACK_FACE_MANUAL_DEPTH_TEST:8,PICK_FRONT_FACE:9,PICK_BACK_FACE:10,DERIVED_COMMANDS_MAXIMUM_LENGTH:11},CT=pa.DERIVED_COMMANDS_MAXIMUM_LENGTH,Uge=[\"opaqueFrontFaceCommand\",\"opaqueBackFaceCommand\",\"depthOnlyFrontFaceCommand\",\"depthOnlyBackFaceCommand\",\"depthOnlyFrontAndBackFaceCommand\",\"translucentFrontFaceCommand\",\"translucentBackFaceCommand\",\"translucentFrontFaceManualDepthTestCommand\",\"translucentBackFaceManualDepthTestCommand\",\"pickFrontFaceCommand\",\"pickBackFaceCommand\"];function VT(){this._frontFaceAlphaByDistance=new At(0,1,0,1),this._backFaceAlphaByDistance=new At(0,1,0,1),this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._requiresManualDepthTest=!1,this._sunVisibleThroughGlobe=!1,this._environmentVisible=!1,this._useDepthPlane=!1,this._numberOfTextureUniforms=0,this._globeTranslucencyFramebuffer=void 0,this._rectangle=le.clone(le.MAX_VALUE),this._derivedCommandKey=0,this._derivedCommandsDirty=!1,this._derivedCommandPacks=void 0,this._derivedCommandTypes=new Array(CT),this._derivedBlendCommandTypes=new Array(CT),this._derivedPickCommandTypes=new Array(CT),this._derivedCommandTypesToUpdate=new Array(CT),this._derivedCommandsLength=0,this._derivedBlendCommandsLength=0,this._derivedPickCommandsLength=0,this._derivedCommandsToUpdateLength=0}Object.defineProperties(VT.prototype,{frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance}},translucent:{get:function(){return this._frontFaceTranslucent}},sunVisibleThroughGlobe:{get:function(){return this._sunVisibleThroughGlobe}},environmentVisible:{get:function(){return this._environmentVisible}},useDepthPlane:{get:function(){return this._useDepthPlane}},numberOfTextureUniforms:{get:function(){return this._numberOfTextureUniforms}},rectangle:{get:function(){return this._rectangle}}});VT.prototype.update=function(e){let t=e.globe;if(!l(t)||!t.show){this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._sunVisibleThroughGlobe=!0,this._environmentVisible=!0,this._useDepthPlane=!1;return}this._frontFaceAlphaByDistance=Wge(t.translucency.enabled,t.translucency.frontFaceAlpha,t.translucency.frontFaceAlphaByDistance,this._frontFaceAlphaByDistance),this._backFaceAlphaByDistance=Wge(t.translucency.enabled,t.translucency.backFaceAlpha,t.translucency.backFaceAlphaByDistance,this._backFaceAlphaByDistance),this._frontFaceTranslucent=Pge(t.translucency.enabled,this._frontFaceAlphaByDistance,t),this._backFaceTranslucent=Pge(t.translucency.enabled,this._backFaceAlphaByDistance,t),this._requiresManualDepthTest=cdt(this,e,t),this._sunVisibleThroughGlobe=rdt(this,e),this._environmentVisible=sdt(this,e),this._useDepthPlane=adt(this,e),this._numberOfTextureUniforms=ldt(this),this._rectangle=le.clone(t.translucency.rectangle,this._rectangle),ddt(this,e)};function Wge(e,t,n,i){return e?l(n)?(At.clone(n,i),i.nearValue*=t,i.farValue*=t,i):(i.nearValue=t,i.farValue=t,i):(i.nearValue=1,i.farValue=1,i)}function Pge(e,t,n){return e&&(n.baseColor.alpha<1||t.nearValue<1||t.farValue<1)}function rdt(e,t){let n=e._frontFaceTranslucent,i=e._backFaceTranslucent;return n&&(t.cameraUnderground||i)}function sdt(e,t){return!t.cameraUnderground||e._frontFaceTranslucent}function adt(e,t){return!t.cameraUnderground&&!e._frontFaceTranslucent}function cdt(e,t,n){return e._frontFaceTranslucent&&!e._backFaceTranslucent&&!n.depthTestAgainstTerrain&&t.mode!==ie.SCENE2D&&t.context.depthTexture}function ldt(e){let t=0;return e._frontFaceTranslucent&&++t,e._requiresManualDepthTest&&++t,t}function ddt(e,t){e._derivedCommandsLength=aj(e,t,!1,!1,e._derivedCommandTypes),e._derivedBlendCommandsLength=aj(e,t,!0,!1,e._derivedBlendCommandTypes),e._derivedPickCommandsLength=aj(e,t,!1,!0,e._derivedPickCommandTypes);let n,i=0;for(n=0;n<e._derivedCommandsLength;++n)i|=1<<e._derivedCommandTypes[n];for(n=0;n<e._derivedBlendCommandsLength;++n)i|=1<<e._derivedBlendCommandTypes[n];for(n=0;n<e._derivedPickCommandsLength;++n)i|=1<<e._derivedPickCommandTypes[n];let o=0;for(n=0;n<CT;++n)(i&1<<n)>0&&(e._derivedCommandTypesToUpdate[o++]=n);e._derivedCommandsToUpdateLength=o;let r=i!==e._derivedCommandKey;e._derivedCommandKey=i,e._derivedCommandsDirty=r,!l(e._derivedCommandPacks)&&e._frontFaceTranslucent&&(e._derivedCommandPacks=Ldt())}function aj(e,t,n,i,o){let r=0,s=e._frontFaceTranslucent,a=e._backFaceTranslucent;if(!s)return r;let c=t.cameraUnderground,d=e._requiresManualDepthTest,u=i?pa.PICK_FRONT_FACE:d?pa.TRANSLUCENT_FRONT_FACE_MANUAL_DEPTH_TEST:pa.TRANSLUCENT_FRONT_FACE,m=i?pa.PICK_BACK_FACE:d?pa.TRANSLUCENT_BACK_FACE_MANUAL_DEPTH_TEST:pa.TRANSLUCENT_BACK_FACE;return t.mode===ie.SCENE2D?(o[r++]=pa.DEPTH_ONLY_FRONT_FACE,o[r++]=u,r):(a?(n||(o[r++]=pa.DEPTH_ONLY_FRONT_AND_BACK_FACE),c?(o[r++]=u,o[r++]=m):(o[r++]=m,o[r++]=u)):c?(n||(o[r++]=pa.DEPTH_ONLY_BACK_FACE),o[r++]=pa.OPAQUE_FRONT_FACE,o[r++]=m):(n||(o[r++]=pa.DEPTH_ONLY_FRONT_FACE),o[r++]=pa.OPAQUE_BACK_FACE,o[r++]=u),r)}function tm(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function vge(e,t){return e.indexOf(t)>-1}function udt(e,t){tm(e.defines,\"TRANSLUCENT\"),tm(t.defines,\"TRANSLUCENT\")}function mdt(e,t){tm(e.defines,\"GROUND_ATMOSPHERE\"),tm(t.defines,\"GROUND_ATMOSPHERE\"),tm(e.defines,\"FOG\"),tm(t.defines,\"FOG\"),tm(e.defines,\"TRANSLUCENT\"),tm(t.defines,\"TRANSLUCENT\")}function cj(e,t){if(vge(t.defines,\"TILE_LIMIT_RECTANGLE\")||vge(t.defines,\"ENABLE_CLIPPING_PLANES\"))return;let n=`void main() { out_FragColor = vec4(1.0); } `;t.sources=[n]}function lj(e,t){let n=t.sources,i=n.length;for(let r=0;r<i;++r)n[r]=Ue.replaceMain(n[r],\"czm_globe_translucency_main\");n.push(` uniform sampler2D u_classificationTexture; void main() { vec2 st = gl_FragCoord.xy / czm_viewport.zw; #ifdef MANUAL_DEPTH_TEST float logDepthOrDepth = czm_unpackDepth(texture(czm_globeDepthTexture, st)); if (logDepthOrDepth != 0.0) { vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); float depthEC = eyeCoordinate.z / eyeCoordinate.w; if (v_positionEC.z < depthEC) { discard; } } #endif czm_globe_translucency_main(); vec4 classificationColor = texture(u_classificationTexture, st); if (classificationColor.a > 0.0) { // Reverse premultiplication process to get the correct composited result of the classification primitives classificationColor.rgb /= classificationColor.a; } out_FragColor = classificationColor * vec4(classificationColor.aaa, 1.0) + out_FragColor * (1.0 - classificationColor.a); } `)}function Dge(e,t){lj(e,t),tm(e.defines,\"GROUND_ATMOSPHERE\"),tm(t.defines,\"GROUND_ATMOSPHERE\"),tm(e.defines,\"FOG\"),tm(t.defines,\"FOG\")}function hdt(e,t){lj(e,t),e.defines.push(\"GENERATE_POSITION\"),t.defines.push(\"MANUAL_DEPTH_TEST\")}function fdt(e,t){Dge(e,t),e.defines.push(\"GENERATE_POSITION\"),t.defines.push(\"MANUAL_DEPTH_TEST\")}function wge(e,t){let n=`uniform sampler2D u_classificationTexture; void main() { vec2 st = gl_FragCoord.xy"
}