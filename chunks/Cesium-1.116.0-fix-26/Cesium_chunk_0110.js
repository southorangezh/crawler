{
  "metadata": {
    "source_file": "Cesium-1.116.0-fix-26\\Cesium.js",
    "chunk_index": 110,
    "total_chunks": 194,
    "chunk_size": 58521,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.713Z"
  },
  "content": "h8n=T(S(),1);var Njn=T(S(),1);var l8e=new h,d8e=new h,u8e=new h,m8e=new h,h8e=new h,f8e=new h(1,1,1),ome=Math.cos,rme=Math.sin;function F0(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.radii,f8e),n=g(e.innerRadii,t),i=g(e.minimumClock,0),o=g(e.maximumClock,P.TWO_PI),r=g(e.minimumCone,0),s=g(e.maximumCone,P.PI),a=Math.round(g(e.stackPartitions,64)),c=Math.round(g(e.slicePartitions,64)),d=g(e.vertexFormat,Pe.DEFAULT);this._radii=h.clone(t),this._innerRadii=h.clone(n),this._minimumClock=i,this._maximumClock=o,this._minimumCone=r,this._maximumCone=s,this._stackPartitions=a,this._slicePartitions=c,this._vertexFormat=Pe.clone(d),this._offsetAttribute=e.offsetAttribute,this._workerName=\"createEllipsoidGeometry\"}F0.packedLength=2*h.packedLength+Pe.packedLength+7;F0.pack=function(e,t,n){return n=g(n,0),h.pack(e._radii,t,n),n+=h.packedLength,h.pack(e._innerRadii,t,n),n+=h.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n++]=e._minimumClock,t[n++]=e._maximumClock,t[n++]=e._minimumCone,t[n++]=e._maximumCone,t[n++]=e._stackPartitions,t[n++]=e._slicePartitions,t[n]=g(e._offsetAttribute,-1),t};var sme=new h,ame=new h,cme=new Pe,Uy={radii:sme,innerRadii:ame,vertexFormat:cme,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,offsetAttribute:void 0};F0.unpack=function(e,t,n){t=g(t,0);let i=h.unpack(e,t,sme);t+=h.packedLength;let o=h.unpack(e,t,ame);t+=h.packedLength;let r=Pe.unpack(e,t,cme);t+=Pe.packedLength;let s=e[t++],a=e[t++],c=e[t++],d=e[t++],u=e[t++],m=e[t++],p=e[t];return l(n)?(n._radii=h.clone(i,n._radii),n._innerRadii=h.clone(o,n._innerRadii),n._vertexFormat=Pe.clone(r,n._vertexFormat),n._minimumClock=s,n._maximumClock=a,n._minimumCone=c,n._maximumCone=d,n._stackPartitions=u,n._slicePartitions=m,n._offsetAttribute=p===-1?void 0:p,n):(Uy.minimumClock=s,Uy.maximumClock=a,Uy.minimumCone=c,Uy.maximumCone=d,Uy.stackPartitions=u,Uy.slicePartitions=m,Uy.offsetAttribute=p===-1?void 0:p,new F0(Uy))};F0.createGeometry=function(e){let t=e._radii;if(t.x<=0||t.y<=0||t.z<=0)return;let n=e._innerRadii;if(n.x<=0||n.y<=0||n.z<=0)return;let i=e._minimumClock,o=e._maximumClock,r=e._minimumCone,s=e._maximumCone,a=e._vertexFormat,c=e._slicePartitions+1,d=e._stackPartitions+1;c=Math.round(c*Math.abs(o-i)/P.TWO_PI),d=Math.round(d*Math.abs(s-r)/P.PI),c<2&&(c=2),d<2&&(d=2);let u,m,p=0,b=[r],f=[i];for(u=0;u<d;u++)b.push(r+u*(s-r)/(d-1));for(b.push(s),m=0;m<c;m++)f.push(i+m*(o-i)/(c-1));f.push(o);let x=b.length,_=f.length,C=0,V=1,L=n.x!==t.x||n.y!==t.y||n.z!==t.z,R=!1,G=!1,X=!1;L&&(V=2,r>0&&(R=!0,C+=c-1),s<Math.PI&&(G=!0,C+=c-1),(o-i)%P.TWO_PI?(X=!0,C+=(d-1)*2+1):C+=1);let v=_*x*V,W=new Float64Array(v*3),F=new Array(v).fill(!1),A=new Array(v).fill(!1),y=c*d*V,Z=6*(y+C+1-(c+d)*V),E=Ae.createTypedArray(y,Z),I=a.normal?new Float32Array(v*3):void 0,w=a.tangent?new Float32Array(v*3):void 0,k=a.bitangent?new Float32Array(v*3):void 0,B=a.st?new Float32Array(v*2):void 0,U=new Array(x),Y=new Array(x);for(u=0;u<x;u++)U[u]=rme(b[u]),Y[u]=ome(b[u]);let N=new Array(_),J=new Array(_);for(m=0;m<_;m++)J[m]=ome(f[m]),N[m]=rme(f[m]);for(u=0;u<x;u++)for(m=0;m<_;m++)W[p++]=t.x*U[u]*J[m],W[p++]=t.y*U[u]*N[m],W[p++]=t.z*Y[u];let z=v/2;if(L)for(u=0;u<x;u++)for(m=0;m<_;m++)W[p++]=n.x*U[u]*J[m],W[p++]=n.y*U[u]*N[m],W[p++]=n.z*Y[u],F[z]=!0,u>0&&u!==x-1&&m!==0&&m!==_-1&&(A[z]=!0),z++;p=0;let ee,H;for(u=1;u<x-2;u++)for(ee=u*_,H=(u+1)*_,m=1;m<_-2;m++)E[p++]=H+m,E[p++]=H+m+1,E[p++]=ee+m+1,E[p++]=H+m,E[p++]=ee+m+1,E[p++]=ee+m;if(L){let yt=x*_;for(u=1;u<x-2;u++)for(ee=yt+u*_,H=yt+(u+1)*_,m=1;m<_-2;m++)E[p++]=H+m,E[p++]=ee+m,E[p++]=ee+m+1,E[p++]=H+m,E[p++]=ee+m+1,E[p++]=H+m+1}let j,q;if(L){if(R)for(q=x*_,u=1;u<_-2;u++)E[p++]=u,E[p++]=u+1,E[p++]=q+u+1,E[p++]=u,E[p++]=q+u+1,E[p++]=q+u;if(G)for(j=x*_-_,q=x*_*V-_,u=1;u<_-2;u++)E[p++]=j+u+1,E[p++]=j+u,E[p++]=q+u,E[p++]=j+u+1,E[p++]=q+u,E[p++]=q+u+1}if(X){for(u=1;u<x-2;u++)q=_*x+_*u,j=_*u,E[p++]=q,E[p++]=j+_,E[p++]=j,E[p++]=q,E[p++]=q+_,E[p++]=j+_;for(u=1;u<x-2;u++)q=_*x+_*(u+1)-1,j=_*(u+1)-1,E[p++]=j+_,E[p++]=q,E[p++]=j,E[p++]=j+_,E[p++]=q+_,E[p++]=q}let pe=new hn;a.position&&(pe.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:W}));let _e=0,ae=0,ye=0,Te=0,Le=v/2,Re,ke=oe.fromCartesian3(t),rt=oe.fromCartesian3(n);if(a.st||a.normal||a.tangent||a.bitangent){for(u=0;u<v;u++){Re=F[u]?rt:ke;let yt=h.fromArray(W,u*3,l8e),Dt=Re.geodeticSurfaceNormal(yt,d8e);if(A[u]&&h.negate(Dt,Dt),a.st){let it=D.negate(Dt,h8e);B[_e++]=Math.atan2(it.y,it.x)/P.TWO_PI+.5,B[_e++]=Math.asin(Dt.z)/Math.PI+.5}if(a.normal&&(I[ae++]=Dt.x,I[ae++]=Dt.y,I[ae++]=Dt.z),a.tangent||a.bitangent){let it=u8e,Ie=0,ft;if(F[u]&&(Ie=Le),!R&&u>=Ie&&u<Ie+_*2?ft=h.UNIT_X:ft=h.UNIT_Z,h.cross(ft,Dt,it),h.normalize(it,it),a.tangent&&(w[ye++]=it.x,w[ye++]=it.y,w[ye++]=it.z),a.bitangent){let Ke=h.cross(Dt,it,m8e);h.normalize(Ke,Ke),k[Te++]=Ke.x,k[Te++]=Ke.y,k[Te++]=Ke.z}}}a.st&&(pe.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:B})),a.normal&&(pe.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:I})),a.tangent&&(pe.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:w})),a.bitangent&&(pe.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:k}))}if(l(e._offsetAttribute)){let yt=W.length,Dt=e._offsetAttribute===cn.NONE?0:1,it=new Uint8Array(yt/3).fill(Dt);pe.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:it})}return new ut({attributes:pe,indices:E,primitiveType:we.TRIANGLES,boundingSphere:ce.fromEllipsoid(ke),offsetAttribute:e._offsetAttribute})};var JK;F0.getUnitEllipsoid=function(){return l(JK)||(JK=F0.createGeometry(new F0({radii:new h(1,1,1),vertexFormat:Pe.POSITION_ONLY}))),JK};var Ds=F0;var p8e=new kt(O.WHITE),QK=h.ZERO,jK=new h,b8e=new h,y8e=new h,qK=new O,g8e=new h(1,1,1);function x8e(e){this.id=e,this.vertexFormat=void 0,this.radii=void 0,this.innerRadii=void 0,this.minimumClock=void 0,this.maximumClock=void 0,this.minimumCone=void 0,this.maximumCone=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function Ed(e,t){ii.call(this,{entity:e,scene:t,geometryOptions:new x8e(e),geometryPropertyName:\"ellipsoid\",observedPropertyNames:[\"availability\",\"position\",\"orientation\",\"ellipsoid\"]}),this._onEntityPropertyChanged(e,\"ellipsoid\",e.ellipsoid,void 0)}l(Object.create)&&(Ed.prototype=Object.create(ii.prototype),Ed.prototype.constructor=Ed);Object.defineProperties(Ed.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}});Ed.prototype.createFillGeometryInstance=function(e,t,n){let i=this._entity,o=i.isAvailable(e),r,s=new xn(o&&i.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),a=this._distanceDisplayConditionProperty.getValue(e),c=kn.fromDistanceDisplayCondition(a),d={show:s,distanceDisplayCondition:c,color:void 0,offset:void 0};if(this._materialProperty instanceof kt){let u;l(this._materialProperty.color)&&(this._materialProperty.color.isConstant||o)&&(u=this._materialProperty.color.getValue(e,qK)),l(u)||(u=O.WHITE),r=Ot.fromColor(u),d.color=r}return l(this._options.offsetAttribute)&&(d.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,QK,jK))),new Vt({id:i,geometry:new Ds(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,this._options.radii.z*.5,this._scene.mapProjection.ellipsoid,n),attributes:d})};Ed.prototype.createOutlineGeometryInstance=function(e,t,n){let i=this._entity,o=i.isAvailable(e),r=K.getValueOrDefault(this._outlineColorProperty,e,O.BLACK,qK),s=this._distanceDisplayConditionProperty.getValue(e),a={show:new xn(o&&i.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Ot.fromColor(r),distanceDisplayCondition:kn.fromDistanceDisplayCondition(s),offset:void 0};return l(this._options.offsetAttribute)&&(a.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,QK,jK))),new Vt({id:i,geometry:new xd(this._options),modelMatrix:t?void 0:i.computeModelMatrixForHeightReference(e,i.ellipsoid.heightReference,this._options.radii.z*.5,this._scene.mapProjection.ellipsoid,n),attributes:a})};Ed.prototype._computeCenter=function(e,t){return K.getValueOrUndefined(this._entity.position,e,t)};Ed.prototype._isHidden=function(e,t){return!l(e.position)||!l(t.radii)||ii.prototype._isHidden.call(this,e,t)};Ed.prototype._isDynamic=function(e,t){return!e.position.isConstant||!K.isConstant(e.orientation)||!t.radii.isConstant||!K.isConstant(t.innerRadii)||!K.isConstant(t.stackPartitions)||!K.isConstant(t.slicePartitions)||!K.isConstant(t.outlineWidth)||!K.isConstant(t.minimumClock)||!K.isConstant(t.maximumClock)||!K.isConstant(t.minimumCone)||!K.isConstant(t.maximumCone)||!K.isConstant(t.subdivisions)};Ed.prototype._setStaticOptions=function(e,t){let n=K.getValueOrDefault(t.heightReference,Be.MINIMUM_VALUE,Je.NONE),i=this._options;i.vertexFormat=this._materialProperty instanceof kt?ln.VERTEX_FORMAT:so.MaterialSupport.TEXTURED.vertexFormat,i.radii=t.radii.getValue(Be.MINIMUM_VALUE,i.radii),i.innerRadii=K.getValueOrUndefined(t.innerRadii,i.radii),i.minimumClock=K.getValueOrUndefined(t.minimumClock,Be.MINIMUM_VALUE),i.maximumClock=K.getValueOrUndefined(t.maximumClock,Be.MINIMUM_VALUE),i.minimumCone=K.getValueOrUndefined(t.minimumCone,Be.MINIMUM_VALUE),i.maximumCone=K.getValueOrUndefined(t.maximumCone,Be.MINIMUM_VALUE),i.stackPartitions=K.getValueOrUndefined(t.stackPartitions,Be.MINIMUM_VALUE),i.slicePartitions=K.getValueOrUndefined(t.slicePartitions,Be.MINIMUM_VALUE),i.subdivisions=K.getValueOrUndefined(t.subdivisions,Be.MINIMUM_VALUE),i.offsetAttribute=n!==Je.NONE?cn.ALL:void 0};Ed.prototype._onEntityPropertyChanged=Wp;Ed.DynamicGeometryUpdater=xP;function xP(e,t,n){ni.call(this,e,t,n),this._scene=e._scene,this._modelMatrix=new M,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new h,this._material={}}l(Object.create)&&(xP.prototype=Object.create(ni.prototype),xP.prototype.constructor=xP);xP.prototype.update=function(e){let t=this._entity,n=t.ellipsoid;if(!t.isShowing||!t.isAvailable(e)||!K.getValueOrDefault(n.show,e,!0)){l(this._primitive)&&(this._primitive.show=!1),l(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1);return}let i=K.getValueOrUndefined(n.radii,e,b8e),o=l(i)?t.computeModelMatrixForHeightReference(e,n.heightReference,i.z*.5,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!l(o)||!l(i)){l(this._primitive)&&(this._primitive.show=!1),l(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1);return}let r=K.getValueOrDefault(n.fill,e,!0),s=K.getValueOrDefault(n.outline,e,!1),a=K.getValueOrClonedDefault(n.outlineColor,e,O.BLACK,qK),c=Oo.getValue(e,g(n.material,p8e),this._material),d=K.getValueOrUndefined(n.innerRadii,e,y8e),u=K.getValueOrUndefined(n.minimumClock,e),m=K.getValueOrUndefined(n.maximumClock,e),p=K.getValueOrUndefined(n.minimumCone,e),b=K.getValueOrUndefined(n.maximumCone,e),f=K.getValueOrUndefined(n.stackPartitions,e),x=K.getValueOrUndefined(n.slicePartitions,e),_=K.getValueOrUndefined(n.subdivisions,e),C=K.getValueOrDefault(n.outlineWidth,e,1),V=K.getValueOrDefault(n.heightReference,e,Je.NONE),L=V!==Je.NONE?cn.ALL:void 0,R=this._scene.mode,G=R===ie.SCENE3D&&V===Je.NONE,X=this._options,v=this._geometryUpdater.shadowsProperty.getValue(e),F=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),A=K.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,QK,jK);if(!G||this._lastSceneMode!==R||!l(this._primitive)||X.stackPartitions!==f||X.slicePartitions!==x||l(d)&&!h.equals(X.innerRadii!==d)||X.minimumClock!==u||X.maximumClock!==m||X.minimumCone!==p||X.maximumCone!==b||X.subdivisions!==_||this._lastOutlineWidth!==C||X.offsetAttribute!==L){let Z=this._primitives;Z.removeAndDestroy(this._primitive),Z.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=R,this._lastOutlineWidth=C,X.stackPartitions=f,X.slicePartitions=x,X.subdivisions=_,X.offsetAttribute=L,X.radii=h.clone(G?g8e:i,X.radii),l(d)?G?X.innerRadii=h.fromElements(d.x/i.x,d.y/i.y,d.z/i.z,X.innerRadii):X.innerRadii=h.clone(d,X.innerRadii):X.innerRadii=void 0,X.minimumClock=u,X.maximumClock=m,X.minimumCone=p,X.maximumCone=b;let E=new so({material:c,translucent:c.isTranslucent(),closed:!0});X.vertexFormat=E.vertexFormat;let I=this._geometryUpdater.createFillGeometryInstance(e,G,this._modelMatrix);this._primitive=Z.add(new Rn({geometryInstances:I,appearance:E,asynchronous:!1,shadows:v}));let w=this._geometryUpdater.createOutlineGeometryInstance(e,G,this._modelMatrix);this._outlinePrimitive=Z.add(new Rn({geometryInstances:w,appearance:new ln({flat:!0,translucent:w.attributes.color.value[3]!==255,renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(C)}}),asynchronous:!1,shadows:v})),this._lastShow=r,this._lastOutlineShow=s,this._lastOutlineColor=O.clone(a,this._lastOutlineColor),this._lastDistanceDisplayCondition=F,this._lastOffset=h.clone(A,this._lastOffset)}else if(this._primitive.ready){let Z=this._primitive,E=this._outlinePrimitive;Z.show=!0,E.show=!0,Z.appearance.material=c;let I=this._attributes;l(I)||(I=Z.getGeometryInstanceAttributes(t),this._attributes=I),r!==this._lastShow&&(I.show=xn.toValue(r,I.show),this._lastShow=r);let w=this._outlineAttributes;l(w)||(w=E.getGeometryInstanceAttributes(t),this._outlineAttributes=w),s!==this._lastOutlineShow&&(w.show=xn.toValue(s,w.show),this._lastOutlineShow=s),O.equals(a,this._lastOutlineColor)||(w.color=Ot.toValue(a,w.color),O.clone(a,this._lastOutlineColor)),It.equals(F,this._lastDistanceDisplayCondition)||(I.distanceDisplayCondition=kn.toValue(F,I.distanceDisplayCondition),w.distanceDisplayCondition=kn.toValue(F,w.distanceDisplayCondition),It.clone(F,this._lastDistanceDisplayCondition)),h.equals(A,this._lastOffset)||(I.offset=Ji.toValue(A,I.offset),w.offset=Ji.toValue(A,I.offset),h.clone(A,this._lastOffset))}G&&(i.x=Math.max(i.x,.001),i.y=Math.max(i.y,.001),i.z=Math.max(i.z,.001),o=M.multiplyByScale(o,i,o),this._primitive.modelMatrix=o,this._outlinePrimitive.modelMatrix=o)};var _P=Ed;var n7n=T(S(),1);var L8n=T(S(),1);function N1(e){e=g(e,g.EMPTY_OBJECT);let t=g(e.vertexFormat,Pe.DEFAULT);this._vertexFormat=t,this._workerName=\"createPlaneGeometry\"}N1.packedLength=Pe.packedLength;N1.pack=function(e,t,n){return n=g(n,0),Pe.pack(e._vertexFormat,t,n),t};var lme=new Pe,_8e={vertexFormat:lme};N1.unpack=function(e,t,n){t=g(t,0);let i=Pe.unpack(e,t,lme);return l(n)?(n._vertexFormat=Pe.clone(i,n._vertexFormat),n):new N1(_8e)};var gk=new h(-.5,-.5,0),xk=new h(.5,.5,0);N1.createGeometry=function(e){let t=e._vertexFormat,n=new hn,i,o;if(t.position){if(o=new Float64Array(4*3),o[0]=gk.x,o[1]=gk.y,o[2]=0,o[3]=xk.x,o[4]=gk.y,o[5]=0,o[6]=xk.x,o[7]=xk.y,o[8]=0,o[9]=gk.x,o[10]=xk.y,o[11]=0,n.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:o}),t.normal){let r=new Float32Array(12);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=1,r[9]=0,r[10]=0,r[11]=1,n.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})}if(t.st){let r=new Float32Array(8);r[0]=0,r[1]=0,r[2]=1,r[3]=0,r[4]=1,r[5]=1,r[6]=0,r[7]=1,n.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:r})}if(t.tangent){let r=new Float32Array(12);r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=1,r[10]=0,r[11]=0,n.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})}if(t.bitangent){let r=new Float32Array(12);r[0]=0,r[1]=1,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=1,r[8]=0,r[9]=0,r[10]=1,r[11]=0,n.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:r})}i=new Uint16Array(2*3),i[0]=0,i[1]=1,i[2]=2,i[3]=0,i[4]=2,i[5]=3}return new ut({attributes:n,indices:i,primitiveType:we.TRIANGLES,boundingSphere:new ce(h.ZERO,Math.sqrt(2))})};var TP=N1;var w8n=T(S(),1);function k1(){this._workerName=\"createPlaneOutlineGeometry\"}k1.packedLength=0;k1.pack=function(e,t){return t};k1.unpack=function(e,t,n){return l(n)?n:new k1};var Dy=new h(-.5,-.5,0),_k=new h(.5,.5,0);k1.createGeometry=function(){let e=new hn,t=new Uint16Array(4*2),n=new Float64Array(4*3);return n[0]=Dy.x,n[1]=Dy.y,n[2]=Dy.z,n[3]=_k.x,n[4]=Dy.y,n[5]=Dy.z,n[6]=_k.x,n[7]=_k.y,n[8]=Dy.z,n[9]=Dy.x,n[10]=_k.y,n[11]=Dy.z,e.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:n}),t[0]=0,t[1]=1,t[2]=1,t[3]=2,t[4]=2,t[5]=3,t[6]=3,t[7]=0,new ut({attributes:e,indices:t,primitiveType:we.LINES,boundingSphere:new ce(h.ZERO,Math.sqrt(2))})};var SP=k1;var T8e=new h,dme=new O;function S8e(e){this.id=e,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function Nu(e,t){ii.call(this,{entity:e,scene:t,geometryOptions:new S8e(e),geometryPropertyName:\"plane\",observedPropertyNames:[\"availability\",\"position\",\"orientation\",\"plane\"]}),this._onEntityPropertyChanged(e,\"plane\",e.plane,void 0)}l(Object.create)&&(Nu.prototype=Object.create(ii.prototype),Nu.prototype.constructor=Nu);Nu.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i,o,r=new xn(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),s=this._distanceDisplayConditionProperty.getValue(e),a=kn.fromDistanceDisplayCondition(s);if(this._materialProperty instanceof kt){let b;l(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(b=this._materialProperty.color.getValue(e,dme)),l(b)||(b=O.WHITE),o=Ot.fromColor(b),i={show:r,distanceDisplayCondition:a,color:o}}else i={show:r,distanceDisplayCondition:a};let c=t.plane,d=this._options,u=t.computeModelMatrix(e),m=K.getValueOrDefault(c.plane,e,d.plane),p=K.getValueOrUndefined(c.dimensions,e,d.dimensions);return d.plane=m,d.dimensions=p,u=$K(m,p,u,u),new Vt({id:t,geometry:new TP(this._options),modelMatrix:u,attributes:i})};Nu.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=K.getValueOrDefault(this._outlineColorProperty,e,O.BLACK,dme),o=this._distanceDisplayConditionProperty.getValue(e),r=t.plane,s=this._options,a=t.computeModelMatrix(e),c=K.getValueOrDefault(r.plane,e,s.plane),d=K.getValueOrUndefined(r.dimensions,e,s.dimensions);return s.plane=c,s.dimensions=d,a=$K(c,d,a,a),new Vt({id:t,geometry:new SP,modelMatrix:a,attributes:{show:new xn(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Ot.fromColor(i),distanceDisplayCondition:kn.fromDistanceDisplayCondition(o)}})};Nu.prototype._isHidden=function(e,t){return!l(t.plane)||!l(t.dimensions)||!l(e.position)||ii.prototype._isHidden.call(this,e,t)};Nu.prototype._getIsClosed=function(e){return!1};Nu.prototype._isDynamic=function(e,t){return!e.position.isConstant||!K.isConstant(e.orientation)||!t.plane.isConstant||!t.dimensions.isConstant||!K.isConstant(t.outlineWidth)};Nu.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof kt,i=this._options;i.vertexFormat=n?ln.VERTEX_FORMAT:so.MaterialSupport.TEXTURED.vertexFormat,i.plane=t.plane.getValue(Be.MINIMUM_VALUE,i.plane),i.dimensions=t.dimensions.getValue(Be.MINIMUM_VALUE,i.dimensions)};Nu.DynamicGeometryUpdater=U1;function U1(e,t,n){ni.call(this,e,t,n)}l(Object.create)&&(U1.prototype=Object.create(ni.prototype),U1.prototype.constructor=U1);U1.prototype._isHidden=function(e,t,n){let i=this._options,o=K.getValueOrUndefined(e.position,n,T8e);return!l(o)||!l(i.plane)||!l(i.dimensions)||ni.prototype._isHidden.call(this,e,t,n)};U1.prototype._setOptions=function(e,t,n){let i=this._options;i.plane=K.getValueOrDefault(t.plane,n,i.plane),i.dimensions=K.getValueOrUndefined(t.dimensions,n,i.dimensions)};var C8e=new h,V8e=new h,L8e=new h,Z8e=new h,R8e=new $,G8e=new $,E8e=new M;function $K(e,t,n,i){let o=e.normal,r=e.distance,s=h.multiplyByScalar(o,-r,L8e),a=h.clone(h.UNIT_Z,V8e);P.equalsEpsilon(Math.abs(h.dot(a,o)),1,P.EPSILON8)&&(a=h.clone(h.UNIT_Y,a));let c=h.cross(a,o,C8e);a=h.cross(o,c,a),h.normalize(c,c),h.normalize(a,a);let d=R8e;$.setColumn(d,0,c,d),$.setColumn(d,1,a,d),$.setColumn(d,2,o,d);let u=h.fromElements(t.x,t.y,1,Z8e),m=$.multiplyByScale(d,u,G8e),p=M.fromRotationTranslation(m,s,E8e);return M.multiplyTransformation(n,p,i)}Nu.createPrimitiveMatrix=$K;var CP=Nu;var lqn=T(S(),1);var R7n=T(S(),1);var X8e=new h,I8e=new ze,W8e=new D,P8e=new D,v8e=new h,w8e=new h,F8e=new h,VP=new h,A8e=new h,M8e=new h,ume=new Fe,N8e=new $,k8e=new $,U8e=new h;function D8e(e,t,n,i,o,r,s,a,c){let d=e.positions,u=si.triangulate(e.positions2D,e.holes);u.length<3&&(u=[0,1,2]);let m=Ae.createTypedArray(d.length,u.length);m.set(u);let p=N8e;if(i!==0){let y=Fe.fromAxisAngle(s,i,ume);if(p=$.fromQuaternion(y,p),t.tangent||t.bitangent){y=Fe.fromAxisAngle(s,-i,ume);let Z=$.fromQuaternion(y,k8e);a=h.normalize($.multiplyByVector(Z,a,a),a),t.bitangent&&(c=h.normalize(h.cross(s,a,c),c))}}else p=$.clone($.IDENTITY,p);let b=P8e;t.st&&(b.x=n.x,b.y=n.y);let f=d.length,x=f*3,_=new Float64Array(x),C=t.normal?new Float32Array(x):void 0,V=t.tangent?new Float32Array(x):void 0,L=t.bitangent?new Float32Array(x):void 0,R=t.st?new Float32Array(f*2):void 0,G=0,X=0,v=0,W=0,F=0;for(let y=0;y<f;y++){let Z=d[y];if(_[G++]=Z.x,_[G++]=Z.y,_[G++]=Z.z,t.st)if(l(o)&&o.positions.length===f)R[F++]=o.positions[y].x,R[F++]=o.positions[y].y;else{let E=$.multiplyByVector(p,Z,X8e),I=r(E,W8e);D.subtract(I,b,I);let w=P.clamp(I.x/n.width,0,1),k=P.clamp(I.y/n.height,0,1);R[F++]=w,R[F++]=k}t.normal&&(C[X++]=s.x,C[X++]=s.y,C[X++]=s.z),t.tangent&&(V[W++]=a.x,V[W++]=a.y,V[W++]=a.z),t.bitangent&&(L[v++]=c.x,L[v++]=c.y,L[v++]=c.z)}let A=new hn;return t.position&&(A.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:_})),t.normal&&(A.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:C})),t.tangent&&(A.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:V})),t.bitangent&&(A.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:L})),t.st&&(A.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:R})),new ut({attributes:A,indices:m,primitiveType:we.TRIANGLES})}function K_(e){e=g(e,g.EMPTY_OBJECT);let t=e.polygonHierarchy,n=e.textureCoordinates,i=g(e.vertexFormat,Pe.DEFAULT);this._vertexFormat=Pe.clone(i),this._polygonHierarchy=t,this._stRotation=g(e.stRotation,0),this._ellipsoid=oe.clone(g(e.ellipsoid,oe.WGS84)),this._workerName=\"createCoplanarPolygonGeometry\",this._textureCoordinates=n,this.packedLength=Dn.computeHierarchyPackedLength(t,h)+Pe.packedLength+oe.packedLength+(l(n)?Dn.computeHierarchyPackedLength(n,D):1)+2}K_.fromPositions=function(e){e=g(e,g.EMPTY_OBJECT);let t={polygonHierarchy:{positions:e.positions},vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,textureCoordinates:e.textureCoordinates};return new K_(t)};K_.pack=function(e,t,n){return n=g(n,0),n=Dn.packPolygonHierarchy(e._polygonHierarchy,t,n,h),oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n++]=e._stRotation,l(e._textureCoordinates)?n=Dn.packPolygonHierarchy(e._textureCoordinates,t,n,D):t[n++]=-1,t[n++]=e.packedLength,t};var B8e=oe.clone(oe.UNIT_SPHERE),Y8e=new Pe,O8e={polygonHierarchy:{}};K_.unpack=function(e,t,n){t=g(t,0);let i=Dn.unpackPolygonHierarchy(e,t,h);t=i.startingIndex,delete i.startingIndex;let o=oe.unpack(e,t,B8e);t+=oe.packedLength;let r=Pe.unpack(e,t,Y8e);t+=Pe.packedLength;let s=e[t++],a=e[t]===-1?void 0:Dn.unpackPolygonHierarchy(e,t,D);l(a)?(t=a.startingIndex,delete a.startingIndex):t++;let c=e[t++];return l(n)||(n=new K_(O8e)),n._polygonHierarchy=i,n._ellipsoid=oe.clone(o,n._ellipsoid),n._vertexFormat=Pe.clone(r,n._vertexFormat),n._stRotation=s,n._textureCoordinates=a,n.packedLength=c,n};K_.createGeometry=function(e){let t=e._vertexFormat,n=e._polygonHierarchy,i=e._stRotation,o=e._textureCoordinates,r=l(o),s=n.positions;if(s=yo(s,h.equalsEpsilon,!0),s.length<3)return;let a=v8e,c=w8e,d=F8e,u=A8e,m=M8e;if(!h0.computeProjectTo2DArguments(s,VP,u,m))return;if(a=h.cross(u,m,a),a=h.normalize(a,a),!h.equalsEpsilon(VP,h.ZERO,P.EPSILON6)){let F=e._ellipsoid.geodeticSurfaceNormal(VP,U8e);h.dot(a,F)<0&&(a=h.negate(a,a),u=h.negate(u,u))}let b=h0.createProjectPointsTo2DFunction(VP,u,m),f=h0.createProjectPointTo2DFunction(VP,u,m);t.tangent&&(c=h.clone(u,c)),t.bitangent&&(d=h.clone(m,d));let x=Dn.polygonsFromHierarchy(n,r,b,!1),_=x.hierarchy,C=x.polygons,V=function(F){return F},L=r?Dn.polygonsFromHierarchy(o,!0,V,!1).polygons:void 0;if(_.length===0)return;s=_[0].outerRing;let R=ce.fromPoints(s),G=Dn.computeBoundingRectangle(a,f,s,i,I8e),X=[];for(let F=0;F<C.length;F++){let A=new Vt({geometry:D8e(C[F],t,G,i,r?L[F]:void 0,f,a,c,d)});X.push(A)}let v=An.combineInstances(X)[0];v.attributes.position.values=new Float64Array(v.attributes.position.values),v.indices=Ae.createTypedArray(v.attributes.position.values.length/3,v.indices);let W=v.attributes;return t.position||delete W.position,new ut({attributes:W,indices:v.indices,primitiveType:v.primitiveType,boundingSphere:R})};var LP=K_;var m6n=T(S(),1);var M7n=T(S(),1);function wr(e,t){this.position=e,l(this.position)||(this.position=new D),this.tangentPlane=t,l(this.tangentPlane)||(this.tangentPlane=wr.NORTH_POLE_TANGENT_PLANE)}Object.defineProperties(wr.prototype,{ellipsoid:{get:function(){return this.tangentPlane.ellipsoid}},x:{get:function(){return this.position.x}},y:{get:function(){return this.position.y}},conformalLatitude:{get:function(){let e=D.magnitude(this.position),t=2*this.ellipsoid.maximumRadius;return this.tangentPlane.plane.normal.z*(P.PI_OVER_TWO-2*Math.atan2(e,t))}},longitude:{get:function(){let e=P.PI_OVER_TWO+Math.atan2(this.y,this.x);return e>Math.PI&&(e-=P.TWO_PI),e}}});var D1=new he,z8e=new h;wr.prototype.getLatitude=function(e){l(e)||(e=oe.WGS84),D1.latitude=this.conformalLatitude,D1.longitude=this.longitude,D1.height=0;let t=this.ellipsoid.cartographicToCartesian(D1,z8e);return e.cartesianToCartographic(t,D1),D1.latitude};var H8e=new bn,K8e=new h,J8e=new h;wr.fromCartesian=function(e,t){let n=P.signNotZero(e.z),i=wr.NORTH_POLE_TANGENT_PLANE,o=wr.SOUTH_POLE;n<0&&(i=wr.SOUTH_POLE_TANGENT_PLANE,o=wr.NORTH_POLE);let r=H8e;r.origin=i.ellipsoid.scaleToGeocentricSurface(e,r.origin),r.direction=h.subtract(r.origin,o,K8e),h.normalize(r.direction,r.direction);let s=jn.rayPlane(r,i.plane,J8e),a=h.subtract(s,o,s),c=h.dot(i.xAxis,a),d=n*h.dot(i.yAxis,a);return l(t)?(t.position=new D(c,d),t.tangentPlane=i,t):new wr(new D(c,d),i)};wr.fromCartesianArray=function(e,t){let n=e.length;l(t)?t.length=n:t=new Array(n);for(let i=0;i<n;i++)t[i]=wr.fromCartesian(e[i],t[i]);return t};wr.clone=function(e,t){if(l(e))return l(t)?(t.position=e.position,t.tangentPlane=e.tangentPlane,t):new wr(e.position,e.tangentPlane)};wr.HALF_UNIT_SPHERE=Object.freeze(new oe(.5,.5,.5));wr.NORTH_POLE=Object.freeze(new h(0,0,.5));wr.SOUTH_POLE=Object.freeze(new h(0,0,-.5));wr.NORTH_POLE_TANGENT_PLANE=Object.freeze(new Dr(wr.NORTH_POLE,wr.HALF_UNIT_SPHERE));wr.SOUTH_POLE_TANGENT_PLANE=Object.freeze(new Dr(wr.SOUTH_POLE,wr.HALF_UNIT_SPHERE));var bc=wr;var Q8e=new he,mme=new he;function j8e(e,t,n,i){let r=i.cartesianToCartographic(e,Q8e).height,s=i.cartesianToCartographic(t,mme);s.height=r,i.cartographicToCartesian(s,t);let a=i.cartesianToCartographic(n,mme);a.height=r-100,i.cartographicToCartesian(a,n)}var hme=new ze,q8e=new h,$8e=new h,e7e=new h,t7e=new h,n7e=new h,i7e=new h,Tk=new h,Sf=new h,B1=new h,o7e=new D,r7e=new D,s7e=new h,fme=new Fe,a7e=new $,c7e=new $;function eJ(e){let t=e.vertexFormat,n=e.geometry,i=e.shadowVolume,o=n.attributes.position.values,r=l(n.attributes.st)?n.attributes.st.values:void 0,s=o.length,a=e.wall,c=e.top||a,d=e.bottom||a;if(t.st||t.normal||t.tangent||t.bitangent||i){let u=e.boundingRectangle,m=e.rotationAxis,p=e.projectTo2d,b=e.ellipsoid,f=e.stRotation,x=e.perPositionHeight,_=o7e;_.x=u.x,_.y=u.y;let C=t.st?new Float32Array(2*(s/3)):void 0,V;t.normal&&(x&&c&&!a?V=n.attributes.normal.values:V=new Float32Array(s));let L=t.tangent?new Float32Array(s):void 0,R=t.bitangent?new Float32Array(s):void 0,G=i?new Float32Array(s):void 0,X=0,v=0,W=$8e,F=e7e,A=t7e,y=!0,Z=a7e,E=c7e;if(f!==0){let k=Fe.fromAxisAngle(m,f,fme);Z=$.fromQuaternion(k,Z),k=Fe.fromAxisAngle(m,-f,fme),E=$.fromQuaternion(k,E)}else Z=$.clone($.IDENTITY,Z),E=$.clone($.IDENTITY,E);let I=0,w=0;c&&d&&(I=s/2,w=s/3,s/=2);for(let k=0;k<s;k+=3){let B=h.fromArray(o,k,s7e);if(t.st&&!l(r)){let U=$.multiplyByVector(Z,B,q8e);U=b.scaleToGeodeticSurface(U,U);let Y=p([U],r7e)[0];D.subtract(Y,_,Y);let N=P.clamp(Y.x/u.width,0,1),J=P.clamp(Y.y/u.height,0,1);d&&(C[X+w]=N,C[X+1+w]=J),c&&(C[X]=N,C[X+1]=J),X+=2}if(t.normal||t.tangent||t.bitangent||i){let U=v+1,Y=v+2;if(a){if(k+3<s){let N=h.fromArray(o,k+3,n7e);if(y){let J=h.fromArray(o,k+s,i7e);x&&j8e(B,N,J,b),h.subtract(N,B,N),h.subtract(J,B,J),W=h.normalize(h.cross(J,N,W),W),y=!1}h.equalsEpsilon(N,B,P.EPSILON10)&&(y=!0)}(t.tangent||t.bitangent)&&(A=b.geodeticSurfaceNormal(B,A),t.tangent&&(F=h.normalize(h.cross(A,W,F),F)))}else W=b.geodeticSurfaceNormal(B,W),(t.tangent||t.bitangent)&&(x&&(Tk=h.fromArray(V,v,Tk),Sf=h.cross(h.UNIT_Z,Tk,Sf),Sf=h.normalize($.multiplyByVector(E,Sf,Sf),Sf),t.bitangent&&(B1=h.normalize(h.cross(Tk,Sf,B1),B1))),F=h.cross(h.UNIT_Z,W,F),F=h.normalize($.multiplyByVector(E,F,F),F),t.bitangent&&(A=h.normalize(h.cross(W,F,A),A)));t.normal&&(e.wall?(V[v+I]=W.x,V[U+I]=W.y,V[Y+I]=W.z):d&&(V[v+I]=-W.x,V[U+I]=-W.y,V[Y+I]=-W.z),(c&&!x||a)&&(V[v]=W.x,V[U]=W.y,V[Y]=W.z)),i&&(a&&(W=b.geodeticSurfaceNormal(B,W)),G[v+I]=-W.x,G[U+I]=-W.y,G[Y+I]=-W.z),t.tangent&&(e.wall?(L[v+I]=F.x,L[U+I]=F.y,L[Y+I]=F.z):d&&(L[v+I]=-F.x,L[U+I]=-F.y,L[Y+I]=-F.z),c&&(x?(L[v]=Sf.x,L[U]=Sf.y,L[Y]=Sf.z):(L[v]=F.x,L[U]=F.y,L[Y]=F.z))),t.bitangent&&(d&&(R[v+I]=A.x,R[U+I]=A.y,R[Y+I]=A.z),c&&(x?(R[v]=B1.x,R[U]=B1.y,R[Y]=B1.z):(R[v]=A.x,R[U]=A.y,R[Y]=A.z))),v+=3}}t.st&&!l(r)&&(n.attributes.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:C})),t.normal&&(n.attributes.normal=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:V})),t.tangent&&(n.attributes.tangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:L})),t.bitangent&&(n.attributes.bitangent=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:R})),i&&(n.attributes.extrudeDirection=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:3,values:G}))}if(e.extrude&&l(e.offsetAttribute)){let u=o.length/3,m=new Uint8Array(u);if(e.offsetAttribute===cn.TOP)c&&d||a?m=m.fill(1,0,u/2):c&&(m=m.fill(1));else{let p=e.offsetAttribute===cn.NONE?0:1;m=m.fill(p)}n.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:m})}return n}var pme=[];function l7e(e,t,n,i,o,r,s,a,c,d){let u={walls:[]},m;if(s||a){let V=Dn.createGeometryFromPositions(e,t,n,i,r,c,d),L=V.attributes.position.values,R=V.indices,G,X;if(s&&a){let v=L.concat(L);G=v.length/3,X=Ae.createTypedArray(G,R.length*2),X.set(R);let W=R.length,F=G/2;for(m=0;m<W;m+=3){let A=X[m]+F,y=X[m+1]+F,Z=X[m+2]+F;X[m+W]=Z,X[m+1+W]=y,X[m+2+W]=A}if(V.attributes.position.values=v,r&&c.normal){let A=V.attributes.normal.values;V.attributes.normal.values=new Float32Array(v.length),V.attributes.normal.values.set(A)}if(c.st&&l(n)){let A=V.attributes.st.values;V.attributes.st.values=new Float32Array(G*2),V.attributes.st.values=A.concat(A)}V.indices=X}else if(a){for(G=L.length/3,X=Ae.createTypedArray(G,R.length),m=0;m<R.length;m+=3)X[m]=R[m+2],X[m+1]=R[m+1],X[m+2]=R[m];V.indices=X}u.topAndBottom=new Vt({geometry:V})}let p=o.outerRing,b=Dr.fromPoints(p,e),f=b.projectPointsOntoPlane(p,pme),x=si.computeWindingOrder2D(f);x===ns.CLOCKWISE&&(p=p.slice().reverse());let _=Dn.computeWallGeometry(p,n,e,i,r,d);u.walls.push(new Vt({geometry:_}));let C=o.holes;for(m=0;m<C.length;m++){let V=C[m];f=b.projectPointsOntoPlane(V,pme),x=si.computeWindingOrder2D(f),x===ns.COUNTER_CLOCKWISE&&(V=V.slice().reverse()),_=Dn.computeWallGeometry(V,n,e,i,r,d),u.walls.push(new Vt({geometry:_}))}return u}function Uu(e){let t=e.polygonHierarchy,n=g(e.vertexFormat,Pe.DEFAULT),i=g(e.ellipsoid,oe.WGS84),o=g(e.granularity,P.RADIANS_PER_DEGREE),r=g(e.stRotation,0),s=e.textureCoordinates,a=g(e.perPositionHeight,!1),c=a&&l(e.extrudedHeight),d=g(e.height,0),u=g(e.extrudedHeight,d);if(!c){let m=Math.max(d,u);u=Math.min(d,u),d=m}this._vertexFormat=Pe.clone(n),this._ellipsoid=oe.clone(i),this._granularity=o,this._stRotation=r,this._height=d,this._extrudedHeight=u,this._closeTop=g(e.closeTop,!0),this._closeBottom=g(e.closeBottom,!0),this._polygonHierarchy=t,this._perPositionHeight=a,this._perPositionHeightExtrude=c,this._shadowVolume=g(e.shadowVolume,!1),this._workerName=\"createPolygonGeometry\",this._offsetAttribute=e.offsetAttribute,this._arcType=g(e.arcType,$t.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this._textureCoordinates=s,this.packedLength=Dn.computeHierarchyPackedLength(t,h)+oe.packedLength+Pe.packedLength+(s?Dn.computeHierarchyPackedLength(s,D):1)+12}Uu.fromPositions=function(e){e=g(e,g.EMPTY_OBJECT);let t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,vertexFormat:e.vertexFormat,stRotation:e.stRotation,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,closeTop:e.closeTop,closeBottom:e.closeBottom,offsetAttribute:e.offsetAttribute,arcType:e.arcType,textureCoordinates:e.textureCoordinates};return new Uu(t)};Uu.pack=function(e,t,n){return n=g(n,0),n=Dn.packPolygonHierarchy(e._polygonHierarchy,t,n,h),oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._stRotation,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._closeTop?1:0,t[n++]=e._closeBottom?1:0,t[n++]=e._shadowVolume?1:0,t[n++]=g(e._offsetAttribute,-1),t[n++]=e._arcType,l(e._textureCoordinates)?n=Dn.packPolygonHierarchy(e._textureCoordinates,t,n,D):t[n++]=-1,t[n++]=e.packedLength,t};var d7e=oe.clone(oe.UNIT_SPHERE),u7e=new Pe,m7e={polygonHierarchy:{}};Uu.unpack=function(e,t,n){t=g(t,0);let i=Dn.unpackPolygonHierarchy(e,t,h);t=i.startingIndex,delete i.startingIndex;let o=oe.unpack(e,t,d7e);t+=oe.packedLength;let r=Pe.unpack(e,t,u7e);t+=Pe.packedLength;let s=e[t++],a=e[t++],c=e[t++],d=e[t++],u=e[t++]===1,m=e[t++]===1,p=e[t++]===1,b=e[t++]===1,f=e[t++]===1,x=e[t++],_=e[t++],C=e[t]===-1?void 0:Dn.unpackPolygonHierarchy(e,t,D);l(C)?(t=C.startingIndex,delete C.startingIndex):t++;let V=e[t++];return l(n)||(n=new Uu(m7e)),n._polygonHierarchy=i,n._ellipsoid=oe.clone(o,n._ellipsoid),n._vertexFormat=Pe.clone(r,n._vertexFormat),n._height=s,n._extrudedHeight=a,n._granularity=c,n._stRotation=d,n._perPositionHeightExtrude=u,n._perPositionHeight=m,n._closeTop=p,n._closeBottom=b,n._shadowVolume=f,n._offsetAttribute=x===-1?void 0:x,n._arcType=_,n._textureCoordinates=C,n.packedLength=V,n};var h7e=new D,f7e=new D,p7e=new bc;function bme(e,t,n,i,o,r){let s=e.longitude,a=s>=0?s:s+P.TWO_PI;o.westOverIdl=Math.min(o.westOverIdl,a),o.eastOverIdl=Math.max(o.eastOverIdl,a),r.west=Math.min(r.west,s),r.east=Math.max(r.east,s);let c=e.getLatitude(n),d=c;if(r.south=Math.min(r.south,c),r.north=Math.max(r.north,c),i!==$t.RHUMB){let p=D.subtract(t.position,e.position,h7e),b=D.dot(t.position,p)/D.dot(p,p);if(b>0&&b<1){let f=D.add(t.position,D.multiplyByScalar(p,-b,p),f7e),x=bc.clone(t,p7e);x.position=f;let _=x.getLatitude(n);r.south=Math.min(r.south,_),r.north=Math.max(r.north,_),Math.abs(c)>Math.abs(_)&&(d=_)}}let u=t.x*e.y-e.x*t.y,m=Math.sign(u);m!==0&&(m*=D.angleBetween(t.position,e.position)),d>=0&&(o.northAngle+=m),d<=0&&(o.southAngle+=m)}var yme=new bc,b7e=new bc,ku={northAngle:0,southAngle:0,westOverIdl:0,eastOverIdl:0};Uu.computeRectangleFromPositions=function(e,t,n,i){if(l(i)||(i=new le),e.length<3)return i;i.west=Number.POSITIVE_INFINITY,i.east=Number.NEGATIVE_INFINITY,i.south=Number.POSITIVE_INFINITY,i.north=Number.NEGATIVE_INFINITY,ku.northAngle=0,ku.southAngle=0,ku.westOverIdl=Number.POSITIVE_INFINITY,ku.eastOverIdl=Number.NEGATIVE_INFINITY;let o=e.length,r=bc.fromCartesian(e[0],b7e);for(let s=1;s<o;s++){let a=bc.fromCartesian(e[s],yme);bme(a,r,t,n,ku,i),r=bc.clone(a,r)}return bme(bc.fromCartesian(e[0],yme),r,t,n,ku,i),i.east-i.west>ku.eastOverIdl-ku.westOverIdl&&(i.west=ku.westOverIdl,i.east=ku.eastOverIdl,i.east>P.PI&&(i.east=i.east-P.TWO_PI),i.west>P.PI&&(i.west=i.west-P.TWO_PI)),P.equalsEpsilon(Math.abs(ku.northAngle),P.TWO_PI,P.EPSILON10)&&(i.north=P.PI_OVER_TWO,i.east=P.PI,i.west=-P.PI),P.equalsEpsilon(Math.abs(ku.southAngle),P.TWO_PI,P.EPSILON10)&&(i.south=-P.PI_OVER_TWO,i.east=P.PI,i.west=-P.PI),i};var y7e=new bc;function g7e(e,t,n){return e.height>=P.PI||e.width>=P.PI?bc.fromCartesian(t[0],y7e).tangentPlane:Dr.fromPoints(t,n)}var gme=new he;function x7e(e,t,n){return(i,o)=>{if(e.height>=P.PI||e.width>=P.PI){if(e.south<0&&e.north>0){l(o)||(o=[]);for(let s=0;s<i.length;++s){let a=n.cartesianToCartographic(i[s],gme);o[s]=new D(a.longitude/P.PI,a.latitude/P.PI_OVER_TWO)}return o.length=i.length,o}return bc.fromCartesianArray(i,o)}return Dr.fromPoints(t,n).projectPointsOntoPlane(i,o)}}function _7e(e,t,n){if(e.height>=P.PI||e.width>=P.PI)return(o,r)=>{if(e.south<0&&e.north>0){let s=n.cartesianToCartographic(o,gme);return l(r)||(r=new D),r.x=s.longitude/P.PI,r.y=s.latitude/P.PI_OVER_TWO,r}return bc.fromCartesian(o,r)};let i=Dr.fromPoints(t,n);return(o,r)=>i.projectPointsOntoPlane(o,r)}function T7e(e,t,n,i){return(o,r)=>!i&&(e.height>=P.PI_OVER_TWO||e.width>=2*P.PI_OVER_THREE)?Dn.splitPolygonsOnEquator(o,t,n,r):o}function S7e(e,t,n,i){if(t.height>=P.PI||t.width>=P.PI)return ze.fromRectangle(t,void 0,hme);let o=e,r=Dr.fromPoints(o,n);return Dn.computeBoundingRectangle(r.plane.normal,r.projectPointOntoPlane.bind(r),o,i,hme)}Uu.createGeometry=function(e){let t=e._vertexFormat,n=e._ellipsoid,i=e._granularity,o=e._stRotation,r=e._polygonHierarchy,s=e._perPositionHeight,a=e._closeTop,c=e._closeBottom,d=e._arcType,u=e._textureCoordinates,m=l(u),p=r.positions;if(p.length<3)return;let b=e.rectangle,f=Dn.polygonsFromHierarchy(r,m,x7e(b,p,n),!s,n,T7e(b,n,d,s)),x=f.hierarchy,_=f.polygons,C=function(I){return I},V=m?Dn.polygonsFromHierarchy(u,!0,C,!1,n).polygons:void 0;if(x.length===0)return;let L=x[0].outerRing,R=S7e(L,b,n,o),G=[],X=e._height,v=e._extrudedHeight,W=e._perPositionHeightExtrude||!P.equalsEpsilon(X,v,0,P.EPSILON2),F={perPositionHeight:s,vertexFormat:t,geometry:void 0,rotationAxis:g7e(b,L,n).plane.normal,projectTo2d:_7e(b,L,n),boundingRectangle:R,ellipsoid:n,stRotation:o,textureCoordinates:void 0,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:d},A;if(W)for(F.extrude=!0,F.top=a,F.bottom=c,F.shadowVolume=e._shadowVolume,F.offsetAttribute=e._offsetAttribute,A=0;A<_.length;A++){let I=l7e(n,_[A],m?V[A]:void 0,i,x[A],s,a,c,t,d),w;a&&c?(w=I.topAndBottom,F.geometry=Dn.scaleToGeodeticHeightExtruded(w.geometry,X,v,n,s)):a?(w=I.topAndBottom,w.geometry.attributes.position.values=si.scaleToGeodeticHeight(w.geometry.attributes.position.values,X,n,!s),F.geometry=w.geometry):c&&(w=I.topAndBottom,w.geometry.attributes.position.values=si.scaleToGeodeticHeight(w.geometry.attributes.position.values,v,n,!0),F.geometry=w.geometry),(a||c)&&(F.wall=!1,w.geometry=eJ(F),G.push(w));let k=I.walls;F.wall=!0;for(let B=0;B<k.length;B++){let U=k[B];F.geometry=Dn.scaleToGeodeticHeightExtruded(U.geometry,X,v,n,s),U.geometry=eJ(F),G.push(U)}}else for(A=0;A<_.length;A++){let I=new Vt({geometry:Dn.createGeometryFromPositions(n,_[A],m?V[A]:void 0,i,s,t,d)});if(I.geometry.attributes.position.values=si.scaleToGeodeticHeight(I.geometry.attributes.position.values,X,n,!s),F.geometry=I.geometry,I.geometry=eJ(F),l(e._offsetAttribute)){let w=I.geometry.attributes.position.values.length,k=e._offsetAttribute===cn.NONE?0:1,B=new Uint8Array(w/3).fill(k);I.geometry.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:B})}G.push(I)}let y=An.combineInstances(G)[0];y.attributes.position.values=new Float64Array(y.attributes.position.values),y.indices=Ae.createTypedArray(y.attributes.position.values.length/3,y.indices);let Z=y.attributes,E=ce.fromVertices(Z.position.values);return t.position||delete Z.position,new ut({attributes:Z,indices:y.indices,primitiveType:y.primitiveType,boundingSphere:E,offsetAttribute:e._offsetAttribute})};Uu.createShadowVolume=function(e,t,n){let i=e._granularity,o=e._ellipsoid,r=t(i,o),s=n(i,o);return new Uu({polygonHierarchy:e._polygonHierarchy,ellipsoid:o,stRotation:e._stRotation,granularity:i,perPositionHeight:!1,extrudedHeight:r,height:s,vertexFormat:Pe.POSITION_ONLY,shadowVolume:!0,arcType:e._arcType})};function C7e(e){let t=-e._stRotation;if(t===0)return[0,0,0,1,1,0];let n=e._ellipsoid,i=e._polygonHierarchy.positions,o=e.rectangle;return ut._textureCoordinateRotationPoints(i,t,n,o)}Object.defineProperties(Uu.prototype,{rectangle:{get:function(){if(!l(this._rectangle)){let e=this._polygonHierarchy.positions;this._rectangle=Uu.computeRectangleFromPositions(e,this._ellipsoid,this._arcType)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return l(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=C7e(this)),this._textureCoordinateRotationPoints}}});var J_=Uu;var v6n=T(S(),1);var xme=[],Sk=[];function V7e(e,t,n,i,o){let s=Dr.fromPoints(t,e).projectPointsOntoPlane(t,xme);si.computeWindingOrder2D(s)===ns.CLOCKWISE&&(s.reverse(),t=t.slice().reverse());let c,d,u=t.length,m=0;if(i)for(c=new Float64Array(u*2*3),d=0;d<u;d++){let f=t[d],x=t[(d+1)%u];c[m++]=f.x,c[m++]=f.y,c[m++]=f.z,c[m++]=x.x,c[m++]=x.y,c[m++]=x.z}else{let f=0;if(o===$t.GEODESIC)for(d=0;d<u;d++)f+=Dn.subdivideLineCount(t[d],t[(d+1)%u],n);else if(o===$t.RHUMB)for(d=0;d<u;d++)f+=Dn.subdivideRhumbLineCount(e,t[d],t[(d+1)%u],n);for(c=new Float64Array(f*3),d=0;d<u;d++){let x;o===$t.GEODESIC?x=Dn.subdivideLine(t[d],t[(d+1)%u],n,Sk):o===$t.RHUMB&&(x=Dn.subdivideRhumbLine(e,t[d],t[(d+1)%u],n,Sk));let _=x.length;for(let C=0;C<_;++C)c[m++]=x[C]}}u=c.length/3;let p=u*2,b=Ae.createTypedArray(u,p);for(m=0,d=0;d<u-1;d++)b[m++]=d,b[m++]=d+1;return b[m++]=u-1,b[m++]=0,new Vt({geometry:new ut({attributes:new hn({position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:c})}),indices:b,primitiveType:we.LINES})})}function L7e(e,t,n,i,o){let s=Dr.fromPoints(t,e).projectPointsOntoPlane(t,xme);si.computeWindingOrder2D(s)===ns.CLOCKWISE&&(s.reverse(),t=t.slice().reverse());let c,d,u=t.length,m=new Array(u),p=0;if(i)for(c=new Float64Array(u*2*3*2),d=0;d<u;++d){m[d]=p/3;let _=t[d],C=t[(d+1)%u];c[p++]=_.x,c[p++]=_.y,c[p++]=_.z,c[p++]=C.x,c[p++]=C.y,c[p++]=C.z}else{let _=0;if(o===$t.GEODESIC)for(d=0;d<u;d++)_+=Dn.subdivideLineCount(t[d],t[(d+1)%u],n);else if(o===$t.RHUMB)for(d=0;d<u;d++)_+=Dn.subdivideRhumbLineCount(e,t[d],t[(d+1)%u],n);for(c=new Float64Array(_*3*2),d=0;d<u;++d){m[d]=p/3;let C;o===$t.GEODESIC?C=Dn.subdivideLine(t[d],t[(d+1)%u],n,Sk):o===$t.RHUMB&&(C=Dn.subdivideRhumbLine(e,t[d],t[(d+1)%u],n,Sk));let V=C.length;for(let L=0;L<V;++L)c[p++]=C[L]}}u=c.length/(3*2);let b=m.length,f=(u*2+b)*2,x=Ae.createTypedArray(u+b,f);for(p=0,d=0;d<u;++d)x[p++]=d,x[p++]=(d+1)%u,x[p++]=d+u,x[p++]=(d+1)%u+u;for(d=0;d<b;d++){let _=m[d];x[p++]=_,x[p++]=_+u}return new Vt({geometry:new ut({attributes:new hn({position:new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:c})}),indices:x,primitiveType:we.LINES})})}function Q_(e){let t=e.polygonHierarchy,n=g(e.ellipsoid,oe.WGS84),i=g(e.granularity,P.RADIANS_PER_DEGREE),o=g(e.perPositionHeight,!1),r=o&&l(e.extrudedHeight),s=g(e.arcType,$t.GEODESIC),a=g(e.height,0),c=g(e.extrudedHeight,a);if(!r){let d=Math.max(a,c);c=Math.min(a,c),a=d}this._ellipsoid=oe.clone(n),this._granularity=i,this._height=a,this._extrudedHeight=c,this._arcType=s,this._polygonHierarchy=t,this._perPositionHeight=o,this._perPositionHeightExtrude=r,this._offsetAttribute=e.offsetAttribute,this._workerName=\"createPolygonOutlineGeometry\",this.packedLength=Dn.computeHierarchyPackedLength(t,h)+oe.packedLength+8}Q_.pack=function(e,t,n){return n=g(n,0),n=Dn.packPolygonHierarchy(e._polygonHierarchy,t,n,h),oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,t[n++]=e._height,t[n++]=e._extrudedHeight,t[n++]=e._granularity,t[n++]=e._perPositionHeightExtrude?1:0,t[n++]=e._perPositionHeight?1:0,t[n++]=e._arcType,t[n++]=g(e._offsetAttribute,-1),t[n]=e.packedLength,t};var Z7e=oe.clone(oe.UNIT_SPHERE),R7e={polygonHierarchy:{}};Q_.unpack=function(e,t,n){t=g(t,0);let i=Dn.unpackPolygonHierarchy(e,t,h);t=i.startingIndex,delete i.startingIndex;let o=oe.unpack(e,t,Z7e);t+=oe.packedLength;let r=e[t++],s=e[t++],a=e[t++],c=e[t++]===1,d=e[t++]===1,u=e[t++],m=e[t++],p=e[t];return l(n)||(n=new Q_(R7e)),n._polygonHierarchy=i,n._ellipsoid=oe.clone(o,n._ellipsoid),n._height=r,n._extrudedHeight=s,n._granularity=a,n._perPositionHeight=d,n._perPositionHeightExtrude=c,n._arcType=u,n._offsetAttribute=m===-1?void 0:m,n.packedLength=p,n};Q_.fromPositions=function(e){e=g(e,g.EMPTY_OBJECT);let t={polygonHierarchy:{positions:e.positions},height:e.height,extrudedHeight:e.extrudedHeight,ellipsoid:e.ellipsoid,granularity:e.granularity,perPositionHeight:e.perPositionHeight,arcType:e.arcType,offsetAttribute:e.offsetAttribute};return new Q_(t)};Q_.createGeometry=function(e){let t=e._ellipsoid,n=e._granularity,i=e._polygonHierarchy,o=e._perPositionHeight,r=e._arcType,s=Dn.polygonOutlinesFromHierarchy(i,!o,t);if(s.length===0)return;let a,c=[],d=P.chordLength(n,t.maximumRadius),u=e._height,m=e._extrudedHeight,p=e._perPositionHeightExtrude||!P.equalsEpsilon(u,m,0,P.EPSILON2),b,f;if(p)for(f=0;f<s.length;f++){if(a=L7e(t,s[f],d,o,r),a.geometry=Dn.scaleToGeodeticHeightExtruded(a.geometry,u,m,t,o),l(e._offsetAttribute)){let C=a.geometry.attributes.position.values.length/3,V=new Uint8Array(C);e._offsetAttribute===cn.TOP?V=V.fill(1,0,C/2):(b=e._offsetAttribute===cn.NONE?0:1,V=V.fill(b)),a.geometry.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:V})}c.push(a)}else for(f=0;f<s.length;f++){if(a=V7e(t,s[f],d,o,r),a.geometry.attributes.position.values=si.scaleToGeodeticHeight(a.geometry.attributes.position.values,u,t,!o),l(e._offsetAttribute)){let C=a.geometry.attributes.position.values.length;b=e._offsetAttribute===cn.NONE?0:1;let V=new Uint8Array(C/3).fill(b);a.geometry.attributes.applyOffset=new Ee({componentDatatype:Q.UNSIGNED_BYTE,componentsPerAttribute:1,values:V})}c.push(a)}let x=An.combineInstances(c)[0],_=ce.fromVertices(x.attributes.position.values);return new ut({attributes:x.attributes,indices:x.indices,primitiveType:x.primitiveType,boundingSphere:_,offsetAttribute:e._offsetAttribute})};var ZP=Q_;var _me=\"Entity polygons cannot have both height and perPositionHeight. height will be ignored\",Tme=\"heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored\",Sme=new O,Cme=h.ZERO,Vme=new h,Lme=new le,G7e=[],E7e=new D;function X7e(e){this.id=e,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function Xd(e,t){On.call(this,{entity:e,scene:t,geometryOptions:new X7e(e),geometryPropertyName:\"polygon\",observedPropertyNames:[\"availability\",\"polygon\"]}),this._onEntityPropertyChanged(e,\"polygon\",e.polygon,void 0)}l(Object.create)&&(Xd.prototype=Object.create(On.prototype),Xd.prototype.constructor=Xd);Xd.prototype.createFillGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=this._options,o={show:new xn(n&&t.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),distanceDisplayCondition:kn.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(e)),offset:void 0,color:void 0};if(this._materialProperty instanceof kt){let s;l(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(s=this._materialProperty.color.getValue(e,Sme)),l(s)||(s=O.WHITE),o.color=Ot.fromColor(s)}l(i.offsetAttribute)&&(o.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,Cme,Vme)));let r;return i.perPositionHeight&&!l(i.extrudedHeight)?r=new LP(i):r=new J_(i),new Vt({id:t,geometry:r,attributes:o})};Xd.prototype.createOutlineGeometryInstance=function(e){let t=this._entity,n=t.isAvailable(e),i=this._options,o=K.getValueOrDefault(this._outlineColorProperty,e,O.BLACK,Sme),r=this._distanceDisplayConditionProperty.getValue(e),s={show:new xn(n&&t.isShowing&&this._showProperty.getValue(e)&&this._showOutlineProperty.getValue(e)),color:Ot.fromColor(o),distanceDisplayCondition:kn.fromDistanceDisplayCondition(r),offset:void 0};l(i.offsetAttribute)&&(s.offset=Ji.fromCartesian3(K.getValueOrDefault(this._terrainOffsetProperty,e,Cme,Vme)));let a;return i.perPositionHeight&&!l(i.extrudedHeight)?a=new Wu(i):a=new ZP(i),new Vt({id:t,geometry:a,attributes:s})};Xd.prototype._computeCenter=function(e,t){let n=K.getValueOrUndefined(this._entity.polygon.hierarchy,e);if(!l(n))return;let i=n.positions;if(i.length===0)return;let o=this._scene.mapProjection.ellipsoid,r=Dr.fromPoints(i,o),s=r.projectPointsOntoPlane(i,G7e),a=s.length,c=0,d=a-1,u=new D;for(let p=0;p<a;d=p++){let b=s[p],f=s[d],x=b.x*f.y-f.x*b.y,_=D.add(b,f,E7e);_=D.multiplyByScalar(_,x,_),u=D.add(u,_,u),c+=x}let m=1/(c*3);return u=D.multiplyByScalar(u,m,u),r.projectPointOntoEllipsoid(u,t)};Xd.prototype._isHidden=function(e,t){return!l(t.hierarchy)||ii.prototype._isHidden.call(this,e,t)};Xd.prototype._isOnTerrain=function(e,t){let n=On.prototype._isOnTerrain.call(this,e,t),i=t.perPositionHeight,o=l(i)&&(i.isConstant?i.getValue(Be.MINIMUM_VALUE):!0);return n&&!o};Xd.prototype._isDynamic=function(e,t){return!t.hierarchy.isConstant||!K.isConstant(t.height)||!K.isConstant(t.extrudedHeight)||!K.isConstant(t.granularity)||!K.isConstant(t.stRotation)||!K.isConstant(t.textureCoordinates)||!K.isConstant(t.outlineWidth)||!K.isConstant(t.perPositionHeight)||!K.isConstant(t.closeTop)||!K.isConstant(t.closeBottom)||!K.isConstant(t.zIndex)||!K.isConstant(t.arcType)||this._onTerrain&&!K.isConstant(this._materialProperty)&&!(this._materialProperty instanceof kt)};Xd.prototype._setStaticOptions=function(e,t){let n=this._materialProperty instanceof kt,i=this._options;i.vertexFormat=n?ln.VERTEX_FORMAT:so.MaterialSupport.TEXTURED.vertexFormat;let o=t.hierarchy.getValue(Be.MINIMUM_VALUE),r=K.getValueOrUndefined(t.height,Be.MINIMUM_VALUE),s=K.getValueOrDefault(t.heightReference,Be.MINIMUM_VALUE,Je.NONE),a=K.getValueOrUndefined(t.extrudedHeight,Be.MINIMUM_VALUE),c=K.getValueOrDefault(t.extrudedHeightReference,Be.MINIMUM_VALUE,Je.NONE),d=K.getValueOrDefault(t.perPositionHeight,Be.MINIMUM_VALUE,!1);r=On.getGeometryHeight(r,s);let u;if(d?(l(r)&&(r=void 0,wt(_me)),s!==Je.NONE&&d&&(r=void 0,wt(Tme))):(l(a)&&!l(r)&&(r=0),u=On.computeGeometryOffsetAttribute(r,s,a,c)),i.polygonHierarchy=o,i.granularity=K.getValueOrUndefined(t.granularity,Be.MINIMUM_VALUE),i.stRotation=K.getValueOrUndefined(t.stRotation,Be.MINIMUM_VALUE),i.perPositionHeight=d,i.closeTop=K.getValueOrDefault(t.closeTop,Be.MINIMUM_VALUE,!0),i.closeBottom=K.getValueOrDefault(t.closeBottom,Be.MINIMUM_VALUE,!0),i.offsetAttribute=u,i.height=r,i.arcType=K.getValueOrDefault(t.arcType,Be.MINIMUM_VALUE,$t.GEODESIC),i.textureCoordinates=K.getValueOrUndefined(t.textureCoordinates,Be.MINIMUM_VALUE),a=On.getGeometryExtrudedHeight(a,c),a===On.CLAMP_TO_GROUND){let m=J_.computeRectangleFromPositions(i.polygonHierarchy.positions,i.ellipsoid,i.arcType,Lme);a=ai.getMinimumMaximumHeights(m).minimumTerrainHeight}i.extrudedHeight=a};Xd.prototype._getIsClosed=function(e){let t=e.height,n=e.extrudedHeight,i=l(n)&&n!==t;return!e.perPositionHeight&&(!i&&t===0||i&&e.closeTop&&e.closeBottom)};Xd.DynamicGeometryUpdater=Y1;function Y1(e,t,n){ni.call(this,e,t,n)}l(Object.create)&&(Y1.prototype=Object.create(ni.prototype),Y1.prototype.constructor=Y1);Y1.prototype._isHidden=function(e,t,n){return!l(this._options.polygonHierarchy)||ni.prototype._isHidden.call(this,e,t,n)};Y1.prototype._setOptions=function(e,t,n){let i=this._options;i.polygonHierarchy=K.getValueOrUndefined(t.hierarchy,n);let o=K.getValueOrUndefined(t.height,n),r=K.getValueOrDefault(t.heightReference,n,Je.NONE),s=K.getValueOrDefault(t.extrudedHeightReference,n,Je.NONE),a=K.getValueOrUndefined(t.extrudedHeight,n),c=K.getValueOrUndefined(t.perPositionHeight,n);o=On.getGeometryHeight(o,s);let d;if(c?(l(o)&&(o=void 0,wt(_me)),r!==Je.NONE&&c&&(o=void 0,wt(Tme))):(l(a)&&!l(o)&&(o=0),d=On.computeGeometryOffsetAttribute(o,r,a,s)),i.granularity=K.getValueOrUndefined(t.granularity,n),i.stRotation=K.getValueOrUndefined(t.stRotation,n),i.textureCoordinates=K.getValueOrUndefined(t.textureCoordinates,n),i.perPositionHeight=K.getValueOrUndefined(t.perPositionHeight,n),i.closeTop=K.getValueOrDefault(t.closeTop,n,!0),i.closeBottom=K.getValueOrDefault(t.closeBottom,n,!0),i.offsetAttribute=d,i.height=o,i.arcType=K.getValueOrDefault(t.arcType,n,$t.GEODESIC),a=On.getGeometryExtrudedHeight(a,s),a===On.CLAMP_TO_GROUND){let u=J_.computeRectangleFromPositions(i.polygonHierarchy.positions,i.ellipsoid,i.arcType,Lme);a=ai.getMinimumMaximumHeights(u).minimumTerrainHeight}i.extrudedHeight=a};var RP=Xd;var y$n=T(S(),1);var Pqn=T(S(),1);function I7e(e,t,n,i){let o=new hn;i.position&&(o.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:e}));let r=t.length,s=e.length/3,a=(s-r*2)/(r*2),c=si.triangulate(t),d=(a-1)*r*6+c.length*2,u=Ae.createTypedArray(s,d),m,p,b,f,x,_,C=r*2,V=0;for(m=0;m<a-1;m++){for(p=0;p<r-1;p++)b=p*2+m*r*2,_=b+C,f=b+1,x=f+C,u[V++]=f,u[V++]=b,u[V++]=x,u[V++]=x,u[V++]=b,u[V++]=_;b=r*2-2+m*r*2,f=b+1,x=f+C,_=b+C,u[V++]=f,u[V++]=b,u[V++]=x,u[V++]=x,u[V++]=b,u[V++]=_}if(i.st||i.tangent||i.bitangent){let G=new Float32Array(s*2),X=1/(a-1),v=1/n.height,W=n.height/2,F,A,y=0;for(m=0;m<a;m++){for(F=m*X,A=v*(t[0].y+W),G[y++]=F,G[y++]=A,p=1;p<r;p++)A=v*(t[p].y+W),G[y++]=F,G[y++]=A,G[y++]=F,G[y++]=A;A=v*(t[0].y+W),G[y++]=F,G[y++]=A}for(p=0;p<r;p++)F=0,A=v*(t[p].y+W),G[y++]=F,G[y++]=A;for(p=0;p<r;p++)F=(a-1)*X,A=v*(t[p].y+W),G[y++]=F,G[y++]=A;o.st=new Ee({componentDatatype:Q.FLOAT,componentsPerAttribute:2,values:new Float32Array(G)})}let L=s-r*2;for(m=0;m<c.length;m+=3){let G=c[m]+L,X=c[m+1]+L,v=c[m+2]+L;u[V++]=G,u[V++]=X,u[V++]=v,u[V++]=v+r,u[V++]=X+r,u[V++]=G+r}let R=new ut({attributes:o,indices:u,boundingSphere:ce.fromVertices(e),primitiveType:we.TRIANGLES});if(i.normal&&(R=An.computeNormal(R)),i.tangent||i.bitangent){try{R=An.computeTangentAndBitangent(R)}catch{wt(\"polyline-volume-tangent-bitangent\",\"Unable to compute tangents and bitangents for polyline volume geometry\")}i.tangent||(R.attributes.tangent=void 0),i.bitangent||(R.attributes.bitangent=void 0),i.st||(R.attributes.st=void 0)}return R}function EP(e){e=g(e,g.EMPTY_OBJECT);let t=e.polylinePositions,n=e.shapePositions;this._positions=t,this._shape=n,this._ellipsoid=oe.clone(g(e.ellipsoid,oe.WGS84)),this._cornerType=g(e.cornerType,Gi.ROUNDED),this._vertexFormat=Pe.clone(g(e.vertexFormat,Pe.DEFAULT)),this._granularity=g(e.granularity,P.RADIANS_PER_DEGREE),this._workerName=\"createPolylineVolumeGeometry\";let i=1+t.length*h.packedLength;i+=1+n.length*D.packedLength,this.packedLength=i+oe.packedLength+Pe.packedLength+2}EP.pack=function(e,t,n){n=g(n,0);let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=h.packedLength)h.pack(o[i],t,n);let s=e._shape;for(r=s.length,t[n++]=r,i=0;i<r;++i,n+=D.packedLength)D.pack(s[i],t,n);return oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,Pe.pack(e._vertexFormat,t,n),n+=Pe.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};var Zme=oe.clone(oe.UNIT_SPHERE),Rme=new Pe,GP={polylinePositions:void 0,shapePositions:void 0,ellipsoid:Zme,vertexFormat:Rme,cornerType:void 0,granularity:void 0};EP.unpack=function(e,t,n){t=g(t,0);let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=h.packedLength)r[i]=h.unpack(e,t);o=e[t++];let s=new Array(o);for(i=0;i<o;++i,t+=D.packedLength)s[i]=D.unpack(e,t);let a=oe.unpack(e,t,Zme);t+=oe.packedLength;let c=Pe.unpack(e,t,Rme);t+=Pe.packedLength;let d=e[t++],u=e[t];return l(n)?(n._positions=r,n._shape=s,n._ellipsoid=oe.clone(a,n._ellipsoid),n._vertexFormat=Pe.clone(c,n._vertexFormat),n._cornerType=d,n._granularity=u,n):(GP.polylinePositions=r,GP.shapePositions=s,GP.cornerType=d,GP.granularity=u,new EP(GP))};var W7e=new ze;EP.createGeometry=function(e){let t=e._positions,n=yo(t,h.equalsEpsilon),i=e._shape;if(i=jm.removeDuplicatesFromShape(i),n.length<2||i.length<3)return;si.computeWindingOrder2D(i)===ns.CLOCKWISE&&i.reverse();let o=ze.fromPoints(i,W7e),r=jm.computePositions(n,i,o,e,!0);return I7e(r,i,o,e._vertexFormat)};var XP=EP;var e$n=T(S(),1);function P7e(e,t){let n=new hn;n.position=new Ee({componentDatatype:Q.DOUBLE,componentsPerAttribute:3,values:e});let i=t.length,o=n.position.values.length/3,s=e.length/3/i,a=Ae.createTypedArray(o,2*i*(s+1)),c,d,u=0;c=0;let m=c*i;for(d=0;d<i-1;d++)a[u++]=d+m,a[u++]=d+m+1;for(a[u++]=i-1+m,a[u++]=m,c=s-1,m=c*i,d=0;d<i-1;d++)a[u++]=d+m,a[u++]=d+m+1;for(a[u++]=i-1+m,a[u++]=m,c=0;c<s-1;c++){let b=i*c,f=b+i;for(d=0;d<i;d++)a[u++]=d+b,a[u++]=d+f}return new ut({attributes:n,indices:Ae.createTypedArray(o,a),boundingSphere:ce.fromVertices(e),primitiveType:we.LINES})}function WP(e){e=g(e,g.EMPTY_OBJECT);let t=e.polylinePositions,n=e.shapePositions;this._positions=t,this._shape=n,this._ellipsoid=oe.clone(g(e.ellipsoid,oe.WGS84)),this._cornerType=g(e.cornerType,Gi.ROUNDED),this._granularity=g(e.granularity,P.RADIANS_PER_DEGREE),this._workerName=\"createPolylineVolumeOutlineGeometry\";let i=1+t.length*h.packedLength;i+=1+n.length*D.packedLength,this.packedLength=i+oe.packedLength+2}WP.pack=function(e,t,n){n=g(n,0);let i,o=e._positions,r=o.length;for(t[n++]=r,i=0;i<r;++i,n+=h.packedLength)h.pack(o[i],t,n);let s=e._shape;for(r=s.length,t[n++]=r,i=0;i<r;++i,n+=D.packedLength)D.pack(s[i],t,n);return oe.pack(e._ellipsoid,t,n),n+=oe.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};var Gme=oe.clone(oe.UNIT_SPHERE),IP={polylinePositions:void 0,shapePositions:void 0,ellipsoid:Gme,height:void 0,cornerType:void 0,granularity:void 0};WP.unpack=function(e,t,n){t=g(t,0);let i,o=e[t++],r=new Array(o);for(i=0;i<o;++i,t+=h.packedLength)r[i]=h.unpack(e,t);o=e[t++];let s=new"
}