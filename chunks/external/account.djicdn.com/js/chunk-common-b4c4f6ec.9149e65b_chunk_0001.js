{
  "metadata": {
    "source_file": "external\\account.djicdn.com\\js\\chunk-common-b4c4f6ec.9149e65b.js",
    "chunk_index": 1,
    "total_chunks": 2,
    "chunk_size": 57043,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.789Z"
  },
  "content": "\"use strict\";(self[\"webpackChunkmember_center_fe\"]=self[\"webpackChunkmember_center_fe\"]||[]).push([[266],{4213:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"bind-email\"},[\"VERIFY_PHONE\"===e.activeName?n(\"verify-account\",{ref:\"VerifyAccount\",attrs:{type:\"sms\",mainTitle:e.$t(\"v2_tips_verify_binding_phone\"),serviceTips:e.$t(\"v2_phone_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SEND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleVerifySmsBtnTextChange}}):e._e(),\"BIND_EMAIL\"===e.activeName?n(\"bind-account\",{ref:\"BindAccount\",attrs:{type:\"email\",mainTitle:e.$t(\"v2_title_binding_email\"),descriptons:e.$t(\"v2_tips_binding_email_text\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showFAQ:!1,showServiceLinks:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.email,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SUBMIT_BIND_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SEND_BIND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:maskInfo\":function(t){e.email=t},\"update:mask-info\":function(t){e.email=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBindEmailBtnTextChange}}):e._e()],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(26066),d=n(7223),u=n(46918),h=n(78012),p=n(43435),m=n(24450),_=n(88333),v=n(31272),f=n(51501),g=n(72409),E=n(11579),T=n(40759),b=n(74949),N=n(37151),C=n(3372);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A={name:\"binding-email\",mixins:[],data:function(){return{isMobile:u.Fr,moduleName:h.Sn.MODIFY_MOBILE,smsType:p.i.WEB_VALIDATE_PHONE,emailType:m.O.WEB_BIND_EMAIL,activeName:\"VERIFY_PHONE\",inited:!1,maskInfo:\"\",code:\"\",captchaResult:null,ticket:null,email:\"\",verifySmsBtnText:\"\",sendBindEmailBtnText:\"\",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:T.tU}},computed:w({},(0,b.L8)({initData:N.A.common.getter.initData,lang:N.A.common.getter.lang})),methods:w(w(w({},(0,b.PY)({updateNextData:N.A.common.mutation.updateNextData,setShowCaptcha:N.A.captcha.mutation.setShow})),(0,b.i0)({getParamWithTicket:N.A.captcha.action.getParamWithTicket})),{},{next:function(){window.clearInterval(this.interval),this.count=0,this.interval=null,this.code=\"\",this.moduleName=h.Sn.WEB_BIND_EMAIL,this.captchaResult=null,this.resetErrorCode(),this.activeName=\"BIND_EMAIL\"},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={areaCode:t.areaCode,smsType:t.smsType},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to phone\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,g.XP)(g.j9.STEP_1,{path:E.Lq.SMS_VALIDATION_SEND,scene:E.Nd.BINDING_EMAIL_SMS}),n.next=2,_[\"default\"].common.sendLoginPhone(r);case 2:s=n.sent,(0,g.XP)(g.j9.STEP_4,{path:E.Lq.SMS_VALIDATION_SEND,scene:E.Nd.BINDING_EMAIL_SMS}),t.startTiming(),null===(a=t.$ga)||void 0===a||a.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to phone success\")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_SMS,t.verifySmsBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n[\"catch\"](0),null===(l=t.$ga)||void 0===l||l.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to phone error \").concat(d.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_SMS,t.verifySmsBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||f.Sc),t.errorCodeHandle(d),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={email:t.email,emailType:t.emailType},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to email\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,g.XP)(g.j9.STEP_1,{path:E.Lq.SEND_EMAIL,scene:E.Nd.BINDING_EMAIL_NEW_EMAIL,operationalType:g.xe.SEND_EMAIL}),n.next=2,_[\"default\"].common.sendEmail(r);case 2:s=n.sent,(0,g.XP)(g.j9.STEP_4,{path:E.Lq.SEND_EMAIL,scene:E.Nd.BINDING_EMAIL_NEW_EMAIL,operationalType:g.xe.SEND_EMAIL}),t.startTiming(),null===(a=t.$ga)||void 0===a||a.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to email success\")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_BIND_EMAIL,t.sendBindEmailBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n[\"catch\"](0),null===(l=t.$ga)||void 0===l||l.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to email error \").concat(d.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_BIND_EMAIL,t.sendBindEmailBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||f.Sc),t.errorCodeHandle(d,\"resetCaptcha\"),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code to phone\")),(0,g.XP)(g.j9.STEP_6,{path:E.Lq.PHONE_VALIDATION,scene:E.Nd.BINDING_EMAIL_SMS}),t.next=1,_[\"default\"].account.phoneValidation({smsCode:e.code});case 1:o=t.sent,(0,g.kL)(),e.ticket=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.phoneValidateTicket,null===(a=e.$ga)||void 0===a||a.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code to phone success\")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_SMS,e.$t(\"v2_btn_next\")),e.$nextTick(function(){e.next()}),t.next=3;break;case 2:t.prev=2,s=t[\"catch\"](0),null===(r=e.$ga)||void 0===r||r.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code to phone error \").concat(s.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_SMS,e.$t(\"v2_btn_next\"),(null===s||void 0===s?void 0:s.code)||f.Sc),e.errorCodeHandle(s);case 3:return t.prev=3,e.isLoading=!1,t.finish(3);case 4:case\"end\":return t.stop()}},t,null,[[0,2,3,4]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,a={email:e.email,emailCode:e.code,phoneValidateTicket:e.ticket},e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code and bind email\")),(0,g.XP)(g.j9.STEP_6,{path:E.Lq.ACCOUNT_EMAIL_BINDING,scene:E.Nd.BINDING_EMAIL_NEW_EMAIL,operationalType:g.xe.SEND_EMAIL}),t.next=1,_[\"default\"].webBinding.bindingEmail(a);case 1:(0,g.kL)(),null===(i=e.$ga)||void 0===i||i.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code and bind email success\")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_BIND_EMAIL,e.$t(\"v2_weapp_binding_phone_submit\")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t[\"catch\"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event(\"bindEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code and bind email error \").concat(r.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_BIND_EMAIL,e.$t(\"v2_weapp_binding_phone_submit\"),(null===r||void 0===r?void 0:r.code)||f.Sc),e.errorCodeHandle(r,\"resetCaptcha\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_tips_binding_email_success\"),subTitle:this.$t(\"v2_tips_binding_email_success_text\"),redirectBtnText:this.$t(\"v2_btn_done\"),callbackUrl:(0,v.TP)()};this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,_[\"default\"].common.getBindingInfo();case 2:n=t.sent,n.data.canBindEmail?(e.maskInfo=n.data.maskRegisterPhone,e.inited=!0):n.data.maskEmail&&(i=(0,v.TP)(),window.location.replace(i)),t.next=4;break;case 3:t.prev=3,o=t[\"catch\"](1),a=o.code?e.$t(\"v2_error_code_\".concat(o.code)):e.$t(\"v2_tips_off_line\"),e.failNavigateHandle(a);case 4:case\"end\":return t.stop()}},t,null,[[1,3]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,v.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;(\"resetCaptcha\"===t||f.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t(\"v2_error_code_\".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleVerifySmsBtnTextChange:function(e){this.verifySmsBtnText=e},handleSendBindEmailBtnTextChange:function(e){this.sendBindEmailBtnText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},components:{VerifyAccount:l.A,BindAccount:d.A},beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_title_binding_email\"))})}},k=A,O=n(7358),I=(0,O.A)(k,i,a,!1,null,null,null),R=I.exports},9013:function(e,t,n){n.d(t,{P:function(){return i}});var i=50},17782:function(e,t,n){var i=n(13667),a=n(74949),o=n(37151),r=n(40445),s=n(39567);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.A={data:function(){var e=this.$route.query,t=e.errorCode,n=e.callbackUrl;return{errorCode:t,callbackUrl:n,title:\"\",count:10,timer:null,OAuthType:\"Wechat\"}},computed:l(l({},(0,a.L8)({nextData:o.A.common.getter.nextData})),{},{errorMsg:function(){return this.errorCode?this.$t(\"v2_error_code_\".concat(this.errorCode)):this.nextData&&this.nextData.title},subJumpBtnText:function(){var e,t=this.$t(\"v2_btn_go_back\");return null!==(e=this.nextData)&&void 0!==e&&e.cancelTimer?t:\"\".concat(t).concat(this.count>=0?\"(\".concat(this.count,\"s)\"):\"\")}}),mounted:function(){},methods:l(l({},(0,a.PY)({updateCodeVisible:o.A.common.mutation.updateCodeVisible,updateNextData:o.A.common.mutation.updateNextData})),{},{handleJumpStore:function(){this.timer&&clearInterval(this.timer),window.location.href=r.yJ},handleBack:function(){this.goCallBackUrl()},goCallBackUrl:function(){var e;if(this.callbackUrl)e=this.callbackUrl;else if(this.nextData&&this.nextData.callbackUrl){var t=this.nextData.callbackUrl;e=t}e&&(0,s.Ll)(e)?window.location.href=e:this.$router.go(-1)},goBack:function(){var e,t=this;null!==(e=this.nextData)&&void 0!==e&&e.cancelTimer||(this.timer=window.setInterval(function(){t.count>=0?t.count--:(window.clearInterval(t.timer),t.goCallBackUrl())},1e3))}}),beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.updateNextData({nextData:null})},beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"))})}}},27179:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"apple-oauth-bind-email\"},[n(\"bind-account\",{ref:\"AppleBindAccount\",attrs:{type:\"email\",isValueFormat:\"\",mainTitle:e.$t(\"v2_title_apple_binding_email\"),descriptons:e.$t(\"v2_apple_binding_email_reminder\"),showServiceLinks:!1,showLogo:!1,theme:\"black\",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.email,captchaResult:e.captchaResult,extraConfirmVerify:e.checkAgreeVerify,btnAcLabel:e.USAGE_TAG_VALUE.APPLE_ACCOUNT_SUBMIT_BIND,sendBtnAclabel:e.USAGE_TAG_VALUE.APPLE_ACCOUNT_SEND_BIND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:maskInfo\":function(t){e.email=t},\"update:mask-info\":function(t){e.email=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode}},[n(\"policy-and-subscription\",{attrs:{showErrorMessage:e.showCheckAgreeError,showCheckSubscription:!1},on:{checkAgreeChange:e.checkAgreeChange}})],1)],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(7223),d=n(98276),u=n(74949),h=n(31272),p=n(37151),m=n(88333),_=n(78012),v=n(24450),f=n(51501),g=n(40759);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=\"KEY_PARAM_EMPTY_ERROR_MESSAGE\",N={name:\"apple-oauth-bind-email\",data:function(){return{moduleName:_.Sn.APPLE_BIND_EMAIL,emailType:v.O.APPLE_BINDING,inited:!0,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,count:0,maskInfo:\"\",code:\"\",captchaResult:null,email:\"\",checkAgree:!1,showCheckAgreeError:!1,USAGE_TAG_VALUE:g.tU}},computed:T({},(0,u.L8)({initData:p.A.common.getter.initData,lang:p.A.common.getter.lang})),methods:T(T(T({},(0,u.PY)({updateNextData:p.A.common.mutation.updateNextData,setShowCaptcha:p.A.captcha.mutation.setShow})),(0,u.i0)({getParamWithTicket:p.A.captcha.action.getParamWithTicket})),{},{fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$route.query.oauthLoginTicket){t.next=1;break}throw new Error(b);case 1:return e.loading=!0,e.inited=!1,n={uuid:e.$route.query.oauthLoginTicket},t.next=2,m[\"default\"].middleware.getOauthUserInfo(n);case 2:e.inited=!0,t.next=5;break;case 3:if(t.prev=3,i=t[\"catch\"](0),(null===i||void 0===i?void 0:i.message)!==b){t.next=4;break}return e.failNavigateHandle(e.$t(\"v2_error_code_609\")),t.abrupt(\"return\");case 4:e.failNavigateHandle(i.code?e.$t(\"v2_error_code_\".concat(i.code)):\"\");case 5:return t.prev=5,e.loading=!1,t.finish(5);case 6:case\"end\":return t.stop()}},t,null,[[0,3,5,6]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.AppleBindAccount)||void 0===e||e.resetCaptcha()},errorCodeHandle:function(e,t){if((null===e||void 0===e?void 0:e.message)!==b)if(e.code){var n=e.code;\"resetCaptcha\"===t||f.f9.concat(f.QI).includes(n)?(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha(),this.errorMsg=this.$t(\"v2_error_code_\".concat(n))):n===f.Zm?this.failNavigateHandle(this.$t(\"v2_error_code_609\")):f.Xm.includes(n)?this.errorMsg=this.$t(\"v2_apple_binding_email_binding\"):f.a7.includes(n)?this.errorMsg=this.$t(\"v2_apple_binding_email_locked\"):this.errorMsg=this.$t(\"v2_error_code_\".concat(n)),this.errorCode=n}else this.errorMsg=this.$t(\"v2_tips_off_line\");else this.failNavigateHandle(this.$t(\"v2_error_code_609\"))},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t.email){n.next=1;break}return n.abrupt(\"return\");case 1:return t.isSendLoading=!0,i={email:t.email,emailType:t.emailType},t.resetErrorCode(),n.next=2,t.getParamWithTicket({moduleName:t.moduleName,param:i,result:t.captchaResult});case 2:return a=n.sent,n.next=3,m[\"default\"].common.sendEmail(a);case 3:o=n.sent,t.startTiming(),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(o)),n.next=5;break;case 4:n.prev=4,r=n[\"catch\"](0),t.errorCodeHandle(r,\"resetCaptcha\"),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(r));case 5:return n.prev=5,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(5);case 6:case\"end\":return n.stop()}},n,null,[[0,4,5,6]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$route.query.oauthLoginTicket){t.next=1;break}throw new Error(b);case 1:return e.isLoading=!0,n={email:e.email,emailCode:e.code,oauthLoginTicket:e.$route.query.oauthLoginTicket},t.next=2,m[\"default\"].apple.bindingEmail(n);case 2:if(i=t.sent,i.data.callbackUrl){t.next=3;break}throw new Error(b);case 3:window.location.replace(i.data.callbackUrl),t.next=5;break;case 4:t.prev=4,a=t[\"catch\"](0),e.isLoading=!1,e.errorCodeHandle(a);case 5:case\"end\":return t.stop()}},t,null,[[0,4]])}))()},checkAgreeChange:function(e){this.checkAgree=e},checkAgreeVerify:function(){return this.checkAgree||(this.showCheckAgreeError=!0),this.checkAgree},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,h.hL)(\"login\",document.URL)};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_title_apple_binding_email\"))})},components:{BindAccount:l.A,PolicyAndSubscription:d.A}},C=N,S=n(7358),w=(0,S.A)(C,i,a,!1,null,null,null),A=w.exports},32594:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"bind-security-phone\"},[\"choose-verify\"===e.activeName?n(\"choose-verify\",{attrs:{inited:e.inited,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,hasEmail:e.hasEmail,hasPhone:e.hasPhone,maskEmail:e.maskEmail,maskPhone:e.maskRegisterPhone},on:{toVerify:e.handleToVerify}}):e._e(),\"verify-phone\"===e.activeName?n(\"verify-account\",{ref:\"VerifyAccount\",attrs:{type:\"sms\",mainTitle:e.$t(\"v2_tips_verify_security_phone\"),serviceTips:e.$t(\"v2_phone_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SEND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleVerifySmsBtnTextChange}},[e.showSwitchLink?n(\"div\",{staticClass:\"text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{staticClass:\"mt-6\",attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_CHANGE_VERIFY},on:{click:function(){return e.handleToVerify()}}},[e._v(\" \"+e._s(e.$t(\"v2_select_another_verification_method\"))+\" \")])],1):e._e()]):e._e(),\"verify-email\"===e.activeName?n(\"verify-account\",{ref:\"VerifyAccount\",attrs:{type:\"email\",mainTitle:e.$t(\"v2_tips_verify_security_phone\"),serviceTips:e.$t(\"v2_email_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SEND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n(\"div\",{staticClass:\"text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{staticClass:\"mt-6\",attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_CHANGE_VERIFY},on:{click:function(){return e.handleToVerify()}}},[e._v(\" \"+e._s(e.$t(\"v2_select_another_verification_method\"))+\" \")])],1):e._e()]):e._e(),\"bind-security-phone\"===e.activeName?n(\"bind-account\",{ref:\"BindAccount\",attrs:{type:\"sms\",isValueFormat:\"\",mainTitle:e.$t(\"v2_bind_security_phone_number\"),descriptons:e.$t(\"v2_bind_security_phone_number_cue_text\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showFAQ:!1,showServiceLinks:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.phone,areaCode:e.areaCode,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_BIND_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SEND_BIND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:maskInfo\":function(t){e.phone=t},\"update:mask-info\":function(t){e.phone=t},\"update:areaCode\":function(t){e.areaCode=t},\"update:area-code\":function(t){e.areaCode=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendSmsBtnTextChange}}):e._e()],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(26066),d=n(7223),u=n(46918),h=n(78012),p=n(43435),m=n(24450),_=n(40759),v=n(88333),f=n(31272),g=n(51501),E=n(74949),T=n(37151),b=n(3372),N=n(95441),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"card-container\",{staticClass:\"choose-verify\",attrs:{mainTitle:e.$t(\"v2_identity_verification_is_required\"),descriptons:e.$t(\"v2_please_select_a_verification_method\"),showSkeleton:!e.inited,showServiceLinks:!0,serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showFAQ:!1}},[e.hasPhone?n(\"ac-button\",{staticClass:\"second-btn\",attrs:{type:\"variant\",block:\"\",buttonType:e.$t(\"v2_weapp_valid_to_phone\"),acLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_SECURITY_PHONE_PHONE_VERIFY},on:{click:function(){return e.toVerify(\"phone\")}}},[e._v(\" \"+e._s(e.$t(\"v2_use_verify_method\"))+\" \"+e._s(e.maskPhone)+\" \")]):e._e(),e.hasEmail?n(\"ac-button\",{staticClass:\"second-btn\",staticStyle:{\"text-transform\":\"none\"},attrs:{type:\"variant\",block:\"\",buttonType:e.$t(\"v2_weapp_valid_to_email\"),acLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_SECURITY_PHONE_EMAIL_VERIFY},on:{click:function(){return e.toVerify(\"email\")}}},[e._v(\" \"+e._s(e.$t(\"v2_use_verify_method\"))+\" \"+e._s(e.maskEmail)+\" \")]):e._e()],1)},S=[],w=n(32368),A=n(52621);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I={name:\"bind-security-phone-choose-verify\",props:{errorCode:[Number,String],errorMsg:String,moduleName:String,loading:Boolean,hasEmail:Boolean,hasPhone:Boolean,maskEmail:String,maskPhone:String,inited:Boolean},mixins:[],data:function(){return{USAGE_TAG_VALUE:_.tU}},computed:O({},(0,E.L8)({initData:T.A.common.getter.initData,lang:T.A.common.getter.lang})),methods:{toVerify:function(e){this.$emit(\"toVerify\",e)}},watch:{},components:{CardContainer:w.A,acButton:A.A}},R=I,U=n(7358),L=(0,U.A)(R,C,S,!1,null,\"633306c0\",null),y=L.exports;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V={name:\"binding-security-phone\",mixins:[],components:{VerifyAccount:l.A,BindAccount:d.A,ChooseVerify:y,acLink:N.A},data:function(){return{isMobile:u.Fr,moduleName:h.Sn.WEB_BIND_SECURITY_PHONE,smsType:p.i.WEB_BIND_SECURITY_PHONE,emailType:m.O.EMAIL_VALIDATE,activeName:\"choose-verify\",inited:!1,hasEmail:!1,hasPhone:!1,maskEmail:\"\",maskRegisterPhone:\"\",maskInfo:\"\",code:\"\",captchaResult:null,ticket:null,phone:\"\",areaCode:\"86\",sendEmailBtnText:\"\",sendSmsBtnText:\"\",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:_.tU,verifySmsBtnText:\"\",verificationMethod:\"\"}},computed:D(D({},(0,E.L8)({initData:T.A.common.getter.initData,lang:T.A.common.getter.lang})),{},{showSwitchLink:function(){return this.hasEmail&&this.hasPhone}}),methods:D(D(D({},(0,E.PY)({updateNextData:T.A.common.mutation.updateNextData,setShowCaptcha:T.A.captcha.mutation.setShow})),(0,E.i0)({getParamWithTicket:T.A.captcha.action.getParamWithTicket})),{},{clearTiming:function(){this.count=0,this.interval&&window.clearInterval(this.interval)},handleVerifySmsBtnTextChange:function(e){this.verifySmsBtnText=e},next:function(e){document.documentElement.scrollTop=0,this.clearTiming(),e||(this.activeName=\"choose-verify\",this.moduleName=h.Sn.WEB_BIND_SECURITY_PHONE),\"phone\"===e&&(this.activeName=\"verify-phone\",this.validateType=\"phone\",this.maskInfo=this.maskRegisterPhone,this.moduleName=h.Sn.MODIFY_MOBILE),\"email\"===e&&(this.activeName=\"verify-email\",this.validateType=\"email\",this.maskInfo=this.maskEmail,this.moduleName=h.Sn.WEB_VALIDATE_EMAIL),\"submit\"===e&&(this.activeName=\"bind-security-phone\",this.moduleName=h.Sn.WEB_BIND_SECURITY_PHONE)},handleToVerify:function(e){this.resetErrorCode(),this.next(e)},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t.isSendLoading=!0,t.resetErrorCode(),\"verify-email\"!==t.activeName){n.next=3;break}return i={email:t.maskInfo,emailType:t.emailType,scene:\"BIND_SECURE\"},n.next=1,t.getParamWithTicket({moduleName:h.Sn.WEB_VALIDATE_EMAIL,param:i,result:t.captchaResult});case 1:return a=n.sent,n.next=2,v[\"default\"].webBinding.sendValidateEmail(a);case 2:o=n.sent,t.startTiming(),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_EMAIL,t.sendEmailBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(o)),n.next=6;break;case 3:if(\"verify-phone\"!==t.activeName){n.next=6;break}return r={areaCode:t.areaCode,smsType:p.i.WEB_VALIDATE_PHONE,scene:\"BIND_SECURE\"},n.next=4,t.getParamWithTicket({moduleName:h.Sn.MODIFY_MOBILE,param:r,result:t.captchaResult});case 4:return s=n.sent,n.next=5,v[\"default\"].common.sendLoginPhone(s);case 5:l=n.sent,t.startTiming(),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_SMS,t.verifySmsBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(l));case 6:n.next=8;break;case 7:n.prev=7,d=n[\"catch\"](0),\"verify-email\"===t.activeName?(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_EMAIL,t.sendEmailBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||g.Sc):\"verify-phone\"===t.activeName&&(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_SMS,t.verifySmsBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||g.Sc),t.errorCodeHandle(d),\"function\"===typeof(null===e||void 0===e?void 0:e.error)&&e.error(d);case 8:return n.prev=8,t.isSendLoading=!1,\"function\"===typeof(null===e||void 0===e?void 0:e[\"finally\"])&&e[\"finally\"](),n.finish(8);case 9:case\"end\":return n.stop()}},n,null,[[0,7,8,9]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={areaCode:t.areaCode,phone:t.phone,smsType:t.smsType,scene:\"BIND_SECURE\"},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event(\"bindPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" send code to phone\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,n.next=2,v[\"default\"].common.sendSmsCode(r);case 2:s=n.sent,t.startTiming(),null===(a=t.$ga)||void 0===a||a.event(\"bindPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" send code to phone success\")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n[\"catch\"](0),null===(l=t.$ga)||void 0===l||l.event(\"bindPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" send code to phone error \").concat(d.code)),t.errorCodeHandle(d,\"resetCaptcha\"),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||g.Sc),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u,h,p;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoading=!0,e.resetErrorCode(),\"verify-email\"!==e.activeName){t.next=2;break}return null===(n=e.$ga)||void 0===n||n.event(\"bindSecurityPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code to email\")),t.next=1,v[\"default\"].webBinding.validateEmail({emailCode:e.code,scene:\"BIND_SECURE\"});case 1:return r=t.sent,e.ticket=(null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.validateTicket)||(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.emailValidateTicket),null===(o=e.$ga)||void 0===o||o.event(\"bindSecurityPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code to email success\")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_EMAIL,e.$t(\"v2_btn_next\")),e.verificationMethod=\"EMAIL\",e.next(\"submit\"),t.abrupt(\"return\");case 2:if(\"verify-phone\"!==e.activeName){t.next=4;break}return null===(s=e.$ga)||void 0===s||s.event(\"bindSecurityPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code to phone\")),t.next=3,v[\"default\"].account.phoneValidation({smsCode:e.code,scene:\"BIND_SECURE\"});case 3:return h=t.sent,e.ticket=(null===h||void 0===h||null===(l=h.data)||void 0===l?void 0:l.validateTicket)||(null===h||void 0===h||null===(d=h.data)||void 0===d?void 0:d.phoneValidateTicket),null===(u=e.$ga)||void 0===u||u.event(\"bindSecurityPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code to phone success\")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\")),e.verificationMethod=\"SMS\",e.next(\"submit\"),t.abrupt(\"return\");case 4:t.next=6;break;case 5:t.prev=5,p=t[\"catch\"](0),\"verify-email\"===e.activeName?(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_EMAIL,e.$t(\"v2_btn_next\"),(null===p||void 0===p?void 0:p.code)||g.Sc):\"verify-phone\"===e.activeName&&(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\"),(null===p||void 0===p?void 0:p.code)||g.Sc),e.errorCodeHandle(p);case 6:return t.prev=6,e.isLoading=!1,t.finish(6);case 7:case\"end\":return t.stop()}},t,null,[[0,5,6,7]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,a={areaCode:e.areaCode,securePhone:e.phone,smsCode:e.code,validateTicket:e.ticket,verificationMethod:e.verificationMethod||(\"email\"===e.validateType?\"EMAIL\":\"SMS\"),scene:\"BIND_SECURE\"},e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"bindPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code and bind phone\")),t.next=1,v[\"default\"].webBinding.bindingSecuredPhone(a);case 1:null===(i=e.$ga)||void 0===i||i.event(\"bindPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code and bind phone success\")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t[\"catch\"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event(\"bindPhone btn\",\"Click\",\"\".concat((0,f.R7)(),\" check code and bind phone error \").concat(r.code)),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\"),(null===r||void 0===r?void 0:r.code)||g.Sc),e.errorCodeHandle(r,\"resetCaptcha\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_security_phone_number_bind_success\"),redirectBtnText:this.$t(\"v2_btn_done\")},t=(0,f.TP)();e.callbackUrl=t||\"/account/profile\",this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u,p;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,v[\"default\"].common.getSecureBindingInfo();case 2:if(o=t.sent,r=Array.isArray(null===(n=o.data)||void 0===n?void 0:n.maskSecurePhone)?o.data.maskSecurePhone[0]||\"\":(null===(i=o.data)||void 0===i?void 0:i.maskSecurePhone)||\"\",s=r||(null===(a=o.data)||void 0===a?void 0:a.maskSecurityPhone)||\"\",!s){t.next=3;break}return l=(0,f.TP)(),window.location.replace(l),t.abrupt(\"return\");case 3:if(e.maskEmail=o.data.maskEmail||\"\",e.maskRegisterPhone=o.data.maskRegisterPhone||\"\",e.hasEmail=!!e.maskEmail,e.hasPhone=!!e.maskRegisterPhone,!e.hasEmail||!e.hasPhone){t.next=4;break}e.activeName=\"choose-verify\",e.moduleName=h.Sn.WEB_BIND_SECURITY_PHONE,t.next=7;break;case 4:if(!e.hasPhone){t.next=5;break}e.activeName=\"verify-phone\",e.validateType=\"phone\",e.maskInfo=e.maskRegisterPhone,e.moduleName=h.Sn.MODIFY_MOBILE,t.next=7;break;case 5:if(!e.hasEmail){t.next=6;break}e.activeName=\"verify-email\",e.validateType=\"email\",e.maskInfo=e.maskEmail,e.moduleName=h.Sn.WEB_VALIDATE_EMAIL,t.next=7;break;case 6:return d=e.$t(\"v2_tips_off_line\"),e.failNavigateHandle(d),t.abrupt(\"return\");case 7:e.inited=!0,t.next=9;break;case 8:t.prev=8,p=t[\"catch\"](1),u=p.code?e.$t(\"v2_error_code_\".concat(p.code)):e.$t(\"v2_tips_off_line\"),e.failNavigateHandle(u);case 9:case\"end\":return t.stop()}},t,null,[[1,8]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,f.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;(\"resetCaptcha\"===t||g.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t(\"v2_error_code_\".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleSendBtnTextChange:function(e){this.sendEmailBtnText=e},handleSendSmsBtnTextChange:function(e){this.sendSmsBtnText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},beforeRouteEnter:function(e,t,n){n(function(e){\"zh_CN\"===e.lang?document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_title_bind_security_phone\")):e.failNavigateHandle(e.$t(\"v2_error_code_520\"))})}},x=V,M=(0,U.A)(x,i,a,!1,null,null,null),B=M.exports},39013:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"error-panel\",{attrs:{className:\"page-account-fail\",mainTitle:e.nextData&&e.nextData.title||e.$t(\"v2_common_error_description\"),subTitle:e.nextData&&e.nextData.subTitle,subJumpBtnText:e.subJumpBtnText,mainJumpBtnText:e.mainJumpBtnText,subJumpBtnType:\"default\"},on:{jumpSub:e.handleJumpSub,jumpMain:e.handleJumpMain}},[n(\"ac-icon\",{staticClass:\"icon-warning mt-8\",attrs:{slot:\"icon\",name:\"error\",size:56,color:\"#d32029\"},slot:\"icon\"})],1)},a=[],o=n(19740),r=n(39567),s=n(31272),c=n(20991),l=n(17782),d={name:\"Fail\",mixins:[l.A],computed:{subJumpBtnText:function(){var e;if(null!==(e=this.nextData)&&void 0!==e&&e.subJumpBtnText)return this.nextData.subJumpBtnText;var t=this.$t(\"v2_btn_go_back\");return\"\".concat(t).concat(this.count>=0?\"(\".concat(this.count,\"s)\"):\"\")},mainJumpBtnText:function(){var e;return null!==(e=this.nextData)&&void 0!==e&&e.mainJumpBtnText?this.nextData.mainJumpBtnText:this.$t(\"v2_common_jump_to_store\")}},mounted:function(){var e;this.failCodeNavigateHandle(),null!==(e=this.nextData)&&void 0!==e&&e.jumpMainUrl||this.goBack()},methods:{failCodeNavigateHandle:function(){var e=this.$route.query,t=e.errorCode,n=e.oauthType,i=c.QW.includes(n);if(i&&\"613\"===t){var a=\"Wechat\"===n?this.$t(\"v2_tips_wechat\"):n,o=(0,r.Qq)((0,s.dw)(\"oauth/auth/url\",\"v2\"),{type:n,backUrl:\"\".concat(window.location.origin,\"/account/oauth\")}),l=\"v2_tips_oauth_center_is_binding\",d=\"v2_tips_back_oauth_login\",u=c.FZ[n];u&&(o=u),c.W2.includes(n)&&(l=\"v2_tips_oauth_account_is_binding\",d=\"v2_tips_go_to_oauth_login\");var h={title:this.$t(\"v2_title_oauth_binding_error\"),subTitle:this.$t(l).replace(/%@/g,a),subJumpBtnText:this.$t(\"v2_tips_back_account_bind\"),mainJumpBtnText:this.$t(d).replace(\"%@\",a),jumpSubUrl:\"/account/oauth\",jumpMainUrl:o};this.updateNextData({nextData:h})}if(\"621\"===t){var p={title:this.$t(\"v2_title_oauth_no_email\"),subTitle:this.$t(\"v2_common_oauth_noEmailReject\"),subJumpBtnText:this.$t(\"v2_tips_back_account_bind\"),mainJumpBtnText:this.$t(\"v2_go_to_facebook\"),jumpSubUrl:\"/account/oauth\",jumpMainUrl:\"//www.facebook.com/settings?tab=applications\"};this.updateNextData({nextData:p})}},handleJumpSub:function(){var e;if(null!==(e=this.nextData)&&void 0!==e&&e.jumpSubUrl){var t=this.nextData.jumpSubUrl;window.location.href=t}else this.goCallBackUrl()},handleJumpMain:function(){var e;if(null!==(e=this.nextData)&&void 0!==e&&e.jumpMainUrl){var t=this.nextData.jumpMainUrl;window.location.href=t}else this.handleJumpStore()}},components:{ErrorPanel:o.A}},u=d,h=n(7358),p=(0,h.A)(u,i,a,!1,null,null,null),m=p.exports},57446:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"bind-phone\"},[\"choose-verify\"===e.activeName?n(\"choose-verify\",{attrs:{inited:e.inited,hasEmail:e.hasEmail,hasPhone:!1,hasSecurityPhone:e.hasSecurityPhone,maskEmail:e.maskEmail,maskPhone:\"\",maskSecurityPhone:e.maskSecurityPhone},on:{toVerify:e.handleToVerify}}):e._e(),\"VERIFY_EMAIL\"===e.activeName?n(\"verify-account\",{ref:\"VerifyAccount\",attrs:{type:\"email\",mainTitle:e.$t(\"v2_tips_verify_security_phone\"),serviceTips:e.$t(\"v2_email_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SUBMIT_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SEND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n(\"div\",{staticClass:\"text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{staticClass:\"mt-6\",attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_CHANGE_VERIFY},on:{click:e.handleToChoose}},[e._v(\" \"+e._s(e.$t(\"v2_select_another_verification_method\"))+\" \")])],1):e._e()]):e._e(),\"VERIFY_SECURITY_PHONE\"===e.activeName?n(\"verify-account\",{ref:\"VerifySecurity\",attrs:{type:\"sms\",mainTitle:e.$t(\"v2_tips_verify_security_phone\")||e.$t(\"v2_tips_verify_binding_phone\"),serviceTips:e.$t(\"v2_phone_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskSecurityPhone,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SEND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n(\"div\",{staticClass:\"text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{staticClass:\"mt-6\",attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_CHANGE_VERIFY},on:{click:e.handleToChoose}},[e._v(\" \"+e._s(e.$t(\"v2_select_another_verification_method\"))+\" \")])],1):e._e()]):e._e(),\"BIND_PHONE\"===e.activeName?n(\"bind-account\",{ref:\"BindAccount\",attrs:{type:\"sms\",isValueFormat:\"\",mainTitle:e.$t(\"v2_title_binding_phone\"),descriptons:e.$t(\"v2_tips_binding_phone_text\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showFAQ:!1,showServiceLinks:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.phone,areaCode:e.areaCode,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SUBMIT_BIND_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SEND_BIND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:maskInfo\":function(t){e.phone=t},\"update:mask-info\":function(t){e.phone=t},\"update:areaCode\":function(t){e.areaCode=t},\"update:area-code\":function(t){e.areaCode=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendSmsBtnTextChange}}):e._e()],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(26066),d=n(7223),u=n(611),h=n(46918),p=n(78012),m=n(43435),_=n(24450),v=n(40759),f=n(88333),g=n(31272),E=n(51501),T=n(74949),b=n(37151),N=n(3372),C=n(95441),S=n(72409),w=n(11579);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O={name:\"binding-phone\",mixins:[],data:function(){return{isMobile:h.Fr,moduleName:p.Sn.SEND_VALIDATE_EMAIL,smsType:m.i.WEB_BIND_PHONE,emailType:_.O.EMAIL_VALIDATE,activeName:\"VERIFY_EMAIL\",inited:!1,maskInfo:\"\",maskEmail:\"\",maskSecurityPhone:\"\",hasEmail:!1,hasSecurityPhone:!1,code:\"\",captchaResult:null,ticket:null,phone:\"\",areaCode:\"86\",sendEmailBtnText:\"\",sendSmsBtnText:\"\",verificationMethod:\"\",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:v.tU}},computed:k(k({},(0,T.L8)({initData:b.A.common.getter.initData,lang:b.A.common.getter.lang})),{},{showSwitchLink:function(){return this.hasEmail&&this.hasSecurityPhone}}),methods:k(k(k({},(0,T.PY)({updateNextData:b.A.common.mutation.updateNextData,setShowCaptcha:b.A.captcha.mutation.setShow})),(0,T.i0)({getParamWithTicket:b.A.captcha.action.getParamWithTicket})),{},{handleToChoose:function(){this.resetErrorCode(),this.activeName=\"choose-verify\",this.moduleName=p.Sn.SEND_VALIDATE_EMAIL},handleToVerify:function(e){if(this.resetErrorCode(),\"email\"===e)return this.activeName=\"VERIFY_EMAIL\",this.maskInfo=this.maskEmail,void(this.moduleName=p.Sn.SEND_VALIDATE_EMAIL);\"security-phone\"===e&&(this.activeName=\"VERIFY_SECURITY_PHONE\",this.moduleName=p.Sn.WEB_SECURE_AUTHORIZATION_PHONE)},next:function(){document.documentElement.scrollTop=0,window.clearInterval(this.interval),this.count=0,this.interval=null,this.code=\"\",this.moduleName=p.Sn.EMAIL_BINDING_PHONE,this.captchaResult=null,this.resetErrorCode(),this.activeName=\"BIND_PHONE\"},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d,u;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,i=\"VERIFY_EMAIL\"===t.activeName?{email:t.maskEmail,emailType:t.emailType}:\"VERIFY_SECURITY_PHONE\"===t.activeName?{areaCode:t.areaCode,smsType:m.i.SECURE_PHONE_AUTHORIZATION,scene:\"BIND_PHONE\"}:{areaCode:t.areaCode,smsType:m.i.WEB_VALIDATE_PHONE,scene:\"BIND_PHONE\"},t.resetErrorCode(),a=t.moduleName,\"VERIFY_PHONE\"===t.activeName&&(a=p.Sn.MODIFY_MOBILE),\"VERIFY_EMAIL\"===t.activeName&&(a=p.Sn.WEB_VALIDATE_EMAIL),\"VERIFY_SECURITY_PHONE\"===t.activeName&&(a=p.Sn.WEB_SECURE_AUTHORIZATION_PHONE),n.next=1,t.getParamWithTicket({moduleName:a,param:i,result:t.captchaResult});case 1:if(o=n.sent,\"VERIFY_EMAIL\"!==t.activeName){n.next=3;break}return(0,S.XP)(S.j9.STEP_1,{path:w.Lq.EMAIL_VALIDATION_SEND,scene:w.Nd.BINDING_PHONE_EMAIL,operationalType:S.xe.SEND_EMAIL}),n.next=2,f[\"default\"].webBinding.sendValidateEmail(o);case 2:r=n.sent,(0,S.XP)(S.j9.STEP_4,{path:w.Lq.EMAIL_VALIDATION_SEND,scene:w.Nd.BINDING_PHONE_EMAIL,operationalType:S.xe.SEND_EMAIL}),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_EMAIL,t.sendEmailBtnText||t.$t(\"v2_btn_sendBtn\")),t.startTiming(),null===(s=t.$ga)||void 0===s||s.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to email success\")),n.next=5;break;case 3:return null===(l=t.$ga)||void 0===l||l.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone\")),n.next=4,f[\"default\"].common.sendLoginPhone(o);case 4:r=n.sent,t.startTiming(),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\"));case 5:null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(r)),n.next=7;break;case 6:n.prev=6,u=n[\"catch\"](0),null===(d=t.$ga)||void 0===d||d.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone error \").concat(u.code)),t.errorCodeHandle(u),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(u));case 7:return n.prev=7,t.isSendLoading=!1,n.finish(7);case 8:case\"end\":return n.stop()}},n,null,[[0,6,7,8]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={areaCode:t.areaCode,phone:t.phone,smsType:t.smsType,scene:\"BIND_PHONE\"},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,S.XP)(S.j9.STEP_1,{path:w.Lq.SEND_SMS,scene:w.Nd.BINDING_PHONE_NEW_SMS}),n.next=2,f[\"default\"].common.sendSmsCode(r);case 2:s=n.sent,(0,S.XP)(S.j9.STEP_4,{path:w.Lq.SEND_SMS,scene:w.Nd.BINDING_PHONE_NEW_SMS}),t.startTiming(),null===(a=t.$ga)||void 0===a||a.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone success\")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n[\"catch\"](0),null===(l=t.$ga)||void 0===l||l.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone error \").concat(d.code)),t.errorCodeHandle(d,\"resetCaptcha\"),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||E.Sc),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u,h,p;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoading=!0,e.resetErrorCode(),\"VERIFY_EMAIL\"!==e.activeName){t.next=2;break}return null===(n=e.$ga)||void 0===n||n.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code to email\")),(0,S.XP)(S.j9.STEP_6,{path:w.Lq.EMAIL_VALIDATION,scene:w.Nd.BINDING_PHONE_EMAIL,operationalType:S.xe.SEND_EMAIL}),t.next=1,f[\"default\"].webBinding.validateEmail({emailCode:e.code});case 1:o=t.sent,(0,S.kL)(),e.ticket=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.emailValidateTicket,null===(a=e.$ga)||void 0===a||a.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code to email success\")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_EMAIL,e.$t(\"v2_btn_next\")),e.verificationMethod=\"\",t.next=4;break;case 2:return null===(r=e.$ga)||void 0===r||r.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code to security phone\")),t.next=3,f[\"default\"].account.phoneValidation({smsCode:e.code,verificationMethod:\"SECURE\",scene:\"BIND_PHONE\"});case 3:u=t.sent,e.ticket=(null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.validateTicket)||(null===u||void 0===u||null===(l=u.data)||void 0===l?void 0:l.phoneValidateTicket),null===(d=e.$ga)||void 0===d||d.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code to security phone success\")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\")),e.verificationMethod=\"SECURE\";case 4:e.next(),t.next=6;break;case 5:t.prev=5,p=t[\"catch\"](0),null===(h=e.$ga)||void 0===h||h.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code to email error \").concat(p.code)),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_EMAIL,e.$t(\"v2_btn_next\"),(null===p||void 0===p?void 0:p.code)||E.Sc),e.errorCodeHandle(p);case 6:return t.prev=6,e.isLoading=!1,t.finish(6);case 7:case\"end\":return t.stop()}},t,null,[[0,5,6,7]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,a={areaCode:e.areaCode,phone:e.phone,smsCode:e.code,emailValidateTicket:e.ticket},\"SECURE\"===e.verificationMethod&&(a.verificationMethod=\"SECURE\"),e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code and bind phone\")),(0,S.XP)(S.j9.STEP_6,{path:w.Lq.PHONE_BINGDING,scene:w.Nd.BINDING_PHONE_NEW_SMS}),t.next=1,f[\"default\"].webBinding.bindingPhone(a);case 1:(0,S.kL)(),null===(i=e.$ga)||void 0===i||i.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code and bind phone success\")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t[\"catch\"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event(\"bindPhone btn\",\"Click\",\"\".concat((0,g.R7)(),\" check code and bind phone error \").concat(r.code)),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\"),(null===r||void 0===r?void 0:r.code)||E.Sc),e.errorCodeHandle(r,\"resetCaptcha\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_tips_binding_phone_success\"),subTitle:this.$t(\"v2_tips_binding_phone_success_text\"),redirectBtnText:this.$t(\"v2_btn_done\"),callbackUrl:(0,g.TP)()};this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,f[\"default\"].common.getSecureBindingInfo();case 2:n=t.sent,n.data.canBindPhone?(e.maskEmail=n.data.maskEmail||\"\",r=Array.isArray(null===(i=n.data)||void 0===i?void 0:i.maskSecurePhone)?n.data.maskSecurePhone[0]||\"\":(null===(a=n.data)||void 0===a?void 0:a.maskSecurePhone)||\"\",e.maskSecurityPhone=r||\"\",e.hasEmail=!!e.maskEmail,s=!(null===(o=n.data)||void 0===o||!o.sameAsPrimaryMobile),e.hasSecurityPhone=!!e.maskSecurityPhone&&!s,e.hasSecurityPhone&&e.hasEmail?(e.activeName=\"choose-verify\",e.moduleName=p.Sn.SEND_VALIDATE_EMAIL):e.hasSecurityPhone?(e.activeName=\"VERIFY_SECURITY_PHONE\",e.moduleName=p.Sn.MODIFY_MOBILE):(e.activeName=\"VERIFY_EMAIL\",e.maskInfo=e.maskEmail,e.moduleName=p.Sn.SEND_VALIDATE_EMAIL),e.inited=!0):n.data.maskRegisterPhone?(l=(0,g.TP)(),window.location.replace(l)):e.failNavigateHandle(e.$t(\"v2_error_code_556\")),t.next=4;break;case"
}