{
  "metadata": {
    "source_file": "external\\account.djicdn.com\\js\\chunk-common-3acabcaf.baad8c3e.js",
    "chunk_index": 1,
    "total_chunks": 2,
    "chunk_size": 62029,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.776Z"
  },
  "content": "\"use strict\";(self[\"webpackChunkmember_center_fe\"]=self[\"webpackChunkmember_center_fe\"]||[]).push([[853],{11284:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"card-container\",{staticClass:\"page-auto-create\",attrs:{mainTitle:e.mainTitle,descriptons:\"未找到对应账号，你可以立即注册新账号\",confirmText:e.registerBtnText,isConfirming:e.isLoading,showLogo:e.isMobile},on:{confirm:e.handleRegister}},[n(\"div\",{staticClass:\"text-center mt-6\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{on:{click:function(t){return e.handleBack()}}},[e._v(\"返回上一步，绑定已有账号\")])],1)])},a=[],i=n(23219),o=n(51601),c=n(13667),s=n(52072),u=n.n(s),l=n(74949),d=n(37151),h=n(88333),p=n(32368),m=n(95441),f=n(46918),g=n(40759),_=n(3372),v=[\"type\",\"areaCode\",\"phone\",\"smsCode\",\"email\",\"emailCode\"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,c.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w={name:\"PageAutoCreate\",data:function(){return{isMobile:f.Fr,isLoading:!1,isSuccess:!1,error:null}},computed:C(C({},(0,l.L8)({subscription:d.A.common.getter.getSubscription})),{},{registerBtnText:function(){return this.isLoading||this.isSuccess?this.isSuccess?\"注册成功，正在跳转...\":\"注册中...\":\"立即注册\"},phoneFormat:function(){var e=this.$route.query.phone;return e?e.replace(/(\\d{3})\\d{4}(\\d{4})/,\"$1****$2\"):\"\"},maskedEmail:function(){var e=this.$route.query.email;return e?this.maskEmail(e):\"\"},mainTitle:function(){return\"phone\"===this.$route.query.type?this.phoneFormat:this.maskedEmail}}),mounted:function(){},methods:{maskEmail:function(e){return e.replace(/^(.{2})(.*)(@.*)$/,function(e,t,n,r){return\"\".concat(t,\"****\").concat(r)})},handleBack:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(f.QA||f._8){e||(0,_.HF)(g.tU.WECHAT_MINI_PROGRAM_BIND_EXISTING_ACCOUNT,\"\",0);var t=this.$route.query,n=t.type,r=(t.areaCode,t.phone,t.smsCode,t.email,t.emailCode,(0,o.A)(t,v)),a=\"phone\"===n;a?this.$router.replace({path:\"/weapp/binding/phone\",query:r}):this.$router.replace({path:\"/weapp/binding/email\",query:r})}else this.$router.back()},handleRegister:function(){var e=this;return(0,i.A)(u().mark(function t(){var n,r,a,i,o,c,s,l,d,p,m,v,b,w,y;return u().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query,r=n.oauthLoginTicket,a=n.type,i=\"phone\"===a,o=i?\"bindingPhone\":\"bindingEmail\",c={},i?(s=e.$route.query,l=s.areaCode,d=s.phone,p=s.smsCode,c={areaCode:l,phone:d,smsCode:p}):(m=e.$route.query,v=m.email,b=m.emailCode,c={email:v,emailCode:b}),e.isLoading=!0,e.isSuccess=!1,t.prev=1,t.next=2,h[\"default\"].wechat[o](C(C({},c),{},{oauthLoginTicket:r,autoCreate:!0,subscription:e.subscription}));case 2:w=t.sent,e.isSuccess=!0,(f.QA||f._8)&&(0,_.HF)(g.tU.WECHAT_MINI_PROGRAM_REGISTER,\"\",w.code),window.location.replace(w.data.callbackUrl),t.next=4;break;case 3:t.prev=3,y=t[\"catch\"](1),e.isLoading=!1,e.isSuccess=!1,e.error=y,(f.QA||f._8)&&(0,_.HF)(g.tU.WECHAT_MINI_PROGRAM_REGISTER,\"\",y.code),e.handleBack(!0);case 4:case\"end\":return t.stop()}},t,null,[[1,3]])}))()}},beforeRouteEnter:function(e,t,n){n(function(){document.title=\"注册账号\"})},beforeRouteLeave:function(e,t,n){e.path.includes(\"binding\")&&(e.meta.error=this.error),n()},components:{CardContainer:p.A,acLink:m.A}},y=w,k=n(7358),E=(0,k.A)(y,r,a,!1,null,null,null),A=E.exports},17579:function(e,t,n){n.d(t,{A:function(){return s}});var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"div\",{staticClass:\"skeleton-item skeleton-user skeleton-center skeleton-gap-lg mt-4\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label-lg skeleton-gap-lg skeleton-label-md skeleton-center\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-input skeleton-center skeleton-gap-lg mt-6\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-captcha skeleton-center\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-btn skeleton-center skeleton-gap-lg\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label skeleton-center skeleton-gap-lg\",staticStyle:{width:\"180px\"}})])}],i=n(7358),o={},c=(0,i.A)(o,r,a,!1,null,null,null),s=c.exports},49164:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ac-redirect-loading\",{staticStyle:{height:\"204px\"},attrs:{showLogo:!1}})},a=[],i=n(23219),o=n(13667),c=n(52072),s=n.n(c),u=n(47432),l=n(74949),d=n(37151),h=n(88333),p=n(31272);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={name:\"wechat-unbind\",computed:f(f({},(0,l.L8)({initData:d.A.common.getter.initData,getConfigCaptcha:d.A.captcha.getter.getConfig})),{},{queryBackUrl:function(){return this.$route.query.backUrl||\"\"},wechatType:function(){return\"wechat\"}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},mounted:function(){},methods:f(f(f({},(0,l.PY)({updateNextData:d.A.common.mutation.updateNextData})),(0,l.i0)({getParamWithTicket:d.A.captcha.action.getParamWithTicket})),{},{fetchUserInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=1,h[\"default\"].webBinding.getBindingInfo();case 1:n=t.sent,r=n.data.maskRegisterPhone,a=n.data.maskEmail,(r||a)&&e.updateNextData({nextData:{bindingInfo:n}}),e.goToUnbindUrl(r,a),t.next=3;break;case 2:return t.prev=2,i=t[\"catch\"](0),i.code&&e.updateNextData({nextData:{title:e.$t(\"v2_error_code_\".concat(i.code)),callbackUrl:(0,p.hL)()}}),e.$router.push({path:\"/fail\",query:e.$route.query}),t.abrupt(\"return\");case 3:return t.prev=3,e.loading=!1,t.finish(3);case 4:case\"end\":return t.stop()}},t,null,[[0,2,3,4]])}))()},goToUnbindUrl:function(e,t){e?this.goToPhoneUnBind():t?this.goToEmailUnbind():this.$router.push({path:\"/fail\",query:this.$route.query})},goToPhoneUnBind:function(){this.$router.replace({path:\"/account/\".concat(this.wechatType,\"/unbind/phone\"),query:f(f({},this.$route.query),{},{phone:this.unbindPhone})})},goToEmailUnbind:function(){this.$router.replace({path:\"/account/\".concat(this.wechatType,\"/unbind/email\"),query:f(f({},this.$route.query),{},{email:this.unbindEmail})})}}),beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_title_weapp_unbind\"))})},components:{acRedirectLoading:u.A}},_=g,v=n(7358),b=(0,v.A)(_,r,a,!1,null,null,null),C=b.exports},70325:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"card-container\",{staticClass:\"page-oauth-confirm text-left\",attrs:{mainTitle:e.$t(\"v2_title_oauth_authorization\")}},[n(\"div\",{staticClass:\"auth-info\"},[n(\"div\",{staticClass:\"brand-info\"},[n(\"ac-icon\",{attrs:{name:\"logo\",size:48}}),n(\"div\",{staticClass:\"brand-name mt-4\"},[e._v(e._s(e.brandName))])],1),n(\"ac-icon\",{staticClass:\"arrow\",attrs:{name:\"arrow\",size:24,color:\"rgba(0,0,0,0.45)\"}}),n(\"div\",{staticClass:\"brand-info\"},[n(\"img\",{staticClass:\"brand-logo\",attrs:{src:e.appLogo,alt:\"\"}}),n(\"div\",{staticClass:\"brand-name mt-4\"},[e._v(e._s(e.appName))])])],1),n(\"div\",{staticClass:\"auth-detail\"},[e.userName?n(\"div\",{staticClass:\"mt-6\"},[e._v(e._s(e.$t(\"v2_auth_confirm_account\"))+\": \"+e._s(e.userName))]):e._e(),n(\"div\",{staticClass:\"mt-2\"},[e._v(e._s(e.$t(\"v2_auth_confirm_info\")))]),n(\"ul\",{staticClass:\"auth-list mt-2\"},[n(\"li\",[e._v(e._s(e.$t(\"v2_auth_confirm_detail\")))])])]),n(\"form\",{ref:\"authorizeForm\",staticClass:\"mt-8\",attrs:{action:\"/oauth/authorize\",method:\"POST\"}},[n(\"input\",{attrs:{name:\"user_oauth_approval\",type:\"hidden\"},domProps:{value:e.authorize}})]),n(\"ac-button\",{attrs:{type:\"primary\",block:\"\",theme:\"blue\",loading:e.acceptLoading,disabled:e.cancelLoading},on:{click:e.handleConfirm}},[e._v(\" \"+e._s(e.$t(\"v2_auth_confirm_ok\"))+\" \")]),n(\"ac-button\",{attrs:{block:\"\",loading:e.cancelLoading,disabled:e.acceptLoading},on:{click:e.handleRefuse}},[e._v(\" \"+e._s(e.$t(\"v2_auth_confirm_cancel\"))+\" \")])],1)},a=[],i=n(23219),o=n(52072),c=n.n(o),s=n(63943),u=n(37151),l=n(88333),d=n(31272),h=n(52621),p=n(32368),m=n(88346),f={name:\"PageOAuthConfirm\",components:{acButton:h.A,CardContainer:p.A},data:function(){return{authorize:!0,appName:\"\",appLogo:\"\",userName:\"\",acceptLoading:!1,cancelLoading:!1,brandName:(0,m.v)(\"DJI\")}},methods:{fetchAuth:function(){var e=arguments,t=this;return(0,i.A)(c().mark(function n(){var r,a;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:null,!r){n.next=1;break}return t.$router.push(\"/fail\"),n.abrupt(\"return\");case 1:return n.next=2,l[\"default\"].oauth.getClientInfo({url:\"/oauth/client/info\"}).then(function(e){var n=e.data;t.appName=n.app_name,t.appLogo=n.image_url,t.userName=n.user_name})[\"catch\"](function(e){var n;null===(n=t.$ga)||void 0===n||n.event(\"m get_oauth_info\",\"Click\",\"\".concat((0,d.R7)(),\" login error \").concat(e.code))});case 2:return a=n.sent,n.abrupt(\"return\",a);case 3:case\"end\":return n.stop()}},n)}))()},submitAuthorize:function(){var e=this;this.$nextTick(function(){e.acceptLoading||e.cancelLoading||e.$refs.authorizeForm&&(e.authorize?e.acceptLoading=!0:e.cancelLoading=!0,e.$refs.authorizeForm.submit())})},handleConfirm:function(){this.authorize=!0,this.submitAuthorize()},handleRefuse:function(){this.authorize=!1,this.submitAuthorize()}},beforeRouteEnter:function(e,t,n){return(0,i.A)(c().mark(function e(){var t;return c().wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,s.A.dispatch(u.A.common.action.fetchTranslation)[\"catch\"](function(e){t=e});case 1:n(function(e){e.fetchAuth(t)});case 2:case\"end\":return e.stop()}},e)}))()}},g=f,_=n(7358),v=(0,_.A)(g,r,a,!1,null,null,null),b=v.exports},75263:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"card-container\",{staticClass:\"oauth-bind\",attrs:{showLogo:!1,showSkeleton:!e.inited}},[n(\"skeleton\",{attrs:{slot:\"skeleton\"},slot:\"skeleton\"}),n(\"ac-oAuth-user\",{attrs:{pcMt4:\"\",avatarUrl:e.user.avatarUrl,nickName:e.user.nickName}}),n(\"div\",{class:[e.isMobile?\"mt-8\":\"mt-6\"]},[n(\"ac-button\",{attrs:{type:\"variant\",block:\"\",buttonType:e.$t(\"v2_btn_oauth_binding_phone\")},on:{click:function(t){return e.toBinding(\"phone\")}}},[e._v(\" \"+e._s(e.$t(\"v2_btn_oauth_binding_phone\"))+\" \")]),n(\"ac-button\",{attrs:{type:\"variant\",block:\"\",buttonType:e.$t(\"v2_btn_oauth_binding_email\")},on:{click:function(t){return e.toBinding(\"email\")}}},[e._v(\" \"+e._s(e.$t(\"v2_btn_oauth_binding_email\"))+\" \")])],1)],1)},a=[],i=n(23219),o=n(13667),c=n(52072),s=n.n(c),u=n(32368),l=n(78841),d=n(52621),h=n(74949),p=n(37151),m=n(88333),f=n(31272),g=n(46918),_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"div\",{staticClass:\"skeleton-item skeleton-user skeleton-center skeleton-gap-lg mt-4\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label-lg skeleton-gap-lg skeleton-label-md skeleton-center\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-btn skeleton-btn-medium skeleton-center skeleton-gap-lg\",staticStyle:{\"margin-top\":\"24px\"}}),n(\"div\",{staticClass:\"skeleton-item skeleton-btn skeleton-btn-medium skeleton-center skeleton-gap-lg\"})])}],b=n(7358),C={},w=(0,b.A)(C,_,v,!1,null,null,null),y=w.exports;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A={name:\"OAuth-bind\",mixins:[],data:function(){return{isMobile:g.Fr,user:{nickName:\"\",avatarUrl:\"\"},inited:!1}},watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},computed:E(E({},(0,h.L8)({initData:p.A.common.getter.initData})),{},{OAuthType:function(){return\"wechat\"}}),methods:E(E({},(0,h.PY)({updateNextData:p.A.common.mutation.updateNextData})),{},{toBinding:function(e){var t;this.$router.replace({path:\"/\".concat(this.OAuthType,\"/binding/\").concat(e),query:this.$route.query}),null===(t=this.$ga)||void 0===t||t.event(\"oauthBind btn\",\"Click\",\"\".concat((0,f.R7)(),\" in \").concat(this.OAuthType,\" to \").concat(e,\" view\"))},fetchUserInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i,o,c;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={uuid:e.$route.query.oauthLoginTicket},null===(n=e.$ga)||void 0===n||n.event(\"get wechat userInfo\",\"Click\",\"\".concat((0,f.R7)(),\" to get wechat userInfo\")),t.next=1,m[\"default\"].middleware.getOauthUserInfo(a);case 1:i=t.sent,e.user.nickName=i.data.nickName,e.user.avatarUrl=i.data.avatarUrl,e.inited=!0,null===(r=e.$ga)||void 0===r||r.event(\"get wechat userInfo\",\"Click\",\"\".concat((0,f.R7)(),\" get wechat userInfo success\")),t.next=3;break;case 2:t.prev=2,c=t[\"catch\"](0),null===(o=e.$ga)||void 0===o||o.event(\"get wechat userInfo\",\"Click\",\"\".concat((0,f.R7)(),\" get wechat userInfo error \").concat(c.code)),e.failNavigateHandle(c.code?e.$t(\"v2_error_code_\".concat(c.code)):\"\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},failNavigateHandle:function(e){if(\"\"!==e){var t={title:e,callbackUrl:(0,f.hL)()};this.updateNextData({nextData:t})}this.$router.push({path:\"/fail\",query:this.$route.query})}}),components:{Skeleton:y,CardContainer:u.A,acOAuthUser:l.A,acButton:d.A},beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_title_weapp_binding\"))})}},T=A,O=(0,b.A)(T,r,a,!1,null,null,null),$=O.exports},75827:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"card-container\",{staticClass:\"oauth-bind-email\",attrs:{showLogo:!1,showSkeleton:!e.inited}},[n(\"skeleton\",{attrs:{slot:\"skeleton\"},slot:\"skeleton\"}),n(\"ac-oAuth-user\",{attrs:{pcMt4:\"\",avatarUrl:e.user.avatarUrl,nickName:e.user.nickName,desc:e.descText}}),n(\"div\",{staticClass:\"text-left\",class:[e.isMobile?\"mt-8\":\"mt-6\"]},[\"VERIFY_EMAIL\"===e.activeName?n(\"verify-email\",{ref:\"verifyEmail\",attrs:{btnSize:e.isMobile?\"medium\":\"large\",btnTheme:e.isMobile?\"blue\":\"black\",email:e.email,captchaResult:e.captchaResult,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,loading:e.isSendLoading,subscription:e.subscription},on:{\"update:email\":function(t){e.email=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},\"update:subscription\":function(t){e.subscription=t},next:e.handleNext,send:e.handleSend,resetErrorCode:e.resetErrorCode}}):e._e(),\"BIND_EMAIL\"===e.activeName?n(\"bind-email\",{ref:\"bindEmail\",attrs:{btnSize:e.isMobile?\"medium\":\"large\",btnTheme:e.isMobile?\"blue\":\"black\",moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,loading:e.isLoading,isSendLoading:e.isSendLoading,count:e.count,maskInfo:e.email,code:e.code,confirmText:e.bindButtonText},on:{\"update:code\":function(t){e.code=t},send:e.handleSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode}}):e._e()],1),n(\"div\",{staticClass:\"mt-6 text-center\"},[n(\"ac-link\",{attrs:{type:\"primary\"},on:{click:e.handleGoToPhoneBinding}},[e._v(\" \"+e._s(e.$t(\"v2_weapp_binding_email_to_phone\"))+\" \")]),\"\"!==e.unbindEmail?n(\"div\",{staticClass:\"mt-4\"},[n(\"ac-link\",{attrs:{type:\"primary\"},on:{click:e.handleGoToEmailUnbind}},[e._v(\" \"+e._s(e.$t(\"v2_weapp_binding_to_unbind\"))+\" \")])],1):e._e()],1)],1)},a=[],i=n(23219),o=n(13667),c=n(52072),s=n.n(c),u=n(32368),l=n(78841),d=n(95441),h=n(74949),p=n(37151),m=n(46918),f=n(51501),g=n(78012),_=n(24450),v=n(88333),b=n(31272),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"bind-email\",on:{keydown:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleNext.apply(null,arguments)}}},[n(\"ac-input\",{staticClass:\"email-num\",attrs:{errorMsg:e.emailError,showError:e.showEmailError,valid:e.emailValid,placeholder:e.$t(\"v2_weapp_binding_email_label_email\"),inputType:e.$t(\"v2_weapp_binding_email_label_email\")},model:{value:e.email,callback:function(t){e.email=t},expression:\"email\"}}),e.showCaptcha?n(\"div\",{staticClass:\"captcha\"},[n(\"ac-captcha\",{ref:\"captcha\",attrs:{config:e.captchaConfig,showError:e.showCaptchaCodeError,errorCode:e.errorCode},on:{validate:e.onCaptchaValidate}})],1):e._e(),n(\"policy-and-subscription\",{attrs:{showErrorMessage:e.showCheckAgreeError},on:{checkAgreeChange:e.checkAgreeChange,subscriptionChange:e.subscriptionChange}}),n(\"transition\",{attrs:{name:\"fade\",mode:\"out-in\"}},[e.showErrorMsg?n(\"div\",{staticClass:\"ac-error-container\"},[n(\"ac-alert\",[e._v(\" \"+e._s(e.errorMsg)+\" \")])],1):e._e()]),n(\"div\",{staticClass:\"action\"},[n(\"ac-button\",{class:{\"view-disabled\":e.isDisabled},attrs:{type:\"primary\",size:e.btnSize,theme:e.btnTheme,block:\"\",loading:e.loading,buttonType:e.$t(\"v2_btn_next\")},on:{click:e.handleNext}},[e._v(\" \"+e._s(e.$t(\"v2_btn_next\"))+\" \")])],1)],1)},w=[],y=n(82068),k=n(85085),E=n(52621),A=n(98276),T=n(22680),O=n(11663);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S={name:\"Captcha-mixins\",data:function(){return{captchaResult:null}},computed:N(N({},(0,h.L8)({getConfigCaptcha:p.A.captcha.getter.getConfig})),{},{isCaptchaError:function(){return this.errorCode&&f.vF.includes(this.errorCode)},captchaConfig:function(){return this.getConfigCaptcha(this.moduleName)},showCaptcha:function(){return this.captchaConfig.show},captchaValid:function(){return!(this.showCaptcha&&!this.captchaResult)}}),methods:N(N({},(0,h.PY)({clearTicket:p.A.captcha.mutation.clearTicket})),{},{resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs.captcha)||void 0===e||e.reset(),this.$emit(\"update:captchaResult\",null),this.clearTicket({moduleName:this.moduleName})},onCaptchaValidate:function(e,t){this.captchaResult=t,this.$emit(\"resetErrorCode\"),this.clearTicket({moduleName:this.moduleName})}}),watch:{errorCode:function(){this.isCaptchaError&&(this.showCaptchaCodeError=!0)},showCaptcha:function(e){e&&this.resetCaptcha()}},components:{acCaptcha:O.A}};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I={name:\"bind-email\",components:{acInput:y.A,acAlert:k.A,acButton:E.A,PolicyAndSubscription:A.A},mixins:[S],props:{btnSize:String,btnTheme:String,errorCode:[Number,String],errorMsg:String,moduleName:String,loading:Boolean},data:function(){return{showCaptchaCodeError:!1,email:\"\",phoneExist:!1,showEmailError:!1,showCheckAgreeError:!1,checkAgree:!1}},computed:x(x({},(0,h.L8)({initData:p.A.common.getter.initData})),{},{showErrorMsg:function(){return!this.showCaptchaCodeError&&this.errorMsg},emailError:function(){return this.email?(0,T.xf)(this.email)?\"\":this.$t(\"v2_error_format_email\"):this.$t(\"v2_error_required_email\")},emailValid:function(){return\"\"!==this.email&&(0,T.xf)(this.email)},isDisabled:function(){return\"\"===this.emailValid||\"\"===this.email||!this.checkAgree||!this.captchaResult}}),methods:x(x({},(0,h.PY)({updateSubscription:p.A.common.mutation.updateSubscription})),{},{verify:function(){var e=!0;return this.emailValid||(this.showEmailError=!0,e=!1),this.showCaptcha&&!this.captchaValid&&(this.showCaptchaCodeError=!0,e=!1),this.checkAgree||(this.showCheckAgreeError=!0,e=!1),e&&(this.showEmailError=!1,this.showCaptchaCodeError=!1),e},handleNext:function(){var e=this;this.$emit(\"resetErrorCode\"),this.$nextTick(function(){if(!e.verify())return!1;e.$emit(\"send\",{success:function(){e.$emit(\"next\")}})})},checkAgreeChange:function(e){this.checkAgree=e},subscriptionChange:function(e){this.updateSubscription(e),this.$emit(\"update:subscription\",e)}}),watch:{email:function(e){this.$emit(\"update:email\",e),this.$emit(\"resetErrorCode\")},captchaResult:function(e){this.$emit(\"update:captchaResult\",e)}}},D=I,L=n(7358),B=(0,L.A)(D,C,w,!1,null,null,null),R=B.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"bind-email\",on:{keydown:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleSubmit.apply(null,arguments)}}},[n(\"ac-verify-code\",{attrs:{maskInfo:e.maskInfo,name:\"code\",verifyType:\"email\",loading:e.isSendLoading,showError:e.showError||null!==e.codeError&&\"\"!==e.codeError,errorMsg:e.codeError,valid:e.codeValid,disabled:e.count>0,placeholder:e.$t(\"v2_placeholder_modify_password_vaild_code\"),isLoadFocus:!0},on:{blur:e.handleBlur,click:e.handleSendSms},model:{value:e.code,callback:function(t){e.code=t},expression:\"code\"}},[e._v(\" \"+e._s(e.sendText)+\" \")]),n(\"transition\",{attrs:{name:\"fade\",mode:\"out-in\"}},[e.showErrorMsg?n(\"div\",{staticClass:\"ac-error-container pt-4\"},[n(\"ac-alert\",[e._v(\" \"+e._s(e.errorMsg)+\" \")])],1):e._e()]),n(\"div\",{staticClass:\"action\"},[n(\"ac-button\",{class:{\"view-disabled\":e.isDisabled},attrs:{type:\"primary\",size:e.btnSize,theme:e.btnTheme,block:\"\",loading:e.loading,buttonType:e.confirmText},on:{click:e.handleSubmit}},[e._v(\" \"+e._s(e.confirmText)+\" \")])],1)],1)},M=[],j=n(48397);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q={name:\"bind-email\",components:{acVerifyCode:j.A,acAlert:k.A,acButton:E.A},props:{btnSize:String,btnTheme:String,maskInfo:String,errorCode:[Number,String],errorMsg:String,moduleName:String,loading:Boolean,isSendLoading:Boolean,count:Number,confirmText:String,subscription:Boolean},data:function(){return{showCaptchaCodeError:!1,showError:!1,codeHasBeenSent:!1,isLoaded:!0,email:\"\",code:\"\",phoneExist:!1,showEmailError:!1}},computed:V(V({},(0,h.L8)({initData:p.A.common.getter.initData})),{},{isDisabled:function(){return\"\"===this.code},showErrorMsg:function(){return!this.isPhoneSendOftenError&&!this.isEmailError&&!this.showCaptchaCodeError&&this.errorMsg},sendText:function(){return 0===this.count?this.$t(\"v2_btn_resend\"):\"\".concat(this.$t(\"v2_btn_resend\"),\"(\").concat(this.count,\"s)\")},isEmailError:function(){return f.PL.includes(this.errorCode)},codeValid:function(){return!this.isEmailError&&\"\"!==this.code},codeError:function(){return this.isEmailError?this.$t(\"v2_error_code_\".concat(this.errorCode)):this.isLoaded||this.code?null:this.$t(\"v2_error_required_email_code\")}}),methods:{verify:function(){var e=!0;return this.codeValid||(this.showError=!0,this.isLoaded=!1,e=!1),e&&(this.showError=!1),e&&(this.showEmailError=!1,this.showCheckAgreeError=!1),e},handleSendSms:function(){var e=this;this.isLoaded=!0,this.showError=!1,this.showCheckAgreeError=!1,this.$emit(\"resetErrorCode\"),this.$emit(\"send\",{success:function(){e.codeHasBeenSent=!0},error:function(){e.code&&(e.isLoaded=!1)}})},handleSubmit:function(){var e=this;this.$emit(\"resetErrorCode\"),this.$nextTick(function(){if(!e.verify())return!1;e.$emit(\"confirm\")})},handleBlur:function(){this.isLoaded=!1}},watch:{email:function(e){this.$emit(\"update:email\",e)},code:function(e){this.$emit(\"resetErrorCode\"),this.$emit(\"update:code\",e)}}},W=q,G=(0,L.A)(W,U,M,!1,null,null,null),Y=G.exports,F=n(17579);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q={name:\"OAuth-bind-email\",mixins:[S],data:function(){return{isMobile:m.Fr,moduleName:g.Sn.WECHAT_BIND_EMAIL,emailType:_.O.WECHAT_BINDING,activeName:\"VERIFY_EMAIL\",user:{nickName:\"\",avatarUrl:\"\"},bindButtonText:this.$t(\"v2_weapp_binding_email_submit\"),count:0,interval:null,isSendLoading:!1,isLoading:!1,inited:!1,errorMsg:\"\",errorCode:\"\",email:\"\",code:\"\",unbindEmail:\"\",subscription:!1}},watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},computed:X(X({},(0,h.L8)({initData:p.A.common.getter.initData,lang:p.A.common.getter.lang})),{},{OAuthType:function(){return\"wechat\"},descText:function(){return m.Fr?this.$t(\"v2_weapp_binding_email_reminder\"):\"VERIFY_EMAIL\"===this.activeName?this.$t(\"v2_weapp_binding_reminder_email\"):\"\"}}),methods:X(X(X({},(0,h.PY)({updateNextData:p.A.common.mutation.updateNextData,setShowCaptcha:p.A.captcha.mutation.setShow})),(0,h.i0)({getParamWithTicket:p.A.captcha.action.getParamWithTicket})),{},{fetchUserInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i,o,c;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,e.loading=!0,a={uuid:e.$route.query.oauthLoginTicket},null===(n=e.$ga)||void 0===n||n.event(\"get wechat userInfo\",\"Click\",\"\".concat((0,b.R7)(),\" to get wechat userInfo\")),t.next=2,v[\"default\"].middleware.getOauthUserInfo(a);case 2:i=t.sent,e.user.nickName=i.data.nickName,e.user.avatarUrl=i.data.avatarUrl,e.inited=!0,null===(r=e.$ga)||void 0===r||r.event(\"get wechat userInfo\",\"Click\",\"\".concat((0,b.R7)(),\" get wechat userInfo success\")),t.next=4;break;case 3:return t.prev=3,c=t[\"catch\"](1),null===(o=e.$ga)||void 0===o||o.event(\"get wechat userInfo\",\"Click\",\"\".concat((0,b.R7)(),\" get wechat userInfo error \").concat(c.code)),e.failNavigateHandle(c.code?e.$t(\"v2_error_code_\".concat(c.code)):\"\"),t.abrupt(\"return\");case 4:return t.prev=4,e.loading=!1,t.finish(4);case 5:case\"end\":return t.stop()}},t,null,[[1,3,4,5]])}))()},handleNext:function(){document.documentElement.scrollTop=0,this.activeName=\"BIND_EMAIL\"},handleSend:function(e){var t=this;return(0,i.A)(s().mark(function n(){var r,a,i,o,c,u,l;return s().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return t.isSendLoading=!0,r={email:t.email,emailType:t.emailType},n.prev=1,n.next=2,t.getParamWithTicket({moduleName:t.moduleName,param:r,result:t.captchaResult});case 2:return o=n.sent,null===(a=t.$ga)||void 0===a||a.event(\"oauthBind btn\",\"Click\",\"\".concat((0,b.R7)(),\" send code to email\")),n.next=3,v[\"default\"].common.sendEmail(o);case 3:c=n.sent,0===c.code&&t.startTiming(),null===(i=t.$ga)||void 0===i||i.event(\"oauthBind btn\",\"Click\",\"\".concat((0,b.R7)(),\" send code to email success\")),null!==e&&void 0!==e&&e.success&&e.success(c),n.next=5;break;case 4:n.prev=4,l=n[\"catch\"](1),null===(u=t.$ga)||void 0===u||u.event(\"oauthBind btn\",\"Click\",\"\".concat((0,b.R7)(),\" send code to email error \").concat(l.code)),t.errorCodeHandle(l),null!==e&&void 0!==e&&e.error&&e.error(l);case 5:return n.prev=5,t.isSendLoading=!1,n.finish(5);case 6:case\"end\":return n.stop()}},n,null,[[1,4,5,6]])}))()},handleConfirm:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i,o,c;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.bindButtonText=e.$t(\"v2_weapp_binding_submit_ing\"),a={email:e.email,emailCode:e.code,oauthLoginTicket:e.$route.query.oauthLoginTicket,subscription:e.subscription},e.isMobile&&(a.autoCreate=!1),null===(n=e.$ga)||void 0===n||n.event(\"oauthBind btn\",\"Click\",\"\".concat((0,b.R7)(),\" bind to email\")),t.next=1,v[\"default\"].wechat.bindingEmail(a);case 1:return i=t.sent,e.bindButtonText=e.$t(\"v2_weapp_binding_submit_ok\"),null===(r=e.$ga)||void 0===r||r.event(\"oauthBind btn\",\"Click\",\"\".concat((0,b.R7)(),\" bind to email success\")),window.location.replace(i.data.callbackUrl),t.abrupt(\"return\",i);case 2:t.prev=2,c=t[\"catch\"](0),e.isLoading=!1,e.bindButtonText=e.$t(\"v2_weapp_binding_email_submit\"),null===(o=e.$ga)||void 0===o||o.event(\"oauthBind btn\",\"Click\",\"\".concat((0,b.R7)(),\" bind to email error \").concat(c.code)),e.errorCodeHandle(c);case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},handleGoToPhoneBinding:function(){this.$router.replace({path:\"/\".concat(this.OAuthType,\"/binding/phone\"),query:this.$route.query})},handleGoToEmailUnbind:function(){this.$router.replace({path:\"/account/\".concat(this.OAuthType,\"/unbind/email\"),query:X(X({},this.$route.query),{},{backUrl:window.location.href,email:this.unbindEmail})})},goToAutoCreate:function(){var e=this;return(0,i.A)(s().mark(function t(){return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!m.QA&&!m._8){t.next=1;break}return e.$router.replace({path:\"/\".concat(e.OAuthType,\"/binding/autocreate\"),query:X(X({},e.$route.query),{},{type:\"email\",email:e.email,emailCode:e.code})}),t.abrupt(\"return\");case 1:e.$router.push({path:\"/\".concat(e.OAuthType,\"/binding/autocreate\"),query:X(X({},e.$route.query),{},{type:\"email\",email:e.email,emailCode:e.code})});case 2:case\"end\":return t.stop()}},t)}))()},startTiming:function(){var e=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){e.count--,e.count<=0&&(window.clearInterval(e.interval),e.interval=null)},1e3)},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.verifyEmail)||void 0===e||e.resetCaptcha()},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,b.hL)(\"login\",document.URL)};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e){if(e.code){var t=e.code;this.errorCode=e.code,f.f9.concat(f.QI).includes(t)?(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha(),this.errorMsg=this.$t(\"v2_error_code_\".concat(t))):t===f.Zm?this.failNavigateHandle(this.$t(\"v2_error_code_609\")):t===f.Ik?this.goToAutoCreate():f.Xm.includes(t)?(this.unbindEmail=this.email,this.errorMsg=this.$t(\"v2_weapp_binding_email_binding\")):this.errorMsg=this.$t(\"v2_error_code_\".concat(t)),this.errorCode=t}else this.errorMsg=this.$t(\"v2_tips_off_line\")}}),beforeRouteEnter:function(e,t,n){n(function(n){document.title=\"\".concat(n.$t(\"v2_common_system_title\"),\" | \").concat(n.$t(\"v2_title_weapp_binding_email\")),t.path.includes(\"autocreate\")&&e.meta.error&&n.errorCodeHandle(e.meta.error)})},components:{Skeleton:F.A,CardContainer:u.A,acOAuthUser:l.A,acLink:d.A,VerifyEmail:R,BindEmail:Y}},Z=Q,J=(0,L.A)(Z,r,a,!1,null,null,null),K=J.exports},90134:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ac-unbound-waring\",{attrs:{hide:e.hideWaring,unboundBtnUsage:e.USAGE_TAG_VALUE.ACCOUNT_CONFIRM_UNBIND_THIRD_PARTY}},[n(\"verify-account\",{ref:\"VerifyAccount\",staticClass:\"oauth-unbound-phone\",attrs:{type:\"sms\",mainTitle:e.$t(\"v2_weapp_unbind_phone_title\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showServiceLinks:\"\",isLogin:e.isLogin,confirmType:\"danger\",skeletonType:\"default\",confirmText:e.bindButtonText,isConfirming:e.isLoading,showSkeleton:!e.inited,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,areaCode:e.areaCode,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_UNBIND_THIRD_PARTY_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_UNBIND_THIRD_PARTY_SEND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleSend,confirm:e.handleSubmit,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[n(\"div\",{staticClass:\"mt-6 text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[e.maskEmail?n(\"ac-link\",{attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_UNBIND_THIRD_PARTY_CHANGE_VERIFY},on:{click:e.handleGoToEmailBinding}},[e._v(\" \"+e._s(e.$t(\"v2_weapp_valid_to_email\"))+\" \")]):e._e()],1)])],1)},a=[],i=n(23219),o=n(13667),c=n(52072),s=n.n(c),u=n(26066),l=n(95441),d=n(74949),h=n(37151),p=n(88333),m=n(51501),f=n(22680),g=n(31272),_=n(78012),v=n(43435),b=n(40759),C=n(87728),w=n(3372),y=n(11663);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A={name:\"Captcha-mixins\",data:function(){return{captchaResult:null}},computed:E(E({},(0,d.L8)({getConfigCaptcha:h.A.captcha.getter.getConfig})),{},{isCaptchaError:function(){return this.errorCode&&m.vF.includes(this.errorCode)},captchaConfig:function(){return this.getConfigCaptcha(this.moduleName)},showCaptcha:function(){return this.captchaConfig.show},captchaValid:function(){return!(this.showCaptcha&&!this.captchaResult)}}),methods:E(E({},(0,d.PY)({clearTicket:h.A.captcha.mutation.clearTicket})),{},{resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs.captcha)||void 0===e||e.reset(),this.clearTicket({moduleName:this.moduleName})},onCaptchaValidate:function(e,t){this.captchaResult=t,this.resetErrorCode(),this.clearTicket({moduleName:this.moduleName})}}),watch:{errorCode:function(){this.isCaptchaError&&(this.showCaptchaCodeError=!0)},showCaptcha:function(e){e&&this.resetCaptcha()}},components:{acCaptcha:y.A}};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $={name:\"OAuth-unbound-phone\",mixins:[A],data:function(){return{moduleName:_.Sn.WECHAT_UNBIND_PHONE,smsType:v.i.WECHAT_UNBIND_PHONE,errorCode:\"\",errorMsg:\"\",isLoading:!1,isSendLoading:!1,count:0,areaCode:\"86\",maskEmail:\"\",maskRegisterPhone:\"\",captchaResult:null,code:\"\",unbindWechatPhoneSendText:\"\",showCaptchaCodeError:!1,showError:!1,codeHasBeenSent:!1,loaded:!0,isLogin:!1,inited:!1,hideWaring:!1,USAGE_TAG_VALUE:b.tU,confirmBtnText:this.$t(\"v2_tips_confirm\"),bindButtonText:this.$t(\"v2_weapp_unbind_submit\")}},computed:O(O({},(0,d.L8)({initData:h.A.common.getter.initData,getConfigCaptcha:h.A.captcha.getter.getConfig,lang:h.A.common.getter.lang,nextData:h.A.common.getter.nextData})),{},{queryPhone:function(){return this.$route.query.phone||\"\"},OAuthType:function(){return\"wechat\"},maskInfo:function(){return this.maskRegisterPhone||(0,f.xy)(this.queryPhone)||\"\"}}),methods:O(O(O({},(0,d.PY)({updateNextData:h.A.common.mutation.updateNextData,setShowCaptcha:h.A.captcha.mutation.setShow})),(0,d.i0)({getParamWithTicket:h.A.captcha.action.getParamWithTicket})),{},{fetchBindingInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=null,r=O({},e.nextData),\"VerifyAccount\"===(null===r||void 0===r?void 0:r.unbindWechat)&&(e.hideWaring=!0,e.updateNextData({nextData:O(O({},r),{},{unbindWechat:null})})),null===r||void 0===r||!r.bindingInfo){t.next=1;break}n=null===r||void 0===r?void 0:r.bindingInfo,t.next=3;break;case 1:return t.next=2,p[\"default\"].common.getBindingInfo({},null,{ignoreUnLogin:!0});case 2:n=t.sent,(n.data.maskRegisterPhone||n.data.maskEmail)&&e.updateNextData({nextData:{bindingInfo:n}});case 3:return t.abrupt(\"return\",n);case 4:case\"end\":return t.stop()}},t)}))()},fetchUserInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,e.fetchBindingInfo();case 2:n=t.sent,\"\"===e.queryPhone&&(e.maskEmail=n.data.maskEmail,e.maskRegisterPhone=n.data.maskRegisterPhone),e.isLogin=!0,t.next=4;break;case 3:t.prev=3,r=t[\"catch\"](1),e.isLogin=!1,\"\"===e.queryPhone&&e.failNavigateHandle(r.code?e.$t(\"v2_error_code_\".concat(r.code)):\"\");case 4:return t.prev=4,e.inited=!0,t.finish(4);case 5:case\"end\":return t.stop()}},t,null,[[1,3,4,5]])}))()},handleSend:function(e){var t=this;return(0,i.A)(s().mark(function n(){var r,a,i,o,c;return s().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,t.resetErrorCode(),null===(r=t.$ga)||void 0===r||r.event(\"OAuthUnbound btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone\")),n.next=1,t.fetchCodeSend();case 1:i=n.sent,0===i.code&&t.startTiming(),t.codeHasBeenSent=!0,null===(a=t.$ga)||void 0===a||a.event(\"OAuthUnbound btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone success\")),(0,w.HF)(b.tU.ACCOUNT_UNBIND_THIRD_PARTY_SEND_SMS,t.unbindWechatPhoneSendText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&e.success(),n.next=3;break;case 2:n.prev=2,c=n[\"catch\"](0),\"\"!==t.code&&(t.loaded=!1),null===(o=t.$ga)||void 0===o||o.event(\"OAuthUnbound btn\",\"Click\",\"\".concat((0,g.R7)(),\" send code to phone error \").concat(c.code)),t.errorCodeHandle(c),(0,w.HF)(b.tU.ACCOUNT_UNBIND_THIRD_PARTY_SEND_SMS,t.unbindWechatPhoneSendText||t.$t(\"v2_btn_sendBtn\"),(null===c||void 0===c?void 0:c.code)||m.Sc),null!==e&&void 0!==e&&e.error&&e.error(c);case 3:return n.prev=3,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&e[\"finally\"](),n.finish(3);case 4:case\"end\":return n.stop()}},n,null,[[0,2,3,4]])}))()},handleSubmit:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i,o;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),e.confirmBtnText=e.$t(\"v2_weapp_unbind_submit_ing\"),a={type:\"Wechat\",areaCode:e.areaCode,phone:e.queryPhone,code:e.code},null===(n=e.$ga)||void 0===n||n.event(\"oauthUnbound btn\",\"Click\",\"\".concat((0,g.R7)(),\" unbind to phone\")),t.next=1,p[\"default\"].wechat.unbindPhone(a);case 1:e.confirmBtnText=e.$t(\"v2_weapp_unbind_submit_ok\"),null===(r=e.$ga)||void 0===r||r.event(\"oauthUnbound btn\",\"Click\",\"\".concat((0,g.R7)(),\" unbind to phone success\")),(0,w.HF)(b.tU.ACCOUNT_UNBIND_THIRD_PARTY_SUBMIT_SMS,e.bindButtonText),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,o=t[\"catch\"](0),e.isLoading=!1,e.confirmBtnText=e.$t(\"v2_weapp_unbind_submit\"),null===(i=e.$ga)||void 0===i||i.event(\"oauthUnbound btn\",\"Click\",\"\".concat((0,g.R7)(),\" unbind to phone error \").concat(o.code)),(0,w.HF)(b.tU.ACCOUNT_UNBIND_THIRD_PARTY_SUBMIT_SMS,e.bindButtonText,(null===o||void 0===o?void 0:o.code)||m.Sc),e.errorCodeHandle(o);case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_tips_unbinding_facebook_success\").replace(\"%@\",this.$t(\"v2_tips_wechat\")),redirectBtnText:this.$t(\"v2_btn_done\"),callbackUrl:(0,g.TP)()};this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchCodeSend:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,e.getParamWithTicket({moduleName:e.moduleName,param:{areaCode:e.areaCode,phone:e.queryPhone,smsType:e.smsType},result:e.captchaResult});case 1:return n=t.sent,r=\"\"!==e.queryPhone?p[\"default\"].common.sendSmsCode(n):p[\"default\"].account.sendValidationSms(n),t.next=2,r;case 2:return a=t.sent,t.abrupt(\"return\",a);case 3:case\"end\":return t.stop()}},t)}))()},handleGoToEmailBinding:function(){var e,t,n={unbindWechat:\"VerifyAccount\"};null!==(e=this.nextData)&&void 0!==e&&e.bindingInfo&&(n.bindingInfo=null===(t=this.nextData)||void 0===t?void 0:t.bindingInfo),this.updateNextData({nextData:n}),this.$router.replace({path:\"/account/\".concat(this.wechatType,\"/unbind/email\"),query:this.$route.query})},startTiming:function(){var e=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){e.count--,e.count<=0&&(window.clearInterval(e.interval),e.interval=null)},1e3)},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},resetCaptcha:function(){var e;null===(e=this.$refs.VerifyAccount)||void 0===e||e.resetCaptcha()},handleGoToPhoneBinding:function(){this.$router.replace({path:\"/account/\".concat(this.wechatType,\"/unbind/phone\"),query:this.$route.query})},goToAutoCreate:function(){var e=this;return(0,i.A)(s().mark(function t(){return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({path:\"/\".concat(e.OAuthType,\"/binding/autocreate\"),query:O(O({},e.$route.query),{},{type:\"phone\",areaCode:e.areaCode,phone:e.queryPhone||e.phone,smsCode:e.smsCode})});case 1:case\"end\":return t.stop()}},t)}))()},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,g.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e){if(e.code){var t=e.code;m.f9.includes(t)?(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha(),this.showCaptchaCodeError=!1):e.code===m.Zm?this.failNavigateHandle(this.$t(\"v2_error_code_609\")):e.code===m.Ik&&this.goToAutoCreate(),this.errorCode=t,this.errorMsg=this.$t(\"v2_error_code_\".concat(t))}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleSendBtnTextChange:function(e){this.unbindWechatPhoneSendText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},components:{acUnboundWaring:C.A,VerifyAccount:u.A,acLink:l.A},beforeRouteEnter:function(e,t,n){n(function(n){document.title=\"\".concat(n.$t(\"v2_common_system_title\"),\" | \").concat(n.$t(\"v2_title_weapp_unbind\")),t.path.includes(\"autocreate\")&&e.meta.error&&n.errorCodeHandle(e.meta.error)})}},N=$,S=n(7358),P=(0,S.A)(N,r,a,!1,null,null,null),x=P.exports},92921:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ac-unbound-waring\",{attrs:{hide:e.hideWaring,unboundBtnUsage:e.USAGE_TAG_VALUE.ACCOUNT_CONFIRM_UNBIND_THIRD_PARTY}},[n(\"verify-account\",{ref:\"VerifyAccount\",staticClass:\"oauth-unbound-email\",attrs:{type:\"email\",mainTitle:e.$t(\"v2_weapp_unbind_phone_title\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showServiceLinks:\"\",isLogin:e.isLogin,confirmType:\"danger\",skeletonType:\"default\",confirmText:e.confirmBtnText,isConfirming:e.isLoading,showSkeleton:!e.inited,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_UNBIND_THIRD_PARTY_SUBMIT_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_UNBIND_THIRD_PARTY_SEND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleSend,confirm:e.handleSubmit,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[n(\"div\",{staticClass:\"mt-6 text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[e.maskRegisterPhone?n(\"ac-link\",{attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_UNBIND_THIRD_PARTY_CHANGE_VERIFY},on:{click:e.handleGoToPhoneBinding}},[e._v(\" \"+e._s(e.$t(\"v2_weapp_valid_to_phone\"))+\" \")]):e._e()],1)])],1)},a=[],i=n(23219),o=n(13667),c=n(52072),s=n.n(c),u=n(26066),l=n(95441),d=n(87728),h=n(74949),p=n(88333),m=n(37151),f=n(51501),g=n(22680),_=n(31272),v=n(78012),b=n(24450),C=n(40759),w=n(3372);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E={name:\"OAuth-unbind-email\",mixins:[],data:function(){return{moduleName:v.Sn.WECHAT_UNBIND_EMAIL,emailType:b.O.WECHAT_UNBIND,errorCode:\"\",errorMsg:\"\",isLoading:!1,isSendLoading:!1,maskEmail:\"\",maskRegisterPhone:\"\",captchaResult:null,code:\"\",unbindWechatSmsSendText:\"\",USAGE_TAG_VALUE:C.tU,showCaptchaCodeError:!1,showError:!1,codeHasBeenSent:!1,loaded:!0,isLogin:!1,inited:!1,hideWaring:!1,count:0,interval:null,confirmBtnText:this.$t(\"v2_weapp_unbind_submit\")}},computed:k(k({},(0,h.L8)({initData:m.A.common.getter.initData,getConfigCaptcha:m.A.captcha.getter.getConfig,lang:m.A.common.getter.lang,nextData:m.A.common.getter.nextData})),{},{queryEmail:function(){return this.$route.query.email||\"\"},OAuthType:function(){return\"wechat\"},maskInfo:function(){return this.maskEmail||(0,g.l_)(this.queryEmail)||\"\"}}),mounted:function(){},methods:k(k(k({},(0,h.PY)({updateNextData:m.A.common.mutation.updateNextData,setShowCaptcha:m.A.captcha.mutation.setShow})),(0,h.i0)({getParamWithTicket:m.A.captcha.action.getParamWithTicket})),{},{fetchBindingInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=null,r=k({},e.nextData),\"VerifyAccount\"===(null===r||void 0===r?void 0:r.unbindWechat)&&(e.hideWaring=!0,e.updateNextData({nextData:k(k({},r),{},{unbindWechat:null})})),null===r||void 0===r||!r.bindingInfo){t.next=1;break}n=null===r||void 0===r?void 0:r.bindingInfo,t.next=3;break;case 1:return t.next=2,p[\"default\"].common.getBindingInfo({},null,{ignoreUnLogin:!0});case 2:n=t.sent,(n.data.maskRegisterPhone||n.data.maskEmail)&&e.updateNextData({nextData:{bindingInfo:n}});case 3:return t.abrupt(\"return\",n);case 4:case\"end\":return t.stop()}},t)}))()},fetchUserInfo:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,e.fetchBindingInfo();case 2:n=t.sent,\"\"===e.queryEmail&&(e.maskEmail=n.data.maskEmail,e.maskRegisterPhone=n.data.maskRegisterPhone),e.isLogin=!0,t.next=4;break;case 3:t.prev=3,r=t[\"catch\"](1),e.isLogin=!1,\"\"===e.queryEmail&&e.failNavigateHandle(r.code?e.$t(\"v2_error_code_\".concat(r.code)):\"\");case 4:return t.prev=4,e.inited=!0,t.finish(4);case 5:case\"end\":return t.stop()}},t,null,[[1,3,4,5]])}))()},handleSend:function(e){var t=this;return(0,i.A)(s().mark(function n(){var r,a,i,o,c;return s().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,t.resetErrorCode(),null===(r=t.$ga)||void 0===r||r.event(\"OAuthUnbound btn\",\"Click\",\"\".concat((0,_.R7)(),\" send code to email\")),n.next=1,t.fetchCodeSend();case 1:i=n.sent,0===i.code&&t.startTiming(),t.codeHasBeenSent=!0,null===(a=t.$ga)||void 0===a||a.event(\"OAuthUnbound btn\",\"Click\",\"\".concat((0,_.R7)(),\" send code to email success\")),(0,w.HF)(C.tU.ACCOUNT_UNBIND_THIRD_PARTY_SEND_EMAIL,t.unbindWechatSmsSendText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&e.success(),n.next=3;break;case 2:n.prev=2,c=n[\"catch\"](0),\"\"!==t.code&&(t.loaded=!1),null===(o=t.$ga)||void 0===o||o.event(\"OAuthUnbound btn\",\"Click\",\"\".concat((0,_.R7)(),\" send code to email error \").concat(c.code)),t.errorCodeHandle(c),(0,w.HF)(C.tU.ACCOUNT_UNBIND_THIRD_PARTY_SEND_EMAIL,t.unbindWechatSmsSendText||t.$t(\"v2_btn_sendBtn\"),(null===c||void 0===c?void 0:c.code)||f.Sc),null!==e&&void 0!==e&&e.error&&e.error(c);case 3:return n.prev=3,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&e[\"finally\"](),n.finish(3);case 4:case\"end\":return n.stop()}},n,null,[[0,2,3,4]])}))()},handleSubmit:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i,o;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),e.confirmBtnText=e.$t(\"v2_weapp_unbind_submit_ing\"),a={type:\"Wechat\",email:e.queryEmail,code:e.code},null===(n=e.$ga)||void 0===n||n.event(\"oauthUnbound btn\",\"Click\",\"\".concat((0,_.R7)(),\" unbind to email\")),t.next=1,p[\"default\"].wechat.unbindEmail(a);case 1:e.confirmBtnText=e.$t(\"v2_weapp_unbind_submit_ok\"),null===(r=e.$ga)||void 0===r||r.event(\"oauthUnbound btn\",\"Click\",\"\".concat((0,_.R7)(),\" unbind to email success\")),(0,w.HF)(C.tU.ACCOUNT_UNBIND_THIRD_PARTY_SUBMIT_EMAIL,e.confirmBtnText),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,o=t[\"catch\"](0),e.isLoading=!1,e.confirmBtnText=e.$t(\"v2_weapp_unbind_submit\"),null===(i=e.$ga)||void 0===i||i.event(\"oauthUnbound btn\",\"Click\",\"\".concat((0,_.R7)(),\" unbind to email error \").concat(o.code)),(0,w.HF)(C.tU.ACCOUNT_UNBIND_THIRD_PARTY_SUBMIT_EMAIL,e.confirmBtnText,(null===o||void 0===o?void 0:o.code)||f.Sc),e.errorCodeHandle(o);case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_tips_unbinding_facebook_success\").replace(\"%@\",this.$t(\"v2_tips_wechat\")),redirectBtnText:this.$t(\"v2_btn_done\"),callbackUrl:(0,_.TP)()};this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchCodeSend:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=1,e.getParamWithTicket({moduleName:e.moduleName,param:{email:e.queryEmail,emailType:e.emailType},result:e.captchaResult});case 1:return n=t.sent,r=\"\"!==e.queryEmail?p[\"default\"].common.sendEmail(n):p[\"default\"].webBinding.sendValidateEmail(n),t.next=2,r;case 2:return a=t.sent,t.abrupt(\"return\",a);case 3:case\"end\":return t.stop()}},t)}))()},startTiming:function(){var e=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){e.count--,e.count<=0&&(window.clearInterval(e.interval),e.interval=null)},1e3)},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},resetCaptcha:function(){var e;null===(e=this.$refs.VerifyAccount)||void 0===e||e.resetCaptcha()},handleGoToPhoneBinding:function(){var e,t,n={unbindWechat:\"VerifyAccount\"};null!==(e=this.nextData)&&void 0!==e&&e.bindingInfo&&(n.bindingInfo=null===(t=this.nextData)||void 0===t?void 0:t.bindingInfo),this.updateNextData({nextData:n}),this.$router.replace({path:\"/account/\".concat(this.wechatType,\"/unbind/phone\"),query:this.$route.query})},goToAutoCreate:function(){var e=this;return(0,i.A)(s().mark(function t(){return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push({path:\"/\".concat(e.OAuthType,\"/binding/autocreate\"),query:k(k({},e.$route.query),{},{type:\"email\",email:e.email,emailCode:e.code})});case 1:case\"end\":return t.stop()}},t)}))()},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,_.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e){if(e.code){var t=e.code;f.f9.includes(t)?(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha(),this.showCaptchaCodeError=!1):t===f.Zm?this.failNavigateHandle(this.$t(\"v2_error_code_609\")):t===f.Ik&&this.goToAutoCreate(),this.errorCode=t,this.errorMsg=this.$t(\"v2_error_code_\".concat(t))}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleSendBtnTextChange:function(e){this.unbindWechatSmsSendText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},components:{acUnboundWaring:d.A,VerifyAccount:u.A,acLink:l.A},beforeRouteEnter:function(e,t,n){n(function(n){document.title=\"\".concat(n.$t(\"v2_common_system_title\"),\" | \").concat(n.$t(\"v2_title_weapp_unbind\")),t.path.includes(\"autocreate\")&&e.meta.error&&n.errorCodeHandle(e.meta.error)})}},A=E,T=n(7358),O=(0,T.A)(A,r,a,!1,null,null,null),$=O.exports},96705:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"card-container\",{staticClass:\"page-oauth-login\",attrs:{showLogo:!1,mainTitle:e.$t(\"v2_title_login\"),theme:\"black\",confirmText:e.isLoginSuccess?e.$t(\"v2_tips_login_success_redirecting\"):e.$t(\"v2_btn_login\"),isConfirming:e.isLogining},on:{confirm:e.handleLogin}},[n(\"div\",{staticClass:\"text-left\",on:{keydown:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:(t.stopPropagation(),e.handleLogin.apply(null,arguments))}}},[n(\"ac-input\",{attrs:{type:\"text\",name:\"username\",errorMsg:e.usernameError,valid:e.isUsernameValid,showError:e.showLoginError,label:e.isSupportPhone?e.$t(\"v2_placeholder_username\"):e.$t(\"v2_placeholder_email\"),inputType:e.isSupportPhone?e.$t(\"v2_placeholder_username\"):e.$t(\"v2_placeholder_email\")},on:{blurValidate:e.handleUsernameValidType},model:{value:e.username,callback:function(t){e.username=t},expression:\"username\"}}),n(\"ac-input\",{attrs:{type:\"password\",errorMsg:e.passwordError,valid:e.isPasswordValid,showError:e.showLoginError,label:e.$t(\"v2_placeholder_password\"),inputType:e.$t(\"v2_placeholder_password\")},on:{blurValidate:e.handlePasswordValidType},model:{value:e.password,callback:function(t){e.password=t},expression:\"password\"}}),n(\"ac-link\",{staticClass:\"oauth-forget text-break\",on:{click:e.handleGoToReset}},[e._v(\" \"+e._s(e.$t(\"v2_tips_forgot_password\"))+\" \")]),e.showCaptcha?n(\"div\",{class:\"captcha \"+(\"googleCaptchaV3\"===e.captchaType?\"\":\"pt-6\")},[n(\"ac-captcha\",{ref:\"captcha\",attrs:{config:e.captchaConfig,valid:e.isCaptchaValid,showError:e.showCaptchaError,errorCode:e.errorCode},on:{validate:e.handleCaptchaValidate,enter:e.handleLogin}})],1):e._e(),n(\"transition\",{attrs:{name:\"fade\",mode:\"out-in\"}},[e.errorMsg?n(\"div\",{staticClass:\"ac-error-container\"},[n(\"ac-alert\",[e._v(e._s(e.errorMsg))])],1):e._e()])],1),n(\"div\",{staticClass:\"link-to-register\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{on:{click:e.handleGoToRegister}},[e._v(\" \"+e._s(e.$t(\"v2_tips_to_register\"))+\" \")])],1),n(\"browser-guide\",{attrs:{visible:e.showDialog,title:\"打开系统浏览器登录\",description:\"当前登录环境异常，请点击右上角 [...] 按钮<br>选择在浏览器中打开，以登录大疆账号\"},on:{\"update:visible\":function(t){e.showDialog=t}}})],1)},a=[],i=n(23219),o=n(13667),c=n(52072),s=n.n(c),u=n(74949),l=n(37151),d=n(32368),h=n(82068),p=n(85085),m=n(11663),f=n(95441),g=n(78012),_=n(51501),v=n(22680),b=n(39567),C=n(31272),w=n(70780),y=n(88333),k=n(46918),E=n(56090),A=n(42483);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $=g.Sn.LOGIN,N={name:\"PageOAuthLogin\",mixins:[E.A],data:function(){return{isLogining:!1,errorMsg:\"\",errorCode:\"\",webAccessType:k.Fr?\"H5\":\"PC\",captchaResult:null,username:\"\",password:\"\",isLoginSuccess:!1,showLoginError:!1,showCaptchaError:!1,usernameValidType:\"click\",passwordValidType:\"click\",showDialog:!1}},computed:O(O({},(0,u.L8)({initData:l.A.common.getter.initData,getConfigCaptcha:l.A.captcha.getter.getConfig,lang:l.A.common.getter.lang})),{},{isSupportPhone:function(){var e;return(null===(e=this.initData)||void 0===e?void 0:e.appConfig)&&\"on\"===this.initData.appConfig[\"\".concat((0,C.R7)(),\".phone.\").concat(this.lang,\".switch\")]},accountType:function(){return(0,v.xf)(this.username)?\"1\":this.isSupportPhone&&(0,v.tp)(this.username)?\"2\":\"0\"},captchaConfig:function(){return this.getConfigCaptcha($)},showCaptcha:function(){return this.captchaConfig.show},captchaType:function(){var e,t,n=null===(e=this.$store.state.captcha[$])||void 0===e?void 0:e.currentCaptchaIndex;return null===(t=this.$store.state.captcha[$])||void 0===t||null===(t=t.captchaList)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.captchaType},isCaptchaValid:function(){return!(this.showCaptcha&&!this.captchaResult)&&!_.vF.includes(this.errorCode)},usernameError:function(){return this.username?\"0\"===this.accountType?this.isSupportPhone?this.$t(\"v2_error_format_username\"):this.$t(\"v2_error_format_email\"):\"\":this.isSupportPhone?this.$t(\"v2_error_required_username\"):this.$t(\"v2_error_required_email\")},isUsernameValid:function(){return!(!this.username&&\"click\"===this.usernameValidType)&&(!this.username||!this.usernameError)},passwordError:function(){return this.password?\"\":this.$t(\"v2_error_required_password\")},isPasswordValid:function(){return!(!this.password&&\"click\"===this.passwordValidType)&&(!this.password||!this.passwordError)},areaCode:function(){return\"2\"===this.accountType?\"86\":\"\"},phone:function(){return\"2\"===this.accountType?this.username:\"\"},email:function(){return\"1\"===this.accountType?this.username:\"\"},isComplexValidate:function(){return this.captchaConfig.isComplexValidate},isInWechat:function(){return(0,k.vq)()}}),created:function(){var e=this;if(this.isInWechat){var t=document.referrer;t&&t.includes(\"aihuishou\")&&t.includes(\"/login/oauth\")&&this.$nextTick(function(){e.showDialog=!0,document.title=\"打开系统浏览器登录\"})}(0,w.S)()},methods:O(O(O({},(0,u.PY)({updateNextData:l.A.common.mutation.updateNextData,setShowCaptcha:l.A.captcha.mutation.setShow,clearTicket:l.A.captcha.mutation.clearTicket})),(0,u.i0)({getParamWithTicket:l.A.captcha.action.getParamWithTicket})),{},{handleUsernameValidType:function(){this.usernameValidType=\"blur\"},handlePasswordValidType:function(){this.passwordValidType=\"blur\"},login:function(){var e=this;return(0,i.A)(s().mark(function t(){var n,r,a,i,o,c,u,l,d;return s().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r={webAccessType:e.webAccessType,accountType:e.accountType,areaCode:e.areaCode,phone:e.phone,password:e.password,email:e.email},Object.assign(r,{client_id:(0,b.P3)(\"client_id\"),redirect_uri:(0,b.P3)(\"redirect_uri\"),response_type:(0,b.P3)(\"response_type\"),state:(0,b.P3)(\"state\"),scope:(0,b.P3)(\"scope\"),sign:(0,b.P3)(\"sign\")}),e.isLogining=!0,e.isLoginSuccess=!1,null===(n=e.$ga)||void 0===n||n.event(\"login btn\",\"Click\",\"\".concat((0,C.R7)(),\" to login\")),t.prev=1,t.next=2,e.getInvisibleCaptchaToken();case 2:return i=t.sent,t.next=3,e.getParamWithTicket({moduleName:$,param:r,result:e.captchaResult,invisibleToken:i});case 3:return o=t.sent,t.next=4,y[\"default\"].login.toLogin(o);case 4:c=t.sent,null===(a=e.$ga)||void 0===a||a.event(\"login btn\",\"Click\",\"\".concat((0,C.R7)(),\" login success\")),e.isLoginSuccess=!0,window.location.replace(c.data.callbackUrl),t.next=6;break;case 5:t.prev=5,d=t[\"catch\"](1),e.resetCaptcha(),e.isLogining=!1,e.showLoginError=!0,e.handleErrorCode(d),null===(u=e.$ga)||void 0===u||u.event(\"login btn\",\"Click\",\"\".concat((0,C.R7)(),\" login error \").concat(d.code,\" \")),null===(l=e.$ga)||void 0===l||l.event(\"login_error_backend\",\"Click\",\"code_\".concat(d.code,\""
}