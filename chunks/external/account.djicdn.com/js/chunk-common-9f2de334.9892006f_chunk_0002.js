{
  "metadata": {
    "source_file": "external\\account.djicdn.com\\js\\chunk-common-9f2de334.9892006f.js",
    "chunk_index": 2,
    "total_chunks": 2,
    "chunk_size": 48187,
    "word_count": 689,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:49.785Z"
  },
  "content": "check code to phone success\")),(0,y.HF)(w.tU.ACCOUNT_MODIFY_SECURITY_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\")),e.verificationMethod=\"SMS\",e.$nextTick(function(){e.next(\"submit\")}),t.next=3;break;case 2:t.prev=2,d=t[\"catch\"](0),null===(s=e.$ga)||void 0===s||s.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,C.R7)(),\" check code to phone error \").concat(d.code)),(0,y.HF)(w.tU.ACCOUNT_MODIFY_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\"),(null===d||void 0===d?void 0:d.code)||E.Sc),e.errorCodeHandle(d);case 3:return t.prev=3,e.isLoading=!1,t.finish(3);case 4:case\"end\":return t.stop()}},t,null,[[0,2,3,4]])}))()},handleEmailNextConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),t.next=1,f[\"default\"].webBinding.validateEmail({emailCode:e.code,scene:\"MODIFY_SECURE\"});case 1:i=t.sent,e.ticket=(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.validateTicket)||(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.emailValidateTicket),(0,y.HF)(w.tU.ACCOUNT_MODIFY_SECURITY_PHONE_SUBMIT_EMAIL,e.$t(\"v2_btn_next\")),e.verificationMethod=\"EMAIL\",e.$nextTick(function(){e.next(\"submit\")}),t.next=3;break;case 2:t.prev=2,o=t[\"catch\"](0),(0,y.HF)(w.tU.ACCOUNT_MODIFY_SECURITY_PHONE_SUBMIT_EMAIL,e.$t(\"v2_btn_next\"),(null===o||void 0===o?void 0:o.code)||E.Sc),e.errorCodeHandle(o);case 3:return t.prev=3,e.isLoading=!1,t.finish(3);case 4:case\"end\":return t.stop()}},t,null,[[0,2,3,4]])}))()},handleSecurityPhoneVerifySend:function(){var e=this;return(0,o.A)(c().mark(function t(){return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.errorMsg=e.$t(\"v2_tips_off_line\");case 1:case\"end\":return t.stop()}},t)}))()},handleSecurityPhoneNextConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.errorMsg=e.$t(\"v2_tips_off_line\");case 1:case\"end\":return t.stop()}},t)}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r,s;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,i=\"SMS\",\"VERIFY_EMAIL\"===e.activeName?i=\"EMAIL\":\"VERIFY_SECURITY_PHONE\"===e.activeName&&(i=\"SECURE\"),o={areaCode:e.areaCode,securePhone:e.phone,smsCode:e.code,validateTicket:e.ticket,verificationMethod:e.verificationMethod||i,scene:\"MODIFY_SECURE\"},e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"modifySecurityPhone btn\",\"Click\",\"\".concat((0,C.R7)(),\" check code and bind security phone\")),t.next=1,f[\"default\"].webBinding.bindingSecuredPhone(o);case 1:null===(a=e.$ga)||void 0===a||a.event(\"modifySecurityPhone btn\",\"Click\",\"\".concat((0,C.R7)(),\" check code and bind security phone success\")),(0,y.HF)(w.tU.ACCOUNT_MODIFY_SECURITY_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,s=t[\"catch\"](0),null===(r=e.$ga)||void 0===r||r.event(\"modifySecurityPhone btn\",\"Click\",\"\".concat((0,C.R7)(),\" check code and bind security phone error \").concat(s.code)),(0,y.HF)(w.tU.ACCOUNT_MODIFY_SECURITY_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\"),(null===s||void 0===s?void 0:s.code)||E.Sc),e.isLoading=!1,e.errorCodeHandle(s,\"resetCaptcha\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_security_phone_number_modify_success\"),redirectBtnText:this.$t(\"v2_btn_done\"),callbackUrl:\"/account/profile\"};this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r,s,d,l,u,h;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,f[\"default\"].common.getSecureBindingInfo();case 2:r=t.sent,e.maskRegisterPhone=r.data.maskRegisterPhone||\"\",e.maskEmail=r.data.maskEmail||\"\",s=Array.isArray(null===(n=r.data)||void 0===n?void 0:n.maskSecurePhone)?r.data.maskSecurePhone[0]||\"\":(null===(a=r.data)||void 0===a?void 0:a.maskSecurePhone)||\"\",e.maskSecurityPhone=s||(null===(i=r.data)||void 0===i?void 0:i.maskSecurityPhone)||\"\",e.hasPhone=!!e.maskRegisterPhone,e.hasEmail=!!e.maskEmail,d=!(null===(o=r.data)||void 0===o||!o.sameAsPrimaryMobile),e.hasSecurityPhone=!!e.maskSecurityPhone&&!d,l=[e.hasPhone,e.hasEmail,e.hasSecurityPhone].filter(Boolean).length,l>=2?(e.activeName=\"choose-verify\",e.moduleName=m.Sn.WEB_BIND_SECURITY_PHONE):e.hasSecurityPhone?(e.activeName=\"verify-security-phone\",e.validateType=\"security-phone\",e.moduleName=m.Sn.WEB_SECURE_AUTHORIZATION_PHONE):e.hasPhone?(e.activeName=\"verify-phone\",e.validateType=\"phone\",e.moduleName=m.Sn.MODIFY_MOBILE):e.hasEmail&&(e.activeName=\"verify-email\",e.validateType=\"email\",e.moduleName=m.Sn.WEB_VALIDATE_EMAIL),e.inited=!0,t.next=4;break;case 3:t.prev=3,h=t[\"catch\"](1),u=h.code?e.$t(\"v2_error_code_\".concat(h.code)):e.$t(\"v2_tips_off_line\"),e.failNavigateHandle(u);case 4:case\"end\":return t.stop()}},t,null,[[1,3]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,C.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;(\"resetCaptcha\"===t||E.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t(\"v2_error_code_\".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleSendBtnTextChange:function(e){this.sendVerifySmsBtnText=e},handleSendSmsBtnTextChange:function(e){this.sendSmsBtnText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},components:{acWarning:u.A,VerifyAccount:d.A,BindAccount:l.A,ChooseVerify:h.A,acLink:A.A},beforeRouteEnter:function(e,t,n){n(function(e){\"zh_CN\"===e.lang?document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_title_modify_security_phone\")):e.failNavigateHandle(e.$t(\"v2_error_code_520\"))})}},O=N,I=n(7358),P=(0,I.A)(O,a,i,!1,null,null,null),k=P.exports},73339:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ac-warning\",{staticClass:\"modify-phone\",attrs:{mainTitle:e.$t(\"v2_modify_mobile_dialog_title\"),descriptons:e.$t(\"v2_modify_mobile_dialog_center\"),confirmText:e.$t(\"v2_btn_next\"),btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_CONFIRM_PHONE_CHANGE}},[\"choose-verify\"===e.activeName?n(\"choose-verify\",{attrs:{inited:e.inited,hasPhone:!0,hasSecurityPhone:e.hasSecurityPhone,maskPhone:e.maskInfo,maskSecurityPhone:e.maskSecurityPhone},on:{toVerify:e.handleToVerify}}):e._e(),\"VERIFY_PHONE\"===e.activeName?n(\"verify-account\",{ref:\"VerifyAccount\",attrs:{type:\"sms\",mainTitle:e.$t(\"v2_tips_verify_security_phone\"),serviceTips:e.$t(\"v2_phone_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_SEND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNextConfirm,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n(\"div\",{staticClass:\"text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{staticClass:\"mt-6\",attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_CHANGE_VERIFY},on:{click:e.handleToChoose}},[e._v(\" \"+e._s(e.$t(\"v2_select_another_verification_method\"))+\" \")])],1):e._e()]):e._e(),\"VERIFY_SECURITY_PHONE\"===e.activeName?n(\"verify-account\",{ref:\"VerifySecurity\",attrs:{type:\"sms\",mainTitle:e.$t(\"v2_tips_verify_security_phone\")||e.$t(\"v2_tips_verify_binding_phone\"),serviceTips:e.$t(\"v2_phone_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskSecurityPhone,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_SEND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNextConfirm,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n(\"div\",{staticClass:\"text-center\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[n(\"ac-link\",{staticClass:\"mt-6\",attrs:{type:\"primary\",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_CHANGE_VERIFY},on:{click:e.handleToChoose}},[e._v(\" \"+e._s(e.$t(\"v2_select_another_verification_method\"))+\" \")])],1):e._e()]):e._e(),\"MODIFY_PHONE\"===e.activeName?n(\"bind-account\",{ref:\"BindAccount\",attrs:{type:\"sms\",isValueFormat:\"\",mainTitle:e.$t(\"v2_title_binding_new_phone\"),descriptons:e.$t(\"v2_tips_binding_new_phone_text\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,areaCode:e.areaCode,maskInfo:e.phone,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_SUBMIT_BIND_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_PHONE_SEND_BIND_SMS},on:{\"update:code\":function(t){e.code=t},\"update:areaCode\":function(t){e.areaCode=t},\"update:area-code\":function(t){e.areaCode=t},\"update:maskInfo\":function(t){e.phone=t},\"update:mask-info\":function(t){e.phone=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendSmsBtnTextChange}}):e._e()],1)},i=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),d=n(26066),l=n(7223),u=n(8217),h=n(611),_=n(95441),p=n(46918),m=n(78012),v=n(43435),f=n(88333),C=n(39567),E=n(31272),w=n(51501),S=n(40759),g=n(74949),y=n(37151),A=n(3372),T=n(72409),b=n(11579);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I={name:\"modify-phone\",mixins:[],data:function(){return{isMobile:p.Fr,moduleName:m.Sn.MODIFY_MOBILE,smsType:v.i.WEB_VALIDATE_PHONE,activeName:\"VERIFY_PHONE\",inited:!1,maskInfo:\"\",maskSecurityPhone:\"\",hasSecurityPhone:!1,code:\"\",captchaResult:null,ticket:null,verificationMethod:\"\",areaCode:\"86\",phone:\"\",sendVerifySmsBtnText:\"\",sendSmsBtnText:\"\",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:S.tU}},computed:O(O({},(0,g.L8)({initData:y.A.common.getter.initData,nextData:y.A.common.getter.nextData,lang:y.A.common.getter.lang})),{},{showSwitchLink:function(){return this.hasSecurityPhone}}),methods:O(O(O({},(0,g.PY)({updateNextData:y.A.common.mutation.updateNextData,setShowCaptcha:y.A.captcha.mutation.setShow})),(0,g.i0)({getParamWithTicket:y.A.captcha.action.getParamWithTicket})),{},{handleToChoose:function(){this.resetErrorCode(),this.activeName=\"choose-verify\",this.moduleName=m.Sn.MODIFY_MOBILE},next:function(){document.documentElement.scrollTop=0,window.clearInterval(this.interval),this.count=0,this.interval=null,this.code=\"\",this.moduleName=m.Sn.EMAIL_BINDING_PHONE,this.smsType=v.i.WEB_BIND_PHONE,this.captchaResult=null,this.resetErrorCode(),this.activeName=\"MODIFY_PHONE\"},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var a,i,o,r,s,d,l,u;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,t.resetErrorCode(),\"VERIFY_SECURITY_PHONE\"===t.activeName?(a={areaCode:t.areaCode,smsType:v.i.SECURE_PHONE_AUTHORIZATION,scene:\"MODIFY_PHONE\"},i=m.Sn.WEB_SECURE_AUTHORIZATION_PHONE):(a={areaCode:t.areaCode,smsType:v.i.WEB_VALIDATE_PHONE,scene:\"MODIFY_PHONE\"},i=m.Sn.MODIFY_MOBILE),n.next=1,t.getParamWithTicket({moduleName:i,param:a,result:t.captchaResult});case 1:if(o=n.sent,\"VERIFY_SECURITY_PHONE\"!==t.activeName){n.next=3;break}return null===(s=t.$ga)||void 0===s||s.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" send code to security phone\")),n.next=2,f[\"default\"].common.sendLoginPhone(o);case 2:r=n.sent,t.startTiming(),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SEND_SMS,t.sendVerifySmsBtnText||t.$t(\"v2_btn_sendBtn\")),n.next=5;break;case 3:return(0,T.XP)(T.j9.STEP_1,{path:b.Lq.SMS_VALIDATION_SEND,scene:b.Nd.BINGDING_PHONE_SMS}),n.next=4,f[\"default\"].common.sendLoginPhone(o);case 4:r=n.sent,(0,T.XP)(T.j9.STEP_4,{path:b.Lq.SMS_VALIDATION_SEND,scene:b.Nd.BINGDING_PHONE_SMS}),t.startTiming(),null===(d=t.$ga)||void 0===d||d.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" send code to phone success\")),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SEND_SMS,t.sendVerifySmsBtnText||t.$t(\"v2_btn_sendBtn\"));case 5:null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(r)),n.next=7;break;case 6:n.prev=6,u=n[\"catch\"](0),null===(l=t.$ga)||void 0===l||l.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" send code to phone error \").concat(u.code)),t.errorCodeHandle(u),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(u));case 7:return n.prev=7,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(7);case 8:case\"end\":return n.stop()}},n,null,[[0,6,7,8]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var a,i,o,r,s,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,t.resetErrorCode(),null===(a=t.$ga)||void 0===a||a.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" send code to new phone\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:{areaCode:t.areaCode,phone:t.phone,smsType:t.smsType,scene:\"MODIFY_PHONE\"},result:t.captchaResult});case 1:return o=n.sent,(0,T.XP)(T.j9.STEP_1,{path:b.Lq.SEND_SMS,scene:b.Nd.BINDING_PHONE_NEW_SMS}),n.next=2,f[\"default\"].common.sendSmsCode(o);case 2:r=n.sent,(0,T.XP)(T.j9.STEP_4,{path:b.Lq.SEND_SMS,scene:b.Nd.BINDING_PHONE_NEW_SMS}),t.startTiming(),null===(i=t.$ga)||void 0===i||i.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" send code to new phone success\")),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(r)),n.next=4;break;case 3:n.prev=3,d=n[\"catch\"](0),null===(s=t.$ga)||void 0===s||s.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" send code to new phone error \").concat(d.code)),t.errorCodeHandle(d,\"resetCaptcha\"),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t(\"v2_btn_sendBtn\"),(null===d||void 0===d?void 0:d.code)||w.Sc),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleToVerify:function(e){this.resetErrorCode(),\"phone\"===e&&(this.activeName=\"VERIFY_PHONE\",this.moduleName=m.Sn.MODIFY_MOBILE),\"security-phone\"===e&&(this.activeName=\"VERIFY_SECURITY_PHONE\",this.moduleName=m.Sn.WEB_SECURE_AUTHORIZATION_PHONE)},handleNextConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r,s,d,l;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" check code to phone\")),(0,T.XP)(T.j9.STEP_6,{path:b.Lq.PHONE_VALIDATION,scene:b.Nd.BINGDING_PHONE_SMS}),r=\"VERIFY_SECURITY_PHONE\"===e.activeName?{smsCode:e.code,verificationMethod:\"SECURE\",scene:\"MODIFY_PHONE\"}:{smsCode:e.code,scene:\"MODIFY_PHONE\"},t.next=1,f[\"default\"].account.phoneValidation(r);case 1:s=t.sent,(0,T.kL)(),e.ticket=(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.phoneValidateTicket)||(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.validateTicket),null===(o=e.$ga)||void 0===o||o.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" check code to phone success\")),e.activeName,(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\")),e.verificationMethod=\"VERIFY_SECURITY_PHONE\"===e.activeName?\"SECURE\":\"\",e.$nextTick(function(){e.next()}),t.next=3;break;case 2:t.prev=2,l=t[\"catch\"](0),null===(d=e.$ga)||void 0===d||d.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" check code to phone error \").concat(l.code)),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SUBMIT_SMS,e.$t(\"v2_btn_next\"),(null===l||void 0===l?void 0:l.code)||w.Sc),e.errorCodeHandle(l);case 3:return t.prev=3,e.isLoading=!1,t.finish(3);case 4:case\"end\":return t.stop()}},t,null,[[0,2,3,4]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,i={areaCode:e.areaCode,phone:e.phone,smsCode:e.code,phoneValidateTicket:e.ticket},\"SECURE\"===e.verificationMethod&&(i.verificationMethod=\"SECURE\"),e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" check code and bind phone\")),(0,T.XP)(T.j9.STEP_6,{path:b.Lq.PHONE_BINGDING_MODIFICATION,scene:b.Nd.BINDING_PHONE_NEW_SMS}),t.next=1,f[\"default\"].account.phoneBindingModification(i);case 1:(0,T.kL)(),null===(a=e.$ga)||void 0===a||a.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" check code and bind phone success\")),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t[\"catch\"](0),null===(o=e.$ga)||void 0===o||o.event(\"modifyPhone btn\",\"Click\",\"\".concat((0,E.R7)(),\" check code and bind phone error \").concat(r.code)),(0,A.HF)(S.tU.ACCOUNT_MODIFY_PHONE_SUBMIT_BIND_SMS,e.$t(\"v2_weapp_binding_phone_submit\"),(null===r||void 0===r?void 0:r.code)||w.Sc),e.isLoading=!1,e.errorCodeHandle(r,\"resetCaptcha\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_weapp_modify_binding_phone_success\"),subTitle:this.$t(\"v2_weapp_modify_binding_phone_success_text\"),redirectBtnText:this.$t(\"v2_btn_done\")},t=(0,C.P3)(\"backUrl\");t?e.callbackUrl=t:e.redirectPath=\"/login\",this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r,s,d,l,u;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(\"zh_CN\"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t(\"v2_error_code_520\")),t.abrupt(\"return\");case 1:return t.prev=1,t.next=2,f[\"default\"].common.getSecureBindingInfo();case 2:if(r=t.sent,null!==r.data.maskRegisterPhone){t.next=3;break}return e.failNavigateHandle(e.$t(\"v2_weapp_modify_mobile_unPhone\")),t.abrupt(\"return\");case 3:e.maskInfo=r.data.maskRegisterPhone,s=Array.isArray(null===(n=r.data)||void 0===n?void 0:n.maskSecurePhone)?r.data.maskSecurePhone[0]||\"\":(null===(a=r.data)||void 0===a?void 0:a.maskSecurePhone)||\"\",e.maskSecurityPhone=s||(null===(i=r.data)||void 0===i?void 0:i.maskSecurityPhone)||\"\",d=!(null===(o=r.data)||void 0===o||!o.sameAsPrimaryMobile),e.hasSecurityPhone=!!e.maskSecurityPhone&&!d,e.hasSecurityPhone?(e.activeName=\"choose-verify\",e.moduleName=m.Sn.MODIFY_MOBILE):e.activeName=\"VERIFY_PHONE\",e.inited=!0,t.next=5;break;case 4:t.prev=4,u=t[\"catch\"](1),l=u.code?e.$t(\"v2_error_code_\".concat(u.code)):e.$t(\"v2_tips_off_line\"),e.failNavigateHandle(l);case 5:case\"end\":return t.stop()}},t,null,[[1,4]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,E.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;(\"resetCaptcha\"===t||w.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t(\"v2_error_code_\".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleSendBtnTextChange:function(e){this.sendVerifySmsBtnText=e},handleSendSmsBtnTextChange:function(e){this.sendSmsBtnText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},components:{acWarning:u.A,VerifyAccount:d.A,BindAccount:l.A,ChooseVerify:h.A,acLink:_.A},beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_weapp_modify_mobile_title\"))})}},P=I,k=n(7358),M=(0,k.A)(P,a,i,!1,null,null,null),U=M.exports},80294:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return\"no-email\"===e.type?n(\"card-container\",{staticClass:\"middleware no-email\",attrs:{showConfirmBtn:!1,showLogo:!1,descriptons:e.$t(\"v2_common_oauth_noEmailReject\"),mainTitle:e.$t(\"v2_title_oauth_no_email\")}},[\"facebook\"===e.userOauthType?[n(\"ac-button\",{attrs:{type:\"primary\",theme:\"black\",block:\"\",buttonType:e.$t(\"v2_go_to_registration\")},on:{click:e.handleGoToRegistration}},[e._v(\" \"+e._s(e.$t(\"v2_go_to_registration\"))+\" \")]),n(\"ac-button\",{staticClass:\"btn-jump-store\",attrs:{block:\"\",buttonType:e.$t(\"v2_go_to_facebook\")},on:{click:e.handleGoToFacebook}},[e._v(\" \"+e._s(e.$t(\"v2_go_to_facebook\"))+\" \")])]:e._e()],2):\"email-not-binding\"===e.type?n(\"card-container\",{staticClass:\"middleware email-not-binding\",attrs:{mainTitle:e.$t(\"v2_title_set_password\"),theme:\"black\",showLogo:!1,descriptons:e.$t(\"v2_tips_set_account_password\"),confirmText:e.isLoginSuccess?e.$t(\"v2_tips_login_success_redirecting\"):e.$t(\"v2_btn_setup_and_login\"),isConfirming:e.isLogining,btnAcLabel:e.USAGE_TAG_VALUE.MIDDLEWARE_SETUP_AND_LOGIN,isConfirmDisabled:e.isBtnDisabled},on:{confirm:e.handleLogin}},[n(\"div\",{on:{keydown:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:(t.stopPropagation(),e.handleLogin.apply(null,arguments))}}},[n(\"ac-input\",{attrs:{type:\"text\",name:\"username\",disabled:\"\",label:e.usernameLabel,inputType:e.usernameLabel},model:{value:e.username,callback:function(t){e.username=t},expression:\"username\"}}),n(\"ac-input\",{attrs:{type:\"password\",errorMsg:e.passwordError,valid:e.isPasswordValid,showError:e.showLoginError,passwordIcon:\"\",inputType:e.$t(\"v2_placeholder_password\"),label:e.$t(\"v2_placeholder_password\")},on:{blurValidate:e.blurMiddlewarePasswordValid},model:{value:e.password,callback:function(t){e.password=t},expression:\"password\"}}),n(\"ac-input\",{staticClass:\"password\",attrs:{label:e.$t(\"v2_placeholder_confirm_new_passwd\"),autocomplete:\"new-password\",type:\"password\",name:\"middlewareConfirmPassword\",errorMsg:e.middlewareConfirmPasswordError,showError:e.showLoginError,valid:e.middlewareConfirmPasswordValid,passwordIcon:!0,inputType:e.$t(\"v2_placeholder_confirm_new_passwd\")},on:{blurValidate:e.blurMiddlewareConfirmPasswordValid},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:\"newPassword\"}}),e.showCaptcha?n(\"div\",{class:\"captcha \"+(\"googleCaptchaV3\"===e.captchaType?\"\":\"pt-6\")},[n(\"ac-captcha\",{ref:\"captcha\",attrs:{config:e.captchaConfig,valid:e.isCaptchaValid,showError:e.showCaptchaError,errorCode:e.errorCode},on:{validate:e.handleCaptchaValidate,enter:e.handleLogin}})],1):e._e(),n(\"transition\",{attrs:{name:\"fade\",mode:\"out-in\"}},[e.errorMsg?n(\"div\",{staticClass:\"ac-error-container\"},[n(\"ac-alert\",[e._v(e._s(e.errorMsg))])],1):e._e()])],1),n(\"p\",{staticClass:\"link-to-register\",attrs:{slot:\"bottom\"},slot:\"bottom\"},[e._v(\" \"+e._s(e.$t(\"v2_weapp_login_old_user\"))+\" \"),n(\"ac-link\",{on:{click:e.handleGoToLogin}},[e._v(\" \"+e._s(e.$t(\"v2_tips_to_login\"))+\" \")])],1)]):n(\"middleware-skeleton\")},i=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),d=n(74949),l=n(37151),u=n(32368),h=n(88333),_=n(92066),p=n(78012),m=n(51501),v=n(20991),f=n(39567),C=n(31272),E=n(40759),w=n(60601),S=n(3372),g=n(82068),y=n(85085),A=n(11663),T=n(95441),b=n(52621),N=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticStyle:{padding:\"88px 0 120px\"}},[n(\"div\",{staticClass:\"skeleton-item skeleton-round skeleton-center skeleton-gap-lg\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-title skeleton-center skeleton-gap-lg\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label-lg skeleton-gap-lg\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label-lg skeleton-gap-sm\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label-md skeleton-center skeleton-gap-sm\"}),n(\"div\",{staticClass:\"skeleton-item skeleton-label skeleton-center skeleton-gap-lg\",staticStyle:{width:\"180px\"}})])}],I=n(7358),P={},k=(0,I.A)(P,N,O,!1,null,null,null),M=k.exports;function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D=p.Sn.OAUTH_LOGIN,R={name:\"PageMiddleware\",data:function(){return{initliazed:!1,isLogining:!1,errorMsg:\"\",errorCode:\"\",type:\"\",userOauthType:\"\",timer:null,count:3,userEmail:\"\",callbackUrl:\"\",username:\"\",password:\"\",newPassword:\"\",middlewarePasswordValidateType:\"click\",middlewareConfirmPasswordValidType:\"click\",showLoginError:!1,showCaptchaError:!1,uuid:(0,f.P3)(\"uuid\"),captchaResult:null,isLoginSuccess:!1,USAGE_TAG_VALUE:E.tU}},computed:L(L({},(0,d.L8)({initData:l.A.common.getter.initData,getConfigCaptcha:l.A.captcha.getter.getConfig,lang:l.A.common.getter.lang})),{},{passwordRule:function(){return this.initData&&this.initData.passwordReg?this.initData.passwordReg:null},passwordRuleType:function(){return this.initData&&this.initData.passwordPromptType?this.initData.passwordPromptType:w.LJ.DEFAULT},middlewareConfirmPasswordValid:function(){return!(!this.newPassword&&\"click\"===this.middlewareConfirmPasswordValidType)&&(!this.newPassword||this.newPassword===this.password)},middlewareConfirmPasswordError:function(){return this.newPassword?this.newPassword!==this.password?this.$t(\"v2_error_not_equals_comfirm_new_passwd\"):null:this.$t(\"v2_error_required_comfirm_new_passwd\")},query:function(){return(0,_.jv)()||{}},captchaConfig:function(){return this.getConfigCaptcha(D)},showCaptcha:function(){return this.captchaConfig.show},oauthType:function(){var e=this.userOauthType||(0,f.P3)(\"oauthType\");return v.ai.includes(e)||(e=\"unknown\"),e},usernameLabel:function(){return this.isSupportPhone?this.$t(\"v2_placeholder_username\"):this.$t(\"v2_placeholder_email\")},isUsernameValid:function(){return!this.usernameError},isPasswordValid:function(){return!(!this.password&&\"click\"===this.middlewarePasswordValidateType)&&(!this.password||this.passwordRule&&new RegExp(this.passwordRule).test(this.password))},isCaptchaValid:function(){return!(this.showCaptcha&&!this.captchaResult)},usernameError:function(){return this.username?\"0\"===this.accountType?this.isSupportPhone?this.$t(\"v2_error_format_username\"):this.$t(\"v2_error_format_email\"):\"\":this.isSupportPhone?this.$t(\"v2_error_required_username\"):this.$t(\"v2_error_required_email\")},passwordError:function(){return this.password?this.passwordRule&&!new RegExp(this.passwordRule).test(this.password)?this.passwordRuleType===w.LJ.DEFAULT?this.$t(\"v2_error_format_password\"):this.$t(\"v2_error_format_password_\".concat(this.passwordRuleType)):null:this.$t(\"v2_error_required_password\")},isBtnDisabled:function(){return!(this.isPasswordValid&&this.middlewareConfirmPasswordValid&&this.isCaptchaValid)},captchaType:function(){var e,t,n=null===(e=this.$store.state.captcha[D])||void 0===e?void 0:e.currentCaptchaIndex;return null===(t=this.$store.state.captcha[D])||void 0===t||null===(t=t.captchaList)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.captchaType}}),created:function(){this.fetchUserInfo()},methods:L(L(L({},(0,d.PY)({updateNextData:l.A.common.mutation.updateNextData,setShowCaptcha:l.A.captcha.mutation.setShow,clearTicket:l.A.captcha.mutation.clearTicket})),(0,d.i0)({getParamWithTicket:l.A.captcha.action.getParamWithTicket})),{},{fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r,s,d;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initliazed&&e.initData){t.next=1;break}return t.abrupt(\"return\");case 1:return e.initliazed=!0,t.prev=2,t.next=3,h[\"default\"].middleware.getOauthUserInfo({uuid:e.uuid});case 3:n=t.sent,a=n.data,i=a.callbackUrl,o=a.email,r=a.oauthType,s=a.existed,e.callbackUrl=i,e.userEmail=o,e.userOauthType=r,e.existed=s,e.check(),t.next=5;break;case 4:t.prev=4,d=t[\"catch\"](2),e.handleErrorCode(d,\"toFail\");case 5:case\"end\":return t.stop()}},t,null,[[2,4]])}))()},login:function(e,t){var n=this;return(0,o.A)(c().mark(function a(){var i,o,r,s;return c().wrap(function(a){while(1)switch(a.prev=a.next){case 0:return n.isLogining=!0,n.isLoginSuccess=!1,a.prev=1,a.next=2,n.getParamWithTicket({moduleName:D,param:e,result:n.captchaResult});case 2:return i=a.sent,a.next=3,h[\"default\"].middleware.oauthResetPassword(i);case 3:o=a.sent,(0,S.HF)(E.tU.MIDDLEWARE_SETUP_AND_LOGIN,n.$t(\"v2_btn_setup_and_login\")),n.isLoginSuccess=!0,window.location.href=o.data.callbackUrl,a.next=5;break;case 4:a.prev=4,s=a[\"catch\"](1),null===(r=n.$ga)||void 0===r||r.event(\"m middleware \".concat(t,\" btn\"),\"Click\",\"\".concat((0,C.R7)(),\" to \").concat(t,\" error \").concat(s.code)),(0,S.HF)(E.tU.MIDDLEWARE_SETUP_AND_LOGIN,n.$t(\"v2_btn_setup_and_login\"),(null===s||void 0===s?void 0:s.code)||m.Sc),n.isLogining=!1,n.handleErrorCode(s,\"resetCaptcha\");case 5:case\"end\":return a.stop()}},a,null,[[1,4]])}))()},handleErrorCode:function(e,t){if(e.code){if((\"resetCaptcha\"===t||m.vF.includes(e.code))&&(this.setShowCaptcha({moduleName:D,show:!0}),this.resetCaptcha()),this.errorCode=e.code,\"toFail\"===t||[621,609].includes(e.code)){var n={title:this.$t(\"v2_error_code_\".concat(e.code)),callbackUrl:(0,C.hL)()};return this.updateNextData({nextData:n}),void this.$router.push({path:\"/fail\",query:this.$route.query})}this.errorMsg=this.$t(\"v2_error_code_\".concat(e.code))}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleLogin:function(){var e;if(this.resetErrorCode(),this.clickMiddlewarePasswordValid(),this.clickMiddlewareConfirmPasswordValid(),!this.validate())return this.showLoginError=!0,void(this.showCaptchaError=!0);null===(e=this.$ga)||void 0===e||e.event(\"middleware login btn\",\"Click\",\"\".concat((0,C.R7)(),\" to login\")),this.showCaptchaError=!1,this.login({password:this.password,email:this.username,uuid:this.uuid,confirmPassword:this.newPassword},\"login\")},handleGoToLogin:function(){var e;null===(e=this.$ga)||void 0===e||e.event(\"middleware page\",\"Click\",\"\".concat((0,C.R7)(),\" middleware page goto login view\")),this.$router.push({path:\"/login\",query:this.$route.query})},handleGoToCallbackUrl:function(){this.timer&&clearInterval(this.timer),this.goToCallBackUrl()},handleCaptchaValidate:function(e,t){this.captchaResult=t,this.resetErrorCode(),this.clearTicket({moduleName:D})},handleGoToRegistration:function(){this.$router.push({path:\"/register\",query:this.query})},handleGoToFacebook:function(){window.location.href=\"//www.facebook.com/settings?tab=applications\"},check:function(){var e,t,n=parseInt(this.existed,10);if(document.documentElement.scrollTop=0,this.userEmail){if(1===n)t=\"v2_title_thirdLogin_login\",this.type=\"email-not-binding\",this.username=this.userEmail;else if(0===n){var a={title:this.$t(\"v2_tips_login_success_redirecting\"),subTitle:this.$t(\"v2_common_oauth_created\").replace(\"XXXX\",this.oauthType),callbackUrl:this.callbackUrl};t=\"v2_title_thirdLogin_Authorized\",this.updateNextData({nextData:a}),this.$router.push({path:\"/success\",query:this.$route.query})}}else t=\"v2_title_thirdLogin_register\",this.type=\"no-email\";document.title=\"\".concat(this.$t(\"v2_common_system_title\"),\" | \").concat(this.$t(t)),null===(e=this.$ga)||void 0===e||e.event(\"middleware type: \".concat(this.type),\"init\",\"\".concat((0,C.R7)(),\" middleware page getOauthUserInfo\"))},validate:function(){var e=!1;return this.isUsernameValid&&!this.usernameError&&this.isPasswordValid&&!this.passwordError&&this.isCaptchaValid&&(e=!0),e},countDown:function(){var e=this;this.timer=window.setInterval(function(){e.count>0?e.count--:(window.clearInterval(e.timer),e.goToCallBackUrl())},1e3)},goToCallBackUrl:function(){window.location.href=this.callbackUrl},isSupportPhone:function(){var e;return(null===(e=this.initData)||void 0===e?void 0:e.appConfig)&&\"on\"===this.initData.appConfig[\"\".concat((0,C.R7)(),\".phone.\").concat(this.lang,\".switch\")]},resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs.captcha)||void 0===e||e.reset(),this.clearTicket({moduleName:D})},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},blurMiddlewarePasswordValid:function(){this.middlewarePasswordValidateType=\"blur\"},blurMiddlewareConfirmPasswordValid:function(){this.middlewareConfirmPasswordValidType=\"blur\"},clickMiddlewarePasswordValid:function(){this.middlewarePasswordValidateType=\"click\"},clickMiddlewareConfirmPasswordValid:function(){this.middlewareConfirmPasswordValidType=\"click\"}}),watch:{password:\"resetErrorCode\"},components:{CardContainer:u.A,acInput:g.A,acAlert:y.A,acCaptcha:A.A,acLink:T.A,acButton:b.A,MiddlewareSkeleton:M}},$=R,x=(0,I.A)($,a,i,!1,null,null,null),V=x.exports},92701:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"modify-email\"},[n(\"ac-warning\",{attrs:{mainTitle:e.$t(\"v2_title_weapp_modify_email_dialog_title\"),descriptons:e.$t(\"v2_title_weapp_modify_email_dialog_center\"),confirmText:e.$t(\"v2_btn_next\"),btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_CONFIRM_EMAIL_CHANGE}},[\"VERIFY_EMAIL\"===e.activeName?n(\"verify-account\",{ref:\"VerifyAccount\",attrs:{type:\"email\",mainTitle:e.$t(\"v2_title_verify_binding_email\"),serviceTips:e.$t(\"v2_email_unable_valid\"),showFAQ:!1,showServiceLinks:\"\",isLogin:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_EMAIL_SUBMIT_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_EMAIL_SEND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode}}):e._e(),\"MODIFY_EMAIL\"===e.activeName?n(\"bind-account\",{ref:\"BindAccount\",attrs:{type:\"email\",mainTitle:e.$t(\"v2_title_binding_new_email\"),descriptons:e.$t(\"v2_tips_binding_new_email_text\"),serviceTips:e.$t(\"v2_tips_need_help\").replace(\"{0}\",\"\"),showFAQ:!1,showServiceLinks:\"\",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.email,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_EMAIL_SUBMIT_BIND_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_EMAIL_SEND_BIND_EMAIL},on:{\"update:code\":function(t){e.code=t},\"update:maskInfo\":function(t){e.email=t},\"update:mask-info\":function(t){e.email=t},\"update:captchaResult\":function(t){e.captchaResult=t},\"update:captcha-result\":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode}}):e._e()],1)],1)},i=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),d=n(26066),l=n(7223),u=n(8217),h=n(46918),_=n(78012),p=n(24450),m=n(88333),v=n(31272),f=n(51501),C=n(40759),E=n(72409),w=n(11579),S=n(74949),g=n(37151),y=n(3372);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b={name:\"modify-email\",mixins:[],data:function(){return{isMobile:h.Fr,moduleName:_.Sn.SEND_VALIDATE_EMAIL,emailType:p.O.EMAIL_VALIDATE,activeName:\"VERIFY_EMAIL\",inited:!1,maskInfo:\"\",code:\"\",captchaResult:null,ticket:null,email:\"\",sendEmailBtnText:\"\",bindEmailBtnText:\"\",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:C.tU}},computed:T({},(0,S.L8)({initData:g.A.common.getter.initData})),methods:T(T(T({},(0,S.PY)({updateNextData:g.A.common.mutation.updateNextData,setShowCaptcha:g.A.captcha.mutation.setShow})),(0,S.i0)({getParamWithTicket:g.A.captcha.action.getParamWithTicket})),{},{next:function(){document.documentElement.scrollTop=0,window.clearInterval(this.interval),this.count=0,this.interval=null,this.code=\"\",this.moduleName=_.Sn.WEB_BIND_EMAIL,this.emailType=p.O.WEB_BIND_EMAIL,this.captchaResult=null,this.resetErrorCode(),this.activeName=\"MODIFY_EMAIL\"},handleToVerify:function(){this.activeName=\"VERIFY_EMAIL\"},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var a,i,o,r,s,d,l;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={email:t.maskInfo,emailType:t.emailType},t.resetErrorCode(),null===(a=t.$ga)||void 0===a||a.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to email\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,E.XP)(E.j9.STEP_1,{path:w.Lq.EMAIL_VALIDATION_SEND,scene:w.Nd.BINDING_EMAIL_EMAIL,operationalType:E.xe.SEND_EMAIL}),n.next=2,m[\"default\"].webBinding.sendValidateEmail(r);case 2:s=n.sent,(0,E.XP)(E.j9.STEP_4,{path:w.Lq.EMAIL_VALIDATION_SEND,scene:w.Nd.BINDING_EMAIL_EMAIL,operationalType:E.xe.SEND_EMAIL}),t.startTiming(),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SEND_EMAIL,t.sendEmailBtnText||t.$t(\"v2_btn_sendBtn\")),null===(i=t.$ga)||void 0===i||i.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to email success\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,l=n[\"catch\"](0),null===(d=t.$ga)||void 0===d||d.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to email error \").concat(l.code)),t.errorCodeHandle(l),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SEND_EMAIL,t.sendEmailBtnText||t.$t(\"v2_btn_sendBtn\"),(null===l||void 0===l?void 0:l.code)||f.Sc),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(l));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var a,i,o,r,s,d,l;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={email:t.email,emailType:t.emailType},t.resetErrorCode(),null===(a=t.$ga)||void 0===a||a.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to new email\")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,n.next=2,m[\"default\"].common.sendEmail(r);case 2:s=n.sent,t.startTiming(),null===(i=t.$ga)||void 0===i||i.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to new email success\")),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SEND_BIND_EMAIL,t.bindEmailBtnText||t.$t(\"v2_btn_sendBtn\")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,l=n[\"catch\"](0),null===(d=t.$ga)||void 0===d||d.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" send code to new email error \").concat(l.code)),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SEND_BIND_EMAIL,t.bindEmailBtnText||t.$t(\"v2_btn_sendBtn\"),(null===l||void 0===l?void 0:l.code)||f.Sc),t.errorCodeHandle(l,\"resetCaptcha\"),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(l));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e[\"finally\"]&&(null===e||void 0===e||e[\"finally\"]()),n.finish(4);case 5:case\"end\":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r,s;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code to email\")),(0,E.XP)(E.j9.STEP_6,{path:w.Lq.EMAIL_VALIDATION,scene:w.Nd.BINDING_EMAIL_EMAIL,operationalType:E.xe.SEND_EMAIL}),t.next=1,m[\"default\"].webBinding.validateEmail({emailCode:e.code});case 1:o=t.sent,(0,E.kL)(),e.ticket=null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.emailValidateTicket,null===(i=e.$ga)||void 0===i||i.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code to email success\")),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SUBMIT_EMAIL,e.$t(\"v2_btn_next\")),e.next(),t.next=3;break;case 2:t.prev=2,s=t[\"catch\"](0),null===(r=e.$ga)||void 0===r||r.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code to email error \").concat(s.code)),e.errorCodeHandle(s),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SUBMIT_EMAIL,e.$t(\"v2_btn_next\"),(null===s||void 0===s?void 0:s.code)||f.Sc);case 3:return t.prev=3,e.isLoading=!1,t.finish(3);case 4:case\"end\":return t.stop()}},t,null,[[0,2,3,4]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,i={email:e.email,emailCode:e.code,emailValidateTicket:e.ticket},e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code and bind email\")),t.next=1,m[\"default\"].webBinding.rebindingEmail(i);case 1:null===(a=e.$ga)||void 0===a||a.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code and bind email success\")),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SUBMIT_BIND_EMAIL,e.$t(\"v2_weapp_binding_phone_submit\")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t[\"catch\"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event(\"modifyEmail btn\",\"Click\",\"\".concat((0,v.R7)(),\" check code and bind email error \").concat(r.code)),(0,y.HF)(C.tU.ACCOUNT_MODIFY_EMAIL_SUBMIT_BIND_EMAIL,e.$t(\"v2_weapp_binding_phone_submit\"),(null===r||void 0===r?void 0:r.code)||f.Sc),e.errorCodeHandle(r,\"resetCaptcha\");case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t(\"v2_tips_change_email_done\"),subTitle:this.$t(\"v2_weapp_modify_bingding_email_success_text\"),redirectBtnText:this.$t(\"v2_btn_done\"),redirectPath:\"/login\"};this.updateNextData({nextData:e}),this.$router.push({path:\"/account/success\",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,a,i;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,m[\"default\"].common.getBindingInfo();case 1:n=t.sent,e.maskInfo=n.data.maskEmail,e.inited=!0,t.next=3;break;case 2:t.prev=2,i=t[\"catch\"](0),a=i.code?e.$t(\"v2_error_code_\".concat(i.code)):e.$t(\"v2_tips_off_line\"),e.failNavigateHandle(a);case 3:case\"end\":return t.stop()}},t,null,[[0,2]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode=\"\",this.errorMsg=\"\"},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,v.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:\"/fail\",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;(\"resetCaptcha\"===t||f.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t(\"v2_error_code_\".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t(\"v2_tips_off_line\")},handleSendEmailBtnTextChange:function(e){this.sendEmailBtnText=e},handleBindEmailBtnTextChange:function(e){this.bindEmailBtnText=e}}),watch:{initData:{handler:\"fetchUserInfo\",immediate:!0}},components:{acWarning:u.A,VerifyAccount:d.A,BindAccount:l.A},beforeRouteEnter:function(e,t,n){n(function(e){document.title=\"\".concat(e.$t(\"v2_common_system_title\"),\" | \").concat(e.$t(\"v2_tips_change_bind_email\"))})}},N=b,O=n(7358),I=(0,O.A)(N,a,i,!1,null,null,null),P=I.exports},93235:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"default-skeleton\"),e.errorMsg?n(\"div\",{staticClass:\"page-logout\"},[e._v(\" \"+e._s(e.errorMsg)+\" \")]):e._e()],1)},i=[],o=n(88333),r=n(31093),s={name:\"PageLogOut\",data:function(){return{errorMsg:\"\",errorCode:\"\"}},components:{DefaultSkeleton:r.A},methods:{logout:function(){var e=this;o[\"default\"].common.logout().then(function(e){e.data&&e.data.callbackUrl&&(window.location.href=e.data.callbackUrl)})[\"catch\"](function(t){e.errorMsg=e.$t(\"v2_error_code_\".concat(t.code)),e.errorCode=t.code})}},mounted:function(){this.logout()}},c=s,d=n(7358),l=(0,d.A)(c,a,i,!1,null,null,null),u=l.exports}}]); //# sourceMappingURL=chunk-common-9f2de334.9892006f.js.map"
}