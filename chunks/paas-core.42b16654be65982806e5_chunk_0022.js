{
  "metadata": {
    "source_file": "paas-core.42b16654be65982806e5.js",
    "chunk_index": 22,
    "total_chunks": 1100,
    "chunk_size": 62334,
    "word_count": 800,
    "model_kwargs": {
      "model": "text-embedding-3-large",
      "dimensions": 3072,
      "encoding_format": "float"
    },
    "text_splitter": {
      "split_by": "word",
      "chunk_size": 800,
      "chunk_overlap": 200
    },
    "created_at": "2025-12-17T23:57:52.006Z"
  },
  "content": "1 to 63 characters, inclusive.\"});if(!t.test(e))throw n.util.error(Error(),{code:\"ValidationError\",message:e+\" is not hostname compatible.\"})})}(e.httpRequest.endpoint.hostname)}return e}}},3846:function(e,r,t){var a=t(5643),n=t(8472),o=t(6543),i=t(204).populateHostPrefix;e.exports={buildRequest:function(e){var r=e.httpRequest,t=e.service.api,a=t.targetPrefix+\".\"+t.operations[e.operation].name,o=t.jsonVersion||\"1.0\",s=t.operations[e.operation].input,l=new n;1===o&&(o=\"1.0\"),t.awsQueryCompatible&&(!r.params&&(r.params={}),Object.assign(r.params,e.params)),r.body=l.build(e.params||{},s),r.headers[\"Content-Type\"]=\"application/x-amz-json-\"+o,r.headers[\"X-Amz-Target\"]=a,i(e)},extractError:function(e){var r={},t=e.httpResponse;if(r.code=t.headers[\"x-amzn-errortype\"]||\"UnknownError\",\"string\"==typeof r.code&&(r.code=r.code.split(\":\")[0]),t.body.length>0)try{var n=JSON.parse(t.body.toString()),o=n.__type||n.code||n.Code;for(var i in o&&(r.code=o.split(\"#\").pop()),\"RequestEntityTooLarge\"===r.code?r.message=\"Request body must be less than 1 MB\":r.message=n.message||n.Message||null,n||{}){if(\"code\"!==i&&\"message\"!==i)r[\"[\"+i+\"]\"]=\"See error.\"+i+\" for details.\",Object.defineProperty(r,i,{value:n[i],enumerable:!1,writable:!0})}}catch(e){r.statusCode=t.statusCode,r.message=t.statusMessage}else r.statusCode=t.statusCode,r.message=t.statusCode.toString();e.error=a.error(Error(),r)},extractData:function(e){var r=e.httpResponse.body.toString()||\"{}\";if(!1===e.request.service.config.convertResponseTypes)e.data=JSON.parse(r);else{var t=e.request.service.api.operations[e.request.operation].output||{},a=new o;e.data=a.parse(r,t)}}}},7163:function(e,r,t){var a=t(9940),n=t(5643),o=t(6272),i=t(782),s=t(204).populateHostPrefix;e.exports={buildRequest:function(e){var r=e.service.api.operations[e.operation],t=e.httpRequest;t.headers[\"Content-Type\"]=\"application/x-www-form-urlencoded; charset=utf-8\",t.params={Version:e.service.api.apiVersion,Action:r.name},new o().serialize(e.params,r.input,function(e,r){t.params[e]=r}),t.body=n.queryParamsToString(t.params),s(e)},extractError:function(e){var r,t=e.httpResponse.body.toString();if(t.match(\"<UnknownOperationException\"))r={Code:\"UnknownOperation\",Message:\"Unknown operation \"+e.request.operation};else try{r=new a.XML.Parser().parse(t)}catch(t){r={Code:e.httpResponse.statusCode,Message:e.httpResponse.statusMessage}}r.requestId&&!e.requestId&&(e.requestId=r.requestId),r.Errors&&(r=r.Errors),r.Error&&(r=r.Error),r.Code?e.error=n.error(Error(),{code:r.Code,message:r.Message}):e.error=n.error(Error(),{code:e.httpResponse.statusCode,message:null})},extractData:function(e){var r=e.request,t=r.service.api.operations[r.operation].output||{},o=t;if(o.resultWrapper){var s=i.create({type:\"structure\"});s.members[o.resultWrapper]=t,s.memberNames=[o.resultWrapper],n.property(t,\"name\",t.resultWrapper),t=s}var l=new a.XML.Parser;if(t&&t.members&&!t.members._XAMZRequestId){var d=i.create({type:\"string\"},{api:{protocol:\"query\"}},\"requestId\");t.members._XAMZRequestId=d}var c=l.parse(e.httpResponse.body.toString(),t);e.requestId=c._XAMZRequestId||c.requestId,c._XAMZRequestId&&delete c._XAMZRequestId,o.resultWrapper&&c[o.resultWrapper]&&(n.update(c,c[o.resultWrapper]),delete c[o.resultWrapper]),e.data=c}}},2972:function(e,r,t){var a=t(5643),n=t(204).populateHostPrefix;function o(e,r,t,n){var o=[e,r].join(\"/\");o=o.replace(/\\/+/g,\"/\");var i={},s=!1;if(a.each(t.members,function(e,r){var t=n[e];if(null!=t){if(\"uri\"===r.location){var l=RegExp(\"\\\\{\"+r.name+\"(\\\\+)?\\\\}\");o=o.replace(l,function(e,r){return(r?a.uriEscapePath:a.uriEscape)(String(t))})}else\"querystring\"===r.location&&(s=!0,\"list\"===r.type?i[r.name]=t.map(function(e){return a.uriEscape(r.member.toWireFormat(e).toString())}):\"map\"===r.type?a.each(t,function(e,r){Array.isArray(r)?i[e]=r.map(function(e){return a.uriEscape(String(e))}):i[e]=a.uriEscape(String(r))}):i[r.name]=a.uriEscape(r.toWireFormat(t).toString()))}}),s){o+=o.indexOf(\"?\")>=0?\"&\":\"?\";var l=[];a.arrayEach(Object.keys(i).sort(),function(e){!Array.isArray(i[e])&&(i[e]=[i[e]]);for(var r=0;r<i[e].length;r++)l.push(a.uriEscape(String(e))+\"=\"+i[e][r])}),o+=l.join(\"&\")}return o}e.exports={buildRequest:function(e){var r,t,i,s,l,d,c;(r=e).httpRequest.method=r.service.api.operations[r.operation].httpMethod,s=(i=(t=e).service.api.operations[t.operation]).input,l=o(t.httpRequest.endpoint.path,i.httpPath,s,t.params),t.httpRequest.path=l,c=(d=e).service.api.operations[d.operation],a.each(c.input.members,function(e,r){var t=d.params[e];null!=t&&(\"headers\"===r.location&&\"map\"===r.type?a.each(t,function(e,t){d.httpRequest.headers[r.name+e]=t}):\"header\"===r.location&&(t=r.toWireFormat(t).toString(),r.isJsonValue&&(t=a.base64.encode(t)),d.httpRequest.headers[r.name]=t))}),n(e)},extractError:function(){},extractData:function(e){var r=e.request,t={},n=e.httpResponse,o=r.service.api.operations[r.operation].output,i={};a.each(n.headers,function(e,r){i[e.toLowerCase()]=r}),a.each(o.members,function(e,r){var o=(r.name||e).toLowerCase();if(\"headers\"===r.location&&\"map\"===r.type){t[e]={};var s=RegExp(\"^\"+(r.isLocationName?r.name:\"\")+\"(.+)\",\"i\");a.each(n.headers,function(r,a){var n=r.match(s);null!==n&&(t[e][n[1]]=a)})}else if(\"header\"===r.location){if(void 0!==i[o]){var l=r.isJsonValue?a.base64.decode(i[o]):i[o];t[e]=r.toType(l)}}else\"statusCode\"===r.location&&(t[e]=parseInt(n.statusCode,10))}),e.data=t},generateURI:o}},2491:function(e,r,t){var a=t(9940),n=t(5643),o=t(2972),i=t(3846),s=t(8472),l=t(6543),d=[\"GET\",\"HEAD\",\"DELETE\"];function c(e,r){!e.httpRequest.headers[\"Content-Type\"]&&(e.httpRequest.headers[\"Content-Type\"]=r?\"binary/octet-stream\":\"application/json\")}e.exports={buildRequest:function(e){o.buildRequest(e),0>d.indexOf(e.httpRequest.method)&&!function(e){var r=new s,t=e.service.api.operations[e.operation].input;if(t.payload){var a={},n=t.members[t.payload];a=e.params[t.payload],\"structure\"===n.type?(e.httpRequest.body=r.build(a||{},n),c(e)):void 0!==a&&(e.httpRequest.body=a,(\"binary\"===n.type||n.isStreaming)&&c(e,!0))}else e.httpRequest.body=r.build(e.params,t),c(e)}(e)},extractError:function(e){i.extractError(e)},extractData:function(e){o.extractData(e);var r,t=e.request,s=t.service.api.operations[t.operation],d=t.service.api.operations[t.operation].output||{};if(s.hasEventOutput,d.payload){var c=d.members[d.payload],u=e.httpResponse.body;if(c.isEventStream)r=new l,e.data[d.payload]=n.createEventStream(2===a.HttpClient.streamsApiVersion?e.httpResponse.stream:u,r,c);else if(\"structure\"===c.type||\"list\"===c.type){var r=new l;e.data[d.payload]=r.parse(u,c)}else\"binary\"===c.type||c.isStreaming?e.data[d.payload]=u:e.data[d.payload]=c.toType(u)}else{var f=e.data;i.extractData(e),e.data=n.merge(f,e.data)}},unsetContentLength:function(e){void 0===n.getRequestPayloadShape(e)&&d.indexOf(e.httpRequest.method)>=0&&delete e.httpRequest.headers[\"Content-Length\"]}}},3985:function(e,r,t){var a=t(9940),n=t(5643),o=t(2972);e.exports={buildRequest:function(e){o.buildRequest(e),0>[\"GET\",\"HEAD\"].indexOf(e.httpRequest.method)&&!function(e){var r=e.service.api.operations[e.operation].input,t=new a.XML.Builder,o=e.params,i=r.payload;if(i){var s=r.members[i];if(void 0===(o=o[i]))return;if(\"structure\"===s.type){var l=s.name;e.httpRequest.body=t.toXML(o,s,l,!0)}else e.httpRequest.body=o}else e.httpRequest.body=t.toXML(o,r,r.name||r.shape||n.string.upperFirst(e.operation)+\"Request\")}(e)},extractError:function(e){var r;o.extractError(e);try{r=new a.XML.Parser().parse(e.httpResponse.body.toString())}catch(t){r={Code:e.httpResponse.statusCode,Message:e.httpResponse.statusMessage}}r.Errors&&(r=r.Errors),r.Error&&(r=r.Error),r.Code?e.error=n.error(Error(),{code:r.Code,message:r.Message}):e.error=n.error(Error(),{code:e.httpResponse.statusCode,message:null})},extractData:function(e){o.extractData(e);var r,t=e.request,i=e.httpResponse.body,s=t.service.api.operations[t.operation],l=s.output;s.hasEventOutput;var d=l.payload;if(d){var c=l.members[d];c.isEventStream?(r=new a.XML.Parser,e.data[d]=n.createEventStream(2===a.HttpClient.streamsApiVersion?e.httpResponse.stream:e.httpResponse.body,r,c)):\"structure\"===c.type?(r=new a.XML.Parser,e.data[d]=r.parse(i.toString(),c)):\"binary\"===c.type||c.isStreaming?e.data[d]=i:e.data[d]=c.toType(i)}else if(i.length>0){var u=(r=new a.XML.Parser).parse(i.toString(),l);n.update(e.data,u)}}}},6272:function(e,r,t){var a=t(5643);function n(){}function o(e){return e.isQueryName||\"ec2\"!==e.api.protocol?e.name:e.name[0].toUpperCase()+e.name.substr(1)}function i(e,r,t,n){a.each(t.members,function(t,a){var i=r[t];if(null!=i){var l=o(a);s(l=e?e+\".\"+l:l,i,a,n)}})}n.prototype.serialize=function(e,r,t){i(\"\",e,r,t)};function s(e,r,t,n){if(null!=r){if(\"structure\"===t.type)i(e,r,t,n);else if(\"list\"===t.type)!function(e,r,t,n){var i=t.member||{};if(0===r.length){\"ec2\"!==t.api.protocol&&n.call(this,e,null);return}a.arrayEach(r,function(r,a){var l=\".\"+(a+1);if(\"ec2\"===t.api.protocol)l+=\"\";else if(t.flattened){if(i.name){var d=e.split(\".\");d.pop(),d.push(o(i)),e=d.join(\".\")}}else l=\".\"+(i.name?i.name:\"member\")+l;s(e+l,r,i,n)})}(e,r,t,n);else if(\"map\"===t.type){var l,d,c,u,f;l=e,d=r,c=t,u=n,f=1,a.each(d,function(e,r){var t=(c.flattened?\".\":\".entry.\")+f+++\".\",a=t+(c.key.name||\"key\"),n=t+(c.value.name||\"value\");s(l+a,e,c.key,u),s(l+n,r,c.value,u)})}else n(e,t.toWireFormat(r).toString())}}e.exports=n},9628:function(e){e.exports={now:function(){return\"undefined\"!=typeof performance&&\"function\"==typeof performance.now?performance.now():Date.now()}}},6587:function(e){e.exports={isFipsRegion:function(e){return\"string\"==typeof e&&(e.startsWith(\"fips-\")||e.endsWith(\"-fips\"))},isGlobalRegion:function(e){return\"string\"==typeof e&&[\"aws-global\",\"aws-us-gov-global\"].includes(e)},getRealRegion:function(e){return[\"fips-aws-global\",\"aws-fips\",\"aws-global\"].includes(e)?\"us-east-1\":[\"fips-aws-us-gov-global\",\"aws-us-gov-global\"].includes(e)?\"us-gov-west-1\":e.replace(/fips-(dkr-|prod-)?|-fips/,\"\")}}},9077:function(e,r,t){var a=t(5643),n=t(3973);e.exports={configureEndpoint:function(e){for(var r,t,o,i,s=(o=function(e){if(!e)return null;var r=e.split(\"-\");return r.length<3?null:r.slice(0,r.length-2).join(\"-\")+\"-*\"}(t=(r=e).config.region),[[t,i=r.api.endpointPrefix],[o,i],[t,\"*\"],[o,\"*\"],[\"*\",i],[t,\"internal-*\"],[\"*\",\"*\"]].map(function(e){return e[0]&&e[1]?e.join(\"/\"):null})),l=e.config.useFipsEndpoint,d=e.config.useDualstackEndpoint,c=0;c<s.length;c++){var u=s[c];if(u){var f=l?d?n.dualstackFipsRules:n.fipsRules:d?n.dualstackRules:n.rules;if(Object.prototype.hasOwnProperty.call(f,u)){var g=f[u];\"string\"==typeof g&&(g=n.patterns[g]),e.isGlobalEndpoint=!!g.globalEndpoint,g.signingRegion&&(e.signingRegion=g.signingRegion),!g.signatureVersion&&(g.signatureVersion=\"v4\");var A=\"bearer\"===(e.api&&e.api.signatureVersion);!function(e,r){a.each(r,function(r,t){\"globalEndpoint\"!==r&&(void 0===e.config[r]||null===e.config[r])&&(e.config[r]=t)})}(e,Object.assign({},g,{signatureVersion:A?\"bearer\":g.signatureVersion}));return}}}},getEndpointSuffix:function(e){for(var r={\"^(us|eu|ap|sa|ca|me)\\\\-\\\\w+\\\\-\\\\d+$\":\"amazonaws.com\",\"^cn\\\\-\\\\w+\\\\-\\\\d+$\":\"amazonaws.com.cn\",\"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$\":\"amazonaws.com\",\"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$\":\"c2s.ic.gov\",\"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$\":\"sc2s.sgov.gov\"},t=Object.keys(r),a=0;a<t.length;a++){var n=RegExp(t[a]),o=r[t[a]];if(n.test(e))return o}return\"amazonaws.com\"}}},8736:function(e,r,t){var a=t(9940),n=t(5253),o=a.util.inherit,i=a.util.domain,s=t(5878),l={success:1,error:1,complete:1},d=new n;d.setupStates=function(){var e=function(e,r){var t=this;t._haltHandlersOnError=!1,t.emit(t._asm.currentState,function(e){if(e){var a;if(a=t,Object.prototype.hasOwnProperty.call(l,a._asm.currentState)){if(i&&t.domain instanceof i.Domain)e.domainEmitter=t,e.domain=t.domain,e.domainThrown=!1,t.domain.emit(\"error\",e);else throw e}else t.response.error=e,r(e)}else r(t.response.error)})};this.addState(\"validate\",\"build\",\"error\",e),this.addState(\"build\",\"afterBuild\",\"restart\",e),this.addState(\"afterBuild\",\"sign\",\"restart\",e),this.addState(\"sign\",\"send\",\"retry\",e),this.addState(\"retry\",\"afterRetry\",\"afterRetry\",e),this.addState(\"afterRetry\",\"sign\",\"error\",e),this.addState(\"send\",\"validateResponse\",\"retry\",e),this.addState(\"validateResponse\",\"extractData\",\"extractError\",e),this.addState(\"extractError\",\"extractData\",\"retry\",e),this.addState(\"extractData\",\"success\",\"retry\",e),this.addState(\"restart\",\"build\",\"error\",e),this.addState(\"success\",\"complete\",\"complete\",e),this.addState(\"error\",\"complete\",\"complete\",e),this.addState(\"complete\",null,null,e)},d.setupStates(),a.Request=o({constructor:function(e,r,t){var o=e.endpoint,s=e.config.region,l=e.config.customUserAgent;e.signingRegion?s=e.signingRegion:e.isGlobalEndpoint&&(s=\"us-east-1\"),this.domain=i&&i.active,this.service=e,this.operation=r,this.params=t||{},this.httpRequest=new a.HttpRequest(o,s),this.httpRequest.appendToUserAgent(l),this.startTime=e.getSkewCorrectedDate(),this.response=new a.Response(this),this._asm=new n(d.states,\"validate\"),this._haltHandlersOnError=!1,a.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(e){return e&&(this.httpRequest.appendToUserAgent(\"callback\"),this.on(\"complete\",function(r){e.call(r,r.error,r.data)})),this.runTo(),this.response},build:function(e){return this.runTo(\"send\",e)},runTo:function(e,r){return this._asm.runTo(e,r,this),this},abort:function(){return this.removeAllListeners(\"validateResponse\"),this.removeAllListeners(\"extractError\"),this.on(\"validateResponse\",function(e){e.error=a.util.error(Error(\"Request aborted by user\"),{code:\"RequestAbortedError\",retryable:!1})}),this.httpRequest.stream&&!this.httpRequest.stream.didCallback&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners(\"send\")),this},eachPage:function(e){e=a.util.fn.makeAsync(e,3);this.on(\"complete\",function r(t){e.call(t,t.error,t.data,function(n){!1!==n&&(t.hasNextPage()?t.nextPage().on(\"complete\",r).send():e.call(t,null,null,a.util.fn.noop))})}).send()},eachItem:function(e){var r=this;this.eachPage(function(t,n){if(t)return e(t,null);if(null===n)return e(null,null);var o=r.service.paginationConfig(r.operation).resultKey;Array.isArray(o)&&(o=o[0]);var i=s.search(n,o),l=!0;return a.util.arrayEach(i,function(r){if(!1===(l=e(null,r)))return a.util.abort}),l})},isPageable:function(){return!!this.service.paginationConfig(this.operation)},createReadStream:function(){var e=a.util.stream,r=this,t=null;return 2===a.HttpClient.streamsApiVersion?(t=new e.PassThrough,process.nextTick(function(){r.send()})):((t=new e.Stream).readable=!0,t.sent=!1,t.on(\"newListener\",function(e){!t.sent&&\"data\"===e&&(t.sent=!0,process.nextTick(function(){r.send()}))})),this.on(\"error\",function(e){t.emit(\"error\",e)}),this.on(\"httpHeaders\",function(n,o,i){if(n<300){r.removeListener(\"httpData\",a.EventListeners.Core.HTTP_DATA),r.removeListener(\"httpError\",a.EventListeners.Core.HTTP_ERROR),r.on(\"httpError\",function(e){i.error=e,i.error.retryable=!1});var s,l=!1;if(\"HEAD\"!==r.httpRequest.method&&(s=parseInt(o[\"content-length\"],10)),void 0!==s&&!isNaN(s)&&s>=0){l=!0;var d=0}var c=function(){l&&d!==s?t.emit(\"error\",a.util.error(Error(\"Stream content length mismatch. Received \"+d+\" of \"+s+\" bytes.\"),{code:\"StreamContentLengthMismatch\"})):2===a.HttpClient.streamsApiVersion?t.end():t.emit(\"end\")},u=i.httpResponse.createUnbufferedStream();if(2===a.HttpClient.streamsApiVersion){if(l){var f=new e.PassThrough;f._write=function(r){return r&&r.length&&(d+=r.length),e.PassThrough.prototype._write.apply(this,arguments)},f.on(\"end\",c),t.on(\"error\",function(e){l=!1,u.unpipe(f),f.emit(\"end\"),f.end()}),u.pipe(f).pipe(t,{end:!1})}else u.pipe(t)}else l&&u.on(\"data\",function(e){e&&e.length&&(d+=e.length)}),u.on(\"data\",function(e){t.emit(\"data\",e)}),u.on(\"end\",c);u.on(\"error\",function(e){l=!1,t.emit(\"error\",e)})}}),t},emitEvent:function(e,r,t){\"function\"==typeof r&&(t=r,r=null),!t&&(t=function(){}),!r&&(r=this.eventParameters(e,this.response)),a.SequentialExecutor.prototype.emit.call(this,e,r,function(e){e&&(this.response.error=e),t.call(this,e)})},eventParameters:function(e){switch(e){case\"restart\":case\"validate\":case\"sign\":case\"build\":case\"afterValidate\":case\"afterBuild\":return[this];case\"error\":return[this.response.error,this.response];default:return[this.response]}},presign:function(e,r){return!r&&\"function\"==typeof e&&(r=e,e=null),new a.Signers.Presign().sign(this.toGet(),e,r)},isPresigned:function(){return Object.prototype.hasOwnProperty.call(this.httpRequest.headers,\"presigned-expires\")},toUnauthenticated:function(){return this._unAuthenticated=!0,this.removeListener(\"validate\",a.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener(\"sign\",a.EventListeners.Core.SIGN),this},toGet:function(){return(\"query\"===this.service.api.protocol||\"ec2\"===this.service.api.protocol)&&(this.removeListener(\"build\",this.buildAsGet),this.addListener(\"build\",this.buildAsGet)),this},buildAsGet:function(e){e.httpRequest.method=\"GET\",e.httpRequest.path=e.service.endpoint.path+\"?\"+e.httpRequest.body,e.httpRequest.body=\"\",delete e.httpRequest.headers[\"Content-Length\"],delete e.httpRequest.headers[\"Content-Type\"]},haltHandlersOnError:function(){this._haltHandlersOnError=!0}}),a.Request.addPromisesToClass=function(e){this.prototype.promise=function(){var r=this;return this.httpRequest.appendToUserAgent(\"promise\"),new e(function(e,t){r.on(\"complete\",function(r){r.error?t(r.error):e(Object.defineProperty(r.data||{},\"$response\",{value:r}))}),r.runTo()})}},a.Request.deletePromisesFromClass=function(){delete this.prototype.promise},a.util.addPromises(a.Request),a.util.mixin(a.Request,a.SequentialExecutor)},7421:function(e,r,t){var a=t(9940),n=a.util.inherit,o=t(5878);function i(e){var r=e.request._waiter,t=r.config.acceptors,a=!1,n=\"retry\";t.forEach(function(t){if(!a){var o=r.matchers[t.matcher];o&&o(e,t.expected,t.argument)&&(a=!0,n=t.state)}}),!a&&e.error&&(n=\"failure\"),\"success\"===n?r.setSuccess(e):r.setError(e,\"retry\"===n)}a.ResourceWaiter=n({constructor:function(e,r){this.service=e,this.state=r,this.loadWaiterConfig(this.state)},service:null,state:null,config:null,matchers:{path:function(e,r,t){try{var a=o.search(e.data,t)}catch(e){return!1}return o.strictDeepEqual(a,r)},pathAll:function(e,r,t){try{var a=o.search(e.data,t)}catch(e){return!1}!Array.isArray(a)&&(a=[a]);var n=a.length;if(!n)return!1;for(var i=0;i<n;i++)if(!o.strictDeepEqual(a[i],r))return!1;return!0},pathAny:function(e,r,t){try{var a=o.search(e.data,t)}catch(e){return!1}!Array.isArray(a)&&(a=[a]);for(var n=a.length,i=0;i<n;i++)if(o.strictDeepEqual(a[i],r))return!0;return!1},status:function(e,r){var t=e.httpResponse.statusCode;return\"number\"==typeof t&&t===r},error:function(e,r){return\"string\"==typeof r&&e.error?r===e.error.code:!!e.error===r}},listeners:new a.SequentialExecutor().addNamedListeners(function(e){e(\"RETRY_CHECK\",\"retry\",function(e){var r=e.request._waiter;e.error&&\"ResourceNotReady\"===e.error.code&&(e.error.retryDelay=1e3*(r.config.delay||0))}),e(\"CHECK_OUTPUT\",\"extractData\",i),e(\"CHECK_ERROR\",\"extractError\",i)}),wait:function(e,r){\"function\"==typeof e&&(r=e,e=void 0),e&&e.$waiter&&(\"number\"==typeof(e=a.util.copy(e)).$waiter.delay&&(this.config.delay=e.$waiter.delay),\"number\"==typeof e.$waiter.maxAttempts&&(this.config.maxAttempts=e.$waiter.maxAttempts),delete e.$waiter);var t=this.service.makeRequest(this.config.operation,e);return t._waiter=this,t.response.maxRetries=this.config.maxAttempts,t.addListeners(this.listeners),r&&t.send(r),t},setSuccess:function(e){e.error=null,e.data=e.data||{},e.request.removeAllListeners(\"extractData\")},setError:function(e,r){e.data=null,e.error=a.util.error(e.error||Error(),{code:\"ResourceNotReady\",message:\"Resource is not in the state \"+this.state,retryable:r})},loadWaiterConfig:function(e){if(!this.service.api.waiters[e])throw new a.util.error(Error(),{code:\"StateNotFoundError\",message:\"State \"+e+\" not found.\"});this.config=a.util.copy(this.service.api.waiters[e])}})},8158:function(e,r,t){var a=t(9940),n=a.util.inherit,o=t(5878);a.Response=n({constructor:function(e){this.request=e,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new a.HttpResponse,e&&(this.maxRetries=e.service.numRetries(),this.maxRedirects=e.service.config.maxRedirects)},nextPage:function(e){var r,t=this.request.service,n=this.request.operation;try{r=t.paginationConfig(n,!0)}catch(e){this.error=e}if(!this.hasNextPage()){if(e)e(this.error,null);else if(this.error)throw this.error;return null}var o=a.util.copy(this.request.params);if(!this.nextPageTokens)return e?e(null,null):null;var i=r.inputToken;\"string\"==typeof i&&(i=[i]);for(var s=0;s<i.length;s++)o[i[s]]=this.nextPageTokens[s];return t.makeRequest(this.request.operation,o,e)},hasNextPage:function(){if(this.cacheNextPageTokens(),this.nextPageTokens)return!0;if(void 0!==this.nextPageTokens)return!1},cacheNextPageTokens:function(){if(Object.prototype.hasOwnProperty.call(this,\"nextPageTokens\"))return this.nextPageTokens;this.nextPageTokens=void 0;var e=this.request.service.paginationConfig(this.request.operation);if(!e)return this.nextPageTokens;if(this.nextPageTokens=null,e.moreResults&&!o.search(this.data,e.moreResults))return this.nextPageTokens;var r=e.outputToken;return\"string\"==typeof r&&(r=[r]),a.util.arrayEach.call(this,r,function(e){var r=o.search(this.data,e);r&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(r))}),this.nextPageTokens}})},1588:function(e,r,t){var a=t(9940),n=a.util.string.byteLength,o=a.util.Buffer;a.S3.ManagedUpload=a.util.inherit({constructor:function(e){var r=this;a.SequentialExecutor.call(r),r.body=null,r.sliceFn=null,r.callback=null,r.parts={},r.completeInfo=[],r.fillQueue=function(){r.callback(Error(\"Unsupported body payload \"+typeof r.body))},r.configure(e)},configure:function(e){if(e=e||{},this.partSize=this.minPartSize,e.queueSize&&(this.queueSize=e.queueSize),e.partSize&&(this.partSize=e.partSize),e.leavePartsOnError&&(this.leavePartsOnError=!0),e.tags){if(!Array.isArray(e.tags))throw Error(\"Tags must be specified as an array; \"+typeof e.tags+\" provided.\");this.tags=e.tags}if(this.partSize<this.minPartSize)throw Error(\"partSize must be greater than \"+this.minPartSize);this.service=e.service,this.bindServiceObject(e.params),this.validateBody(),this.adjustTotalBytes()},leavePartsOnError:!1,queueSize:4,partSize:null,minPartSize:5242880,maxTotalParts:1e4,send:function(e){var r=this;r.failed=!1,r.callback=e||function(e){if(e)throw e};var t=!0;if(r.sliceFn)r.fillQueue=r.fillBuffer;else if(a.util.isNode()){var n=a.util.stream.Stream;r.body instanceof n&&(t=!1,r.fillQueue=r.fillStream,r.partBuffers=[],r.body.on(\"error\",function(e){r.cleanup(e)}).on(\"readable\",function(){r.fillQueue()}).on(\"end\",function(){r.isDoneChunking=!0,r.numParts=r.totalPartNumbers,r.fillQueue.call(r),r.isDoneChunking&&r.totalPartNumbers>=1&&r.doneParts===r.numParts&&r.finishMultiPart()}))}t&&r.fillQueue.call(r)},abort:function(){!0===this.isDoneChunking&&1===this.totalPartNumbers&&this.singlePart?this.singlePart.abort():this.cleanup(a.util.error(Error(\"Request aborted by user\"),{code:\"RequestAbortedError\",retryable:!1}))},validateBody:function(){if(this.body=this.service.config.params.Body,\"string\"==typeof this.body)this.body=a.util.buffer.toBuffer(this.body);else if(!this.body)throw Error(\"params.Body is required\");this.sliceFn=a.util.arraySliceFn(this.body)},bindServiceObject:function(e){e=e||{};if(this.service){var r=this.service,t=a.util.copy(r.config);t.signatureVersion=r.getSignatureVersion(),this.service=new r.constructor.__super__(t),this.service.config.params=a.util.merge(this.service.config.params||{},e),Object.defineProperty(this.service,\"_originalConfig\",{get:function(){return r._originalConfig},enumerable:!1,configurable:!0})}else this.service=new a.S3({params:e})},adjustTotalBytes:function(){try{this.totalBytes=n(this.body)}catch(e){}if(this.totalBytes){var e=Math.ceil(this.totalBytes/this.maxTotalParts);e>this.partSize&&(this.partSize=e)}else this.totalBytes=void 0},isDoneChunking:!1,partPos:0,totalChunkedBytes:0,totalUploadedBytes:0,totalBytes:void 0,numParts:0,totalPartNumbers:0,activeParts:0,doneParts:0,parts:null,completeInfo:null,failed:!1,multipartReq:null,partBuffers:null,partBufferLength:0,fillBuffer:function(){var e=n(this.body);if(0===e){this.isDoneChunking=!0,this.numParts=1,this.nextChunk(this.body);return}for(;this.activeParts<this.queueSize&&this.partPos<e;){var r=Math.min(this.partPos+this.partSize,e),t=this.sliceFn.call(this.body,this.partPos,r);this.partPos+=this.partSize,(n(t)<this.partSize||this.partPos===e)&&(this.isDoneChunking=!0,this.numParts=this.totalPartNumbers+1),this.nextChunk(t)}},fillStream:function(){if(!(this.activeParts>=this.queueSize)){var e=this.body.read(this.partSize-this.partBufferLength)||this.body.read();if(e&&(this.partBuffers.push(e),this.partBufferLength+=e.length,this.totalChunkedBytes+=e.length),this.partBufferLength>=this.partSize){var r=1===this.partBuffers.length?this.partBuffers[0]:o.concat(this.partBuffers);if(this.partBuffers=[],this.partBufferLength=0,r.length>this.partSize){var t=r.slice(this.partSize);this.partBuffers.push(t),this.partBufferLength+=t.length,r=r.slice(0,this.partSize)}this.nextChunk(r)}this.isDoneChunking&&!this.isDoneSending&&(r=1===this.partBuffers.length?this.partBuffers[0]:o.concat(this.partBuffers),this.partBuffers=[],this.partBufferLength=0,this.totalBytes=this.totalChunkedBytes,this.isDoneSending=!0,(0===this.numParts||r.length>0)&&(this.numParts++,this.nextChunk(r))),this.body.read(0)}},nextChunk:function(e){var r=this;if(r.failed)return null;var t=++r.totalPartNumbers;if(r.isDoneChunking&&1===t){var n={Body:e};this.tags&&(n.Tagging=this.getTaggingHeader());var o=r.service.putObject(n);return o._managedUpload=r,o.on(\"httpUploadProgress\",r.progress).send(r.finishSinglePart),r.singlePart=o,null}if(r.service.config.params.ContentMD5){var i=a.util.error(Error(\"The Content-MD5 you specified is invalid for multi-part uploads.\"),{code:\"InvalidDigest\",retryable:!1});return r.cleanup(i),null}if(r.completeInfo[t]&&null!==r.completeInfo[t].ETag)return null;r.activeParts++,r.service.config.params.UploadId?r.uploadPart(e,t):r.multipartReq?r.queueChunks(e,t):(r.multipartReq=r.service.createMultipartUpload(),r.multipartReq.on(\"success\",function(e){r.service.config.params.UploadId=e.data.UploadId,r.multipartReq=null}),r.queueChunks(e,t),r.multipartReq.on(\"error\",function(e){r.cleanup(e)}),r.multipartReq.send())},getTaggingHeader:function(){for(var e=[],r=0;r<this.tags.length;r++)e.push(a.util.uriEscape(this.tags[r].Key)+\"=\"+a.util.uriEscape(this.tags[r].Value));return e.join(\"&\")},uploadPart:function(e,r){var t=this,n={Body:e,ContentLength:a.util.string.byteLength(e),PartNumber:r},o={ETag:null,PartNumber:r};t.completeInfo[r]=o;var i=t.service.uploadPart(n);t.parts[r]=i,i._lastUploadedBytes=0,i._managedUpload=t,i.on(\"httpUploadProgress\",t.progress),i.send(function(e,i){if(delete t.parts[n.PartNumber],t.activeParts--,!e&&(!i||!i.ETag)){var s=\"No access to ETag property on response.\";a.util.isBrowser()&&(s+=\" Check CORS configuration to expose ETag header.\"),e=a.util.error(Error(s),{code:\"ETagMissing\",retryable:!1})}return e?t.cleanup(e):t.completeInfo[r]&&null!==t.completeInfo[r].ETag?null:void(o.ETag=i.ETag,t.doneParts++,t.isDoneChunking&&t.doneParts===t.totalPartNumbers?t.finishMultiPart():t.fillQueue.call(t))})},queueChunks:function(e,r){var t=this;t.multipartReq.on(\"success\",function(){t.uploadPart(e,r)})},cleanup:function(e){!this.failed&&(\"function\"==typeof this.body.removeAllListeners&&\"function\"==typeof this.body.resume&&(this.body.removeAllListeners(\"readable\"),this.body.removeAllListeners(\"end\"),this.body.resume()),this.multipartReq&&(this.multipartReq.removeAllListeners(\"success\"),this.multipartReq.removeAllListeners(\"error\"),this.multipartReq.removeAllListeners(\"complete\"),delete this.multipartReq),this.service.config.params.UploadId&&!this.leavePartsOnError?this.service.abortMultipartUpload().send():this.leavePartsOnError&&(this.isDoneChunking=!1),a.util.each(this.parts,function(e,r){r.removeAllListeners(\"complete\"),r.abort()}),this.activeParts=0,this.partPos=0,this.numParts=0,this.totalPartNumbers=0,this.parts={},this.failed=!0,this.callback(e))},finishMultiPart:function(){var e=this,r={MultipartUpload:{Parts:e.completeInfo.slice(1)}};e.service.completeMultipartUpload(r,function(r,t){if(r)return e.cleanup(r);if(t&&\"string\"==typeof t.Location&&(t.Location=t.Location.replace(/%2F/g,\"/\")),Array.isArray(e.tags)){for(var a=0;a<e.tags.length;a++)e.tags[a].Value=String(e.tags[a].Value);e.service.putObjectTagging({Tagging:{TagSet:e.tags}},function(r,a){r?e.callback(r):e.callback(r,t)})}else e.callback(r,t)})},finishSinglePart:function(e,r){var t=this.request._managedUpload,a=this.request.httpRequest,n=a.endpoint;if(e)return t.callback(e);r.Location=[n.protocol,\"//\",n.host,a.path].join(\"\"),r.key=this.request.params.Key,r.Key=this.request.params.Key,r.Bucket=this.request.params.Bucket,t.callback(e,r)},progress:function(e){var r=this._managedUpload;\"putObject\"===this.operation?(e.part=1,e.key=this.params.Key):(r.totalUploadedBytes+=e.loaded-this._lastUploadedBytes,this._lastUploadedBytes=e.loaded,e={loaded:r.totalUploadedBytes,total:r.totalBytes,part:this.params.PartNumber,key:this.params.Key}),r.emit(\"httpUploadProgress\",[e])}}),a.util.mixin(a.S3.ManagedUpload,a.SequentialExecutor),a.S3.ManagedUpload.addPromisesToClass=function(e){this.prototype.promise=a.util.promisifyMethod(\"send\",e)},a.S3.ManagedUpload.deletePromisesFromClass=function(){delete this.prototype.promise},a.util.addPromises(a.S3.ManagedUpload),e.exports=a.S3.ManagedUpload},3825:function(e,r,t){var a=t(9940);a.SequentialExecutor=a.util.inherit({constructor:function(){this._events={}},listeners:function(e){return this._events[e]?this._events[e].slice(0):[]},on:function(e,r,t){return this._events[e]?t?this._events[e].unshift(r):this._events[e].push(r):this._events[e]=[r],this},onAsync:function(e,r,t){return r._isAsync=!0,this.on(e,r,t)},removeListener:function(e,r){var t=this._events[e];if(t){for(var a=t.length,n=-1,o=0;o<a;++o)t[o]===r&&(n=o);n>-1&&t.splice(n,1)}return this},removeAllListeners:function(e){return e?delete this._events[e]:this._events={},this},emit:function(e,r,t){!t&&(t=function(){});var a=this.listeners(e),n=a.length;return this.callListeners(a,r,t),n>0},callListeners:function(e,r,t,n){var o=this,i=n||null;function s(n){if(n&&(i=a.util.error(i||Error(),n),o._haltHandlersOnError))return t.call(o,i);o.callListeners(e,r,t,i)}for(;e.length>0;){var l=e.shift();if(l._isAsync){l.apply(o,r.concat([s]));return}try{l.apply(o,r)}catch(e){i=a.util.error(i||Error(),e)}if(i&&o._haltHandlersOnError){t.call(o,i);return}}t.call(o,i)},addListeners:function(e){var r=this;return e._events&&(e=e._events),a.util.each(e,function(e,t){\"function\"==typeof t&&(t=[t]),a.util.arrayEach(t,function(t){r.on(e,t)})}),r},addNamedListener:function(e,r,t,a){return this[e]=t,this.addListener(r,t,a),this},addNamedAsyncListener:function(e,r,t,a){return t._isAsync=!0,this.addNamedListener(e,r,t,a)},addNamedListeners:function(e){var r=this;return e(function(){r.addNamedListener.apply(r,arguments)},function(){r.addNamedAsyncListener.apply(r,arguments)}),this}}),a.SequentialExecutor.prototype.addListener=a.SequentialExecutor.prototype.on,e.exports=a.SequentialExecutor},6155:function(e,r,t){var a=t(9940),n=t(1863),o=t(9077),i=a.util.inherit,s=0,l=t(6587);a.Service=i({constructor:function(e){if(!this.loadServiceClass)throw a.util.error(Error(),\"Service must be constructed with `new' operator\");if(e){if(e.region){var r=e.region;l.isFipsRegion(r)&&(e.region=l.getRealRegion(r),e.useFipsEndpoint=!0),l.isGlobalRegion(r)&&(e.region=l.getRealRegion(r))}\"boolean\"==typeof e.useDualstack&&\"boolean\"!=typeof e.useDualstackEndpoint&&(e.useDualstackEndpoint=e.useDualstack)}var t=this.loadServiceClass(e||{});if(t){var n=a.util.copy(e),o=new t(e);return Object.defineProperty(o,\"_originalConfig\",{get:function(){return n},enumerable:!1,configurable:!0}),o._clientId=++s,o}this.initialize(e)},initialize:function(e){var r=a.config[this.serviceIdentifier];if(this.config=new a.Config(a.config),r&&this.config.update(r,!0),e&&this.config.update(e,!0),this.validateService(),!this.config.endpoint&&o.configureEndpoint(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint),a.SequentialExecutor.call(this),a.Service.addDefaultMonitoringListeners(this),(this.config.clientSideMonitoring||a.Service._clientSideMonitoring)&&this.publisher){var t=this.publisher;this.addNamedListener(\"PUBLISH_API_CALL\",\"apiCall\",function(e){process.nextTick(function(){t.eventHandler(e)})}),this.addNamedListener(\"PUBLISH_API_ATTEMPT\",\"apiCallAttempt\",function(e){process.nextTick(function(){t.eventHandler(e)})})}},validateService:function(){},loadServiceClass:function(e){var r=e;if(!a.util.isEmpty(this.api))return null;if(r.apiConfig)return a.Service.defineServiceApi(this.constructor,r.apiConfig);if(!this.constructor.services)return null;else{(r=new a.Config(a.config)).update(e,!0);var t=r.apiVersions[this.constructor.serviceIdentifier];return t=t||r.apiVersion,this.getLatestServiceClass(t)}},getLatestServiceClass:function(e){return e=this.getLatestServiceVersion(e),null===this.constructor.services[e]&&a.Service.defineServiceApi(this.constructor,e),this.constructor.services[e]},getLatestServiceVersion:function(e){if(!this.constructor.services||0===this.constructor.services.length)throw Error(\"No services defined on \"+this.constructor.serviceIdentifier);if(e?a.util.isType(e,Date)&&(e=a.util.date.iso8601(e).split(\"T\")[0]):e=\"latest\",Object.hasOwnProperty(this.constructor.services,e))return e;for(var r=Object.keys(this.constructor.services).sort(),t=null,n=r.length-1;n>=0;n--)if(\"*\"!==r[n][r[n].length-1]&&(t=r[n]),r[n].substr(0,10)<=e)return t;throw Error(\"Could not find \"+this.constructor.serviceIdentifier+\" API to satisfy version constraint `\"+e+\"'\")},api:{},defaultRetryCount:3,customizeRequests:function(e){if(e){if(\"function\"==typeof e)this.customRequestHandler=e;else throw Error(\"Invalid callback type '\"+typeof e+\"' provided in customizeRequests\")}else this.customRequestHandler=null},makeRequest:function(e,r,t){if(\"function\"==typeof r&&(t=r,r=null),r=r||{},this.config.params){var n=this.api.operations[e];n&&(r=a.util.copy(r),a.util.each(this.config.params,function(e,t){n.input.members[e]&&(void 0===r[e]||null===r[e])&&(r[e]=t)}))}var o=new a.Request(this,e,r);return this.addAllRequestListeners(o),this.attachMonitoringEmitter(o),t&&o.send(t),o},makeUnauthenticatedRequest:function(e,r,t){\"function\"==typeof r&&(t=r,r={});var a=this.makeRequest(e,r).toUnauthenticated();return t?a.send(t):a},waitFor:function(e,r,t){return new a.ResourceWaiter(this,e).wait(r,t)},addAllRequestListeners:function(e){for(var r=[a.events,a.EventListeners.Core,this.serviceInterface(),a.EventListeners.CorePost],t=0;t<r.length;t++)r[t]&&e.addListeners(r[t]);!this.config.paramValidation&&e.removeListener(\"validate\",a.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&e.addListeners(a.EventListeners.Logger),this.setupRequestListeners(e),\"function\"==typeof this.constructor.prototype.customRequestHandler&&this.constructor.prototype.customRequestHandler(e),Object.prototype.hasOwnProperty.call(this,\"customRequestHandler\")&&\"function\"==typeof this.customRequestHandler&&this.customRequestHandler(e)},apiCallEvent:function(e){var r=e.service.api.operations[e.operation],t={Type:\"ApiCall\",Api:r?r.name:e.operation,Version:1,Service:e.service.api.serviceId||e.service.api.endpointPrefix,Region:e.httpRequest.region,MaxRetriesExceeded:0,UserAgent:e.httpRequest.getUserAgent()},a=e.response;if(a.httpResponse.statusCode&&(t.FinalHttpStatusCode=a.httpResponse.statusCode),a.error){var n=a.error;a.httpResponse.statusCode>299?(n.code&&(t.FinalAwsException=n.code),n.message&&(t.FinalAwsExceptionMessage=n.message)):((n.code||n.name)&&(t.FinalSdkException=n.code||n.name),n.message&&(t.FinalSdkExceptionMessage=n.message))}return t},apiAttemptEvent:function(e){var r=e.service.api.operations[e.operation],t={Type:\"ApiCallAttempt\",Api:r?r.name:e.operation,Version:1,Service:e.service.api.serviceId||e.service.api.endpointPrefix,Fqdn:e.httpRequest.endpoint.hostname,UserAgent:e.httpRequest.getUserAgent()},a=e.response;return(a.httpResponse.statusCode&&(t.HttpStatusCode=a.httpResponse.statusCode),!e._unAuthenticated&&e.service.config.credentials&&e.service.config.credentials.accessKeyId&&(t.AccessKey=e.service.config.credentials.accessKeyId),a.httpResponse.headers)?(e.httpRequest.headers[\"x-amz-security-token\"]&&(t.SessionToken=e.httpRequest.headers[\"x-amz-security-token\"]),a.httpResponse.headers[\"x-amzn-requestid\"]&&(t.XAmznRequestId=a.httpResponse.headers[\"x-amzn-requestid\"]),a.httpResponse.headers[\"x-amz-request-id\"]&&(t.XAmzRequestId=a.httpResponse.headers[\"x-amz-request-id\"]),a.httpResponse.headers[\"x-amz-id-2\"]&&(t.XAmzId2=a.httpResponse.headers[\"x-amz-id-2\"]),t):t},attemptFailEvent:function(e){var r=this.apiAttemptEvent(e),t=e.response,a=t.error;return t.httpResponse.statusCode>299?(a.code&&(r.AwsException=a.code),a.message&&(r.AwsExceptionMessage=a.message)):((a.code||a.name)&&(r.SdkException=a.code||a.name),a.message&&(r.SdkExceptionMessage=a.message)),r},attachMonitoringEmitter:function(e){var r,t,n,o,i,s,l=0,d=this;e.on(\"validate\",function(){o=a.util.realClock.now(),s=Date.now()},!0),e.on(\"sign\",function(){t=a.util.realClock.now(),r=Date.now(),i=e.httpRequest.region,l++},!0),e.on(\"validateResponse\",function(){n=Math.round(a.util.realClock.now()-t)}),e.addNamedListener(\"API_CALL_ATTEMPT\",\"success\",function(){var t=d.apiAttemptEvent(e);t.Timestamp=r,t.AttemptLatency=n>=0?n:0,t.Region=i,d.emit(\"apiCallAttempt\",[t])}),e.addNamedListener(\"API_CALL_ATTEMPT_RETRY\",\"retry\",function(){var o=d.attemptFailEvent(e);o.Timestamp=r,n=n||Math.round(a.util.realClock.now()-t),o.AttemptLatency=n>=0?n:0,o.Region=i,d.emit(\"apiCallAttempt\",[o])}),e.addNamedListener(\"API_CALL\",\"complete\",function(){var r=d.apiCallEvent(e);if(r.AttemptCount=l,!(r.AttemptCount<=0)){r.Timestamp=s;var t=Math.round(a.util.realClock.now()-o);r.Latency=t>=0?t:0;var n=e.response;n.error&&n.error.retryable&&\"number\"==typeof n.retryCount&&\"number\"==typeof n.maxRetries&&n.retryCount>=n.maxRetries&&(r.MaxRetriesExceeded=1),d.emit(\"apiCall\",[r])}})},setupRequestListeners:function(e){},getSigningName:function(){return this.api.signingName||this.api.endpointPrefix},getSignerClass:function(e){var r,t=null,n=\"\";return e&&(n=(t=(e.service.api.operations||{})[e.operation]||null)?t.authtype:\"\"),r=this.config.signatureVersion?this.config.signatureVersion:\"v4\"===n||\"v4-unsigned-body\"===n?\"v4\":\"bearer\"===n?\"bearer\":this.api.signatureVersion,a.Signers.RequestSigner.getVersion(r)},serviceInterface:function(){switch(this.api.protocol){case\"ec2\":case\"query\":return a.EventListeners.Query;case\"json\":return a.EventListeners.Json;case\"rest-json\":return a.EventListeners.RestJson;case\"rest-xml\":return a.EventListeners.RestXml}if(this.api.protocol)throw Error(\"Invalid service `protocol' \"+this.api.protocol+\" in API config\")},successfulResponse:function(e){return e.httpResponse.statusCode<300},numRetries:function(){return void 0!==this.config.maxRetries?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(e,r){return a.util.calculateRetryDelay(e,this.config.retryDelayOptions,r)},retryableError:function(e){return!!(this.timeoutError(e)||this.networkingError(e)||this.expiredCredentialsError(e)||this.throttledError(e))||!!(e.statusCode>=500)||!1},networkingError:function(e){return\"NetworkingError\"===e.code},timeoutError:function(e){return\"TimeoutError\"===e.code},expiredCredentialsError:function(e){return\"ExpiredTokenException\"===e.code},clockSkewError:function(e){switch(e.code){case\"RequestTimeTooSkewed\":case\"RequestExpired\":case\"InvalidSignatureException\":case\"SignatureDoesNotMatch\":case\"AuthFailure\":case\"RequestInTheFuture\":return!0;default:return!1}},getSkewCorrectedDate:function(){return new Date(Date.now()+this.config.systemClockOffset)},applyClockOffset:function(e){e&&(this.config.systemClockOffset=e-Date.now())},isClockSkewed:function(e){if(e)return Math.abs(this.getSkewCorrectedDate().getTime()-e)>=3e5},throttledError:function(e){if(429===e.statusCode)return!0;switch(e.code){case\"ProvisionedThroughputExceededException\":case\"Throttling\":case\"ThrottlingException\":case\"RequestLimitExceeded\":case\"RequestThrottled\":case\"RequestThrottledException\":case\"TooManyRequestsException\":case\"TransactionInProgressException\":case\"EC2ThrottledException\":return!0;default:return!1}},endpointFromTemplate:function(e){if(\"string\"!=typeof e)return e;var r=e;return r=(r=(r=r.replace(/\\{service\\}/g,this.api.endpointPrefix)).replace(/\\{region\\}/g,this.config.region)).replace(/\\{scheme\\}/g,this.config.sslEnabled?\"https\":\"http\")},setEndpoint:function(e){this.endpoint=new a.Endpoint(e,this.config)},paginationConfig:function(e,r){var t=this.api.operations[e].paginator;if(!t){if(r){var n=Error();throw a.util.error(n,\"No pagination configuration for \"+e)}return null}return t}}),a.util.update(a.Service,{defineMethods:function(e){a.util.each(e.prototype.api.operations,function(r){!e.prototype[r]&&(\"none\"===e.prototype.api.operations[r].authtype?e.prototype[r]=function(e,t){return this.makeUnauthenticatedRequest(r,e,t)}:e.prototype[r]=function(e,t){return this.makeRequest(r,e,t)})})},defineService:function(e,r,t){a.Service._serviceMap[e]=!0,!Array.isArray(r)&&(t=r,r=[]);var n=i(a.Service,t||{});if(\"string\"==typeof e){a.Service.addVersions(n,r);var o=n.serviceIdentifier||e;n.serviceIdentifier=o}else n.prototype.api=e,a.Service.defineMethods(n);if(a.SequentialExecutor.call(this.prototype),!this.prototype.publisher&&a.util.clientSideMonitoring){var s=a.util.clientSideMonitoring.Publisher,l=(0,a.util.clientSideMonitoring.configProvider)();this.prototype.publisher=new s(l),l.enabled&&(a.Service._clientSideMonitoring=!0)}return a.SequentialExecutor.call(n.prototype),a.Service.addDefaultMonitoringListeners(n.prototype),n},addVersions:function(e,r){!Array.isArray(r)&&(r=[r]),e.services=e.services||{};for(var t=0;t<r.length;t++)void 0===e.services[r[t]]&&(e.services[r[t]]=null);e.apiVersions=Object.keys(e.services).sort()},defineServiceApi:function(e,r,t){var o=i(e,{serviceIdentifier:e.serviceIdentifier});function s(r){r.isApi?o.prototype.api=r:o.prototype.api=new n(r,{serviceIdentifier:e.serviceIdentifier})}if(\"string\"==typeof r){if(t)s(t);else try{s(a.apiLoader(e.serviceIdentifier,r))}catch(t){throw a.util.error(t,{message:\"Could not find API configuration \"+e.serviceIdentifier+\"-\"+r})}!Object.prototype.hasOwnProperty.call(e.services,r)&&(e.apiVersions=e.apiVersions.concat(r).sort()),e.services[r]=o}else s(r);return a.Service.defineMethods(o),o},hasService:function(e){return Object.prototype.hasOwnProperty.call(a.Service._serviceMap,e)},addDefaultMonitoringListeners:function(e){e.addNamedListener(\"MONITOR_EVENTS_BUBBLE\",\"apiCallAttempt\",function(r){var t=Object.getPrototypeOf(e);t._events&&t.emit(\"apiCallAttempt\",[r])}),e.addNamedListener(\"CALL_EVENTS_BUBBLE\",\"apiCall\",function(r){var t=Object.getPrototypeOf(e);t._events&&t.emit(\"apiCall\",[r])})},_serviceMap:{}}),a.util.mixin(a.Service,a.SequentialExecutor),e.exports=a.Service},880:function(e,r,t){var a=t(9940),n=t(6639),o=t(7815),i=t(100),s=t(9077);t(1588);var l={completeMultipartUpload:!0,copyObject:!0,uploadPartCopy:!0},d=[\"AuthorizationHeaderMalformed\",\"BadRequest\",\"PermanentRedirect\",301],c=\"s3-object-lambda\";a.util.update(a.S3.prototype,{getSignatureVersion:function(e){var r=this.api.signatureVersion,t=this._originalConfig?this._originalConfig.signatureVersion:null,a=this.config.signatureVersion,n=!!e&&e.isPresigned();return t?t=\"v2\"===t?\"s3\":t:(!0!==n?r=\"v4\":a&&(r=a),r)},getSigningName:function(e){if(e&&\"writeGetObjectResponse\"===e.operation)return c;var r=a.Service.prototype.getSigningName;return e&&e._parsedArn&&e._parsedArn.service?e._parsedArn.service:r.call(this)},getSignerClass:function(e){var r=this.getSignatureVersion(e);return a.Signers.RequestSigner.getVersion(r)},validateService:function(){var e,r=[];if(!this.config.region&&(this.config.region=\"us-east-1\"),!this.config.endpoint&&this.config.s3BucketEndpoint&&r.push(\"An endpoint must be provided when configuring `s3BucketEndpoint` to true.\"),1===r.length?e=r[0]:r.length>1&&(e=\"Multiple configuration errors:\\n\"+r.join(\"\\n\")),e)throw a.util.error(Error(),{name:\"InvalidEndpoint\",message:e})},shouldDisableBodySigning:function(e){var r=this.getSignerClass();return!0===this.config.s3DisableBodySigning&&r===a.Signers.V4&&\"https:\"===e.httpRequest.endpoint.protocol||!1},setupRequestListeners:function(e){e.addListener(\"validateResponse\",this.setExpiresString);if(e.addListener(\"validate\",this.validateScheme),e.addListener(\"validate\",this.validateBucketName,!0),e.addListener(\"validate\",this.optInUsEast1RegionalEndpoint,!0),e.removeListener(\"validate\",a.EventListeners.Core.VALIDATE_REGION),e.addListener(\"build\",this.addContentType),e.addListener(\"build\",this.computeContentMd5),e.addListener(\"build\",this.computeSseCustomerKeyMd5),e.addListener(\"build\",this.populateURI),e.addListener(\"afterBuild\",this.addExpect100Continue),e.addListener(\"extractError\",this.extractError),e.addListener(\"extractData\",a.util.hoistPayloadMember),e.addListener(\"extractData\",this.extractData),e.addListener(\"extractData\",this.extractErrorFrom200Response),e.addListener(\"beforePresign\",this.prepareSignedUrl),this.shouldDisableBodySigning(e)&&(e.removeListener(\"afterBuild\",a.EventListeners.Core.COMPUTE_SHA256),e.addListener(\"afterBuild\",this.disableBodySigning)),\"createBucket\"!==e.operation&&i.isArnInParam(e,\"Bucket\")){e._parsedArn=a.util.ARN.parse(e.params.Bucket),e.removeListener(\"validate\",this.validateBucketName),e.removeListener(\"build\",this.populateURI),\"s3\"===e._parsedArn.service?(e.addListener(\"validate\",i.validateS3AccessPointArn),e.addListener(\"validate\",this.validateArnResourceType),e.addListener(\"validate\",this.validateArnRegion)):\"s3-outposts\"===e._parsedArn.service&&(e.addListener(\"validate\",i.validateOutpostsAccessPointArn),e.addListener(\"validate\",i.validateOutpostsArn),e.addListener(\"validate\",i.validateArnRegion)),e.addListener(\"validate\",i.validateArnAccount),e.addListener(\"validate\",i.validateArnService),e.addListener(\"build\",this.populateUriFromAccessPointArn),e.addListener(\"build\",i.validatePopulateUriFromArn);return}e.addListener(\"validate\",this.validateBucketEndpoint),e.addListener(\"validate\",this.correctBucketRegionFromCache),e.onAsync(\"extractError\",this.requestBucketRegion),a.util.isBrowser()&&e.onAsync(\"retry\",this.reqRegionForNetworkingError)},validateScheme:function(e){var r=e.params,t=e.httpRequest.endpoint.protocol;if((r.SSECustomerKey||r.CopySourceSSECustomerKey)&&\"https:\"!==t)throw a.util.error(Error(),{code:\"ConfigError\",message:\"Cannot send SSE keys over HTTP. Set 'sslEnabled'to 'true' in your configuration\"})},validateBucketEndpoint:function(e){if(!e.params.Bucket&&e.service.config.s3BucketEndpoint)throw a.util.error(Error(),{code:\"ConfigError\",message:\"Cannot send requests to root API with `s3BucketEndpoint` set.\"})},validateArnRegion:function(e){i.validateArnRegion(e,{allowFipsEndpoint:!0})},validateArnResourceType:function(e){var r=e._parsedArn.resource;if(0!==r.indexOf(\"accesspoint:\")&&0!==r.indexOf(\"accesspoint/\"))throw a.util.error(Error(),{code:\"InvalidARN\",message:\"ARN resource should begin with 'accesspoint/'\"})},validateBucketName:function(e){var r=e.service.getSignatureVersion(e),t=e.params&&e.params.Bucket,n=e.params&&e.params.Key,o=t&&t.indexOf(\"/\");if(t&&o>=0){if(\"string\"==typeof n&&o>0){e.params=a.util.copy(e.params);var i=t.substr(o+1)||\"\";e.params.Key=i+\"/\"+n,e.params.Bucket=t.substr(0,o)}else if(\"v4\"===r){var s=\"Bucket names cannot contain forward slashes. Bucket: \"+t;throw a.util.error(Error(),{code:\"InvalidBucket\",message:s})}}},isValidAccelerateOperation:function(e){return -1===[\"createBucket\",\"deleteBucket\",\"listBuckets\"].indexOf(e)},optInUsEast1RegionalEndpoint:function(e){var r=e.service,t=r.config;if(t.s3UsEast1RegionalEndpoint=o(r._originalConfig,{env:\"AWS_S3_US_EAST_1_REGIONAL_ENDPOINT\",sharedConfig:\"s3_us_east_1_regional_endpoint\",clientConfig:\"s3UsEast1RegionalEndpoint\"}),!(r._originalConfig||{}).endpoint&&\"us-east-1\"===e.httpRequest.region&&\"regional\"===t.s3UsEast1RegionalEndpoint&&e.httpRequest.endpoint.hostname.indexOf(\"s3.amazonaws.com\")>=0){var a=t.endpoint.indexOf(\".amazonaws.com\"),n=t.endpoint.substring(0,a)+\".us-east-1\"+t.endpoint.substring(a);e.httpRequest.updateEndpoint(n)}},populateURI:function(e){var r=e.httpRequest,t=e.params.Bucket,a=e.service,n=r.endpoint;if(t&&!a.pathStyleBucketName(t)){a.config.useAccelerateEndpoint&&a.isValidAccelerateOperation(e.operation)?a.config.useDualstackEndpoint?n.hostname=t+\".s3-accelerate.dualstack.amazonaws.com\":n.hostname=t+\".s3-accelerate.amazonaws.com\":!a.config.s3BucketEndpoint&&(n.hostname=t+\".\"+n.hostname);var o=n.port;80!==o&&443!==o?n.host=n.hostname+\":\"+n.port:n.host=n.hostname,r.virtualHostedBucket=t,a.removeVirtualHostedBucketFromPath(e)}},removeVirtualHostedBucketFromPath:function(e){var r=e.httpRequest,t=r.virtualHostedBucket;if(t&&r.path){if(e.params&&e.params.Key){var n=\"/\"+a.util.uriEscapePath(e.params.Key);if(0===r.path.indexOf(n)&&(r.path.length===n.length||\"?\"===r.path[n.length]))return}r.path=r.path.replace(RegExp(\"/\"+t),\"\"),\"/\"!==r.path[0]&&(r.path=\"/\"+r.path)}},populateUriFromAccessPointArn:function(e){var r=e._parsedArn,t=\"s3-outposts\"===r.service,n=\"s3-object-lambda\"===r.service,o=t?\".\"+r.outpostId:\"\",i=t?\"s3-outposts\":\"s3-accesspoint\",l=!t&&e.service.config.useFipsEndpoint?\"-fips\":\"\",d=!t&&e.service.config.useDualstackEndpoint?\".dualstack\":\"\",c=e.httpRequest.endpoint,u=s.getEndpointSuffix(r.region),f=e.service.config.s3UseArnRegion;if(c.hostname=[r.accessPoint+\"-\"+r.accountId+o,i+l+d,f?r.region:e.service.config.region,u].join(\".\"),n){var i=\"s3-object-lambda\",g=r.resource.split(\"/\")[1],l=e.service.config.useFipsEndpoint?\"-fips\":\"\";c.hostname=[g+\"-\"+r.accountId,i+l,f?r.region:e.service.config.region,u].join(\".\")}c.host=c.hostname;var A=a.util.uriEscape(e.params.Bucket),p=e.httpRequest.path;e.httpRequest.path=p.replace(RegExp(\"/\"+A),\"\"),\"/\"!==e.httpRequest.path[0]&&(e.httpRequest.path=\"/\"+e.httpRequest.path),e.httpRequest.region=r.region},addExpect100Continue:function(e){var r=e.httpRequest.headers[\"Content-Length\"];a.util.isNode()&&(r>=1048576||e.params.Body instanceof a.util.stream.Stream)&&(e.httpRequest.headers.Expect=\"100-continue\")},addContentType:function(e){var r=e.httpRequest;if(\"GET\"===r.method||\"HEAD\"===r.method){delete r.headers[\"Content-Type\"];return}!r.headers[\"Content-Type\"]&&(r.headers[\"Content-Type\"]=\"application/octet-stream\");var t=r.headers[\"Content-Type\"];a.util.isBrowser()&&(\"string\"!=typeof r.body||t.match(/;\\s*charset=/)?r.headers[\"Content-Type\"]=t.replace(/(;\\s*charset=)(.+)$/,function(e,r,t){return r+t.toUpperCase()}):r.headers[\"Content-Type\"]+=\"; charset=UTF-8\")},willComputeChecksums:function(e){var r=e.service.api.operations[e.operation].input.members,t=e.httpRequest.body,n=e.service.config.computeChecksums&&r.ContentMD5&&!e.params.ContentMD5&&t&&(a.util.Buffer.isBuffer(e.httpRequest.body)||\"string\"==typeof e.httpRequest.body);return!!(n&&e.service.shouldDisableBodySigning(e)&&!e.isPresigned()||n&&\"s3\"===this.getSignatureVersion(e)&&e.isPresigned())||!1},computeContentMd5:function(e){if(e.service.willComputeChecksums(e)){var r=a.util.crypto.md5(e.httpRequest.body,\"base64\");e.httpRequest.headers[\"Content-MD5\"]=r}},computeSseCustomerKeyMd5:function(e){a.util.each({SSECustomerKey:\"x-amz-server-side-encryption-customer-key-MD5\",CopySourceSSECustomerKey:\"x-amz-copy-source-server-side-encryption-customer-key-MD5\"},function(r,t){if(e.params[r]){var n=a.util.crypto.md5(e.params[r],\"base64\");e.httpRequest.headers[t]=n}})},pathStyleBucketName:function(e){return!!this.config.s3ForcePathStyle||!this.config.s3BucketEndpoint&&(!i.dnsCompatibleBucketName(e)||!!(this.config.sslEnabled&&e.match(/\\./)))},extractErrorFrom200Response:function(e){if(l[e.request.operation]){var r=e.httpResponse;if(r.body&&r.body.toString().match(\"<Error>\"))throw e.data=null,(this.service?this.service:this).extractError(e),e.error;if(!r.body||!r.body.toString().match(/<[\\w_]/))throw e.data=null,a.util.error(Error(),{code:\"InternalError\",message:\"S3 aborted request\"})}},retryableError:function(e,r){if(l[r.operation]&&200===e.statusCode)return!0;if(r._requestRegionForBucket&&r.service.bucketRegionCache[r._requestRegionForBucket])return!1;if(e&&\"RequestTimeout\"===e.code)return!0;else if(e&&-1!=d.indexOf(e.code)&&e.region&&e.region!=r.httpRequest.region)return r.httpRequest.region=e.region,301===e.statusCode&&r.service.updateReqBucketRegion(r),!0;else return a.Service.prototype.retryableError.call(this,e,r)},updateReqBucketRegion:function(e,r){var t=e.httpRequest;if(\"string\"==typeof r&&r.length&&(t.region=r),!!t.endpoint.host.match(/s3(?!-accelerate).*\\.amazonaws\\.com$/)){var n=e.service,o=n.config,i=o.s3BucketEndpoint;i&&delete o.s3BucketEndpoint;var s=a.util.copy(o);delete s.endpoint,s.region=t.region,t.endpoint=new a.S3(s).endpoint,n.populateURI(e),o.s3BucketEndpoint=i,t.headers.Host=t.endpoint.host,\"validate\"===e._asm.currentState&&(e.removeListener(\"build\",n.populateURI),e.addListener(\"build\",n.removeVirtualHostedBucketFromPath))}},extractData:function(e){var r=e.request;if(\"getBucketLocation\"===r.operation){var t=e.httpResponse.body.toString().match(/>(.+)<\\/Location/);delete e.data._,t?e.data.LocationConstraint=t[1]:e.data.LocationConstraint=\"\"}var a=r.params.Bucket||null;if(\"deleteBucket\"!==r.operation||\"string\"!=typeof a||e.error){var n=(e.httpResponse.headers||{})[\"x-amz-bucket-region\"]||null;if(!n&&\"createBucket\"===r.operation&&!e.error){var o=r.params.CreateBucketConfiguration;n=o?\"EU\"===o.LocationConstraint?\"eu-west-1\":o.LocationConstraint:\"us-east-1\"}n&&a&&n!==r.service.bucketRegionCache[a]&&(r.service.bucketRegionCache[a]=n)}else r.service.clearBucketRegionCache(a);r.service.extractRequestIds(e)},extractError:function(e){var r,t={304:\"NotModified\",403:\"Forbidden\",400:\"BadRequest\",404:\"NotFound\"},n=e.request,o=e.httpResponse.statusCode,i=e.httpResponse.body||\"\",s=(e.httpResponse.headers||{})[\"x-amz-bucket-region\"]||null,l=n.params.Bucket||null,d=n.service.bucketRegionCache;if(s&&l&&s!==d[l]&&(d[l]=s),t[o]&&0===i.length)l&&!s&&(r=d[l]||null)!==n.httpRequest.region&&(s=r),e.error=a.util.error(Error(),{code:t[o],message:null,region:s});else{var c=new a.XML.Parser().parse(i.toString());c.Region&&!s?(s=c.Region,l&&s!==d[l]&&(d[l]=s)):l&&!s&&!c.Region&&(r=d[l]||null)!==n.httpRequest.region&&(s=r),e.error=a.util.error(Error(),{code:c.Code||o,message:c.Message||null,region:s})}n.service.extractRequestIds(e)},requestBucketRegion:function(e,r){var t=e.error,n=e.request,o=n.params.Bucket||null;if(!t||!o||t.region||\"listObjects\"===n.operation||a.util.isNode()&&\"headBucket\"===n.operation||400===t.statusCode&&\"headObject\"!==n.operation||-1===d.indexOf(t.code))return r();var i=a.util.isNode()?\"headBucket\":\"listObjects\",s={Bucket:o};\"listObjects\"===i&&(s.MaxKeys=0);var l=n.service[i](s);l._requestRegionForBucket=o,l.send(function(){var e=n.service.bucketRegionCache[o]||null;t.region=e,r()})},reqRegionForNetworkingError:function(e,r){if(!a.util.isBrowser())return r();var t=e.error,n=e.request,o=n.params.Bucket;if(!t||\"NetworkingError\"!==t.code||!o||\"us-east-1\"===n.httpRequest.region)return r();var s=n.service,l=s.bucketRegionCache,d=l[o]||null;if(d&&d!==n.httpRequest.region)s.updateReqBucketRegion(n,d),r();else if(i.dnsCompatibleBucketName(o)){if(n.httpRequest.virtualHostedBucket){var c=s.listObjects({Bucket:o,MaxKeys:0});s.updateReqBucketRegion(c,\"us-east-1\"),c._requestRegionForBucket=o,c.send(function(){var e=s.bucketRegionCache[o]||null;e&&e!==n.httpRequest.region&&s.updateReqBucketRegion(n,e),r()})}else r()}else s.updateReqBucketRegion(n,\"us-east-1\"),\"us-east-1\"!==l[o]&&(l[o]=\"us-east-1\"),r()},bucketRegionCache:{},clearBucketRegionCache:function(e){var r=this.bucketRegionCache;e?\"string\"==typeof e&&(e=[e]):e=Object.keys(r);for(var t=0;t<e.length;t++)delete r[e[t]];return r},correctBucketRegionFromCache:function(e){var r=e.params.Bucket||null;if(r){var t=e.service,a=e.httpRequest.region,n=t.bucketRegionCache[r];n&&n!==a&&t.updateReqBucketRegion(e,n)}},extractRequestIds:function(e){var r=e.httpResponse.headers?e.httpResponse.headers[\"x-amz-id-2\"]:null,t=e.httpResponse.headers?e.httpResponse.headers[\"x-amz-cf-id\"]:null;e.extendedRequestId=r,e.cfId=t,e.error&&(e.error.requestId=e.requestId||null,e.error.extendedRequestId=r,e.error.cfId=t)},getSignedUrl:function(e,r,t){var n=(r=a.util.copy(r||{})).Expires||900;if(\"number\"!=typeof n)throw a.util.error(Error(),{code:\"InvalidParameterException\",message:\"The expiration must be a number, received \"+typeof n});delete r.Expires;var o=this.makeRequest(e,r);if(!t)return o.presign(n,t);a.util.defer(function(){o.presign(n,t)})},createPresignedPost:function(e,r){\"function\"==typeof e&&void 0===r&&(r=e,e=null),e=a.util.copy(e||{});var t=this.config.params||{},n=e.Bucket||t.Bucket,o=this,i=this.config,s=a.util.copy(this.endpoint);function l(){return{url:a.util.urlFormat(s),fields:o.preparePostFields(i.credentials,i.region,n,e.Fields,e.Conditions,e.Expires)}}if(!i.s3BucketEndpoint&&(s.pathname=\"/\"+n),!r)return l();i.getCredentials(function(e){if(e)r(e);else try{r(null,l())}catch(e){r(e)}})},preparePostFields:function(e,r,t,o,i,s){var l=this.getSkewCorrectedDate();if(!e||!r||!t)throw Error(\"Unable to create a POST object policy without a bucket, region, and credentials\");o=a.util.copy(o||{}),i=(i||[]).slice(0),s=s||3600;var d=a.util.date.iso8601(l).replace(/[:\\-]|\\.\\d{3}/g,\"\"),c=d.substr(0,8),u=n.createScope(c,r,\"s3\"),f=e.accessKeyId+\"/\"+u;for(var g in o.bucket=t,o[\"X-Amz-Algorithm\"]=\"AWS4-HMAC-SHA256\",o[\"X-Amz-Credential\"]=f,o[\"X-Amz-Date\"]=d,e.sessionToken&&(o[\"X-Amz-Security-Token\"]=e.sessionToken),o)if(o.hasOwnProperty(g)){var A={};A[g]=o[g],i.push(A)}return o.Policy=this.preparePostPolicy(new Date(l.valueOf()+1e3*s),i),o[\"X-Amz-Signature\"]=a.util.crypto.hmac(n.getSigningKey(e,c,r,\"s3\",!0),o.Policy,\"hex\"),o},preparePostPolicy:function(e,r){return a.util.base64.encode(JSON.stringify({expiration:a.util.date.iso8601(e),conditions:r}))},prepareSignedUrl:function(e){e.addListener(\"validate\",e.service.noPresignedContentLength),e.removeListener(\"build\",e.service.addContentType),e.params.Body?e.addListener(\"afterBuild\",a.EventListeners.Core.COMPUTE_SHA256):e.removeListener(\"build\",e.service.computeContentMd5)},disableBodySigning:function(e){var r=e.httpRequest.headers;!Object.prototype.hasOwnProperty.call(r,\"presigned-expires\")&&(r[\"X-Amz-Content-Sha256\"]=\"UNSIGNED-PAYLOAD\")},noPresignedContentLength:function(e){if(void 0!==e.params.ContentLength)throw a.util.error(Error(),{code:\"UnexpectedParameter\",message:\"ContentLength is not supported in pre-signed URLs.\"})},createBucket:function(e,r){(\"function\"==typeof e||!e)&&(r=r||e,e={});var t=this.endpoint.hostname,n=a.util.copy(e);return t!==this.api.globalEndpoint&&!e.CreateBucketConfiguration&&(n.CreateBucketConfiguration={LocationConstraint:this.config.region}),this.makeRequest(\"createBucket\",n,r)},writeGetObjectResponse:function(e,r){var t=this.makeRequest(\"writeGetObjectResponse\",a.util.copy(e),r),n=this.endpoint.hostname;return n=-1!==n.indexOf(this.config.region)?n.replace(\"s3.\",c+\".\"):n.replace(\"s3.\",c+\".\"+this.config.region+\".\"),t.httpRequest.endpoint=new a.Endpoint(n,this.config),t},upload:function(e,r,t){\"function\"==typeof r&&void 0===t&&(t=r,r=null),r=r||{},r=a.util.merge(r||{},{service:this,params:e});var n=new a.S3.ManagedUpload(r);return\"function\"==typeof t&&n.send(t),n},setExpiresString:function(e){e&&e.httpResponse&&e.httpResponse.headers&&\"expires\"in e.httpResponse.headers&&(e.httpResponse.headers.expiresstring=e.httpResponse.headers.expires);try{e&&e.httpResponse&&e.httpResponse.headers&&\"expires\"in e.httpResponse.headers&&a.util.date.parseTimestamp(e.httpResponse.headers.expires)}catch(r){console.log(\"AWS SDK\",\"(warning)\",r),delete e.httpResponse.headers.expires}}}),a.S3.addPromisesToClass=function(e){this.prototype.getSignedUrlPromise=a.util.promisifyMethod(\"getSignedUrl\",e)},a.S3.deletePromisesFromClass=function(){delete this.prototype.getSignedUrlPromise},a.util.addPromises(a.S3)},100:function(e,r,t){var a=t(9940),n=t(9077),o={isArnInParam:function(e,r){var t=((e.service.api.operations[e.operation]||{}).input||{}).members||{};return!!e.params[r]&&!!t[r]&&a.util.ARN.validate(e.params[r])},validateArnService:function(e){var r=e._parsedArn;if(\"s3\"!==r.service&&\"s3-outposts\"!==r.service&&\"s3-object-lambda\"!==r.service)throw a.util.error(Error(),{code:\"InvalidARN\",message:\"expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component\"})},validateArnAccount:function(e){var r=e._parsedArn;if(!/[0-9]{12}/.exec(r.accountId))throw a.util.error(Error(),{code:\"InvalidARN\",message:'ARN accountID does not match regex \"[0-9]{12}\"'})},validateS3AccessPointArn:function(e){var r=e._parsedArn,t=r.resource[11];if(2!==r.resource.split(t).length)throw a.util.error(Error(),{code:\"InvalidARN\",message:\"Access Point ARN should have one resource accesspoint/{accesspointName}\"});var n=r.resource.split(t)[1],i=n+\"-\"+r.accountId;if(!o.dnsCompatibleBucketName(i)||i.match(/\\./))throw a.util.error(Error(),{code:\"InvalidARN\",message:\"Access point resource in ARN is not DNS compatible. Got \"+n});e._parsedArn.accessPoint=n},validateOutpostsArn:function(e){var r=e._parsedArn;if(0!==r.resource.indexOf(\"outpost:\")&&0!==r.resource.indexOf(\"outpost/\"))throw a.util.error(Error(),{code:\"InvalidARN\",message:\"ARN resource should begin with 'outpost/'\"});var t=r.resource[7],n=r.resource.split(t)[1];if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw a.util.error(Error(),{code:\"InvalidARN\",message:\"Outpost resource in ARN is not DNS compatible. Got \"+n});e._parsedArn.outpostId=n},validateOutpostsAccessPointArn:function(e){var r=e._parsedArn,t=r.resource[7];if(4!==r.resource.split(t).length)throw a.util.error(Error(),{code:\"InvalidARN\",message:\"Outposts ARN should have two resources outpost/{outpostId}/accesspoint/{accesspointName}\"});var"
}