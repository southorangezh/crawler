"use strict";(self["webpackChunkmember_center_fe"]=self["webpackChunkmember_center_fe"]||[]).push([[266],{4213:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind-email"},["VERIFY_PHONE"===e.activeName?n("verify-account",{ref:"VerifyAccount",attrs:{type:"sms",mainTitle:e.$t("v2_tips_verify_binding_phone"),serviceTips:e.$t("v2_phone_unable_valid"),showFAQ:!1,showServiceLinks:"",isLogin:"",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SEND_SMS},on:{"update:code":function(t){e.code=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleVerifySmsBtnTextChange}}):e._e(),"BIND_EMAIL"===e.activeName?n("bind-account",{ref:"BindAccount",attrs:{type:"email",mainTitle:e.$t("v2_title_binding_email"),descriptons:e.$t("v2_tips_binding_email_text"),serviceTips:e.$t("v2_tips_need_help").replace("{0}",""),showFAQ:!1,showServiceLinks:"",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.email,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SUBMIT_BIND_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_EMAIL_SEND_BIND_EMAIL},on:{"update:code":function(t){e.code=t},"update:maskInfo":function(t){e.email=t},"update:mask-info":function(t){e.email=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBindEmailBtnTextChange}}):e._e()],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(26066),d=n(7223),u=n(46918),h=n(78012),p=n(43435),m=n(24450),_=n(88333),v=n(31272),f=n(51501),g=n(72409),E=n(11579),T=n(40759),b=n(74949),N=n(37151),C=n(3372);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var A={name:"binding-email",mixins:[],data:function(){return{isMobile:u.Fr,moduleName:h.Sn.MODIFY_MOBILE,smsType:p.i.WEB_VALIDATE_PHONE,emailType:m.O.WEB_BIND_EMAIL,activeName:"VERIFY_PHONE",inited:!1,maskInfo:"",code:"",captchaResult:null,ticket:null,email:"",verifySmsBtnText:"",sendBindEmailBtnText:"",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:T.tU}},computed:w({},(0,b.L8)({initData:N.A.common.getter.initData,lang:N.A.common.getter.lang})),methods:w(w(w({},(0,b.PY)({updateNextData:N.A.common.mutation.updateNextData,setShowCaptcha:N.A.captcha.mutation.setShow})),(0,b.i0)({getParamWithTicket:N.A.captcha.action.getParamWithTicket})),{},{next:function(){window.clearInterval(this.interval),this.count=0,this.interval=null,this.code="",this.moduleName=h.Sn.WEB_BIND_EMAIL,this.captchaResult=null,this.resetErrorCode(),this.activeName="BIND_EMAIL"},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={areaCode:t.areaCode,smsType:t.smsType},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event("bindEmail btn","Click","".concat((0,v.R7)()," send code to phone")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,g.XP)(g.j9.STEP_1,{path:E.Lq.SMS_VALIDATION_SEND,scene:E.Nd.BINDING_EMAIL_SMS}),n.next=2,_["default"].common.sendLoginPhone(r);case 2:s=n.sent,(0,g.XP)(g.j9.STEP_4,{path:E.Lq.SMS_VALIDATION_SEND,scene:E.Nd.BINDING_EMAIL_SMS}),t.startTiming(),null===(a=t.$ga)||void 0===a||a.event("bindEmail btn","Click","".concat((0,v.R7)()," send code to phone success")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_SMS,t.verifySmsBtnText||t.$t("v2_btn_sendBtn")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n["catch"](0),null===(l=t.$ga)||void 0===l||l.event("bindEmail btn","Click","".concat((0,v.R7)()," send code to phone error ").concat(d.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_SMS,t.verifySmsBtnText||t.$t("v2_btn_sendBtn"),(null===d||void 0===d?void 0:d.code)||f.Sc),t.errorCodeHandle(d),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e["finally"]&&(null===e||void 0===e||e["finally"]()),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={email:t.email,emailType:t.emailType},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event("bindEmail btn","Click","".concat((0,v.R7)()," send code to email")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,g.XP)(g.j9.STEP_1,{path:E.Lq.SEND_EMAIL,scene:E.Nd.BINDING_EMAIL_NEW_EMAIL,operationalType:g.xe.SEND_EMAIL}),n.next=2,_["default"].common.sendEmail(r);case 2:s=n.sent,(0,g.XP)(g.j9.STEP_4,{path:E.Lq.SEND_EMAIL,scene:E.Nd.BINDING_EMAIL_NEW_EMAIL,operationalType:g.xe.SEND_EMAIL}),t.startTiming(),null===(a=t.$ga)||void 0===a||a.event("bindEmail btn","Click","".concat((0,v.R7)()," send code to email success")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_BIND_EMAIL,t.sendBindEmailBtnText||t.$t("v2_btn_sendBtn")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n["catch"](0),null===(l=t.$ga)||void 0===l||l.event("bindEmail btn","Click","".concat((0,v.R7)()," send code to email error ").concat(d.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SEND_BIND_EMAIL,t.sendBindEmailBtnText||t.$t("v2_btn_sendBtn"),(null===d||void 0===d?void 0:d.code)||f.Sc),t.errorCodeHandle(d,"resetCaptcha"),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e["finally"]&&(null===e||void 0===e||e["finally"]()),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event("bindEmail btn","Click","".concat((0,v.R7)()," check code to phone")),(0,g.XP)(g.j9.STEP_6,{path:E.Lq.PHONE_VALIDATION,scene:E.Nd.BINDING_EMAIL_SMS}),t.next=1,_["default"].account.phoneValidation({smsCode:e.code});case 1:o=t.sent,(0,g.kL)(),e.ticket=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.phoneValidateTicket,null===(a=e.$ga)||void 0===a||a.event("bindEmail btn","Click","".concat((0,v.R7)()," check code to phone success")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_SMS,e.$t("v2_btn_next")),e.$nextTick(function(){e.next()}),t.next=3;break;case 2:t.prev=2,s=t["catch"](0),null===(r=e.$ga)||void 0===r||r.event("bindEmail btn","Click","".concat((0,v.R7)()," check code to phone error ").concat(s.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_SMS,e.$t("v2_btn_next"),(null===s||void 0===s?void 0:s.code)||f.Sc),e.errorCodeHandle(s);case 3:return t.prev=3,e.isLoading=!1,t.finish(3);case 4:case"end":return t.stop()}},t,null,[[0,2,3,4]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,a={email:e.email,emailCode:e.code,phoneValidateTicket:e.ticket},e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event("bindEmail btn","Click","".concat((0,v.R7)()," check code and bind email")),(0,g.XP)(g.j9.STEP_6,{path:E.Lq.ACCOUNT_EMAIL_BINDING,scene:E.Nd.BINDING_EMAIL_NEW_EMAIL,operationalType:g.xe.SEND_EMAIL}),t.next=1,_["default"].webBinding.bindingEmail(a);case 1:(0,g.kL)(),null===(i=e.$ga)||void 0===i||i.event("bindEmail btn","Click","".concat((0,v.R7)()," check code and bind email success")),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_BIND_EMAIL,e.$t("v2_weapp_binding_phone_submit")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t["catch"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event("bindEmail btn","Click","".concat((0,v.R7)()," check code and bind email error ").concat(r.code)),(0,C.HF)(T.tU.ACCOUNT_BIND_EMAIL_SUBMIT_BIND_EMAIL,e.$t("v2_weapp_binding_phone_submit"),(null===r||void 0===r?void 0:r.code)||f.Sc),e.errorCodeHandle(r,"resetCaptcha");case 3:case"end":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t("v2_tips_binding_email_success"),subTitle:this.$t("v2_tips_binding_email_success_text"),redirectBtnText:this.$t("v2_btn_done"),callbackUrl:(0,v.TP)()};this.updateNextData({nextData:e}),this.$router.push({path:"/account/success",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("zh_CN"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t("v2_error_code_520")),t.abrupt("return");case 1:return t.prev=1,t.next=2,_["default"].common.getBindingInfo();case 2:n=t.sent,n.data.canBindEmail?(e.maskInfo=n.data.maskRegisterPhone,e.inited=!0):n.data.maskEmail&&(i=(0,v.TP)(),window.location.replace(i)),t.next=4;break;case 3:t.prev=3,o=t["catch"](1),a=o.code?e.$t("v2_error_code_".concat(o.code)):e.$t("v2_tips_off_line"),e.failNavigateHandle(a);case 4:case"end":return t.stop()}},t,null,[[1,3]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode="",this.errorMsg=""},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,v.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:"/fail",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;("resetCaptcha"===t||f.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t("v2_error_code_".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t("v2_tips_off_line")},handleVerifySmsBtnTextChange:function(e){this.verifySmsBtnText=e},handleSendBindEmailBtnTextChange:function(e){this.sendBindEmailBtnText=e}}),watch:{initData:{handler:"fetchUserInfo",immediate:!0}},components:{VerifyAccount:l.A,BindAccount:d.A},beforeRouteEnter:function(e,t,n){n(function(e){document.title="".concat(e.$t("v2_common_system_title")," | ").concat(e.$t("v2_title_binding_email"))})}},k=A,O=n(7358),I=(0,O.A)(k,i,a,!1,null,null,null),R=I.exports},9013:function(e,t,n){n.d(t,{P:function(){return i}});var i=50},17782:function(e,t,n){var i=n(13667),a=n(74949),o=n(37151),r=n(40445),s=n(39567);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,i.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.A={data:function(){var e=this.$route.query,t=e.errorCode,n=e.callbackUrl;return{errorCode:t,callbackUrl:n,title:"",count:10,timer:null,OAuthType:"Wechat"}},computed:l(l({},(0,a.L8)({nextData:o.A.common.getter.nextData})),{},{errorMsg:function(){return this.errorCode?this.$t("v2_error_code_".concat(this.errorCode)):this.nextData&&this.nextData.title},subJumpBtnText:function(){var e,t=this.$t("v2_btn_go_back");return null!==(e=this.nextData)&&void 0!==e&&e.cancelTimer?t:"".concat(t).concat(this.count>=0?"(".concat(this.count,"s)"):"")}}),mounted:function(){},methods:l(l({},(0,a.PY)({updateCodeVisible:o.A.common.mutation.updateCodeVisible,updateNextData:o.A.common.mutation.updateNextData})),{},{handleJumpStore:function(){this.timer&&clearInterval(this.timer),window.location.href=r.yJ},handleBack:function(){this.goCallBackUrl()},goCallBackUrl:function(){var e;if(this.callbackUrl)e=this.callbackUrl;else if(this.nextData&&this.nextData.callbackUrl){var t=this.nextData.callbackUrl;e=t}e&&(0,s.Ll)(e)?window.location.href=e:this.$router.go(-1)},goBack:function(){var e,t=this;null!==(e=this.nextData)&&void 0!==e&&e.cancelTimer||(this.timer=window.setInterval(function(){t.count>=0?t.count--:(window.clearInterval(t.timer),t.goCallBackUrl())},1e3))}}),beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.updateNextData({nextData:null})},beforeRouteEnter:function(e,t,n){n(function(e){document.title="".concat(e.$t("v2_common_system_title"))})}}},27179:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"apple-oauth-bind-email"},[n("bind-account",{ref:"AppleBindAccount",attrs:{type:"email",isValueFormat:"",mainTitle:e.$t("v2_title_apple_binding_email"),descriptons:e.$t("v2_apple_binding_email_reminder"),showServiceLinks:!1,showLogo:!1,theme:"black",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.email,captchaResult:e.captchaResult,extraConfirmVerify:e.checkAgreeVerify,btnAcLabel:e.USAGE_TAG_VALUE.APPLE_ACCOUNT_SUBMIT_BIND,sendBtnAclabel:e.USAGE_TAG_VALUE.APPLE_ACCOUNT_SEND_BIND_EMAIL},on:{"update:code":function(t){e.code=t},"update:maskInfo":function(t){e.email=t},"update:mask-info":function(t){e.email=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode}},[n("policy-and-subscription",{attrs:{showErrorMessage:e.showCheckAgreeError,showCheckSubscription:!1},on:{checkAgreeChange:e.checkAgreeChange}})],1)],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(7223),d=n(98276),u=n(74949),h=n(31272),p=n(37151),m=n(88333),_=n(78012),v=n(24450),f=n(51501),g=n(40759);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b="KEY_PARAM_EMPTY_ERROR_MESSAGE",N={name:"apple-oauth-bind-email",data:function(){return{moduleName:_.Sn.APPLE_BIND_EMAIL,emailType:v.O.APPLE_BINDING,inited:!0,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,count:0,maskInfo:"",code:"",captchaResult:null,email:"",checkAgree:!1,showCheckAgreeError:!1,USAGE_TAG_VALUE:g.tU}},computed:T({},(0,u.L8)({initData:p.A.common.getter.initData,lang:p.A.common.getter.lang})),methods:T(T(T({},(0,u.PY)({updateNextData:p.A.common.mutation.updateNextData,setShowCaptcha:p.A.captcha.mutation.setShow})),(0,u.i0)({getParamWithTicket:p.A.captcha.action.getParamWithTicket})),{},{fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$route.query.oauthLoginTicket){t.next=1;break}throw new Error(b);case 1:return e.loading=!0,e.inited=!1,n={uuid:e.$route.query.oauthLoginTicket},t.next=2,m["default"].middleware.getOauthUserInfo(n);case 2:e.inited=!0,t.next=5;break;case 3:if(t.prev=3,i=t["catch"](0),(null===i||void 0===i?void 0:i.message)!==b){t.next=4;break}return e.failNavigateHandle(e.$t("v2_error_code_609")),t.abrupt("return");case 4:e.failNavigateHandle(i.code?e.$t("v2_error_code_".concat(i.code)):"");case 5:return t.prev=5,e.loading=!1,t.finish(5);case 6:case"end":return t.stop()}},t,null,[[0,3,5,6]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetErrorCode:function(){this.errorCode="",this.errorMsg=""},resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.AppleBindAccount)||void 0===e||e.resetCaptcha()},errorCodeHandle:function(e,t){if((null===e||void 0===e?void 0:e.message)!==b)if(e.code){var n=e.code;"resetCaptcha"===t||f.f9.concat(f.QI).includes(n)?(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha(),this.errorMsg=this.$t("v2_error_code_".concat(n))):n===f.Zm?this.failNavigateHandle(this.$t("v2_error_code_609")):f.Xm.includes(n)?this.errorMsg=this.$t("v2_apple_binding_email_binding"):f.a7.includes(n)?this.errorMsg=this.$t("v2_apple_binding_email_locked"):this.errorMsg=this.$t("v2_error_code_".concat(n)),this.errorCode=n}else this.errorMsg=this.$t("v2_tips_off_line");else this.failNavigateHandle(this.$t("v2_error_code_609"))},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t.email){n.next=1;break}return n.abrupt("return");case 1:return t.isSendLoading=!0,i={email:t.email,emailType:t.emailType},t.resetErrorCode(),n.next=2,t.getParamWithTicket({moduleName:t.moduleName,param:i,result:t.captchaResult});case 2:return a=n.sent,n.next=3,m["default"].common.sendEmail(a);case 3:o=n.sent,t.startTiming(),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(o)),n.next=5;break;case 4:n.prev=4,r=n["catch"](0),t.errorCodeHandle(r,"resetCaptcha"),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(r));case 5:return n.prev=5,t.isSendLoading=!1,null!==e&&void 0!==e&&e["finally"]&&(null===e||void 0===e||e["finally"]()),n.finish(5);case 6:case"end":return n.stop()}},n,null,[[0,4,5,6]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$route.query.oauthLoginTicket){t.next=1;break}throw new Error(b);case 1:return e.isLoading=!0,n={email:e.email,emailCode:e.code,oauthLoginTicket:e.$route.query.oauthLoginTicket},t.next=2,m["default"].apple.bindingEmail(n);case 2:if(i=t.sent,i.data.callbackUrl){t.next=3;break}throw new Error(b);case 3:window.location.replace(i.data.callbackUrl),t.next=5;break;case 4:t.prev=4,a=t["catch"](0),e.isLoading=!1,e.errorCodeHandle(a);case 5:case"end":return t.stop()}},t,null,[[0,4]])}))()},checkAgreeChange:function(e){this.checkAgree=e},checkAgreeVerify:function(){return this.checkAgree||(this.showCheckAgreeError=!0),this.checkAgree},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,h.hL)("login",document.URL)};this.updateNextData({nextData:t}),this.$router.push({path:"/fail",query:this.$route.query})}}),watch:{initData:{handler:"fetchUserInfo",immediate:!0}},beforeRouteEnter:function(e,t,n){n(function(e){document.title="".concat(e.$t("v2_common_system_title")," | ").concat(e.$t("v2_title_apple_binding_email"))})},components:{BindAccount:l.A,PolicyAndSubscription:d.A}},C=N,S=n(7358),w=(0,S.A)(C,i,a,!1,null,null,null),A=w.exports},32594:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind-security-phone"},["choose-verify"===e.activeName?n("choose-verify",{attrs:{inited:e.inited,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,hasEmail:e.hasEmail,hasPhone:e.hasPhone,maskEmail:e.maskEmail,maskPhone:e.maskRegisterPhone},on:{toVerify:e.handleToVerify}}):e._e(),"verify-phone"===e.activeName?n("verify-account",{ref:"VerifyAccount",attrs:{type:"sms",mainTitle:e.$t("v2_tips_verify_security_phone"),serviceTips:e.$t("v2_phone_unable_valid"),showFAQ:!1,showServiceLinks:"",isLogin:"",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SEND_SMS},on:{"update:code":function(t){e.code=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleVerifySmsBtnTextChange}},[e.showSwitchLink?n("div",{staticClass:"text-center",attrs:{slot:"bottom"},slot:"bottom"},[n("ac-link",{staticClass:"mt-6",attrs:{type:"primary",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_CHANGE_VERIFY},on:{click:function(){return e.handleToVerify()}}},[e._v(" "+e._s(e.$t("v2_select_another_verification_method"))+" ")])],1):e._e()]):e._e(),"verify-email"===e.activeName?n("verify-account",{ref:"VerifyAccount",attrs:{type:"email",mainTitle:e.$t("v2_tips_verify_security_phone"),serviceTips:e.$t("v2_email_unable_valid"),showFAQ:!1,showServiceLinks:"",isLogin:"",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SEND_EMAIL},on:{"update:code":function(t){e.code=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n("div",{staticClass:"text-center",attrs:{slot:"bottom"},slot:"bottom"},[n("ac-link",{staticClass:"mt-6",attrs:{type:"primary",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_CHANGE_VERIFY},on:{click:function(){return e.handleToVerify()}}},[e._v(" "+e._s(e.$t("v2_select_another_verification_method"))+" ")])],1):e._e()]):e._e(),"bind-security-phone"===e.activeName?n("bind-account",{ref:"BindAccount",attrs:{type:"sms",isValueFormat:"",mainTitle:e.$t("v2_bind_security_phone_number"),descriptons:e.$t("v2_bind_security_phone_number_cue_text"),serviceTips:e.$t("v2_tips_need_help").replace("{0}",""),showFAQ:!1,showServiceLinks:"",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.phone,areaCode:e.areaCode,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_BIND_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_SECURITY_PHONE_SEND_BIND_SMS},on:{"update:code":function(t){e.code=t},"update:maskInfo":function(t){e.phone=t},"update:mask-info":function(t){e.phone=t},"update:areaCode":function(t){e.areaCode=t},"update:area-code":function(t){e.areaCode=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendSmsBtnTextChange}}):e._e()],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(26066),d=n(7223),u=n(46918),h=n(78012),p=n(43435),m=n(24450),_=n(40759),v=n(88333),f=n(31272),g=n(51501),E=n(74949),T=n(37151),b=n(3372),N=n(95441),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card-container",{staticClass:"choose-verify",attrs:{mainTitle:e.$t("v2_identity_verification_is_required"),descriptons:e.$t("v2_please_select_a_verification_method"),showSkeleton:!e.inited,showServiceLinks:!0,serviceTips:e.$t("v2_tips_need_help").replace("{0}",""),showFAQ:!1}},[e.hasPhone?n("ac-button",{staticClass:"second-btn",attrs:{type:"variant",block:"",buttonType:e.$t("v2_weapp_valid_to_phone"),acLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_SECURITY_PHONE_PHONE_VERIFY},on:{click:function(){return e.toVerify("phone")}}},[e._v(" "+e._s(e.$t("v2_use_verify_method"))+" "+e._s(e.maskPhone)+" ")]):e._e(),e.hasEmail?n("ac-button",{staticClass:"second-btn",staticStyle:{"text-transform":"none"},attrs:{type:"variant",block:"",buttonType:e.$t("v2_weapp_valid_to_email"),acLabel:e.USAGE_TAG_VALUE.ACCOUNT_MODIFY_SECURITY_PHONE_EMAIL_VERIFY},on:{click:function(){return e.toVerify("email")}}},[e._v(" "+e._s(e.$t("v2_use_verify_method"))+" "+e._s(e.maskEmail)+" ")]):e._e()],1)},S=[],w=n(32368),A=n(52621);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I={name:"bind-security-phone-choose-verify",props:{errorCode:[Number,String],errorMsg:String,moduleName:String,loading:Boolean,hasEmail:Boolean,hasPhone:Boolean,maskEmail:String,maskPhone:String,inited:Boolean},mixins:[],data:function(){return{USAGE_TAG_VALUE:_.tU}},computed:O({},(0,E.L8)({initData:T.A.common.getter.initData,lang:T.A.common.getter.lang})),methods:{toVerify:function(e){this.$emit("toVerify",e)}},watch:{},components:{CardContainer:w.A,acButton:A.A}},R=I,U=n(7358),L=(0,U.A)(R,C,S,!1,null,"633306c0",null),y=L.exports;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V={name:"binding-security-phone",mixins:[],components:{VerifyAccount:l.A,BindAccount:d.A,ChooseVerify:y,acLink:N.A},data:function(){return{isMobile:u.Fr,moduleName:h.Sn.WEB_BIND_SECURITY_PHONE,smsType:p.i.WEB_BIND_SECURITY_PHONE,emailType:m.O.EMAIL_VALIDATE,activeName:"choose-verify",inited:!1,hasEmail:!1,hasPhone:!1,maskEmail:"",maskRegisterPhone:"",maskInfo:"",code:"",captchaResult:null,ticket:null,phone:"",areaCode:"86",sendEmailBtnText:"",sendSmsBtnText:"",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:_.tU,verifySmsBtnText:"",verificationMethod:""}},computed:D(D({},(0,E.L8)({initData:T.A.common.getter.initData,lang:T.A.common.getter.lang})),{},{showSwitchLink:function(){return this.hasEmail&&this.hasPhone}}),methods:D(D(D({},(0,E.PY)({updateNextData:T.A.common.mutation.updateNextData,setShowCaptcha:T.A.captcha.mutation.setShow})),(0,E.i0)({getParamWithTicket:T.A.captcha.action.getParamWithTicket})),{},{clearTiming:function(){this.count=0,this.interval&&window.clearInterval(this.interval)},handleVerifySmsBtnTextChange:function(e){this.verifySmsBtnText=e},next:function(e){document.documentElement.scrollTop=0,this.clearTiming(),e||(this.activeName="choose-verify",this.moduleName=h.Sn.WEB_BIND_SECURITY_PHONE),"phone"===e&&(this.activeName="verify-phone",this.validateType="phone",this.maskInfo=this.maskRegisterPhone,this.moduleName=h.Sn.MODIFY_MOBILE),"email"===e&&(this.activeName="verify-email",this.validateType="email",this.maskInfo=this.maskEmail,this.moduleName=h.Sn.WEB_VALIDATE_EMAIL),"submit"===e&&(this.activeName="bind-security-phone",this.moduleName=h.Sn.WEB_BIND_SECURITY_PHONE)},handleToVerify:function(e){this.resetErrorCode(),this.next(e)},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t.isSendLoading=!0,t.resetErrorCode(),"verify-email"!==t.activeName){n.next=3;break}return i={email:t.maskInfo,emailType:t.emailType,scene:"BIND_SECURE"},n.next=1,t.getParamWithTicket({moduleName:h.Sn.WEB_VALIDATE_EMAIL,param:i,result:t.captchaResult});case 1:return a=n.sent,n.next=2,v["default"].webBinding.sendValidateEmail(a);case 2:o=n.sent,t.startTiming(),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_EMAIL,t.sendEmailBtnText||t.$t("v2_btn_sendBtn")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(o)),n.next=6;break;case 3:if("verify-phone"!==t.activeName){n.next=6;break}return r={areaCode:t.areaCode,smsType:p.i.WEB_VALIDATE_PHONE,scene:"BIND_SECURE"},n.next=4,t.getParamWithTicket({moduleName:h.Sn.MODIFY_MOBILE,param:r,result:t.captchaResult});case 4:return s=n.sent,n.next=5,v["default"].common.sendLoginPhone(s);case 5:l=n.sent,t.startTiming(),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_SMS,t.verifySmsBtnText||t.$t("v2_btn_sendBtn")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(l));case 6:n.next=8;break;case 7:n.prev=7,d=n["catch"](0),"verify-email"===t.activeName?(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_EMAIL,t.sendEmailBtnText||t.$t("v2_btn_sendBtn"),(null===d||void 0===d?void 0:d.code)||g.Sc):"verify-phone"===t.activeName&&(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_SMS,t.verifySmsBtnText||t.$t("v2_btn_sendBtn"),(null===d||void 0===d?void 0:d.code)||g.Sc),t.errorCodeHandle(d),"function"===typeof(null===e||void 0===e?void 0:e.error)&&e.error(d);case 8:return n.prev=8,t.isSendLoading=!1,"function"===typeof(null===e||void 0===e?void 0:e["finally"])&&e["finally"](),n.finish(8);case 9:case"end":return n.stop()}},n,null,[[0,7,8,9]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={areaCode:t.areaCode,phone:t.phone,smsType:t.smsType,scene:"BIND_SECURE"},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event("bindPhone btn","Click","".concat((0,f.R7)()," send code to phone")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,n.next=2,v["default"].common.sendSmsCode(r);case 2:s=n.sent,t.startTiming(),null===(a=t.$ga)||void 0===a||a.event("bindPhone btn","Click","".concat((0,f.R7)()," send code to phone success")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t("v2_btn_sendBtn")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n["catch"](0),null===(l=t.$ga)||void 0===l||l.event("bindPhone btn","Click","".concat((0,f.R7)()," send code to phone error ").concat(d.code)),t.errorCodeHandle(d,"resetCaptcha"),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t("v2_btn_sendBtn"),(null===d||void 0===d?void 0:d.code)||g.Sc),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e["finally"]&&(null===e||void 0===e||e["finally"]()),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u,h,p;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoading=!0,e.resetErrorCode(),"verify-email"!==e.activeName){t.next=2;break}return null===(n=e.$ga)||void 0===n||n.event("bindSecurityPhone btn","Click","".concat((0,f.R7)()," check code to email")),t.next=1,v["default"].webBinding.validateEmail({emailCode:e.code,scene:"BIND_SECURE"});case 1:return r=t.sent,e.ticket=(null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.validateTicket)||(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.emailValidateTicket),null===(o=e.$ga)||void 0===o||o.event("bindSecurityPhone btn","Click","".concat((0,f.R7)()," check code to email success")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_EMAIL,e.$t("v2_btn_next")),e.verificationMethod="EMAIL",e.next("submit"),t.abrupt("return");case 2:if("verify-phone"!==e.activeName){t.next=4;break}return null===(s=e.$ga)||void 0===s||s.event("bindSecurityPhone btn","Click","".concat((0,f.R7)()," check code to phone")),t.next=3,v["default"].account.phoneValidation({smsCode:e.code,scene:"BIND_SECURE"});case 3:return h=t.sent,e.ticket=(null===h||void 0===h||null===(l=h.data)||void 0===l?void 0:l.validateTicket)||(null===h||void 0===h||null===(d=h.data)||void 0===d?void 0:d.phoneValidateTicket),null===(u=e.$ga)||void 0===u||u.event("bindSecurityPhone btn","Click","".concat((0,f.R7)()," check code to phone success")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_SMS,e.$t("v2_btn_next")),e.verificationMethod="SMS",e.next("submit"),t.abrupt("return");case 4:t.next=6;break;case 5:t.prev=5,p=t["catch"](0),"verify-email"===e.activeName?(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_EMAIL,e.$t("v2_btn_next"),(null===p||void 0===p?void 0:p.code)||g.Sc):"verify-phone"===e.activeName&&(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_SMS,e.$t("v2_btn_next"),(null===p||void 0===p?void 0:p.code)||g.Sc),e.errorCodeHandle(p);case 6:return t.prev=6,e.isLoading=!1,t.finish(6);case 7:case"end":return t.stop()}},t,null,[[0,5,6,7]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,a={areaCode:e.areaCode,securePhone:e.phone,smsCode:e.code,validateTicket:e.ticket,verificationMethod:e.verificationMethod||("email"===e.validateType?"EMAIL":"SMS"),scene:"BIND_SECURE"},e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event("bindPhone btn","Click","".concat((0,f.R7)()," check code and bind phone")),t.next=1,v["default"].webBinding.bindingSecuredPhone(a);case 1:null===(i=e.$ga)||void 0===i||i.event("bindPhone btn","Click","".concat((0,f.R7)()," check code and bind phone success")),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_BIND_SMS,e.$t("v2_weapp_binding_phone_submit")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t["catch"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event("bindPhone btn","Click","".concat((0,f.R7)()," check code and bind phone error ").concat(r.code)),(0,b.HF)(_.tU.ACCOUNT_BIND_SECURITY_PHONE_SUBMIT_BIND_SMS,e.$t("v2_weapp_binding_phone_submit"),(null===r||void 0===r?void 0:r.code)||g.Sc),e.errorCodeHandle(r,"resetCaptcha");case 3:case"end":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t("v2_security_phone_number_bind_success"),redirectBtnText:this.$t("v2_btn_done")},t=(0,f.TP)();e.callbackUrl=t||"/account/profile",this.updateNextData({nextData:e}),this.$router.push({path:"/account/success",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u,p;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("zh_CN"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t("v2_error_code_520")),t.abrupt("return");case 1:return t.prev=1,t.next=2,v["default"].common.getSecureBindingInfo();case 2:if(o=t.sent,r=Array.isArray(null===(n=o.data)||void 0===n?void 0:n.maskSecurePhone)?o.data.maskSecurePhone[0]||"":(null===(i=o.data)||void 0===i?void 0:i.maskSecurePhone)||"",s=r||(null===(a=o.data)||void 0===a?void 0:a.maskSecurityPhone)||"",!s){t.next=3;break}return l=(0,f.TP)(),window.location.replace(l),t.abrupt("return");case 3:if(e.maskEmail=o.data.maskEmail||"",e.maskRegisterPhone=o.data.maskRegisterPhone||"",e.hasEmail=!!e.maskEmail,e.hasPhone=!!e.maskRegisterPhone,!e.hasEmail||!e.hasPhone){t.next=4;break}e.activeName="choose-verify",e.moduleName=h.Sn.WEB_BIND_SECURITY_PHONE,t.next=7;break;case 4:if(!e.hasPhone){t.next=5;break}e.activeName="verify-phone",e.validateType="phone",e.maskInfo=e.maskRegisterPhone,e.moduleName=h.Sn.MODIFY_MOBILE,t.next=7;break;case 5:if(!e.hasEmail){t.next=6;break}e.activeName="verify-email",e.validateType="email",e.maskInfo=e.maskEmail,e.moduleName=h.Sn.WEB_VALIDATE_EMAIL,t.next=7;break;case 6:return d=e.$t("v2_tips_off_line"),e.failNavigateHandle(d),t.abrupt("return");case 7:e.inited=!0,t.next=9;break;case 8:t.prev=8,p=t["catch"](1),u=p.code?e.$t("v2_error_code_".concat(p.code)):e.$t("v2_tips_off_line"),e.failNavigateHandle(u);case 9:case"end":return t.stop()}},t,null,[[1,8]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode="",this.errorMsg=""},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,f.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:"/fail",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;("resetCaptcha"===t||g.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t("v2_error_code_".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t("v2_tips_off_line")},handleSendBtnTextChange:function(e){this.sendEmailBtnText=e},handleSendSmsBtnTextChange:function(e){this.sendSmsBtnText=e}}),watch:{initData:{handler:"fetchUserInfo",immediate:!0}},beforeRouteEnter:function(e,t,n){n(function(e){"zh_CN"===e.lang?document.title="".concat(e.$t("v2_common_system_title")," | ").concat(e.$t("v2_title_bind_security_phone")):e.failNavigateHandle(e.$t("v2_error_code_520"))})}},x=V,M=(0,U.A)(x,i,a,!1,null,null,null),B=M.exports},39013:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("error-panel",{attrs:{className:"page-account-fail",mainTitle:e.nextData&&e.nextData.title||e.$t("v2_common_error_description"),subTitle:e.nextData&&e.nextData.subTitle,subJumpBtnText:e.subJumpBtnText,mainJumpBtnText:e.mainJumpBtnText,subJumpBtnType:"default"},on:{jumpSub:e.handleJumpSub,jumpMain:e.handleJumpMain}},[n("ac-icon",{staticClass:"icon-warning mt-8",attrs:{slot:"icon",name:"error",size:56,color:"#d32029"},slot:"icon"})],1)},a=[],o=n(19740),r=n(39567),s=n(31272),c=n(20991),l=n(17782),d={name:"Fail",mixins:[l.A],computed:{subJumpBtnText:function(){var e;if(null!==(e=this.nextData)&&void 0!==e&&e.subJumpBtnText)return this.nextData.subJumpBtnText;var t=this.$t("v2_btn_go_back");return"".concat(t).concat(this.count>=0?"(".concat(this.count,"s)"):"")},mainJumpBtnText:function(){var e;return null!==(e=this.nextData)&&void 0!==e&&e.mainJumpBtnText?this.nextData.mainJumpBtnText:this.$t("v2_common_jump_to_store")}},mounted:function(){var e;this.failCodeNavigateHandle(),null!==(e=this.nextData)&&void 0!==e&&e.jumpMainUrl||this.goBack()},methods:{failCodeNavigateHandle:function(){var e=this.$route.query,t=e.errorCode,n=e.oauthType,i=c.QW.includes(n);if(i&&"613"===t){var a="Wechat"===n?this.$t("v2_tips_wechat"):n,o=(0,r.Qq)((0,s.dw)("oauth/auth/url","v2"),{type:n,backUrl:"".concat(window.location.origin,"/account/oauth")}),l="v2_tips_oauth_center_is_binding",d="v2_tips_back_oauth_login",u=c.FZ[n];u&&(o=u),c.W2.includes(n)&&(l="v2_tips_oauth_account_is_binding",d="v2_tips_go_to_oauth_login");var h={title:this.$t("v2_title_oauth_binding_error"),subTitle:this.$t(l).replace(/%@/g,a),subJumpBtnText:this.$t("v2_tips_back_account_bind"),mainJumpBtnText:this.$t(d).replace("%@",a),jumpSubUrl:"/account/oauth",jumpMainUrl:o};this.updateNextData({nextData:h})}if("621"===t){var p={title:this.$t("v2_title_oauth_no_email"),subTitle:this.$t("v2_common_oauth_noEmailReject"),subJumpBtnText:this.$t("v2_tips_back_account_bind"),mainJumpBtnText:this.$t("v2_go_to_facebook"),jumpSubUrl:"/account/oauth",jumpMainUrl:"//www.facebook.com/settings?tab=applications"};this.updateNextData({nextData:p})}},handleJumpSub:function(){var e;if(null!==(e=this.nextData)&&void 0!==e&&e.jumpSubUrl){var t=this.nextData.jumpSubUrl;window.location.href=t}else this.goCallBackUrl()},handleJumpMain:function(){var e;if(null!==(e=this.nextData)&&void 0!==e&&e.jumpMainUrl){var t=this.nextData.jumpMainUrl;window.location.href=t}else this.handleJumpStore()}},components:{ErrorPanel:o.A}},u=d,h=n(7358),p=(0,h.A)(u,i,a,!1,null,null,null),m=p.exports},57446:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind-phone"},["choose-verify"===e.activeName?n("choose-verify",{attrs:{inited:e.inited,hasEmail:e.hasEmail,hasPhone:!1,hasSecurityPhone:e.hasSecurityPhone,maskEmail:e.maskEmail,maskPhone:"",maskSecurityPhone:e.maskSecurityPhone},on:{toVerify:e.handleToVerify}}):e._e(),"VERIFY_EMAIL"===e.activeName?n("verify-account",{ref:"VerifyAccount",attrs:{type:"email",mainTitle:e.$t("v2_tips_verify_security_phone"),serviceTips:e.$t("v2_email_unable_valid"),showFAQ:!1,showServiceLinks:"",isLogin:"",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskInfo,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SUBMIT_EMAIL,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SEND_EMAIL},on:{"update:code":function(t){e.code=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n("div",{staticClass:"text-center",attrs:{slot:"bottom"},slot:"bottom"},[n("ac-link",{staticClass:"mt-6",attrs:{type:"primary",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_CHANGE_VERIFY},on:{click:e.handleToChoose}},[e._v(" "+e._s(e.$t("v2_select_another_verification_method"))+" ")])],1):e._e()]):e._e(),"VERIFY_SECURITY_PHONE"===e.activeName?n("verify-account",{ref:"VerifySecurity",attrs:{type:"sms",mainTitle:e.$t("v2_tips_verify_security_phone")||e.$t("v2_tips_verify_binding_phone"),serviceTips:e.$t("v2_phone_unable_valid"),showFAQ:!1,showServiceLinks:"",isLogin:"",showSkeleton:!e.inited,isConfirming:e.isLoading,loading:e.isLoading,isSendLoading:e.isSendLoading,moduleName:e.moduleName,errorCode:e.errorCode,errorMsg:e.errorMsg,count:e.count,maskInfo:e.maskSecurityPhone,code:e.code,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SUBMIT_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SEND_SMS},on:{"update:code":function(t){e.code=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},confirm:e.handleNext,send:e.handleVerifySend,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendBtnTextChange}},[e.showSwitchLink?n("div",{staticClass:"text-center",attrs:{slot:"bottom"},slot:"bottom"},[n("ac-link",{staticClass:"mt-6",attrs:{type:"primary",acLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_CHANGE_VERIFY},on:{click:e.handleToChoose}},[e._v(" "+e._s(e.$t("v2_select_another_verification_method"))+" ")])],1):e._e()]):e._e(),"BIND_PHONE"===e.activeName?n("bind-account",{ref:"BindAccount",attrs:{type:"sms",isValueFormat:"",mainTitle:e.$t("v2_title_binding_phone"),descriptons:e.$t("v2_tips_binding_phone_text"),serviceTips:e.$t("v2_tips_need_help").replace("{0}",""),showFAQ:!1,showServiceLinks:"",showSkeleton:!e.inited,isConfirming:e.isLoading,isSendLoading:e.isSendLoading,loading:e.isLoading,errorCode:e.errorCode,errorMsg:e.errorMsg,moduleName:e.moduleName,count:e.count,code:e.code,maskInfo:e.phone,areaCode:e.areaCode,captchaResult:e.captchaResult,btnAcLabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SUBMIT_BIND_SMS,sendBtnAclabel:e.USAGE_TAG_VALUE.ACCOUNT_BIND_PHONE_SEND_BIND_SMS},on:{"update:code":function(t){e.code=t},"update:maskInfo":function(t){e.phone=t},"update:mask-info":function(t){e.phone=t},"update:areaCode":function(t){e.areaCode=t},"update:area-code":function(t){e.areaCode=t},"update:captchaResult":function(t){e.captchaResult=t},"update:captcha-result":function(t){e.captchaResult=t},send:e.handleBindSend,confirm:e.handleConfirm,resetErrorCode:e.resetErrorCode,sendTextChange:e.handleSendSmsBtnTextChange}}):e._e()],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(26066),d=n(7223),u=n(611),h=n(46918),p=n(78012),m=n(43435),_=n(24450),v=n(40759),f=n(88333),g=n(31272),E=n(51501),T=n(74949),b=n(37151),N=n(3372),C=n(95441),S=n(72409),w=n(11579);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O={name:"binding-phone",mixins:[],data:function(){return{isMobile:h.Fr,moduleName:p.Sn.SEND_VALIDATE_EMAIL,smsType:m.i.WEB_BIND_PHONE,emailType:_.O.EMAIL_VALIDATE,activeName:"VERIFY_EMAIL",inited:!1,maskInfo:"",maskEmail:"",maskSecurityPhone:"",hasEmail:!1,hasSecurityPhone:!1,code:"",captchaResult:null,ticket:null,phone:"",areaCode:"86",sendEmailBtnText:"",sendSmsBtnText:"",verificationMethod:"",count:0,interval:null,isSendLoading:!1,isLoading:!1,errorMsg:null,errorCode:null,USAGE_TAG_VALUE:v.tU}},computed:k(k({},(0,T.L8)({initData:b.A.common.getter.initData,lang:b.A.common.getter.lang})),{},{showSwitchLink:function(){return this.hasEmail&&this.hasSecurityPhone}}),methods:k(k(k({},(0,T.PY)({updateNextData:b.A.common.mutation.updateNextData,setShowCaptcha:b.A.captcha.mutation.setShow})),(0,T.i0)({getParamWithTicket:b.A.captcha.action.getParamWithTicket})),{},{handleToChoose:function(){this.resetErrorCode(),this.activeName="choose-verify",this.moduleName=p.Sn.SEND_VALIDATE_EMAIL},handleToVerify:function(e){if(this.resetErrorCode(),"email"===e)return this.activeName="VERIFY_EMAIL",this.maskInfo=this.maskEmail,void(this.moduleName=p.Sn.SEND_VALIDATE_EMAIL);"security-phone"===e&&(this.activeName="VERIFY_SECURITY_PHONE",this.moduleName=p.Sn.WEB_SECURE_AUTHORIZATION_PHONE)},next:function(){document.documentElement.scrollTop=0,window.clearInterval(this.interval),this.count=0,this.interval=null,this.code="",this.moduleName=p.Sn.EMAIL_BINDING_PHONE,this.captchaResult=null,this.resetErrorCode(),this.activeName="BIND_PHONE"},handleVerifySend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d,u;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,i="VERIFY_EMAIL"===t.activeName?{email:t.maskEmail,emailType:t.emailType}:"VERIFY_SECURITY_PHONE"===t.activeName?{areaCode:t.areaCode,smsType:m.i.SECURE_PHONE_AUTHORIZATION,scene:"BIND_PHONE"}:{areaCode:t.areaCode,smsType:m.i.WEB_VALIDATE_PHONE,scene:"BIND_PHONE"},t.resetErrorCode(),a=t.moduleName,"VERIFY_PHONE"===t.activeName&&(a=p.Sn.MODIFY_MOBILE),"VERIFY_EMAIL"===t.activeName&&(a=p.Sn.WEB_VALIDATE_EMAIL),"VERIFY_SECURITY_PHONE"===t.activeName&&(a=p.Sn.WEB_SECURE_AUTHORIZATION_PHONE),n.next=1,t.getParamWithTicket({moduleName:a,param:i,result:t.captchaResult});case 1:if(o=n.sent,"VERIFY_EMAIL"!==t.activeName){n.next=3;break}return(0,S.XP)(S.j9.STEP_1,{path:w.Lq.EMAIL_VALIDATION_SEND,scene:w.Nd.BINDING_PHONE_EMAIL,operationalType:S.xe.SEND_EMAIL}),n.next=2,f["default"].webBinding.sendValidateEmail(o);case 2:r=n.sent,(0,S.XP)(S.j9.STEP_4,{path:w.Lq.EMAIL_VALIDATION_SEND,scene:w.Nd.BINDING_PHONE_EMAIL,operationalType:S.xe.SEND_EMAIL}),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_EMAIL,t.sendEmailBtnText||t.$t("v2_btn_sendBtn")),t.startTiming(),null===(s=t.$ga)||void 0===s||s.event("bindPhone btn","Click","".concat((0,g.R7)()," send code to email success")),n.next=5;break;case 3:return null===(l=t.$ga)||void 0===l||l.event("bindPhone btn","Click","".concat((0,g.R7)()," send code to phone")),n.next=4,f["default"].common.sendLoginPhone(o);case 4:r=n.sent,t.startTiming(),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_SMS,t.sendSmsBtnText||t.$t("v2_btn_sendBtn"));case 5:null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(r)),n.next=7;break;case 6:n.prev=6,u=n["catch"](0),null===(d=t.$ga)||void 0===d||d.event("bindPhone btn","Click","".concat((0,g.R7)()," send code to phone error ").concat(u.code)),t.errorCodeHandle(u),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(u));case 7:return n.prev=7,t.isSendLoading=!1,n.finish(7);case 8:case"end":return n.stop()}},n,null,[[0,6,7,8]])}))()},handleBindSend:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s,l,d;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isSendLoading=!0,o={areaCode:t.areaCode,phone:t.phone,smsType:t.smsType,scene:"BIND_PHONE"},t.resetErrorCode(),null===(i=t.$ga)||void 0===i||i.event("bindPhone btn","Click","".concat((0,g.R7)()," send code to phone")),n.next=1,t.getParamWithTicket({moduleName:t.moduleName,param:o,result:t.captchaResult});case 1:return r=n.sent,(0,S.XP)(S.j9.STEP_1,{path:w.Lq.SEND_SMS,scene:w.Nd.BINDING_PHONE_NEW_SMS}),n.next=2,f["default"].common.sendSmsCode(r);case 2:s=n.sent,(0,S.XP)(S.j9.STEP_4,{path:w.Lq.SEND_SMS,scene:w.Nd.BINDING_PHONE_NEW_SMS}),t.startTiming(),null===(a=t.$ga)||void 0===a||a.event("bindPhone btn","Click","".concat((0,g.R7)()," send code to phone success")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t("v2_btn_sendBtn")),null!==e&&void 0!==e&&e.success&&(null===e||void 0===e||e.success(s)),n.next=4;break;case 3:n.prev=3,d=n["catch"](0),null===(l=t.$ga)||void 0===l||l.event("bindPhone btn","Click","".concat((0,g.R7)()," send code to phone error ").concat(d.code)),t.errorCodeHandle(d,"resetCaptcha"),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SEND_BIND_SMS,t.sendSmsBtnText||t.$t("v2_btn_sendBtn"),(null===d||void 0===d?void 0:d.code)||E.Sc),null!==e&&void 0!==e&&e.error&&(null===e||void 0===e||e.error(d));case 4:return n.prev=4,t.isSendLoading=!1,null!==e&&void 0!==e&&e["finally"]&&(null===e||void 0===e||e["finally"]()),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[0,3,4,5]])}))()},handleNext:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u,h,p;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoading=!0,e.resetErrorCode(),"VERIFY_EMAIL"!==e.activeName){t.next=2;break}return null===(n=e.$ga)||void 0===n||n.event("bindPhone btn","Click","".concat((0,g.R7)()," check code to email")),(0,S.XP)(S.j9.STEP_6,{path:w.Lq.EMAIL_VALIDATION,scene:w.Nd.BINDING_PHONE_EMAIL,operationalType:S.xe.SEND_EMAIL}),t.next=1,f["default"].webBinding.validateEmail({emailCode:e.code});case 1:o=t.sent,(0,S.kL)(),e.ticket=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.emailValidateTicket,null===(a=e.$ga)||void 0===a||a.event("bindPhone btn","Click","".concat((0,g.R7)()," check code to email success")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_EMAIL,e.$t("v2_btn_next")),e.verificationMethod="",t.next=4;break;case 2:return null===(r=e.$ga)||void 0===r||r.event("bindPhone btn","Click","".concat((0,g.R7)()," check code to security phone")),t.next=3,f["default"].account.phoneValidation({smsCode:e.code,verificationMethod:"SECURE",scene:"BIND_PHONE"});case 3:u=t.sent,e.ticket=(null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.validateTicket)||(null===u||void 0===u||null===(l=u.data)||void 0===l?void 0:l.phoneValidateTicket),null===(d=e.$ga)||void 0===d||d.event("bindPhone btn","Click","".concat((0,g.R7)()," check code to security phone success")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_SMS,e.$t("v2_btn_next")),e.verificationMethod="SECURE";case 4:e.next(),t.next=6;break;case 5:t.prev=5,p=t["catch"](0),null===(h=e.$ga)||void 0===h||h.event("bindPhone btn","Click","".concat((0,g.R7)()," check code to email error ").concat(p.code)),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_EMAIL,e.$t("v2_btn_next"),(null===p||void 0===p?void 0:p.code)||E.Sc),e.errorCodeHandle(p);case 6:return t.prev=6,e.isLoading=!1,t.finish(6);case 7:case"end":return t.stop()}},t,null,[[0,5,6,7]])}))()},handleConfirm:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,a={areaCode:e.areaCode,phone:e.phone,smsCode:e.code,emailValidateTicket:e.ticket},"SECURE"===e.verificationMethod&&(a.verificationMethod="SECURE"),e.resetErrorCode(),null===(n=e.$ga)||void 0===n||n.event("bindPhone btn","Click","".concat((0,g.R7)()," check code and bind phone")),(0,S.XP)(S.j9.STEP_6,{path:w.Lq.PHONE_BINGDING,scene:w.Nd.BINDING_PHONE_NEW_SMS}),t.next=1,f["default"].webBinding.bindingPhone(a);case 1:(0,S.kL)(),null===(i=e.$ga)||void 0===i||i.event("bindPhone btn","Click","".concat((0,g.R7)()," check code and bind phone success")),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_BIND_SMS,e.$t("v2_weapp_binding_phone_submit")),e.successNavigateHandle(),t.next=3;break;case 2:t.prev=2,r=t["catch"](0),e.isLoading=!1,null===(o=e.$ga)||void 0===o||o.event("bindPhone btn","Click","".concat((0,g.R7)()," check code and bind phone error ").concat(r.code)),(0,N.HF)(v.tU.ACCOUNT_BIND_PHONE_SUBMIT_BIND_SMS,e.$t("v2_weapp_binding_phone_submit"),(null===r||void 0===r?void 0:r.code)||E.Sc),e.errorCodeHandle(r,"resetCaptcha");case 3:case"end":return t.stop()}},t,null,[[0,2]])}))()},successNavigateHandle:function(){var e={title:this.$t("v2_tips_binding_phone_success"),subTitle:this.$t("v2_tips_binding_phone_success_text"),redirectBtnText:this.$t("v2_btn_done"),callbackUrl:(0,g.TP)()};this.updateNextData({nextData:e}),this.$router.push({path:"/account/success",query:this.$route.query})},fetchUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a,o,r,s,l,d,u;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("zh_CN"===e.lang){t.next=1;break}return e.failNavigateHandle(e.$t("v2_error_code_520")),t.abrupt("return");case 1:return t.prev=1,t.next=2,f["default"].common.getSecureBindingInfo();case 2:n=t.sent,n.data.canBindPhone?(e.maskEmail=n.data.maskEmail||"",r=Array.isArray(null===(i=n.data)||void 0===i?void 0:i.maskSecurePhone)?n.data.maskSecurePhone[0]||"":(null===(a=n.data)||void 0===a?void 0:a.maskSecurePhone)||"",e.maskSecurityPhone=r||"",e.hasEmail=!!e.maskEmail,s=!(null===(o=n.data)||void 0===o||!o.sameAsPrimaryMobile),e.hasSecurityPhone=!!e.maskSecurityPhone&&!s,e.hasSecurityPhone&&e.hasEmail?(e.activeName="choose-verify",e.moduleName=p.Sn.SEND_VALIDATE_EMAIL):e.hasSecurityPhone?(e.activeName="VERIFY_SECURITY_PHONE",e.moduleName=p.Sn.MODIFY_MOBILE):(e.activeName="VERIFY_EMAIL",e.maskInfo=e.maskEmail,e.moduleName=p.Sn.SEND_VALIDATE_EMAIL),e.inited=!0):n.data.maskRegisterPhone?(l=(0,g.TP)(),window.location.replace(l)):e.failNavigateHandle(e.$t("v2_error_code_556")),t.next=4;break;case 3:t.prev=3,u=t["catch"](1),d=u.code?e.$t("v2_error_code_".concat(u.code)):e.$t("v2_tips_off_line"),e.failNavigateHandle(d);case 4:case"end":return t.stop()}},t,null,[[1,3]])}))()},startTiming:function(e){var t=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){t.count--,t.count<=0&&(window.clearInterval(t.interval),t.interval=null,e&&e())},1e3)},resetCaptcha:function(){var e,t;this.captchaResult=null,null===(e=this.$refs)||void 0===e||null===(e=e.VerifyAccount)||void 0===e||e.resetCaptcha(),null===(t=this.$refs)||void 0===t||null===(t=t.BindAccount)||void 0===t||t.resetCaptcha()},resetErrorCode:function(){this.errorCode="",this.errorMsg=""},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,g.hL)()};this.updateNextData({nextData:t}),this.$router.push({path:"/fail",query:this.$route.query})},errorCodeHandle:function(e,t){if(e.code){var n=e.code;("resetCaptcha"===t||E.f9.includes(n))&&(this.setShowCaptcha({moduleName:this.moduleName,show:!0}),this.resetCaptcha()),this.errorMsg=this.$t("v2_error_code_".concat(e.code)),this.errorCode=n}else this.errorMsg=this.$t("v2_tips_off_line")},handleSendBtnTextChange:function(e){this.sendEmailBtnText=e},handleSendSmsBtnTextChange:function(e){this.sendSmsBtnText=e}}),watch:{initData:{handler:"fetchUserInfo",immediate:!0}},components:{VerifyAccount:l.A,BindAccount:d.A,ChooseVerify:u.A,acLink:C.A},beforeRouteEnter:function(e,t,n){n(function(e){document.title="".concat(e.$t("v2_common_system_title")," | ").concat(e.$t("v2_title_binding_phone"))})}},I=O,R=n(7358),U=(0,R.A)(I,i,a,!1,null,null,null),L=U.exports},71851:function(e,t,n){n.d(t,{A:function(){return u}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("error-panel",{attrs:{className:"page-fail",mainTitle:e.$t("v2_common_error_description"),subTitle:e.errorMsg,mainJumpBtnText:e.$t("v2_common_jump_to_store"),subJumpBtnText:e.subJumpBtnText},on:{jumpMain:e.handleJumpStore,jumpSub:e.handleBack}})},a=[],o=n(19740),r=n(17782),s={name:"Fail",mixins:[r.A],mounted:function(){this.goBack()},components:{ErrorPanel:o.A}},c=s,l=n(7358),d=(0,l.A)(c,i,a,!1,null,null,null),u=d.exports},74747:function(e,t,n){n.d(t,{A:function(){return et}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{login:!0,"ac-oauth-top":e.isShowLoginWith}},[n("ac-title",[e._v(e._s(e.$t("v2_title_login_hint")))]),e.isShowLoginWith?[n("login-with",{attrs:{dividerPosition:e.DIVIDER_POSITION.BOTTOM}})]:e._e(),n("ac-tabs",{attrs:{tabNavShow:e.isSupportPhone&&(e.showLoginPassword||e.showLoginPhoneVerify||e.showLoginWechat)},on:{"tab-click":e.onClickTab},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.supportWechatTab?n("ac-tab-pane",{attrs:{name:e.$t("v2_wechat_login"),label:e.LOGIN_TYPES.WITH_WECHAT,acLabel:e.USAGE_TAG_VALUE.WECHAT_LOGIN_TAB}},[n("login-wechat",{on:{initError:e.handleInitError}})],1):e._e(),n("ac-tab-pane",{attrs:{label:e.LOGIN_TYPES.WITH_MESSAGE,name:e.$t("v2_weapp_login_tab_name_message"),acLabel:e.USAGE_TAG_VALUE.MESSAGE_LOGIN_TAB}},[n("login-phone-verify",{directives:[{name:"show",rawName:"v-show",value:e.showLoginPhoneVerify,expression:"showLoginPhoneVerify"}],ref:"loginPhoneVerify",attrs:{loading:e.isLoading},on:{next:e.handleNext,phoneValidError:e.handlePhoneValidError}}),e.showLoginMessage?n("login-message",{ref:"loginMessage",on:{sendSms:e.handleSendSms,smsLogin:e.fetchSmsLogin}}):e._e()],1),n("ac-tab-pane",{attrs:{label:e.LOGIN_TYPES.WITH_PASSWORD,name:e.$t("v2_weapp_login_tab_name_password"),acLabel:e.USAGE_TAG_VALUE.PASSWORD_LOGIN_TAB}},[n("login-password",{directives:[{name:"show",rawName:"v-show",value:e.showLoginPassword,expression:"showLoginPassword"}],ref:"loginPassword",attrs:{loading:e.isLoading},on:{"update:loading":function(t){e.isLoading=t},changeTab:e.handleChangeTab}})],1)],1),e.showAgree?n("ac-login-agree"):e._e(),e._e(),e.guestLoginButtonVisible?n("ac-guest-purchase"):e._e()],2)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(82556),d=n(89902),u=n(28380),h=n(21842),p=n(74949),m=n(37151),_=n(88333),v=n(43435),f=n(92066),g=n(31272),E=n(46918),T=n(51501),b=n(20991),N=n(70780),C=n(1418),S=n(3372),w=n(40759),A=n(72409),k=n(11579),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showButtonWechat||e.showThirdLogin?n("div",{staticClass:"login-with with-note"},[e.dividerPosition===e.DIVIDER_POSITION.TOP?n("ac-divider",{staticStyle:{"margin-top":"8px"}},[e._v(" "+e._s(e.$t("v2_tips_login_width_Bo"))+" ")]):e._e(),e.showButtonWechat?[e.wechatLoginQR?n("ac-wechat-qr",{ref:"wechatQR"}):e._e(),n("ac-button",{staticClass:"btn login-btn lg login-with-btn second-btn",attrs:{size:"large",block:"",buttonType:e.$t("v2_wechat_login")},on:{click:e.handleWechatLogin}},[n("ac-icon",{staticClass:"ac-with-icon",attrs:{name:"wechat-account",color:"rgba(0,0,0,0.65);",size:20}}),n("span",{staticClass:"login-with-btn-text"},[e._v(e._s(e.$t("v2_wechat_login")))])],1)]:e._e(),e.showThirdLogin?[e.showAppleLogin?n("ac-button",{staticClass:"btn login-btn lg login-with-btn second-btn",attrs:{size:"large",block:"",buttonType:e.$t("v2_google_login"),acLabel:e.USAGE_TAG_VALUE.APPLE_LOGIN_BUTTON},on:{click:e.handleAppleLogin}},[n("ac-icon",{staticClass:"ac-with-icon",attrs:{name:"apple-account",color:"rgba(0,0,0,0.65);",size:20}}),n("span",{staticClass:"login-with-btn-text"},[e._v(e._s(e.$t("v2_apple_login")))])],1):e._e(),e.showGoogleLogin?n("ac-button",{staticClass:"btn login-btn lg login-with-btn second-btn",attrs:{size:"large",block:"",buttonType:e.$t("v2_google_login"),acLabel:e.USAGE_TAG_VALUE.GOOGLE_LOGIN_BUTTON},on:{click:e.handleGoogleLogin}},[n("ac-icon",{staticClass:"ac-with-icon",attrs:{name:"google-account",color:"rgba(0,0,0,0.65);",size:20}}),n("span",{staticClass:"login-with-btn-text"},[e._v(e._s(e.$t("v2_google_login")))])],1):e._e(),e.showFacebookLogin?n("ac-button",{staticClass:"btn login-btn lg login-with-btn second-btn",attrs:{size:"large",block:"",buttonType:e.$t("v2_facebook_login"),acLabel:e.USAGE_TAG_VALUE.FACEBOOK_LOGIN_BUTTON},on:{click:e.handleFacebookLogin}},[n("ac-icon",{staticClass:"ac-with-icon",attrs:{name:"facebook-account",color:"rgba(0,0,0,0.65);",size:20}}),n("span",{staticClass:"login-with-btn-text"},[e._v(e._s(e.$t("v2_facebook_login")))])],1):e._e()]:e._e(),e.dividerPosition===e.DIVIDER_POSITION.BOTTOM?n("ac-divider",{staticStyle:{"margin-bottom":"8px"}},[e._v(" "+e._s(e.$t("v2_tips_login_width_Bo"))+" ")]):e._e()],2):e._e()},I=[],R=n(52621),U=n(90953),L=n(70235),y=n(39567);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V={name:"login-with",inheritAttrs:!0,data:function(){return{wechatLoginData:null,USAGE_TAG_VALUE:w.tU,DIVIDER_POSITION:b.uw}},props:{dividerPosition:{type:String,default:b.uw.TOP}},computed:D(D({},(0,p.L8)({initData:m.A.common.getter.initData,wechatLoginVisible:m.A.common.getter.wechatLoginVisible,getConfigCaptcha:m.A.captcha.getter.getConfig,lang:m.A.common.getter.lang})),{},{wechatLoginQR:function(){var e;return(0,y.P3)("wechatLoginQR")||(null===(e=this.initData)||void 0===e||null===(e=e.customizedPageConfig)||void 0===e?void 0:e.wechatLoginQR)},showFacebookLogin:function(){var e;return(null===(e=this.initData)||void 0===e||null===(e=e.customizedPageConfig)||void 0===e?void 0:e.facebookLoginVisible)||!1},showGoogleLogin:function(){var e;return(null===(e=this.initData)||void 0===e||null===(e=e.customizedPageConfig)||void 0===e?void 0:e.googleLoginVisible)||!1},showAppleLogin:function(){var e;return(null===(e=this.initData)||void 0===e||null===(e=e.customizedPageConfig)||void 0===e?void 0:e.appleLoginVisible)||!1},showThirdLogin:function(){return this.showFacebookLogin||this.showGoogleLogin||this.showAppleLogin},showButtonWechat:function(){return!1}}),mounted:function(){},methods:{getWechatInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.wechatLoginVisible||!e.wechatLoginQR){t.next=2;break}return t.next=1,_["default"].wechat.wxLoginInfo({actionType:"LOGIN",type:"Wechat"});case 1:n=t.sent,e.wechatLoginData=n.data;case 2:case"end":return t.stop()}},t)}))()},handleWechatLogin:function(){var e,t;null===(e=this.$ga)||void 0===e||e.event("wechat login btn","Click","".concat((0,g.R7)()," login goto wechat login")),null===(t=this.$ga)||void 0===t||t.event("click wechat login btn","Click","".concat((0,g.R7)()," login goto wechat login")),this.wechatLoginData?this.$refs.wechatQR.show(this.wechatLoginData):window.location.href=(0,y.Qq)((0,g.dw)("oauth/wechat/code.do"),D({appId:(0,g.R7)(),backUrl:(0,g.TP)(),guestLoginButtonVisible:(0,g.El)()},this.$route.query))},handleFacebookLogin:function(){window.location.href=(0,y.Qq)((0,g.dw)("oauth/facebook/code.do"),D({appId:(0,g.R7)(),backUrl:(0,g.TP)()},this.$route.query))},handleGoogleLogin:function(){window.location.href=(0,y.Qq)((0,g.dw)("oauth/google/code.do"),D({appId:(0,g.R7)(),backUrl:(0,g.TP)()},this.$route.query))},handleAppleLogin:function(){window.location.href=(0,y.Qq)((0,g.dw)("oauth/apple/code.do"),D({appId:(0,g.R7)(),backUrl:(0,g.TP)()},this.$route.query))}},components:{acWechatQr:U.A,acButton:R.A,acDivider:L.A},watch:{wechatLoginVisible:{handler:"getWechatInfo",immediate:!0}}},x=V,M=n(7358),B=(0,M.A)(x,O,I,!1,null,null,null),$=B.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_content login_pwd_content",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleLoginClick.apply(null,arguments))}}},[n("ac-input",{attrs:{type:"text",name:"username",errorMsg:e.usernameError,valid:e.usernameValidateResult,showError:e.showLoginError,label:e.usernameLabel,inputType:e.usernameLabel,origin:"userNameTrim",isFocusOnMounted:!e.loading},on:{blurValidate:function(t){return e.blurUsernameValid(!e.isComplexValidate)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("ac-input",{ref:"passwdInputRef",attrs:{type:"password",errorMsg:e.passwordError,valid:e.passwordValidateResult,showError:e.showLoginError,label:e.passwordLabel,passwordIcon:!0,origin:e.loginPassword,inputType:e.passwordLabel,autoScrollOnFocus:e.pwdAutoScrollOnFocus,labelId:"loginPasswordLabelId",passwordToggleName:e.PASSWORD_TOGGLE_BUTTON_NAME.LOGIN_PASSWORD},on:{blurValidate:e.blurPasswordValid},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.alertLinkType!==e.LOGIN_PWD_ERROR_ALERT_LINK_TYPE.EMAIL_PWD_ERROR,expression:"alertLinkType !== LOGIN_PWD_ERROR_ALERT_LINK_TYPE.EMAIL_PWD_ERROR"}],staticClass:"forget-password text-break"},[n("ac-link",{attrs:{type:"primary",to:{path:"/reset",query:this.$route.query},acLabel:e.USAGE_TAG_VALUE.FORGET_PASSWORD},on:{mousedown:e.mouseoverResetPasswd,mouseup:e.mouseleaveResetPasswd,click:e.hadnleResetPasswdClick}},[e._v(" "+e._s(e.$t("v2_tips_forgot_password"))+" ")])],1),e.showCaptcha?n("div",{class:"captcha "+("googleCaptchaV3"===e.captchaType?"":"pt-6")},[n("ac-captcha",{ref:"captcha",attrs:{config:e.captchaConfig,valid:e.captchaValid,showError:e.showCaptchaError,errorMsg:e.captchaError,errorCode:e.errorCode},on:{validate:e.onCaptchaValidate,enter:e.handleLoginClick}})],1):e._e(),n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isShowAlertLink||e.errorMsg?n("div",{staticClass:"ac-error-container"},[n("ac-alert",[e.isShowAlertLink?[e._v(" "+e._s(e.alertText)+" "),n("ac-link",{staticClass:"login-alert-link",attrs:{acLabel:e.alertLinkLabel},on:{click:e.handleClickAlertLink}},[e._v(" "+e._s(e.alertLinkText)+" ")])]:[e._v(" "+e._s(e.errorMsg)+" ")]],2)],1):e._e()]),e.isShowSubscriptionCheck?n("ac-checkbox",{staticClass:"ac-login-subscription",attrs:{showCheckBox:!0},model:{value:e.loginSubscription,callback:function(t){e.loginSubscription=t},expression:"loginSubscription"}},[n("span",{staticClass:"text-break"},[e._v(e._s(e.$t("v2_tips_password_login_subscription")))])]):e._e(),n("div",{staticClass:"action"},[n("ac-button",{staticClass:"btn login-btn primary lg",attrs:{size:"large",type:"primary",block:"",loading:e.loading,viewDisabled:e.loginPwdDisabled,buttonType:e.loginBtnTxt,acLabel:e.USAGE_TAG_VALUE.LOGIN_BUTTON},on:{click:e.handleLoginClick}},[e._v(" "+e._s(e.loginBtnTxt)+" ")]),n("link-to-register")],1)],1)},H=[],j=n(82068),F=n(85085),W=n(54915),X=n(68643),Y=n(46371),Z=n(60601),J=n(95441),Q=n(22680),q=n(78012),z=n(54686),K=n(53392),ee=n(3901),te=n(11663),ne=n(56090);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oe=q.Sn.LOGIN,re={name:"Captcha-mixins",mixins:[ne.A],data:function(){return{captchaResult:null}},computed:ae(ae({},(0,p.L8)({getConfigCaptcha:m.A.captcha.getter.getConfig})),{},{captchaConfig:function(){return this.getConfigCaptcha(oe)},showCaptcha:function(){return this.captchaConfig.show},captchaType:function(){var e;return null!==(e=this.$refs.captcha)&&void 0!==e&&e.type?this.$refs.captcha.type:this.captchaConfig.type},captchaValid:function(){return!(this.showCaptcha&&!this.captchaResult)&&!T.vF.includes(this.errorCode)},showCaptchaError:function(){return this.captchaError&&this.errorMsg?this.captchaType===q.Ni.IMAGE:this.showFlagCaptchaError},captchaError:function(){return T.vF.includes(this.errorCode)?this.$t("v2_error_code_".concat(this.errorCode)):this.errorCode||!this.showCaptcha||this.captchaResult?null:this.captchaType===q.Ni.IMAGE?this.$t("v2_error_required_verification_code"):this.$t("v2_smart_captcha_required")},isComplexValidate:function(){return this.captchaConfig.isComplexValidate}}),methods:ae(ae({},(0,p.PY)({clearTicket:m.A.captcha.mutation.clearTicket,setShowCaptcha:m.A.captcha.mutation.setShow})),{},{onCaptchaValidate:function(e,t){this.captchaResult=t,e!==q.Ni.GOOGLE_V3&&this.resetErrorCode(),this.clearTicket({moduleName:oe})}}),components:{acCaptcha:te.A}};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var le=q.Sn.LOGIN,de={name:"login-password",mixins:[re],props:{loading:Boolean},data:function(){return{errorMsg:"",errorCode:"",showLoginError:!1,showFlagCaptchaError:!1,username:"",password:"",loginBtnTxt:this.$t("v2_btn_login"),usernameValidateResult:!0,passwordValidateResult:!0,isFocus:!1,loginPassword:"loginPassword",isGuide:!1,hoverResetPasswd:!1,loginSubscription:!1,showGoogleCaptchaV3:!1,USAGE_TAG_VALUE:w.tU,LOGIN_PWD_ERROR_ALERT_LINK_TYPE:b.U1,currentGoogleCaptchaV3Token:"",PASSWORD_TOGGLE_BUTTON_NAME:w.W0}},created:function(){sessionStorage.getItem("accountEmail")&&(this.username=sessionStorage.getItem("accountEmail"),this.isGuide=!0)},computed:ce(ce({},(0,p.L8)({initData:m.A.common.getter.initData,lang:m.A.common.getter.lang})),{},{isSupportPhone:function(){return this.initData&&this.initData.appConfig&&"on"===this.initData.appConfig["".concat((0,g.R7)(),".phone.").concat(this.lang,".switch")]},isSupportEmail:function(){return this.$store.getters.isSupportEmailRegister((0,g.R7)(),this.lang)},accountType:function(){return(0,Q.xf)(this.username)?"1":this.isSupportPhone&&(0,Q.tp)(this.username)?"2":"0"},areaCode:function(){return"2"===this.accountType?"86":""},phone:function(){return"2"===this.accountType?this.username:""},email:function(){return"1"===this.accountType?this.username:""},usernameLabel:function(){return this.isSupportPhone?this.$t("v2_placeholder_username"):this.$t("v2_placeholder_email")},usernameError:function(){return this.username?"0"===this.accountType?this.isSupportPhone?this.$t("v2_error_format_username"):this.$t("v2_error_format_email"):null:this.isSupportPhone?this.$t("v2_error_required_username"):this.$t("v2_error_required_email")},passwordLabel:function(){return this.$t("v2_placeholder_password")},passwordError:function(){return this.password?null:this.$t("v2_error_required_password")},isShowSubscriptionCheck:function(){return(0,z.oG)()},alertLinkType:function(){if(this.errorCode===T.uH)return"1"===this.accountType?b.U1.EMAIL_PWD_ERROR:(0,z.Xo)()===K.Y$.CHINESE_LANG?b.U1.PHONE_PWD_ERROR:"";if(this.errorCode===T.VR){if("2"===this.accountType)return(0,z.Xo)()===K.Y$.CHINESE_LANG?b.U1.PHONE_PWD_ERROR:"";if(this.isSupportEmail)return b.U1.EMAIL_NOT_EXIST}return null},isShowAlertLink:function(){return!!this.alertLinkType},alertText:function(){switch(this.alertLinkType){case b.U1.PHONE_PWD_ERROR:return this.$t("v2_login_tips_sms_login_alert");case b.U1.EMAIL_PWD_ERROR:return this.$t("v2_login_tips_reset_passwd_alert");case b.U1.EMAIL_NOT_EXIST:return this.$t("v2_login_tips_register_account_alert");default:return""}},alertLinkText:function(){switch(this.alertLinkType){case b.U1.PHONE_PWD_ERROR:return this.$t("v2_login_tips_sms_login");case b.U1.EMAIL_PWD_ERROR:return this.$t("v2_login_tips_reset_passwd");case b.U1.EMAIL_NOT_EXIST:return this.$t("v2_login_tips_register_account");default:return""}},alertLinkLabel:function(){switch(this.alertLinkType){case b.U1.PHONE_PWD_ERROR:return w.tU.LOGIN_ERROR_GUIDE_MESSAGE_LOGIN;case b.U1.EMAIL_PWD_ERROR:return w.tU.LOGIN_ERROR_GUIDE_RESET_PASSWORD;case b.U1.EMAIL_NOT_EXIST:return w.tU.LOGIN_ERROR_GUIDE_REGISTER;default:return}},loginPwdDisabled:function(){return!(this.captchaValid&&this.password&&!this.usernameError)},pwdAutoScrollOnFocus:function(){return E.Ac},isCheckGoogleCaptchaV3:function(){return this.lang!==K.Y$.CHINESE_LANG&&!this.isHadGetGoogleCaptchaV3Token},captchaType:function(){var e,t,n=null===(e=this.$store.state.captcha[le])||void 0===e?void 0:e.currentCaptchaIndex;return null===(t=this.$store.state.captcha[le])||void 0===t||null===(t=t.captchaList)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.captchaType}}),mounted:function(){sessionStorage.removeItem("accountPhone"),sessionStorage.removeItem("accountEmail"),sessionStorage.removeItem("loginMethod")},destroyed:function(){},methods:ce(ce(ce({},(0,p.PY)({})),(0,p.i0)({getParamWithTicket:m.A.captcha.action.getParamWithTicket})),{},{checkShowVerificationCodeBeforeLogin:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(i={accountType:t.accountType,areaCode:t.areaCode,phone:t.phone,appId:(0,g.R7)(),email:t.email,locale:(0,z.Xo)()},!e||t.showCaptcha||!t.username||!(0,Q.xf)(t.username)&&!(0,Q.tp)(t.username)){n.next=2;break}return n.next=1,_["default"].login.checkShowVerificationCode(i);case 1:a=n.sent,a.data.showVerificationCode&&t.setShowCaptcha({moduleName:le,show:!0});case 2:case"end":return n.stop()}},n)}))()},blurUsernameValid:function(e){this.username=this.username.trim(),this.username&&this.usernameError&&!this.hoverResetPasswd?this.usernameValidateResult=!1:(this.usernameValidateResult=!0,this.checkShowVerificationCodeBeforeLogin(e))},blurPasswordValid:function(){this.password&&this.passwordError?this.passwordValidateResult=!1:this.passwordValidateResult=!0},clickValidateUsername:function(){this.username?this.blurUsernameValid(!1):this.usernameValidateResult=!1},clickValidatePassword:function(){this.password?this.blurPasswordValid():this.passwordValidateResult=!1},checkResult:function(){if(this.clickValidateUsername(),this.clickValidatePassword(),this.usernameValidateResult&&!this.usernameError&&!this.passwordError&&this.captchaValid)return{webAccessType:this.webAccessType,accountType:this.accountType,areaCode:this.areaCode,phone:this.phone,password:this.password,email:this.email,isLoginSubscription:this.loginSubscription}},resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs.captcha)||void 0===e||e.reset(),this.clearTicket({moduleName:le})},resetErrorCode:function(){this.errorMsg=null,this.errorCode=null},sendLoginRequest:function(e){var t=this;return(0,o.A)(c().mark(function n(){var i,a,o,r,s;return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,t.getInvisibleCaptchaToken();case 1:return a=n.sent,n.next=2,t.getParamWithTicket({moduleName:le,param:e,result:t.captchaResult,invisibleToken:a});case 2:return o=n.sent,n.next=3,_["default"].login.toLogin(o);case 3:r=n.sent,t.loginBtnTxt=t.$t((null===r||void 0===r||null===(i=r.data)||void 0===i||null===(i=i.callbackUrl)||void 0===i?void 0:i.indexOf("verification"))>-1?"v2_tips_redirecting":"v2_tips_login_success_redirecting"),(0,S.HF)(w.tU.LOGIN_BUTTON,t.$t("v2_btn_login"),T.Fi),window.location.href=r.data.callbackUrl,n.next=5;break;case 4:n.prev=4,s=n["catch"](0),(0,S.HF)(w.tU.LOGIN_BUTTON,t.loginBtnTxt,s.code),t.showLoginError=!0,t.$emit("update:loading",!1),t.resetCaptcha(),t.handleErrorCode(s);case 5:case"end":return n.stop()}},n,null,[[0,4]])}))()},handleErrorCode:function(e){var t=this;e.code?(T.al.includes(e.code)?this.setShowCaptcha({moduleName:le,show:!0}):this.errorMsg=this.$te("v2_error_code_".concat(e.code))?this.$t("v2_error_code_".concat(e.code)):this.$t("v2_tips_off_line"),this.$nextTick(function(){t.errorCode=e.code})):this.errorMsg=this.$t("v2_tips_off_line")},handleLoginClick:function(){var e;this.resetErrorCode(),this.showLoginError=!1,this.showFlagCaptchaError=!1;var t=this.checkResult();if(!t)return this.showLoginError=!0,this.captchaValid||(this.showFlagCaptchaError=!0),void(0,S.HF)(w.tU.LOGIN_BUTTON,this.loginBtnTxt,T.Ut);var n,i,a=(0,y.P3)("sign");(a&&(t.sign=a),this.$emit("update:loading",!0),null===(e=this.$ga)||void 0===e||e.event("login btn","Click","".concat((0,g.R7)()," to login")),this.isGuide)&&(null===(n=this.$ga)||void 0===n||n.event("login btn","Guide","to login"),null===(i=this.$ga)||void 0===i||i.event("login btn","Guide","".concat((0,g.R7)()," to login")));this.sendLoginRequest(t)},goToReset:function(){var e;null===(e=this.$ga)||void 0===e||e.event("login btn","Click","".concat((0,g.R7)()," login goto reset view")),this.$router.push({path:"/reset",query:this.$route.query})},goToSmsLogin:function(){sessionStorage.setItem("accountPhone",this.username),this.$emit("changeTab","WITH_MESSAGE",function(){})},mouseoverResetPasswd:function(){this.hoverResetPasswd=!0},mouseleaveResetPasswd:function(){this.hoverResetPasswd=!1},hadnleResetPasswdClick:function(){sessionStorage.setItem("resetPasswdAccount",this.username),(0,ee.Fl)({type:ee.Ju.GO_TO_RESET})},goToRegister:function(){sessionStorage.setItem(Y.d.REGISTER_ACCOUNT_TYPE,Z.yn.WITH_EMAIL),sessionStorage.setItem(Y.d.REGISTER_EMAIL,this.username),this.$router.push({path:"/register",query:this.$route.query})},handleClickAlertLink:function(){switch(this.alertLinkType){case b.U1.PHONE_PWD_ERROR:this.goToSmsLogin();break;case b.U1.EMAIL_PWD_ERROR:this.hadnleResetPasswdClick(),this.goToReset();break;case b.U1.EMAIL_NOT_EXIST:this.goToRegister();break;default:break}}}),watch:{loading:{handler:function(e){e||(this.loginBtnTxt=this.$t("v2_btn_login"))},immediate:!0},username:"resetErrorCode",password:"resetErrorCode",loginSubscription:function(e){var t;e&&(null===(t=this.$ga)||void 0===t||t.event("login subscription","Click","click_exposure"))}},components:{acInput:j.A,acButton:R.A,acAlert:F.A,acLink:J.A,acCheckbox:W.A,LinkToRegister:X.A}},ue=de,he=(0,M.A)(ue,G,H,!1,null,null,null),pe=he.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_content",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleNextClick.apply(null,arguments)}}},[n("ac-input",{ref:"phoneInput",staticClass:"phone-num",attrs:{type:"tel",name:"phone",value:e.splitPhone,valid:e.phoneValidResult,showError:e.showError||e.showSendSmsError,errorMsg:e.phoneError,label:e.$t("v2_placeholder_mobile"),areaCode:e.areaCode,maxlength:e.PHONE_SPLIT_MAX_LENGTH,origin:"userNameTrim",valueRefresh:e.valueRefresh,isFocusOnMounted:!e.loading},on:{input:e.onPhoneInput,blurValidate:e.blurPhoneValid}}),e.captchaConfig.show?n("div",{class:"captcha "+("googleCaptchaV3"===e.captchaType?"":"pt-6")},[n("ac-captcha",{ref:"captcha",attrs:{config:e.captchaConfig,showError:e.showError||e.showSendSmsError,errorCode:e.errorCode},on:{validate:e.onCaptchaValidate}})],1):e._e(),n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.errorMsg?n("div",{staticClass:"ac-error-container"},[n("ac-alert",[e._v(" "+e._s(e.filteredErrorMsg)+" "),e.isInSmsAndEmailVerifyLimitErrorCodes?n("contact-c-s"):e._e()],1)],1):e._e()]),n("div",{staticClass:"action"},[n("ac-button",{attrs:{size:"large",type:"primary",loading:e.loading,block:"",acLabel:e.USAGE_TAG_VALUE.NEXT_BUTTON,viewDisabled:e.isLoginPhoneVerifyDisable},on:{click:e.handleNextClick}},[e._v(" "+e._s(e.loading?e.$t("v2_btn_login"):e.$t("v2_btn_next"))+" ")]),n("link-to-register")],1)],1)},_e=[],ve=n(4339),fe=n(95077);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Te={name:"smsCaptcha-mixins",data:function(){return{captchaResult:null}},computed:Ee(Ee({},(0,p.L8)({getConfigCaptcha:m.A.captcha.getter.getConfig})),{},{captchaConfig:function(){return this.getConfigCaptcha(this.moduleName)},captchaValid:function(){return!(this.captchaConfig.show&&!this.captchaResult)}}),methods:Ee(Ee({},(0,p.PY)({clearTicket:m.A.captcha.mutation.clearTicket})),{},{resetCaptcha:function(){var e;this.captchaResult=null,null===(e=this.$refs.captcha)||void 0===e||e.reset(),this.clearTicket({moduleName:this.moduleName})},onCaptchaValidate:function(e,t){this.captchaResult=t,e!==q.Ni.GOOGLE_V3&&this.resetErrorCode(),this.clearTicket({moduleName:this.moduleName})}}),components:{acCaptcha:te.A}};function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ce={name:"login-phone-verify",mixins:[Te],props:{loading:Boolean},data:function(){return{showError:!1,showSendSmsError:!1,SendSmsAndEmailErrorCoed:"",errorMsg:"",errorCode:"",valueRefresh:!1,phone:"",areaCode:"86",phoneValidResult:!0,USAGE_TAG_VALUE:w.tU,PHONE_MAX_LENGTH:b.NV,PHONE_SPLIT_FORMAT:b.II,PHONE_SPLIT_MAX_LENGTH:b.aF}},computed:Ne(Ne({},(0,p.L8)({initData:m.A.common.getter.initData})),{},{moduleName:function(){return q.Sn.WEB_SMS_LOGIN_OR_REGISTER},phoneValid:function(){return!!this.phone&&(0,Q.tp)(this.phone)},splitPhone:function(){try{return(0,fe.b)(this.phone,b.II)}catch(e){return this.phone}},phoneError:function(){return this.phone?(0,Q.tp)(this.phone)?"":this.$t("v2_error_format_mobile"):this.$t("v2_error_required_mobile")},isLoginPhoneVerifyDisable:function(){return!this.phoneValid||!this.captchaValid},isInSmsAndEmailVerifyLimitErrorCodes:function(){return T.Zr.includes(Number(this.SendSmsAndEmailErrorCoed))},filteredErrorMsg:function(){if(this.isInSmsAndEmailVerifyLimitErrorCodes){var e=this.$t("v2_tips_contact_cs_with_limit");return this.errorMsg.replace(e," ")}return this.errorMsg},captchaType:function(){var e,t,n=null===(e=this.$store.state.captcha[this.moduleName])||void 0===e?void 0:e.currentCaptchaIndex;return null===(t=this.$store.state.captcha[this.moduleName])||void 0===t||null===(t=t.captchaList)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.captchaType}}),mounted:function(){var e=this,t=sessionStorage.getItem("accountPhone")?sessionStorage.getItem("accountPhone"):"";t&&(this.phone=t,this.$nextTick(function(){e.$refs.phoneInput.focusInput()})),sessionStorage.removeItem("accountPhone"),sessionStorage.removeItem("accountEmail"),sessionStorage.removeItem("loginMethod")},destroyed:function(){},methods:{onPhoneInput:function(e){try{this.valueRefresh=!this.valueRefresh;var t=(0,fe.SH)(e);if(!t)return void(this.phone="");if(!(0,fe.Xs)(t))return;var n=(0,fe.b)(e,b.II);if(n===this.splitPhone)return;this.phone=t.slice(0,b.NV)}catch(i){this.phone=e}},showErrorMsg:function(e,t,n){if(e){var i=e.phone,a=e.areaCode,o=e.captchaResult;this.phone=i,this.areaCode=a,this.captchaResult=o}if("resetCaptcha"===n||t&&t.code&&T.al.includes(t.code)?(this.showSendSmsError=!1,this.resetCaptcha()):this.showSendSmsError=!0,t&&t.code){var r=this.$t("v2_error_code_".concat(t.code));this.SendSmsAndEmailErrorCoed=t.code,this.errorMsg=r}t.code||(this.errorMsg=this.$t("v2_tips_off_line"))},blurPhoneValid:function(){this.phone=this.phone.trim(),!this.phone||(0,Q.tp)(this.phone)?this.phoneValidResult=!0:this.phoneValidResult=!1},clickPhoneValid:function(){this.phone?this.blurPhoneValid():this.phoneValidResult=!1},resetErrorCode:function(){this.errorCode="",this.errorMsg="",this.SendSmsAndEmailErrorCoed=""},handleNextClick:function(){if(this.clickPhoneValid(),this.resetErrorCode(),!this.phoneValidResult||!this.captchaValid)return this.showSendSmsError=!0,void this.$emit("phoneValidError",T.f1);this.$emit("next",{phone:this.phone,areaCode:this.areaCode,captchaResult:this.captchaResult,moduleName:this.moduleName})}},watch:{phone:function(){this.resetErrorCode()}},components:{acInput:j.A,acButton:R.A,acAlert:F.A,LinkToRegister:X.A,ContactCS:ve.A}},Se=Ce,we=(0,M.A)(Se,me,_e,!1,null,null,null),Ae=we.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_content",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)}}},[n("ac-verify-code",{attrs:{name:"smsCode",maskInfo:e.phone,showError:e.showError,errorMsg:e.smsCodeError,valid:e.smsCodeValid,isLoadFocus:!0,disabled:e.count>0,loading:e.isSendLoading},on:{click:e.handleSendSms},model:{value:e.smsCode,callback:function(t){e.smsCode=t},expression:"smsCode"}},[e._v(" "+e._s(e.resendBtnTxt)+" ")]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[!e.isSmsError&&e.errorMsg?n("div",{staticClass:"ac-error-container"},[n("ac-alert",[e._v(" "+e._s(e.filteredErrorMsg)+" "),e.isInSmsAndEmailVerifyLimitErrorCodes?n("contact-c-s"):e._e()],1)],1):e._e()]),n("policy-and-subscription",{attrs:{showErrorMessage:e.showError,afterText:e.afterText},on:{checkAgreeChange:e.checkAgreeChange,subscriptionChange:e.subscriptionChange}}),n("div",{staticClass:"action"},[n("ac-button",{attrs:{size:"large",type:"primary",block:"",loading:e.isLoading,viewDisabled:!e.smsCodeValid,acLabel:e.USAGE_TAG_VALUE.MESSAGE_LOGIN_BUTTON},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.submitBtnTxt)+" ")])],1)],1)},Oe=[],Ie=n(48397),Re=n(98276);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ye={name:"login-message",components:{acButton:R.A,acVerifyCode:Ie.A,acAlert:F.A,ContactCS:ve.A,PolicyAndSubscription:Re.A},data:function(){return{phone:"",areaCode:"86",captchaResult:null,moduleName:"",errorCode:"",errorMsg:"",showError:!1,success:!1,isLoading:!1,isSendLoading:!1,interval:null,count:0,subscription:!1,checkAgree:!1,smsCode:"",afterText:"",USAGE_TAG_VALUE:w.tU}},watch:{smsCode:function(){this.resetErrorCode()}},computed:Le(Le({},(0,p.L8)({lang:m.A.common.getter.lang})),{},{resendBtnTxt:function(){return 0===this.count?this.$t("v2_btn_sendBtn"):"".concat(this.$t("v2_btn_resend_sms"),"(").concat(this.count,"s)")},submitBtnTxt:function(){return this.success?this.$t("v2_tips_login_success_redirecting"):this.$t("v2_btn_login")},isSmsError:function(){return!!T.M$.includes(this.errorCode)},smsCodeValid:function(){return!(this.isSmsError||!this.smsCode)},smsCodeError:function(){return this.isSmsError?this.$t("v2_error_code_".concat(this.errorCode)):this.smsCode?null:this.$t("v2_error_required_sms")},isInSmsAndEmailVerifyLimitErrorCodes:function(){return T.Zr.includes(Number(this.errorCode))},filteredErrorMsg:function(){if(this.isInSmsAndEmailVerifyLimitErrorCodes){var e=this.$t("v2_tips_contact_cs_with_limit");return this.errorMsg.replace(e," ")}return this.errorMsg}}),mounted:function(){},methods:Le(Le(Le({},(0,p.PY)({setShowCaptcha:m.A.captcha.mutation.setShow})),(0,p.i0)({getParamWithTicket:m.A.captcha.action.getParamWithTicket})),{},{nextSetData:function(e,t){var n=e.phone,i=e.areaCode,a=e.captchaResult,o=e.moduleName;this.phone=n,this.areaCode=i,this.captchaResult=a,this.moduleName=o,this.handleSendSmsSuccess(t)},handleErrorCode:function(e){e.code?(T.f9.includes(e.code)?this.errorMsg=this.$t("v2_error_code_702"):this.errorMsg=this.$t("v2_error_code_".concat(e.code)),this.errorCode=e.code):this.errorMsg=this.$t("v2_tips_off_line")},handleSendSmsSuccess:function(e){0===e.code&&this.startTiming()},handleSendSms:function(){var e=this;return(0,o.A)(c().mark(function t(){return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.showError=!1,e.isSendLoading=!0,e.resetErrorCode(),e.$emit("sendSms",null,{success:function(t){(0,S.HF)(w.tU.RESEND_MESSAGE_CODE,e.$t("v2_btn_sendBtn"),T.Fi),e.handleSendSmsSuccess(t)},error:function(t){(0,S.HF)(w.tU.RESEND_MESSAGE_CODE,e.$t("v2_btn_sendBtn"),t.code||T.Sc),e.showSendSmsError=!0,e.handleErrorCode(t)},finally:function(){e.isSendLoading=!1}});case 1:case"end":return t.stop()}},t)}))()},startTiming:function(){var e=this;this.count=60,this.interval&&window.clearInterval(this.interval),this.interval=window.setInterval(function(){e.count--,e.count<=0&&(window.clearInterval(e.interval),e.interval=null)},1e3)},checkSubmitValid:function(){return this.checkAgree&&this.smsCodeValid&&!this.smsCodeError},resetErrorCode:function(){this.errorCode="",this.errorMsg=""},handleSubmit:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.resetErrorCode(),n=e.checkSubmitValid(),n){t.next=1;break}return e.showError=!0,(0,S.HF)(w.tU.MESSAGE_LOGIN_BUTTON,e.$t("v2_btn_login"),T.hE),t.abrupt("return",!1);case 1:e.isLoading=!0,e.showError=!1,e.showSendSmsError=!1,i={phone:e.phone,smsCode:e.smsCode,areaCode:e.areaCode,subscription:e.subscription},e.$emit("smsLogin",i,{success:function(t){(0,S.HF)(w.tU.MESSAGE_LOGIN_BUTTON,e.$t("v2_btn_login"),T.Fi),e.success=!0,window.location.href=t.data.callbackUrl},error:function(t){var n;null===(n=e.$ga)||void 0===n||n.event("login_error_backend","Click","code_".concat(t.code," ")),(0,S.HF)(w.tU.MESSAGE_LOGIN_BUTTON,e.$t("v2_btn_login"),t.code||T.Sc),e.showError=!0,e.isLoading=!1,e.handleErrorCode(t)}});case 2:case"end":return t.stop()}},t)}))()},checkAgreeChange:function(e){this.checkAgree=e},subscriptionChange:function(e){this.subscription=e}})},Pe=ye,De=(0,M.A)(Pe,ke,Oe,!1,null,null,null),Ve=De.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ac-loading-view",{staticClass:"login-wechat-loading-page",attrs:{loading:e.isLoading,showLoadingBgPersist:!0}},[n("div",{ref:"weChatRedirect",staticClass:"login-wechat-container",attrs:{id:"wechat_login"}}),e.errorNetwork?n("div",{staticClass:"wechat-error"},[n("div",{staticClass:"wechat-error-text"},[e._v("")]),n("div",{staticClass:"wechat-error-button mt-2",on:{click:e.initNoWxQR}},[n("ac-icon",{staticClass:"ac-wechat-retry-icon",attrs:{name:"retry",size:18}})],1)]):e._e()]),n("link-to-register")],1)},Me=[],Be=n(18620),$e=n(69911);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var je={src:"https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",script:null},Fe={name:"login-wechat",data:function(){return{isLoading:!1,errorNetwork:!1,wechatLoginData:null,loginType:b.AB.wechatLogin}},components:{acLoadingView:$e.A,LinkToRegister:X.A},mounted:function(){this.initNoWxQR()},computed:{},methods:{getWechatInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.wechatLoginData){t.next=2;break}return t.next=1,_["default"].wechat.wxLoginInfo({actionType:"LOGIN",type:"Wechat",abTest:"A"});case 1:return n=t.sent,e.wechatLoginData=n.data,t.abrupt("return",n.data);case 2:return t.abrupt("return",e.wechatLoginData);case 3:case"end":return t.stop()}},t)}))()},insertScript:function(e){return new Promise(function(t,n){var i=document.createElement("script");i.src=e,i.onload=t,i.onerror=function(e){i.parentElement&&i.parentElement.removeChild(i),n(new Error("resource load failed: ".concat(e.target.src)))},document.body.appendChild(i)})},show:function(e){var t=this;this.$nextTick(function(){t.wxLogin(e),t.isLoading=!1,t.$nextTick(function(){var e;if(null!==(e=t.$refs.weChatRedirect)&&void 0!==e&&e.firstChild){t.$refs.weChatRedirect.firstChild.height="100%",t.$refs.weChatRedirect.firstChild.width="100%";var n=document.createAttribute("sandbox");n.nodeValue="allow-scripts allow-top-navigation allow-same-origin",t.$refs.weChatRedirect.firstChild.attributes.setNamedItem(n)}})})},initNoWxQR:function(){var e=this;this.errorNetwork=!1,this.isLoading=!0,je.script||(je.script=this.insertScript(je.src)),Promise.all([this.getWechatInfo(),je.script]).then(function(t){var n=(0,Be.A)(t,1),i=n[0];e.show(i),e.$emit("loadingEnd")})["catch"](function(t){e.isLoading=!1,e.errorNetwork=!0,je.script=null,e.$emit("initError",t,e.loginType)})},wxLogin:function(e){if(e){var t="data:text/css;base64,LmltcG93ZXJCb3ggLnFyY29kZSB7CiAgd2lkdGg6IDE5MnB4OwogIGhlaWdodDogMTkycHg7CiAgbWFyZ2luLXRvcDogMDsKICBib3JkZXItd2lkdGg6IDA7Cn0KCi5pbXBvd2VyQm94IC53cnBfY29kZTo6YWZ0ZXIgewogIGNvbnRlbnQ6ICcnOwogIGJhY2tncm91bmQ6IHVybCgnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTXpJaUlHaGxhV2RvZEQwaU16SWlJSFpwWlhkQ2IzZzlJakFnTUNBek1pQXpNaUlnWm1sc2JEMGlibTl1WlNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0S1BISmxZM1FnZDJsa2RHZzlJak15SWlCb1pXbG5hSFE5SWpNeUlpQnllRDBpTWlJZ1ptbHNiRDBpZDJocGRHVWlMejRLUEhCaGRHZ2dabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJaUJqYkdsd0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdROUlrMHlNaTQyT0RNZ01UVXVPVGd4TkVNeU15NDRPVGdnTVRjdU5UVTFPU0F5TXk0M05UVXpJREU1TGpZME5pQXlNaTR5TnpFNUlESXdMamsyT0RkRE1qRXVPRFF5TnlBeU1TNHpOVEUxSURJeExqWTRPRElnTWpFdU5qWTJOaUF5TVM0NU5qTTNJREl5TGpFM01USkRNakl1TURFME5DQXlNaTR5TmpReklESXlMakF5TURNZ01qSXVNemd5TXlBeU1pNHdORGs0SURJeUxqVkRNakV1TmpBNE9TQXlNaTR6TURJM0lESXhMakl3TkRRZ01qSXVNREEyTmlBeU1DNDNOek00SURJeExqazJNVFJETWpBdU16UTBPQ0F5TVM0NU1UWTBJREU1TGpnNU16a2dNakl1TVRZMU1pQXhPUzQwTkRVeUlESXlMakl4TVRKRE1UZ3VNRGM0TVNBeU1pNHpOVEU0SURFMkxqZzFNelVnTWpFdU9UWTRPU0F4TlM0NE5ETTNJREl4TGpBek1ETkRNVE11T1RJek1TQXhPUzR5TkRRNElERTBMakU1TnpZZ01UWXVOVEEzTVNBeE5pNDBNVGsxSURFMUxqQTBNemxETVRndU16azBOQ0F4TXk0M05ETTFJREl4TGpJNU1EWWdNVFF1TVRjM0lESXlMalk0TXlBeE5TNDVPREUwV2sweE9DNHdOVFV6SURFeExqVTJOVFpETVRndU5UUXpNaUF4TWk0eU1EWWdNVGd1T0RReU5DQXhNaTQ1TWpRNElERTRMamt5TVRVZ01UTXVOemMxUXpFM0xqVXlPVEVnTVRNdU9EUTRNU0F4Tmk0ek1UZ3pJREUwTGpJM01qTWdNVFV1TXpNMU15QXhOUzR5TXpBNVF6RTBMak0wTWlBeE5pNHhPVGt6SURFekxqZzRPRGNnTVRjdU16ZzFPU0F4TkM0d01USTJJREU0TGpnMU5qbERNVE11TkRZNE15QXhPQzQzT0RreUlERXlMamszTWpjZ01UZ3VOekUwTmlBeE1pNDBOelF5SURFNExqWTNNalJETVRJdU16QXhPU0F4T0M0Mk5UYzVJREV5TGpBNU56WWdNVGd1TmpjNE5pQXhNUzQ1TlRFNElERTRMamMyTVRORE1URXVORFkzTnlBeE9TNHdNelU1SURFeExqQXdNellnTVRrdU16UTFPQ0F4TUM0ME5UTTFJREU1TGpZNU1UUkRNVEF1TlRVME5TQXhPUzR5TXpJMklERXdMall4T1RnZ01UZ3VPRE13T0NBeE1DNDNNelUwSURFNExqUTBORFJETVRBdU9ESXdOU0F4T0M0eE5qQXpJREV3TGpjNE1URWdNVGd1TURBeU1pQXhNQzQxTWpBNElERTNMamd4TnpORE9DNDRORGt5TmlBeE5pNDJNekV4SURndU1UUTBOamdnTVRRdU9EVTJJRGd1TmpjeE9UWWdNVE11TURJNE5VTTVMakUxT1RnZ01URXVNek0zT0NBeE1DNHpOVGM0SURFd0xqTXhNalVnTVRFdU9UZzFOaUE1TGpjM056azRRekUwTGpJd056UWdPUzR3TkRnMU15QXhOaTQzTURReklEa3VOemt5TmlBeE9DNHdOVFV6SURFeExqVTJOVFphVFRFM0xqQXpORFlnTVRZdU5UY3pRekUyTGpjME16WWdNVFl1TlRjeE55QXhOaTQwT1RrNUlERTJMamd5TWpjZ01UWXVOVEVnTVRjdU1URXpNa014Tmk0MU1UazFJREUzTGpNNU1TQXhOaTQzTlRJeklERTNMall4TlRZZ01UY3VNRE13T1NBeE55NDJNVFU1UXpFM0xqTXhNVFlnTVRjdU5qRTJNaUF4Tnk0MU5ESTNJREUzTGpNNU5UUWdNVGN1TlRVek15QXhOeTR4TVRZNFF6RTNMalUyTkRZZ01UWXVPREl4TnlBeE55NHpNamcxSURFMkxqVTNORE1nTVRjdU1ETTBOaUF4Tmk0MU56TmFUVEl3TGpJMk5qTWdNVFl1TlRjME1rTXhPUzQ1T1RRZ01UWXVOVGN5TXlBeE9TNDNOakkxSURFMkxqYzVOalFnTVRrdU56VXhOU0F4Tnk0d056TkRNVGt1TnpNNU55QXhOeTR6TmpnM0lERTVMamsyT0RNZ01UY3VOakV4TmlBeU1DNHlOVGsySURFM0xqWXhNalJETWpBdU5UUXhNaUF4Tnk0Mk1UTXpJREl3TGpjMk16Z2dNVGN1TXprNU1pQXlNQzQzTnpRZ01UY3VNVEUzTlVNeU1DNDNPRFVnTVRZdU9ESXhNU0F5TUM0MU5UWXhJREUyTGpVM05qSWdNakF1TWpZMk15QXhOaTQxTnpReVdrMHhOUzQ0TlRZMklERXlMalUxT1RoRE1UVXVOVEV6TVNBeE1pNDFOall5SURFMUxqSXlNamdnTVRJdU9EWXdNeUF4TlM0eU1qZzVJREV6TGpFNU5UbERNVFV1TWpNMU1TQXhNeTQxTkRNM0lERTFMalV5SURFekxqZ3hOVGdnTVRVdU9EY3pNaUF4TXk0NE1URTJRekUyTGpJeU56UWdNVE11T0RBM015QXhOaTQwT1RZZ01UTXVOVE15TXlBeE5pNDBPVEkzSURFekxqRTNOekZETVRZdU5EZzVOeUF4TWk0NE1qZzBJREUyTGpJd05qSWdNVEl1TlRVek5DQXhOUzQ0TlRZMklERXlMalUxT1RoYVRURXhMamc1TlRVZ01USXVOVFl3TVVNeE1TNDFORFVnTVRJdU5UUTVOeUF4TVM0eU5UWTRJREV5TGpneE9Ea2dNVEV1TWpRMk5pQXhNeTR4TmpaRE1URXVNak0yTWlBeE15NDFNVGM0SURFeExqVXdOQ0F4TXk0M09UazNJREV4TGpnMU5qa2dNVE11T0RBNE4wTXhNaTR5TURZNElERXpMamd4TnpZZ01USXVOVEF3TVNBeE15NDFORGdnTVRJdU5URXpNU0F4TXk0eU1EVTFRekV5TGpVeU5Ua2dNVEl1T0RjeE15QXhNaTR5TXpjM0lERXlMalUzTURFZ01URXVPRGsxTlNBeE1pNDFOakF4V2lJZ1ptbHNiRDBpSXpBM1F6RTJNQ0l2UGdvOEwzTjJaejQ9Jyk7CiAgd2lkdGg6IDMycHg7CiAgaGVpZ2h0OiAzMnB4OwogIGRpc3BsYXk6IGJsb2NrOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IGNhbGMoNTAlIC0gMjRweCk7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9CgouaW1wb3dlckJveCAudGl0bGUgewogIGRpc3BsYXk6IG5vbmU7Cn0KCi5pbXBvd2VyQm94IC5pbmZvIHsKICB3aWR0aDogMTAwJTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5pbXBvd2VyQm94IC5zdGF0dXMgewogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDE2cHggMCAwIDA7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBmb250LXNpemU6IDE2cHg7CiAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44NSk7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgouaW1wb3dlckJveCAuc3RhdHVzX2ljb24gewogIG1hcmdpbi1yaWdodDogOHB4Owp9CgouaW1wb3dlckJveCAuanNfd3hfYWZ0ZXJfc2NhbiB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouaW1wb3dlckJveCAuc3RhdHVzX3R4dCB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouaW1wb3dlckJveCAuc3RhdHVzX3R4dCBoNCB7CiAgbWFyZ2luLXJpZ2h0OiA0cHg7CiAgZm9udC1zaXplOiAxNHB4OwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNjAwOwogIGxpbmUtaGVpZ2h0OiAyMHB4Owp9CgouaW1wb3dlckJveCAuc3RhdHVzX3R4dCBwIHsKICBwb3NpdGlvbjogdW5zZXQ7CiAgZm9udC1zaXplOiAxNHB4OwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNjAwOwogIGxpbmUtaGVpZ2h0OiAyMHB4Owp9CgouaW1wb3dlckJveCAuc3RhdHVzX2ljb24gewogIHdpZHRoOiAyMHB4OwogIGhlaWdodDogMjBweDsKfQoKLmltcG93ZXJCb3ggLmpzX3d4X2RlZmF1bHRfdGlwIHA6Zmlyc3QtY2hpbGQgewogIGZvbnQtc2l6ZTogMTZweDsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBsaW5lLWhlaWdodDogMjRweDsKICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg1KTsKfQouaW1wb3dlckJveCAuanNfd3hfZGVmYXVsdF90aXAgcDpub3QoOmZpcnN0LWNoaWxkKSB7CiAgZGlzcGxheTogbm9uZTsKfQo=";try{new window.WxLogin(He(He({},e),{},{id:"wechat_login",href:t,fast_login:0}))}catch(n){this.errorNetwork=!0,this.$emit("initError",n,this.loginType)}}}}},We=Fe,Xe=(0,M.A)(We,xe,Me,!1,null,null,null),Ye=Xe.exports;function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Qe=v.i.WEB_SMS_LOGIN_OR_REGISTER,qe={name:"PageLogin",components:{acTabs:l.dY,acTabPane:l.c6,acLoginAgree:d.A,acServiceLinks:u.A,LoginWith:$,LoginPassword:pe,LoginPhoneVerify:Ae,LoginMessage:Ve,LoginWechat:Ye,acGuestPurchase:h.A},data:function(){return{isLoading:!1,activeName:b.Qp,loginMessageType:"LOGIN_PHON_VERIFY",captchaTicket:null,LOGIN_TYPES:b.Y3,USAGE_TAG_VALUE:w.tU,DIVIDER_POSITION:b.uw}},created:function(){var e=this;(0,f.hA)(this.$route.query),window.onpageshow=function(){e.isLoading&&(e.isLoading=!1)};var t=sessionStorage.getItem("loginMethod");"zh_CN"===this.lang&&!t&&this.isSupportPhone?this.supportWechatTab?this.activeName=b.D0:this.activeName=b.$p:this.activeName=t||b.Qp,(0,N.S)()},computed:Je(Je({},(0,p.L8)({initData:m.A.common.getter.initData,lang:m.A.common.getter.lang,wechatLoginVisible:m.A.common.getter.wechatLoginVisible,guestLoginButtonVisible:m.A.common.getter.guestLoginButtonVisible})),{},{supportWechatTab:function(){return!E.Fr&&this.wechatLoginVisible},showOauthView:function(){return this.showThirdLogin},showThirdLogin:function(){return"zh_CN"!==this.lang&&"false"!==this.$route.query.showThirdPart},isSupportPhone:function(){return this.initData&&this.initData.appConfig&&"on"===this.initData.appConfig["".concat((0,g.R7)(),".phone.").concat(this.lang,".switch")]},autoLogin:function(){var e,t;return null!==(e=this.initData)&&void 0!==e&&e.logined&&null!==(t=this.initData)&&void 0!==t&&t.callbackUrl?this.initData.callbackUrl:null},showLoginWechat:function(){return this.activeName===this.LOGIN_TYPES.WITH_WECHAT},showLoginPassword:function(){return this.activeName===this.LOGIN_TYPES.WITH_PASSWORD},showLoginPhoneVerify:function(){return this.activeName===this.LOGIN_TYPES.WITH_MESSAGE&&"LOGIN_PHON_VERIFY"===this.loginMessageType},showLoginMessage:function(){return this.activeName===this.LOGIN_TYPES.WITH_MESSAGE&&"LOGIN_MESSAGE"===this.loginMessageType},showAgree:function(){return this.activeName===this.LOGIN_TYPES.WITH_WECHAT||this.showOauthView},isShowLoginWith:function(){return this.showOauthView&&!E._y}}),mounted:function(){var e,t;null===(e=this.$ga)||void 0===e||e.event("login page open","Click","".concat((0,g.R7)()," open login page")),null===(t=this.$ga)||void 0===t||t.event("login page open","Click","".concat((0,g.R7)()," open login page"))},methods:Je(Je(Je({},(0,p.PY)({setTicket:m.A.captcha.mutation.setTicket,setShowCaptcha:m.A.captcha.mutation.setShow})),(0,p.i0)({getParamWithTicket:m.A.captcha.action.getParamWithTicket})),{},{reportNextEvent:function(e){(0,S.HF)(w.tU.NEXT_BUTTON,this.$t("v2_btn_next"),e)},handleNext:function(e){var t=this;return(0,o.A)(c().mark(function n(){return c().wrap(function(n){while(1)switch(n.prev=n.next){case 0:t.isLoading=!0,t.handleSendSms(e,{success:function(n){t.loginMessageType="LOGIN_MESSAGE",t.reportNextEvent(T.Fi),t.$nextTick(function(){var i;document.documentElement.scrollTop=0,null===(i=t.$refs.loginMessage)||void 0===i||i.nextSetData(e,n)})},error:function(n){var i;t.reportNextEvent(n.code||T.Sc),null===(i=t.$refs.loginPhoneVerify)||void 0===i||i.showErrorMsg(e,n,"resetCaptcha")},finally:function(){t.isLoading=!1}});case 1:case"end":return n.stop()}},n)}))()},handlePhoneValidError:function(e){this.reportNextEvent(e)},handleSendSms:function(e,t){var n=this;return(0,o.A)(c().mark(function i(){var a,o,r,s,l,d,u,h;return c().wrap(function(i){while(1)switch(i.prev=i.next){case 0:return null!==e&&void 0!==e&&e.areaCode&&(n.areaCode=e.areaCode),null!==e&&void 0!==e&&e.phone&&(n.phone=e.phone),null!==e&&void 0!==e&&e.smsType&&(n.smsType=e.smsType),null!==e&&void 0!==e&&e.moduleName&&(n.moduleName=e.moduleName),null!==e&&void 0!==e&&e.captchaResult&&(n.captchaResult=e.captchaResult),o={areaCode:n.areaCode,phone:n.phone,smsType:Qe},n.isSending=!0,null===(a=n.$ga)||void 0===a||a.event("sms login btn","Click","".concat((0,g.R7)()," to send sms code")),i.prev=1,i.next=2,n.getParamWithTicket({moduleName:n.moduleName,param:o,result:n.captchaResult});case 2:return s=i.sent,n.captchaTicket=s.captchaTicket,(0,A.XP)(A.j9.STEP_1,{path:k.Lq.SEND_SMS,scene:k.Nd.LOGIN_SMS}),i.next=3,_["default"].common.sendSmsCode(s);case 3:l=i.sent,(0,A.XP)(A.j9.STEP_4,{path:k.Lq.SEND_SMS,scene:k.Nd.LOGIN_SMS}),null===(r=n.$ga)||void 0===r||r.event("sms login btn","Click","".concat((0,g.R7)()," send sms code success")),t&&t.success&&t.success(l),i.next=5;break;case 4:i.prev=4,h=i["catch"](1),null===(d=n.$ga)||void 0===d||d.event("sms login btn","Click","".concat((0,g.R7)()," send sms code error ").concat(h.code)),n.errorCodeHandle(h),t&&t.error&&t.error(h),605===(null===h||void 0===h?void 0:h.code)&&(n.setShowCaptcha({moduleName:n.moduleName,show:!0}),null===(u=n.$refs.registerPhoneVerify)||void 0===u||u.resetCaptcha());case 5:return i.prev=5,t&&t["finally"]&&t["finally"](),i.finish(5);case 6:case"end":return i.stop()}},i,null,[[1,4,5,6]])}))()},fetchSmsLogin:function(e,t){var n=this;return(0,o.A)(c().mark(function i(){var a,o,r,s,l,d;return c().wrap(function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=1,n.getParamWithTicket({moduleName:n.moduleName,param:e,result:n.captchaResult});case 1:return o=i.sent,(0,A.XP)(A.j9.STEP_6,{path:k.Lq.LOGIN_OR_REGISTER_WITH_SMS_CODE,scene:k.Nd.LOGIN_SMS}),i.next=2,_["default"].login.smsLogin(o);case 2:return r=i.sent,(0,A.kL)(),null===(a=n.$ga)||void 0===a||a.event("sms login btn","Click","".concat((0,g.R7)()," sms login success")),t&&t.success&&t.success(r),i.abrupt("return",r);case 3:i.prev=3,d=i["catch"](0),null===(s=n.$ga)||void 0===s||s.event("sms login btn","Click","".concat((0,g.R7)()," to sms login error ").concat(d.code)),null===(l=n.$ga)||void 0===l||l.event("login_error_backend","Click","code_".concat(d.code," ")),n.showError=!0,n.isLoading=!1,n.errorCodeHandle(d),t&&t.error&&t.error(d);case 4:return i.prev=4,t&&t["finally"]&&t["finally"](),i.finish(4);case 5:case"end":return i.stop()}},i,null,[[0,3,4,5]])}))()},errorCodeHandle:function(e){e&&T.Gk.includes(null===e||void 0===e?void 0:e.code)&&this.captchaTicket&&this.setTicket({moduleName:this.moduleName,ticket:this.captchaTicket})},onClickTab:function(e){var t;null===(t=this.$ga)||void 0===t||t.event("click tab ".concat(e.label),"Click")},handleInitError:function(e,t){(0,C.w9)(t,e)},handleChangeTab:function(e){try{Object.values(b.Y3).includes(e)&&(this.activeName=e)}catch(t){}}}),destroyed:function(){window.onpageshow=null,sessionStorage.removeItem("accountPhone"),sessionStorage.removeItem("accountEmail"),sessionStorage.removeItem("loginMethod")},watch:{autoLogin:{handler:function(e){e&&(this.isLoading=!0,window.location.href=e)},immediate:!0}},beforeRouteEnter:function(e,t,n){n(function(e){document.title="".concat(e.$t("v2_common_system_title")," | ").concat(e.$t("v2_title_login"))})}},ze=qe,Ke=(0,M.A)(ze,i,a,!1,null,null,null),et=Ke.exports},90965:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-nickname-container"},[n("verify-nickname",{attrs:{curNickname:e.nickname}})],1)},a=[],o=n(23219),r=n(13667),s=n(52072),c=n.n(s),l=n(31272),d=n(74949),u=n(37151),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("card-container",{class:["verify-nickname-container",e.successTransition&&"success-transition"],attrs:{mainTitle:e.$t("v2_edit_nickname_title"),descriptons:e.curNickname,theme:"blue",confirmText:e.$t("v2_tips_confirm"),isConfirmDisabled:e.isDisabled,isConfirming:e.isLoading},on:{confirm:e.handleConfirmEditNickname}},[n("ac-input",{attrs:{type:"text",name:"nickname",maxlength:e.MAX_NICKNAME_LENGTH,placeholder:e.$t("v2_edit_nickname_placeholder"),valid:e.nicknameValid,errorMsg:e.nicknameValidErrorMsg,isFocusOnMounted:!0},on:{change:e.resetResError},model:{value:e.newNickname,callback:function(t){e.newNickname=t},expression:"newNickname"}}),n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.errorMsg?n("div",{staticClass:"ac-error-container"},[n("ac-alert",[e._v(e._s(e.errorMsg))])],1):e._e()])],1)},p=[],m=n(82068),_=n(85085),v=n(32368),f=n(22680),g=n(88333),E=n(51501),T=n(40759),b=n(3372),N=n(9013);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w={name:"verify-nickname",components:{acInput:m.A,CardContainer:v.A,acAlert:_.A},mounted:function(){this.successTransition=!1},data:function(){return{MAX_NICKNAME_LENGTH:N.P,newNickname:"",errorCode:0,isLoading:!1,successTransition:!1}},props:{curNickname:{type:String,required:!0,default:""}},computed:{nicknameValid:function(){return!this.newNickname||(0,f.cm)(this.newNickname)},isDisabled:function(){return!this.newNickname||!this.nicknameValid},nicknameValidErrorMsg:function(){return this.nicknameValid?"":this.$t("v2_error_code_".concat(E.Xb.ILLEGAL_NICK_NAME))},errorMsg:function(){return this.errorCode===E.Sc?this.$t("v2_tips_off_line"):this.errorCode?this.$t("v2_error_code_".concat(this.errorCode)):""}},methods:S(S({},(0,d.PY)({updateNextData:u.A.common.mutation.updateNextData})),{},{reportSensorEvent:function(e){(0,b.HF)(T.tU.ACCOUNT_SUBMIT_NICKNAME,this.$t("v2_tips_confirm"),e)},resetResError:function(){this.errorCode=""},handleResError:function(e){null!==e&&void 0!==e&&e.code?this.errorCode=e.code:this.errorCode=E.Sc},successNavigateHandle:function(){var e=this;this.successTransition=!0,setTimeout(function(){e.successTransition=!1;var t={title:e.$t("v2_tips_edit_nickname_success"),callbackUrl:"/account/profile"};e.updateNextData({nextData:t}),e.$router.push({path:"account/nickname/success",query:e.$route.query})},500)},handleConfirmEditNickname:function(){var e=this;return(0,o.A)(c().mark(function t(){var n;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.isDisabled){t.next=1;break}return t.abrupt("return");case 1:return e.isLoading=!0,e.resetResError(),t.next=2,g["default"].account.nicknameUpdate({newNickname:e.newNickname});case 2:e.reportSensorEvent(E.Fi),e.successNavigateHandle(),t.next=4;break;case 3:t.prev=3,n=t["catch"](0),e.handleResError(n),e.reportSensorEvent(n.code||E.Sc);case 4:return t.prev=4,e.isLoading=!1,t.finish(4);case 5:case"end":return t.stop()}},t,null,[[0,3,4,5]])}))()}})},A=w,k=n(7358),O=(0,k.A)(A,h,p,!1,null,null,null),I=O.exports;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L={computed:U({},(0,d.L8)({nickname:u.A.common.getter.nickname,initData:u.A.common.getter.initData})),mounted:function(){this.getUserInfo()},methods:U(U(U({},(0,d.i0)({fetchUserInfos:u.A.common.action.fetchUserInfos})),(0,d.PY)({updateNextData:u.A.common.mutation.updateNextData})),{},{getUserInfo:function(){var e=this;return(0,o.A)(c().mark(function t(){var n,i,a;return c().wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,null===(n=e.initData)||void 0===n||!n.logined||!e.nickname){t.next=1;break}return t.abrupt("return");case 1:return t.next=2,e.fetchUserInfos();case 2:t.next=4;break;case 3:t.prev=3,a=t["catch"](0),i=a.code?e.$t("v2_error_code_".concat(a.code)):e.$t("v2_tips_off_line"),e.failNavigateHandle(i);case 4:case"end":return t.stop()}},t,null,[[0,3]])}))()},failNavigateHandle:function(e){var t={title:e,callbackUrl:(0,l.hL)("login",document.URL)};this.updateNextData({nextData:t}),this.$router.push({path:"/fail",query:this.$route.query})}}),components:{VerifyNickname:I}},y=L,P=(0,k.A)(y,i,a,!1,null,null,null),D=P.exports}}]);
//# sourceMappingURL=chunk-common-b4c4f6ec.9149e65b.js.map